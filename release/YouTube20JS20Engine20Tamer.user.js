// ==UserScript==
// @name        YouTube JS Engine Tamer
// @namespace   UserScripts
// @match       https://www.youtube.com/*
// @match       https://www.youtube-nocookie.com/embed/*
// @match       https://studio.youtube.com/live_chat*
// @version     0.16.21
// @license     MIT
// @author      CY Fung
// @icon        https://raw.githubusercontent.com/cyfung1031/userscript-supports/main/icons/yt-engine.png
// @description To enhance YouTube performance by modifying YouTube JS Engine
// @grant       none
// @require     https://cdn.jsdelivr.net/gh/cyfung1031/userscript-supports@7221a4efffd49d852de0074ec503d4febb99f28b/library/nextBrowserTick.min.js
// @run-at      document-start
// @unwrap
// @inject-into page
// @allFrames   true
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/YouTube20JS20Engine20Tamer.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/YouTube20JS20Engine20Tamer.meta.js
// ==/UserScript==
(()=>{const e=window.WeakMapOriginal||window.WeakMap,n=new Set(["hostElement72","parentComponent72","localVisibilityObserver_72","cachedProviderNode_72","__template72","__templatizeOwner72","__templateInfo72","__dataHost72","__CE_shadowRoot72","elements_72","ky36","kz62","m822","disabled","allowedProps","filledButtonOverrides","openPopupConfig","supportsInlineActionButtons","allowedProps","dimension","loadTime","pendingPaint","countdownDurationMs","countdownMs","lastCountdownTimeMs","rafId","playerProgressSec","detlaSincePausedSecs","behaviorActionMap","selected","maxLikeCount","maxReplyCount","isMouseOver","respectLangDir","noEndpoints","objectURL","buttonOverrides","queuedMessages","STEP","BLOCK_ON","MIN_PROGESS","MAX_PROGESS","DISMISSED_CONTENT_KEYSPACE","followUpDialogPromise","followUpDialogPromiseResolve","followUpDialogPromiseReject","hoverJobId","JSC$14573_touched","toggleable","isConnected","scrollDistance","dragging","dragMouseStart","dragOffsetStart","containerWidthDiff","disableDeselectEvent","emojiSize","buttonOverride","shouldUseStickyPreferences","longPressTimeoutId","observeVisibleOption","observeHiddenOption","observePrescanOption","visibilityMonitorKeys","observeVisibleOption","observeHiddenOption","observePrescanOption","visibilityMonitorKeys","clearTimeout","switchTemplateAtRegistration","hasUnmounted","switchTemplateAtRegistration","stopKeyboardEventPropagation","tangoConfiguration","itemIdToDockDurationMap","actionMap","emojiManager","inputMethodEditorActive","suggestionIndex","JSC$10745_lastSuggestionRange","actionMap","asyncHandle","shouldAnimateIn","lastFrameTimestamp","scrollClampRaf","scrollRatePixelsPerSecond","scrollStartTime","scrollStopHandle"]),o=("undefined"!=typeof AbortSignal&&"function"==typeof(AbortSignal||0).timeout&&"undefined"!=typeof navigator&&/\b(Macintosh|Mac\s*OS)\b/i.test((navigator||0).userAgent||""),this instanceof Window?this:window),i="jswylcojvzts";if(o[i])throw new Error("Duplicated Userscript Calling");o[i]=!0;const r=(self||0).nextBrowserTick||0,a=r||(e=>e());let s=0;const l=(async()=>{})().constructor,c=((e,t)=>{const n=(n,o)=>{e=n,t=o};return class extends l{constructor(o=n){super(o),o===n&&(this.resolve=e,this.reject=t)}}})(),d=(e,t)=>{let n=e.toFixed(t),o=""+ +n;return o.length>n.length?n:o};let u=new c,p="function"==typeof webkitRequestAnimationFrame?window.webkitRequestAnimationFrame.bind(window):window.requestAnimationFrame.bind(window);const f=e=>p(s?e:t=>{u.then((()=>{e(t)}))});window.requestAnimationFrame=f;const y=e=>e?e.polymerController||e.inst||e||0:e||0,h="function"==typeof WeakRef?e=>e?new WeakRef(e):null:e=>e||null,g=e=>e&&e.deref?e.deref():e;"function"==typeof Document.prototype.requestStorageAccessFor&&(Document.prototype.requestStorageAccessFor=void 0,console.log("[yt-js-engine-tamer]","requestStorageAccessFor is removed."));const m=e=>(e=e||location,"/watch"===location.pathname||location.pathname.startsWith("/live/")),_="undefined"!=typeof customElements&&"function"==typeof(customElements||0).whenDefined,w=_?l.resolve(0):new l((e=>{const t="ytI-ce-registry-created";if("undefined"==typeof customElements){"__CE_registry"in document||Object.defineProperty(document,"__CE_registry",{get(){},set(e){return"object"==typeof e&&(delete this.__CE_registry,this.__CE_registry=e,this.dispatchEvent(new CustomEvent(t))),!0},enumerable:!1,configurable:!0});let n=o=>{document.removeEventListener(t,n,!1);const i=e;e=null,n=null,i()};document.addEventListener(t,n,!1)}else e()})),b=_?e=>customElements.whenDefined(e):e=>w.then((()=>customElements.whenDefined(e)));performance.timeOrigin>9&&(()=>{if(performance.now23||performance.now16||"function"!=typeof Performance.prototype.now)return;const e=performance.now23=Performance.prototype.now;let t=0,n=0,o=(performance.timeOrigin%7+1)/7-.01/7;performance.now=performance.now16=function(){const i="function"==typeof(this||0).now23?this.now23()+o:e.call(performance)+o;return n+.0015<(n=i)?t=0:t<.001428?t+=1e-6/7:(t=0,o+=1/7),i+t};let i="";if(`${performance.now()}`==`${performance.now()}`){const e="performance.now is modified but performance.now() is not strictly increasing.",t="performance.now cannot be modified and performance.now() is not strictly increasing.";i=performance.now!==performance.now16?e:t}i&&console.warn(i)})(),"function"==typeof Node.prototype.removeChild&&"function"!=typeof Node.prototype.removeChild062&&(Node.prototype.removeChild062=Node.prototype.removeChild,Node.prototype.removeChild=function(e){return"function"!=typeof this.__shady_native_removeChild||e instanceof Node&&e.parentNode===this?this.removeChild062(e):e instanceof Element&&"tp-yt-paper-tooltip"===e.is||console.warn("[yt-js-engine-tamer] Node is not removed from parent",{parent:this,child:e}),e}),(t=>{const n=e=>{e.patchOnDemand=!0,e.preferPerformance=!0,e.noPatch=!0},o=(e,t)=>{if(!e||"object"!=typeof e)return!1;const n=Object.getOwnPropertyDescriptors(e);if(n.length<=t)return!1;let o=0;for(const e in n){const t=n[e];if(!t||t.get||t.set||!t.enumerable||!t.configurable)return!1;if(!("value"in t)||"function"==typeof t.value)return!1;o++}return o>t};let i,r=0;const a=Object.getOwnPropertyDescriptor(window,"ShadyDOM");if(a&&a.configurable&&a.value&&a.enumerable&&a.writable&&(i=a.value,i&&"object"==typeof i&&o(i,0)&&(n(i),r=1)),a&&a.configurable&&a.value&&a.enumerable&&a.writable&&!a.get&&!a.set);else if(a)return void console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM is not applied [ PropertyDescriptor issue ]",a);const s=new e;console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM << 01 >>",i);const l=()=>({get(){let e=s.get(this);return"object"==typeof e&&(e=g(e)||void s.delete(this)),e},set(e){return s.set(this,h(e)),!0},enumerable:!0,configurable:!0});function c(e){const n=e;if(r<3&&"function"==typeof t&&"function"==typeof n.Wrapper&&1===n.Wrapper.length&&"object"==typeof(n.Wrapper.prototype||0)){let e={node:null};Object.setPrototypeOf(e,Element.prototype);let t=new n.Wrapper(e),o=Object.getOwnPropertyDescriptor(t,"node");o.configurable&&o.enumerable&&!o.get&&!o.set&&o.writable&&o.value===e&&!Object.getOwnPropertyDescriptor(n.Wrapper.prototype,"node")&&(Object.defineProperty(n.Wrapper.prototype,"node",l()),console.log("[yt-js-engine-tamer] FIX::ShadyDOM << WEAKREF_ShadyDOM >>"))}}let d=null;const u=function(e){if(e instanceof ShadowRoot||e instanceof ShadyDOM.Wrapper)return e;if(d){const t=g(d.get(e));t&&(d.delete(e),s.set(e,h(t)))}let t=g(s.get(e));return t||(t=new ShadyDOM.Wrapper(e),s.set(e,h(t))),t};function p(t){const n=t,o=Object.getOwnPropertyDescriptor(e.prototype,"get");if(!(o&&o.writable&&!o.enumerable&&o.configurable&&o.value)||o.get||o.set)return;let i=new Set;const r=o.value;e.prototype.get=function(e){return i.add(this),e};try{let e={node:null};Object.setPrototypeOf(e,Element.prototype),n.wrapIfNeeded(e),n.wrap(e)}catch(e){}if(e.prototype.get=r,1!==i.size)return void i.clear();const a=i.values().next().value;a instanceof e&&(d=a,"function"==typeof n.wrap&&1===n.wrap.length&&(n.wrap=function(e){return u(e)}),"function"==typeof n.wrapIfNeeded&&1===n.wrapIfNeeded.length&&(n.wrapIfNeeded=function(e){return console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - wrapIfNeeded"),u(e)}))}function f(e){const t=e,o=t.settings;if(!0!==o.inUse||!0!==t.inUse||!0!==(o.handlesDynamicScoping||t.handlesDynamicScoping))return console.log(3719,"[yt-js-engine-tamer] OMIT_ShadyDOM is not applied [02]",window.ShadyDOM),!1;c(t),r<3&&(n(o),n(t),t.isShadyRoot=function(){return console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - isShadyRoot"),!1},p(t),t.patchElementProto=function(){console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - patchElementProto")},t.patch=function(){console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - patch")})}if(i&&"function"==typeof i.Wrapper&&"object"==typeof i.settings&&"function"==typeof i.wrap){const e=i;if(!1===function(e){const t=e,o=t.settings;if(!0!==o.inUse||!0!==t.inUse||!0!==(o.handlesDynamicScoping||t.handlesDynamicScoping))return console.log(3719,"[yt-js-engine-tamer] OMIT_ShadyDOM is not applied [02]",window.ShadyDOM),!1;c(t),r<3&&(n(o),n(t),p(t))}(e))return;return r=6,void console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM << 02b >>",e)}delete window.ShadyDOM,Object.defineProperty(window,"ShadyDOM",{get:()=>i,set(e){let t=0;try{do{if(!e||!e.settings){if(r<1&&e&&"object"==typeof e&&o(e,0)){n(e),r=1;break}console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM is not applied [nv:null]",e);break}const i=Object.getOwnPropertyDescriptor(this||{},"ShadyDOM");if(!(i&&i.configurable&&i.get&&i.set)){console.log(3719,"[yt-js-engine-tamer] OMIT_ShadyDOM is not applied [ incorrect PropertyDescriptor ]",e);break}if(!1===f(e))break;r=3,console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM << 02a >>",e),t=1}while(0)}catch(e){console.log("[yt-js-engine-tamer] FIX::ShadyDOM << ERROR >>",e)}return t?(delete this.ShadyDOM,this.ShadyDOM=e):i=e,!0},enumerable:!1,configurable:!0})})("undefined"!=typeof WeakRef?WeakRef:function(){}),(()=>{const e=Object.getOwnPropertyDescriptor(Map.prototype,"size");if(!e||!0!==e.configurable)return;let t=null;const n={configurable:!0,enumerable:!0,get:function(){throw t=this,new Error}};Object.defineProperty(Map.prototype,"size",n);try{XMLHttpRequest.prototype.open.call(0)}catch(e){}if(Object.defineProperty(Map.prototype,"size",e),!t)return;const o=[...t.entries()];t.clear(),console.log("[yt-js-engine-tamer] propNeedles is cleared from scriptlet",o,t)})();{const e=window.URL||new Function("return URL")(),t=e.createObjectURL.bind(e);XMLHttpRequest=(()=>{const e=XMLHttpRequest;if("__xmMc8__"in e.prototype)return e;const n=t(new Blob([],{type:"text/plain"})),o=class extends e{constructor(...e){super(...e)}open(e,t,...o){let i=!1;if(t&&"string"==typeof t){if("string"==typeof t){let e="/"===t[0]?`.youtube.com${t}`:`${t}`;e.includes("googleads")||e.includes("doubleclick.net")||e.includes(".youtube.com/pagead/")||e.includes(".youtube.com/ptracking")||e.includes(".youtube.com/youtubei/v1/log_event?")?i=!0:e.includes(".youtube.com/api/stats/")?(e.includes(".youtube.com/api/stats/qoe?")||e.includes(".youtube.com/api/stats/ads?"))&&(i=!0):(e.includes("play.google.com/log")||e.includes(".youtube.com//?"))&&(i=!0)}}else i=!0;return i?(this.__xmMc8__=2,super.open("GET",n)):(this.__xmMc8__=1,super.open(e,t,...o))}send(...e){return 1===this.__xmMc8__?super.send(...e):2===this.__xmMc8__?super.send():(console.log("[yt-js-engine-tamer]","xhr warning"),super.send(...e))}};return o.prototype.__xmMc8__=0,((e,t)=>{const n=Object.getOwnPropertyDescriptors(t);for(const t in n)Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,n[t])})(o.prototype,e.prototype),o})()}if("function"!=typeof EventTarget.prototype.addEventListener52178&&"function"==typeof EventTarget.prototype.addEventListener){let e=function(e){if(window.Polymer&&window.Polymer.Element){let t;if(t=e.path||e.composedPath&&e.composedPath())for(const e of t){const t=y(e);e.overscrollConfig&&(e.overscrollConfig=void 0),t.overscrollConfig&&(t.overscrollConfig=void 0)}}else{let t=e.target;for(;t instanceof Element;t=t.parentElement){const e=y(t);t.overscrollConfig&&(t.overscrollConfig=void 0),e.overscrollConfig&&(e.overscrollConfig=void 0)}}},t=null,n=()=>{let e=0;const t={};Object.setPrototypeOf(t,HTMLElement.prototype);const n=new Proxy(t,{get(e,t){throw`ErrorF31.get(${t})`},set(e,t,n){throw`ErrorF33.set(${t}, ${n})`}}),o=new Proxy(t,{get(t,n){if("scrollTop"===n)return e|=8,0;if("overscrollConfig"!==n){if("scrollHeight"===n||"clientHeight"===n||"offsetHeight"===n)return 640;if("scrollLeft"===n)return e|=8,0;if("scrollWidth"===n||"clientWidth"===n||"offsetWidth"===n)return 800;throw`ErrorF45.get(${n})`}e|=16},set(e,t,n){throw`ErrorF47.set(${t}, ${n})`}}),i={};Object.setPrototypeOf(i,WheelEvent.prototype);return{euzObj:n,euyEvt:new Proxy(i,{get(t,n){if("deltaY"===n||"deltaX"===n)return e|=1,-999;if("target"===n)return e|=2,o;if("path"===n||"composedPath"===n)return e|=2,[o];throw`ErrorF51.get(${n})`},set(e,t,n){throw`ErrorF53.set(${t}, ${n})`}}),setVal:t=>{e=t},getVal:()=>e}},o=e=>{let o="",i=null;try{const{euzObj:o,euyEvt:i,getVal:r,setVal:a}=t||(t=n());if(a(0),void 0!==e.call(o,i))throw"ErrorF99";throw`RESULT${r()}`}catch(e){i=e}return i=`${i}`||"null",i.length>20&&(i=`${i.substring(0,20)}...`),o=i,"RESULT27"===o||"RESULT0"===o||o.startsWith("RESULT")&&console.log("wheel eventListener - RESULT",o,e),o},i=!1;EventTarget.prototype.addEventListener52178=EventTarget.prototype.addEventListener,EventTarget.prototype.addEventListener=function(r,a,s=void 0){if("wheel"===r&&!s&&"function"==typeof a&&1===a.length){if("RESULT27"===(a.yaujmoms||(i?"IGNORE":a.yaujmoms=o(a))))return this.overscrollConfigDisable=!0,void(i||(i=!0,n=o=null,t=null,e=null));i||this.overscrollConfigDisable||(this.overscrollConfigDisable=!0,this.addEventListener52178("wheel",e,{passive:!1}))}return this.addEventListener52178(r,a,s)}}const{pageMediaWatcher:v,shortcutKeysFixer:C,keyboardController:S}=(()=>{let t=null,n=!1,i=0,r=!1,a=!0,s=null,d=null,u="",p=0;const f=new e;let y=null;const _=()=>null!==y?y:y=getSelection()+"";let w=null;const b=function(){const e=this.init91(),n=this[this.__cPzfo__||"__NIL__"];if(n){try{(e=>{const t=new Set,n=e.api,o=function(){},i=new Proxy({},{get:(e,t)=>"get"===t?o:i}),r=function(){return i},a=new Proxy({},{get(e,t){if(t in n){if("function"==typeof n.constructor.prototype[t])return r;let e=Object.getOwnPropertyDescriptor(n,t);if(e&&e.value){if(!e.writable)return e.value;if("string"==typeof e.value)return"";if("number"==typeof e.value)return 0;if("boolean"==typeof e.value)return!1;if(e.value&&"object"==typeof e.value)return{}}}},set(e,t){throw"mwSet"}}),s=new Proxy({},{get(t,n){if("api"===n)return a;if(n in e){if("function"==typeof e.constructor.prototype[n])return r;let t=Object.getOwnPropertyDescriptor(e,n);if(t&&t.value){if(!t.writable)return t.value;if("string"==typeof t.value)return"";if("number"==typeof t.value)return 0;if("boolean"==typeof t.value)return!1;if(t.value&&"object"==typeof t.value)return{}}}},set(e,n,o){throw"boolean"==typeof o&&t.add(n),`mqSet(${n},${o})`}});let l="";try{l=`RESULT::${e.handleGlobalKeyUp.call(s,9,!1,!1,!1,!1,"Tab","Tab")}`}catch(e){l=`ERROR::${e}`}if(1===t.size){const n=t.values().next().value;l===`ERROR::mqSet(${n},true)`&&(e.__uZWaD__=n)}console.log("[yt-js-engine-tamer] global shortcut control",{__uZWaD__:e.__uZWaD__})})(n)}catch(e){}return t=h(n),n&&!n.hVhtg&&(n.hVhtg=1,n.handleGlobalKeyUp91=n.handleGlobalKeyUp,n.handleGlobalKeyUp=v.handleGlobalKeyUp,n.handleGlobalKeyDown91=n.handleGlobalKeyDown,n.handleGlobalKeyDown=v.handleGlobalKeyDown,n.__handleGlobalKeyBefore__=v.__handleGlobalKeyBefore__,n.__handleGlobalKeyAfter__=v.__handleGlobalKeyAfter__),w&&(w.resolve(),w=null),e}},v={__handleGlobalKeyBefore__(e,t,o,i,a,s,l,c){if(c){const e=f.get(c);if(6===e&&""!==_());else{if(1===e||2===e||5===e)return!1;if((6!==e||d===document.activeElement)&&""!==_())return!1}}if(32===e&&!1===t&&!1===o&&!1===i&&!1===a&&" "===s&&"Space"===l&&!n&&(r=S()))return;if(c&&("Space"===l||"Enter"===l)){const e=f.get(c);if(4===e||5===e)return!1}if(d===c&&""!==_())return!1},__handleGlobalKeyAfter__(e,t,o,a,c,d,u,f,y){if(y&&e>=32&&1===i&&Date.now()-p<40&&f===document.activeElement){if(32===e&&!1===t&&!1===o&&!1===a&&!1===c&&" "===d&&"Space"===u&&!n&&(r=S()))return;const i=g(s);let p=!1;(i&&(4===i.readyState||1===i.readyState)&&2===i.networkState&&i.duration>.01||i&&!i.paused&&!i.muted&&i.duration>.01)&&(p=!0),p&&l.resolve().then((()=>f===document.activeElement&&f.blur())).then((e=>{!1!==e&&i.focus()}))}},handleGlobalKeyUp(e,t,n,o,i,r,a){const s=document.activeElement;if(!1===("function"==typeof this.__handleGlobalKeyBefore__?this.__handleGlobalKeyBefore__(e,t,n,o,i,r,a,s):void 0))return!1;const l=this.handleGlobalKeyUp91(e,t,n,o,i,r,a);return"function"==typeof this.__handleGlobalKeyAfter__&&this.__handleGlobalKeyAfter__(e,t,n,o,i,r,a,s,l),l},handleGlobalKeyDown(e,t,n,o,i,r,a,s){const l=document.activeElement;if(!1===("function"==typeof this.__handleGlobalKeyBefore__?this.__handleGlobalKeyBefore__(e,t,n,o,i,r,a,l):void 0))return!1;const c=this.handleGlobalKeyDown91(e,t,n,o,i,r,a,s);return"function"==typeof this.__handleGlobalKeyAfter__&&this.__handleGlobalKeyAfter__(e,t,n,o,i,r,a,l,c),c}};let C=null;const S=()=>{const e=(o.yt||0).config_||(o.ytcfg||0).data_||0;if(r=!1,e&&e.EXPERIMENT_FLAGS&&e.EXPERIMENT_FLAGS.web_speedmaster_spacebar_control&&(r=!0),e&&e.EXPERIMENTS_FORCED_FLAGS&&e.EXPERIMENTS_FORCED_FLAGS.web_speedmaster_spacebar_control&&(r=!0),null===C){const t=(((e||0).WEB_PLAYER_CONTEXT_CONFIGS||0).WEB_PLAYER_CONTEXT_CONFIG_ID_KEVLAR_WATCH||0).serializedExperimentFlags;C=!!t&&(t.includes("web_enable_speedmaster=true")&&t.includes("web_speedmaster_spacebar_control=true")&&t.includes("web_speedmaster_updated_edu=true"))}return C||(r=!1),r};return{pageMediaWatcher:()=>{document.addEventListener("yt-navigate",(()=>{i=0})),document.addEventListener("yt-navigate-start",(()=>{i=0})),document.addEventListener("yt-navigate-cache",(()=>{i=0})),document.addEventListener("yt-navigate-finish",(()=>{i=1})),document.addEventListener("durationchange",(()=>{for(const e of document.querySelectorAll("#movie_player video[src], #movie_player audio[src]"))if(e.duration>.01){if(e.closest("[hidden]"))continue;return void(s=h(e))}}),{capture:!0,passive:!0}),document.addEventListener("selectionchange",(e=>{e&&e.isTrusted&&e instanceof Event&&(y=null,e.target instanceof Node&&(d=e.target))}),{capture:!0,passive:!0}),document.addEventListener("pointerdown",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0}),document.addEventListener("pointerup",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0}),document.addEventListener("keydown",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0}),document.addEventListener("keyup",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0})},shortcutKeysFixer:()=>{let e=0;const c=c=>{if(c.isTrusted&&c instanceof Event&&(p=Date.now()),n||!c.isTrusted||!(c instanceof KeyboardEvent))return;if(!i)return;if(!0===c.defaultPrevented)return;const y=g(t);if(!y)return;const h=g(s);if(!h)return;const w=((e,t)=>{let n=0;const o=document.activeElement;if(o){const i=f.get(o);"number"==typeof i?n=i:(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement?n=1:o instanceof HTMLButtonElement||o instanceof HTMLIFrameElement||o instanceof HTMLImageElement||o instanceof HTMLEmbedElement?n=2:(o instanceof HTMLElement&&o.closest("[role]")&&(n=5),(o instanceof HTMLDivElement||o instanceof HTMLAnchorElement||!(o instanceof HTMLElement)&&o instanceof Element)&&(n=2)),(2===n||5===n)&&o instanceof HTMLElement&&o.contains(t)&&(n=0),(2===n||5===n)&&e&&e.target&&e.target===o&&(o.closest("[contenteditable], input, textarea")?n=5:o.closest("button")&&(n=4)),o.closest("#movie_player")&&(n=6),f.set(o,n))}return n})(c,h);if(6===w&&""!==_());else{if(1===w||2===w||5===w)return;if((6!==w||d===document.activeElement)&&""!==_())return}if("Space"===c.code&&!(()=>{const e=(o.yt||0).config_||(o.ytcfg||0).data_||0;return a=!1,e&&e.EXPERIMENT_FLAGS&&e.EXPERIMENT_FLAGS.global_spacebar_pause&&(a=!0),e&&e.EXPERIMENTS_FORCED_FLAGS&&e.EXPERIMENTS_FORCED_FLAGS.global_spacebar_pause&&(a=!0),a})())return;if(u=u||y.__uZWaD__||"",u&&!0===y[u]&&(y[u]=!1),c.shiftKey||c.ctrlKey||c.altKey||c.metaKey)return;let b;const v=!("Space"!==c.code||c.shiftKey||c.ctrlKey||c.altKey||c.metaKey);let C=!1;if(v&&!(r=S())){const e=(e=>{let t=null,n=null,o=null;try{t=e.getAppState(),n=e.getPlayerState(),o=e.getAdState()}catch(e){}return 5===t&&-1===o&&(1===n||2===n||3===n)})(y.api);e&&m()&&h.duration>.01&&(4===h.readyState||1===h.readyState)&&2===h.networkState&&(C=!0)}if("keydown"===c.type)if(C){const o=h.paused,i=++e;l.resolve().then((()=>{if(i!==e)return;if(h.paused!==o)return;const r=function(){const e=g(t);let o,i=null;n=!0;try{let t;o=0,o|=e.handleGlobalKeyDown(32,!1,!1,!1,!1," ","Space",!1)?1:0,u?!0===e[u]?(e[u]=!1,t=e):t=e:(i=new Set,t=new Proxy(e,{get(t,n,o){const r=t[n];return"boolean"!=typeof r||(i.add(n),"string"==typeof n&&n.length<=3&&!0===r&&1===i.length&&(u=n,e.__uZWaD__=u,r=!1)),r}})),o|=t.handleGlobalKeyUp(32,!1,!1,!1,!1," ","Space")?2:0}catch(e){console.log(e)}if(n=!1,i&&1===i.size){const t=i.values().next().value;u=t,e.__uZWaD__=u}return u&&!0===e[u]&&(e[u]=!1),o}();r||(o?api.playVideo():api.pauseVideo())})),b=!0}else n=!0,b=y.handleGlobalKeyDown(c.keyCode,c.shiftKey,c.ctrlKey,c.altKey,c.metaKey,c.key,c.code,c.repeat),n=!1,u&&!0===y[u]&&(y[u]=!1);else"keyup"===c.type&&(v&&C&&!(r=S())?b=!0:(n=!0,b=y.handleGlobalKeyUp(c.keyCode,c.shiftKey,c.ctrlKey,c.altKey,c.metaKey,c.key,c.code),n=!1,u&&!0===y[u]&&(y[u]=!1)));b&&(c.preventDefault(),c.stopImmediatePropagation(),c.stopPropagation())};document.addEventListener("keydown",c,{capture:!0}),document.addEventListener("keyup",c,{capture:!0})},keyboardController:async e=>{const n=ee(e),o=te(e),i=ne(e);if(console.log("[QT,SV,DX]",[n,o,i]),!i)return;if(i===n||i===o)return;if("string"!=typeof i)return;let r="",a="";const s=new Proxy({},{get(e,t){throw"handleGlobalKeyUp"===t&&(a=r),"mbGet"},set(e,t,n){throw"mbSet"}}),l=new Proxy({},{get:(e,t)=>(r=t,s),set(e,t,n){throw"maSet"}});let d="";try{e[i].prototype.handleGlobalKeyUp.call(l)}catch(e){"mbGet"===e&&"string"==typeof a&&a.length>0&&(d=a)}if(!d)return;if("function"!=typeof e[i].prototype.init||0!==e[i].prototype.init.length)return;w=new c,e[i].prototype.__cPzfo__=d,e[i].prototype.init91=e[i].prototype.init,e[i].prototype.init=b,await w.then();const u=g(t),p=S();const f=S();console.log("[yt-js-engine-tamer] speedmaster by space (yt setting)",p,f),console.log("[yt-js-engine-tamer] p_a",u)}}})();v(),C();const E=(()=>{let e=new Set;function t(e,t){let n=function(e){return Array.from(e.values())}(e);return t.join(",")===n.join(",")}return e.add("value1"),e.add("value2"),e.add("value3"),"value1"===e.values().next().value&&(!!t(e,["value1","value2","value3"])&&(e.delete("value2"),"value1"===e.values().next().value&&(!!t(e,["value1","value3"])&&(e.add("value2"),"value1"===e.values().next().value&&(!!t(e,["value1","value3","value2"])&&(e.add("value4"),"value1"===e.values().next().value&&(!!t(e,["value1","value3","value2","value4"])&&(e.delete("value1"),e.delete("value3"),e.add("value3"),e.add("value1"),"value2"===e.values().next().value&&!!t(e,["value2","value4","value3","value1"])))))))))})(),k=Symbol(),P=Symbol(),O=Symbol(),D=new e,A=document.createElement("noscript");A.id="weakref-placeholder";const j={},R=(e,t)=>({get(){const n=this,o=n[e];if(!o)return null;const i=g(o);return!i&&t?("function"==typeof t&&t(n),A):i},set(t){return this[e]=t?h(t):null,!0},configurable:!0,enumerable:!0});new e,Symbol();(()=>{if("function"==typeof HTMLElement.prototype.hasOwnProperty72||"function"!=typeof HTMLElement.prototype.hasOwnProperty)return;const t=HTMLElement.prototype.hasOwnProperty72=HTMLElement.prototype.hasOwnProperty;let o=null,i=0;new Set;HTMLElement.prototype.hasOwnProperty=function(e){return 1!==arguments.length?t.apply(this,arguments):null!==o&&"string"==typeof e&&n.has(e)?(i++,o):this.hasOwnProperty72(e)};let r=!1;const a=function(){o=!0,i=0;const e=this.forwardDynamicProps72();return o=null,0!==i||r||(r=!0,console.log("[yt-js-engine-tamer] byPassCount = 0 in forwardDynamicProps")),i=0,e},s=e=>{"object"==typeof(e||0)&&"function"==typeof e.forwardDynamicProps&&"function"!=typeof e.forwardDynamicProps72&&(e.forwardDynamicProps72=e.forwardDynamicProps,0===e.forwardDynamicProps.length&&(e.forwardDynamicProps=a))},l=new e;Object.defineProperty(HTMLElement.prototype,"didForwardDynamicProps",{get(){return s(this.constructor.prototype),l.get(this)},set(e){return s(this.constructor.prototype),l.set(this,e),!0},enumerable:!1,configurable:!0}),w.then((()=>{"object"==typeof customElements&&"function"!=typeof customElements.define72&&"function"==typeof customElements.define&&2===customElements.define.length&&(customElements.define72=customElements.define,customElements.define=function(e,t){s(t.prototype);return this.define72(e,t)})}))})();const I=new e;let T=null;const M=e=>{if(null===T){const e=(window.yt||0).config_||0;T=!0===((e||0).EXPERIMENT_FLAGS||0).kevlar_should_maintain_stable_list}const t=function(t,n,o,i,r,a){return(t||0).length>=1?(void 0===a&&"string"==typeof n&&o&&"object"==typeof o&&this.is&&T&&(a=!o.clientSideToggleMenuItemRenderer),e.call(this,t,n,o,i,r,a)):e.call(this,void 0,n,void 0,i)};return t.originalFn=e,I.set(e,t),t},x=(()=>{const e=Symbol(),t={get:(t,n,o)=>"object"===n?g(t[e]):"__proxy312__"===n?1:t[n]},n={get:(t,n,o)=>"indexSplices"===n?g(t[e]):"__proxy312__"===n?1:t[n]};return o=>{if(o.rendererStamperApplyChangeRecord_||o.stampDomArraySplices_){const i=o.__proto__;if(!i.yzxer&&(i.rendererStamperApplyChangeRecord_||i.stampDomArraySplices_)){i.yzxer=1;const o=["rendererStamperApplyChangeRecord_","forwardRendererStamperChanges_","stampDomArraySplices_","stampDomArray_","deferRenderStamperBinding_"];for(const r of o){const o=`${r}$wq0iw_`,a=i[r];"function"==typeof a&&(i[o]||0===a.length||("stampDomArraySplices_"===r&&3===a.length?(i[o]=a,i[r]=function(r,a,s){return"string"==typeof r&&"string"==typeof a&&"object"==typeof s&&s&&s.indexSplices&&s.indexSplices.length>=1&&!s.indexSplices.rzgjr&&(s.indexSplices=s.indexSplices.map((n=>n.__proxy312__?n:(n[e]=h(n.object),n.object=null,new Proxy(n,t)))),s.indexSplices.rzgjr=1,s[e]=h(s.indexSplices),s.indexSplices=null,s=new Proxy(s,n),arguments[2]=s),i[o].call(this,r,a,s)}):"rendererStamperApplyChangeRecord_"===r&&a.length))}}}}})(),L=(e,t)=>{if(t&&e.ky36)return;if("function"==typeof e.onYtRendererstamperFinished&&!e.onYtRendererstamperFinished.km34){const t=e.onYtRendererstamperFinished,n=D.get(t)||function(){if(this.updateChildVisibilityProperties&&!this.markDirty)return t.apply(this,arguments);l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onYtRendererstamperFinished=n}if("function"==typeof e.onYtUpdateDescriptionAction&&!e.onYtUpdateDescriptionAction.km34){const t=e.onYtUpdateDescriptionAction,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onYtUpdateDescriptionAction=n}if("function"==typeof e.handleUpdateDescriptionAction&&!e.handleUpdateDescriptionAction.km34){const t=e.handleUpdateDescriptionAction,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.handleUpdateDescriptionAction=n}if("function"==typeof e.handleUpdateLiveChatPollAction&&!e.handleUpdateLiveChatPollAction.km34){const t=e.handleUpdateLiveChatPollAction,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.handleUpdateLiveChatPollAction=n}if("function"==typeof e.onTextChanged&&!e.onTextChanged.km34){const t=e.onTextChanged,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onTextChanged=n}if("function"==typeof e.onVideoDataChange&&!e.onVideoDataChange.km34){const t=e.onVideoDataChange,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onVideoDataChange=n}if("function"==typeof e.onVideoDataChange_&&!e.onVideoDataChange_.km34){const t=e.onVideoDataChange_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onVideoDataChange_=n}if("function"==typeof e.addTooltips_&&!e.addTooltips_.km34){const t=e.addTooltips_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.addTooltips_=n}if("function"==typeof e.updateRenderedElements&&!e.updateRenderedElements.km34){const t=e.updateRenderedElements,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.updateRenderedElements=n}if("function"==typeof e.loadPage_&&!e.loadPage_.km34){const t=e.loadPage_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.loadPage_=n}if("function"==typeof e.updatePageData_&&!e.updatePageData_.km34){const t=e.updatePageData_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.updatePageData_=n}if("function"==typeof e.onFocus_&&!e.onFocus_.km34){const t=e.onFocus_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onFocus_=n}if("function"==typeof e.onBlur_&&!e.onBlur_.km34){const t=e.onBlur_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onBlur_=n}if("function"==typeof e.buttonClassChanged_&&!e.buttonClassChanged_.km34){const t=e.buttonClassChanged_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.buttonClassChanged_=n}if("function"==typeof e.buttonIconChanged_&&!e.buttonIconChanged_.km34){const t=e.buttonIconChanged_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.buttonIconChanged_=n}if("function"==typeof e.dataChangedInBehavior_&&!e.dataChangedInBehavior_.km34){const t=e.dataChangedInBehavior_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.dataChangedInBehavior_=n}if("function"==typeof e.continuationsChanged_&&!e.continuationsChanged_.km34){const t=e.continuationsChanged_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.continuationsChanged_=n}if("function"==typeof e.forceChatPoll_&&!e.forceChatPoll_.km34){const t=e.forceChatPoll_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.forceChatPoll_=n}if("function"==typeof e.onEndpointClick_&&!e.onEndpointClick_.km34){const t=e.onEndpointClick_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onEndpointClick_=n}if("function"==typeof e.onEndpointTap_&&!e.onEndpointTap_.km34){const t=e.onEndpointTap_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onEndpointTap_=n}if("function"==typeof e.handleClick_&&!e.handleClick_.km34){const t=e.handleClick_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.handleClick_=n}if("function"==typeof e.onReadyStateChange_&&!e.onReadyStateChange_.km34){const t=e.onReadyStateChange_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onReadyStateChange_=n}if("function"==typeof e.onReadyStateChangeEntryPoint_&&!e.onReadyStateChangeEntryPoint_.km34){const t=e.onReadyStateChangeEntryPoint_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onReadyStateChangeEntryPoint_=n}if("function"==typeof e.readyStateChangeHandler_&&!e.readyStateChangeHandler_.km34){const t=e.readyStateChangeHandler_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.readyStateChangeHandler_=n}if("function"==typeof e.xmlHttpHandler_&&!e.xmlHttpHandler_.km34){const t=e.xmlHttpHandler_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.xmlHttpHandler_=n}if("function"==typeof e.executeCallbacks_&&!e.executeCallbacks_.km34){const t=e.executeCallbacks_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.executeCallbacks_=n}if("function"==typeof e.handleInvalidationData_&&!e.handleInvalidationData_.km34){const t=e.handleInvalidationData_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.handleInvalidationData_=n}if("function"==typeof e.onInput_&&!e.onInput_.km34){const t=e.onInput_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onInput_=n}if("function"==typeof e.trigger_&&!e.trigger_.km34){const t=e.trigger_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.trigger_=n}if("function"==typeof e.requestData_&&!e.requestData_.km34){const t=e.requestData_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.requestData_=n}if("function"==typeof e.onLoadReloadContinuation_&&!e.onLoadReloadContinuation_.km34){const t=e.onLoadReloadContinuation_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onLoadReloadContinuation_=n}if("function"==typeof e.onLoadIncrementalContinuation_&&!e.onLoadIncrementalContinuation_.km34){const t=e.onLoadIncrementalContinuation_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onLoadIncrementalContinuation_=n}if("function"==typeof e.onLoadSeekContinuation_&&!e.onLoadSeekContinuation_.km34){const t=e.onLoadSeekContinuation_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onLoadSeekContinuation_=n}if("function"==typeof e.onLoadReplayContinuation_&&!e.onLoadReplayContinuation_.km34){const t=e.onLoadReplayContinuation_,n=D.get(t)||function(e,n){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onLoadReplayContinuation_=n}if("function"==typeof e.onNavigate_&&!e.onNavigate_.km34){const t=e.onNavigate_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onNavigate_=n}if("function"==typeof e.ytRendererBehaviorDataObserver_&&!e.ytRendererBehaviorDataObserver_.km34){const t=e.ytRendererBehaviorDataObserver_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.ytRendererBehaviorDataObserver_=n}if("function"==typeof e.ytRendererBehaviorTargetIdObserver_&&!e.ytRendererBehaviorTargetIdObserver_.km34){const t=e.ytRendererBehaviorTargetIdObserver_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.ytRendererBehaviorTargetIdObserver_=n}if("function"==typeof e.unregisterRenderer_&&!e.unregisterRenderer_.km34){const t=e.unregisterRenderer_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.unregisterRenderer_=n}if("function"==typeof e.textChanged_&&!e.textChanged_.km34){const t=e.textChanged_,n=D.get(t)||function(e){if(void 0!==this.isAttached){const e=this.hostElement;if(!(e instanceof Node)||"NOSCRIPT"===e.nodeName)return}l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.textChanged_=n}if("function"==typeof e.searchChanged_&&!e.searchChanged_.km34){const t=e.searchChanged_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.searchChanged_=n}if("function"==typeof e.skinToneChanged_&&!e.skinToneChanged_.km34){const t=e.skinToneChanged_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.skinToneChanged_=n}if("function"==typeof e.onEmojiHover_&&!e.onEmojiHover_.km34){const t=e.onEmojiHover_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onEmojiHover_=n}if("function"==typeof e.onSelectCategory_&&!e.onSelectCategory_.km34){const t=e.onSelectCategory_,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onSelectCategory_=n}if("function"==typeof e.onShowEmojiVariantSelector&&!e.onShowEmojiVariantSelector.km34){const t=e.onShowEmojiVariantSelector,n=D.get(t)||function(e){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onShowEmojiVariantSelector=n}if("function"==typeof e.updateCategoriesAndPlaceholder_&&!e.updateCategoriesAndPlaceholder_.km34){const t=e.updateCategoriesAndPlaceholder_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.updateCategoriesAndPlaceholder_=n}if("function"==typeof e.watchPageActiveChanged_&&!e.watchPageActiveChanged_.km34){const t=e.watchPageActiveChanged_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.watchPageActiveChanged_=n}if("function"==typeof e.activate_&&!e.activate_.km34){const t=e.activate_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.activate_=n}if("function"==typeof e.onYtPlaylistDataUpdated_&&!e.onYtPlaylistDataUpdated_.km34){const t=e.onYtPlaylistDataUpdated_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onYtPlaylistDataUpdated_=n}(e=>{if(!e.stampDomArray_)return;const t=e.__proto__,n=t.stampDomArray_;t.stampDomArrayF001_||"function"!=typeof n||6!==n.length||(t.stampDomArrayF001_=1,t.stampDomArray_=I.get(n)||M(n))})(e);if("undefined"!=typeof DocumentTimeline&&"undefined"!=typeof WeakRef&&x(e),"function"==typeof e.tryRenderChunk_&&!e.tryRenderChunk_.km34){const t=e.tryRenderChunk_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.tryRenderChunk_=n}if("function"==typeof e.renderChunk_&&!e.renderChunk_.km34){const t=e.renderChunk_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.renderChunk_=n}if("function"==typeof e.deepLazyListObserver_&&!e.deepLazyListObserver_.km34){const t=e.deepLazyListObserver_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.deepLazyListObserver_=n}if("function"==typeof e.onItemsUpdated_&&!e.onItemsUpdated_.km34){const t=e.onItemsUpdated_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.onItemsUpdated_=n}if("function"==typeof e.requestRenderChunk_&&!e.requestRenderChunk_.km34){const t=e.requestRenderChunk_,n=D.get(t)||function(){l.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};D.set(t,n),n.km34=1,e.requestRenderChunk_=n}},U=Symbol(),F=new e,N=new e,K=e=>function(){const t=y(this),n=t.hostElement||0,o=n?this.$||(y(i=this).$||i.$||0):0;var i;let r=n instanceof HTMLElement&&(o||!this.is);if(r&&!o&&!this.is){const e=n.nodeName;"string"!=typeof e||e.startsWith("DOM-")||(r=!1)}r&&("function"==typeof t.markDirty||"ytd-engagement-panel-section-list-renderer"===this.is)&&(r=!1),r?this[k]=(this[k]||l.resolve()).then((()=>e.apply(this,arguments))).catch(console.log):e.apply(this,arguments)};let q=window.HTMLElement;try{const e=document.createElement("template");e.innerHTML="<ytz-null361></ytz-null361>",q=e.content.firstChild.constructor}catch(e){}q.prototype.connectedCallback||(q.prototype.connectedCallback79=q.prototype.connectedCallback,q.prototype.connectedCallback=function(){let e;return this.connectedCallback79&&(e=this.connectedCallback79.apply(this,arguments)),e}),Object.defineProperty(Object.prototype,"connectedCallback",{get(){const e=this[U];return this.is&&(L(this,!0),e&&(this.ky36=1)),e},set(e){let t;return"function"==typeof e?(t=F.get(e)||K(e),t!==e&&(F.set(e,t),F.set(t,t),N.set(t,e))):t=e,this[U]=t,this.is&&L(this),!0},enumerable:!1,configurable:!0});const G=new l((e=>{"loading"!==document.readyState?e():window.addEventListener("DOMContentLoaded",e,!1)}));window.requestIdleCallback471||"function"!=typeof window.requestIdleCallback||(window.requestIdleCallback471=window.requestIdleCallback,window.requestIdleCallback=function(e,...t){return(this||window).requestIdleCallback471((async function(){await G.then(),e.call(this,...arguments)}),...t)}),G.then((()=>{let e=document.querySelector("style[nonce]");e=e?e.getAttribute("nonce"):null;const t=document.createElement("style");"string"==typeof e&&t.setAttribute("nonce",e),t.textContent="none-element-k47{order:0}",t.addEventListener("load",(()=>{u.resolve(),s=1}),!1),(document.body||document.head||document.documentElement).appendChild(t)}));const B=[],V=new Set(["/robots.txt","/live_chat","/live_chat_replay"]);let $=window.onerror,W=V.has(location.pathname)?2:1;var H;JSON&&"parse"in JSON||(W=0),1===W&&(()=>{let e=$,t=null;Object.defineProperty(Object.prototype,"matchAll",{get(){return t=this,!0},enumerable:!0,configurable:!0});try{JSON.parse("{}")}catch(e){console.warn(e),W=0}delete Object.prototype.matchAll;let n=window.onerror;if(window.onerror=e,0!==W){if(t&&(JSON.parse.stackNeedleDetails=t,t.matchAll=!0),e===n)return W=0;W=t?3:4}})(),2===W&&(()=>{let e=$,t=null,n=null;Object.defineProperty(Function.prototype,"findOwner",{get(){return t=this,this._findOwner},set(e){return this._findOwner=e,!0},enumerable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"matchAll",{get(){return n=this,!0},enumerable:!0,configurable:!0});try{JSON.parse("{}")}catch(e){console.warn(e),W=0}if(delete Function.prototype.findOwner,delete Object.prototype.matchAll,e!==window.onerror)return W=4;0!=W&&(B.push("fix_error_many_stack_state NB"),n&&(n.pattern=null,n.re=null,n.expect=null,n.matchAll=!0),t&&(t.findOwner=t.mustProcess=t.logJson=()=>{},delete t._findOwner),W=3,JSON.parse.stackNeedleDetails=n,JSON.parse.objectPrune=t)})(),3===W&&(()=>{let e=$;try{JSON.parse("{}")}catch(e){console.warn(e),W=0}e!==window.onerror&&(window.onerror=e,0!==W&&(W=4))})(),4===W&&(B.push("fix_error_many_stack_state AB"),JSON.parseProxy=JSON.parse,JSON.parse=(H=(H=JSON.parse).bind(JSON),function(e,t){const n=window.onerror;let o;window.onerror=null;try{o=H(...arguments)}catch(e){o=e}if(window.onerror=n,o instanceof Error)throw o;return o}));const z=()=>{};let J=!1;try{J=window.document===window.top.document}catch(e){}let Y=!0,X=null;const Z=(e,t)=>{if(!e||"function"!=typeof e)return void console.warn("f is not a function",e);let n=e+"",o=0,i=-1,r=0;for(let e=0,t=n.length;e<t;e++){const t=n[e];t>="a"&&t<="z"||t>="A"&&t<="Z"?(i<e-1&&r++,i=e):o++}let a=`${e.length}.${o}.${r}`;return t?a===t:a},Q=(e,t,n)=>{let o=!1;for(const i of n)if(e[t].prototype instanceof e[i]){o=!0;break}if(!o)return(n=n.filter((n=>!(e[n].prototype instanceof e[t])))).push(t),n},ee=e=>{let t=[],n=new Map;for(const[o,i]of Object.entries(e)){const r="function"==typeof i?i.prototype:0;if(r){let i=0;if("function"==typeof r.handleGlobalKeyUp&&7===r.handleGlobalKeyUp.length?i+=400:"function"==typeof r.handleGlobalKeyUp&&8===r.handleGlobalKeyUp.length?i+=300:"function"==typeof r.handleGlobalKeyUp&&(i+=200),"function"==typeof r.handleGlobalKeyUp&&0===r.handleGlobalKeyUp.length&&(i-=600),i<200)continue;"function"==typeof r.handleGlobalKeyDown&&8===r.handleGlobalKeyDown.length&&(i+=80),"function"==typeof r.handleGlobalKeyDown&&7===r.handleGlobalKeyDown.length&&(i+=30),"function"==typeof r.step&&1===r.step.length&&(i+=10),"function"==typeof r.step&&1!==r.step.length&&(i+=5),i+=280,"function"==typeof r.cueVideoByPlayerVars&&(i+=4),"function"==typeof r.loadVideoByPlayerVars&&(i+=4),"function"==typeof r.preloadVideoByPlayerVars&&(i+=4),"function"==typeof r.seekBy&&(i+=4),"function"==typeof r.seekTo&&(i+=4),"function"==typeof r.getStoryboardFormat&&(i+=4),"function"==typeof r.getDuration&&(i+=4),"function"==typeof r.loadModule&&(i+=4),"function"==typeof r.unloadModule&&(i+=4),"function"==typeof r.getOption&&(i+=4),"function"==typeof r.getOptions&&(i+=4),"function"==typeof r.setOption&&(i+=4),"function"==typeof r.addCueRange&&(i+=4),"function"==typeof r.getDebugText&&(i+=4),"function"==typeof r.getCurrentBroadcastId&&(i+=4),"function"==typeof r.setSizeStyle&&(i+=4),"function"==typeof r.showControls&&(i+=4),"function"==typeof r.hideControls&&(i+=4),"function"==typeof r.getVideoContentRect&&(i+=4),"function"==typeof r.toggleFullscreen&&(i+=4),"function"==typeof r.isFullscreen&&(i+=4),"function"==typeof r.cancelPlayback&&(i+=4),"function"==typeof r.getProgressState&&(i+=4),"function"==typeof r.isInline&&(i+=4),"function"==typeof r.setInline&&(i+=4),"function"==typeof r.toggleSubtitles&&(i+=4),"function"==typeof r.getPlayerSize&&(i+=4),"function"==typeof r.wakeUpControls&&(i+=4),"function"==typeof r.setCenterCrop&&(i+=4),"function"==typeof r.getLoopVideo&&(i+=4),"function"==typeof r.setLoopVideo&&(i+=4),i>0&&(t=Q(e,o,t)||t),i>0&&n.set(o,i)}}if(0!==t.length)return t=t.map((e=>[e,n.get(e)||0])),t.length>1&&t.sort(((e,t)=>t[1]-e[1])),t.length>2&&console.log("[yt-js-engine-tamer] (key-extraction) [QT]",t),t[0][0];console.warn("[yt-js-engine-tamer] (key-extraction) Key does not exist. [QT]")},te=e=>{let t=[],n=new Map;for(const[o,i]of Object.entries(e)){const r="function"==typeof i?i.prototype:0;if(r){let i=0;if("function"==typeof r.handleGlobalKeyUp&&7===r.handleGlobalKeyUp.length?i+=400:"function"==typeof r.handleGlobalKeyUp&&8===r.handleGlobalKeyUp.length?i+=300:"function"==typeof r.handleGlobalKeyUp&&(i+=200),"function"==typeof r.handleGlobalKeyUp&&0===r.handleGlobalKeyUp.length&&(i+=600),i<200)continue;"function"==typeof r.handleGlobalKeyDown&&8===r.handleGlobalKeyDown.length&&(i+=80),"function"==typeof r.handleGlobalKeyDown&&7===r.handleGlobalKeyDown.length&&(i+=30),"function"==typeof r.step&&1===r.step.length&&(i+=10),"function"==typeof r.step&&1!==r.step.length&&(i+=5),i+=280,"function"==typeof r.cueVideoByPlayerVars&&(i-=4),"function"==typeof r.loadVideoByPlayerVars&&(i-=4),"function"==typeof r.preloadVideoByPlayerVars&&(i-=4),"function"==typeof r.seekBy&&(i-=4),"function"==typeof r.seekTo&&(i-=4),"function"==typeof r.getStoryboardFormat&&(i-=4),"function"==typeof r.getDuration&&(i-=4),"function"==typeof r.loadModule&&(i-=4),"function"==typeof r.unloadModule&&(i-=4),"function"==typeof r.getOption&&(i-=4),"function"==typeof r.getOptions&&(i-=4),"function"==typeof r.setOption&&(i-=4),"function"==typeof r.addCueRange&&(i-=4),"function"==typeof r.getDebugText&&(i-=4),"function"==typeof r.getCurrentBroadcastId&&(i-=4),"function"==typeof r.setSizeStyle&&(i-=4),"function"==typeof r.showControls&&(i-=4),"function"==typeof r.hideControls&&(i-=4),"function"==typeof r.getVideoContentRect&&(i-=4),"function"==typeof r.toggleFullscreen&&(i-=4),"function"==typeof r.isFullscreen&&(i-=4),"function"==typeof r.cancelPlayback&&(i-=4),"function"==typeof r.getProgressState&&(i-=4),"function"==typeof r.isInline&&(i-=4),"function"==typeof r.setInline&&(i-=4),"function"==typeof r.toggleSubtitles&&(i-=4),"function"==typeof r.getPlayerSize&&(i-=4),"function"==typeof r.wakeUpControls&&(i-=4),"function"==typeof r.setCenterCrop&&(i-=4),"function"==typeof r.getLoopVideo&&(i-=4),"function"==typeof r.setLoopVideo&&(i-=4),i>0&&(t=Q(e,o,t)||t),i>0&&n.set(o,i)}}if(0!==t.length)return t=t.map((e=>[e,n.get(e)||0])),t.length>1&&t.sort(((e,t)=>t[1]-e[1])),t.length>2&&console.log("[yt-js-engine-tamer] (key-extraction) [SV]",t),t[0][0];console.warn("[yt-js-engine-tamer] (key-extraction) Key does not exist. [SV]")},ne=e=>{let t=[],n=new Map;for(const[o,i]of Object.entries(e)){const r="function"==typeof i?i.prototype:0;if(r){let i=0;if("function"==typeof r.handleGlobalKeyUp&&7===r.handleGlobalKeyUp.length?i+=400:"function"==typeof r.handleGlobalKeyUp&&8===r.handleGlobalKeyUp.length?i+=300:"function"==typeof r.handleGlobalKeyUp&&(i+=200),"function"==typeof r.handleGlobalKeyUp&&0===r.handleGlobalKeyUp.length&&(i-=600),"function"==typeof r.init&&0===r.init.length||(i-=300),i<200)continue;"function"==typeof r.handleGlobalKeyDown&&8===r.handleGlobalKeyDown.length&&(i+=80),"function"==typeof r.handleGlobalKeyDown&&7===r.handleGlobalKeyDown.length&&(i+=30),"function"==typeof r.step&&1===r.step.length&&(i+=10),"function"==typeof r.step&&1!==r.step.length&&(i+=5),i+=280,"function"==typeof r.cueVideoByPlayerVars&&(i-=4),"function"==typeof r.loadVideoByPlayerVars&&(i-=4),"function"==typeof r.preloadVideoByPlayerVars&&(i-=4),"function"==typeof r.seekBy&&(i-=4),"function"==typeof r.seekTo&&(i-=4),"function"==typeof r.getStoryboardFormat&&(i-=4),"function"==typeof r.getDuration&&(i-=4),"function"==typeof r.loadModule&&(i-=4),"function"==typeof r.unloadModule&&(i-=4),"function"==typeof r.getOption&&(i-=4),"function"==typeof r.getOptions&&(i-=4),"function"==typeof r.setOption&&(i-=4),"function"==typeof r.addCueRange&&(i-=4),"function"==typeof r.getDebugText&&(i-=4),"function"==typeof r.getCurrentBroadcastId&&(i-=4),"function"==typeof r.setSizeStyle&&(i-=4),"function"==typeof r.showControls&&(i-=4),"function"==typeof r.hideControls&&(i-=4),"function"==typeof r.getVideoContentRect&&(i-=4),"function"==typeof r.toggleFullscreen&&(i-=4),"function"==typeof r.isFullscreen&&(i-=4),"function"==typeof r.cancelPlayback&&(i-=4),"function"==typeof r.getProgressState&&(i-=4),"function"==typeof r.isInline&&(i-=4),"function"==typeof r.setInline&&(i-=4),"function"==typeof r.toggleSubtitles&&(i-=4),"function"==typeof r.getPlayerSize&&(i-=4),"function"==typeof r.wakeUpControls&&(i-=4),"function"==typeof r.setCenterCrop&&(i-=4),"function"==typeof r.getLoopVideo&&(i-=4),"function"==typeof r.setLoopVideo&&(i-=4),i>0&&(t=Q(e,o,t)||t),i>0&&n.set(o,i)}}if(0!==t.length)return t=t.map((e=>[e,n.get(e)||0])),t.length>1&&t.sort(((e,t)=>t[1]-e[1])),t.length>2&&console.log("[yt-js-engine-tamer] (key-extraction) [DX]",t),t[0][0];console.warn("[yt-js-engine-tamer] (key-extraction) Key does not exist. [DX]")},oe=window===top;let ie=null,re=0;oe&&(()=>{ie="";const e=()=>{ie="",re=0};document.addEventListener("yt-navigate-start",e,!1),document.addEventListener("yt-navigate-cache",e,!1),document.addEventListener("yt-page-data-fetched",e,!1),document.addEventListener("yt-navigate-finish",(()=>{re=1;try{const e=new URL(location.href);ie=e&&m(e)&&e.searchParams.get("v")||""}catch(e){ie=""}}),!1)})();let ae=null;oe&&(()=>{let e=!0;ae={get videoId(){if(e){e=!1;let t=document.querySelectorAll("ytd-watch-flexy[video-id]");const n=[];for(const e of t)e.closest("[hidden]")||n.push(e);1!==n.length?this.__videoId__="":this.__videoId__=n[0].getAttribute("video-id")}return this.__videoId__||""}};const t=t=>{(t||0).target instanceof HTMLVideoElement&&(e=!0)};document.addEventListener("loadedmetadata",t,!0),document.addEventListener("durationchange",t,!0)})();const se=new l((e=>{const t=location.pathname.startsWith("/live_chat")?"yt-live-chat-app":"ytd-app";if("undefined"!=typeof AbortSignal){let n=()=>{n&&(n=null,e(document.querySelector(t)))};document.addEventListener("yt-action",n,{capture:!0,passive:!0,once:!0})}else{let n=()=>{n&&(document.removeEventListener("yt-action",n,!0),n=null,e(document.querySelector(t)))};document.addEventListener("yt-action",n,!0)}}));if((async e=>{const t=requestAnimationFrame;try{let n=16;const o="vanillajs-iframe-v1";let i=document.getElementById(o),r=null;if(!i){i=document.createElement("iframe"),i.id=o;const a="function"==typeof webkitCancelAnimationFrame&&"undefined"==typeof kagi?i.src=URL.createObjectURL(new Blob([],{type:"text/html"})):null;i.sandbox="allow-same-origin";let s=document.createElement("noscript");for(s.appendChild(i);!document.documentElement&&n-- >0;)await new l(t);document.documentElement.appendChild(s),a&&l.resolve().then((()=>URL.revokeObjectURL(a))),r=t=>{const n=o=>{o&&e.removeEventListener("DOMContentLoaded",n,!1),o=s,s=e=r=0,t?t((()=>o.remove()),200):o.remove()};t&&"loading"===document.readyState?e.addEventListener("DOMContentLoaded",n,!1):n()}}for(;!i.contentWindow&&n-- >0;)await new l(t);const a=i.contentWindow;if(!a)throw"window is not found.";try{const{requestAnimationFrame:t,setTimeout:n,clearTimeout:o,cancelAnimationFrame:i,setInterval:s,clearInterval:c,requestIdleCallback:d,getComputedStyle:u}=a,p={requestAnimationFrame:t,setTimeout:n,clearTimeout:o,cancelAnimationFrame:i,setInterval:s,clearInterval:c,requestIdleCallback:d,getComputedStyle:u};for(let t in p)p[t]=p[t].bind(e);return r&&l.resolve(p.setTimeout).then(r),p.animate=a.HTMLElement.prototype.animate,p.perfNow=a.performance.now,p}catch(e){return r&&r(),null}}catch(e){return console.warn(e),null}})(window).then((n=>{if(!n)return null;const{requestAnimationFrame:o,setTimeout:i,clearTimeout:s,cancelAnimationFrame:u,setInterval:h,clearInterval:g,animate:m,requestIdleCallback:_,getComputedStyle:w,perfNow:v}=n;performance.now17=v.bind(performance),p=o;const C=(()=>{try{const e=document.createElement("canvas");return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}})(),k=(()=>{if(C)return null;const e=Object.getOwnPropertyDescriptor(Document.prototype,"visibilityState");if(!e||"function"!=typeof e.get)return null;const t=e.get;let n=null,o="hidden"===t.call(document);return pureAddEventListener.call(document,"visibilitychange",(e=>{const i="hidden"===t.call(document);o!==i&&(o=i,!o&&n&&(n=n.resolve()))})),()=>{if(n)return n;const e=(!o&&i((()=>{o||n!==e||(n=n.resolve())})),n=new c);return e}})();let D=null;const A=()=>D||(D=new l((e=>{o((t=>{D=null,e(t)}))}))),j=k||A,R=new e;window.__native__getComputedStyle__||window.__jst__getComputedStyle__||"function"!=typeof window.getComputedStyle||1!==window.getComputedStyle.length||(window.__native__getComputedStyle__=w,window.__original__getComputedStyle__=window.getComputedStyle,window.getComputedStyle=function(e){if(!(e instanceof Element)||2===arguments.length&&arguments[1]||arguments.length>2)return window.__original__getComputedStyle__(...arguments);let t=R.get(e);return t||(t=window.__native__getComputedStyle__(e),R.set(e,t)),t},window.__jst__getComputedStyle__=window.getComputedStyle),se.then((()=>{"function"==typeof window.__jst__getComputedStyle__&&1===window.__jst__getComputedStyle__.length&&window.__jst__getComputedStyle__!==window.getComputedStyle&&(window.getComputedStyle=window.__jst__getComputedStyle__)}));const I=location.href.includes(".youtube.com/embed/"),T="undefined"!=typeof AbortSignal,M=new l((e=>{!I&&T&&document.addEventListener("yt-action",(function(){i(e,480)}),{capture:!0,passive:!0,once:!0}),!I&&T&&"object"==typeof customElements&&b("ytd-app").then((()=>{i(e,1200)})),i(e,3e3)})),x=new l((e=>{!I&&T&&document.addEventListener("yt-action",(function(){i(e,450)}),{capture:!0,passive:!0,once:!0}),!I&&T&&"object"==typeof customElements&&b("ytd-app").then((()=>{i(e,900)})),i(e,1800)}));Y||x.then((()=>{Y=!0,X=null})),(async()=>{const e=location.pathname.startsWith("/live_chat")?"yt-live-chat-app":"ytd-app",t=await new l((t=>{b(e).then((()=>{const n=document.querySelector(e);if(n)return void t(n);let o=new MutationObserver((()=>{const n=document.querySelector(e);n&&(o&&(o.disconnect(),o.takeRecords(),o=null),t(n))}));o.observe(document,{subtree:!0,childList:!0})}))}));if(!t)return;const n=y(t).constructor.prototype;if(!n)return;let o=0;const r=e=>{const t=y(e);t&&"function"==typeof t.onYtActionBoundListener_&&!t.onYtActionBoundListener57_&&(t.onYtActionBoundListener57_=t.onYtActionBoundListener_,t.onYtActionBoundListener_=t.onYtAction_.bind(t),o++)};U((()=>{if("function"!=typeof n.created||n.created56||(n.created56=n.created,n.created=function(...e){const t=this.created56(...e);return r(this),t},o++),"function"!=typeof n.onYtAction_||n.onYtAction57_||(n.onYtAction57_=n.onYtAction_,n.onYtAction_=function(...e){l.resolve().then((()=>this.onYtAction57_(...e)))},o++),t&&r(t),o>=3)return 1}),new l((e=>i(e,1e3)))).obtain()})(),se.then((async()=>{const e=location.pathname.startsWith("/live_chat")?"yt-live-chat-app":"ytd-watch-flexy",t=await U((()=>document.querySelector(e))).obtain();if(!t)return;const n=y(t);if("function"!=typeof n.createComponent_||3!=n.createComponent_.length)return;const o=Map.prototype.get;let i=null;Map.prototype.get=function(e){return"dummy-4718"===e&&(i=this),o.call(this,e)};const r=n.createComponent_("dummy-4718",{},!0);if(Map.prototype.get=o,r&&"dummy-4718"===(r.nodeName||"").toLowerCase()&&null!==i&&i instanceof Map){console.log("[yt-js-engine-tamer] qcMap",i);const e=e=>{e instanceof Array&&(e.length=0,e.push=function(){},e.pop=function(){},e.shift=function(){},e.unshift=function(){},e.splice=function(){},e.sort=function(){},e.reverse=function(){})},t=function(){i.forEach(e),i.clear()};i.set=function(n,o){e(o),i.size>0&&(console.log("[yt-js-engine-tamer] qcMap","clear 01"),t())},i.get=function(e){i.size>0&&(console.log("[yt-js-engine-tamer] qcMap","clear 02"),t())},i.size>0&&(console.log("[yt-js-engine-tamer] qcMap","clear 03"),t())}}));const U=(e,t)=>{let n=null;return{obtain:()=>(n||(n=new l((n=>{let o=null;const i=()=>{let t=e();t&&(o.disconnect(),o.takeRecords(),o=null,n(t))};o=new MutationObserver(i),o.observe(document,{subtree:!0,childList:!0}),i(),t&&t.then((()=>{n(null)}))}))),n)}},F=U((()=>{const e=(window||0)._yt_player||0;if(e)return e[`__is_yt_player__${Date.now()}`]=1,e}),M),K=U((()=>{const e=window.Polymer;if("function"==typeof e&&(e.Base||0).connectedCallback&&(e.Base||0).disconnectedCallback)return e}),M),q=U((()=>((window||0).ytglobal||0).schedulerInstanceInstance_||0),M),G=U((()=>{let e=(document||0).timeline||0;if(e&&"function"==typeof e._play)return e}),M),B=U((()=>{let e=(window||0).Animation||0;if(e&&"function"==typeof e&&2===e.length&&"function"==typeof e.prototype._updatePromises)return e}),M),V={screenWidth:0,screenHeight:0,valueReady:!1,onResize:()=>{V.valueReady=!1},sizeProvided:()=>!!V.valueReady||(V.screenWidth=screen.width,V.screenHeight=screen.height,V.screenWidth*V.screenHeight>1&&(V.valueReady=!0,!0))};window.addEventListener("resize",V.onResize,!0);const $=Number.isNaN,W={get(){return this.getPropertyValue("left")},set(e){const t="left",n=this.getPropertyValue(t),o=e;if(!n&&!o)return!0;if(n===o)return!0;const i=`${o}`.length>=4&&`${o}`.endsWith("px")?+o.slice(0,-2):NaN;if(!$(i)){const t=`${n}`.length>=4&&`${n}`.endsWith("px")?+n.slice(0,-2):NaN;if(!$(t)&&V.sizeProvided()){const{screenWidth:e,screenHeight:n}=V;const o=3e-4*(e+1024);if(Math.abs(t-i)<o)return!0}`${e=`${i>-1e-5&&i<1e-5?0:i.toFixed(4)}px`}`.length>`${o}`.length&&(e=o)}return this.setProperty(t,e),!0},enumerable:!0,configurable:!0};Object.defineProperty(CSSStyleDeclaration.prototype,"left",W);const H=async(e,t,n)=>{const o=`${e}`,i=`${t}`,r=!!n,a=await F.obtain();if(!a||"object"!=typeof a)return;const s=(e=>{let t=[];for(const[n,r]of Object.entries(e)){const a="function"==typeof r?r.prototype:0;a&&"function"==typeof a[o]&&a[o].length>=0&&!a[i]&&(t=Q(e,n,t)||t)}if(0!==t.length)return t;console.warn(`Key prop [${o}] does not exist.`)})(a);if(!s)return;r&&console.log(`FIX_${o}`,s);const c=function(...e){l.resolve().then((()=>this[i](...e)))};for(const e of s){const t=a[e].prototype;r&&console.log(237,e,t),"function"!=typeof t[o]||t[i]||(t[i]=t[o],t[o]=c)}};H("onStateChange","onStateChange57"),H("onLoopRangeChange","onLoopRangeChange57");{const e=0;H("onVideoProgress","onVideoProgress57",e),H("onFullscreenChange","onFullscreenChange57",e)}(async()=>{const e=await K.obtain();if(e){{const t=e=>e&&e.writable&&e.enumerable&&e.configurable&&"function"==typeof e.value,n=e=>e&&"function"==typeof e.value,o=((e.dom(document.createElement("null"))||0).constructor||0).prototype||0,i=(Object.getOwnPropertyDescriptor(o,"getOwnerRoot"),Object.getOwnPropertyDescriptor(Node.prototype,"parentElement"),Object.getOwnPropertyDescriptor(o,"querySelector")),r=Object.getOwnPropertyDescriptor(Element.prototype,"querySelector"),a=Object.getOwnPropertyDescriptor(Document.prototype,"querySelector"),s=Object.getOwnPropertyDescriptor(o,"querySelectorAll"),l=Object.getOwnPropertyDescriptor(Element.prototype,"querySelectorAll"),c=Object.getOwnPropertyDescriptor(Document.prototype,"querySelectorAll");if((!i||t(i))&&n(r)&&n(a)&&!("querySelector15"in o)){o.querySelector15=o.querySelector;const t=function(e){try{const t=this.node;if(t instanceof Document&&!0===t.isConnected)return a.value.call(t,e)}catch(e){}return this.querySelector15(e)};Object.defineProperty(o,"querySelector",{get:()=>t,set(e){return e===t||(this.querySelector15=e),!0},enumerable:!1,configurable:!0}),e.__fixedQuerySelector__=1}if((!s||t(s))&&n(l)&&n(c)&&!("querySelectorAll15"in o)){o.querySelectorAll15=o.querySelectorAll;const t=function(e){try{const t=this.node;if(t instanceof Document&&!0===t.isConnected)return c.value.call(t,e)}catch(e){}return this.querySelectorAll15(e)};Object.defineProperty(o,"querySelectorAll",{get:()=>t,set(e){return e===t||(this.querySelectorAll15=e),!0},enumerable:!1,configurable:!0}),e.__fixedQuerySelectorAll__=1}}{e.Base.__connInit__=function(){L(this)};const t=function(...e){!this.mh35&&"function"==typeof this.__connInit__&&this.__connInit__();const t=this[P](...e);return!this.mh35&&"function"==typeof this.__connInit__&&this.__connInit__(),this.mh35=1,t};t.m353=1;const n=e.Base.connectedCallback;e.Base[P]=N.get(n)||n,e.Base.connectedCallback=t;const o=function(...e){!this.mh36&&"function"==typeof this.__connInit__&&this.__connInit__();const t=this[O](...e);return!this.mh36&&"function"==typeof this.__connInit__&&this.__connInit__(),this.mh36=1,t};o.m353=1,e.Base[O]=e.Base.created,e.Base.created=o}}})(),!Node.prototype.appendChild73&&Node.prototype.appendChild&&(()=>{const e=Node.prototype.appendChild73=Node.prototype.appendChild;e&&(Node.prototype.appendChild=function(t){if(this instanceof Element)try{let e=t instanceof DocumentFragment;if(Y||document.head!==this)e&&this.nodeName.startsWith("YT-")&&(e=!1);else{null===X&&(X=document.head.getElementsByTagName("LINK"));for(const e of X)"preload"===e.rel&&"fetch"===e.as&&(e.rel="prefetch")}if(e&&null===t.firstElementChild){let e=!1;for(let n=t.firstChild;n instanceof Node;n=n.nextSibling)if(3===n.nodeType){e=!0;break}if(!e)return t}}catch(e){console.log(e)}return 1===arguments.length?e.call(this,t):e.apply(this,arguments)})})(),U((()=>{const{ShadyDOM:e,ShadyCSS:t}=window;if(e&&(e.handlesDynamicScoping=!1,e.noPatch=!0,e.patchOnDemand=!1,e.preferPerformance=!0,e.querySelectorImplementation=void 0),t&&(t.nativeCss=!0,t.nativeShadow=!0,t.cssBuild=void 0,t.disableRuntime=!0),e&&t)return 1}),M).obtain(),(async()=>{const e=await q.obtain();if(!e)return;if(!("function"!=typeof e.start||e.start993||e.stop||e.cancel||e.terminate||e.interupt)){e.start993=e.start;let t=null,n=null;const a=function(){return t=this.fn,n=[...arguments],12373},s=[a.bind({fn:o}),a.bind({fn:h}),a.bind({fn:i}),a.bind({fn:_})];let c=0,d=null;const u=new Array(4),p={get:(e,t,n)=>"$$12377$$"===t||("$$12378$$"===t?e:e[t]),set(e,a,s,p){if(s>=1&&s<=4&&(d=a),12373===s&&d){const s=e[d],p=a;if(3===s&&t===o)e[p]=f.apply(window,n);else if(2===s&&t===i)e[p]=u[2].apply(window,n);else if(4!==s||t!==i||n[1])1!==s||t!==_&&t!==i?(e[d]=0,e[p]=0):e[p]=t===_?_.apply(window,n):u[2].apply(window,n);else if("function"==typeof r){const t=n[0],o=++c;r((()=>{e[p]===-o&&t()})),e[d]=940,e[p]=-o}else{const t=n[0],o=++c;l.resolve().then((()=>{e[p]===-o&&t()})),e[d]=930,e[p]=-o}}else e[a]=s;return!0}};let y=!1;e.start=function(){if(!y){y=!0;try{u[0]=window.requestAnimationFrame,u[1]=window.setInterval,u[2]=window.setTimeout,u[3]=window.requestIdleCallback;const e=this.$$12378$$||this;window.requestAnimationFrame=s[0],window.setInterval=s[1],window.setTimeout=s[2],window.requestIdleCallback=s[3],d=null,e.start993.call(new Proxy(e,p)),d=null,window.requestAnimationFrame=u[0],window.setInterval=u[1],window.setTimeout=u[2],window.requestIdleCallback=u[3]}catch(e){console.warn(e)}y=!1}},e.start.toString=e.start993.toString.bind(e.start993)}})(),(async()=>{const n=await F.obtain();if(!n||"object"!=typeof n)return;const o=n;let i;{const e=(e=>{const t="ZqOu";let n=[];for(const[t,o]of Object.entries(e)){const i="function"==typeof o?o.prototype:0;!i||"function"!=typeof i.start||0!==i.start.length||"function"!=typeof i.isActive||0!==i.isActive.length||"function"!=typeof i.stop||0!==i.stop.length||i.isComplete||i.getStatus||i.getResponseHeader||i.getLastError||i.send||i.abort||i.sample||i.initialize||i.fail||i.getName||(n=Q(e,t,n)||n)}if(0!==n.length)return console.log(`[yt-js-engine-tamer] (key-extraction) [${t}]`,n),n[0];console.warn(`[yt-js-engine-tamer] (key-extraction) Key does not exist. [${t}]`)})(n);if(!e)return void console.warn("[yt-js-engine-tamer] FIX_yt_player::keyZqOu error");i=e;const r=o[i];if("function"!=typeof r)return void console.warn("[yt-js-engine-tamer] FIX_yt_player::g[keyZqOu] error");const a=r.prototype,s=new r,c=()=>{},d={};let u="",p="",f="",y="";for(const[e,t]of Object.entries(s))t instanceof Window&&(p=e);const h={get(e,n){let o=e[n];o instanceof Window&&!p&&(p=t);let i="function"==typeof o?c:"object"==typeof o?d:o;return n===p&&(i={requestAnimationFrame:e=>3,cancelAnimationFrame(){}}),f||"function"!=typeof o||n in e.constructor.prototype||(f=n),i},set:(e,t,n)=>("boolean"!=typeof n||u||(u=t),"number"==typeof n&&!y&&n>=2&&(y=t),e[t]=n,!0)};s.start.call(new Proxy(s,h)),a._activation=!1,a.start=function(){this._activation||(this._activation=!0,j().then((()=>{this._activation=!1,this[y]&&l.resolve().then(this[f])}))),this[y]=1,this[u]=!0},a.stop=function(){this[y]=null}}{const t=(e=>{let t=[];for(const[n,o]of Object.entries(e))if("function"==typeof o&&3===o.length&&n.length<3){const e=o+"";e.length>=21&&e.includes(".style[")&&(/\((\w{1,3}),(\w{1,3}),(\w{1,3})\)\{[\s\S]*\1\.style\[\2\]=\3\W/.test(e)?t.push(n):console.warn("[yt-js-engine-tamer] unexpected zo::vt",e))}if(0!==t.length)return console.log("[yt-js-engine-tamer] (key-extraction) [zo]",t),t[0];console.warn("[yt-js-engine-tamer] (key-extraction) Key does not exist. [zo]")})(n);if(t){i=t;const n=o[i];o["$$original$$"+i]=n;const r=async(e,t)=>{let n="",o=0,i="",r=0;const a=e.style;if(t.length<9);else if(t.startsWith("scalex(0.")||"scalex(0)"===t||"scalex(1)"===t){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1.00001&&(n="scaleX",o=a,i="",r=1)}else if(t.startsWith("translateX(")&&t.endsWith("px)")){let e=t.substring(11,t.length-3),a=e.length>=1?parseFloat(e):NaN;if("number"!=typeof a||$(a)){if("NaN"===e)return}else n="translateX",o=a,i="px",r=2}else if(t.startsWith("scaley(0.")||"scaley(0)"===t||"scaley(1)"===t){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1.00001&&(n="scaleY",o=a,i="",r=1)}else if(t.startsWith("translateY(")&&t.endsWith("px)")){let e=t.substring(11,t.length-3),a=e.length>=1?parseFloat(e):NaN;if("number"!=typeof a||$(a)){if("NaN"===e)return}else n="translateY",o=a,i="px",r=2}else if(t.startsWith("scalex(")&&t.includes("e-")){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1e-5&&(n="scaleX",o=0,i="",r=1)}else if(t.startsWith("scaley(")&&t.includes("e-")){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1e-5&&(n="scaleY",o=0,i="",r=1)}else console.log("[yt-js-engine-tamer] zoTransform undefined",t);if(1===r){const e=Math.round(200*o)/200;if((t=`${n}(${d(e,3)})`)===a.transform)return;a.transform=t}else if(2===r){if((t=`${n}(${d(o,1)}${i})`)===a.transform)return;a.transform=t}else{const e=a.transform;if(!t&&!e)return;if(t===e)return;a.transform=t}},s=new e,l={display:new e,width:new e,height:new e,outlineWidth:new e,position:new e,padding:new e,cssText:new e,right:new e,left:new e,top:new e,bottom:new e,transitionDelay:new e,marginLeft:new e,marginTop:new e,marginRight:new e,marginBottom:new e},c=Symbol(),u=(e,t,n,o,i)=>{const r=e,s=n,l=!s.has(r);i||l?(s.set(r,c),o(r,t),l&&a((()=>{const e=s.get(r);void 0!==e&&(s.delete(r),e!==c&&o(r,e))}))):s.set(r,t)},p=new Set,f=function(e,t,o,i=!1){if("number"==typeof o&&"string"==typeof t&&e instanceof HTMLElement){const e=o;(o=`${e}`).length>5&&(o=d(e,e<10&&e>-10?3:1))}if("string"==typeof t&&"string"==typeof o&&e instanceof HTMLElement){let c=null;if("transform"===t)return void u(e,o,s,r,i);if(c=l[t]){const n=t;return void u(e,o,c,((e,t)=>{const o=e.style,i=o[n];(i||t)&&i!==t&&(o[n]=t)}),i)}if("outline-width"===t){const t="outlineWidth";return c=l[t],void u(e,o,c,((e,n)=>{const o=e.style,i=o[t];(i||n)&&i!==n&&(o[t]=n)}),i)}if("maxWidth"===t||"maxHeight"===t){const n=t,i=e.style,r=i[n];if(!r&&!o)return;if(r===o)return;return void(i[n]=o)}return p.has(t)||(p.add(t),a((()=>{e.classList.contains("caption-window")||e.classList.contains("ytp-caption-segment")||console.log(27304,e,t,o)}))),void n.call(this,e,t,o)}if("object"!=typeof(t||0))return console.log(27306,e,t,o),void n.call(this,e,t,o);{const n=(e.id||0).length>14;for(const[o,i]of Object.entries(t))f.call(this,e,o,i,n)}};o[i]=f}}{const t=(e=>{let t=[];for(const[n,o]of Object.entries(e)){const i="function"==typeof o?o.prototype:0;i&&"function"==typeof i.createElement&&2===i.createElement.length&&"function"==typeof i.detach&&0===i.detach.length&&"function"==typeof i.update&&1===i.update.length&&"function"==typeof i.updateValue&&2===i.updateValue.length&&(t=Q(e,n,t)||t)}if(0!==t.length)return console.log("[yt-js-engine-tamer] (key-extraction) [uG]",t),t[0];console.warn("[yt-js-engine-tamer] (key-extraction) Key does not exist. [uG]")})(n);if(t){i=t;const n=o[i].prototype,r=new Map;"function"!=typeof n.updateValue||2!==n.updateValue.length||n.updateValue31||(n.updateValue31=n.updateValue,n.updateValue=function(t,n){if("string"!=typeof t)return this.updateValue31(t,n);const o=this.element;if(!(o instanceof HTMLElement))return this.updateValue31(t,n);let i=r.get(t);i||r.set(t,i=new e);let a=i.get(o);return a&&a.value===n?void 0:(a?(this.__oldValueByUpdateValue__=a.value,a.value=n):(this.__oldValueByUpdateValue__=null,i.set(o,a={value:n})),this.updateValue31(t,n))})}}})(),(async()=>{const e=await F.obtain();e&&"object"==typeof e&&S(e)})(),(async()=>{const e=await F.obtain();if(!e||"object"!=typeof e)return;let t=(e=>{const t="ZqQu";let n=[];for(const[t,o]of Object.entries(e)){const i="function"==typeof o?o.prototype:0;!i||"function"!=typeof i.start||1!==i.start.length||"function"!=typeof i.isActive||0!==i.isActive.length||"function"!=typeof i.stop||0!==i.stop.length||i.isComplete||i.getStatus||i.getResponseHeader||i.getLastError||i.send||i.abort||i.sample||i.initialize||i.fail||i.getName||(n=Q(e,t,n)||n)}if(0!==n.length)return console.log(`[yt-js-engine-tamer] (key-extraction) [${t}]`,n),n[0];console.warn(`[yt-js-engine-tamer] (key-extraction) Key does not exist. [${t}]`)})(e);if(!t)return;const n=e[t];if("function"!=typeof n)return;const o=n.prototype,i=(()=>{let e="";try{o.stop.call(new Proxy({isActive:()=>{}},{set:(t,n,o)=>(0===o&&(e=n),!0)}))}catch(e){}if(!e)return;const t=e;let n="",i="";try{o.start.call(new Proxy({stop:()=>{},[t]:0},{get:(e,t)=>t in e?e[t]:n?void(i||(i=t)):(n=t,null)}))}catch(e){n&&i||console.log(e)}if(!n||!i)return;let r="",a="",s="",l="";const c=new Set;for(const[e,l]of Object.entries(o))if("stop"!==e&&"start"!==e&&"isActive"!==e&&"constructor"!==e&&e!==t&&e!==n&&e!==i&&"function"==typeof l){const t=/this\.(\w+)\.call\(this\.(\w+)\)/.exec(l+"");t?(r=e,a=t[1],s=t[2]):c.add(e)}if(r&&a&&s){for(const e of c){if(e===r||e===a||e===s)continue;const t=o[e];"function"==typeof t&&(t+"").includes(`this.stop();delete this.${a};delete this.${s}`)&&(l=e)}return[t,n,i,r,a,s,l]}})();if(!i||!i.length)return;const[r,a,s,l,c,d,u]=i;if(!(r&&a&&s&&l&&c&&d&&u))return;let p=null;o[u]=function(){p||(p=Object.getOwnPropertyNames(this).filter((e=>{if(e!=r&&e!=a&&e!=s&&e!=l&&e!=c&&e!=d&&e!=u){const t=typeof this[e];return"undefined"===t||"object"===t}return!1})));for(const e of p){const t=this[e];(t||0).length>=1&&(t.length=0)}this[r]>0&&this.stop(),this[c]=null,this[d]=null},o.start=function(e){this[r]>0&&this.stop();const t=void 0!==e?e:this[s];this[r]=window.setTimeout(this[a],t)},o.stop=function(){this[r]>0&&(window.clearTimeout(this[r]),this[r]=0)},o.isActive=function(){return this[r]>0},o[l]=function(){this.stop();const e=this[c],t=this[d];let n=!1;e||(n=!0),n||e.call(t)}})(),(async()=>{const[e,t]=await l.all([G.obtain(),B.obtain()]);if(!e||!t)return;const n=t.prototype,o=(e=>{try{return e.__proto__}catch(e){}return null})(e);if(o&&"function"==typeof o.getAnimations&&"function"==typeof o.play&&"function"==typeof o._discardAnimations&&"function"==typeof o._play&&"function"==typeof o._updateAnimationsPromises&&!o.nofCQ&&"function"==typeof n._updatePromises&&!n.nofYH){o.nofCQ=1,n.nofYH=1;const i=(e=>{const t=Array.prototype.filter;let n=null;if(Array.prototype.filter=function(){return n=this,this},e.call({}),Array.prototype.filter=t,n&&"number"==typeof n.length){return n}return null})(o._updateAnimationsPromises);if(!i||"number"!=typeof i.length)return;n._updatePromises31=n._updatePromises,n._updatePromises=function(){var e=this._oldPlayState,t=this.playState;return t!==e&&(this._oldPlayState=t,this._readyPromise&&("idle"==t?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==e?this._resolveReadyPromise():"pending"==t&&(this._readyPromise=void 0)),this._finishedPromise&&("idle"==t?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==t?this._resolveFinishedPromise():"finished"==e&&(this._finishedPromise=void 0))),this._readyPromise||this._finishedPromise};let r=!1;const a=()=>{const t=n=>{var o=e;o.currentTime=n,o._discardAnimations(),0==o._animations.length?r=!1:A().then(t)};return{restartWebAnimationsNextTick:()=>{r||(r=!0,A().then(t))}}},s=()=>{const t=document.createElement("a-f");if(t.id="a-f",!document.getElementById("afscript")){const e=document.createElement("style");e.id="afscript",e.textContent="\n              @keyFrames aF1 {\n                0% {\n                  order: 0;\n                }\n                100% {\n                  order: 1;\n                }\n              }\n              #a-f[id] {\n                visibility: collapse !important;\n                position: fixed !important;\n                display: block !important;\n                top: -100px !important;\n                left: -100px !important;\n                margin:0 !important;\n                padding:0 !important;\n                outline:0 !important;\n                border:0 !important;\n                z-index:-1 !important;\n                width: 0px !important;\n                height: 0px !important;\n                contain: strict !important;\n                pointer-events: none !important;\n                animation: 1ms steps(2, jump-none) 0ms infinite alternate forwards running aF1 !important;\n              }\n            ",(document.head||document.documentElement).appendChild(e)}document.documentElement.insertBefore(t,document.documentElement.firstChild);const n=function(o){const i=o.timeStamp;var a=e;a.currentTime=i,a._discardAnimations(),0==a._animations.length?(r=!1,t.onanimationiteration=null):t.onanimationiteration=n};return{restartWebAnimationsNextTick:()=>{r||(r=!0,t.onanimationiteration=n)}}},{restartWebAnimationsNextTick:c}="onanimationiteration"in document.documentElement?s():a();o._play=function(e){return e=new t(e,this),this._animations.push(e),c(),e._updatePromises(),e._animation.play(),e._updatePromises(),e};const d=new Set(i);i.length=0,i.push=null,i.splice=null,i.slice=null,i.indexOf=null,i.unshift=null,i.shift=null,i.pop=null,i.filter=null,i.forEach=null,i.map=null;const u=()=>{d.forEach((e=>{e._updatePromises()||d.delete(e)}))};o._updateAnimationsPromises31=o._updateAnimationsPromises,o._updateAnimationsPromises=u,delete o._updateAnimationsPromises,Object.defineProperty(o,"_updateAnimationsPromises",{get:()=>0===d.size?z:u,set(e){delete this._updateAnimationsPromises,this._updateAnimationsPromises=e},enumerable:!0,configurable:!0});let p=Object.getOwnPropertyDescriptor(n,"finished");n.__finished_native_get__=p.get,"function"!=typeof p.get||p.set||!0!==p.configurable||!0!==p.enumerable||Object.defineProperty(n,"finished",{get(){return this._finishedPromise||(!d.has(this)&&d.add(this),this._finishedPromise=new l(((e,t)=>{this._resolveFinishedPromise=function(){e(this)},this._rejectFinishedPromise=function(){t({type:DOMException.ABORT_ERR,name:"AbortError"})}})),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise},set:void 0,enumerable:!0,configurable:!0});let f=Object.getOwnPropertyDescriptor(n,"ready");if(n.__ready_native_get__=f.get,"function"!=typeof f.get||f.set||!0!==f.configurable||!0!==f.enumerable||Object.defineProperty(n,"ready",{get(){return this._readyPromise||(!d.has(this)&&d.add(this),this._readyPromise=new l(((e,t)=>{this._resolveReadyPromise=function(){e(this)},this._rejectReadyPromise=function(){t({type:DOMException.ABORT_ERR,name:"AbortError"})}})),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise},set:void 0,enumerable:!0,configurable:!0}),"function"==typeof n._rebuildUnderlyingAnimation&&!n._rebuildUnderlyingAnimation21&&0===n._rebuildUnderlyingAnimation.length){n._rebuildUnderlyingAnimation21=n._rebuildUnderlyingAnimation;const e=function(){return this.effect&&this.effect._onsample&&(this.effect._onsample=null),this._rebuildUnderlyingAnimation21()};n._rebuildUnderlyingAnimation=e}}})(),!I&&l.resolve().then((()=>{class e extends Set{constructor(e){super(),this.limit=e}add(e){if(!super.has(e)){super.add(e);let t=super.size-this.limit;if(t>0){const e=super.values();do{const t=e.next().value;super.delete(t)}while(--t>0)}}}removeAdd(e){super.delete(e),this.add(e)}}const t=new e(8),n=new e(8);let r="",a=0,c="",d="",u=0,p=0,f="",h="",g="",m="";function _(e){if(t.length>0){for(const[e,o]of t)n.removeAdd(e);e&&t.clear()}}const w=oe&&E;w&&b("ytd-video-primary-info-renderer").then((()=>{let e,o;if(e=document.createElement("ytd-video-primary-info-renderer"),e instanceof Element){if(o=y(e).constructor.prototype,o.__getEmittorTaskMgr859__=function(){let e=null;try{e=(this.ytTaskEmitterBehavior||0).getTaskManager()||null}catch(e){}return e},"function"==typeof o.fetchUpdatedMetadata&&1===o.fetchUpdatedMetadata.length&&!o.fetchUpdatedMetadata717){let e;o.fetchUpdatedMetadata717=o.fetchUpdatedMetadata,o.fetchUpdatedMetadata718=function(e){let t=!1;if(!e||"string"!=typeof e||!c||c!==f||e!==f||ie&&ie===h?("string"!=typeof e||p>3||!f||f===e&&f!==d||d&&d!==e)&&(t=!0):ie||ae.videoId!==h||(t=!0),u&&(s(u),u=0),t)return this.fetchUpdatedMetadata717(e);let n=d===e?8e3:800;u=i((()=>{this.fetchUpdatedMetadata717(e)}),n),console.log("[yt-js-engine-tamer]","5190 delayed fetchUpdatedMetadata",n)},o.fetchUpdatedMetadata=function(o){if(!re)return e&&s(e),void(e=i((()=>{this.fetchUpdatedMetadata718(o)}),300));try{if(p++,(arguments.length>1||!(void 0===o||"string"==typeof o&&o))&&console.warn("CAUTION: fetchUpdatedMetadata coding might have to be updated."),"string"==typeof o&&n.has(o))return void console.log("[yt-js-engine-tamer]","5040 skip fetchUpdatedMetadata",o);if(!o&&(this.data||0).updatedMetadataEndpoint)c&&d!==c&&(d=c),r="",a=0,_(!0);else if("string"==typeof o){const e=ae.videoId;let n=!!ie;if(f!==o||h!==e||!h||!e||ie&&ie!==e){if(f===o&&h!==ie)return}else n=!0;n&&(g=o,m=ie||e),t.has(o)||t.add(o)}return this.fetchUpdatedMetadata718(o)}catch(e){console.log("Code Error in fetchUpdatedMetadata",e)}return this.fetchUpdatedMetadata717(o)}}if("function"==typeof o.scheduleInitialUpdatedMetadataRequest&&0===o.scheduleInitialUpdatedMetadataRequest.length&&!o.scheduleInitialUpdatedMetadataRequest717){o.scheduleInitialUpdatedMetadataRequest717=o.scheduleInitialUpdatedMetadataRequest;let e=null;o.scheduleInitialUpdatedMetadataRequest=function(){try{arguments.length>0&&console.warn("CAUTION: scheduleInitialUpdatedMetadataRequest coding might have to be updated."),r="",a=0,u&&(s(u),u=0),p=0,_(!0);const t=this.__getEmittorTaskMgr859__();if(t&&!t.addJob714&&t.addJob&&t.cancelJob&&function(e){const t=e.constructor.prototype;t&&"function"==typeof t.addJob&&3===t.addJob.length&&"function"==typeof t.cancelJob&&1===t.cancelJob.length&&(t.addJob714||(t.addJob714=t.addJob,t.addJob=function(e,t,n){const o=this.addJob714(e,t,n);return o>0&&(this.__lastJobId863__=o),o}),t.cancelJob714||(t.cancelJob714=t.cancelJob,t.cancelJob=function(e){return this.cancelJob714(e)}))}(t),t&&!t.addJob714&&console.log("[yt-js-engine-tamer]","scheduleInitialUpdatedMetadataRequest error 507"),t&&"function"==typeof t.addLowPriorityJob&&2===t.addLowPriorityJob.length&&"function"==typeof t.cancelJob&&1===t.cancelJob.length){let n;if(e){const n=e;e=null,console.log("cancelJob",n),t.cancelJob(n)}let o=t.__lastJobId863__;try{n=this.scheduleInitialUpdatedMetadataRequest717()}catch(e){}let i=t.__lastJobId863__;return o!==i&&(e=i),n}console.log("[yt-js-engine-tamer]","scheduleInitialUpdatedMetadataRequest error 601")}catch(e){console.log("Code Error in scheduleInitialUpdatedMetadataRequest",e)}return this.scheduleInitialUpdatedMetadataRequest717()}}}})),w&&se.then((e=>{let o,i;if(o=e,o instanceof Element){if(i=y(o).constructor.prototype,"function"==typeof i.sendServiceAjax_&&4===i.sendServiceAjax_.length&&!i.sendServiceAjax717_){function p(e,t,n){let o=(e||0).is,i=((t||0).updatedMetadataEndpoint||0).videoId,r=(n||0).continuation;return"string"!=typeof o&&(o=null),"string"!=typeof i&&(i=null),"string"!=typeof r&&(r=null),{is:o,videoId:i,continuation:r}}i.sendServiceAjax717_=i.sendServiceAjax_,i.sendServiceAjax_=function(e,o,i,r){try{const{is:r,videoId:a,continuation:s}=p(e,o,i);if((a||s)&&"ytd-video-primary-info-renderer"!==r&&console.warn("CAUTION: sendServiceAjax_ coding might have to be updated."),ie&&a&&s&&g&&m&&g===s&&m!==ie)return n.removeAdd(s),void t.delete(s);if(d&&d!==s&&s&&(_(!1),n.delete(s),t.removeAdd(s),n.removeAdd(d),t.delete(d),d=""),n&&s&&n.has(s))return;"ytd-video-primary-info-renderer"===r&&a&&s&&!t.has(s)&&t.add(s)}catch(e){console.log("Coding Error in sendServiceAjax_",e)}return this.sendServiceAjax717_(e,o,i,r)}}"function"!=typeof i.getCancellableNetworkPromise_||5!==i.getCancellableNetworkPromise_.length||i.getCancellableNetworkPromise717_||(i.getCancellableNetworkPromise717_=i.getCancellableNetworkPromise_,i.getCancellableNetworkPromise_=function(e,o,i,y,b){try{const{is:e,videoId:b,continuation:v}=p(o,i,y);if((b||v)&&"ytd-video-primary-info-renderer"!==e&&console.warn("CAUTION: getCancellableNetworkPromise_ coding might have to be updated."),ie&&b&&v&&g&&m&&g===v&&m!==ie)return n.removeAdd(v),void t.delete(v);d&&d!==v&&v&&(_(!1),n.delete(v),t.removeAdd(v),n.removeAdd(d),t.delete(d),d="");const C=v;if(n&&C&&"string"==typeof C&&n.has(C))return;"string"==typeof C&&r!==C?(r=C,c=C,d===C&&(d=""),a=0):"string"==typeof C&&r&&r===C&&(a>1e9&&(a=1e4),++a,a>=3&&n.size>0&&l.resolve(C).then(w).catch(console.warn),5===a&&(t.clear(),t.add(C))),"string"==typeof C&&C&&(ie||ae.videoId)&&(f=C,h=ie||ae.videoId),u&&(s(u),u=0)}catch(b){console.log("Coding Error in getCancellableNetworkPromise_",b)}return this.getCancellableNetworkPromise717_(e,o,i,y,b)})}function w(e){e===r&&e===g&&e===f&&n.size&&(n.size,n.forEach(((t,o)=>{o!==e&&n.delete(o)})))}})),b("ytd-expander").then((()=>{let e,t;e=document.createElement("ytd-expander"),t=y(e).constructor.prototype,Z(t.initChildrenObserver,"0.48.21")&&Z(t.childrenChanged,"0.40.22")&&(t.initChildrenObserver14=t.initChildrenObserver,t.childrenChanged14=t.childrenChanged,t.initChildrenObserver=function(){var e=this;this.observer=new MutationObserver((function(){e.childrenChanged()})),this.observer.observe(this.content,{subtree:!0,childList:!0,attributes:!0,characterData:!0}),this.childrenChanged()},t.childrenChanged=function(){this.alwaysToggleable?this.canToggle=this.alwaysToggleable:this.canToggleJobId||(this.canToggleJobId=1,j().then((()=>{this.canToggleJobId=0,this.calculateCanCollapse()})))},console.debug("ytd-expander-fix-childrenChanged"))})),b("paper-ripple").then((()=>{let e,t;e=document.createElement("paper-ripple"),t=y(e).constructor.prototype,Z(t.animate,"0.74.5")&&(t.animate34=t.animate,t.animate=function(){if(this._animating){var e;const n=this.ripples;for(e=0;e<n.length;++e){var t=n[e];t.draw(),this.$.background.style.opacity=t.outerOpacity,t.isOpacityFullyDecayed&&!t.isRestingAtMaxRadius&&this.removeRipple(t)}(this.shouldKeepAnimating||0)!==n.length?(this._boundAnimate38||(this._boundAnimate38=this.animate.bind(this)),j().then(this._boundAnimate38)):this.onAnimationComplete()}},console.debug("FIX_paper_ripple_animate"))}));{const e=function(t,n){if(1!==e.m511||n)return i.apply(window,arguments);e.m511=2,e.m568=t},t=function(t){const n=t+"";if(n.startsWith("function(){setTimeout(function(){")&&n.endsWith("})}")){let n=null;e.m511=1,t(),2===e.m511&&(n=e.m568,e.m568=null),e.m511=0,"function"==typeof n&&j().then(n)}else{if(!n.includes("requestAninmationFrameResolver"))return o.apply(window,arguments);j().then(t)}};let n=!1;const r=function(){if(!this)return;if(n)return this.doIdomRender13(...arguments);n=!0;const{requestAnimationFrame:o,setTimeout:i}=window;window.requestAnimationFrame=t,window.setTimeout=e;let r=this.doIdomRender13(...arguments);return window.requestAnimationFrame=o,window.setTimeout=i,n=!1,r};for(const e of["ytd-lottie-player","yt-attributed-string","yt-image","yt-icon-shape","yt-button-shape","yt-button-view-model","yt-icon-badge-shape"])b(e).then((()=>{let t,n;t=document.createElement(e),n=y(t).constructor.prototype,n.doIdomRender13=n.doIdomRender,n.doIdomRender=r,n.doIdomRender13===n.templatingFn&&(n.templatingFn=r),console.debug("[yt-js-engine-tamer] FIX_doIdomRender",e)}))}}))})),J){if(console.groupCollapsed("%cYouTube JS Engine Tamer","background-color: #EDE43B ; color: #000 ; font-weight: bold ; padding: 4px ;"),console.log("Script is loaded."),console.log("This script changes the core mechanisms of the YouTube JS engine."),console.log("This script is experimental and subject to further changes."),console.log("This might boost your YouTube performance."),console.log("CAUTION: This might break your YouTube."),B.length>=1){console.log(" =========================================================================== ");for(const e of B)console.log(e);console.log(" =========================================================================== ")}console.groupEnd()}})();