// ==UserScript==
// @name         音视频增强脚本：无极调速|倍速快学|快乐刷剧|视频下载|画面截图等「适用大部分网站」
// @name:en      Audio and Video Enhancement Script: Supports infinite speed adjustment, video downloading, and more.
// @name:zh      音视频增强脚本：支持无极调速、倍速快学、快乐刷剧、视频下载、画面截图等「适用大部分网站」
// @name:zh-TW   音影片增強腳本：支援無極調速、倍速快學、快樂刷劇、影片下載、畫面截圖等「適用大部分網站」
// @name:ja      オーディオおよびビデオ強化スクリプト: 無限速度調整、倍速学習、快適な TV シリーズ視聴、ビデオ ダウンロード、スクリーンショットなどをサポートします。「ほとんどの Web サイトに適用可能」
// @name:ko      오디오 및 비디오 향상 스크립트: 무한 속도 조정, 배속 학습, 행복한 TV 시리즈 시청, 비디오 다운로드, 스크린샷 등을 지원합니다. "대부분의 웹사이트에 적용 가능"
// @name:ru      Скрипт улучшения звука и видео: поддерживает бесконечную регулировку скорости и многое другое.
// @name:de      Skript zur Audio- und Videoverbesserung: Unterstützt stufenlose Geschwindigkeitsanpassung und mehr.
// @namespace    https://github.com/xxxily/h5player
// @homepage     https://github.com/xxxily/h5player
// @version      4.3.2
// @description  视频增强脚本，支持所有H5音视频网站，例如：B站、抖音、腾讯视频、优酷、爱奇艺、西瓜视频、油管（YouTube）、微博视频、知乎视频、搜狐视频、网易公开课、百度网盘、阿里云盘、ted、instagram、twitter等。全程快捷键控制，支持：倍速播放/加速播放、视频画面截图、画中画、网页全屏、调节亮度、饱和度、对比度、自定义配置功能增强等功能，为你提供愉悦的在线视频播放体验。还有视频广告快进、在线教程/教育视频倍速快学、视频文件下载等能力
// @description:en  Audio and Video enhancement script, supports all H5 video websites, such as: Bilibili, Douyin, Tencent Video, Youku, iQiyi, Xigua Video, YouTube, Weibo Video, Zhihu Video, Sohu Video, NetEase Open Course, Baidu network disk, Alibaba cloud disk, ted, instagram, twitter, etc. Full shortcut key control, support: double-speed playback/accelerated playback, video screenshots, picture-in-picture, full-screen web pages, adjusting brightness, saturation, contrast
// @description:zh  音视频增强脚本，支持所有H5视频网站，例如：B站、抖音、腾讯视频、优酷、爱奇艺、西瓜视频、油管（YouTube）、微博视频、知乎视频、搜狐视频、网易公开课、百度网盘、阿里云盘、ted、instagram、twitter等。全程快捷键控制，支持：倍速播放/加速播放、视频画面截图、画中画、网页全屏、调节亮度、饱和度、对比度、自定义配置功能增强等功能，为你提供愉悦的在线视频播放体验。还有视频广告快进、在线教程/教育视频倍速快学、视频文件下载等能力
// @description:zh-TW  音影片增強腳本，支持所有H5視頻網站，例如：B站、抖音、騰訊視頻、優酷、愛奇藝、西瓜視頻、油管（YouTube）、微博視頻、知乎視頻、搜狐視頻、網易公開課、百度網盤、阿里雲盤、ted、instagram、twitter等。全程快捷鍵控制，支持：倍速播放/加速播放、視頻畫面截圖、畫中畫、網頁全屏、調節亮度、飽和度、對比度、自定義配置功能增強等功能，為你提供愉悅的在線視頻播放體驗。還有視頻廣告快進、在線教程/教育視頻倍速快學、視頻文件下載等能力
// @description:ja  ビデオ拡張スクリプトは、Bilibili、Douyin、Tencent Video、Youku、iQiyi、Xigua Video、YouTube、Weibo Video、Zhihu Video、Sohu Video、NetEase Open Course、Baidu ネットワーク ディスク、Alibaba クラウド ディスクなど、すべての H5 ビデオ Web サイトをサポートします。テッド、インスタグラム、ツイッターなど 完全なショートカット キー コントロール、サポート: 倍速再生/加速再生、ビデオ スクリーンショット、ピクチャー イン ピクチャー、フルスクリーン Web ページ、明るさ、彩度、コントラストの調整、カスタム構成の強化、その他の機能により、快適なオンラインを提供します。ビデオ再生体験。 ビデオ広告、オンライン チュートリアル/教育ビデオなどを早送りする機能もあります。
// @description:ko  비디오 향상 스크립트는 Bilibili, Douyin, Tencent Video, Youku, iQiyi, Xigua Video, YouTube, Weibo Video, Zhihu Video, Sohu Video, NetEase Open Course, Baidu 네트워크 디스크, Alibaba 클라우드 디스크와 같은 모든 H5 비디오 웹사이트를 지원합니다. 테드, 인스타그램, 트위터 등 전체 바로 1가기 키 제어, 지원: 배속 재생/가속 재생, 비디오 스크린샷, PIP(Picture-in-Picture), 전체 화면 웹 페이지, 밝기, 채도, 대비, 사용자 정의 구성 향상 및 기타 기능 조정, 쾌적한 온라인 환경 제공 비디오 재생 경험. 비디오 광고, 온라인 자습서/교육 비디오 등을 빨리 감기하는 기능도 있습니다.
// @description:ru  Сценарий улучшения видео поддерживает все видео-сайты H5, такие как: Bilibili, Douyin, Tencent Video, Youku, iQiyi, Xigua Video, YouTube, Weibo Video, Zhihu Video, Sohu Video, NetEase Open Course, сетевой диск Baidu, облачный диск Alibaba, Тед, инстаграм, твиттер и т.д. Полное управление клавишами быстрого доступа, поддержка: воспроизведение с удвоенной скоростью/ускоренное воспроизведение, скриншоты видео, картинка в картинке, полноэкранные веб-страницы
// @description:de  Videoverbesserungsskript, unterstützt alle H5-Videowebsites, wie z. ted, instagram, twitter usw. Vollständige Tastenkombinationssteuerung, Unterstützung: Wiedergabe mit doppelter Geschwindigkeit/beschleunigte Wiedergabe, Video-Screenshots, Bild-in-Bild, Vollbild-Webseiten, Anpassung von Helligkeit, Sättigung, Kontrast, benutzerdefinierte Konfigurationsverbesserungen und andere Funktionen
// @author       ankvps
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAADAFBMVEUAAAAZo+IiqNkXlMx+xs+Kw947ueyq5fAomMlTude76OnJ5uo6o8BrvuB0u9SIzNdFo8sjpcIom7IurODa698PjcBW0uxAoMocp90xjsR+v9zS2c3j6+UznbP5//uYtK3/7dNHn9DL9PbM9vYDqe0Cq+sDqO0Ipu0Cqu8Eqe8CqeYGpvAMpuMArun/////+//7//////0Dp+v/+P8ArPUHqOr/+/P/+/cBrPDs////+PsCquj//voBqfP4/f/3//4Brvj1//cJqOX8/P4Bqvfw//8ArfsBrub//Pv+/vICp/cBrPMAr//5/vcDpf8KpekGqd0Bqv/y//oNp90BqfsFq+ALpOABp/L8//v//+jy//L0//8LptgCrez/9vYBsO4BoOL///YGpfYPoPYBm+YBofEAnuoBleEBruEAsuoHpfrl//8CrdsBousHquMNot0EjdoNnNn0+/8BnPUMpO7/++0Qo+cBm9wYoOA+tNAFltAAovf5/u/A7/8CrvL//+4Amu2c1OMCldcBn8gBnvwAlehxvcoBotoFqtICntL/9P3T9fAAtP8BlvFmvszd//sBs/QJpPIUnu0CseQAtPm+6fCj1uZLq9PR+/z+9u0BpuGx8/3s+vvS8vu89Pem5fcFjPRz0eoaoNgElMLa+Psfsu+y5OgEkcwQnv8Bl/zi+frG7/lHxu+J1OgAtuH//Nx1ytg6sNgDh8O68P7G+/uy6PKV2vA+t+kDsdf++OUjmd8AuOwtuOJkxdotodX6+P3p//eB3fde1+1ixe2k8Pem2fAVl+cZruRavdxwu9oGq8dMu+tc0uAiltXQ6vdMxtxAu9xSt9UboM6+/P4AvPn/7/Vxv+cQn76W5/p/ye2P5ecPlN4XrNen1dUnq8z/7/4Gi+gpqtw9n9Auqeuz0OdfteRHt8UDhbSj3+iLxuM7nuEiutFarLnt7/oTpfO+19mJucYelsEHnq0amPXp+udfoOd54OHN7N0Eus+u9+/N2PGexO8omu4fxL8ZpaEAzOwL7fbjAAAAJHRSTlMAzsj+hQSzWf6dcCf8fVE4n/36vRP149vMupcJBOnihEkHl8Lv/rxjAAAdpElEQVR42ryWW2jTUBiAq9bpNqfzfr8np0nXiRwSKJRAqCGDtjYpSdeXjo4uXTtZb3RMWaHU1aHiRMV5YWq9TlGmIAw3mIo3vItXRJz6oCiIIKgvgj54UvG2qe3ysO+hTR7Of76c85///LrBTFs0T6dbXFpSotcXFxVNHa0ya5QmZuUGTy0qKtbrS0pKF6vBp+nyMXfBknFl5TPHj2k51hJHRKNRqTqHaRhU55CiCBQDhRozfmZ52bilC+blFZg4o+vqgJJOOl0OWTBAiAGAWYyasKhjMQAFrt3hTKaVgatdMybmmX5S+flYuoJiGVnmPB7S42EoBIFrgkBD7YwHwXA852G5ivrY+fJJun8zds6ETG1dpFEURa8kea0EYU6ZEQRAYMQwwACCMOcg7BYJRUNBG611tZkJc8b+8/Nnx8IdPsldFXK7RTQmYkEYjVYjXaEJGg01WhARFEx0uyNVbqmmoz42e9I/dn++yLucdJ/PoS4dAo9YVUwmwaAJAWWjVQW32yk7RbEOXx/tdMni/Il/y/450zf2pzg/qKRkjkXwvJnGMIgCNRlwTaCBBgMEGG3meRbByVQl8Msd/Znpc+YO2f6FcbY5Lp5qoJxNJkGgaQzHGY5iGJvf7yerqiqHTVUViYbaGIbi7DiOQVoQTE1OquGUGG9m4wsHJ0LZIchAmsZxsgLQKIUg+njyB5hGyB+o0QBaClBB4jgNSQYeKhu0/9NZgsYIkgQAx1ASDwJoAhsEiosDQJIEAe389D/yoHRKRiCxEYQUMlNKf0uA2Rv7o4IZGzHM4Wj/xtm/0kAfkzvc9AguAUm7t9pi+p8FaHLAxZ3CR1IAP8W5ApN/FKTiTIfT34ADbMQAeIPf2ZEp1unU23HcmFofTVLEsE7WzydtBgRF0jW1Y8blTsCMYF11X6XTgxcy/5+HU6sA7nFW9kl1sRnqSSjpClhFH9VkKCR3JFEF3VVR9NTY2OiVoCYFQxPlc1vru0rUHdjMbAg5ZBNNFCCASuX3iiIIOCq2VREjpkWAoE2yI7TBs1ndg7Ig5XWznIDlF6Dtrl84EOhP0wKgD+BYt8gFy1ARKm+jRDfFCiBf5qL9Jm02G2f7fscwqM9BT9qSAAgsEmDbisfqps1MeJAAT4O8+QcBZs21m2qDI0mmalNzczPUtAeAZlnRyyVmTtON++C0eUUkAPOtGpoKWnDUInV2dkZC7k6jkYaoaU0BOHwBSPOU6LU5x5fqSsa4ZEmi+PzSkMBJl9qrhusVJRyuDwSSsos3E0hCAzwlSbILVQJ9i4Pzein+v6ce3dMoRcOKElwdXXPtbHd3d29376s1A8GgUh8mzIAgQK4sqD9EwQJeztGiRwLtOQH872UPRYQ4MrCTitJmPntj7ZVsz+5NOY7szp65cX9rfVvAbEaGqH8BOISAKcgA5ynvd4HiVpYyRlDbSA6Z3RKhDUQqRdneN9fWtmzovfhw98M9Zy5eur5L5fXlgxev9GzZvef6g9agUlOT9ISMqxyPGh5U2wsoaWrLa6TY1mJdUdzAoBfIkUPLFbRsD0WaZAff2Xr+ZM+W7M77N+Obk55wOsCvW5dIJJKdL94833HhxJne1tWWdjnqxbayNc9MTAECHIzgFEO3FiEBwJgtVmyoALDJqe2N3jXNSrD3Yja79n48EQgfOJ5QVsfSfFJZHQwkk+mgUnv6ZLbnya24mKozfZ58p66dFcgCBDCrxcwY4kW6qVHImI1WMEQAgIb+ijq/L3T45ZcT2bs3b24MJ9LpT1977z1+2226dfDx9d6ubWklEYDrvbf29+x/89HSHh//oMLF0FiBAiSMTtWNRgIpJGAbmgONGwiXKxC9fST75sPAgQNt6z/fPblj35G9K5Y9nLxz+fKVe/ftP3nuXWbgQCIRv3/0xNO+zetkX2hNIb0daQNIwAOrkUA1Zv/GiZ19NXHFcQDv8tIHX9qn/gGEJATvzBDIZCaTjTAkg1kkgiGJhAQhIAFKQcAlLLI0rAJFWhYREMsWIWxio1QsLijFrZXaVi1udSvWU1tta9dLkdba5YR+z0lOZuaemU9+d+7cmYEVYEPAMxG+efzgQPnd0+7J6W6rvfCr/f2VBAZsRo8XGfn6Bsj2em0Ak+65fWaquv14+fT2060fBIVH6qajxb4A2KEBnGD/tS8sAkID/wHAStEGPBgk7t+17ohKuPReCwEABhCb0WhBjq55C1XNWkgEwKCNg1+WJ5aUvnj58PuvVwenirg+AOLZgRDg9xTg77NKyHlDxmX54IPmkurVe/NijE24mUaB2UHzkaPpY7SZjygkKEpk4tlMY8dUWu/WW/P32i5Zs3gsXwAb/wQIgyFgYwr3qVmHZ4gV8bTTDx7PPSz/9eCVh11SCm9qwumdFEbUmGb5La9clmooIDXLNVIplW0BYNd2uza8e0Xl6KF22UqxgQuff4TC/wCkbAwM5cg4EPDqWhaHE6Jjw+vYk8OL2OL69Dfjz0+/8t3o3fbIlcUdForSKBQoqqBwldzkbMJ3vXIZMAIVKo1hJAoEMTscQPDJpS0RubtHdq4oSlkzELpeVrsph/MfUztbF8IRsgJffe55+Azvx2OzlH5LgHR21EDZN9q4X767tyY3P+lQFwbMZhQeBwGYBNGoJCZj3qZtIEagAihAHWakQkU7aAAqb3ZG9l5p+/bulemynJ6q87s3Cf8V4KdksXnw1U/g8889HxgQwPkDAAPHRz5bdDDtVMNHV4fXlI2fBojJyAhwBMGwmL8CUBRDaZQkcZsNt5Cg78yWQntZV+shV936Dcoccb6/jwDRAmDlHwBdvXJ95MCFx/euu17rPDsK5ixej7EAV6lUVAyq+CsAmlQkSdkYpml2DtAzxcm5rzfsyukNT/7wgHpH0L8DVi4AWP8EgEmOToksG5x42H6+7GwfguCzOAYWgtmYZwEAg6UBAP4ACG6ZI2aK38x6ubKtNE50IDQ82FcA668VqE1ftyPri8PbreqM8VFkVkADx9Gx/ttuGgj+DqC8AkCPtvWPtbXQZAVJz7i0xfOgo9yQYmgO4fwPAPzekfNa8trW+w9+tb7kBqSAkh7dn1ME3zSebMXkCuTZClgoR8fVixcvWn9+RGOzFTVnS4O779BDVnVKebT4fwBgxCm6zkd5p1LrixuQOQ0hHessSoyPirAOv9RCxzwDwDDgODFclLU1wtDduTeTbKL6hrKCbz1uLROtt7OWWQEe98ntojrjbeKMvbe9H0zM4uhnndVh0bEydRVveFMehmjwRQD6BJB58lZ0VWRY8rs9Wd0zhNFL7YuvKr3W1/FgoCSLtSwAiwXbw6uR//qwi4+7iqvaHwLgzFa0Xs1V56xTyuBTCC/jiJnSkAo5AwGYSgDHBIK2DZcfrM1nRae+2WOf/qzAI0A7ErRXOvpWfK/dujxAfb1SxPIziMXHrUd2/rylZOo7Fd/ocbx/JTG1LCC2VhYWz3alu21ShQUHeQe2YSSjl1QgxN6iOGVq6ur4lNc2VCWdkMLLsvftEu26yh+37JCFLAugVIoggCsOTig/OtZpTZikVPxso+NIaURzOttPyOHVsTnWYzazQhCzAAAkY5LwwZ4pa35+9Op0g3atsirh2h4MR7Hb1qju91o3ha1a3jAUwcBpgROc+8VHX2YkXGrE4J9liHO5VVxDHY+t023kqZPuULREoMHyTi0A9BBQOWUIC+cGpnPCQoPU4kNugCtQ+Qelrx/f1VHKWd5JGKILYUGA0N/V8ENxu30S0xASC5l5wlUVro3g5QQGsoLVhdtstASXUk8DEiO1KbpQVlxIsDrxeiuwMGawL7e6enDkeNAyARv9/eJgJ9jHHdu39NaOFggIumIOfVRcq42UcXXp0clxEYkNDJ1JSSn3h0sAx3huZImWF7pyg9AgyxiqAXiBkzSd7c0ab/wiicPhBvkOYNdxhbGigLSkjtELudV7MaNAYuZXgH0XXCmyWiG8Qx+oT7pOGPUSFazAEgCRdnTnbE3hBijjwsS5w59KAcYYLdhYb4Ku5VhGGnzR7zuAZ4Dzc1xAQkLLo6JEVxvGxCAoggDp4C123Ab/ulUbBoqH2zCvQqEyY3m7lwBo44phmZglUrIiVt1a0QcQlYbRYI2byhOPVB6ywztb3wFcsTAuNlZX+k7je1lZX+5E+AoEowkplnluOFlZ1xNZ5Rq+g2o8JILQ4HeAEwIUeqzhpaL8HbWrwtQZX7sxFR8lcLkZ3V5eOLXz48SgIA7XDw4tXwHwJio06UjlNW3aTAw6MaFR0YSEBHsm123JuFJaOvU+imi8JJ+fuTgMcamCj+gp0DJe7nLlJiXtbwGUAEFpXE5gl9elhbqP2eHjO9y5v4/nQOwG3vq6+gs3jpZHBbVhcr3JhihgJoC0oePEiZN3WgFOolKyYmKCGjl+A1OQcDOCqDDguD147szM/XtgoT2iEFAocK8Jb37U8GG+zJUq7qkL4PoMiEi+4O7PKPnmNIUrSI1JDmMyOSlUSkupAq/HY6KNRtrpaVm3TWoyOuV6ubOpqUkFZwSCphjYdKG9APYSsb+k9I2+IXH466mreuqUfr4DVn/eeKS69/pOBpYadzILcWbjfAw104cP650FNq8XdXpGdl/GCrxGW4ym4Ntv4WFRGMbJLEYjQUjwcW/7w75zaerA1GAtV7mMCrjOuvdHJX6gNwoy4X6epGKOr5DSBE1LSMRiUeDMyIEbGGXBMdgDkKWXTExMVJBL0ddosm39WSVfuU/aowJTZVrhMgBRq8+4x2WcSafHSejRzMXQExaLAKcolQLJJBQSx2HQohsz05kSgqAlC+cBwoeRZEoWm8v1GqPxs+bw/JZtCVvXQkBssj/X5wo0z7ivGnL7GY9NotLIl6KXyzUxKn4FKacZp8Pk2bV7m9nkNOn1epMAhnE6YT8sBfZYk3HfGkNASxcEJMu0omUA4l2TDacKM45hDAAILngSSorGUBSGISoBlp0Nsj2t1+5jBUavzSbILliM0ylYioXPr6BOXy1M2tdl3ZqjDF8WIMI12XUqy/6JmWhsJMzE06GJhTgIosZBjfx0DK6g4dJS4MJSHDU1DvSjdwqTjjU0J0JAjy6a6zMgyjXTtVstHp+fHxqCn81P8vZChmA2w1Xjm+fH1e+c3Xzz5uant/+xMH9z6O35zbFR9iVAjm+A3zg196cmriiO/8Av/aF/RkhCK/sgJCFhkyUkCyRkEUIohJiXBlEDkgZCFJBABIQUBEFUFAQMICJUREGtgijSQrH4FqUWbdXasWOl73b6mJ6NBnVQB3oGZpbZsHzYe+6953y/N48VyiQhvIGEwqn5ionJ+YrtgZjcvhAVFcMV85fUl4crKirgp9fEfMUkfJkSSoaWDwBJCACFGbcQsraWRPTk89A/C7iAHpAikWP140wvQuqx5wGfCVxhCDSK+j2dNSWtjebC5Q6BiknCVNcQoaRsMjEvEGgg4lCjWG7UHX78AIkzimH+iXmLgtA4xMTh5FxrK5OE65achGyTH+Di9EiGp4+pboVGYSCIZyG3KOVOp77oyJaRB3iR0wlbs0C4OHBek7sxJ3ft4LgVAJY8DVl+gL2XWu4XlrS7jzgRlA7MbU0gZDKRUmlLh72AWQeKKJGGZm6//J0uS0MB4DtzIedYqVWVzyxEywDQplxumVLlTsl0AgyVUvrnIV0IR5xclO7et2kXRtK0wyGVv7gTuMCgn8Xbczd0MkvxB0tfitksPwBsRhll9zssBDxoIXgvwuuFWnnLJw8QnljMe21gIKYgvYcKL9fuzlZ/kBXv34yWPAvWzTT2ZZbVb0Fw7AUAL0AhFkMSSot0xwBADOkoh1uB+wtBix1Y85lD1v6ekRAA8G/HSwdomCm9UFBWPg4AoEf4A9ZgsrlZA624hqY1SprJgWQmB2SUSE9rNCSOaeA+aIYafxQ5Ndj0nUOur6aDigFgyQUJC4x7MB+svVCSlVykUYdYKqLS3E1ChGwdO3Gi9/wg6FLGU6Mix1li34FdGA2VD0hkTULs2rleuD/UgwiNZ+WkKF3mQL+qZJmmx60gf/FDllqSQSdpCOZml3fW9ufWfD+KSlE5KSUEArxn8qAHjAnPj6UkYTxSK4Ja/RgA+EUqDBcig3MF1sxM18FvBhHICoRUyuS87ZVhnVCUsgJF6dIBONbyfd95wlytuCCOKUhwbM+VR9sMXEVMXsGjYZvw1CiFevGXAMjBHwdYqh2S+L2+mQsIwkNxpwA57C/LD2Rzl9We+9UBNqf8fM+72+71UqcEci9IX7Zhn2l9Q11MkmqHx3cO14moOPGLN4Aj10YGTArwjsLrTvvm9kBfQAi8lvbcT/OOzXpSl6cPwOmjiDAWx3rHVlHVxt/vTpeKBUJsMMhcbTrZIAHHkOs606OjSHEAQMgAnD8YawrXqtjBMer4gX4Mt9BitPb7spqjtZfMy5NoDFy/TMllF4wzzekYTlNpSgvVbk9KMp3Meg/k24ji6Ea3Xm6UBwBgQ3KcqFq33sDhrNi4IUGdubsZV8qk+Gzijra+/TmRIcsFYA6eBBe7dl+7Yn8/+Rihodxu28PMhKTIrKyN0eAbR7lKQaAQwm74iX8IAOCjrxNTQt9bmb8xsb47qeabFlypQZ6cyP7w/vExl+F/ARhMZs+tQZ85+zyRphe4mx+WKwzRYWGMeMDSZvYBgED2MsBnkbGhYRx+cOimvOqMkWnIXXy2POFg+/6r2RIu1y9Aw4MXPLjnANzXA3A40KGb8s1Ttm8PJiU/xdEmJzlWXlwZmqCKMJkiJAklswyABlqzwBA0d4Zx2eAjx9dVrrue+nUHcQP55euyQynH233c1fAf+f/wyyYkMPDfkITA5/+FGEXQ0z8rE9p2yxBjE3LOs7ahIX8FnxUCVtn93wnZM5EqMAuwh/a6neFr6vNXzSSrN/RqnELkZolh4NytmY/VeZWJsaB95W/KU0fFc8HzTQmNYYGOr5Dwo1+3EnKee1VadcG7tefLD93rR4gmrOOxqy4yJTpEkrojzz5mQdP9Mp0fgMBgFgwOZF2P2vBzfuKB4tx7rWk6YrwtwbcdfI6qmsiTscx5sujkaEU8N5g5mReh5kbzJVoFf0XsYoAFuf694p2em81zf0gGuhBnEdJa5VJUV6vVO/mP5q4hPFr8CgBODT/Kqk5KUFertQPzRBEx/UXo3qAO5EnjlSBX3c7C7jU7DKcbDuTAiTyJKiEmcm90WLxCsjL6LQDsk6s2qMunf//3uvXHP/Emi348qIodHqPKHHh3P0mAUPkqAKxUjw6WFGqjCu3zRTr3njM1WTPjiBdHsMHeersVDuYVR0WuSo4OSdUmJGUU5Kxkh8SHcPhvBmCHnL7ziVZ9NH3eXO2aa8FhUBsvXb364aaR/g6EYLTiVwFgrZz95p0vvtjUOaQ8orNNZWt9/fCenDfEmGj65tWtJ2Pju1ebisMVKtXqDPtEb3YqN5jPeZtcz44xXF1RvW0SvZlabd+8H29Kxxwfde0aPC5ChAJM/ioAgot5CNYz3dXV2Jymc9f21pS5rkjRs6O/OJ00JOn+i99v9XyaEROlkGS7fFfbO8bKFfGRG8O4bwYIZnXH/1H5Q53rL95UzWrP5sOIRShQ4vBKEVQsTFsMALUx4yXgOh1RO5VbZj/agXrTRmvTlRalzgKe3tDEHfNa2C0L3pm4YNNPZCZJNiaywwMAiywbAKj/4XTKpqgo+y7qqGe1/c4FqE4FQqZEjkOxxQAE7i/XGciWM9Yy+9we3ChHoSygUFomNHpBydt3q+92++2h4zYSIycz1cWJq9iK2MiAZbPYtKpc0R2+Ll9t+ump5WhN9dqgUhyRSuMETmcaqQ/I9fVQkDwDkNHwcvTQrCBdI2tjPJtbEMHoKO/uXUrkdYikZ5kGV2ghEAjmETgA1FVWhsQsACyy7dhcOHwbH7py9fWsf59iY9brewcePsERSkMTaBotRElNUZOFse3iGN8Uj6ObnErSJkKabnv2Zg9s7rAc0aWnG2/cAAmLpuWo2GixFJ1yKgkcqosmAT68LWlN/cbYiBB+wLZbbFxCmoa9zw3maLcN9Olv+06a2h7P2hCe1xinkYlRCoxL9M9/v2IkMgSTi420wGgk6O921ySZfcM88JYtuAU6egGINRb0LHxIDlYjbSHAd5IjyKVKbXc3tyE2YFy+zboN3lBSdVH04J1t1YXmM602oUBIUShPatN70QurSkUOFKpWHBGRMAyDE2ZVlOedXVRj37lzt8eP14owXOkkUBgbCkPvelFgZVpMDBmuVHSvMcQGB6zbt5nXfIU6xXel48mvn58uK6+6PNThN69RWnkD3XegFKR0p9vC2Gmirks5Jdoy3+4W0eTM1sy2e18euNx+zYYT3rswYKMy+VmvFzRditKTKDK8latKDQ19f8G8fot9z43OMaw3//2g57d/tnp+bqvpHO7qoXDQgp3IFsgBsNHdBNXze/+ZNW2ZHxZ8NtvR+tieGmHOySizerbOTQzaUK9XoAMxT+SAuUDKaItQDAAGiWE9P2/Bvn/zAQZWxH/N21uIElEYwHGIIgqCeo8eYpw82nXIMmxKwrS0Wg3NFy3LHE2cCtxy03KtVVRM1lt02+2+mV0Wo9tmFG3FGlZ0ZdOI6ELRFvRSD0EFfTNGVGZNWdanIANyHOGAB/z9e3ru3JkYSF/fEel7YHJmdm0ovDy7fv+OSNu07cOeT2lri+w/0nvK0ZK2ZqKJs5H23rRLrrFLHLgdpFzYfe3pzoNjJ2w9vWrt+fnjZi1ubl4Fm2X81bAXW7ZMlGABA0ms6FedcGC8JfNky0OFwt5cacft0tFQEPl9pkBP/uXmp4d1p65cefFkNeV0UpSFuJ+93f7ufUDdacjlyDvGBp5xkZGw7Gr5cK8V/tdbOHn69Lmzm5snwU7Y/iiIiGSnKAGEQwCGBAhHVcSCE6mNr68V3oYSmUDThUvHL+1+RNHBaMZCmFZSKdoXjTo9nsBDavnh4vFD3efS/jljQoY9TbKN4m0SnlilV2qShZajJ9vHwzaZOXfy1AlgDU7mXMZ4o61TZC4jFhwQS1XGgyPd/dUJvVcqW+SlN4Qvn2htPXHk2eMej9Li8xECyhe1LL+1uW/nltZNpdxKT6zT0bBEGothOVGMj9OjkERiPuC0uh5d3f9m8Vhm2p7f2OteJDcndPDvPsN4VHpQNACZZGQFZGKHNISSUv88eUxhEiPTBveD3p3rtkQOFbtLfb3ZbLbUXbwEqOpY32O3dSku13aFRtnlqZQoJ/JiQtABEkXitV2jN4XvrrnYXSyeLN1wu7cZvXCuEShEjSQDmUiATIwlk1ahXIhEQNwJAsFhXcynl1otM55lj5xo37ePlVz7Nq3P3hxG+6w0ZBAEHNuZ4xaBiTGcMZc4IHEjj+CLhTQF+0RvoSgaefkMDMNh2TLl2uju/2PMhtgzGgYvsKAKUUsJ2uVqynd05PMd+dUrXCYJj8ZVYv4Xb/7yDAxfCq5V8Kkg0gj4Ep+WhTfwPmM24HxKAwfOh/gEISDnaOb5/f6M3+NxZvx+LahOPsbJ88EtVOF8XEEjQgAqiYYEM+Z4Y/zVq0TiVSP8onDwjAjhwOy+Axr9ABqBdJIGtVT6U9KJE4iUhEDyqnXJpM2WtKmDDkdXF6uLf64h4fHVNdyATq1nSOeAQQEZF9QKA9tKkWRai2WfRqFIJjH0m6h1os4w0Td0AMt64QY4sV6e0Gz/dmpgvUGpdQgLm1UOjrAZQ/G4EOEiGMhQCCQUxuMI+23Y3KUKDGRpNzVDx5F28xQwNmZ0OpuNuahCBLjRbl/HYBa3rzSPLuP2ug2L2xewuP0XeT/6drCaef/wfxs4gC0fziYeynonHsovEg+IXJSx+kYuEl1Mu7L/15kPXc/Mp6GJyXz+n9CJSb3kKoJfv9SLD6lXZeyG6hS7ARjH9wz533I/JnhsOZPSxv968CjznglD8Pj95FP7V5JPOPLCfE4+5ZB8/pvo1QbR6yI2euWY/QpUYpgas1/mSsCsZqjIfquEz1aqHD4r9aQUNqGqxvBZT8JqeqVWS8qlQsoK4TP39FveAAwHry39hicCIqmpSL+5xu8r/kz8ni7H7yNHVOz++ub/wyvz/49yHLNaugaoEAAAAABJRU5ErkJggg==
// @match        *://*/*
// @exclude      *://yiyan.baidu.com/*
// @exclude      *://*.bing.com/search*
// @grant        unsafeWindow
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_addValueChangeListener
// @grant        GM_removeValueChangeListener
// @grant        GM_registerMenuCommand
// @grant        GM_unregisterMenuCommand
// @grant        GM_getTab
// @grant        GM_saveTab
// @grant        GM_getTabs
// @grant        GM_openInTab
// @grant        GM_setClipboard
// @run-at       document-start
// @license      GPL
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/HTML5E8A786E9A291E692ADE694BEE599A8E5A29EE5BCBAE8849AE69CAC.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/HTML5E8A786E9A291E692ADE694BEE599A8E5A29EE5BCBAE8849AE69CAC.meta.js
// ==/UserScript==
!function(e){e}();const originalMethods={Object:{defineProperty:Object.defineProperty,defineProperties:Object.defineProperties},setInterval:window.setInterval,setTimeout:window.setTimeout,HTMLElement:window.HTMLElement,customElements:window.customElements,customElementsMethods:{define:window.customElements.define,get:window.customElements.get}};function ready(e,t,n){const o=window,r=n||o.document.documentElement;if(!r)return!1;const i=o.MutationObserver||o.WebKitMutationObserver,a=r._MutationListeners||[];function s(e,t){const n=r.querySelectorAll(e);for(let e=0;e<n.length;e++){const o=n[e];o._MutationReadyList_=o._MutationReadyList_||[],o._MutationReadyList_.includes(t)||(o._MutationReadyList_.push(t),t.call(o,o))}}(Array.isArray(e)?e:[e]).forEach((e=>function(e,t){a.push({selector:e,fn:t}),r._MutationListeners&&r._MutationObserver||(r._MutationListeners=a,r._MutationObserver=new i((()=>{for(let e=0;e<r._MutationListeners.length;e++){const t=r._MutationListeners[e];s(t.selector,t.fn)}})),r._MutationObserver.observe(r,{childList:!0,subtree:!0})),s(e,t)}(e,t)))}function hackAttachShadow(){if(!window._hasHackAttachShadow_)try{window._shadowDomList_=[],window.Element.prototype._attachShadow=window.Element.prototype.attachShadow,window.Element.prototype.attachShadow=function(){const e=arguments,t=e[0]&&"closed"===e[0].mode;e[0]&&e[0].mode&&(e[0].mode="open");const n=this._attachShadow.apply(this,e);window._shadowDomList_.push(n),n._shadowHost=this;const o=new window.CustomEvent("addShadowRoot",{shadowRoot:n,detail:{shadowRoot:n,message:"addShadowRoot",time:new Date},bubbles:!0,cancelable:!0});return document.dispatchEvent(o),t&&Object.defineProperty(this,"shadowRoot",{get:()=>null}),n},window._hasHackAttachShadow_=!0}catch(e){console.error("hackAttachShadow error by h5player plug-in",e)}}const original={Object:{defineProperty:Object.defineProperty,defineProperties:Object.defineProperties},Proxy:Proxy,Map:Map,map:{clear:Map.prototype.clear,set:Map.prototype.set,has:Map.prototype.has,get:Map.prototype.get,delete:Map.prototype.delete},console:{log:console.log,info:console.info,error:console.error,warn:console.warn,table:console.table},ShadowRoot:ShadowRoot,HTMLMediaElement:HTMLMediaElement,CustomEvent:CustomEvent,JSON:{parse:JSON.parse,stringify:JSON.stringify},alert:alert,confirm:confirm,prompt:prompt},mediaCore=function(){let e=!1,t=!1,n={};const o={},r=[],i=[],a=new original.Map;function s(e){return e instanceof original.HTMLMediaElement}function l(e){if(!s(e))return!1;let t=original.map.get.call(a,e);if(t)return t;t={};const r={lock(e,n){const o=`__${e}_info__`;t[o]=t[o]||{},t[o].lock=!0,n=Number(n),!Number.isNaN(n)&&n>0&&(t[o].unLockTime=Date.now()+n)},unLock(e){const n=`__${e}_info__`;t[n]=t[n]||{},t[n].lock=!1,t[n].unLockTime=Date.now()-100},isLock(e){const n=t[`__${e}_info__`]||{};return n.unLockTime?Date.now()<n.unLockTime:n.lock||!1},get(t){if(n[t]&&n[t].get&&!o[t])return n[t].get.apply(e)},set(t,r){if(n[t]&&n[t].set&&!o[t]&&void 0!==r)return n[t].set.apply(e,[r])},apply(t){if(o[t]instanceof Function){const n=Array.from(arguments);return n.shift(),o[t].apply(e,n)}}};t={...t,...r};const i=Object.keys(r);return["playbackRate","volume","currentTime","play","pause"].forEach((e=>{i.forEach((n=>{if(o[e]instanceof Function){if("get"===n||"set"===n)return!0}else if("apply"===n)return!0;var i;t[`${n}${i=e,i.replace(/^\S/,(e=>e.toUpperCase()))}`]=function(){return r[n].apply(null,[e,...arguments])}}))})),original.map.set.call(a,e,t),t}function c(e){if(s(e)&&!r.includes(e)){r.push(e),l(e);try{i.forEach((t=>{t instanceof Function&&t(e)}))}catch(e){}}}function u(){if(!t){["play","pause","load","addEventListener"].forEach((e=>{!function(e,t){const n=e&&e.prototype[t];n&&(e.prototype[t]=new original.Proxy(n,{apply(e,n,o){if(c(n),["play","pause"].includes(t)){const e=l(n);if(e&&e.isLock(t))return}return e.apply(n,o)}}))}(HTMLMediaElement,e)}));["playbackRate","volume","currentTime","src"].forEach((e=>{!function(e,t){if(!e||!e.prototype||!n[t])return!1;original.Object.defineProperty.call(Object,e.prototype,t,{configurable:!0,enumerable:!0,get:function(){const e=n[t].get.apply(this,arguments),o=l(this);return o&&o.isLock(t)&&"playbackRate"===t?+!+[]:e},set:function(e){if("src"===t&&c(this),["playbackRate","volume","currentTime"].includes(t)){const e=l(this);if(e&&e.isLock(t))return}return n[t].set.apply(this,arguments)}})}(HTMLMediaElement,e)})),t=!0}return t}function d(e){return e instanceof Function&&!i.includes(e)?(i.push(e),t||u(),r):r}return{init:function(t){return!e&&(n=Object.getOwnPropertyDescriptors(HTMLMediaElement.prototype),Object.keys(HTMLMediaElement.prototype).forEach((e=>{try{HTMLMediaElement.prototype[e]instanceof Function&&(o[e]=HTMLMediaElement.prototype[e])}catch(e){}})),d(t=t instanceof Function?t:function(){}),e=!0,!0)},mediaPlus:function(e){return l(e)},mediaChecker:d,originDescriptors:n,originMethods:o,mediaElementList:r}}();function getType(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?e.constructor&&e.constructor.name&&e.constructor.name.toLowerCase()||/function\s(.+?)\(/.exec(e.constructor)[1].toLowerCase():typeof e}const isType=(e,t)=>getType(e)===t,isObj$1=e=>isType(e,"object");function clone(e){var t={};if("object"!=typeof e)return e;for(var n in"[object Array]"===Object.prototype.toString.call(e)&&(t=[]),"[object Null]"===Object.prototype.toString.call(e)&&(t=null),e)t[n]="object"==typeof e[n]?clone(e[n]):e[n];return t}function forIn(e,t){for(var n in t=t||function(){},e)Object.hasOwnProperty.call(e,n)&&t(n,e[n])}function mergeObj(e,t,n){function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}if(!o(e)||!o(t))return e;return function e(t,i){return forIn(i,(function(a){const s=t[a],l=i[a];void 0===s?t[a]=l:o(s)&&o(l)?t[a]=e(s,l):n&&r(s)&&r(l)?t[a]=s.concat(l):t[a]=l})),t}(e,t)}function getValByPath$1(e,t){const n=(t=t||"").split(".");let o=e;for(let e=0;e<n.length&&o;e++)o=o[n[e]];return o}function setValByPath(e,t,n){if(!e||!t||"string"!=typeof t)return!1;let o=e;const r=t.split(".");for(let e=0;e<r.length&&o;e++){if(e===r.length-1)return o[r[e]]=n,Number.isNaN(n)?Number.isNaN(o[r[e]]):o[r[e]]===n;o=o[r[e]]}return!1}const quickSort=function(e){if(e.length<=1)return e;for(var t=Math.floor(e.length/2),n=e.splice(t,1)[0],o=[],r=[],i=0;i<e.length;i++)e[i]<n?o.push(e[i]):r.push(e[i]);return quickSort(o).concat([n],quickSort(r))};function hideDom(e,t){setTimeout((function(){const t=document.querySelector(e);t&&(t.style.opacity=0)}),t||5e3)}function eachParentNode(e,t){let n=e.parentNode;for(;n;){const o=t(n,e);if(n=n.parentNode,o)break}}function loadCSSText(e,t,n){if(t&&document.getElementById(t))return!1;const o=document.createElement("style"),r=n||document.head||document.getElementsByTagName("head")[0];return o.appendChild(document.createTextNode(e)),r.appendChild(o),t&&o.setAttribute("id",t),o}function isEditableTarget(e){const t=e.getAttribute&&"true"===e.getAttribute("contenteditable"),n=/INPUT|TEXTAREA|SELECT|LABEL/.test(e.nodeName);return t||n}function isInShadow(e,t){for(;e;e=e.parentNode)if("[object ShadowRoot]"===e.toString())return!t||e;return!1}function isInViewPort(e){const t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:o,right:r,bottom:i,left:a}=e.getBoundingClientRect();return o>=0&&a>=0&&r<=t&&i<=n}function observeVisibility(e,t){const n=new IntersectionObserver(((t,n)=>{t.forEach((t=>{t.isIntersecting?e(t,n):e(null,n)}))}));return t&&n.observe(t),n}function isOutOfDocument(e){if(!e||null===e.offsetParent)return!0;if("hidden"===e.style.visibility||"none"===e.style.display)return!0;const{top:t,right:n,bottom:o,left:r,width:i,height:a}=e.getBoundingClientRect();return 0===t&&0===n&&0===o&&0===r&&0===i&&0===a}function isCoordinateInElement(e,t,n){if(!n||!n.getBoundingClientRect)return!1;const o=n.getBoundingClientRect();return e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom}function createTrustedHTML(e){if(window.trustedTypes&&window.trustedTypes.createPolicy){let t=window.trustedTypes.defaultPolicy||null;t||(t=window.trustedTypes.createPolicy("default",{createHTML:e=>e}));return t.createHTML(e)}return e}function parseHTML(e,t){if("string"!=typeof e)throw new Error("[parseHTML] Input must be a string");const n=createTrustedHTML(e),o=(new DOMParser).parseFromString(n,"text/html").body.childNodes,r=[];return t&&t.appendChild&&o.forEach((e=>{const n=e.cloneNode(!0);try{t.appendChild(n)}catch(e){console.error("[parseHTML] appendChild error",e,t,n)}r.push(n)})),r.length?r:o}function inlineStyleToObj(e){if("string"!=typeof e)return{};const t={};return e.split(";").forEach((e=>{const n=e.split(":");2===n.length&&(t[n[0].trim()]=n[1].trim())})),t}function objToInlineStyle(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";const t=[];return Object.keys(e).forEach((n=>{t.push(`${n}: ${e[n]}`)})),t.join("; ")}function fakeUA(e){const t=Object.getOwnPropertyDescriptor(Navigator.prototype,"userAgent");Object.defineProperty(Navigator.prototype,"userAgent",{...t,get:function(){return e}})}const userAgentMap={android:{chrome:"Mozilla/5.0 (Linux; Android 9; SM-G960F Build/PPR1.180610.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.157 Mobile Safari/537.36",firefox:"Mozilla/5.0 (Android 7.0; Mobile; rv:57.0) Gecko/57.0 Firefox/57.0"},iPhone:{safari:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/111.0.0.0 Mobile/15E148 Safari/604.1",chrome:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/74.0.3729.121 Mobile/15E148 Safari/605.1"},iPad:{safari:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1 Mobile/15E148 Safari/604.1",chrome:"Mozilla/5.0 (iPad; CPU OS 12_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/74.0.3729.155 Mobile/15E148 Safari/605.1"},mac:{safari:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1.1 Safari/605.1.15",chrome:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Firefox) Chrome/74.0.3729.157 Safari/537.36"}};function isInIframe(){return window!==window.top}function isInCrossOriginFrame(){let e=!0;try{(window.top.localStorage||window.top.location.href)&&(e=!1)}catch(t){e=!0}return e}function throttle(e,t=80){let n=null;return function(){if(n)return!1;n=setTimeout((()=>{n=null}),t),e.apply(this,arguments)}}function parseURL(e){var t=document.createElement("a");return t.href=e||window.location.href,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,origin:t.origin,search:t.search,query:t.search,file:(t.pathname.match(/\/([^/?#]+)$/i)||["",""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^/]+(.+)/)||["",""])[1],params:function(){for(var e={},n=[],o=t.search.replace(/^\?/,"").split("&"),r=0;r<o.length;r++){var i=o[r];""!==i&&i.indexOf("=")&&n.push(i)}for(var a=0;a<n.length;a++){var s=n[a],l=s.indexOf("="),c=s.substring(0,l),u=s.substring(l+1);c?e[c]=u:e[u]=null}return e}()}}function stringifyParams(e){var t=[];if("[object Object]"===!Object.prototype.toString.call(e))return"";for(var n in e)if(Object.hasOwnProperty.call(e,n)){var o=e[n],r=Object.prototype.toString.call(o);if(""===o||"[object Undefined]"===r)continue;null===o?t.push(n):"[object Array]"===r?t.push(n+"="+o.join(",")):(o=(JSON.stringify(o)||""+o).replace(/(^"|"$)/g,""),t.push(n+"="+o))}return t.join("&")}function stringifyToUrl(e){var t=stringifyParams(e.params)||"";t&&(t="?"+t);var n=e.hash?"#"+e.hash:"";return e.origin+e.path+t+n}const hasUseKey={keyCodeList:[13,16,17,18,27,32,37,38,39,40,49,50,51,52,67,68,69,70,73,74,75,77,78,79,80,81,82,83,84,85,87,88,89,90,97,98,99,100,220],keyList:["enter","shift","control","alt","escape"," ","arrowleft","arrowright","arrowup","arrowdown","1","2","3","4","c","d","e","f","i","j","k","n","o","p","q","r","s","t","u","w","x","y","z","\\","|"],keyMap:{enter:13,shift:16,ctrl:17,alt:18,esc:27,space:32,"←":37,"↑":38,"→":39,"↓":40,1:49,2:50,3:51,4:52,c:67,d:68,e:69,f:70,i:73,j:74,k:75,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,w:87,x:88,y:89,z:90,pad1:97,pad2:98,pad3:99,pad4:100,"\\":220}};function isRegisterKey(e){const t=e.keyCode,n=e.key.toLowerCase();return hasUseKey.keyCodeList.includes(t)||hasUseKey.keyList.includes(n)}async function getPageWindow(){return new Promise((function(e,t){if(window._pageWindow)return e(window._pageWindow);try{const t=getPageWindowSync();if(t&&t.document&&t.XMLHttpRequest)return window._pageWindow=t,e(t),t}catch(e){}const n=["load","mousemove","scroll","get-page-window-event"];function o(t){window._pageWindow=this,n.forEach((e=>{window.removeEventListener(e,o,!0)})),e(window._pageWindow)}n.forEach((e=>{window.addEventListener(e,o,!0)})),window.dispatchEvent(new window.Event("get-page-window-event"))}))}function getPageWindowSync(e){if(window.unsafeWindow)return window.unsafeWindow;if(document._win_)return document._win_;try{return(e=e||window.__rawFunction__||Function.prototype.constructor)('return (function(){}.constructor("var getPageWindowSync=1; return this")());')()}catch(e){console.error("getPageWindowSync error",e);const t=document.head||document.querySelector("head"),n=document.createElement("script");return n.appendChild(document.createTextNode("document._win_ = window")),t.appendChild(n),document._win_}}function openInTab(e,t,n){if(n){const t=parseURL(e);t.params.referer||(t.params.referer=encodeURIComponent(window.location.href),e=stringifyToUrl(t))}if(window.GM_openInTab)window.GM_openInTab(e,t||{active:!0,insert:!0,setParent:!0});else{const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noopener noreferrer",t.style.display="inline-block",t.style.width="1px",t.style.height="1px",t.style.opcity=0,document.body.appendChild(t),t.click(),setTimeout((()=>{document.body.removeChild(t)}),300)}}function numUp(e){return"number"==typeof e&&e<0&&(e=Math.abs(e)),e}function numDown(e){return"number"==typeof e&&e>0&&(e=-e),e}function isMediaElement(e){return e&&(e instanceof HTMLMediaElement||e.HTMLMediaElement||e.HTMLVideoElement||e.HTMLAudioElement)}function isVideoElement(e){return e&&(e instanceof HTMLVideoElement||e.HTMLVideoElement)}function isAudioElement(e){return e&&(e instanceof HTMLAudioElement||e.HTMLAudioElement)}function isLocalStorageUsable(){return window.localStorage&&window.localStorage.getItem instanceof Function&&window.localStorage.setItem instanceof Function}function isGlobalStorageUsable(){return window.GM_setValue&&window.GM_getValue&&window.GM_deleteValue&&window.GM_listValues instanceof Function}getPageWindow();const rawLocalStorage=function(){const e={};return["getItem","setItem","removeItem","clear","key"].forEach((t=>{isLocalStorageUsable()?(e[`_${t}_`]=localStorage[t],e[t]=function(){return e[`_${t}_`].apply(localStorage,arguments)}):e[t]=function(){console.error("localStorage unavailable")}})),e}();class ConfigManager{constructor(e){this.opts=e}isLocalStorageUsable=isLocalStorageUsable;isGlobalStorageUsable=isGlobalStorageUsable;getConfKeyName(e=""){return this.opts.prefix+e.replace(/\./g,"_")}getConfPath(e=""){return e.replace(this.opts.prefix,"").replace(/_/g,".")}getConfPathList(e){const t=[];return function e(n,o=""){Object.keys(n).forEach((r=>{const i=o?`${o}.${r}`:r;"[object Object]"===Object.prototype.toString.call(n[r])?e(n[r],i):t.push(i)}))}(e),t}get(e){if("string"!=typeof e)return null;const t=this.getLocalStorage(e);if(null!=t)return t;const n=this.getGlobalStorage(e);return null!=n?n:this.getMemoryStorage(e)}set(e,t){if("string"!=typeof e||null==t)return!1;setValByPath(this.opts.config,e,t);let n=!1;return n=this.setLocalStorage(e,t),n||(n=this.setGlobalStorage(e,t)),n}list(){return{localConf:this.listLocalStorage(),globalConf:this.listGlobalStorage(),defConfig:this.opts.config}}clear(){this.clearLocalStorage(),this.clearGlobalStorage()}getMemoryStorage(e){if("string"!=typeof e)return null;const t=getValByPath$1(this.getConfObj(),e);return null!=t?t:null}getLocalStorage(e){if("string"!=typeof e)return null;const t=this.getConfKeyName(e);if(isLocalStorageUsable()){let n=rawLocalStorage.getItem(t);if(null!=n){try{n=JSON.parse(n)}catch(e){console.error("configManager parse localStorage error:",t,n)}return n}return this.getMemoryStorage(e)}return null}getGlobalStorage(e){if("string"!=typeof e)return null;const t=this.getConfKeyName(e);if(isGlobalStorageUsable()){const n=window.GM_getValue(t);return null!=n?n:this.getMemoryStorage(e)}return this.getLocalStorage(e)}setMemoryStorage(e,t){return"string"==typeof e&&null!=t&&(setValByPath(this.opts.config,e,t),!0)}setLocalStorage(e,t){if("string"!=typeof e||null==t)return!1;setValByPath(this.opts.config,e,t);const n=this.getConfKeyName(e);if(!isLocalStorageUsable())return!1;try{return("[object Object]"===Object.prototype.toString.call(t)||Array.isArray(t))&&(t=JSON.stringify(t)),rawLocalStorage.setItem(n,t),!0}catch(e){return console.error("configManager set localStorage error:",n,t,e),!1}}setGlobalStorage(e,t){if("string"!=typeof e||null==t)return!1;setValByPath(this.opts.config,e,t);const n=this.getConfKeyName(e);if(!isGlobalStorageUsable())return this.setLocalStorage(e,t);try{return window.GM_setValue(n,t),!0}catch(e){return console.error("configManager set globalStorage error:",n,t,e),!1}}listLocalStorage(){if(isLocalStorageUsable()){const e={};return Object.keys(localStorage).forEach((t=>{if(t.startsWith(this.opts.prefix)){const n=this.getConfPath(t);e[n]=this.getLocalStorage(n)}})),e}return{}}listGlobalStorage(){if(isGlobalStorageUsable()){const e={};return window.GM_listValues().forEach((t=>{if(t.startsWith(this.opts.prefix)){const n=this.getConfPath(t);e[n]=this.getGlobalStorage(n)}})),e}return{}}getConfObj(){const e=this.list();return Object.keys(e.globalConf).forEach((t=>{setValByPath(this.opts.config,t,e.globalConf[t])})),Object.keys(e.localConf).forEach((t=>{setValByPath(this.opts.config,t,e.localConf[t])})),this.opts.config}setLocalStorageByObj(e){const t=this.getConfObj();this.getConfPathList(e).forEach((n=>{const o=getValByPath$1(t,n),r=getValByPath$1(e,n);o!==r&&void 0!==o&&this.setLocalStorage(n,r)}))}setGlobalStorageByObj(e){const t=this.getConfObj();this.getConfPathList(e).forEach((n=>{const o=getValByPath$1(t,n),r=getValByPath$1(e,n);o!==r&&void 0!==o&&this.setGlobalStorage(n,r)}))}clearLocalStorage(){isLocalStorageUsable()&&Object.keys(localStorage).forEach((e=>{e.startsWith(this.opts.prefix)&&rawLocalStorage.removeItem(e)}))}clearGlobalStorage(){if(isGlobalStorageUsable()){window.GM_listValues().forEach((e=>{e.startsWith(this.opts.prefix)&&window.GM_deleteValue(e)}))}}mergeDefConf(e){return mergeObj(this.opts.config,e)}}const configManager=new ConfigManager({prefix:"_h5player_",config:{enable:!0,media:{autoPlay:!1,playbackRate:1,volume:1,lastPlaybackRate:1.5,allowRestorePlayProgress:{},progress:{}},enableHotkeys:!0,hotkeys:[{desc:"网页全屏",key:"shift+enter",command:"setWebFullScreen",disabled:!1},{desc:"全屏",key:"enter",command:"setFullScreen"},{desc:"切换画中画模式",key:"shift+p",command:"togglePictureInPicture"},{desc:"视频截图",key:"shift+s",command:"capture"},{desc:"启用或禁止自动恢复播放进度功能",key:"shift+r",command:"switchRestorePlayProgressStatus"},{desc:"垂直镜像翻转",key:"shift+m",command:"setMirror",args:[!0]},{desc:"水平镜像翻转",key:"m",command:"setMirror"},{desc:"下载音视频文件（实验性功能）",key:"shift+d",command:"mediaDownload"},{desc:"缩小视频画面 -0.05",key:"shift+x",command:"setScaleDown",args:-.05},{desc:"放大视频画面 +0.05",key:"shift+c",command:"setScaleUp",args:.05},{desc:"恢复视频画面",key:"shift+z",command:"resetTransform"},{desc:"画面向右移动10px",key:"shift+arrowright",command:"setTranslateRight",args:10},{desc:"画面向左移动10px",key:"shift+arrowleft",command:"setTranslateLeft",args:-10},{desc:"画面向上移动10px",key:"shift+arrowup",command:"setTranslateUp",args:10},{desc:"画面向下移动10px",key:"shift+arrowdown",command:"setTranslateDown",args:-10},{desc:"前进5秒",key:"arrowright",command:"setCurrentTimeUp",args:5},{desc:"后退5秒",key:"arrowleft",command:"setCurrentTimeDown",args:-5},{desc:"前进30秒",key:"ctrl+arrowright",command:"setCurrentTimeUp",args:[30]},{desc:"后退30秒",key:"ctrl+arrowleft",command:"setCurrentTimeDown",args:[-30]},{desc:"音量升高 5%",key:"arrowup",command:"setVolumeUp",args:[.05]},{desc:"音量降低 5%",key:"arrowdown",command:"setVolumeDown",args:[-.05]},{desc:"音量升高 20%",key:"ctrl+arrowup",command:"setVolumeUp",args:[.2]},{desc:"音量降低 20%",key:"ctrl+arrowdown",command:"setVolumeDown",args:[-.2]},{desc:"切换暂停/播放",key:"space",command:"switchPlayStatus"},{desc:"减速播放",key:"x",command:"setPlaybackRateDown",args:-.1},{desc:"加速播放",key:"c",command:"setPlaybackRateUp",args:.1},{desc:"正常速度播放",key:"z",command:"resetPlaybackRate"},{desc:"设置1x的播放速度",key:"Digit1",command:"setPlaybackRatePlus",args:1},{desc:"设置1x的播放速度",key:"Numpad1",command:"setPlaybackRatePlus",args:1},{desc:"设置2x的播放速度",key:"Digit2",command:"setPlaybackRatePlus",args:2},{desc:"设置2x的播放速度",key:"Numpad2",command:"setPlaybackRatePlus",args:2},{desc:"设置3x的播放速度",key:"Digit3",command:"setPlaybackRatePlus",args:3},{desc:"设置3x的播放速度",key:"Numpad3",command:"setPlaybackRatePlus",args:3},{desc:"设置4x的播放速度",key:"Digit4",command:"setPlaybackRatePlus",args:4},{desc:"设置4x的播放速度",key:"Numpad4",command:"setPlaybackRatePlus",args:4},{desc:"下一帧",key:"F",command:"freezeFrame",args:1},{desc:"上一帧",key:"D",command:"freezeFrame",args:-1},{desc:"增加亮度",key:"E",command:"setBrightnessUp"},{desc:"减少亮度",key:"W",command:"setBrightnessDown"},{desc:"增加对比度",key:"T",command:"setContrastUp"},{desc:"减少对比度",key:"R",command:"setContrastDown"},{desc:"增加饱和度",key:"U",command:"setSaturationUp"},{desc:"减少饱和度",key:"Y",command:"setSaturationDown"},{desc:"增加色相",key:"O",command:"setHueUp"},{desc:"减少色相",key:"I",command:"setHueDown"},{desc:"模糊增加 1 px",key:"K",command:"setBlurUp"},{desc:"模糊减少 1 px",key:"J",command:"setBlurDown"},{desc:"图像复位",key:"Q",command:"resetFilterAndTransform"},{desc:"画面旋转 90 度",key:"S",command:"setRotate"},{desc:"播放下一集",key:"N",command:"setNextVideo"},{desc:"插入debugger断点",key:"ctrl+shift+alt+d",command:"debuggerNow"},{desc:"执行JS脚本",key:"ctrl+j ctrl+s",command:()=>{alert("自定义JS脚本")},when:""}],mouse:{enable:!1,longPressTime:600},ui:{enable:!0,alwaysShow:!1,mod:{recommend:{enable:!1}}},download:{enable:!0},enhance:{blockSetPlaybackRate:!0,blockSetCurrentTime:!1,blockSetVolume:!1,allowExperimentFeatures:!1,allowExternalCustomConfiguration:!1,allowAcousticGain:!1,allowCrossOriginControl:!0,unfoldMenu:!1},language:"auto",debug:!1,blacklist:{urls:["https://www.bilibili.com/"],domains:["challenges.cloudflare.com"]}}});async function initUiConfigManager(){const e=location.href.indexOf("h5player.anzz.top/tools/json-editor")>-1||location.href.indexOf("ankvps.gitee.io/h5player/tools/json-editor")>-1,t=location.href.indexOf("saveHandlerName=saveH5PlayerConfig")>-1;if(!e||!t)return;let n=0;const o=await getPageWindow();o&&function e(t){t.JSONEditor?function(e){const t=JSON.parse(JSON.stringify(configManager.getConfObj()));delete t.recommendList,Array.isArray(t.hotkeys)&&t.hotkeys.forEach((e=>{void 0===e.disabled&&(e.disabled=!1)})),e.jsonEditor.set(t),e.jsonEditor.expandAll&&e.jsonEditor.expandAll(),e.saveH5PlayerConfig=function(e){try{const t=configManager.getConfObj(),n=e.get();n.recommendList=t.recommendList||[],configManager.setGlobalStorageByObj(n),alert("配置已更新")}catch(e){alert(`配置格式异常，保存失败：${e}`)}}}(t):n<30&&setTimeout((()=>{n++,e(t)}),200)}(o)}initUiConfigManager();let TCC$1=class{constructor(e,t){this.conf=e||{"demo.demo":{fullScreen:".fullscreen-btn",exitFullScreen:".exit-fullscreen-btn",webFullScreen:function(){},exitWebFullScreen:".exit-fullscreen-btn",autoPlay:".player-start-btn",pause:".player-pause",play:".player-play",switchPlayStatus:".player-play",playbackRate:function(){},currentTime:function(){},addCurrentTime:".add-currenttime",subtractCurrentTime:".subtract-currenttime",shortcuts:{register:["ctrl+shift+alt+c","ctrl+shift+c","ctrl+alt+c","ctrl+c","c"],callback:function(e,t,n){const{event:o,player:r}=n;console.log(o,r)}},include:/^.*/,exclude:/\t/}},this.doTaskFunc=t instanceof Function?t:function(){}}setTaskConf(e){this.conf=e}getDomain(){const e=window.location.host;let t=e;const n=e.split(".");return n.length>2&&(n.shift(),t=n.join(".")),t}formatTCC(e){const t=this,n=Object.keys(t.conf),o=t.getDomain(),r=window.location.host;function i(e){const t={include:/^.*/,exclude:/\t/};return e.include=e.include||t.include,e.exclude=e.exclude||t.exclude,e}const a={};return n.forEach((function(n){let s=t[n];isObj$1(s)&&(e?(s=i(s),a[n]=s):n!==r&&n!==o||(s=i(s),a[n]=s))})),a}isMatch(e){const t=window.location.href;let n=!1;return e.include||e.exclude?(e.include&&e.include.test(t)&&(n=!0),e.exclude&&e.exclude.test(t)&&(n=!1)):n=!0,n}getTaskConfig(){const e=this;e._hasFormatTCC_||(e.formatTCC(),e._hasFormatTCC_=!0);const t=e.getDomain(),n=e.conf[window.location.host]||e.conf[t];return n&&e.isMatch(n)?n:{}}doTask(e,t){const n=this;let o=!1;if(!e)return o;const r=isObj$1(e)?e:n.getTaskConfig();if(!isObj$1(r)||!r[e])return o;return r[e]&&(o=n.doTaskFunc(e,r,t)),o}};class Debug{constructor(e={}){this.config={msg:"[Debug Msg]",trace:!1,traceGroup:!0,printTime:!1,color:"#000000",backgroundColor:"transparent",style:"",...e,colorMap:{info:"#2274A5",log:"#95B46A",warn:"#F5A623",error:"#D33F49",...e.colorMap||{}},backgroundColorMap:{info:"",log:"",warn:"",error:"",...e.backgroundColorMap||{}},styleMap:{info:"",log:"",warn:"",error:"",...e.styleMap||{}}};["log","error","info","warn"].forEach((e=>{this[e]=this.createDebugMethod(e)}))}create(e){return new Debug(e)}createDebugMethod(e){e=e||"info";const{msg:t,color:n,colorMap:o,backgroundColor:r,backgroundColorMap:i,style:a,styleMap:s,printTime:l,trace:c,traceGroup:u}=this.config,d=o[e]||n,p=i[e]||r,h=s[e]||a;return function(){if(!window._debugMode_)return!1;const n=Array.from(arguments),o=n[0];n.unshift(`color: ${d}; background-color: ${p}; ${h}`);let r="";if(l){const e=new Date;r=`[${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}] `}if(n.unshift(`%c ${r}${t} `),c)if(u){const i="string"==typeof o?o:Object.prototype.toString.call(o);console.groupCollapsed(`%c ${r}${t} ${i}`,`color: ${d}; background-color: ${p}; ${h}`),window.console[e].apply(console,n),console.trace(),console.groupEnd()}else window.console[e].apply(console,n),console.trace();else window.console[e].apply(window.console,n)}}isDebugMode(){return Boolean(window._debugMode_)}}var Debug$1=new Debug,debug=Debug$1.create({msg:"[H5player Msg]",trace:!1,traceGroup:!0,printTime:!1});const $q=function(e){return document.querySelector(e)},taskConf={"demo.demo":{init:function(e,t){},fullScreen:".fullscreen-btn",exitFullScreen:".exit-fullscreen-btn",webFullScreen:function(){},exitWebFullScreen:".exit-fullscreen-btn",autoPlay:".player-start-btn",pause:".player-pause",play:".player-play",afterPlay:function(e,t){},afterPause:function(e,t){},switchPlayStatus:".player-play",playbackRate:function(){},currentTime:function(){},addCurrentTime:".add-currenttime",subtractCurrentTime:".subtract-currenttime",shortcuts:{register:["ctrl+shift+alt+c","ctrl+shift+c","ctrl+alt+c","ctrl+c","c"],callback:function(e,t,n){const{event:o,player:r}=n;console.log(o,r)}},blockSetPlaybackRate:!0,blockSetCurrentTime:!0,blockSetVolume:!0,include:/^.*/,exclude:/\t/},"youtube.com":{init:function(e,t){if(e.hasBindSkipAdEvents)return;const n=(new Date).getTime();let o=0;const r=e=>!((new Date).getTime()-n<3e3)&&(!document.hidden&&(e.click(),o++,void debug.log("youtube.com ad skip count",o)));ready(".ytp-ad-skip-button",(function(e){r(e)})),ready(".ytp-ad-skip-button-modern",(function(e){r(e)})),setInterval((function(){const e=document.querySelector(".ytp-ad-skip-button"),t=document.querySelector(".ytp-ad-skip-button-modern");e&&r(e),t&&r(t)}),1e3),e.hasBindSkipAdEvents=!0},webFullScreen:"button.ytp-size-button",fullScreen:"button.ytp-fullscreen-button",next:".ytp-next-button",afterPlay:function(e,t){setTimeout((()=>{e.setCurrentTimeUp(.01,!0)}),0);const n=e.player(),o=n.closest(".html5-video-player");if(!o)return;if(o.classList.add("ytp-autohide","playing-mode"),clearTimeout(o.autohideTimer),o.autohideTimer=setTimeout((()=>{o.classList.add("ytp-autohide","playing-mode")}),1e3),!o.hasBindCustomEvents){const t=e=>{o.classList.remove("ytp-autohide","ytp-hide-info-bar"),clearTimeout(o.mousemoveTimer),o.mousemoveTimer=setTimeout((()=>{n.paused||o.classList.add("ytp-autohide","ytp-hide-info-bar")}),2e3)},r=n=>{e.switchPlayStatus(),t()};n.addEventListener("mousemove",t),n.addEventListener("click",r),o.hasBindCustomEvents=!0}const r=o.querySelector(".ytp-spinner");if(r){const e=()=>{r&&(r.style.visibility="visible")};(()=>{r&&(r.style.visibility="hidden")})(),clearTimeout(o.spinnerTimer),o.spinnerTimer=setTimeout((()=>{r.style.display="none",e()}),1e3)}},afterPause:function(e,t){const n=e.player().closest(".html5-video-player");n&&(n.classList.remove("ytp-autohide","playing-mode"),n.classList.add("paused-mode"),clearTimeout(n.autohideTimer))},shortcuts:{register:["escape"],callback:function(e,t,n){const{event:o}=n;27===o.keyCode&&"none"!==document.querySelector(".ytp-upnext").style.display&&document.querySelector(".ytp-upnext-cancel-button").click()}}},"netflix.com":{fullScreen:"button.button-nfplayerFullscreen",addCurrentTime:"button.button-nfplayerFastForward",subtractCurrentTime:"button.button-nfplayerBackTen",playbackRate:!0,shortcuts:{register:["f"],callback:function(e,t,n){return!0}}},"bilibili.com":{fullScreen:function(){const e=$q(".bpx-player-ctrl-full")||$q(".squirtle-video-fullscreen")||$q(".bilibili-player-video-btn-fullscreen");if(e)return e.click(),!0},webFullScreen:function(){const e=$q(".bilibili-player-video-web-fullscreen"),t=$q(".bpx-player-ctrl-web-enter")||$q(".squirtle-pagefullscreen-inactive"),n=$q(".bpx-player-ctrl-web-leave")||$q(".squirtle-pagefullscreen-active");if(e||t&&n){return(e||("none"===getComputedStyle(n).display?t:n)).click(),setTimeout((function(){const e=$q(".bpx-player-dm-input")||$q(".bilibili-player-video-danmaku-input");e&&e.blur()}),100),!0}},autoPlay:[".bpx-player-ctrl-play",".squirtle-video-start",".bilibili-player-video-btn-start"],switchPlayStatus:[".bpx-player-ctrl-play",".squirtle-video-start",".bilibili-player-video-btn-start"],next:[".bpx-player-ctrl-next",".squirtle-video-next",".bilibili-player-video-btn-next",'.bpx-player-ctrl-btn[aria-label="下一个"]'],init:function(e,t){},shortcuts:{register:["escape"],callback:function(e,t,n){const{event:o}=n;if(27===o.keyCode){const e=$q(".bilibili-player-video-web-fullscreen");if(e&&e.classList.contains("closed"))e.click();else{const e=$q(".bpx-player-ctrl-web-leave")||$q(".squirtle-pagefullscreen-active");"none"!==getComputedStyle(e).display&&e.click()}}}}},"t.bilibili.com":{fullScreen:'button[name="fullscreen-button"]'},"live.bilibili.com":{init:function(){JSON._stringifySource_||(JSON._stringifySource_=JSON.stringify,JSON.stringify=function(e){try{return JSON._stringifySource_.apply(this,arguments)}catch(t){console.error("JSON.stringify 解释出错：",t,e)}})},fullScreen:".bilibili-live-player-video-controller-fullscreen-btn button",webFullScreen:".bilibili-live-player-video-controller-web-fullscreen-btn button",switchPlayStatus:".bilibili-live-player-video-controller-start-btn button"},"acfun.cn":{fullScreen:'[data-bind-key="screenTip"]',webFullScreen:'[data-bind-key="webTip"]',switchPlayStatus:function(e){const t=e.player(),n=t.paused;setTimeout((function(){n===t.paused&&(t.paused?t.play():t.pause())}),200)}},"ixigua.com":{fullScreen:["xg-fullscreen.xgplayer-fullscreen",'.xgplayer-control-item__entry[aria-label="全屏"]','.xgplayer-control-item__entry[aria-label="退出全屏"]'],webFullScreen:["xg-cssfullscreen.xgplayer-cssfullscreen",'.xgplayer-control-item__entry[aria-label="剧场模式"]','.xgplayer-control-item__entry[aria-label="退出剧场模式"]']},"tv.sohu.com":{fullScreen:'button[data-title="网页全屏"]',webFullScreen:'button[data-title="全屏"]'},"iqiyi.com":{fullScreen:".iqp-btn-fullscreen",webFullScreen:".iqp-btn-webscreen",next:".iqp-btn-next",init:function(e,t){hideDom(".iqp-logo-box"),window.GM_addStyle('\n          div[templatetype="common_pause"]{ display:none }\n          .iqp-logo-box{ display:none !important }\n      ')}},"youku.com":{fullScreen:".control-fullscreen-icon",next:".control-next-video",init:function(e,t){hideDom(".youku-layer-logo")}},"ted.com":{fullScreen:"button.Fullscreen"},"qq.com":{pause:".container_inner .txp-shadow-mod",play:".container_inner .txp-shadow-mod",shortcuts:{register:["c","x","z","1","2","3","4"],callback:function(e,t,n){const{event:o}=n,r=o.key.toLowerCase(),i="customShortcuts_"+r;if(!e[i])return e[i]={time:Date.now(),playbackRate:e.playbackRate},!1;if(Date.now()-e[i].time<200)return!1;if(e[i]===e.playbackRate||!0===e[i]){if(window.sessionStorage.playbackRate&&/(c|x|z|1|2|3|4)/.test(r)){const t=Number(window.sessionStorage.playbackRate),n=t-.1>=0?t-.1:.1,o=t+.1<=4?t+.1:4;let i=t;switch(r){case"z":i=1;break;case"c":i=o;break;case"x":i=n;break;default:i=Number(r)}return window.sessionStorage.playbackRate=i,e.setCurrentTimeUp(.01,!0),e.setPlaybackRate(i,!0),!0}e[i]=!0}else e[i]=!1}},fullScreen:'txpdiv[data-report="window-fullscreen"]',webFullScreen:'txpdiv[data-report="browser-fullscreen"]',next:'txpdiv[data-report="play-next"]',init:function(e,t){hideDom(".txp-watermark"),hideDom(".txp-watermark-action")},include:/(v.qq|sports.qq)/},"pan.baidu.com":{fullScreen:function(e,t){e.player().parentNode.querySelector(".vjs-fullscreen-control").click()}},"facebook.com":{fullScreen:function(e,t){const n=e.player().parentNode.querySelectorAll("button");if(n&&n.length>3)return n[n.length-2].click(),!0},webFullScreen:function(e,t){const n=e.player().parentNode.querySelectorAll("button");if(n&&n.length>3)return n[n.length-2].click(),!0},shortcuts:{register:["escape"],callback:function(e,t,n){eachParentNode(e.player(),(function(e){if("true"===e.getAttribute("data-fullscreen-container")){const t=e.parentNode.querySelector("div>a>i>u");return t&&t.parentNode.parentNode.click(),!0}}))}}},"douyu.com":{fullScreen:function(e,t){const n=e.player(),o=n._fullScreen_.getContainer();return n._isFullScreen_?o.querySelector('div[title="退出窗口全屏"]').click():o.querySelector('div[title="窗口全屏"]').click(),n._isFullScreen_=!n._isFullScreen_,!0},webFullScreen:function(e,t){const n=e.player(),o=n._fullScreen_.getContainer();return n._isWebFullScreen_?o.querySelector('div[title="退出网页全屏"]').click():o.querySelector('div[title="网页全屏"]').click(),n._isWebFullScreen_=!n._isWebFullScreen_,!0}},"open.163.com":{init:function(e,t){e.player().setAttribute("crossOrigin","anonymous")}},"agefans.tv":{init:function(e,t){e.player().setAttribute("crossOrigin","anonymous")}},"chaoxing.com":{fullScreen:".vjs-fullscreen-control"},"yixi.tv":{init:function(e,t){e.player().setAttribute("crossOrigin","anonymous")}},"douyin.com":{fullScreen:".xgplayer-fullscreen",webFullScreen:".xgplayer-page-full-screen",next:[".xgplayer-playswitch-next"],init:function(e,t){e.player().setAttribute("crossOrigin","anonymous");const n=e.player(),o=n.closest('div[data-e2e="feed-item"]'),r=()=>{if(o&&o.querySelector(".video-info-detail")){const e=o.querySelector(".video-info-detail"),t=e.querySelector(".account-name").innerText.replace(/^@*/,""),i=`${e.querySelector(".title").innerText.trim()} - ${t}`.replace(/[\\/:*?"<>|]/g,"-");o.setAttribute("data-title",i),n.setAttribute("data-title",i),document.title=i,o.removeEventListener("mouseover",r)}};o&&o.addEventListener("mouseover",r),setTimeout(r,1200)}},"live.douyin.com":{fullScreen:".xgplayer-fullscreen",webFullScreen:".xgplayer-page-full-screen",next:[".xgplayer-playswitch-next"],init:function(e,t){e.player().setAttribute("crossOrigin","anonymous")}},"zhihu.com":{fullScreen:['button[aria-label="全屏"]','button[aria-label="退出全屏"]'],play:function(e,t,n){const o=e.player();if(o&&o.parentNode&&o.parentNode.parentNode){const e=o.parentNode.parentNode.querySelector("div~div:nth-child(3)");if(e){const t=e.querySelector("div");t&&""===t.innerText&&t.click()}}},init:function(e,t){e.player().setAttribute("crossOrigin","anonymous")}},"weibo.com":{fullScreen:["button.wbpv-fullscreen-control"],webFullScreen:["div.wbpv-open-layer-button"]},"twitter.com":{init:function(e,t){const n=e.player(),o=n.closest('article[data-testid="tweet"]'),r=()=>{if(o&&!o.getAttribute("data-title")&&o.querySelector('div[data-testid="tweetText"]')){const e=`${o.querySelector('div[data-testid="tweetText"]').innerText.trim()}`.replace(/[\\/:*?"<>|]/g,"-");o.setAttribute("data-title",e),n.setAttribute("data-title",e),o.removeEventListener("mouseover",r)}};o&&o.addEventListener("mouseover",r),setTimeout(r,600)}}};function h5PlayerTccInit(e){return new TCC$1(taskConf,(function(t,n,o){try{const r=n[t],i=e.getPlayerWrapDom();if(!r)return;if("shortcuts"===t){if(isObj$1(r)&&r.callback instanceof Function)return r.callback(e,n,o)}else if(r instanceof Function)try{return r(e,n,o)}catch(e){return debug.error("任务配置中心的自定义函数执行失败：",t,n,o,e),!1}else{if("boolean"==typeof r)return r;{const e=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(i&&i.querySelector(n))return i.querySelector(n).click(),!0;if(document.querySelector(n))return document.querySelector(n).click(),!0}}}}catch(e){return debug.error("任务配置中心的自定义任务执行失败：",t,n,o,e),!1}}))}function mergeTaskConf(e){return mergeObj(taskConf,e)}const fakeConfig={"open.163.com":userAgentMap.iPhone.chrome,"m.open.163.com":userAgentMap.iPhone.chrome,"pan.baidu.com":userAgentMap.iPhone.safari};function setFakeUA(e){const t=window.location.host;(e=e||fakeConfig[t])&&fakeUA(e)}hackAttachShadow();class FullScreen{constructor(e,t){this.dom=e,this.shadowRoot=null,this.fullStatus=!1,this.pageMode=t||!1;const n="\n      ._webfullscreen_box_size_ {\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 100% !important;\n\t\t\t}\n      ._webfullscreen_ {\n        display: block !important;\n\t\t\t\tposition: fixed !important;\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 100% !important;\n\t\t\t\ttop: 0 !important;\n\t\t\t\tleft: 0 !important;\n\t\t\t\tbackground: #000 !important;\n\t\t\t\tz-index: 999999 !important;\n\t\t\t}\n\t\t\t._webfullscreen_zindex_ {\n\t\t\t\tz-index: 999999 !important;\n\t\t\t}\n\t\t";!window._hasInitFullPageStyle_&&window.GM_addStyle&&(window.GM_addStyle(n),window._hasInitFullPageStyle_=!0);const o=isInShadow(e,!0);o&&(this.shadowRoot=o,loadCSSText(n,"fullPageStyle",o));const r=this;window.addEventListener("keyup",(e=>{"escape"===e.key.toLowerCase()&&(r.isFull()?r.exit():r.isFullScreen()&&r.exitFullScreen())}),!0),this.getContainer()}eachParentNode(e,t){let n=e.parentNode;for(;n&&n.classList;){const o=t(n,e);if(n=n.parentNode,o)break}}getContainer(){const e=this;if(e._container_)return e._container_;const t=e.dom,n=t.getBoundingClientRect();let o=t;return e.eachParentNode(t,(function(e){if(!e||!e.getBoundingClientRect||e.getAttribute("data-fullscreen-container"))return o=e,!0;const t=e.getBoundingClientRect();if(!(t.width<=n.width&&t.height<=n.height))return!0;o=e})),o.setAttribute("data-fullscreen-container","true"),e._container_=o,o}isFull(){return this.dom.classList.contains("_webfullscreen_")||this.fullStatus}isFullScreen(){const e=document;return!!(e.fullscreen||e.webkitIsFullScreen||e.mozFullScreen||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)}enterFullScreen(){const e=this.getContainer(),t=e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;t&&t.call(e)}enter(){const e=this;if(e.isFull())return;const t=e.getContainer();let n=!1;function o(o){e.eachParentNode(o,(function(e){e.classList.add("_webfullscreen_"),(t===e||n)&&(n=!0,e.classList.add("_webfullscreen_zindex_"))}))}if(e.dom===t&&(n=!0),o(e.dom),e.dom.parentNode){const t=e.dom.getBoundingClientRect();if(e.dom.parentNode.getBoundingClientRect().width-t.width>=5&&e.dom.classList.add("_webfullscreen_"),e.shadowRoot&&e.shadowRoot._shadowHost){const n=e.shadowRoot._shadowHost;n.getBoundingClientRect().width<=t.width&&(n.classList.add("_webfullscreen_"),o(n))}}!e.pageMode&&e.enterFullScreen(),this.fullStatus=!0}exitFullScreen(){const e=document,t=e.exitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen;t&&t.call(e)}exit(){const e=this;function t(t){e.eachParentNode(t,(function(e){e.classList.remove("_webfullscreen_"),e.classList.remove("_webfullscreen_zindex_")}))}if(t(e.dom),e.dom.classList.remove("_webfullscreen_"),e.shadowRoot&&e.shadowRoot._shadowHost){const n=e.shadowRoot._shadowHost;n.classList.remove("_webfullscreen_"),t(n)}(!e.pageMode||e.isFullScreen())&&e.exitFullScreen(),this.fullStatus=!1}toggle(){this.isFull()?this.exit():this.enter()}}async function setClipboard(e){navigator.clipboard?navigator.clipboard.write([new ClipboardItem({[e.type]:e})]).then((()=>{console.info("[setClipboard] clipboard suc",e.type)})).catch((t=>{console.error("[setClipboard] clipboard err",e.type,t)})):console.error("当前网站不支持将数据写入到剪贴板里，见：\n https://developer.mozilla.org/en-US/docs/Web/API/Clipboard")}var videoCapturer={capture(e,t,n){if(!e)return!1;const o=this,r=`${Math.floor(e.currentTime/60)}'${(e.currentTime%60).toFixed(3)}''`,i=n||`${document.title}_${r}`;e.setAttribute("crossorigin","anonymous");const a=document.createElement("canvas");a.width=e.videoWidth,a.height=e.videoHeight;return a.getContext("2d").drawImage(e,0,0,a.width,a.height),t?o.download(a,i,e):o.previe(a,i),a},previe(e,t){e.style="max-width:100%";const n=window.open("","_blank");n.document.title=`capture previe - ${t||"Untitled"}`,n.document.body.style.textAlign="center",n.document.body.style.background="#000",n.document.body.appendChild(e)},download(e,t,n){t=t||"videoCapturer_"+Date.now();try{e.toBlob((function(e){setClipboard(e)}),"image/png",.99)}catch(e){console.error("无法将截图复制到剪贴板。",e)}try{e.toBlob((function(e){const n=document.createElement("a");n.download=`${t}.jpg`,n.href=URL.createObjectURL(e),n.click()}),"image/jpeg",.99)}catch(o){videoCapturer.previe(e,t),console.error("视频源受CORS标识限制，无法直接下载截图，见：\n https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"),console.error(n,o)}}};class MouseObserver{constructor(e){this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.target.IntersectionObserverEntry=e}))}),e||{}),this.observeList=[]}_observe(e){let t=!1;for(let n=0;n<this.observeList.length;n++){if(e===this.observeList[n]){t=!0;break}}t||(this.observer.observe(e),this.observeList.push(e))}_unobserve(e){this.observer.unobserve(e);const t=[];this.observeList.forEach((n=>{n!==e&&t.push(n)})),this.observeList=t}on(e,t,n,o){const r=this;r._observe(e),e.MouseObserverEvent||(e.MouseObserverEvent={}),e.MouseObserverEvent[t]=!0,r._mouseObserver_||(r._mouseObserver_={}),r._mouseObserver_[t]||(r._mouseObserver_[t]=[],window.addEventListener(t,(e=>{r.observeList.forEach((n=>{const o=n.IntersectionObserverEntry&&n.IntersectionObserverEntry.intersectionRatio>0,i=!0===n.MouseObserverEvent[e.type];if(o&&i){const o=n.getBoundingClientRect(),i=e.x-o.x,a=e.y-o.y;if(i<=o.width&&i>=0&&a<=o.height&&a>=0){r._mouseObserver_[t].forEach((t=>{t instanceof Function&&t.call(r,e,{x:i,y:a},n)}))}}}))}),o)),n instanceof Function&&r._mouseObserver_[t].push(n)}off(e,t,n){const o=this;if(!(e&&t&&n&&o._mouseObserver_&&o._mouseObserver_[t]&&e.MouseObserverEvent&&e.MouseObserverEvent[t]))return!1;const r=[],i=o._mouseObserver_[t];let a=!1;i.forEach((e=>{e===n?a=!0:r.push(e)})),a&&(o._mouseObserver_[t]=r,0===r.length&&delete e.MouseObserverEvent[t],"{}"===JSON.stringify(e.MouseObserverEvent[t])&&o._unobserve(e))}}class I18n{constructor(e){this._languages={},this._locale=this.getClientLang(),this._defaultLanguage="",this.init(e)}init(e){if(!e)return!1;const t=this;t._locale=e.locale||t._locale,t._languages=e.languages||t._languages,t._defaultLanguage=e.defaultLanguage||t._defaultLanguage}use(){}t(e){const t=this;let n=t.getValByPath(t._languages[t._locale]||{},e);return n||t._locale===t._defaultLanguage||(n=t.getValByPath(t._languages[t._defaultLanguage]||{},e)),n||""}language(){return this._locale}languages(){return this._languages}changeLanguage(e){return!!this._languages[e]&&(this._locale=e,e)}isMatchCurLang(e){const t=this.language()||"",n=t.replace("-",""),o=t.replace("-","_"),r=t.split("-")[0];return e&&!Array.isArray(e)&&(e=[e]),e.includes(t)||e.includes(n)||e.includes(o)||e.includes(r)}getValByPath(e,t){const n=(t=t||"").split(".");let o=e;for(let e=0;e<n.length&&o;e++)o=o[n[e]];return o}getClientLang(){return navigator.languages?navigator.languages[0]:navigator.language}}var zhCN={website:"🏠脚本官网",about:"关于",issues:"问题反馈",faq:"常见问题",setting:"设置",hotkeys:"快捷键",keyboardControl:"键盘控制",mouseControl:"鼠标控制",hotkeysDocs:"快捷键文档",enable:"启用",disable:"禁用",toggleStates:"启用/禁用",disableHotkeysTemporarily:"临时禁用快捷键",toggleHotkeysTemporarily:"临时启用/禁用快捷键",enableHotkeys:"启用快捷键",disableHotkeys:"禁用快捷键",enableMouseControl:"启用鼠标控制",disableMouseControl:"禁用鼠标控制",donate:"👍请作者喝杯咖啡",aboutDonate:"100万级安装量的作品，有多少打赏？",aboutAuthor:"关于作者",recommend:"❤️ 免费ChatGPT-4 ❤️",enableScript:"启用脚本",disableScript:"禁用脚本",disableCurrentInstanceGUI:"关闭当前图形用户界面",disableGUITemporarily:"临时禁用图形用户界面",enableGUI:"启用图形用户界面",disableGUI:"禁用图形用户界面",graphicalInterface:"图形界面",alwaysShowGraphicalInterface:"始终显示图形界面",openCrossOriginFramePage:"单独打开跨域的页面",disableInitAutoPlay:"禁止在此网站自动播放视频",enableInitAutoPlay:"允许在此网站自动播放视频",restoreConfiguration:"还原全局的默认配置",blockSetPlaybackRate:"禁用默认速度调节逻辑",blockSetCurrentTime:"禁用默认播放进度控制逻辑",blockSetVolume:"禁用默认音量控制逻辑",unblockSetPlaybackRate:"允许默认速度调节逻辑",unblockSetCurrentTime:"允许默认播放进度控制逻辑",unblockSetVolume:"允许默认音量控制逻辑",allowAcousticGain:"开启音量增益能力",notAllowAcousticGain:"禁用音量增益能力",allowCrossOriginControl:"开启跨域控制能力",notAllowCrossOriginControl:"禁用跨域控制能力",allowExperimentFeatures:"开启实验性功能",notAllowExperimentFeatures:"禁用实验性功能",experimentFeaturesWarning:"实验性功能容易造成一些不确定的问题，请谨慎开启",useMediaDownloadTips:"使用下载功能，需开启实验性功能，\n实验性功能容易造成一些不确定的问题，确定要开启吗？",allowExternalCustomConfiguration:"开启外部自定义能力",notAllowExternalCustomConfiguration:"关闭外部自定义能力",changeLog:"更新日志",currentVersion:"当前版本",checkVersion:"检查是否有新版本？",configFail:"配置失败",globalSetting:"全局设置",openCustomConfigurationEditor:"打开自定义配置编辑器",localSetting:"仅用于此网站",openDebugMode:"开启调试模式",closeDebugMode:"关闭调试模式",unfoldMenu:"展开菜单",foldMenu:"折叠菜单",addGroupChat:"💬添加群聊",speed:"倍速",capture:"截图",download:"下载",mediaDownload:{enable:"开启媒体下载",disable:"关闭媒体下载",downloadOptions:"下载选项",downloading:"文件正在下载中，确定重复执行此操作？",hasDownload:"文件已经下载，确定重复执行此操作？",confirmTitle:"请输入文件名",notSupport:"当前媒体文件无法下载，下载功能待优化完善",notEndOfStream:"媒体数据还没完全就绪，确定要执行下载操作？",cancelAutoDownload:"是否取消自动下载？",autoDownload:"媒体数据完全就绪后，是否自动下载？",notFoundMediaSource:"未找到对应的媒体流数据，数据可能被清理或者媒体元素已经被移除，建议刷新页面后重试"},menu:"菜单",more:"更多",moreActions:"更多操作",videoFilter:"画面滤镜",resetFilterAndTransform:"图像复位",brightnessUp:"增加亮度",brightnessDown:"减少亮度",contrastUp:"增加对比度",contrastDown:"减少对比度",saturationUp:"增加饱和度",saturationDown:"减少饱和度",hueUp:"增加色相",hueDown:"减少色相",blurUp:"增加模糊度",blurDown:"减少模糊度",rotateAndMirror:"旋转镜像",rotate90:"画面旋转 90 度",horizontalMirror:"画面水平镜像翻转",verticalMirror:"画面垂直镜像翻转",videoTransform:"画面位移",translateRight:"画面向右移动",translateLeft:"画面向左移动",translateUp:"画面向上移动",translateDown:"画面向下移动",languageSettings:"语言设置",default:"默认",autoChoose:"自动选择",comingSoon:"更多功能正在完善中，敬请期待",ffmpegScript:"音视频合并/转换脚本",autoGotoBufferedTime:"自动跟随跳转到缓冲区时间",disableAutoGotoBufferedTime:"禁用自动跟随跳转到缓冲区时间",mouse:{enable:"启用鼠标控制",disable:"禁用鼠标控制",longPressTime:"长按多久响应鼠标长按事件"},tipsMsg:{playspeed:"播放速度：",forward:"前进：",backward:"后退：",seconds:"秒",volume:"音量：",nextframe:"定位：下一帧",previousframe:"定位：上一帧",stopframe:"定格帧画面：",play:"播放",pause:"暂停",arpl:"允许自动恢复播放进度",drpl:"禁止自动恢复播放进度",brightness:"图像亮度：",contrast:"图像对比度：",saturation:"图像饱和度：",hue:"图像色相：",blur:"图像模糊度：",imgattrreset:"图像属性：复位",imgrotate:"画面旋转：",onplugin:"启用h5Player插件",offplugin:"禁用h5Player插件",globalmode:"全局模式：",playbackrestored:"为你恢复上次播放进度",playbackrestoreoff:"恢复播放进度功能已禁用，按 SHIFT+R 可开启该功能",horizontal:"水平位移：",vertical:"垂直位移：",horizontalMirror:"水平镜像",verticalMirror:"垂直镜像",videozoom:"视频缩放率："},faqList:{}},enUS={website:"🏠Script Homepage",about:"About",issues:"Issues",faq:"FAQ",setting:"Setting",hotkeys:"Hotkeys",keyboardControl:"Keyboard Control",mouseControl:"Mouse Control",hotkeysDocs:"Hotkeys Docs",enable:"Enable",disable:"Disable",toggleStates:"Enable/Disable",disableHotkeysTemporarily:"Disable hotkeys temporarily",toggleHotkeysTemporarily:"Toggle hotkeys temporarily",enableHotkeys:"Enable hotkeys",disableHotkeys:"Disable hotkeys",donate:"👍Donate",aboutDonate:"How much the author has received?",aboutAuthor:"About the author",enableScript:"Enable script",disableScript:"Disable script",disableCurrentInstanceGUI:"Close the current graphical user interface",disableGUITemporarily:"Temporarily disable the graphical interface",enableGUI:"Enable Graphical User Interface",disableGUI:"Disable Graphical User Interface",graphicalInterface:"Graphical Interface",alwaysShowGraphicalInterface:"Always show graphical interface",openCrossOriginFramePage:"Open cross-domain pages alone",disableInitAutoPlay:"Prohibit autoplay of videos on this site",enableInitAutoPlay:"Allow autoplay videos on this site",restoreConfiguration:"Restore the global default configuration",blockSetPlaybackRate:"Disable default speed regulation logic",blockSetCurrentTime:"Disable default playback progress control logic",blockSetVolume:"Disable default volume control logic",unblockSetPlaybackRate:"Allow default speed adjustment logic",unblockSetCurrentTime:"Allow default playback progress control logic",unblockSetVolume:"Allow default volume control logic",allowAcousticGain:"Turn on volume boost",notAllowAcousticGain:"Disable volume boost ability",allowCrossOriginControl:"Enable cross-domain control capability",notAllowCrossOriginControl:"Disable cross-domain control capabilities",allowExperimentFeatures:"Turn on experimental features",notAllowExperimentFeatures:"Disable experimental features",experimentFeaturesWarning:"Experimental features are likely to cause some uncertain problems, please turn on with caution",useMediaDownloadTips:"To use the download capability, you need to enable experimental features.\nExperimental features can easily cause some uncertain problems. Are you sure you want to enable it?",allowExternalCustomConfiguration:"Enable external customization capabilities",notAllowExternalCustomConfiguration:"Turn off external customization capabilities",changeLog:"Change log",currentVersion:"Current version",checkVersion:"Check for new version ?",configFail:"Configuration failed",globalSetting:"Global Settings",openCustomConfigurationEditor:"Open custom configuration editor",localSetting:"For this site only",openDebugMode:"Enable debug mode",closeDebugMode:"Turn off debug mode",unfoldMenu:"Expand menu",foldMenu:"Collapse menu",addGroupChat:"💬Add chat group",speed:"Speed",capture:"Capture",download:"Download",mediaDownload:{enable:"Enable media download",disable:"Disable media download",downloadOptions:"Download options",downloading:"The file is being downloaded. Are you sure you want to execute this operation again?",hasDownload:"The file has been downloaded. Are you sure you want to execute this operation again?",confirmTitle:"Please enter the file name",notSupport:"The current media file cannot be downloaded. The download function needs to be optimized and improved",notEndOfStream:"The media data is not fully ready, are you sure you want to download it?",cancelAutoDownload:"Cancel automatic download?",autoDownload:"The media data is not fully ready, do you want to automatically download it when it is ready?",notFoundMediaSource:"The corresponding media stream data was not found, the data may have been cleared or the media element has been removed, it is recommended to refresh the page and try again"},menu:"Menu",more:"More",moreActions:"More actions",videoFilter:"Video filter",resetFilterAndTransform:"Reset filter and transform",brightnessUp:"Increase brightness",brightnessDown:"Decrease brightness",contrastUp:"Increase contrast",contrastDown:"Decrease contrast",saturationUp:"Increase saturation",saturationDown:"Decrease saturation",hueUp:"Increase hue",hueDown:"Decrease hue",blurUp:"Increase blur",blurDown:"Decrease blur",rotateAndMirror:"Rotate and mirror",rotate90:"Rotate 90 degrees",horizontalMirror:"Horizontal mirror flip",verticalMirror:"Vertical mirror flip",videoTransform:"Video displacement",translateRight:"Move the screen to the right",translateLeft:"Move the screen to the left",translateUp:"Move the screen up",translateDown:"Move the screen down",languageSettings:"Language settings",default:"Default",autoChoose:"Auto choose",comingSoon:"More features are being improved, stay tuned",ffmpegScript:"Audio and video merge/convert script",autoGotoBufferedTime:"Automatically jump to the buffered time",disableAutoGotoBufferedTime:"Disable automatic jump to the buffered time",mouse:{enable:"Enable mouse control",disable:"Disable mouse control",longPressTime:"How long to respond to mouse long press events"},tipsMsg:{playspeed:"Speed: ",forward:"Forward: ",backward:"Backward: ",seconds:"sec",volume:"Volume: ",nextframe:"Next frame",previousframe:"Previous frame",stopframe:"Stopframe: ",play:"Play",pause:"Pause",arpl:"Allow auto resume playback progress",drpl:"Disable auto resume playback progress",brightness:"Brightness: ",contrast:"Contrast: ",saturation:"Saturation: ",hue:"HUE: ",blur:"Blur: ",imgattrreset:"Attributes: reset",imgrotate:"Picture rotation: ",onplugin:"ON h5Player plugin",offplugin:"OFF h5Player plugin",globalmode:"Global mode: ",playbackrestored:"Restored the last playback progress for you",playbackrestoreoff:"The function of restoring the playback progress is disabled. Press SHIFT+R to turn on the function",horizontal:"Horizontal displacement: ",vertical:"Vertical displacement: ",horizontalMirror:"Horizontal mirror",verticalMirror:"vertical mirror",videozoom:"Video zoom: "},demo:"demo-test"},ru={website:"🏠официальный сайт скрипта",about:"около",issues:"обратная связь",faq:"часто задаваемые вопросы",setting:"установка",hotkeys:"горячие клавиши",keyboardControl:"управление клавиатурой",mouseControl:"управление мышью",hotkeysDocs:"документы горячих клавиш",enable:"включить",disable:"отключить",toggleStates:"включить/отключить",disableHotkeysTemporarily:"временно отключить горячие клавиши",toggleHotkeysTemporarily:"временно включить/отключить горячие клавиши",enableHotkeys:"включить горячие клавиши",disableHotkeys:"отключить горячие клавиши",donate:"👍пожертвовать",aboutDonate:"Сколько автор получил?",aboutAuthor:"о авторе",enableScript:"включить скрипт",disableScript:"отключить скрипт",disableCurrentInstanceGUI:"отключить текущий графический интерфейс пользователя",disableGUITemporarily:"Временно отключить графический интерфейс пользователя",enableGUI:"Включить графический интерфейс пользователя",disableGUI:"Отключить графический интерфейс пользователя",graphicalInterface:"Графический интерфейс",alwaysShowGraphicalInterface:"Всегда показывать графический интерфейс",openCrossOriginFramePage:"Открывать только междоменные страницы",disableInitAutoPlay:"Запретить автовоспроизведение видео на этом сайте",enableInitAutoPlay:"Разрешить автоматическое воспроизведение видео на этом сайте",restoreConfiguration:"Восстановить глобальную конфигурацию по умолчанию",blockSetPlaybackRate:"Отключить логику регулирования скорости по умолчанию",blockSetCurrentTime:"Отключить логику управления ходом воспроизведения по умолчанию",blockSetVolume:"Отключить логику управления громкостью по умолчанию",unblockSetPlaybackRate:"Разрешить логику регулировки скорости по умолчанию",unblockSetCurrentTime:"Разрешить логику управления ходом воспроизведения по умолчанию",unblockSetVolume:"Разрешить логику управления громкостью по умолчанию",allowAcousticGain:"Включите усиление громкости",notAllowAcousticGain:"Отключить возможность увеличения громкости",allowCrossOriginControl:"Включить возможность междоменного контроля",notAllowCrossOriginControl:"Отключить возможности междоменного контроля",allowExperimentFeatures:"Включить экспериментальные функции",notAllowExperimentFeatures:"Отключить экспериментальные функции",experimentFeaturesWarning:"Экспериментальные функции могут вызвать определенные проблемы, включайте их с осторожностью.",useMediaDownloadTips:"Чтобы использовать функцию загрузки, вам необходимо включить экспериментальную функцию.\nЭкспериментальные функции могут легко вызвать некоторые неопределенные проблемы. Вы уверены, что хотите включить ее?",allowExternalCustomConfiguration:"Включить возможности внешней настройки",notAllowExternalCustomConfiguration:"Отключить возможности внешней настройки",changeLog:"Журнал изменений",currentVersion:"Текущая версия",checkVersion:"Проверить наличие новой версии ?",configFail:"Ошибка конфигурации",globalSetting:"Глобальные настройки",openCustomConfigurationEditor:"Открыть редактор пользовательской конфигурации",localSetting:"только для этого сайта",openDebugMode:"Включить режим отладки",closeDebugMode:"отключить режим отладки",unfoldMenu:"развернуть меню",foldMenu:"свернуть меню",addGroupChat:"💬Добавить группу чата",speed:"Скорость",capture:"Захват",download:"Скачать",mediaDownload:{enable:"Включить загрузку медиафайлов",disable:"Отключить загрузку медиафайлов",downloadOptions:"Опции загрузки",downloading:"Идет скачивание файла. Вы уверены, что хотите повторить эту операцию?",hasDownload:"Файл скачан. Вы уверены, что хотите повторить эту операцию?",confirmTitle:"Пожалуйста, введите имя файла",notSupport:"Текущий медиафайл невозможно загрузить, а функцию загрузки необходимо оптимизировать и улучшить.",notEndOfStream:"Медиаданные еще не полностью готовы. Вы уверены, что хотите их скачать?",cancelAutoDownload:"Отменить автоматическую загрузку?",autoDownload:"Будут ли медиаданные загружаться автоматически после их полной готовности?",notFoundMediaSource:"Соответствующие данные медиапотока не найдены. Возможно, данные были очищены или медиа-элементы удалены. Рекомендуется обновить страницу и повторить попытку."},menu:"Меню",more:"Больше",moreActions:"Дополнительные действия",videoFilter:"Видеофильтр",resetFilterAndTransform:"Сбросить фильтр и трансформацию",brightnessUp:"Увеличить яркость",brightnessDown:"Уменьшить яркость",contrastUp:"Увеличить контраст",contrastDown:"Уменьшить контраст",saturationUp:"Увеличить насыщенность",saturationDown:"Уменьшить насыщенность",hueUp:"Увеличить оттенок",hueDown:"Уменьшить оттенок",blurUp:"Увеличить размытие",blurDown:"Уменьшить размытие",rotateAndMirror:"Повернуть и отразить",rotate90:"Повернуть изображение на 90 градусов",horizontalMirror:"Горизонтальное отражение изображения",verticalMirror:"Вертикальное отражение изображения",videoTransform:"Видео трансформация",translateRight:"Сдвинуть экран вправо",translateLeft:"Сдвинуть экран влево",translateUp:"Сдвинуть экран вверх",translateDown:"Сдвинуть экран вниз",languageSettings:"Настройки языка",default:"По умолчанию",autoChoose:"Автоматический выбор",comingSoon:"Больше функций находится в процессе улучшения, следите за обновлениями",ffmpegScript:"Скрипт слияния/преобразования аудио и видео",autoGotoBufferedTime:"Автоматически перейти к времени буфера",disableAutoGotoBufferedTime:"Отключить автоматический переход к времени буфера",mouse:{enable:"Включить управление мышью",disable:"Отключить управление мышью",longPressTime:"Как долго реагировать на долгие нажатия мыши"},tipsMsg:{playspeed:"Скорость: ",forward:"Вперёд: ",backward:"Назад: ",seconds:" сек",volume:"Громкость: ",nextframe:"Следующий кадр",previousframe:"Предыдущий кадр",stopframe:"Стоп-кадр: ",play:"Запуск",pause:"Пауза",arpl:"Разрешить автоматическое возобновление прогресса воспроизведения",drpl:"Запретить автоматическое возобновление прогресса воспроизведения",brightness:"Яркость: ",contrast:"Контраст: ",saturation:"Насыщенность: ",hue:"Оттенок: ",blur:"Размытие: ",imgattrreset:"Атрибуты: сброс",imgrotate:"Поворот изображения: ",onplugin:"ВКЛ: плагин воспроизведения",offplugin:"ВЫКЛ: плагин воспроизведения",globalmode:"Глобальный режим:",playbackrestored:"Восстановлен последний прогресс воспроизведения",playbackrestoreoff:"Функция восстановления прогресса воспроизведения отключена. Нажмите SHIFT + R, чтобы включить функцию",horizontal:"Горизонтальное смещение: ",vertical:"Вертикальное смещение: ",horizontalMirror:"Горизонтальное зеркало",verticalMirror:"вертикальное зеркало",videozoom:"Увеличить видео: "}},zhTW={website:"🏠腳本官網",about:"關於",issues:"反饋",faq:"常見問題",setting:"設置",hotkeys:"快捷鍵",keyboardControl:"鍵盤控制",mouseControl:"鼠標控制",hotkeysDocs:"快捷鍵文檔",enable:"啟用",disable:"禁用",toggleStates:"啟用/禁用",disableHotkeysTemporarily:"臨時禁用快捷鍵",toggleHotkeysTemporarily:"臨時啟用/禁用快捷鍵",enableHotkeys:"啟用快捷鍵",disableHotkeys:"禁用快捷鍵",donate:"👍讚賞",aboutDonate:"100萬級安裝量的作品，有多少打賞？",aboutAuthor:"關於作者",enableScript:"啟用腳本",disableScript:"禁用腳本",disableCurrentInstanceGUI:"關閉當前圖形用戶界面",disableGUITemporarily:"臨時禁用圖形用戶界面",enableGUI:"啟用圖形用戶界面",disableGUI:"禁用圖形用戶界面",graphicalInterface:"圖形界面",alwaysShowGraphicalInterface:"始終顯示圖形界面",openCrossOriginFramePage:"單獨打開跨域的頁面",disableInitAutoPlay:"禁止在此網站自動播放視頻",enableInitAutoPlay:"允許在此網站自動播放視頻",restoreConfiguration:"還原全局的默認配置",blockSetPlaybackRate:"禁用默認速度調節邏輯",blockSetCurrentTime:"禁用默認播放進度控制邏輯",blockSetVolume:"禁用默認音量控制邏輯",unblockSetPlaybackRate:"允許默認速度調節邏輯",unblockSetCurrentTime:"允許默認播放進度控制邏輯",unblockSetVolume:"允許默認音量控制邏輯",allowAcousticGain:"開啟音量增益能力",notAllowAcousticGain:"禁用音量增益能力",allowCrossOriginControl:"開啟跨域控制能力",notAllowCrossOriginControl:"禁用跨域控制能力",allowExperimentFeatures:"開啟實驗性功能",notAllowExperimentFeatures:"禁用實驗性功能",experimentFeaturesWarning:"實驗性功能容易造成一些不確定的問題，請謹慎開啟",useMediaDownloadTips:"使用下載功能，需開啟實驗功能，\n實驗功能容易造成一些不確定的問題，確定要開啟嗎？",allowExternalCustomConfiguration:"開啟外部自定義能力",notAllowExternalCustomConfiguration:"關閉外部自定義能力",changeLog:"更新日誌",currentVersion:"當前版本",checkVersion:"檢查是否有新版本？",configFail:"配置失敗",globalSetting:"全局設置",openCustomConfigurationEditor:"打開自定義配置編輯器",localSetting:"僅用於此網站",openDebugMode:"開啟調試模式",closeDebugMode:"關閉調試模式",unfoldMenu:"展開菜單",foldMenu:"折疊菜單",addGroupChat:"💬新增群聊",speed:"倍速",capture:"截圖",download:"下載",mediaDownload:{enable:"開啟媒體下載",disable:"關閉媒體下載",downloadOptions:"下載選項",downloading:"文件正在下載中，確定重複執行此操作？",hasDownload:"文件已經下載，確定重複執行此操作？",confirmTitle:"請輸入文件名",notSupport:"目前媒體檔案無法下載，下載功能要優化完善",notEndOfStream:"媒體資料還沒完全就緒，確定要執行下載操作？",cancelAutoDownload:"是否取消自動下載？",autoDownload:"媒體資料完全就緒後，是否自動下載？",notFoundMediaSource:"未找到對應的媒體流數據，數據可能被清理或媒體元素已經被移除，建議刷新頁面後重試"},menu:"菜單",more:"更多",moreActions:"更多操作",videoFilter:"視頻濾鏡",resetFilterAndTransform:"圖像復位",brightnessUp:"增加亮度",brightnessDown:"減少亮度",contrastUp:"增加對比度",contrastDown:"減少對比度",saturationUp:"增加飽和度",saturationDown:"減少飽和度",hueUp:"增加色相",hueDown:"減少色相",blurUp:"增加模糊度",blurDown:"減少模糊度",rotateAndMirror:"旋轉和鏡像",rotate90:"畫面旋轉 90 度",horizontalMirror:"畫面水平鏡像翻轉",verticalMirror:"畫面垂直鏡像翻轉",videoTransform:"畫面位移",translateRight:"畫面向右移動",translateLeft:"畫面向左移動",translateUp:"畫面向上移動",translateDown:"畫面向下移動",languageSettings:"語言設置",default:"默認",autoChoose:"自動選擇",comingSoon:"更多功能正在完善中，敬請期待",ffmpegScript:"音視頻合併/轉換腳本",autoGotoBufferedTime:"自動跟隨跳轉到緩衝區時間",disableAutoGotoBufferedTime:"禁用自動跟隨跳轉到緩衝區時間",mouse:{enable:"啟用鼠標控制",disable:"禁用鼠標控制",longPressTime:"長按多久響應鼠標長按事件"},tipsMsg:{playspeed:"播放速度：",forward:"向前：",backward:"向後：",seconds:"秒",volume:"音量：",nextframe:"定位：下一幀",previousframe:"定位：上一幀",stopframe:"定格幀畫面：",play:"播放",pause:"暫停",arpl:"允許自動恢復播放進度",drpl:"禁止自動恢復播放進度",brightness:"圖像亮度：",contrast:"圖像對比度：",saturation:"圖像飽和度：",hue:"圖像色相：",blur:"圖像模糊度：",imgattrreset:"圖像屬性：復位",imgrotate:"畫面旋轉：",onplugin:"啟用h5Player插件",offplugin:"禁用h5Player插件",globalmode:"全局模式：",playbackrestored:"為你恢復上次播放進度",playbackrestoreoff:"恢復播放進度功能已禁用，按 SHIFT+R 可開啟該功能",horizontal:"水平位移：",vertical:"垂直位移：",horizontalMirror:"水平鏡像",verticalMirror:"垂直鏡像",videozoom:"視頻縮放率："}};const messages={"zh-CN":zhCN,zh:zhCN,"zh-HK":zhTW,"zh-TW":zhTW,"en-US":enUS,en:enUS,ru:ru},i18n=new I18n({defaultLanguage:"en",languages:messages}),lang=configManager.get("language");lang&&i18n.changeLanguage(lang);let __globalId__=0;function getId(){if(window.GM_getValue&&window.GM_setValue){let e=window.GM_getValue("_global_id_");return e||(e=0),e=Number(e)+1,window.GM_setValue("_global_id_",e),e}return __globalId__=Number(__globalId__)+1,__globalId__}let curTabId=null;function getTabId(){return new Promise(((e,t)=>{window.GM_getTab instanceof Function?window.GM_getTab((function(t){t.tabId||(t.tabId=getId(),window.GM_saveTab(t)),curTabId=t.tabId,e(t.tabId)})):e(Date.now())}))}function extractDatafromOb(e,t){if((t=t||1)>3)return{};const n={};if("object"==typeof e)for(const o in e){const r=e[o],i=typeof r;"number"===i||"string"===i||"boolean"===i?Object.defineProperty(n,o,{value:r,writable:!0,configurable:!0,enumerable:!0}):"object"===i&&Object.prototype.propertyIsEnumerable.call(e,o)?n[o]=extractDatafromOb(r,t+1):"array"===i&&(n[o]=r)}return n}getTabId();const monkeyMsg={send(e,t,n=80){if(!window.GM_getValue||!window.GM_setValue)return!1;const o=window.GM_getValue(e);if(o&&o.updateTime){if(Math.abs(Date.now()-o.updateTime)<n)return!1}const r={data:t,tabId:curTabId||"undefined",title:document.title,referrer:extractDatafromOb(window.location),updateTime:Date.now()};"object"==typeof t&&(r.data=extractDatafromOb(t)),window.GM_setValue(e,r)},set:(e,t)=>monkeyMsg.send(e,t),get:e=>window.GM_getValue&&window.GM_getValue(e),on:(e,t)=>window.GM_addValueChangeListener&&window.GM_addValueChangeListener(e,(function(e,n,o,r){o.originTab=o.tabId===curTabId,t instanceof Function&&t.apply(null,arguments)})),off:e=>window.GM_removeValueChangeListener&&window.GM_removeValueChangeListener(e),broadcast(e){const t="__monkeyMsgBroadcast__";return monkeyMsg._monkeyMsgBroadcastHandler_=monkeyMsg._monkeyMsgBroadcastHandler_||[],e instanceof Function&&monkeyMsg._monkeyMsgBroadcastHandler_.push(e),monkeyMsg._hasMonkeyMsgBroadcast_||(monkeyMsg.on(t,(function(){monkeyMsg._monkeyMsgBroadcastHandler_.forEach((e=>{e.apply(null,arguments)}))})),setInterval((function(){const e=monkeyMsg.get(t);if(e&&Date.now()-e.updateTime<2e3)return!1;monkeyMsg.send(t,{})}),2e3)),t}},crossTabCtl={excludeShortcuts(e){if(!e||void 0===e.keyCode)return!1;const t=["c","v","f","d"];if(e.ctrlKey||e.metaKey){const n=e.key.toLowerCase();return!!t.includes(n)}return!1},updatePictureInPictureInfo(){setInterval((function(){document.pictureInPictureElement&&monkeyMsg.send("globalPictureInPictureInfo",{usePictureInPicture:!0})}),1500),monkeyMsg.broadcast((function(){document.pictureInPictureElement&&monkeyMsg.send("globalPictureInPictureInfo",{usePictureInPicture:!0})}))},hasOpenPictureInPicture(){const e=monkeyMsg.get("globalPictureInPictureInfo");return!(!e||!e.data)&&(e.data.usePictureInPicture?Math.abs(Date.now()-e.updateTime)<3e3:Math.abs(Date.now()-e.updateTime)<15e3)},isNeedSendCrossTabCtlEvent(){const e=crossTabCtl,t=monkeyMsg.get("globalPictureInPictureInfo");return!(!e.hasOpenPictureInPicture()||t.tabId===curTabId)},crossTabKeydownEvent(e){const t=crossTabCtl;if(!isEditableTarget(e.composedPath&&e.composedPath()[0]||e.target))return t.isNeedSendCrossTabCtlEvent()&&isRegisterKey(e)&&!t.excludeShortcuts(e)?(e.stopPropagation(),e.preventDefault(),!0):void 0},bindCrossTabEvent(){const e=crossTabCtl;e._hasBindEvent_||(document.removeEventListener("keydown",e.crossTabKeydownEvent),document.addEventListener("keydown",e.crossTabKeydownEvent,!0),e._hasBindEvent_=!0)},init(){const e=crossTabCtl;e.updatePictureInPictureInfo(),e.bindCrossTabEvent()}},win="undefined"==typeof window?global:window,toStr=Function.prototype.call.bind(Object.prototype.toString),toBoolean=Boolean.originMethod?Boolean.originMethod:Boolean,util={toStr:toStr,isObj:e=>"[object Object]"===toStr(e),isRef:e=>"object"==typeof e,isReg:e=>"[object RegExp]"===toStr(e),isFn:e=>e instanceof Function,isAsyncFn:e=>"[object AsyncFunction]"===toStr(e),isPromise:e=>"[object Promise]"===toStr(e),firstUpperCase:e=>e.replace(/^\S/,(e=>e.toUpperCase())),toArr:e=>Array.from(Array.isArray(e)?e:[e]),debug:{log(){let e=win.console.log;e.originMethod&&(e=e.originMethod),win._debugMode_&&e.apply(win.console,arguments)}},getAllKeys(e){const t=[];for(const n in e)t.push(n);return Array.from(new Set(t.concat(Reflect.ownKeys(e))))}};class HookJs{constructor(e){this.useProxy=e||!1,this.hookPropertiesKeyName="_hookProperties"+Date.now()}hookJsPro(){return new HookJs(!0)}_addHook(e,t,n,o){const r=n+"Hooks",i=e[this.hookPropertiesKeyName];i[r]||(i[r]=[]);let a=!1;for(let e=0;e<i[r].length;e++)if(t===i[r][e]){a=!0;break}a||(t.classHook=o||!1,i[r].push(t))}_runHooks(e,t,n,o,r,i,a,s,l){const c=o[l],u=c.beforeHooks||[],d=c.afterHooks||[],p=c.errorHooks||[],h=c.hangUpHooks||[],g=c.replaceHooks||[],f={result:null,error:null,args:a,type:""};function m(o,r){let l=null;return f.type=r||"",Array.isArray(o)&&o.forEach((o=>{util.isFn(o)&&s===o.classHook&&(l=o(a,e,t,n,f,i))})),l}const b=s?function(){return new r(...a)}:function(){return r.apply(i,a)},y=m(u,"before");if(y&&"STOP-INVOKE"===y)return y;if(h.length||g.length)m(h,"hangUp"),m(g,"replace");else if(p.length)try{f.result=b()}catch(e){f.error=e;const t=m(p,"error");if(!t||"SKIP-ERROR"!==t)throw e}else f.result=b();return m(d,"after"),f.result}_proxyMethodcGenerator(e,t,n,o,r,i){const a=this,s=a.useProxy;let l=null;if(a.isHook(n)?l=n:n[a.hookPropertiesKeyName]&&a.isHook(n[a.hookPropertiesKeyName].hookMethod)&&(l=n[a.hookPropertiesKeyName].hookMethod),l)return l[a.hookPropertiesKeyName].isHook||(l[a.hookPropertiesKeyName].isHook=!0,util.debug.log(`[hook method] ${util.toStr(e)} ${t}`)),l;if(s&&Proxy){const s={...i};o?s.construct=function(o,i,s){return r=r||this,a._runHooks(e,t,n,l,o,r,i,!0,a.hookPropertiesKeyName)}:s.apply=function(o,i,s){return i=r||i,a._runHooks(e,t,n,l,o,i,s,!1,a.hookPropertiesKeyName)},l=new Proxy(n,s)}else{l=function(){const i=r||this;return a._runHooks(e,t,n,l,n,i,arguments,o,a.hookPropertiesKeyName)};Reflect.ownKeys(n).forEach((e=>{try{Object.defineProperty(l,e,{get:function(){return n[e]},set:function(t){n[e]=t}})}catch(n){util.debug.log(`[proxyMethodcGenerator] hookMethod defineProperty abnormal.  hookMethod:${t}, definePropertyName:${e}`,n)}})),l.prototype=n.prototype}const c=l[a.hookPropertiesKeyName]={};return c.originMethod=n,c.hookMethod=l,c.isHook=!0,c.classHook=o,util.debug.log(`[hook method] ${util.toStr(e)} ${t}`),l}_getObjKeysByRule(e,t){let n=null,o=t;return util.isObj(t)&&t.include&&(n=t.exclude,o=t=t.include),"*"===t?o=Object.keys(e):"**"===t?o=Reflect.ownKeys(e):"***"===t?o=util.getAllKeys(e):util.isReg(t)&&(o=util.getAllKeys(e).filter((e=>t.test(e)))),n&&(o=Array.isArray(o)?o:[o],o=util.isReg(n)?o.filter((e=>!n.test(e))):Array.isArray(n)?o.filter((e=>!n.includes(e))):o.filter((e=>n!==e))),util.toArr(o)}isHook(e){if(!e||!e[this.hookPropertiesKeyName])return!1;const t=e[this.hookPropertiesKeyName];return util.isFn(t.originMethod)&&e!==t.originMethod}isAllowHook(e,t){try{if(!e[t])return!1}catch(e){return!1}const n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!1===n.configurable)}hook(e,t,n,o,r,i,a){const s=arguments[0];if(util.isObj(s)&&s.parentObj&&s.hookMethods&&(e=s.parentObj,t=s.hookMethods,n=s.fn,o=s.type,r=s.classHook,i=s.context,a=s.proxyHandler),r=toBoolean(r),o=o||"before",!util.isRef(e)&&!util.isFn(e)||!util.isFn(n)||!t)return!1;const l=this;(t=l._getObjKeysByRule(e,t)).forEach((t=>{if(!l.isAllowHook(e,t))return util.debug.log(`${util.toStr(e)} [${t}] does not support modification`),!1;const s=Object.getOwnPropertyDescriptor(e,t);s&&!1===s.writable&&Object.defineProperty(e,t,{writable:!0});const c=e[t];let u=null;if(!util.isFn(c))return!1;u=l._proxyMethodcGenerator(e,t,c,r,i,a);if(u[l.hookPropertiesKeyName].classHook!==r)return util.debug.log(`${util.toStr(e)} [${t}] Cannot support functions hook and classes hook at the same time `),!1;e[t]!==u&&(e[t]=u),l._addHook(u,n,o,r)}))}hookClass(e,t,n,o,r,i){return this.hook(e,t,n,o,!0,r,i)}unHook(e,t,n,o){if(!util.isRef(e)||!t)return!1;const r=this;(t=r._getObjKeysByRule(e,t)).forEach((t=>{if(!r.isAllowHook(e,t))return!1;const i=e[t];if(!r.isHook(i))return!1;const a=i[r.hookPropertiesKeyName],s=a.originMethod;if(n){const r=n+"Hooks",i=a[r]||[];if(o){for(let n=0;n<i.length;n++)if(o===i[n]){a[r].splice(n,1),util.debug.log(`[unHook ${r} func] ${util.toStr(e)} ${t}`,o);break}}else Array.isArray(a[r])&&(a[r]=[],util.debug.log(`[unHook all ${r}] ${util.toStr(e)} ${t}`))}else util.isFn(s)&&(e[t]=s,delete e[t][r.hookPropertiesKeyName],util.debug.log(`[unHook method] ${util.toStr(e)} ${t}`))}))}_hook(e,t){const n=this;return function(o,r,i,a,s,l){const c=e[0];return util.isObj(c)&&c.parentObj&&c.hookMethods&&(c.type=t),n.hook.apply(n,e)}}before(e,t,n,o,r,i){return this.hook(e,t,n,"before",o,r,i)}after(e,t,n,o,r,i){return this.hook(e,t,n,"after",o,r,i)}replace(e,t,n,o,r,i){return this.hook(e,t,n,"replace",o,r,i)}error(e,t,n,o,r,i){return this.hook(e,t,n,"error",o,r,i)}hangUp(e,t,n,o,r,i){return this.hook(e,t,n,"hangUp",o,r,i)}}const hookJs=new HookJs(!0);function hackDefineProperCore(e,t,n){if(n&&e&&e instanceof Element&&"string"==typeof t&&t.indexOf("on")>=0&&(n.configurable=!0),e instanceof HTMLVideoElement){if(["playbackRate","currentTime","volume","muted"].includes(t))try{debug.log(`禁止对${t}进行锁定`),n.configurable=!0,t+="_hack"}catch(e){debug.error(`禁止锁定${t}失败！`,e)}}return[e,t,n]}function hackDefineProperOnError(e,t,n,o,r,i){return debug.error(`${n} error:`,r.error),"SKIP-ERROR"}function hackDefineProperty(){hookJs.before(Object,"defineProperty",(function(e,t,n,o,r,i){const a=e[2];hackDefineProperCore(e[0],e[1],a).forEach(((t,n)=>{e[n]=t}))})),hookJs.before(Object,"defineProperties",(function(e,t,n,o,r,i){const a=e[1],s=e[0];s&&s instanceof Element&&Object.keys(a).forEach((t=>{const n=a[t],o=hackDefineProperCore(s,t,n);e[0]=o[0],delete a[t],a[o[1]]=o[2]}))})),hookJs.error(Object,"defineProperty",hackDefineProperOnError),hookJs.error(Object,"defineProperties",hackDefineProperOnError)}const monkeyMenu={menuIds:{},on(e,t,n){if(e instanceof Function&&(e=e()),window.GM_registerMenuCommand){const o=window.GM_registerMenuCommand(e,t,n);return this.menuIds[o]={title:e,fn:t,accessKey:n},o}},off(e){window.GM_unregisterMenuCommand&&delete this.menuIds[e]},clear(){Object.keys(this.menuIds).forEach((e=>{this.off(e)}))},build(e){if(this.clear(),Array.isArray(e))e.forEach((e=>{!0!==e.disable&&this.on(e.title,e.fn,e.accessKey)}));else if(e instanceof Function){const t=e();Array.isArray(t)?(this._menuBuilder_=e,t.forEach((e=>{if(!0===e.disable)return;this.on(e.title,(()=>{try{e.fn.apply(e,arguments)}catch(t){console.error("[monkeyMenu]",e.title,t)}setTimeout((()=>{this.build(this._menuBuilder_)}),100)}),e.accessKey)}))):console.error("monkeyMenu build error, no menuList return",e)}}},version="4.2.7";function refreshPage(e){e=e||"配置已更改，马上刷新页面让配置生效？";confirm(e)&&window.location.reload()}const isChinese=()=>i18n.language().indexOf("zh")>-1;function getHomePage(){const e=["https://h5player.anzz.top/zh/","https://h5player.anzz.top"];return isChinese()?e[0]:e[1]}function openDocsByPath(e){if("string"!=typeof e||!0===e.startsWith("http"))return!1;e.startsWith("/")||(e="/"+e);const t=isChinese(),n="https://h5player.anzz.top";let o=n+e;t&&!e.startsWith("/zh")&&(o=n+"/zh"+e),openInTab(o)}const globalFunctional={openInTab:openInTab,getHomePageLink:{title:i18n.t("website"),desc:i18n.t("website"),fn:()=>getHomePage()},openWebsite:{title:i18n.t("website"),desc:i18n.t("website"),fn:()=>openInTab(getHomePage())},openAuthorHomePage:{title:i18n.t("aboutAuthor"),desc:i18n.t("aboutAuthor"),fn:()=>{openInTab("https://u.anzz.top/xxxily")}},openHotkeysPage:{title:i18n.t("hotkeysDocs"),desc:i18n.t("hotkeysDocs"),fn:()=>{const e=["https://h5player.anzz.top/zh/home/quickStart#%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%88%97%E8%A1%A8","https://h5player.anzz.top/home/quickStart#shortcut-key-list"];openInTab(isChinese()?e[0]:e[1])}},openProjectGithub:{title:"GitHub",desc:"GitHub",fn:()=>openInTab("https://github.com/xxxily/h5player")},openIssuesPage:{title:i18n.t("issues"),desc:i18n.t("issues"),fn:()=>openInTab("https://github.com/xxxily/h5player/issues")},openDonatePage:{title:i18n.t("donate"),desc:i18n.t("donate"),fn:()=>openDocsByPath("/home/rewardTheAuthor")},openAboutDonatePage:{title:i18n.t("aboutDonate"),desc:i18n.t("aboutDonate"),fn:()=>openDocsByPath("/home/aboutDonate")},openAddGroupChatPage:{title:i18n.t("addGroupChat"),desc:i18n.t("addGroupChat"),fn:()=>{openInTab(isChinese()?"https://h5player.anzz.top/zh/home/quickStart#%E4%BA%A4%E6%B5%81%E7%BE%A4":"https://h5player.anzz.top/home/quickStart#discussion-groups")}},openChangeLogPage:{title:i18n.t("changeLog"),desc:i18n.t("changeLog"),fn:()=>openDocsByPath("/home/changeLog")},openCheckVersionPage:{title:i18n.t("checkVersion"),desc:i18n.t("checkVersion"),fn:()=>{window.confirm(`${i18n.t("currentVersion")}「4.2.7」\n${i18n.t("checkVersion")}`)&&openInTab("https://greasyfork.org/zh-CN/scripts/381682/versions")}},openRecommendPage:{title:i18n.t("recommend"),desc:i18n.t("recommend"),fn:()=>{Math.floor(2*Math.random())?openInTab("https://hello-ai.anzz.top/home/"):openInTab("https://github.com/xxxily/hello-ai")}},openCustomConfigurationEditor:{title:i18n.t("openCustomConfigurationEditor"),desc:i18n.t("openCustomConfigurationEditor"),fn:()=>{openInTab("https://u.anzz.top/h5pjsoneditor")}},openDocsLink:{title:i18n.t("openDocsLink"),desc:i18n.t("openDocsLink"),fn:e=>openDocsByPath(e)},toggleExpandedOrCollapsedStateOfMonkeyMenu:{title:`${configManager.get("enhance.unfoldMenu")?i18n.t("foldMenu"):i18n.t("unfoldMenu")} 「${i18n.t("globalSetting")}」`,desc:`${configManager.get("enhance.unfoldMenu")?i18n.t("foldMenu"):i18n.t("unfoldMenu")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.unfoldMenu")?i18n.t("foldMenu"):i18n.t("unfoldMenu"))&&(configManager.setGlobalStorage("enhance.unfoldMenu",!configManager.get("enhance.unfoldMenu")),window.location.reload())}},toggleScriptEnableState:{title:`${(configManager.get("blacklist.domains")||[]).includes(location.host)?i18n.t("enableScript"):i18n.t("disableScript")} 「${i18n.t("localSetting")}」`,desc:`${(configManager.get("blacklist.domains")||[]).includes(location.host)?i18n.t("enableScript"):i18n.t("disableScript")} 「${i18n.t("localSetting")}」`,fn:()=>{const e=configManager.get("blacklist.domains")||[],t=e.includes(location.host);window.confirm(t?i18n.t("enableScript"):i18n.t("disableScript"))&&(t?configManager.setGlobalStorage("blacklist.domains",e.filter((e=>e!==location.host))):configManager.setGlobalStorage("blacklist.domains",e.concat(location.host)),window.location.reload())}},toggleSetCurrentTimeFunctional:{title:()=>`${configManager.get("enhance.blockSetCurrentTime")?i18n.t("unblockSetCurrentTime"):i18n.t("blockSetCurrentTime")} 「${i18n.t("localSetting")}」`,desc:()=>`${configManager.get("enhance.blockSetCurrentTime")?i18n.t("unblockSetCurrentTime"):i18n.t("blockSetCurrentTime")} 「${i18n.t("localSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.blockSetCurrentTime")?i18n.t("unblockSetCurrentTime"):i18n.t("blockSetCurrentTime"))&&(configManager.setLocalStorage("enhance.blockSetCurrentTime",!configManager.get("enhance.blockSetCurrentTime")),window.location.reload())}},toggleSetVolumeFunctional:{title:()=>`${configManager.get("enhance.blockSetVolume")?i18n.t("unblockSetVolume"):i18n.t("blockSetVolume")} 「${i18n.t("localSetting")}」`,desc:()=>`${configManager.get("enhance.blockSetVolume")?i18n.t("unblockSetVolume"):i18n.t("blockSetVolume")} 「${i18n.t("localSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.blockSetVolume")?i18n.t("unblockSetVolume"):i18n.t("blockSetVolume"))&&(configManager.setLocalStorage("enhance.blockSetVolume",!configManager.get("enhance.blockSetVolume")),window.location.reload())}},toggleSetPlaybackRateFunctional:{title:()=>`${configManager.get("enhance.blockSetPlaybackRate")?i18n.t("unblockSetPlaybackRate"):i18n.t("blockSetPlaybackRate")} 「${i18n.t("globalSetting")}」`,desc:()=>`${configManager.get("enhance.blockSetPlaybackRate")?i18n.t("unblockSetPlaybackRate"):i18n.t("blockSetPlaybackRate")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.blockSetPlaybackRate")?i18n.t("unblockSetPlaybackRate"):i18n.t("blockSetPlaybackRate"))&&(configManager.setGlobalStorage("enhance.blockSetPlaybackRate",!configManager.get("enhance.blockSetPlaybackRate")),window.location.reload())}},toggleAcousticGainFunctional:{title:()=>`${configManager.get("enhance.allowAcousticGain")?i18n.t("notAllowAcousticGain"):i18n.t("allowAcousticGain")} 「${i18n.t("globalSetting")}」`,desc:()=>`${configManager.get("enhance.allowAcousticGain")?i18n.t("notAllowAcousticGain"):i18n.t("allowAcousticGain")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.allowAcousticGain")?i18n.t("notAllowAcousticGain"):i18n.t("allowAcousticGain"))&&(configManager.setGlobalStorage("enhance.allowAcousticGain",!configManager.getGlobalStorage("enhance.allowAcousticGain")),window.location.reload())}},toggleCrossOriginControlFunctional:{title:()=>`${configManager.get("enhance.allowCrossOriginControl")?i18n.t("notAllowCrossOriginControl"):i18n.t("allowCrossOriginControl")} 「${i18n.t("globalSetting")}」`,desc:()=>`${configManager.get("enhance.allowCrossOriginControl")?i18n.t("notAllowCrossOriginControl"):i18n.t("allowCrossOriginControl")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.allowCrossOriginControl")?i18n.t("notAllowCrossOriginControl"):i18n.t("allowCrossOriginControl"))&&(configManager.setGlobalStorage("enhance.allowCrossOriginControl",!configManager.getGlobalStorage("enhance.allowCrossOriginControl")),window.location.reload())}},toggleExperimentFeatures:{title:()=>`${configManager.get("enhance.allowExperimentFeatures")?i18n.t("notAllowExperimentFeatures"):i18n.t("allowExperimentFeatures")} 「${i18n.t("globalSetting")}」`,desc:()=>`${configManager.get("enhance.allowExperimentFeatures")?i18n.t("notAllowExperimentFeatures"):i18n.t("allowExperimentFeatures")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.allowExperimentFeatures")?i18n.t("notAllowExperimentFeatures"):i18n.t("experimentFeaturesWarning"))&&(configManager.setGlobalStorage("enhance.allowExperimentFeatures",!configManager.get("enhance.allowExperimentFeatures")),window.location.reload())}},toggleExternalCustomConfiguration:{title:()=>`${configManager.get("enhance.allowExternalCustomConfiguration")?i18n.t("notAllowExternalCustomConfiguration"):i18n.t("allowExternalCustomConfiguration")} 「${i18n.t("globalSetting")}」`,desc:()=>`${configManager.get("enhance.allowExternalCustomConfiguration")?i18n.t("notAllowExternalCustomConfiguration"):i18n.t("allowExternalCustomConfiguration")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.get("enhance.allowExternalCustomConfiguration")?i18n.t("notAllowExternalCustomConfiguration"):i18n.t("allowExternalCustomConfiguration"))&&(configManager.setGlobalStorage("enhance.allowExternalCustomConfiguration",!configManager.getGlobalStorage("enhance.allowExternalCustomConfiguration")),window.location.reload())}},toggleDebugMode:{title:()=>`${configManager.getGlobalStorage("debug")?i18n.t("closeDebugMode"):i18n.t("openDebugMode")} 「${i18n.t("globalSetting")}」`,desc:()=>`${configManager.getGlobalStorage("debug")?i18n.t("closeDebugMode"):i18n.t("openDebugMode")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(configManager.getGlobalStorage("debug")?i18n.t("closeDebugMode"):i18n.t("openDebugMode"))&&(configManager.setGlobalStorage("debug",!configManager.getGlobalStorage("debug")),window.location.reload())}},restoreGlobalConfiguration:{title:i18n.t("restoreConfiguration"),desc:i18n.t("restoreConfiguration"),fn:()=>{configManager.clear(),refreshPage()}},openCrossOriginFramePage:{title:i18n.t("openCrossOriginFramePage"),desc:i18n.t("openCrossOriginFramePage"),fn:()=>{openInTab(location.href)}},toggleGUIStatus:{title:()=>`${!1===configManager.getGlobalStorage("ui.enable")?i18n.t("enableGUI"):i18n.t("disableGUI")} 「${i18n.t("globalSetting")}」`,desc:()=>`${!1===configManager.getGlobalStorage("ui.enable")?i18n.t("enableGUI"):i18n.t("disableGUI")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getGlobalStorage("ui.enable")?i18n.t("enableGUI"):i18n.t("disableGUI")} 「${i18n.t("globalSetting")}」`)&&(configManager.setGlobalStorage("ui.enable",!configManager.getGlobalStorage("ui.enable")),window.location.reload())}},toggleGUIStatusUnderCurrentSite:{title:()=>`${!1===configManager.getLocalStorage("ui.enable")?i18n.t("enableGUI"):i18n.t("disableGUI")} 「${i18n.t("localSetting")}」`,desc:()=>`${!1===configManager.getLocalStorage("ui.enable")?i18n.t("enableGUI"):i18n.t("disableGUI")} 「${i18n.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getLocalStorage("ui.enable")?i18n.t("enableGUI"):i18n.t("disableGUI")} 「${i18n.t("localSetting")}」`)&&(configManager.setLocalStorage("ui.enable",!configManager.getLocalStorage("ui.enable")),window.location.reload())}},alwaysShowGraphicalInterface:{title:`${i18n.t("toggleStates")}${i18n.t("alwaysShowGraphicalInterface")} 「${i18n.t("globalSetting")}」`,desc:`${i18n.t("toggleStates")}${i18n.t("alwaysShowGraphicalInterface")} 「${i18n.t("globalSetting")}」`,fn:()=>{const e=configManager.getGlobalStorage("ui.alwaysShow");window.confirm(!0===e?`${i18n.t("disable")}${i18n.t("alwaysShowGraphicalInterface")} 「${i18n.t("globalSetting")}」`:`${i18n.t("alwaysShowGraphicalInterface")} 「${i18n.t("globalSetting")}」`)&&(configManager.setGlobalStorage("ui.alwaysShow",!e),window.location.reload())}},toggleHotkeysStatus:{title:()=>`${!1===configManager.getGlobalStorage("enableHotkeys")?i18n.t("enableHotkeys"):i18n.t("disableHotkeys")} 「${i18n.t("globalSetting")}」`,desc:()=>`${!1===configManager.getGlobalStorage("enableHotkeys")?i18n.t("enableHotkeys"):i18n.t("disableHotkeys")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getGlobalStorage("enableHotkeys")?i18n.t("enableHotkeys"):i18n.t("disableHotkeys")} 「${i18n.t("globalSetting")}」`)&&(configManager.setGlobalStorage("enableHotkeys",!configManager.getGlobalStorage("enableHotkeys")),window.location.reload())}},toggleHotkeysStatusUnderCurrentSite:{title:()=>`${!1===configManager.getLocalStorage("enableHotkeys")?i18n.t("enableHotkeys"):i18n.t("disableHotkeys")} 「${i18n.t("localSetting")}」`,desc:()=>`${!1===configManager.getLocalStorage("enableHotkeys")?i18n.t("enableHotkeys"):i18n.t("disableHotkeys")} 「${i18n.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getLocalStorage("enableHotkeys")?i18n.t("enableHotkeys"):i18n.t("disableHotkeys")} 「${i18n.t("localSetting")}」`)&&(configManager.setLocalStorage("enableHotkeys",!configManager.getLocalStorage("enableHotkeys")),window.location.reload())}},toggleMouseControl:{title:()=>`${!1===configManager.getGlobalStorage("mouse.enable")?i18n.t("mouse.enable"):i18n.t("mouse.disable")} 「${i18n.t("globalSetting")}」`,desc:()=>`${!1===configManager.getGlobalStorage("mouse.enable")?i18n.t("mouse.enable"):i18n.t("mouse.disable")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getGlobalStorage("mouse.enable")?i18n.t("mouse.enable"):i18n.t("mouse.disable")} 「${i18n.t("globalSetting")}」`)&&(configManager.setGlobalStorage("mouse.enable",!configManager.getGlobalStorage("mouse.enable")),window.location.reload())}},toggleMouseControlUnderCurrentSite:{title:()=>`${!1===configManager.getLocalStorage("mouse.enable")?i18n.t("mouse.enable"):i18n.t("mouse.disable")} 「${i18n.t("localSetting")}」`,desc:()=>`${!1===configManager.getLocalStorage("mouse.enable")?i18n.t("mouse.enable"):i18n.t("mouse.disable")} 「${i18n.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getLocalStorage("mouse.enable")?i18n.t("mouse.enable"):i18n.t("mouse.disable")} 「${i18n.t("localSetting")}」`)&&(configManager.setLocalStorage("mouse.enable",!configManager.getLocalStorage("mouse.enable")),window.location.reload())}},setMouseLongPressTime:{title:`${i18n.t("mouse.longPressTime")}「${i18n.t("globalSetting")}」`,desc:`${i18n.t("mouse.longPressTime")}「${i18n.t("globalSetting")}」`,fn:()=>{const e=prompt(`${i18n.t("mouse.longPressTime")}「${i18n.t("globalSetting")}」`,configManager.getGlobalStorage("mouse.longPressTime")||600);e&&(configManager.setGlobalStorage("mouse.longPressTime",Number(e)),window.location.reload())}},toggleDownloadControl:{title:()=>`${!1===configManager.getGlobalStorage("download.enable")?i18n.t("mediaDownload.enable"):i18n.t("mediaDownload.disable")} 「${i18n.t("globalSetting")}」`,desc:()=>`${!1===configManager.getGlobalStorage("download.enable")?i18n.t("mediaDownload.enable"):i18n.t("mediaDownload.disable")} 「${i18n.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getGlobalStorage("download.enable")?i18n.t("mediaDownload.enable"):i18n.t("mediaDownload.disable")} 「${i18n.t("globalSetting")}」`)&&(configManager.setGlobalStorage("download.enable",!configManager.getGlobalStorage("download.enable")),window.location.reload())}},toggleDownloadControlUnderCurrentSite:{title:()=>`${!1===configManager.getLocalStorage("download.enable")?i18n.t("mediaDownload.enable"):i18n.t("mediaDownload.disable")} 「${i18n.t("localSetting")}」`,desc:()=>`${!1===configManager.getLocalStorage("download.enable")?i18n.t("mediaDownload.enable"):i18n.t("mediaDownload.disable")} 「${i18n.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===configManager.getLocalStorage("download.enable")?i18n.t("mediaDownload.enable"):i18n.t("mediaDownload.disable")} 「${i18n.t("localSetting")}」`)&&(configManager.setLocalStorage("download.enable",!configManager.getLocalStorage("download.enable")),window.location.reload())}},setLanguage:{title:`${i18n.t("languageSettings")}「${i18n.t("globalSetting")}」`,desc:`${i18n.t("languageSettings")}「${i18n.t("globalSetting")}」`,fn:e=>{window.confirm(`${i18n.t("languageSettings")}[${e}] ?`)&&("auto"===e||i18n.languages()[e]?(configManager.setGlobalStorage("language",e),window.location.reload()):alert("Language not found"))}},cleanRemoteHelperInfo:{title:i18n.t("cleanRemoteHelperInfo"),desc:i18n.t("cleanRemoteHelperInfo"),fn:()=>{configManager.setGlobalStorage("recommendList",!1),configManager.setGlobalStorage("contactRemoteHelperSuccessTime",!1),configManager.setGlobalStorage("lastContactRemoteHelperTime",!1),window.location.reload()}}};let monkeyMenuList=[{...globalFunctional.openWebsite},{...globalFunctional.openIssuesPage,disable:!configManager.get("enhance.unfoldMenu")},{...globalFunctional.openDonatePage},{...globalFunctional.toggleScriptEnableState},{...globalFunctional.toggleGUIStatusUnderCurrentSite,disable:!1!==configManager.getLocalStorage("ui.enable")},{...globalFunctional.toggleGUIStatus,disable:!1!==configManager.getGlobalStorage("ui.enable")&&!configManager.get("enhance.unfoldMenu")},{...globalFunctional.toggleHotkeysStatusUnderCurrentSite,disable:!1!==configManager.getLocalStorage("enableHotkeys")},{...globalFunctional.toggleHotkeysStatus,disable:!1!==configManager.get("enableHotkeys")},{...globalFunctional.openCustomConfigurationEditor},{...globalFunctional.toggleExpandedOrCollapsedStateOfMonkeyMenu},{...globalFunctional.restoreGlobalConfiguration,disable:!configManager.get("enhance.unfoldMenu")}];function menuBuilder(){return monkeyMenuList}function menuRegister(){monkeyMenu.build(menuBuilder)}function addMenu(e,t){e=(e=Array.isArray(e)?e:[e]).filter((e=>e.title&&!e.disabled)),monkeyMenuList=t?e.concat(monkeyMenuList):monkeyMenuList.concat(e),menuRegister()}function registerH5playerMenus(e){const t=e,n=t.player(),o=!configManager.get("enhance.unfoldMenu");if(n&&!t._hasRegisterH5playerMenus_){const e=[{...globalFunctional.openCrossOriginFramePage,disable:o||!isInCrossOriginFrame()},{...globalFunctional.toggleSetCurrentTimeFunctional,type:"local",disable:o},{...globalFunctional.toggleSetVolumeFunctional,type:"local",disable:o},{...globalFunctional.toggleSetPlaybackRateFunctional,type:"global",disable:o},{...globalFunctional.toggleAcousticGainFunctional,type:"global",disable:o},{...globalFunctional.toggleCrossOriginControlFunctional,type:"global",disable:o},{...globalFunctional.toggleExperimentFeatures,type:"global",disable:o},{...globalFunctional.toggleExternalCustomConfiguration,type:"global",disable:o},{...globalFunctional.toggleDebugMode,disable:o}];let n="";isInIframe()&&(n=`[${location.hostname}]`,e.forEach((e=>{const t=e.title;t instanceof Function&&"local"===e.type&&(e.title=()=>n+t())}))),addMenu(e),t._hasRegisterH5playerMenus_=!0}}function proxyHTMLMediaElementEvent(){if(HTMLMediaElement.prototype._rawAddEventListener_)return!1;HTMLMediaElement.prototype._rawAddEventListener_=HTMLMediaElement.prototype.addEventListener,HTMLMediaElement.prototype._rawRemoveEventListener_=HTMLMediaElement.prototype.removeEventListener,HTMLMediaElement.prototype.addEventListener=new Proxy(HTMLMediaElement.prototype.addEventListener,{apply(e,t,n){const o=n[0],r=n[1];return r instanceof Function&&"ratechange"===o&&(n[1]=new Proxy(r,{apply(e,t,n){if(t&&t.playbackRate&&"ratechange"===o){if(t._hasBlockRatechangeEvent_)return!0;const i=t.playbackRate,a=Date.now(),s=e.apply(t,n),l=i!==t.playbackRate||Date.now()-a>1e3,c=t._setPlaybackRate_&&t._setPlaybackRate_.value!==t.playbackRate;return l||c?(debug.info(`[execVideoEvent][${o}]检测到可能存在阻止调速的行为，已禁止${o}事件的执行`,r),t._hasBlockRatechangeEvent_=!0,!0):s}try{return e.apply(t,n)}catch(e){debug.error(`[proxyPlayerEvent][${o}]`,r,e)}}})),e.apply(t,n)}})}const mediaSource=function(){let e=!1;const t={},n={},o=new original.Map,r=new original.Map;function i(e,t){const n=e.currentSrc||e.src;if(!n)return original.alert(i18n.t("mediaDownload.notSupport")),!1;let r=!1;o.forEach((o=>{const i=o.mediaSource;if(!i.__objURL__)return console.error("no objURL",i,o),!1;if(n!==i.__objURL__)return!1;if(r=!0,o.mediaElement=e,o.hasDownload){if(!original.confirm(i18n.t("mediaDownload.hasDownload")))return!1}if(!o.hasDownload&&!o.endOfStream){if(!original.confirm(i18n.t("mediaDownload.notEndOfStream"))){if(o.autoDownload){original.confirm(i18n.t("mediaDownload.cancelAutoDownload"))&&(o.autoDownload=!1)}else{original.confirm(i18n.t("mediaDownload.autoDownload"))&&(o.autoDownload=!0)}return!1}}let a=null;o.sourceBuffer.forEach((n=>{if(!n.mimeCodecs||-1===n.mimeCodecs.toString().indexOf(";")){const e="[downloadMediaSource][mimeCodecs][error] mimeCodecs不存在或信息异常，无法下载";return original.console.error(e,n),original.alert(e),!1}try{let r=`${a||n.mediaInfo.title||t||e.getAttribute("data-title")||document.title||Date.now()}`;if(!a&&!n.mediaInfo.title){if(r=original.prompt(i18n.t("mediaDownload.confirmTitle"),r),!r)return!1;n.mediaInfo.title=r}a=r,r=`${r}_${n.mediaInfo.type}.${n.mediaInfo.format}`;const i=document.createElement("a");i.href=URL.createObjectURL(new Blob(n.bufferData)),i.download=r,i.click(),URL.revokeObjectURL(i.href),o.hasDownload=!0}catch(e){o.hasDownload=!1;const t="[downloadMediaSource][error]";original.console.error(t,e),original.alert(t)}}))})),r||original.alert(i18n.t("mediaDownload.notFoundMediaSource"))}return{init:function(){return!e&&(!!window.MediaSource&&(Object.keys(MediaSource.prototype).forEach((e=>{try{MediaSource.prototype[e]instanceof Function&&(t[e]=MediaSource.prototype[e])}catch(e){}})),function(){if(!t.addSourceBuffer||!t.endOfStream)return!1;n.createObjectURL=n.createObjectURL||URL.prototype.constructor.createObjectURL,URL.prototype.constructor.createObjectURL=new original.Proxy(n.createObjectURL,{apply(e,t,n){const o=n[0],i=e.apply(t,n);return o instanceof MediaSource&&!original.map.has.call(r,o)&&(o.__objURL__=i,original.map.set.call(r,o,i)),i}}),MediaSource.prototype.addSourceBuffer=new original.Proxy(t.addSourceBuffer,{apply(e,t,n){original.map.has.call(o,t)||original.map.set.call(o,t,{mediaSource:t,createTime:Date.now(),sourceBuffer:[],endOfStream:!1});const i=original.map.get.call(o,t),a=n[0]||"",s=e.apply(t,n),l={mimeCodecs:a,originAppendBuffer:s.appendBuffer,bufferData:[],mediaInfo:{}};try{const e=l.mediaInfo,t=l.mimeCodecs.split(";");e.type=t[0].split("/")[0],e.format=t[0].split("/")[1],e.codecs=t[1].trim().replace("codecs=","").replace(/["']/g,"")}catch(e){original.console.error("[addSourceBuffer][mediaInfo] 媒体信息解析出错",l,e)}return i.sourceBuffer.push(l),s.appendBuffer=new original.Proxy(l.originAppendBuffer,{apply(e,n,a){const s=a[0];return i.endOfStream||l.bufferData.push(s),original.map.get.call(r,t)&&(i.mediaUrl=original.map.get.call(r,t)),original.map.get.call(o,t)||original.map.set.call(o,t,i),e.apply(n,a)}}),s}}),MediaSource.prototype.endOfStream=new original.Proxy(t.endOfStream,{apply(e,t,n){const r=original.map.get.call(o,t);return r&&(r.endOfStream=!0,r.mediaElement&&r.autoDownload&&!r.hasDownload&&i(r.mediaElement)),e.apply(t,n)}})}(),void(e=!0)))},hasInit:function(){return e},originMethods:t,originURLMethods:n,mediaSourceMap:o,objectURLMap:r,downloadMediaSource:i,cleanMediaSourceData:function(){function e(e){console.log("[cleanMediaSourceData][removeMediaSourceData]",e.mediaUrl||e.mediaSource.__objURL__),original.map.delete.call(o,e.mediaSource),original.map.delete.call(r,e.mediaSource)}o.forEach((t=>{t.mediaElement&&t.mediaElement instanceof HTMLMediaElement?isOutOfDocument(t.mediaElement)&&e(t):e(t)}))},connectMediaSourceWithMediaElement:function(e){const t=e.currentSrc||e.src;if(!t)return!1;o.forEach((n=>{n.mediaSource.__objURL__&&t===n.mediaSource.__objURL__&&(n.mediaElement=e)}))}}}(),Map$1=window.Map,WeakMap$1=window.WeakMap;function isObj(e){return"[object Object]"===Object.prototype.toString.call(e)}function getValByPath(e,t){const n=(t=t||"").split(".");let o=e;for(let e=0;e<n.length&&o;e++)o=o[n[e]];return o}function toArrArgs(e){return Array.isArray(e)?e:void 0===e?[]:[e]}function isModifierKey(e){return["ctrl","controlleft","controlright","shift","shiftleft","shiftright","alt","altleft","altright","meta","metaleft","metaright","capsLock"].includes(e.toLowerCase())}const keyAlias={ControlLeft:"ctrl",ControlRight:"ctrl",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta"},combinationKeysMonitor=function(){const e=new Map$1,t=new WeakMap$1;return{combinationKeysState:e,getCombinationKeys:function(){const t=new Map$1;return e.forEach(((e,n)=>{!0===e&&t.set(n,e)})),t},init:function(n=window){if(!n||n!==n.self||!n.addEventListener||t.get(n))return!1;const o={};function r(t){isModifierKey(t.code)&&e.set(t.code,!0)}function i(t){if(!(t instanceof KeyboardEvent))return e.forEach(((t,n)=>{e.set(n,!1)})),!0;isModifierKey(t.code)&&(clearTimeout(o[t.code]),o[t.code]=setTimeout((()=>{e.set(t.code,!1)}),50))}n.addEventListener("keydown",r,!0),n.addEventListener("keypress",r,!0),n.addEventListener("keyup",i,!0),n.addEventListener("blur",i,!0),t.set(n,!0)}}}();class HotkeysRunner{constructor(e,t=window){this.window=t,this.windowList=[t],this.MOD="object"==typeof navigator&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Meta":"Ctrl",this.prevPress=null,this._prevTimer_=null,this.setHotkeys(e),combinationKeysMonitor.init(t)}setCombinationKeysMonitor(e){this.window=e,this.windowList.includes(e)||this.windowList.push(e),combinationKeysMonitor.init(e)}hotkeysPreprocess(e){return!!Array.isArray(e)&&(e.forEach((e=>{if(!isObj(e)||!e.key||"string"!=typeof e.key)return!1;const t=e.key.trim().toLowerCase(),n=this.MOD.toLowerCase();e.keyBindings=t.split(" ").map((e=>{const t=e.split(/\b\+/),o=[];let r="";return t.forEach((e=>{isModifierKey(e="$mod"===e?n:e)?o.push(e):r=e})),[o,r]}))})),e)}setHotkeys(e){this.hotkeys=this.hotkeysPreprocess(e)||[]}isMatch(e,t){if(!e||!Array.isArray(t))return!1;const n=e.combinationKeys||combinationKeysMonitor.getCombinationKeys(),o=t[0],r=t[1];if(o.length!==n.size)return!1;if(r&&e.key.toLowerCase()!==r&&e.code.toLowerCase()!==r)return!1;let i=!0;const a=new Map$1;return n.forEach(((e,t)=>{a.set(t,e),a.set(t.toLowerCase(),e),keyAlias[t]&&a.set(keyAlias[t],e)})),o.forEach((e=>{a.has(e)||(i=!1)})),i}isMatchPrevPress(e){return this.isMatch(this.prevPress,e)}run(e={}){const t=this.windowList.map((e=>e.KeyboardEvent));if(!t.includes(e.event.constructor))return!1;const n=e.event,o=e.target||null,r=e.conditionHandler||e.whenHandler;let i=null;return this.hotkeys.forEach((t=>{if(t.disabled||!t.keyBindings)return!1;let a=t.keyBindings[0];if(this.prevPress&&(t.keyBindings.length<=1||!this.isMatchPrevPress(a)))return!1;this.prevPress&&t.keyBindings.length>1&&this.isMatchPrevPress(a)&&(a=t.keyBindings[1]);if(!this.isMatch(n,a))return!1;i=t;const s=e.stopPropagation||t.stopPropagation,l=e.preventDefault||t.preventDefault;if(s&&n.stopPropagation(),l&&n.preventDefault(),a===t.keyBindings[0]&&t.keyBindings.length>1)return this.prevPress={combinationKeys:combinationKeysMonitor.getCombinationKeys(),code:n.code,key:n.key,keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey},clearTimeout(this._prevTimer_),this._prevTimer_=setTimeout((()=>{this.prevPress=null}),1e3),!0;t.keyBindings.length>1&&a!==t.keyBindings[0]&&setTimeout((()=>{this.prevPress=null}),0);const c=toArrArgs(t.args);let u=t.command;if(o&&"string"==typeof t.command&&(u=getValByPath(o,t.command)),!(u instanceof Function)&&o)throw new Error(`[hotkeysRunner] 未找到command: ${t.command} 对应的函数`);if(t.when&&r instanceof Function){!0===r.apply(o,toArrArgs(t.when))&&u.apply(o,c)}else u.apply(o,c)})),i}binding(e={}){if(!isObj(e)||!Array.isArray(e.hotkeys))throw new Error("[hotkeysRunner] 提供给binding的参数不正确");e.el=e.el||this.window,e.type=e.type||"keydown",e.debug&&(this.debug=!0),this.setHotkeys(e.hotkeys),"string"==typeof e.el&&(e.el=document.querySelector(e.el)),e.el.addEventListener(e.type,(t=>{e.event=t,this.run(e)}),!0)}}function MediaElementAmplifier(e){this._context=new(window.AudioContext||window.webkitAudioContext),this._source=this._context.createMediaElementSource(this._element=e),this._source.connect(this._gain=this._context.createGain()),this._gain.connect(this._context.destination)}["getContext","getSource","getGain","getElement",["getVolume",function(e){return(e?this.getLoudness():1)*this._element.volume}],["setVolume",function(e,t){var n=e/(t?this.getLoudness():1);n>1&&(this.setLoudness(this.getLoudness()*n),n=1),this._element.volume=n}],["getGainValue",function(){return this._gain.gain.value}],["setGainValue",function(e){this._gain.gain.value=e}],["getDecibels",function(){return 20*Math.log10(this.getGainValue())}],["setDecibels",function(e){this.setGainValue(Math.pow(10,e/20))}],["getLoudness",function(){return Math.pow(2,this.getDecibels()/10)}],["setLoudness",function(e){this.setDecibels(10*Math.log2(e))}]].forEach((function(e,t){"string"==typeof e?t=function(){return this[e.replace("get","").toLowerCase()]}:(t=e[1],e=e[0]),MediaElementAmplifier.prototype[e]=t}));const downloadState=new Map;function download(e,t){const n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,n.click()}function mediaDownload(e,t,n){const o=e.src||e.currentSrc,r=downloadState.get(o)||{};if(e&&o&&!o.startsWith("blob:")){const i={type:e instanceof HTMLVideoElement?"video":"audio",format:e instanceof HTMLVideoElement?"mp4":"mp3"};let a=`${t||e.getAttribute("data-title")||document.title||Date.now()}_${i.type}.${i.format}`;if("blob"===n||e.duration<300){if(r.downloading){if(Date.now()-r.downloading<1e3)return!1;if(!original.confirm(i18n.t("mediaDownload.downloading")))return!1}if(r.hasDownload){if(!original.confirm(i18n.t("mediaDownload.hasDownload")))return!1}if(a=original.prompt(i18n.t("mediaDownload.confirmTitle"),a),!a)return!1;a.endsWith(i.format)||(a=a+"."+i.format);let e=o;o.startsWith("http://")&&location.href.startsWith("https://")&&(e=o.replace("http://","https://")),r.downloading=Date.now(),downloadState.set(o,r),fetch(e).then((e=>{e.blob().then((e=>{const t=window.URL.createObjectURL(e);download(t,a),r.hasDownload=!0,delete r.downloading,downloadState.set(o,r),window.URL.revokeObjectURL(t)}))})).catch((e=>{original.console.error("fetch下载操作失败:",e),download(o,a),delete r.downloading,r.hasDownload=!0,downloadState.set(o,r)}))}else download(o,a)}else mediaSource.hasInit()?mediaSource.downloadMediaSource(e,t):original.alert(i18n.t("mediaDownload.notSupport"))}const device={isMobile:()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isTablet:()=>/iPad/i.test(navigator.userAgent),isDesktop:()=>!device.isMobile()&&!device.isTablet(),isChrome:()=>/Chrome/i.test(navigator.userAgent),isFirefox:()=>/Firefox/i.test(navigator.userAgent),isSafari:()=>/Safari/i.test(navigator.userAgent),isEdge:()=>/Edge/i.test(navigator.userAgent)},h5playerUIProvider={version:"4.2.7",originalMethods:originalMethods,parseHTML:parseHTML,observeVisibility:observeVisibility,isOutOfDocument:isOutOfDocument,i18n:i18n,debug:debug,configManager:configManager,globalFunctional:globalFunctional,device:device},windowSandbox=new Proxy({},{get:function(e,t){return"h5playerUIProvider"===t?h5playerUIProvider:"HTMLElement"===t?originalMethods.HTMLElement:window[t]}}),remoteHelperUrl="https://h5player.anzz.top/h5p-helper/index.html",remoteHelper={init(){if(this.remoteHandler(),isInIframe())return!1;if(!configManager.isGlobalStorageUsable())return!1;const e=configManager.getGlobalStorage("contactRemoteHelperSuccessTime");let t=configManager.getGlobalStorage("lastContactRemoteHelperTime");t||(configManager.setGlobalStorage("lastContactRemoteHelperTime",Date.now()),t=Date.now());const n=configManager.getGlobalStorage("remoteHelperSyncInterval")||432e5;return!(e&&Date.now()-e<n)&&(!(Date.now()-t<6e4)&&void this.establishRemoteConnection())},establishRemoteConnection(){const e=configManager.getGlobalStorage("contactRemoteHelperSuccessTime")||"0",t=(new Date).toISOString().split("T")[0].replace(/-/g,"")+(new Date).getHours()+""+(new Date).getMinutes(),n=document.createElement("iframe");n.src=`${remoteHelperUrl}?t=${t}&v=4.2.7&lst=${e}`,n.style.cssText="width:0; height:0; border:none; visibility:hidden; opacity:0;";const o=()=>{document.body.appendChild(n),configManager.setGlobalStorage("lastContactRemoteHelperTime",Date.now())};document.body&&document.body.appendChild?o():window.addEventListener("DOMContentLoaded",o,{once:!0}),setTimeout((()=>{document.body.removeChild(n)}),1e4)},async remoteHandler(){if(!location.href.startsWith(remoteHelperUrl)||!configManager.isGlobalStorageUsable())return!1;let e=0;const t=await getPageWindow();t&&function t(n){Array.isArray(n.recommendList)?function(e){e.recommendList&&configManager.setGlobalStorage("recommendList",e.recommendList),e.remoteVersion&&configManager.setGlobalStorage("remoteVersion",e.remoteVersion),e.remoteHelperSyncInterval&&configManager.setGlobalStorage("remoteHelperSyncInterval",e.remoteHelperSyncInterval),configManager.setGlobalStorage("contactRemoteHelperSuccessTime",Date.now())}(n):e<30&&setTimeout((()=>{e++,t(n)}),200)}(t)}};function registerMouseEvent(e){const t=e,n=configManager.get("mouse.longPressTime")||600;let o=null,r=!1,i=!1,a=1;document.addEventListener("mousedown",(function(e){const s=t.player();if(!(s&&s instanceof HTMLVideoElement))return;if(i=s.paused,!isCoordinateInElement(e.clientX,e.clientY,s))return;const l=s.getBoundingClientRect();e.clientY>l.bottom-80||0===e.button&&(o=setTimeout((()=>{r=!0,a=t.getPlaybackRate(),t.unLockPlaybackRate(),t.setPlaybackRate(3),t.lockPlaybackRate(800),e.preventDefault(),e.stopPropagation()}),n))}),!0),document.addEventListener("mouseup",(function(e){o&&clearTimeout(o),r&&(r=!1,e.preventDefault(),e.stopPropagation(),i?t.mediaPlusApi.lockPlay(600):t.mediaPlusApi.lockPause(600),t.unLockPlaybackRate(),t.setPlaybackRate(a),t.lockPlaybackRate(800))}),!0)}const h5playerUI=function(e){var t=function(){const t=new CSSStyleSheet;t.replaceSync(':root,\n:host,\n.sl-theme-light {\n  color-scheme: light;\n\n  --sl-color-gray-50: hsl(0 0% 97.5%);\n  --sl-color-gray-100: hsl(240 4.8% 95.9%);\n  --sl-color-gray-200: hsl(240 5.9% 90%);\n  --sl-color-gray-300: hsl(240 4.9% 83.9%);\n  --sl-color-gray-400: hsl(240 5% 64.9%);\n  --sl-color-gray-500: hsl(240 3.8% 46.1%);\n  --sl-color-gray-600: hsl(240 5.2% 33.9%);\n  --sl-color-gray-700: hsl(240 5.3% 26.1%);\n  --sl-color-gray-800: hsl(240 3.7% 15.9%);\n  --sl-color-gray-900: hsl(240 5.9% 10%);\n  --sl-color-gray-950: hsl(240 7.3% 8%);\n\n  --sl-color-red-50: hsl(0 85.7% 97.3%);\n  --sl-color-red-100: hsl(0 93.3% 94.1%);\n  --sl-color-red-200: hsl(0 96.3% 89.4%);\n  --sl-color-red-300: hsl(0 93.5% 81.8%);\n  --sl-color-red-400: hsl(0 90.6% 70.8%);\n  --sl-color-red-500: hsl(0 84.2% 60.2%);\n  --sl-color-red-600: hsl(0 72.2% 50.6%);\n  --sl-color-red-700: hsl(0 73.7% 41.8%);\n  --sl-color-red-800: hsl(0 70% 35.3%);\n  --sl-color-red-900: hsl(0 62.8% 30.6%);\n  --sl-color-red-950: hsl(0 60% 19.6%);\n\n  --sl-color-orange-50: hsl(33.3 100% 96.5%);\n  --sl-color-orange-100: hsl(34.3 100% 91.8%);\n  --sl-color-orange-200: hsl(32.1 97.7% 83.1%);\n  --sl-color-orange-300: hsl(30.7 97.2% 72.4%);\n  --sl-color-orange-400: hsl(27 96% 61%);\n  --sl-color-orange-500: hsl(24.6 95% 53.1%);\n  --sl-color-orange-600: hsl(20.5 90.2% 48.2%);\n  --sl-color-orange-700: hsl(17.5 88.3% 40.4%);\n  --sl-color-orange-800: hsl(15 79.1% 33.7%);\n  --sl-color-orange-900: hsl(15.3 74.6% 27.8%);\n  --sl-color-orange-950: hsl(15.2 69.1% 19%);\n\n  --sl-color-amber-50: hsl(48 100% 96.1%);\n  --sl-color-amber-100: hsl(48 96.5% 88.8%);\n  --sl-color-amber-200: hsl(48 96.6% 76.7%);\n  --sl-color-amber-300: hsl(45.9 96.7% 64.5%);\n  --sl-color-amber-400: hsl(43.3 96.4% 56.3%);\n  --sl-color-amber-500: hsl(37.7 92.1% 50.2%);\n  --sl-color-amber-600: hsl(32.1 94.6% 43.7%);\n  --sl-color-amber-700: hsl(26 90.5% 37.1%);\n  --sl-color-amber-800: hsl(22.7 82.5% 31.4%);\n  --sl-color-amber-900: hsl(21.7 77.8% 26.5%);\n  --sl-color-amber-950: hsl(22.9 74.1% 16.7%);\n\n  --sl-color-yellow-50: hsl(54.5 91.7% 95.3%);\n  --sl-color-yellow-100: hsl(54.9 96.7% 88%);\n  --sl-color-yellow-200: hsl(52.8 98.3% 76.9%);\n  --sl-color-yellow-300: hsl(50.4 97.8% 63.5%);\n  --sl-color-yellow-400: hsl(47.9 95.8% 53.1%);\n  --sl-color-yellow-500: hsl(45.4 93.4% 47.5%);\n  --sl-color-yellow-600: hsl(40.6 96.1% 40.4%);\n  --sl-color-yellow-700: hsl(35.5 91.7% 32.9%);\n  --sl-color-yellow-800: hsl(31.8 81% 28.8%);\n  --sl-color-yellow-900: hsl(28.4 72.5% 25.7%);\n  --sl-color-yellow-950: hsl(33.1 69% 13.9%);\n\n  --sl-color-lime-50: hsl(78.3 92% 95.1%);\n  --sl-color-lime-100: hsl(79.6 89.1% 89.2%);\n  --sl-color-lime-200: hsl(80.9 88.5% 79.6%);\n  --sl-color-lime-300: hsl(82 84.5% 67.1%);\n  --sl-color-lime-400: hsl(82.7 78% 55.5%);\n  --sl-color-lime-500: hsl(83.7 80.5% 44.3%);\n  --sl-color-lime-600: hsl(84.8 85.2% 34.5%);\n  --sl-color-lime-700: hsl(85.9 78.4% 27.3%);\n  --sl-color-lime-800: hsl(86.3 69% 22.7%);\n  --sl-color-lime-900: hsl(87.6 61.2% 20.2%);\n  --sl-color-lime-950: hsl(86.5 60.6% 13.9%);\n\n  --sl-color-green-50: hsl(138.5 76.5% 96.7%);\n  --sl-color-green-100: hsl(140.6 84.2% 92.5%);\n  --sl-color-green-200: hsl(141 78.9% 85.1%);\n  --sl-color-green-300: hsl(141.7 76.6% 73.1%);\n  --sl-color-green-400: hsl(141.9 69.2% 58%);\n  --sl-color-green-500: hsl(142.1 70.6% 45.3%);\n  --sl-color-green-600: hsl(142.1 76.2% 36.3%);\n  --sl-color-green-700: hsl(142.4 71.8% 29.2%);\n  --sl-color-green-800: hsl(142.8 64.2% 24.1%);\n  --sl-color-green-900: hsl(143.8 61.2% 20.2%);\n  --sl-color-green-950: hsl(144.3 60.7% 12%);\n\n  --sl-color-emerald-50: hsl(151.8 81% 95.9%);\n  --sl-color-emerald-100: hsl(149.3 80.4% 90%);\n  --sl-color-emerald-200: hsl(152.4 76% 80.4%);\n  --sl-color-emerald-300: hsl(156.2 71.6% 66.9%);\n  --sl-color-emerald-400: hsl(158.1 64.4% 51.6%);\n  --sl-color-emerald-500: hsl(160.1 84.1% 39.4%);\n  --sl-color-emerald-600: hsl(161.4 93.5% 30.4%);\n  --sl-color-emerald-700: hsl(162.9 93.5% 24.3%);\n  --sl-color-emerald-800: hsl(163.1 88.1% 19.8%);\n  --sl-color-emerald-900: hsl(164.2 85.7% 16.5%);\n  --sl-color-emerald-950: hsl(164.3 87.5% 9.4%);\n\n  --sl-color-teal-50: hsl(166.2 76.5% 96.7%);\n  --sl-color-teal-100: hsl(167.2 85.5% 89.2%);\n  --sl-color-teal-200: hsl(168.4 83.8% 78.2%);\n  --sl-color-teal-300: hsl(170.6 76.9% 64.3%);\n  --sl-color-teal-400: hsl(172.5 66% 50.4%);\n  --sl-color-teal-500: hsl(173.4 80.4% 40%);\n  --sl-color-teal-600: hsl(174.7 83.9% 31.6%);\n  --sl-color-teal-700: hsl(175.3 77.4% 26.1%);\n  --sl-color-teal-800: hsl(176.1 69.4% 21.8%);\n  --sl-color-teal-900: hsl(175.9 60.8% 19%);\n  --sl-color-teal-950: hsl(176.5 58.6% 11.4%);\n\n  --sl-color-cyan-50: hsl(183.2 100% 96.3%);\n  --sl-color-cyan-100: hsl(185.1 95.9% 90.4%);\n  --sl-color-cyan-200: hsl(186.2 93.5% 81.8%);\n  --sl-color-cyan-300: hsl(187 92.4% 69%);\n  --sl-color-cyan-400: hsl(187.9 85.7% 53.3%);\n  --sl-color-cyan-500: hsl(188.7 94.5% 42.7%);\n  --sl-color-cyan-600: hsl(191.6 91.4% 36.5%);\n  --sl-color-cyan-700: hsl(192.9 82.3% 31%);\n  --sl-color-cyan-800: hsl(194.4 69.6% 27.1%);\n  --sl-color-cyan-900: hsl(196.4 63.6% 23.7%);\n  --sl-color-cyan-950: hsl(196.8 61% 16.1%);\n\n  --sl-color-sky-50: hsl(204 100% 97.1%);\n  --sl-color-sky-100: hsl(204 93.8% 93.7%);\n  --sl-color-sky-200: hsl(200.6 94.4% 86.1%);\n  --sl-color-sky-300: hsl(199.4 95.5% 73.9%);\n  --sl-color-sky-400: hsl(198.4 93.2% 59.6%);\n  --sl-color-sky-500: hsl(198.6 88.7% 48.4%);\n  --sl-color-sky-600: hsl(200.4 98% 39.4%);\n  --sl-color-sky-700: hsl(201.3 96.3% 32.2%);\n  --sl-color-sky-800: hsl(201 90% 27.5%);\n  --sl-color-sky-900: hsl(202 80.3% 23.9%);\n  --sl-color-sky-950: hsl(202.3 73.8% 16.5%);\n\n  --sl-color-blue-50: hsl(213.8 100% 96.9%);\n  --sl-color-blue-100: hsl(214.3 94.6% 92.7%);\n  --sl-color-blue-200: hsl(213.3 96.9% 87.3%);\n  --sl-color-blue-300: hsl(211.7 96.4% 78.4%);\n  --sl-color-blue-400: hsl(213.1 93.9% 67.8%);\n  --sl-color-blue-500: hsl(217.2 91.2% 59.8%);\n  --sl-color-blue-600: hsl(221.2 83.2% 53.3%);\n  --sl-color-blue-700: hsl(224.3 76.3% 48%);\n  --sl-color-blue-800: hsl(225.9 70.7% 40.2%);\n  --sl-color-blue-900: hsl(224.4 64.3% 32.9%);\n  --sl-color-blue-950: hsl(226.2 55.3% 18.4%);\n\n  --sl-color-indigo-50: hsl(225.9 100% 96.7%);\n  --sl-color-indigo-100: hsl(226.5 100% 93.9%);\n  --sl-color-indigo-200: hsl(228 96.5% 88.8%);\n  --sl-color-indigo-300: hsl(229.7 93.5% 81.8%);\n  --sl-color-indigo-400: hsl(234.5 89.5% 73.9%);\n  --sl-color-indigo-500: hsl(238.7 83.5% 66.7%);\n  --sl-color-indigo-600: hsl(243.4 75.4% 58.6%);\n  --sl-color-indigo-700: hsl(244.5 57.9% 50.6%);\n  --sl-color-indigo-800: hsl(243.7 54.5% 41.4%);\n  --sl-color-indigo-900: hsl(242.2 47.4% 34.3%);\n  --sl-color-indigo-950: hsl(243.5 43.6% 22.9%);\n\n  --sl-color-violet-50: hsl(250 100% 97.6%);\n  --sl-color-violet-100: hsl(251.4 91.3% 95.5%);\n  --sl-color-violet-200: hsl(250.5 95.2% 91.8%);\n  --sl-color-violet-300: hsl(252.5 94.7% 85.1%);\n  --sl-color-violet-400: hsl(255.1 91.7% 76.3%);\n  --sl-color-violet-500: hsl(258.3 89.5% 66.3%);\n  --sl-color-violet-600: hsl(262.1 83.3% 57.8%);\n  --sl-color-violet-700: hsl(263.4 70% 50.4%);\n  --sl-color-violet-800: hsl(263.4 69.3% 42.2%);\n  --sl-color-violet-900: hsl(263.5 67.4% 34.9%);\n  --sl-color-violet-950: hsl(265.1 61.5% 21.4%);\n\n  --sl-color-purple-50: hsl(270 100% 98%);\n  --sl-color-purple-100: hsl(268.7 100% 95.5%);\n  --sl-color-purple-200: hsl(268.6 100% 91.8%);\n  --sl-color-purple-300: hsl(269.2 97.4% 85.1%);\n  --sl-color-purple-400: hsl(270 95.2% 75.3%);\n  --sl-color-purple-500: hsl(270.7 91% 65.1%);\n  --sl-color-purple-600: hsl(271.5 81.3% 55.9%);\n  --sl-color-purple-700: hsl(272.1 71.7% 47.1%);\n  --sl-color-purple-800: hsl(272.9 67.2% 39.4%);\n  --sl-color-purple-900: hsl(273.6 65.6% 32%);\n  --sl-color-purple-950: hsl(276 59.5% 16.5%);\n\n  --sl-color-fuchsia-50: hsl(289.1 100% 97.8%);\n  --sl-color-fuchsia-100: hsl(287 100% 95.5%);\n  --sl-color-fuchsia-200: hsl(288.3 95.8% 90.6%);\n  --sl-color-fuchsia-300: hsl(291.1 93.1% 82.9%);\n  --sl-color-fuchsia-400: hsl(292 91.4% 72.5%);\n  --sl-color-fuchsia-500: hsl(292.2 84.1% 60.6%);\n  --sl-color-fuchsia-600: hsl(293.4 69.5% 48.8%);\n  --sl-color-fuchsia-700: hsl(294.7 72.4% 39.8%);\n  --sl-color-fuchsia-800: hsl(295.4 70.2% 32.9%);\n  --sl-color-fuchsia-900: hsl(296.7 63.6% 28%);\n  --sl-color-fuchsia-950: hsl(297.1 56.8% 14.5%);\n\n  --sl-color-pink-50: hsl(327.3 73.3% 97.1%);\n  --sl-color-pink-100: hsl(325.7 77.8% 94.7%);\n  --sl-color-pink-200: hsl(325.9 84.6% 89.8%);\n  --sl-color-pink-300: hsl(327.4 87.1% 81.8%);\n  --sl-color-pink-400: hsl(328.6 85.5% 70.2%);\n  --sl-color-pink-500: hsl(330.4 81.2% 60.4%);\n  --sl-color-pink-600: hsl(333.3 71.4% 50.6%);\n  --sl-color-pink-700: hsl(335.1 77.6% 42%);\n  --sl-color-pink-800: hsl(335.8 74.4% 35.3%);\n  --sl-color-pink-900: hsl(335.9 69% 30.4%);\n  --sl-color-pink-950: hsl(336.2 65.4% 15.9%);\n\n  --sl-color-rose-50: hsl(355.7 100% 97.3%);\n  --sl-color-rose-100: hsl(355.6 100% 94.7%);\n  --sl-color-rose-200: hsl(352.7 96.1% 90%);\n  --sl-color-rose-300: hsl(352.6 95.7% 81.8%);\n  --sl-color-rose-400: hsl(351.3 94.5% 71.4%);\n  --sl-color-rose-500: hsl(349.7 89.2% 60.2%);\n  --sl-color-rose-600: hsl(346.8 77.2% 49.8%);\n  --sl-color-rose-700: hsl(345.3 82.7% 40.8%);\n  --sl-color-rose-800: hsl(343.4 79.7% 34.7%);\n  --sl-color-rose-900: hsl(341.5 75.5% 30.4%);\n  --sl-color-rose-950: hsl(341.3 70.1% 17.1%);\n\n  --sl-color-primary-50: var(--sl-color-sky-50);\n  --sl-color-primary-100: var(--sl-color-sky-100);\n  --sl-color-primary-200: var(--sl-color-sky-200);\n  --sl-color-primary-300: var(--sl-color-sky-300);\n  --sl-color-primary-400: var(--sl-color-sky-400);\n  --sl-color-primary-500: var(--sl-color-sky-500);\n  --sl-color-primary-600: var(--sl-color-sky-600);\n  --sl-color-primary-700: var(--sl-color-sky-700);\n  --sl-color-primary-800: var(--sl-color-sky-800);\n  --sl-color-primary-900: var(--sl-color-sky-900);\n  --sl-color-primary-950: var(--sl-color-sky-950);\n\n  --sl-color-success-50: var(--sl-color-green-50);\n  --sl-color-success-100: var(--sl-color-green-100);\n  --sl-color-success-200: var(--sl-color-green-200);\n  --sl-color-success-300: var(--sl-color-green-300);\n  --sl-color-success-400: var(--sl-color-green-400);\n  --sl-color-success-500: var(--sl-color-green-500);\n  --sl-color-success-600: var(--sl-color-green-600);\n  --sl-color-success-700: var(--sl-color-green-700);\n  --sl-color-success-800: var(--sl-color-green-800);\n  --sl-color-success-900: var(--sl-color-green-900);\n  --sl-color-success-950: var(--sl-color-green-950);\n\n  --sl-color-warning-50: var(--sl-color-amber-50);\n  --sl-color-warning-100: var(--sl-color-amber-100);\n  --sl-color-warning-200: var(--sl-color-amber-200);\n  --sl-color-warning-300: var(--sl-color-amber-300);\n  --sl-color-warning-400: var(--sl-color-amber-400);\n  --sl-color-warning-500: var(--sl-color-amber-500);\n  --sl-color-warning-600: var(--sl-color-amber-600);\n  --sl-color-warning-700: var(--sl-color-amber-700);\n  --sl-color-warning-800: var(--sl-color-amber-800);\n  --sl-color-warning-900: var(--sl-color-amber-900);\n  --sl-color-warning-950: var(--sl-color-amber-950);\n\n  --sl-color-danger-50: var(--sl-color-red-50);\n  --sl-color-danger-100: var(--sl-color-red-100);\n  --sl-color-danger-200: var(--sl-color-red-200);\n  --sl-color-danger-300: var(--sl-color-red-300);\n  --sl-color-danger-400: var(--sl-color-red-400);\n  --sl-color-danger-500: var(--sl-color-red-500);\n  --sl-color-danger-600: var(--sl-color-red-600);\n  --sl-color-danger-700: var(--sl-color-red-700);\n  --sl-color-danger-800: var(--sl-color-red-800);\n  --sl-color-danger-900: var(--sl-color-red-900);\n  --sl-color-danger-950: var(--sl-color-red-950);\n\n  --sl-color-neutral-50: var(--sl-color-gray-50);\n  --sl-color-neutral-100: var(--sl-color-gray-100);\n  --sl-color-neutral-200: var(--sl-color-gray-200);\n  --sl-color-neutral-300: var(--sl-color-gray-300);\n  --sl-color-neutral-400: var(--sl-color-gray-400);\n  --sl-color-neutral-500: var(--sl-color-gray-500);\n  --sl-color-neutral-600: var(--sl-color-gray-600);\n  --sl-color-neutral-700: var(--sl-color-gray-700);\n  --sl-color-neutral-800: var(--sl-color-gray-800);\n  --sl-color-neutral-900: var(--sl-color-gray-900);\n  --sl-color-neutral-950: var(--sl-color-gray-950);\n\n  --sl-color-neutral-0: hsl(0, 0%, 100%);\n  --sl-color-neutral-1000: hsl(0, 0%, 0%);\n\n  --sl-border-radius-small: 0.1875rem;\n  --sl-border-radius-medium: 0.25rem;\n  --sl-border-radius-large: 0.5rem;\n  --sl-border-radius-x-large: 1rem;\n\n  --sl-border-radius-circle: 50%;\n  --sl-border-radius-pill: 9999px;\n\n  --sl-shadow-x-small: 0 1px 2px hsl(240 3.8% 46.1% / 6%);\n  --sl-shadow-small: 0 1px 2px hsl(240 3.8% 46.1% / 12%);\n  --sl-shadow-medium: 0 2px 4px hsl(240 3.8% 46.1% / 12%);\n  --sl-shadow-large: 0 2px 8px hsl(240 3.8% 46.1% / 12%);\n  --sl-shadow-x-large: 0 4px 16px hsl(240 3.8% 46.1% / 12%);\n\n  --sl-spacing-3x-small: 0.125rem;\n  --sl-spacing-2x-small: 0.25rem;\n  --sl-spacing-x-small: 0.5rem;\n  --sl-spacing-small: 0.75rem;\n  --sl-spacing-medium: 1rem;\n  --sl-spacing-large: 1.25rem;\n  --sl-spacing-x-large: 1.75rem;\n  --sl-spacing-2x-large: 2.25rem;\n  --sl-spacing-3x-large: 3rem;\n  --sl-spacing-4x-large: 4.5rem;\n\n  --sl-transition-x-slow: 1000ms;\n  --sl-transition-slow: 500ms;\n  --sl-transition-medium: 250ms;\n  --sl-transition-fast: 150ms;\n  --sl-transition-x-fast: 50ms;\n\n  --sl-font-mono: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;\n  --sl-font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,\n    Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",\n    "Segoe UI Symbol";\n  --sl-font-serif: Georgia, "Times New Roman", serif;\n\n  --sl-font-size-2x-small: 0.625rem;\n  --sl-font-size-x-small: 0.75rem;\n  --sl-font-size-small: 0.875rem;\n  --sl-font-size-medium: 1rem;\n  --sl-font-size-large: 1.25rem;\n  --sl-font-size-x-large: 1.5rem;\n  --sl-font-size-2x-large: 2.25rem;\n  --sl-font-size-3x-large: 3rem;\n  --sl-font-size-4x-large: 4.5rem;\n\n  --sl-font-weight-light: 300;\n  --sl-font-weight-normal: 400;\n  --sl-font-weight-semibold: 500;\n  --sl-font-weight-bold: 700;\n\n  --sl-letter-spacing-denser: -0.03em;\n  --sl-letter-spacing-dense: -0.015em;\n  --sl-letter-spacing-normal: normal;\n  --sl-letter-spacing-loose: 0.075em;\n  --sl-letter-spacing-looser: 0.15em;\n\n  --sl-line-height-denser: 1;\n  --sl-line-height-dense: 1.4;\n  --sl-line-height-normal: 1.8;\n  --sl-line-height-loose: 2.2;\n  --sl-line-height-looser: 2.6;\n\n  --sl-focus-ring-color: var(--sl-color-primary-600);\n  --sl-focus-ring-style: solid;\n  --sl-focus-ring-width: 3px;\n  --sl-focus-ring: var(--sl-focus-ring-style) var(--sl-focus-ring-width)\n    var(--sl-focus-ring-color);\n  --sl-focus-ring-offset: 1px;\n\n  --sl-button-font-size-small: var(--sl-font-size-x-small);\n  --sl-button-font-size-medium: var(--sl-font-size-small);\n  --sl-button-font-size-large: var(--sl-font-size-medium);\n\n  --sl-input-height-small: 1.875rem;\n  --sl-input-height-medium: 2.5rem;\n  --sl-input-height-large: 3.125rem;\n\n  --sl-input-background-color: var(--sl-color-neutral-0);\n  --sl-input-background-color-hover: var(--sl-input-background-color);\n  --sl-input-background-color-focus: var(--sl-input-background-color);\n  --sl-input-background-color-disabled: var(--sl-color-neutral-100);\n  --sl-input-border-color: var(--sl-color-neutral-300);\n  --sl-input-border-color-hover: var(--sl-color-neutral-400);\n  --sl-input-border-color-focus: var(--sl-color-primary-500);\n  --sl-input-border-color-disabled: var(--sl-color-neutral-300);\n  --sl-input-border-width: 1px;\n  --sl-input-required-content: "*";\n  --sl-input-required-content-offset: -2px;\n  --sl-input-required-content-color: var(--sl-input-label-color);\n\n  --sl-input-border-radius-small: var(--sl-border-radius-medium);\n  --sl-input-border-radius-medium: var(--sl-border-radius-medium);\n  --sl-input-border-radius-large: var(--sl-border-radius-medium);\n\n  --sl-input-font-family: var(--sl-font-sans);\n  --sl-input-font-weight: var(--sl-font-weight-normal);\n  --sl-input-font-size-small: var(--sl-font-size-small);\n  --sl-input-font-size-medium: var(--sl-font-size-medium);\n  --sl-input-font-size-large: var(--sl-font-size-large);\n  --sl-input-letter-spacing: var(--sl-letter-spacing-normal);\n\n  --sl-input-color: var(--sl-color-neutral-700);\n  --sl-input-color-hover: var(--sl-color-neutral-700);\n  --sl-input-color-focus: var(--sl-color-neutral-700);\n  --sl-input-color-disabled: var(--sl-color-neutral-900);\n  --sl-input-icon-color: var(--sl-color-neutral-500);\n  --sl-input-icon-color-hover: var(--sl-color-neutral-600);\n  --sl-input-icon-color-focus: var(--sl-color-neutral-600);\n  --sl-input-placeholder-color: var(--sl-color-neutral-500);\n  --sl-input-placeholder-color-disabled: var(--sl-color-neutral-600);\n  --sl-input-spacing-small: var(--sl-spacing-small);\n  --sl-input-spacing-medium: var(--sl-spacing-medium);\n  --sl-input-spacing-large: var(--sl-spacing-large);\n\n  --sl-input-focus-ring-color: hsl(198.6 88.7% 48.4% / 40%);\n  --sl-input-focus-ring-offset: 0;\n\n  --sl-input-filled-background-color: var(--sl-color-neutral-100);\n  --sl-input-filled-background-color-hover: var(--sl-color-neutral-100);\n  --sl-input-filled-background-color-focus: var(--sl-color-neutral-100);\n  --sl-input-filled-background-color-disabled: var(--sl-color-neutral-100);\n  --sl-input-filled-color: var(--sl-color-neutral-800);\n  --sl-input-filled-color-hover: var(--sl-color-neutral-800);\n  --sl-input-filled-color-focus: var(--sl-color-neutral-700);\n  --sl-input-filled-color-disabled: var(--sl-color-neutral-800);\n\n  --sl-input-label-font-size-small: var(--sl-font-size-small);\n  --sl-input-label-font-size-medium: var(--sl-font-size-medium);\n  --sl-input-label-font-size-large: var(--sl-font-size-large);\n  --sl-input-label-color: inherit;\n\n  --sl-input-help-text-font-size-small: var(--sl-font-size-x-small);\n  --sl-input-help-text-font-size-medium: var(--sl-font-size-small);\n  --sl-input-help-text-font-size-large: var(--sl-font-size-medium);\n  --sl-input-help-text-color: var(--sl-color-neutral-500);\n\n  --sl-toggle-size-small: 0.875rem;\n  --sl-toggle-size-medium: 1.125rem;\n  --sl-toggle-size-large: 1.375rem;\n\n  --sl-overlay-background-color: hsl(240 3.8% 46.1% / 33%);\n\n  --sl-panel-background-color: var(--sl-color-neutral-0);\n  --sl-panel-border-color: var(--sl-color-neutral-200);\n  --sl-panel-border-width: 1px;\n\n  --sl-tooltip-border-radius: var(--sl-border-radius-medium);\n  --sl-tooltip-background-color: var(--sl-color-neutral-800);\n  --sl-tooltip-color: var(--sl-color-neutral-0);\n  --sl-tooltip-font-family: var(--sl-font-sans);\n  --sl-tooltip-font-weight: var(--sl-font-weight-normal);\n  --sl-tooltip-font-size: var(--sl-font-size-small);\n  --sl-tooltip-line-height: var(--sl-line-height-dense);\n  --sl-tooltip-padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-small);\n  --sl-tooltip-arrow-size: 6px;\n\n  --sl-z-index-drawer: 999700;\n  --sl-z-index-dialog: 999800;\n  --sl-z-index-dropdown: 999900;\n  --sl-z-index-toast: 999950;\n  --sl-z-index-tooltip: 9991000;\n}\n\n.sl-scroll-lock {\n  padding-right: var(--sl-scroll-lock-size) !important;\n  overflow: hidden !important;\n}\n\n.sl-toast-stack {\n  position: fixed;\n  top: 0;\n  inset-inline-end: 0;\n  z-index: var(--sl-z-index-toast);\n  width: 28rem;\n  max-width: 100%;\n  max-height: 100%;\n  overflow: auto;\n}\n\n.sl-toast-stack sl-alert {\n  margin: var(--sl-spacing-medium);\n}\n\n.sl-toast-stack sl-alert::part(base) {\n  box-shadow: var(--sl-shadow-large);\n}\n\nsl-drawer::part(base) {\n  color: var(--sl-color-neutral-800) !important;\n}\n\n.h5player-popup-wrap {\n  position: relative;\n  z-index: 99999999;\n  opacity: 0;\n}\n\n.h5player-popup-wrap sl-popup {\n  position: relative;\n}\n\n.h5player-popup-wrap .h5player-popup-content {\n  background-color: rgba(0, 0, 0, 0.9);\n  color: #fff;\n  font-size: 16px;\n  min-width: 220px;\n  height: 48px;\n  line-height: 48px;\n  display: flex;\n  padding: 0 16px;\n  border-radius: 6px 6px 0 0;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n\n  /* 灰色向下的过度阴影 */\n  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.7);\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n@keyframes text-lumos {\n  0%,100%{ color:#fff; }\n\t50%{ color:#ccc; }\n}\n\n.h5player-popup-content .h5p-logo-mod {\n  white-space: nowrap;\n  font-weight: 500;\n  text-shadow: 0px 0px 2px #666, 0 0 30px #666;\n  animation: text-lumos 5s infinite;\n}\n\n.h5player-popup-content .h5p-menu-wrap {}\n\n.h5player-popup-content .h5p-action-mod {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.h5player-popup-content .h5p-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  padding: 0 8px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n\n.h5player-popup-content .h5p-action-btn:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.h5player-popup-content .h5p-action-btn sl-icon {\n  padding: 0 4px;\n}\n\n/* 激活态 */\n.h5player-popup-active {\n  opacity: 0.8;\n  transition: opacity 0.2s;\n}\n\n.h5player-popup-content a, .h5player-popup-content a:visited{\n  color: #fff;\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.h5player-popup-wrap:hover, .h5player-popup-full-active {\n  opacity: 1 !important;\n  transition: opacity 0.2s;\n}\n\n.h5player-popup-wrap:hover .h5player-popup-content, .h5player-popup-full-active .h5player-popup-content {\n  border-bottom: 2px solid rgba(255, 255, 255, 0.6);\n}\n\n.h5player-popup-content .h5p-action-mod sl-menu {\n  background-color: rgba(0, 0, 0, 0.9);\n  color: #fff;\n  border-radius: 4px;\n  padding: 5px 0;\n}\n\n.h5player-popup-content .h5p-action-mod sl-menu-item::part(base) {\n  /* background-color: rgba(0, 0, 0, 0.9); */\n  color: #fff;\n  font-size: 14px;\n  padding: 2px 0;\n}\n\n.h5player-popup-content .h5p-action-mod sl-menu-item::part(base):hover {\n  background-color: var(--sl-color-primary-500);\n  color: #fff;\n}\n\n.h5player-popup-content .h5p-recommend-wrap {\n  flex-grow: 1;\n  box-sizing: border-box;\n  margin: 0 20px;\n  text-align: center;\n  font-size: 14px;\n  overflow: hidden;\n  white-space: nowrap;\n\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n}\n\n@keyframes text-marquee {\n  0% { transform: translateX(0); }\n  100% { transform: translateX(-100%); }\n}\n\n.h5player-popup-content .h5p-recommend-mod {\n  display: inline-block;\n  word-break: keep-all;\n  white-space: nowrap;\n  /* 无限循环滚动的动画效果 */\n  /* padding-left: 100%; */\n  /* animation: text-marquee 15s linear infinite; */\n}\n.h5player-popup-content .h5p-recommend-item {\n  word-break: keep-all;\n  white-space: nowrap;\n\n  position: absolute;\n  top: 0;\n  right: 0;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.4s;\n}\n\n.h5player-popup-content .h5p-recommend-item__active {\n  opacity: 1;\n  z-index: 99;\n  pointer-events: auto;\n}\n\n.h5player-popup-content .h5p-recommend-wrap>div {\n  opacity: 0.5;\n}\n.h5player-popup-content .h5p-recommend-wrap>div:hover{\n  opacity: 1;\n}\n.h5player-popup-content .h5p-recommend-wrap>div:hover .h5p-recommend-mod {\n  animation-play-state: paused;\n}');const n=globalThis,o=n.ShadowRoot&&(void 0===n.ShadyCSS||n.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),i=new WeakMap;let a=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(o&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=i.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&i.set(t,e))}return e}toString(){return this.cssText}};const s=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,o)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[o+1]),e[0]);return new a(n,e,r)},l=o?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new a("string"==typeof e?e:e+"",void 0,r))(t)})(e):e,{is:c,defineProperty:u,getOwnPropertyDescriptor:d,getOwnPropertyNames:p,getOwnPropertySymbols:h,getPrototypeOf:g}=Object,f=globalThis,m=f.trustedTypes,b=m?m.emptyScript:"",y=f.reactiveElementPolyfillSupport,w=(e,t)=>e,v={toAttribute(e,t){switch(t){case Boolean:e=e?b:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},k=(e,t)=>!c(e,t),S={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:k};Symbol.metadata??=Symbol("metadata"),f.litPropertyMetadata??=new WeakMap;class _ extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=S){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),o=this.getPropertyDescriptor(e,n,t);void 0!==o&&u(this.prototype,e,o)}}static getPropertyDescriptor(e,t,n){const{get:o,set:r}=d(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return o?.call(this)},set(t){const i=o?.call(this);r.call(this,t),this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??S}static _$Ei(){if(this.hasOwnProperty(w("elementProperties")))return;const e=g(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(w("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(w("properties"))){const e=this.properties,t=[...p(e),...h(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const n=this._$Eu(e,t);void 0!==n&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$Eg=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$ES(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$E_??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$E_?.delete(e)}_$ES(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(o)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const o of t){const t=document.createElement("style"),r=n.litNonce;void 0!==r&&t.setAttribute("nonce",r),t.textContent=o.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$E_?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$E_?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t){const n=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,n);if(void 0!==o&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:v).toAttribute(t,n.type);this._$Em=e,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$Em=null}}_$AK(e,t){const n=this.constructor,o=n._$Eh.get(e);if(void 0!==o&&this._$Em!==o){const e=n.getPropertyOptions(o),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:v;this._$Em=o,this[o]=r.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,n){if(void 0!==e){if(n??=this.constructor.getPropertyOptions(e),!(n.hasChanged??k)(this[e],t))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$Eg=this._$EP())}C(e,t,n){this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Em!==e&&(this._$ET??=new Set).add(e)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e)!0!==n.wrapped||this._$AL.has(t)||void 0===this[t]||this.C(t,this[t],n)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$E_?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$Ej()}catch(t){throw e=!1,this._$Ej(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$E_?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ej(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(e){return!0}update(e){this._$ET&&=this._$ET.forEach((e=>this._$EO(e,this[e]))),this._$Ej()}updated(e){}firstUpdated(e){}}_.elementStyles=[],_.shadowRootOptions={mode:"open"},_[w("elementProperties")]=new Map,_[w("finalized")]=new Map,y?.({ReactiveElement:_}),(f.reactiveElementVersions??=[]).push("2.0.3");const C=globalThis,P=C.trustedTypes,M=P?P.createPolicy("lit-html",{createHTML:e=>e}):void 0,E="$lit$",x=`lit$${(Math.random()+"").slice(9)}$`,T="?"+x,A=`<${T}>`,L=document,$=()=>L.createComment(""),D=e=>null===e||"object"!=typeof e&&"function"!=typeof e,R=Array.isArray,I="[ \t\n\f\r]",O=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,U=/-->/g,F=/>/g,H=RegExp(`>|${I}(?:([^\\s"'>=/]+)(${I}*=${I}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),z=/'/g,B=/"/g,G=/^(?:script|style|textarea|title)$/i,N=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),j=Symbol.for("lit-noChange"),V=Symbol.for("lit-nothing"),q=new WeakMap,K=L.createTreeWalker(L,129);function W(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==M?M.createHTML(t):t}const J=(e,t)=>{const n=e.length-1,o=[];let r,i=2===t?"<svg>":"",a=O;for(let t=0;t<n;t++){const n=e[t];let s,l,c=-1,u=0;for(;u<n.length&&(a.lastIndex=u,l=a.exec(n),null!==l);)u=a.lastIndex,a===O?"!--"===l[1]?a=U:void 0!==l[1]?a=F:void 0!==l[2]?(G.test(l[2])&&(r=RegExp("</"+l[2],"g")),a=H):void 0!==l[3]&&(a=H):a===H?">"===l[0]?(a=r??O,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,s=l[1],a=void 0===l[3]?H:'"'===l[3]?B:z):a===B||a===z?a=H:a===U||a===F?a=O:(a=H,r=void 0);const d=a===H&&e[t+1].startsWith("/>")?" ":"";i+=a===O?n+A:c>=0?(o.push(s),n.slice(0,c)+E+n.slice(c)+x+d):n+x+(-2===c?t:d)}return[W(e,i+(e[n]||"<?>")+(2===t?"</svg>":"")),o]};class X{constructor({strings:e,_$litType$:t},n){let o;this.parts=[];let r=0,i=0;const a=e.length-1,s=this.parts,[l,c]=J(e,t);if(this.el=X.createElement(l,n),K.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(o=K.nextNode())&&s.length<a;){if(1===o.nodeType){if(o.hasAttributes())for(const e of o.getAttributeNames())if(e.endsWith(E)){const t=c[i++],n=o.getAttribute(e).split(x),a=/([.?@])?(.*)/.exec(t);s.push({type:1,index:r,name:a[2],strings:n,ctor:"."===a[1]?te:"?"===a[1]?ne:"@"===a[1]?oe:ee}),o.removeAttribute(e)}else e.startsWith(x)&&(s.push({type:6,index:r}),o.removeAttribute(e));if(G.test(o.tagName)){const e=o.textContent.split(x),t=e.length-1;if(t>0){o.textContent=P?P.emptyScript:"";for(let n=0;n<t;n++)o.append(e[n],$()),K.nextNode(),s.push({type:2,index:++r});o.append(e[t],$())}}}else if(8===o.nodeType)if(o.data===T)s.push({type:2,index:r});else{let e=-1;for(;-1!==(e=o.data.indexOf(x,e+1));)s.push({type:7,index:r}),e+=x.length-1}r++}}static createElement(e,t){const n=L.createElement("template");return n.innerHTML=e,n}}function Y(e,t,n=e,o){if(t===j)return t;let r=void 0!==o?n._$Co?.[o]:n._$Cl;const i=D(t)?void 0:t._$litDirective$;return r?.constructor!==i&&(r?._$AO?.(!1),void 0===i?r=void 0:(r=new i(e),r._$AT(e,n,o)),void 0!==o?(n._$Co??=[])[o]=r:n._$Cl=r),void 0!==r&&(t=Y(e,r._$AS(e,t.values),r,o)),t}class Z{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,o=(e?.creationScope??L).importNode(t,!0);K.currentNode=o;let r=K.nextNode(),i=0,a=0,s=n[0];for(;void 0!==s;){if(i===s.index){let t;2===s.type?t=new Q(r,r.nextSibling,this,e):1===s.type?t=new s.ctor(r,s.name,s.strings,this,e):6===s.type&&(t=new re(r,this,e)),this._$AV.push(t),s=n[++a]}i!==s?.index&&(r=K.nextNode(),i++)}return K.currentNode=L,o}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,o){this.type=2,this._$AH=V,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),D(e)?e===V||null==e||""===e?(this._$AH!==V&&this._$AR(),this._$AH=V):e!==this._$AH&&e!==j&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>R(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==V&&D(this._$AH)?this._$AA.nextSibling.data=e:this.$(L.createTextNode(e)),this._$AH=e}g(e){const{values:t,_$litType$:n}=e,o="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=X.createElement(W(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===o)this._$AH.p(t);else{const e=new Z(o,this),n=e.u(this.options);e.p(t),this.$(n),this._$AH=e}}_$AC(e){let t=q.get(e.strings);return void 0===t&&q.set(e.strings,t=new X(e)),t}T(e){R(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,o=0;for(const r of e)o===t.length?t.push(n=new Q(this.k($()),this.k($()),this,this.options)):n=t[o],n._$AI(r),o++;o<t.length&&(this._$AR(n&&n._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class ee{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,o,r){this.type=1,this._$AH=V,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=V}_$AI(e,t=this,n,o){const r=this.strings;let i=!1;if(void 0===r)e=Y(this,e,t,0),i=!D(e)||e!==this._$AH&&e!==j,i&&(this._$AH=e);else{const o=e;let a,s;for(e=r[0],a=0;a<r.length-1;a++)s=Y(this,o[n+a],t,a),s===j&&(s=this._$AH[a]),i||=!D(s)||s!==this._$AH[a],s===V?e=V:e!==V&&(e+=(s??"")+r[a+1]),this._$AH[a]=s}i&&!o&&this.O(e)}O(e){e===V?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class te extends ee{constructor(){super(...arguments),this.type=3}O(e){this.element[this.name]=e===V?void 0:e}}class ne extends ee{constructor(){super(...arguments),this.type=4}O(e){this.element.toggleAttribute(this.name,!!e&&e!==V)}}class oe extends ee{constructor(e,t,n,o,r){super(e,t,n,o,r),this.type=5}_$AI(e,t=this){if((e=Y(this,e,t,0)??V)===j)return;const n=this._$AH,o=e===V&&n!==V||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==V&&(n===V||o);o&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class re{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const ie=C.litHtmlPolyfillSupport;ie?.(X,Q),(C.litHtmlVersions??=[]).push("3.1.1");let ae=class extends _{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{const o=n?.renderBefore??t;let r=o._$litPart$;if(void 0===r){const e=n?.renderBefore??null;o._$litPart$=r=new Q(t.insertBefore($(),e),e,void 0,n??{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return j}};ae._$litElement$=!0,ae.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ae});const se=globalThis.litElementPolyfillSupport;se?.({LitElement:ae}),(globalThis.litElementVersions??=[]).push("4.0.3");var le=s`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`,ce=s`
  ${le}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`,ue=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptor,he=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,be=(e,t,n)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ye=(e,t)=>{for(var n in t||(t={}))fe.call(t,n)&&be(e,n,t[n]);if(ge)for(var n of ge(t))me.call(t,n)&&be(e,n,t[n]);return e},we=(e,t)=>de(e,he(t)),ve=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?pe(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&ue(t,n,i),i};const ke={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:k},Se=(e=ke,t,n)=>{const{kind:o,metadata:r}=n;let i=globalThis.litPropertyMetadata.get(r);if(void 0===i&&globalThis.litPropertyMetadata.set(r,i=new Map),i.set(n.name,e),"accessor"===o){const{name:o}=n;return{set(n){const r=t.get.call(this);t.set.call(this,n),this.requestUpdate(o,r,e)},init(t){return void 0!==t&&this.C(o,void 0,e),t}}}if("setter"===o){const{name:o}=n;return function(n){const r=this[o];t.call(this,n),this.requestUpdate(o,r,e)}}throw Error("Unsupported decorator location: "+o)};function _e(e){return(t,n)=>"object"==typeof n?Se(e,t,n):((e,t,n)=>{const o=t.hasOwnProperty(n);return t.constructor.createProperty(n,o?{...e,wrapped:!0}:e),o?Object.getOwnPropertyDescriptor(t,n):void 0})(e,t,n)}const Ce=(e,t,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&"object"!=typeof t&&Object.defineProperty(e,t,n),n);function Pe(e,t){return(n,o,r)=>{const i=t=>t.renderRoot?.querySelector(e)??null;if(t){const{get:e,set:t}="object"==typeof o?n:r??(()=>{const e=Symbol();return{get(){return this[e]},set(t){this[e]=t}}})();return Ce(n,o,{get(){let n=e.call(this);return void 0===n&&(n=i(this),(null!==n||this.hasUpdated)&&t.call(this,n)),n}})}return Ce(n,o,{get(){return i(this)}})}}var Me=class extends ae{constructor(){super(),Object.entries(this.constructor.dependencies).forEach((([e,t])=>{this.constructor.define(e,t)}))}emit(e,t){const n=new CustomEvent(e,ye({bubbles:!0,cancelable:!1,composed:!0,detail:{}},t));return this.dispatchEvent(n),n}static define(e,t=this,n={}){const o=customElements.get(e);if(!o)return void customElements.define(e,class extends t{},n);let r=" (unknown version)",i=r;"version"in t&&t.version&&(r=" v"+t.version),"version"in o&&o.version&&(i=" v"+o.version),r&&i&&r===i||console.warn(`Attempted to register <${e}>${r}, but <${e}>${i} has already been registered.`)}};Me.version="2.12.0",Me.dependencies={},ve([_e()],Me.prototype,"dir",2),ve([_e()],Me.prototype,"lang",2);const Ee=Math.min,xe=Math.max,Te=Math.round,Ae=Math.floor,Le=e=>({x:e,y:e}),$e={left:"right",right:"left",bottom:"top",top:"bottom"},De={start:"end",end:"start"};function Re(e,t,n){return xe(e,Ee(t,n))}function Ie(e,t){return"function"==typeof e?e(t):e}function Oe(e){return e.split("-")[0]}function Ue(e){return e.split("-")[1]}function Fe(e){return"x"===e?"y":"x"}function He(e){return"y"===e?"height":"width"}function ze(e){return["top","bottom"].includes(Oe(e))?"y":"x"}function Be(e){return Fe(ze(e))}function Ge(e){return e.replace(/start|end/g,(e=>De[e]))}function Ne(e){return e.replace(/left|right|bottom|top/g,(e=>$e[e]))}function je(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Ve(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function qe(e,t,n){let{reference:o,floating:r}=e;const i=ze(t),a=Be(t),s=He(a),l=Oe(t),c="y"===i,u=o.x+o.width/2-r.width/2,d=o.y+o.height/2-r.height/2,p=o[s]/2-r[s]/2;let h;switch(l){case"top":h={x:u,y:o.y-r.height};break;case"bottom":h={x:u,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:d};break;case"left":h={x:o.x-r.width,y:d};break;default:h={x:o.x,y:o.y}}switch(Ue(t)){case"start":h[a]-=p*(n&&c?-1:1);break;case"end":h[a]+=p*(n&&c?-1:1)}return h}async function Ke(e,t){var n;void 0===t&&(t={});const{x:o,y:r,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=Ie(t,e),g=je(h),f=s[p?"floating"===d?"reference":"floating":d],m=Ve(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(f)))||n?f:f.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),b="floating"===d?{...a.floating,x:o,y:r}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),w=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},v=Ve(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:y,strategy:l}):b);return{top:(m.top-v.top+g.top)/w.y,bottom:(v.bottom-m.bottom+g.bottom)/w.y,left:(m.left-v.left+g.left)/w.x,right:(v.right-m.right+g.right)/w.x}}const We=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:i,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:o,elements:r}=e,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),a=Oe(n),s=Ue(n),l="y"===ze(n),c=["left","top"].includes(a)?-1:1,u=i&&l?-1:1,d=Ie(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof g&&(h="end"===s?-1*g:g),l?{x:h*u,y:p*c}:{x:p*c,y:h*u}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(o=s.arrow)&&o.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:a}}}}};function Je(e){return Ze(e)?(e.nodeName||"").toLowerCase():"#document"}function Xe(t){var n;return(null==t||null==(n=t.ownerDocument)?void 0:n.defaultView)||e}function Ye(t){var n;return null==(n=(Ze(t)?t.ownerDocument:t.document)||e.document)?void 0:n.documentElement}function Ze(e){return e instanceof Node||e instanceof Xe(e).Node}function Qe(e){return e instanceof Element||e instanceof Xe(e).Element}function et(e){return e instanceof HTMLElement||e instanceof Xe(e).HTMLElement}function tt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof Xe(e).ShadowRoot)}function nt(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=st(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function ot(e){return["table","td","th"].includes(Je(e))}function rt(e){const t=it(),n=st(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function it(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function at(e){return["html","body","#document"].includes(Je(e))}function st(e){return Xe(e).getComputedStyle(e)}function lt(e){return Qe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ct(e){if("html"===Je(e))return e;const t=e.assignedSlot||e.parentNode||tt(e)&&e.host||Ye(e);return tt(t)?t.host:t}function ut(e){const t=ct(e);return at(t)?e.ownerDocument?e.ownerDocument.body:e.body:et(t)&&nt(t)?t:ut(t)}function dt(e,t,n){var o;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=ut(e),i=r===(null==(o=e.ownerDocument)?void 0:o.body),a=Xe(r);return i?t.concat(a,a.visualViewport||[],nt(r)?r:[],a.frameElement&&n?dt(a.frameElement):[]):t.concat(r,dt(r,[],n))}function pt(e){const t=st(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=et(e),i=r?e.offsetWidth:n,a=r?e.offsetHeight:o,s=Te(n)!==i||Te(o)!==a;return s&&(n=i,o=a),{width:n,height:o,$:s}}function ht(e){return Qe(e)?e:e.contextElement}function gt(e){const t=ht(e);if(!et(t))return Le(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:i}=pt(t);let a=(i?Te(n.width):n.width)/o,s=(i?Te(n.height):n.height)/r;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const ft=Le(0);function mt(e){const t=Xe(e);return it()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ft}function bt(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),i=ht(e);let a=Le(1);t&&(o?Qe(o)&&(a=gt(o)):a=gt(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Xe(e))&&t}(i,n,o)?mt(i):Le(0);let l=(r.left+s.x)/a.x,c=(r.top+s.y)/a.y,u=r.width/a.x,d=r.height/a.y;if(i){const e=Xe(i),t=o&&Qe(o)?Xe(o):o;let n=e.frameElement;for(;n&&o&&t!==e;){const e=gt(n),t=n.getBoundingClientRect(),o=st(n),r=t.left+(n.clientLeft+parseFloat(o.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(o.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=r,c+=i,n=Xe(n).frameElement}}return Ve({width:u,height:d,x:l,y:c})}function yt(e){return bt(Ye(e)).left+lt(e).scrollLeft}function wt(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=Xe(e),o=Ye(e),r=n.visualViewport;let i=o.clientWidth,a=o.clientHeight,s=0,l=0;if(r){i=r.width,a=r.height;const e=it();(!e||e&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:i,height:a,x:s,y:l}}(e,n);else if("document"===t)o=function(e){const t=Ye(e),n=lt(e),o=e.ownerDocument.body,r=xe(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=xe(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let a=-n.scrollLeft+yt(e);const s=-n.scrollTop;return"rtl"===st(o).direction&&(a+=xe(t.clientWidth,o.clientWidth)-r),{width:r,height:i,x:a,y:s}}(Ye(e));else if(Qe(t))o=function(e,t){const n=bt(e,!0,"fixed"===t),o=n.top+e.clientTop,r=n.left+e.clientLeft,i=et(e)?gt(e):Le(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:r*i.x,y:o*i.y}}(t,n);else{const n=mt(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return Ve(o)}function vt(e,t){const n=ct(e);return!(n===t||!Qe(n)||at(n))&&("fixed"===st(n).position||vt(n,t))}function kt(e,t,n){const o=et(t),r=Ye(t),i="fixed"===n,a=bt(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Le(0);if(o||!o&&!i)if(("body"!==Je(t)||nt(r))&&(s=lt(t)),o){const e=bt(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=yt(r));return{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function St(e,t){return et(e)&&"fixed"!==st(e).position?t?t(e):e.offsetParent:null}function _t(e,t){const n=Xe(e);if(!et(e))return n;let o=St(e,t);for(;o&&ot(o)&&"static"===st(o).position;)o=St(o,t);return o&&("html"===Je(o)||"body"===Je(o)&&"static"===st(o).position&&!rt(o))?n:o||function(e){let t=ct(e);for(;et(t)&&!at(t);){if(rt(t))return t;t=ct(t)}return null}(e)||n}const Ct={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:o}=e;const r=et(n),i=Ye(n);if(n===i)return t;let a={scrollLeft:0,scrollTop:0},s=Le(1);const l=Le(0);if((r||!r&&"fixed"!==o)&&(("body"!==Je(n)||nt(i))&&(a=lt(n)),et(n))){const e=bt(n);s=gt(n),l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+l.x,y:t.y*s.y-a.scrollTop*s.y+l.y}},getDocumentElement:Ye,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let o=dt(e,[],!1).filter((e=>Qe(e)&&"body"!==Je(e))),r=null;const i="fixed"===st(e).position;let a=i?ct(e):e;for(;Qe(a)&&!at(a);){const t=st(a),n=rt(a);n||"fixed"!==t.position||(r=null),(i?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||nt(a)&&!n&&vt(e,a))?o=o.filter((e=>e!==a)):r=t,a=ct(a)}return t.set(e,o),o}(t,this._c):[].concat(n),o],a=i[0],s=i.reduce(((e,n)=>{const o=wt(t,n,r);return e.top=xe(o.top,e.top),e.right=Ee(o.right,e.right),e.bottom=Ee(o.bottom,e.bottom),e.left=xe(o.left,e.left),e}),wt(t,a,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:_t,getElementRects:async function(e){let{reference:t,floating:n,strategy:o}=e;const r=this.getOffsetParent||_t,i=this.getDimensions;return{reference:kt(t,await r(n),o),floating:{x:0,y:0,...await i(n)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=pt(e);return{width:t,height:n}},getScale:gt,isElement:Qe,isRTL:function(e){return"rtl"===st(e).direction}};function Pt(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=o,c=ht(e),u=r||i?[...c?dt(c):[],...dt(t)]:[];u.forEach((e=>{r&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=c&&s?function(e,t){let n,o=null;const r=Ye(e);function i(){clearTimeout(n),o&&o.disconnect(),o=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();const{left:c,top:u,width:d,height:p}=e.getBoundingClientRect();if(s||t(),!d||!p)return;const h={rootMargin:-Ae(u)+"px "+-Ae(r.clientWidth-(c+d))+"px "+-Ae(r.clientHeight-(u+p))+"px "+-Ae(c)+"px",threshold:xe(0,Ee(1,l))||1};let g=!0;function f(e){const t=e[0].intersectionRatio;if(t!==l){if(!g)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),100)}g=!1}try{o=new IntersectionObserver(f,{...h,root:r.ownerDocument})}catch(e){o=new IntersectionObserver(f,h)}o.observe(e)}(!0),i}(c,n):null;let p,h=-1,g=null;a&&(g=new ResizeObserver((e=>{let[o]=e;o&&o.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{g&&g.observe(t)}))),n()})),c&&!l&&g.observe(c),g.observe(t));let f=l?bt(e):null;return l&&function t(){const o=bt(e);!f||o.x===f.x&&o.y===f.y&&o.width===f.width&&o.height===f.height||n();f=o,p=requestAnimationFrame(t)}(),n(),()=>{u.forEach((e=>{r&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),d&&d(),g&&g.disconnect(),g=null,l&&cancelAnimationFrame(p)}}const Mt=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Ie(e,t),c={x:n,y:o},u=await Ke(t,l),d=ze(Oe(r)),p=Fe(d);let h=c[p],g=c[d];if(i){const e="y"===p?"bottom":"right";h=Re(h+u["y"===p?"top":"left"],h,h-u[e])}if(a){const e="y"===d?"bottom":"right";g=Re(g+u["y"===d?"top":"left"],g,g-u[e])}const f=s.fn({...t,[p]:h,[d]:g});return{...f,data:{x:f.x-n,y:f.y-o}}}}},Et=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:f=!0,...m}=Ie(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const b=Oe(r),y=Oe(s)===s,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),v=p||(y||!f?[Ne(s)]:function(e){const t=Ne(e);return[Ge(e),t,Ge(t)]}(s));p||"none"===g||v.push(...function(e,t,n,o){const r=Ue(e);let i=function(e,t,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?i:a;default:return[]}}(Oe(e),"start"===n,o);return r&&(i=i.map((e=>e+"-"+r)),t&&(i=i.concat(i.map(Ge)))),i}(s,f,g,w));const k=[s,...v],S=await Ke(t,m),_=[];let C=(null==(o=i.flip)?void 0:o.overflows)||[];if(u&&_.push(S[b]),d){const e=function(e,t,n){void 0===n&&(n=!1);const o=Ue(e),r=Be(e),i=He(r);let a="x"===r?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=Ne(a)),[a,Ne(a)]}(r,a,w);_.push(S[e[0]],S[e[1]])}if(C=[...C,{placement:r,overflows:_}],!_.every((e=>e<=0))){var P,M;const e=((null==(P=i.flip)?void 0:P.index)||0)+1,t=k[e];if(t)return{data:{index:e,overflows:C},reset:{placement:t}};let n=null==(M=C.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:M.placement;if(!n)switch(h){case"bestFit":{var E;const e=null==(E=C.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:E[0];e&&(n=e);break}case"initialPlacement":n=s}if(r!==n)return{reset:{placement:n}}}return{}}}},xt=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:r,elements:i}=t,{apply:a=()=>{},...s}=Ie(e,t),l=await Ke(t,s),c=Oe(n),u=Ue(n),d="y"===ze(n),{width:p,height:h}=o.floating;let g,f;"top"===c||"bottom"===c?(g=c,f=u===(await(null==r.isRTL?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(f=c,g="end"===u?"top":"bottom");const m=h-l[g],b=p-l[f],y=!t.middlewareData.shift;let w=m,v=b;if(d){const e=p-l.left-l.right;v=u||y?Ee(b,e):e}else{const e=h-l.top-l.bottom;w=u||y?Ee(m,e):e}if(y&&!u){const e=xe(l.left,0),t=xe(l.right,0),n=xe(l.top,0),o=xe(l.bottom,0);d?v=p-2*(0!==e||0!==t?e+t:xe(l.left,l.right)):w=h-2*(0!==n||0!==o?n+o:xe(l.top,l.bottom))}await a({...t,availableWidth:v,availableHeight:w});const k=await r.getDimensions(i.floating);return p!==k.width||h!==k.height?{reset:{rects:!0}}:{}}}},Tt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Ie(e,t)||{};if(null==c)return{};const d=je(u),p={x:n,y:o},h=Be(r),g=He(h),f=await a.getDimensions(c),m="y"===h,b=m?"top":"left",y=m?"bottom":"right",w=m?"clientHeight":"clientWidth",v=i.reference[g]+i.reference[h]-p[h]-i.floating[g],k=p[h]-i.reference[h],S=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let _=S?S[w]:0;_&&await(null==a.isElement?void 0:a.isElement(S))||(_=s.floating[w]||i.floating[g]);const C=v/2-k/2,P=_/2-f[g]/2-1,M=Ee(d[b],P),E=Ee(d[y],P),x=M,T=_-f[g]-E,A=_/2-f[g]/2+C,L=Re(x,A,T),$=!l.arrow&&null!=Ue(r)&&A!=L&&i.reference[g]/2-(A<x?M:E)-f[g]/2<0,D=$?A<x?A-x:A-T:0;return{[h]:p[h]+D,data:{[h]:L,centerOffset:A-L-D,...$&&{alignmentOffset:D}},reset:$}}}),At=(e,t,n)=>{const o=new Map,r={platform:Ct,...n},i={...r.platform,_c:o};return(async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=qe(c,o,l),p=o,h={},g=0;for(let n=0;n<s.length;n++){const{name:i,fn:f}=s[n],{x:m,y:b,data:y,reset:w}=await f({x:u,y:d,initialPlacement:o,placement:p,strategy:r,middlewareData:h,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=b?b:d,h={...h,[i]:{...h[i],...y}},w&&g<=50&&(g++,"object"==typeof w&&(w.placement&&(p=w.placement),w.rects&&(c=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:r}):w.rects),({x:u,y:d}=qe(c,p,l))),n=-1)}return{x:u,y:d,placement:p,strategy:r,middlewareData:h}})(e,t,{...r,platform:i})},Lt=1,$t=2,Dt=e=>(...t)=>({_$litDirective$:e,values:t});class Rt{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const It=Dt(class extends Rt{constructor(e){if(super(e),e.type!==Lt||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.st=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!this.st?.has(e)&&this.it.add(e);return this.render(t)}const n=e.element.classList;for(const e of this.it)e in t||(n.remove(e),this.it.delete(e));for(const e in t){const o=!!t[e];o===this.it.has(e)||this.st?.has(e)||(o?(n.add(e),this.it.add(e)):(n.remove(e),this.it.delete(e)))}return j}});function Ot(e){return function(e){for(let t=e;t;t=Ut(t))if(t instanceof Element&&"none"===getComputedStyle(t).display)return null;for(let t=Ut(e);t;t=Ut(t)){if(!(t instanceof Element))continue;const e=getComputedStyle(t);if("contents"!==e.display){if("static"!==e.position||"none"!==e.filter)return t;if("BODY"===t.tagName)return t}}return null}(e)}function Ut(e){return e.assignedSlot?e.assignedSlot:e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}var Ft=class extends Me{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(e){super.updated(e),e.has("active")&&(this.active?this.start():this.stop()),e.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&"string"==typeof this.anchor){const e=this.getRootNode();this.anchorEl=e.getElementById(this.anchor)}else this.anchor instanceof Element||function(e){return null!==e&&"object"==typeof e&&"getBoundingClientRect"in e}(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.start()}start(){this.anchorEl&&(this.cleanup=Pt(this.anchorEl,this.popup,(()=>{this.reposition()})))}async stop(){return new Promise((e=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame((()=>e()))):e()}))}reposition(){if(!this.active||!this.anchorEl)return;const e=[We({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?e.push(xt({apply:({rects:e})=>{const t="width"===this.sync||"both"===this.sync,n="height"===this.sync||"both"===this.sync;this.popup.style.width=t?`${e.reference.width}px`:"",this.popup.style.height=n?`${e.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&e.push(Et({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&e.push(Mt({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?e.push(xt({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:e,availableHeight:t})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${t}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${e}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&e.push(Tt({element:this.arrowEl,padding:this.arrowPadding}));const t="absolute"===this.strategy?e=>Ct.getOffsetParent(e,Ot):Ct.getOffsetParent;At(this.anchorEl,this.popup,{placement:this.placement,middleware:e,strategy:this.strategy,platform:we(ye({},Ct),{getOffsetParent:t})}).then((({x:e,y:t,middlewareData:n,placement:o})=>{const r="rtl"===getComputedStyle(this).direction,i={top:"bottom",right:"left",bottom:"top",left:"right"}[o.split("-")[0]];if(this.setAttribute("data-current-placement",o),Object.assign(this.popup.style,{left:`${e}px`,top:`${t}px`}),this.arrow){const e=n.arrow.x,t=n.arrow.y;let o="",a="",s="",l="";if("start"===this.arrowPlacement){const n="number"==typeof e?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";o="number"==typeof t?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",a=r?n:"",l=r?"":n}else if("end"===this.arrowPlacement){const n="number"==typeof e?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";a=r?"":n,l=r?n:"",s="number"==typeof t?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(l="number"==typeof e?"calc(50% - var(--arrow-size-diagonal))":"",o="number"==typeof t?"calc(50% - var(--arrow-size-diagonal))":""):(l="number"==typeof e?`${e}px`:"",o="number"==typeof t?`${t}px`:"");Object.assign(this.arrowEl.style,{top:o,right:a,bottom:s,left:l,[i]:"calc(var(--arrow-size-diagonal) * -1)"})}})),this.emit("sl-reposition")}render(){return N`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${It({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?N`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};Ft.styles=ce,ve([Pe(".popup")],Ft.prototype,"popup",2),ve([Pe(".popup__arrow")],Ft.prototype,"arrowEl",2),ve([_e()],Ft.prototype,"anchor",2),ve([_e({type:Boolean,reflect:!0})],Ft.prototype,"active",2),ve([_e({reflect:!0})],Ft.prototype,"placement",2),ve([_e({reflect:!0})],Ft.prototype,"strategy",2),ve([_e({type:Number})],Ft.prototype,"distance",2),ve([_e({type:Number})],Ft.prototype,"skidding",2),ve([_e({type:Boolean})],Ft.prototype,"arrow",2),ve([_e({attribute:"arrow-placement"})],Ft.prototype,"arrowPlacement",2),ve([_e({attribute:"arrow-padding",type:Number})],Ft.prototype,"arrowPadding",2),ve([_e({type:Boolean})],Ft.prototype,"flip",2),ve([_e({attribute:"flip-fallback-placements",converter:{fromAttribute:e=>e.split(" ").map((e=>e.trim())).filter((e=>""!==e)),toAttribute:e=>e.join(" ")}})],Ft.prototype,"flipFallbackPlacements",2),ve([_e({attribute:"flip-fallback-strategy"})],Ft.prototype,"flipFallbackStrategy",2),ve([_e({type:Object})],Ft.prototype,"flipBoundary",2),ve([_e({attribute:"flip-padding",type:Number})],Ft.prototype,"flipPadding",2),ve([_e({type:Boolean})],Ft.prototype,"shift",2),ve([_e({type:Object})],Ft.prototype,"shiftBoundary",2),ve([_e({attribute:"shift-padding",type:Number})],Ft.prototype,"shiftPadding",2),ve([_e({attribute:"auto-size"})],Ft.prototype,"autoSize",2),ve([_e()],Ft.prototype,"sync",2),ve([_e({type:Object})],Ft.prototype,"autoSizeBoundary",2),ve([_e({attribute:"auto-size-padding",type:Number})],Ft.prototype,"autoSizePadding",2),Ft.define("sl-popup");var Ht=s`
  ${le}

  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`;function zt(t){const n=t.tagName.toLowerCase();return"-1"!==t.getAttribute("tabindex")&&(!t.hasAttribute("disabled")&&(!("input"===n&&"radio"===t.getAttribute("type")&&!t.hasAttribute("checked"))&&(o=t,!!Boolean(o.offsetParent||o.offsetWidth||o.offsetHeight||o.getClientRects().length)&&("hidden"!==e.getComputedStyle(t).visibility&&(!("audio"!==n&&"video"!==n||!t.hasAttribute("controls"))||(!!t.hasAttribute("tabindex")||(!(!t.hasAttribute("contenteditable")||"false"===t.getAttribute("contenteditable"))||["button","input","select","textarea","a","audio","video","summary"].includes(n))))))));var o}function Bt(e){var t,n;const o=function(e){const t=[];function n(o){if(o instanceof Element){if(o.hasAttribute("inert"))return;!t.includes(o)&&zt(o)&&t.push(o);const r=t=>{var n;return(null==(n=t.getRootNode({composed:!0}))?void 0:n.host)!==e};o instanceof HTMLSlotElement&&r(o)&&o.assignedElements({flatten:!0}).forEach((e=>{n(e)})),null!==o.shadowRoot&&"open"===o.shadowRoot.mode&&n(o.shadowRoot)}[...o.children].forEach((e=>n(e)))}return n(e),t.sort(((e,t)=>{const n=Number(e.getAttribute("tabindex"))||0;return(Number(t.getAttribute("tabindex"))||0)-n}))}(e);return{start:null!=(t=o[0])?t:null,end:null!=(n=o[o.length-1])?n:null}}var Gt=new Map,Nt=new WeakMap;function jt(e,t){return"rtl"===t.toLowerCase()?{keyframes:e.rtlKeyframes||e.keyframes,options:e.options}:e}function Vt(e,t){Gt.set(e,function(e){return null!=e?e:{keyframes:[],options:{duration:0}}}(t))}function qt(e,t,n){const o=Nt.get(e);if(null==o?void 0:o[t])return jt(o[t],n.dir);const r=Gt.get(t);return r?jt(r,n.dir):{keyframes:[],options:{duration:0}}}function Kt(e,t){return new Promise((n=>{e.addEventListener(t,(function o(r){r.target===e&&(e.removeEventListener(t,o),n())}))}))}function Wt(e,t,n){return new Promise((o=>{if((null==n?void 0:n.duration)===1/0)throw new Error("Promise-based animations must be finite.");const r=e.animate(t,we(ye({},n),{duration:Jt()?0:n.duration}));r.addEventListener("cancel",o,{once:!0}),r.addEventListener("finish",o,{once:!0})}))}function Jt(){return e.matchMedia("(prefers-reduced-motion: reduce)").matches}function Xt(e){return Promise.all(e.getAnimations().map((e=>new Promise((t=>{const n=requestAnimationFrame(t);e.addEventListener("cancel",(()=>n),{once:!0}),e.addEventListener("finish",(()=>n),{once:!0}),e.cancel()})))))}const Yt=new Set,Zt=new MutationObserver(rn),Qt=new Map;let en,tn=document.documentElement.dir||"ltr",nn=document.documentElement.lang||navigator.language;function on(...e){e.map((e=>{const t=e.$code.toLowerCase();Qt.has(t)?Qt.set(t,Object.assign(Object.assign({},Qt.get(t)),e)):Qt.set(t,e),en||(en=e)})),rn()}function rn(){tn=document.documentElement.dir||"ltr",nn=document.documentElement.lang||navigator.language,[...Yt.keys()].map((e=>{"function"==typeof e.requestUpdate&&e.requestUpdate()}))}Zt.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});let an=class{constructor(e){this.host=e,this.host.addController(this)}hostConnected(){Yt.add(this.host)}hostDisconnected(){Yt.delete(this.host)}dir(){return`${this.host.dir||tn}`.toLowerCase()}lang(){return`${this.host.lang||nn}`.toLowerCase()}getTranslationData(e){var t,n;const o=new Intl.Locale(e.replace(/_/g,"-")),r=null==o?void 0:o.language.toLowerCase(),i=null!==(n=null===(t=null==o?void 0:o.region)||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:"";return{locale:o,language:r,region:i,primary:Qt.get(`${r}-${i}`),secondary:Qt.get(r)}}exists(e,t){var n;const{primary:o,secondary:r}=this.getTranslationData(null!==(n=t.lang)&&void 0!==n?n:this.lang());return t=Object.assign({includeFallback:!1},t),!!(o&&o[e]||r&&r[e]||t.includeFallback&&en&&en[e])}term(e,...t){const{primary:n,secondary:o}=this.getTranslationData(this.lang());let r;if(n&&n[e])r=n[e];else if(o&&o[e])r=o[e];else{if(!en||!en[e])return console.error(`No translation found for: ${String(e)}`),String(e);r=en[e]}return"function"==typeof r?r(...t):r}date(e,t){return e=new Date(e),new Intl.DateTimeFormat(this.lang(),t).format(e)}number(e,t){return e=Number(e),isNaN(e)?"":new Intl.NumberFormat(this.lang(),t).format(e)}relativeTime(e,t,n){return new Intl.RelativeTimeFormat(this.lang(),n).format(e,t)}};var sn={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(e,t)=>`Go to slide ${e} of ${t}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:e=>0===e?"No options selected":1===e?"1 option selected":`${e} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:e=>`Slide ${e}`,toggleColorFormat:"Toggle color format"};on(sn);var ln=sn,cn=class extends an{};function un(e,t){const n=ye({waitUntilFirstUpdate:!1},t);return(t,o)=>{const{update:r}=t,i=Array.isArray(e)?e:[e];t.update=function(e){i.forEach((t=>{const r=t;if(e.has(r)){const t=e.get(r),i=this[r];t!==i&&(n.waitUntilFirstUpdate&&!this.hasUpdated||this[o](t,i))}})),r.call(this,e)}}}on(ln);var dn=class extends Me{constructor(){super(...arguments),this.localize=new cn(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.handleKeyDown=e=>{this.open&&"Escape"===e.key&&(e.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=e=>{var t;if("Escape"===e.key&&this.open)return e.stopPropagation(),this.focusOnTrigger(),void this.hide();if("Tab"===e.key){if(this.open&&"sl-menu-item"===(null==(t=document.activeElement)?void 0:t.tagName.toLowerCase()))return e.preventDefault(),this.hide(),void this.focusOnTrigger();setTimeout((()=>{var e,t,n;const o=(null==(e=this.containingElement)?void 0:e.getRootNode())instanceof ShadowRoot?null==(n=null==(t=document.activeElement)?void 0:t.shadowRoot)?void 0:n.activeElement:document.activeElement;this.containingElement&&(null==o?void 0:o.closest(this.containingElement.tagName.toLowerCase()))===this.containingElement||this.hide()}))}},this.handleDocumentMouseDown=e=>{const t=e.composedPath();this.containingElement&&!t.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=e=>{const t=e.target;this.stayOpenOnSelect||"sl-menu"!==t.tagName.toLowerCase()||(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const e=this.trigger.assignedElements({flatten:!0})[0];"function"==typeof(null==e?void 0:e.focus)&&e.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find((e=>"sl-menu"===e.tagName.toLowerCase()))}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(e){if([" ","Enter"].includes(e.key))return e.preventDefault(),void this.handleTriggerClick();const t=this.getMenu();if(t){const n=t.getAllItems(),o=n[0],r=n[n.length-1];["ArrowDown","ArrowUp","Home","End"].includes(e.key)&&(e.preventDefault(),this.open||(this.show(),await this.updateComplete),n.length>0&&this.updateComplete.then((()=>{"ArrowDown"!==e.key&&"Home"!==e.key||(t.setCurrentItem(o),o.focus()),"ArrowUp"!==e.key&&"End"!==e.key||(t.setCurrentItem(r),r.focus())})))}}handleTriggerKeyUp(e){" "===e.key&&e.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const e=this.trigger.assignedElements({flatten:!0}).find((e=>Bt(e).start));let t;if(e){switch(e.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":t=e.button;break;default:t=e}t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,Kt(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,Kt(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){this.panel.addEventListener("sl-select",this.handlePanelSelect),this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled)this.open=!1;else if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await Xt(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:e,options:t}=qt(this,"dropdown.show",{dir:this.localize.dir()});await Wt(this.popup.popup,e,t),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await Xt(this);const{keyframes:e,options:t}=qt(this,"dropdown.hide",{dir:this.localize.dir()});await Wt(this.popup.popup,e,t),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return N`
      <sl-popup
        part="base"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        class=${It({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown">
          <slot part="panel" class="dropdown__panel"></slot>
        </div>
      </sl-popup>
    `}};dn.styles=Ht,dn.dependencies={"sl-popup":Ft},ve([Pe(".dropdown")],dn.prototype,"popup",2),ve([Pe(".dropdown__trigger")],dn.prototype,"trigger",2),ve([Pe(".dropdown__panel")],dn.prototype,"panel",2),ve([_e({type:Boolean,reflect:!0})],dn.prototype,"open",2),ve([_e({reflect:!0})],dn.prototype,"placement",2),ve([_e({type:Boolean,reflect:!0})],dn.prototype,"disabled",2),ve([_e({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],dn.prototype,"stayOpenOnSelect",2),ve([_e({attribute:!1})],dn.prototype,"containingElement",2),ve([_e({type:Number})],dn.prototype,"distance",2),ve([_e({type:Number})],dn.prototype,"skidding",2),ve([_e({type:Boolean})],dn.prototype,"hoist",2),ve([un("open",{waitUntilFirstUpdate:!0})],dn.prototype,"handleOpenChange",1),Vt("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}}),Vt("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}}),dn.define("sl-dropdown");var pn=s`
  ${le}

  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,hn=class extends Me{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}handleClick(e){const t=["menuitem","menuitemcheckbox"],n=e.composedPath().find((e=>{var n;return t.includes((null==(n=null==e?void 0:e.getAttribute)?void 0:n.call(e,"role"))||"")}));if(!n)return;const o=n;"checkbox"===o.type&&(o.checked=!o.checked),this.emit("sl-select",{detail:{item:o}})}handleKeyDown(e){if("Enter"===e.key||" "===e.key){const t=this.getCurrentItem();e.preventDefault(),e.stopPropagation(),null==t||t.click()}else if(["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=this.getAllItems(),n=this.getCurrentItem();let o=n?t.indexOf(n):0;t.length>0&&(e.preventDefault(),e.stopPropagation(),"ArrowDown"===e.key?o++:"ArrowUp"===e.key?o--:"Home"===e.key?o=0:"End"===e.key&&(o=t.length-1),o<0&&(o=t.length-1),o>t.length-1&&(o=0),this.setCurrentItem(t[o]),t[o].focus())}}handleMouseDown(e){const t=e.target;this.isMenuItem(t)&&this.setCurrentItem(t)}handleSlotChange(){const e=this.getAllItems();e.length>0&&this.setCurrentItem(e[0])}isMenuItem(e){var t;return"sl-menu-item"===e.tagName.toLowerCase()||["menuitem","menuitemcheckbox","menuitemradio"].includes(null!=(t=e.getAttribute("role"))?t:"")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter((e=>!(e.inert||!this.isMenuItem(e))))}getCurrentItem(){return this.getAllItems().find((e=>"0"===e.getAttribute("tabindex")))}setCurrentItem(e){this.getAllItems().forEach((t=>{t.setAttribute("tabindex",t===e?"0":"-1")}))}render(){return N`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}};hn.styles=pn,ve([Pe("slot")],hn.prototype,"defaultSlot",2),hn.define("sl-menu");var gn=s`
  ${le}

  :host {
    --submenu-offset: -2px;

    /* Private */
    --safe-triangle-cursor-x: 0;
    --safe-triangle-cursor-y: 0;
    --safe-triangle-submenu-start-x: 0;
    --safe-triangle-submenu-start-y: 0;
    --safe-triangle-submenu-end-x: 0;
    --safe-triangle-submenu-end-y: 0;

    display: block;
  }

  :host([inert]) {
    display: none;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    -webkit-user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /* Safe triangle */
  .menu-item--submenu-expanded::after {
    content: '';
    position: fixed;
    z-index: calc(var(--sl-z-index-dropdown) - 1);
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    clip-path: polygon(
      var(--safe-triangle-cursor-x) var(--safe-triangle-cursor-y),
      var(--safe-triangle-submenu-start-x) var(--safe-triangle-submenu-start-y),
      var(--safe-triangle-submenu-end-x) var(--safe-triangle-submenu-end-y)
    );
  }

  :host(:focus-visible) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'], :focus-visible)) .menu-item,
  .menu-item--submenu-expanded {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  :host(:focus-visible) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  /* Add elevation and z-index to submenus */
  sl-popup::part(popup) {
    box-shadow: var(--sl-shadow-large);
    z-index: var(--sl-z-index-dropdown);
    margin-left: var(--submenu-offset);
  }

  .menu-item--rtl sl-popup::part(popup) {
    margin-left: calc(-1 * var(--submenu-offset));
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`;const fn=(e,t)=>{const n=e._$AN;if(void 0===n)return!1;for(const e of n)e._$AO?.(t,!1),fn(e,t);return!0},mn=e=>{let t,n;do{if(void 0===(t=e._$AM))break;n=t._$AN,n.delete(e),e=t}while(0===n?.size)},bn=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),vn(t)}};function yn(e){void 0!==this._$AN?(mn(this),this._$AM=e,bn(this)):this._$AM=e}function wn(e,t=!1,n=0){const o=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(t)if(Array.isArray(o))for(let e=n;e<o.length;e++)fn(o[e],!1),mn(o[e]);else null!=o&&(fn(o,!1),mn(o));else fn(this,e)}const vn=e=>{e.type==$t&&(e._$AP??=wn,e._$AQ??=yn)};class kn extends Rt{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),bn(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(fn(this,e),mn(this))}setValue(e){if((e=>void 0===e.strings)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}class Sn{}const _n=new WeakMap,Cn=Dt(class extends kn{render(e){return V}update(e,[t]){const n=t!==this.G;return n&&void 0!==this.G&&this.ot(void 0),(n||this.rt!==this.lt)&&(this.G=t,this.ct=e.options?.host,this.ot(this.lt=e.element)),V}ot(e){if("function"==typeof this.G){const t=this.ct??globalThis;let n=_n.get(t);void 0===n&&(n=new WeakMap,_n.set(t,n)),void 0!==n.get(this.G)&&this.G.call(this.ct,void 0),n.set(this.G,e),void 0!==e&&this.G.call(this.ct,e)}else this.G.value=e}get rt(){return"function"==typeof this.G?_n.get(this.ct??globalThis)?.get(this.G):this.G?.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});var Pn=class{constructor(e,t,n){this.popupRef=new Sn,this.enableSubmenuTimer=-1,this.isConnected=!1,this.isPopupConnected=!1,this.skidding=0,this.submenuOpenDelay=100,this.handleMouseMove=e=>{this.host.style.setProperty("--safe-triangle-cursor-x",`${e.clientX}px`),this.host.style.setProperty("--safe-triangle-cursor-y",`${e.clientY}px`)},this.handleMouseOver=()=>{this.hasSlotController.test("submenu")&&this.enableSubmenu()},this.handleKeyDown=e=>{switch(e.key){case"Escape":case"Tab":this.disableSubmenu();break;case"ArrowLeft":e.target!==this.host&&(e.preventDefault(),e.stopPropagation(),this.host.focus(),this.disableSubmenu());break;case"ArrowRight":case"Enter":case" ":this.handleSubmenuEntry(e)}},this.handleClick=e=>{var t;e.target===this.host?(e.preventDefault(),e.stopPropagation()):e.target instanceof Element&&("sl-menu-item"===e.target.tagName||(null==(t=e.target.role)?void 0:t.startsWith("menuitem")))&&this.disableSubmenu()},this.handleFocusOut=e=>{e.relatedTarget&&e.relatedTarget instanceof Element&&this.host.contains(e.relatedTarget)||this.disableSubmenu()},this.handlePopupMouseover=e=>{e.stopPropagation()},this.handlePopupReposition=()=>{const e=this.host.renderRoot.querySelector("slot[name='submenu']"),t=null==e?void 0:e.assignedElements({flatten:!0}).filter((e=>"sl-menu"===e.localName))[0],n="rtl"===this.localize.dir();if(!t)return;const{left:o,top:r,width:i,height:a}=t.getBoundingClientRect();this.host.style.setProperty("--safe-triangle-submenu-start-x",`${n?o+i:o}px`),this.host.style.setProperty("--safe-triangle-submenu-start-y",`${r}px`),this.host.style.setProperty("--safe-triangle-submenu-end-x",`${n?o+i:o}px`),this.host.style.setProperty("--safe-triangle-submenu-end-y",`${r+a}px`)},(this.host=e).addController(this),this.hasSlotController=t,this.localize=n}hostConnected(){this.hasSlotController.test("submenu")&&!this.host.disabled&&this.addListeners()}hostDisconnected(){this.removeListeners()}hostUpdated(){this.hasSlotController.test("submenu")&&!this.host.disabled?(this.addListeners(),this.updateSkidding()):this.removeListeners()}addListeners(){this.isConnected||(this.host.addEventListener("mousemove",this.handleMouseMove),this.host.addEventListener("mouseover",this.handleMouseOver),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("click",this.handleClick),this.host.addEventListener("focusout",this.handleFocusOut),this.isConnected=!0),this.isPopupConnected||this.popupRef.value&&(this.popupRef.value.addEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.addEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!0)}removeListeners(){this.isConnected&&(this.host.removeEventListener("mousemove",this.handleMouseMove),this.host.removeEventListener("mouseover",this.handleMouseOver),this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("click",this.handleClick),this.host.removeEventListener("focusout",this.handleFocusOut),this.isConnected=!1),this.isPopupConnected&&this.popupRef.value&&(this.popupRef.value.removeEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.removeEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!1)}handleSubmenuEntry(e){const t=this.host.renderRoot.querySelector("slot[name='submenu']");if(!t)return void console.error("Cannot activate a submenu if no corresponding menuitem can be found.",this);let n=null;for(const e of t.assignedElements())if(n=e.querySelectorAll("sl-menu-item, [role^='menuitem']"),0!==n.length)break;if(n&&0!==n.length){n[0].setAttribute("tabindex","0");for(let e=1;e!==n.length;++e)n[e].setAttribute("tabindex","-1");this.popupRef.value&&(e.preventDefault(),e.stopPropagation(),this.popupRef.value.active?n[0]instanceof HTMLElement&&n[0].focus():(this.enableSubmenu(!1),this.host.updateComplete.then((()=>{n[0]instanceof HTMLElement&&n[0].focus()})),this.host.requestUpdate()))}}setSubmenuState(e){this.popupRef.value&&this.popupRef.value.active!==e&&(this.popupRef.value.active=e,this.host.requestUpdate())}enableSubmenu(t=!0){t?this.enableSubmenuTimer=e.setTimeout((()=>{this.setSubmenuState(!0)}),this.submenuOpenDelay):this.setSubmenuState(!0)}disableSubmenu(){clearTimeout(this.enableSubmenuTimer),this.setSubmenuState(!1)}updateSkidding(){var e;if(!(null==(e=this.host.parentElement)?void 0:e.computedStyleMap))return;const t=this.host.parentElement.computedStyleMap(),n=["padding-top","border-top-width","margin-top"].reduce(((e,n)=>{var o;const r=null!=(o=t.get(n))?o:new CSSUnitValue(0,"px");return e-(r instanceof CSSUnitValue?r:new CSSUnitValue(0,"px")).to("px").value}),0);this.skidding=n}isExpanded(){return!!this.popupRef.value&&this.popupRef.value.active}renderSubmenu(){const e="ltr"===this.localize.dir();return this.isConnected?N`
      <sl-popup
        ${Cn(this.popupRef)}
        placement=${e?"right-start":"left-start"}
        anchor="anchor"
        flip
        flip-fallback-strategy="best-fit"
        skidding="${this.skidding}"
        strategy="fixed"
      >
        <slot name="submenu"></slot>
      </sl-popup>
    `:N` <slot name="submenu" hidden></slot> `}},Mn=class{constructor(e,...t){this.slotNames=[],this.handleSlotChange=e=>{const t=e.target;(this.slotNames.includes("[default]")&&!t.name||t.name&&this.slotNames.includes(t.name))&&this.host.requestUpdate()},(this.host=e).addController(this),this.slotNames=t}hasDefaultSlot(){return[...this.host.childNodes].some((e=>{if(e.nodeType===e.TEXT_NODE&&""!==e.textContent.trim())return!0;if(e.nodeType===e.ELEMENT_NODE){const t=e;if("sl-visually-hidden"===t.tagName.toLowerCase())return!1;if(!t.hasAttribute("slot"))return!0}return!1}))}hasNamedSlot(e){return null!==this.host.querySelector(`:scope > [slot="${e}"]`)}test(e){return"[default]"===e?this.hasDefaultSlot():this.hasNamedSlot(e)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}};var En=s`
  ${le}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,xn="";function Tn(e){xn=e}var An={name:"default",resolver:e=>function(e=""){if(!xn){const e=[...document.getElementsByTagName("script")],t=e.find((e=>e.hasAttribute("data-shoelace")));if(t)Tn(t.getAttribute("data-shoelace"));else{const t=e.find((e=>/shoelace(\.min)?\.js($|\?)/.test(e.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(e.src)));let n="";t&&(n=t.getAttribute("src")),Tn(n.split("/").slice(0,-1).join("/"))}}return xn.replace(/\/$/,"")+(e?`/${e.replace(/^\//,"")}`:"")}(`assets/icons/${e}.svg`)},Ln={caret:'\n    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="6 9 12 15 18 9"></polyline>\n    </svg>\n  ',check:'\n    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n        <g stroke="currentColor">\n          <g transform="translate(3.428571, 3.428571)">\n            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>\n            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  ',"chevron-down":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',"chevron-left":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>\n    </svg>\n  ',"chevron-right":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',copy:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/>\n    </svg>\n  ',eye:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">\n      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>\n      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>\n    </svg>\n  ',"eye-slash":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">\n      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>\n      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>\n      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>\n    </svg>\n  ',eyedropper:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">\n      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>\n    </svg>\n  ',"grip-vertical":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">\n      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>\n    </svg>\n  ',indeterminate:'\n    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n        <g stroke="currentColor" stroke-width="2">\n          <g transform="translate(2.285714, 6.857143)">\n            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  ',"person-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">\n      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>\n    </svg>\n  ',"play-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>\n    </svg>\n  ',"pause-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>\n    </svg>\n  ',radio:'\n    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g fill="currentColor">\n          <circle cx="8" cy="8" r="3.42857143"></circle>\n        </g>\n      </g>\n    </svg>\n  ',"star-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">\n      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n    </svg>\n  ',"x-lg":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">\n      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>\n    </svg>\n  ',"x-circle-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">\n      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>\n    </svg>\n  '},$n=[An,{name:"system",resolver:e=>e in Ln?`data:image/svg+xml,${encodeURIComponent(Ln[e])}`:""}],Dn=[];function Rn(e){return $n.find((t=>t.name===e))}var In,On=Symbol(),Un=Symbol(),Fn=new Map,Hn=class extends Me{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(e,t){var n;let o;if(null==t?void 0:t.spriteSheet)return N`<svg part="svg">
        <use part="use" href="${e}"></use>
      </svg>`;try{if(o=await fetch(e,{mode:"cors"}),!o.ok)return 410===o.status?On:Un}catch(e){return Un}try{const e=document.createElement("div");e.innerHTML=await o.text();const t=e.firstElementChild;if("svg"!==(null==(n=null==t?void 0:t.tagName)?void 0:n.toLowerCase()))return On;In||(In=new DOMParser);const r=In.parseFromString(t.outerHTML,"text/html").body.querySelector("svg");return r?(r.part.add("svg"),document.adoptNode(r)):On}catch(e){return On}}connectedCallback(){var e;super.connectedCallback(),e=this,Dn.push(e)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){var e;super.disconnectedCallback(),e=this,Dn=Dn.filter((t=>t!==e))}getIconSource(){const e=Rn(this.library);return this.name&&e?{url:e.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){"string"==typeof this.label&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var e;const{url:t,fromLibrary:n}=this.getIconSource(),o=n?Rn(this.library):void 0;if(!t)return void(this.svg=null);let r=Fn.get(t);if(r||(r=this.resolveIcon(t,o),Fn.set(t,r)),!this.initialRender)return;const i=await r;if(i===Un&&Fn.delete(t),t===this.getIconSource().url)if(((e,t)=>void 0===t?void 0!==e?._$litType$:e?._$litType$===t)(i))this.svg=i;else switch(i){case Un:case On:this.svg=null,this.emit("sl-error");break;default:this.svg=i.cloneNode(!0),null==(e=null==o?void 0:o.mutator)||e.call(o,this.svg),this.emit("sl-load")}}render(){return this.svg}};Hn.styles=En,ve([function(e){return _e({...e,state:!0,attribute:!1})}()],Hn.prototype,"svg",2),ve([_e({reflect:!0})],Hn.prototype,"name",2),ve([_e()],Hn.prototype,"src",2),ve([_e()],Hn.prototype,"label",2),ve([_e({reflect:!0})],Hn.prototype,"library",2),ve([un("label")],Hn.prototype,"handleLabelChange",1),ve([un(["name","src","library"])],Hn.prototype,"setIcon",1);var zn=class extends Me{constructor(){super(...arguments),this.type="normal",this.checked=!1,this.value="",this.disabled=!1,this.localize=new cn(this),this.hasSlotController=new Mn(this,"submenu"),this.submenuController=new Pn(this,this.hasSlotController,this.localize),this.handleHostClick=e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())},this.handleMouseOver=e=>{this.focus(),e.stopPropagation()}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleHostClick),this.addEventListener("mouseover",this.handleMouseOver)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.handleHostClick),this.removeEventListener("mouseover",this.handleMouseOver)}handleDefaultSlotChange(){const e=this.getTextLabel();void 0!==this.cachedTextLabel?e!==this.cachedTextLabel&&(this.cachedTextLabel=e,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1})):this.cachedTextLabel=e}handleCheckedChange(){if(this.checked&&"checkbox"!==this.type)return this.checked=!1,void console.error('The checked attribute can only be used on menu items with type="checkbox"',this);"checkbox"===this.type?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){"checkbox"===this.type?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return function(e){if(!e)return"";const t=e.assignedNodes({flatten:!0});let n="";return[...t].forEach((e=>{e.nodeType===Node.TEXT_NODE&&(n+=e.textContent)})),n}(this.defaultSlot)}isSubmenu(){return this.hasSlotController.test("submenu")}render(){const e="rtl"===this.localize.dir(),t=this.submenuController.isExpanded();return N`
      <div
        id="anchor"
        part="base"
        class=${It({"menu-item":!0,"menu-item--rtl":e,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":this.isSubmenu(),"menu-item--submenu-expanded":t})}
        ?aria-haspopup="${this.isSubmenu()}"
        ?aria-expanded="${!!t}"
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span part="submenu-icon" class="menu-item__chevron">
          <sl-icon name=${e?"chevron-left":"chevron-right"} library="system" aria-hidden="true"></sl-icon>
        </span>

        ${this.submenuController.renderSubmenu()}
      </div>
    `}};zn.styles=gn,zn.dependencies={"sl-icon":Hn,"sl-popup":Ft},ve([Pe("slot:not([name])")],zn.prototype,"defaultSlot",2),ve([Pe(".menu-item")],zn.prototype,"menuItem",2),ve([_e()],zn.prototype,"type",2),ve([_e({type:Boolean,reflect:!0})],zn.prototype,"checked",2),ve([_e()],zn.prototype,"value",2),ve([_e({type:Boolean,reflect:!0})],zn.prototype,"disabled",2),ve([un("checked")],zn.prototype,"handleCheckedChange",1),ve([un("disabled")],zn.prototype,"handleDisabledChange",1),ve([un("type")],zn.prototype,"handleTypeChange",1),zn.define("sl-menu-item");var Bn=s`
  ${le}

  :host {
    display: block;
  }

  .menu-label {
    display: inline-block;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-500);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-large);
    user-select: none;
    -webkit-user-select: none;
  }
`,Gn=class extends Me{render(){return N` <slot part="base" class="menu-label"></slot> `}};Gn.styles=Bn,Gn.define("sl-menu-label"),Hn.define("sl-icon");var Nn=s`
  ${le}

  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,jn=class extends Me{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};jn.styles=Nn,ve([_e({type:Boolean,reflect:!0})],jn.prototype,"vertical",2),ve([un("vertical")],jn.prototype,"handleVerticalChange",1),jn.define("sl-divider");const{i18n:Vn,debug:qn,globalFunctional:Kn,configManager:Wn}=e.h5playerUIProvider,Jn=Wn.isGlobalStorageUsable(),Xn=[{title:Vn.t("download"),desc:Vn.t("download"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-download' viewBox='0 0 16 16'%3e %3cpath d='M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z'/%3e %3cpath d='M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z'/%3e%3c/svg%3e",action:"mediaDownload",args:null},{title:Vn.t("capture"),desc:Vn.t("capture"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-image' viewBox='0 0 16 16'%3e %3cpath d='M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z'/%3e %3cpath d='M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z'/%3e%3c/svg%3e",action:"capture",args:null},{title:Vn.t("speed"),desc:Vn.t("speed"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-fast-forward-btn' viewBox='0 0 16 16'%3e %3cpath d='M8.79 5.093A.5.5 0 0 0 8 5.5v1.886L4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L8 8.614V10.5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5Z'/%3e %3cpath d='M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4Z'/%3e%3c/svg%3e",dropdownMenu:[{title:"0.5x",desc:"0.5x",action:"setPlaybackRate",args:.5},{title:"0.75x",desc:"0.75x",action:"setPlaybackRate",args:.75},{title:"1.0x",desc:"1.0x",action:"setPlaybackRate",args:1},{title:"1.25x",desc:"1.25x",action:"setPlaybackRate",args:1.25},{title:"1.5x",desc:"1.5x",action:"setPlaybackRate",args:1.5},{title:"2.0x",desc:"2.0x",action:"setPlaybackRate",args:2},{title:"3.0x",desc:"3.0x",action:"setPlaybackRate",args:3},{title:"4.0x",desc:"4.0x",action:"setPlaybackRate",args:4},{title:"8.0x",desc:"8.0x",action:"setPlaybackRate",args:8},{title:"16.0x",desc:"16.0x",action:"setPlaybackRate",args:16}]},{title:Vn.t("menu"),desc:Vn.t("menu"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-list' viewBox='0 0 16 16'%3e %3cpath fill-rule='evenodd' d='M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z'/%3e%3c/svg%3e",dropdownMenu:[{title:Vn.t("graphicalInterface"),desc:Vn.t("graphicalInterface"),subMenu:[{title:Vn.t("disableCurrentInstanceGUI"),desc:Vn.t("disableCurrentInstanceGUI"),action:"disableCurrentInstanceGUI",args:null},{title:Vn.t("disableGUITemporarily"),desc:Vn.t("disableGUITemporarily"),action:"disableGUITemporarily",args:null},{...Kn.toggleGUIStatusUnderCurrentSite,action:"toggleGUIStatusUnderCurrentSite",args:null},{...Kn.toggleGUIStatus,action:"toggleGUIStatus",args:null,disabled:!Jn},{...Kn.alwaysShowGraphicalInterface,action:"alwaysShowGraphicalInterface",args:null,disabled:!qn.isDebugMode()||!Jn}]},{title:Vn.t("videoFilter"),desc:Vn.t("videoFilter"),subMenu:[{title:Vn.t("resetFilterAndTransform"),desc:Vn.t("resetFilterAndTransform"),action:"resetFilterAndTransform",args:null},{title:Vn.t("brightnessUp"),desc:Vn.t("brightnessUp"),action:"setBrightnessUp",args:.1},{title:Vn.t("brightnessDown"),desc:Vn.t("brightnessDown"),action:"setBrightnessDown",args:-.1},{title:Vn.t("contrastUp"),desc:Vn.t("contrastUp"),action:"setContrastUp",args:.1},{title:Vn.t("contrastDown"),desc:Vn.t("contrastDown"),action:"setContrastDown",args:-.1},{title:Vn.t("saturationUp"),desc:Vn.t("saturationUp"),action:"setSaturationUp",args:.1},{title:Vn.t("saturationDown"),desc:Vn.t("saturationDown"),action:"setSaturationDown",args:-.1},{title:Vn.t("hueUp"),desc:Vn.t("hueUp"),action:"setHueUp",args:1},{title:Vn.t("hueDown"),desc:Vn.t("hueDown"),action:"setHueDown",args:-1},{title:Vn.t("blurUp"),desc:Vn.t("blurUp"),action:"setBlurUp",args:1},{title:Vn.t("blurDown"),desc:Vn.t("blurDown"),action:"setBlurDown",args:-1}]},{title:Vn.t("rotateAndMirror"),desc:Vn.t("rotateAndMirror"),action:"rotateAndMirror",subMenu:[{title:Vn.t("rotate90"),desc:Vn.t("rotate90"),action:"setRotate",args:null},{title:Vn.t("horizontalMirror"),desc:Vn.t("horizontalMirror"),action:"setMirror",args:null},{title:Vn.t("verticalMirror"),desc:Vn.t("verticalMirror"),action:"setMirror",args:!0}]},{title:Vn.t("videoTransform"),desc:Vn.t("videoTransform"),action:"translate",subMenu:[{title:Vn.t("translateRight"),desc:Vn.t("translateRight"),action:"setTranslateRight",args:null},{title:Vn.t("translateLeft"),desc:Vn.t("translateLeft"),action:"setTranslateLeft",args:null},{title:Vn.t("translateUp"),desc:Vn.t("translateUp"),action:"setTranslateUp",args:null},{title:Vn.t("translateDown"),desc:Vn.t("translateDown"),action:"setTranslateDown",args:null}]},{title:Vn.t("moreActions"),desc:Vn.t("moreActions"),subMenu:[{title:"Clean remote helper info",desc:"Clean remote helper info",action:"cleanRemoteHelperInfo",disabled:!qn.isDebugMode()},{title:"Print Player info",desc:"Print Player info",action:"printPlayerInfo",disabled:!qn.isDebugMode()},{...Kn.openCustomConfigurationEditor,action:"openCustomConfigurationEditor",args:null,disabled:!0},{title:Vn.t("comingSoon"),desc:Vn.t("comingSoon")}]},{divider:!0},{title:Vn.t("keyboardControl"),desc:Vn.t("keyboardControl"),subMenu:[{...Kn.openHotkeysPage,action:"openHotkeysPage",args:""},{title:Vn.t("toggleHotkeysTemporarily"),desc:Vn.t("toggleHotkeysTemporarily"),action:"toggleHotkeys"},{...Kn.toggleHotkeysStatusUnderCurrentSite,action:"toggleHotkeysStatusUnderCurrentSite"},{...Kn.toggleHotkeysStatus,action:"toggleHotkeysStatus",disabled:!Jn}]},{title:Vn.t("mouseControl"),desc:Vn.t("mouseControl"),subMenu:[{...Kn.setMouseLongPressTime,action:"setMouseLongPressTime"},{...Kn.toggleMouseControlUnderCurrentSite,action:"toggleMouseControlUnderCurrentSite"},{...Kn.toggleMouseControl,action:"toggleMouseControl",disabled:!Jn},{title:Vn.t("comingSoon"),desc:Vn.t("comingSoon")}]},{title:Vn.t("mediaDownload.downloadOptions"),desc:Vn.t("mediaDownload.downloadOptions"),subMenu:[{...Kn.toggleDownloadControlUnderCurrentSite,action:"toggleDownloadControlUnderCurrentSite"},{...Kn.toggleDownloadControl,action:"toggleDownloadControl",disabled:!Jn},{title:`${Vn.t("toggleStates")} ${Vn.t("autoGotoBufferedTime")}`,desc:`${Vn.t("toggleStates")} ${Vn.t("autoGotoBufferedTime")}`,action:"toggleAutoGotoBufferedTime"},{title:Vn.t("ffmpegScript"),desc:Vn.t("ffmpegScript"),url:"https://u.anzz.top/ffmpegscript"}]},{title:Vn.t("faq"),desc:Vn.t("faq"),subMenu:[{title:"倍速刷课为啥学习进度没变化",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%80%8D%E9%80%9F%E5%88%B7%E8%AF%BE%E4%B8%BA%E5%95%A5%E5%AD%A6%E4%B9%A0%E8%BF%9B%E5%BA%A6%E6%B2%A1%E5%8F%98%E5%8C%96"},{title:"百度网盘视频无法倍速播放",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E8%A7%86%E9%A2%91%E6%97%A0%E6%B3%95%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE"},{title:"倍速播放卡顿、无进度、音画不同步",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE%E5%8D%A1%E9%A1%BF%E3%80%81%E6%97%A0%E8%BF%9B%E5%BA%A6%E3%80%81%E9%9F%B3%E7%94%BB%E4%B8%8D%E5%90%8C%E6%AD%A5"},{title:"Playback is stuttering, has no progress, or is out of sync",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#playback-is-stuttering-has-no-progress-or-is-out-of-sync"},{title:"如何支持本地视频文件的倍速播放",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%A6%82%E4%BD%95%E6%94%AF%E6%8C%81%E6%9C%AC%E5%9C%B0%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E7%9A%84%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE"},{title:"How can I support speed playback for local video files?",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#how-can-i-support-speed-playback-for-local-video-files"},{title:"开启插件后网站自身的调速失效了",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%BC%80%E5%90%AF%E6%8F%92%E4%BB%B6%E5%90%8E%E7%BD%91%E7%AB%99%E8%87%AA%E8%BA%AB%E7%9A%84%E8%B0%83%E9%80%9F%E5%A4%B1%E6%95%88%E4%BA%86"},{title:"The site's own speed control fails after enabling the plugin",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#the-site-s-own-speed-control-fails-after-enabling-the-plugin"},{title:"为什么视频跟音频是分开下载的",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A7%86%E9%A2%91%E8%B7%9F%E9%9F%B3%E9%A2%91%E6%98%AF%E5%88%86%E5%BC%80%E4%B8%8B%E8%BD%BD%E7%9A%84"},{title:"Why are video and audio downloaded separately?",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#why-are-video-and-audio-downloaded-separately"},{title:"如何合并下载到的音视频文件",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E4%B8%8B%E8%BD%BD%E5%88%B0%E7%9A%84%E9%9F%B3%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6"},{title:"How to merge downloaded audio and video files",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#how-to-merge-downloaded-audio-and-video-files"},{title:"为什么视频截图不同网站表现不一致",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A7%86%E9%A2%91%E6%88%AA%E5%9B%BE%E4%B8%8D%E5%90%8C%E7%BD%91%E7%AB%99%E8%A1%A8%E7%8E%B0%E4%B8%8D%E4%B8%80%E8%87%B4"},{title:"Why is video screenshot functionality inconsistent across websites?",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#why-is-video-screenshot-functionality-inconsistent-across-websites"},{title:"如何禁用或自定义快捷键",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%A6%82%E4%BD%95%E7%A6%81%E7%94%A8%E6%88%96%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BF%AB%E6%8D%B7%E9%94%AE"},{title:"How to Disable or Customize Shortcut Keys",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#how-to-disable-or-customize-shortcut-keys"}]},{title:Vn.t("setting"),desc:Vn.t("setting"),subMenu:[{...Kn.openCustomConfigurationEditor,action:"openCustomConfigurationEditor",args:""},{...Kn.restoreGlobalConfiguration,action:"restoreGlobalConfiguration",args:"",disabled:!Jn},{...Kn.toggleScriptEnableState,action:"toggleScriptEnableState",args:null},{...Kn.toggleSetCurrentTimeFunctional,action:"toggleSetCurrentTimeFunctional",args:""},{...Kn.toggleSetVolumeFunctional,action:"toggleSetVolumeFunctional",args:""},{...Kn.toggleGUIStatus,action:"toggleGUIStatus",args:null,disabled:!Jn},{...Kn.toggleSetPlaybackRateFunctional,action:"toggleSetPlaybackRateFunctional",args:"",disabled:!Jn},{...Kn.toggleAcousticGainFunctional,action:"toggleAcousticGainFunctional",args:"",disabled:!Jn},{...Kn.toggleCrossOriginControlFunctional,action:"toggleCrossOriginControlFunctional",args:"",disabled:!Jn},{...Kn.toggleExperimentFeatures,action:"toggleExperimentFeatures",args:"",disabled:!Jn},{...Kn.toggleExternalCustomConfiguration,action:"toggleExternalCustomConfiguration",args:"",disabled:!Jn},{...Kn.toggleDebugMode,action:"toggleDebugMode",args:"",disabled:!Jn},{title:`${Vn.t("languageSettings")}「${Vn.t("globalSetting")}」`,desc:`${Vn.t("languageSettings")}「${Vn.t("globalSetting")}」`,disabled:!Jn,subMenu:[{title:Vn.t("autoChoose"),desc:Vn.t("autoChoose"),action:"setLanguage",args:"auto"},{title:"简体中文",desc:"简体中文",action:"setLanguage",args:"zh-CN"},{title:"繁體中文",desc:"繁體中文",action:"setLanguage",args:"zh-TW"},{title:"English",desc:"English",action:"setLanguage",args:"en-US"},{title:"русский",desc:"русский",action:"setLanguage",args:"ru"}]}]},{title:Vn.t("about"),desc:Vn.t("about"),subMenu:[{...Kn.openWebsite,action:"openWebsite",args:""},{...Kn.openProjectGithub,action:"openProjectGithub",args:""},{...Kn.openIssuesPage,action:"openIssuesPage",args:""},{...Kn.openAddGroupChatPage,action:"openAddGroupChatPage",args:""},{...Kn.openChangeLogPage,action:"openChangeLogPage",args:""},{...Kn.openCheckVersionPage,action:"openCheckVersionPage",args:""},{...Kn.openDonatePage,action:"openDonatePage",args:""},{...Kn.openAboutDonatePage,action:"openAboutDonatePage",args:""},{...Kn.openAuthorHomePage,action:"openAuthorHomePage",args:""}]},{title:Vn.t("more"),desc:Vn.t("more"),disabled:!0,subMenu:[{title:Vn.t("ffmpegScript"),desc:Vn.t("ffmpegScript"),url:"https://u.anzz.top/ffmpegscript"}]}]}];function Yn(e,t){const n=t.offsetWidth<500;return e.map((e=>(e.dropdownMenu&&(e.dropdownMenu=Yn(e.dropdownMenu,t)),{...e,iconOnly:n})))}function Zn(e,t=!0){const n=e.map((e=>{if(e.disabled)return"";const t=e.lang||e.language||e.languages;if(t&&!Vn.isMatchCurLang(t))return"";const n=(e.title instanceof Function?e.title():e.title)||"",o=(e.desc instanceof Function?e.desc():e.desc)||"",r=e.id||Math.random().toString(36).substr(2);return e.subMenu?`\n        <sl-menu-item class="h5p-menu-action" value="${r}" title="${o||n}" data-action="${e.action||""}" data-args='${JSON.stringify(e.args||null)}'>\n          ${n}\n          <sl-menu slot="submenu">\n            ${Zn(e.subMenu,!1)}\n          </sl-menu>\n        </sl-menu-item>\n      `:e.divider?"<sl-divider></sl-divider>":`<sl-menu-item class="h5p-menu-action" value="${r}" title="${o||n}" data-action="${e.action||""}" data-args='${JSON.stringify(e.args||null)}' data-url="${e.url||""}">\n        ${n}\n      </sl-menu-item>\n      `})).join("");return t?`<sl-menu>${n}</sl-menu>`:n}function Qn(e){return`\n  <div class="h5p-action-mod">\n      ${e.map((e=>{if(e.disabled)return"";const t=e.lang||e.language||e.languages;if(t&&!Vn.isMatchCurLang(t))return"";const n=(e.title instanceof Function?e.title():e.title)||"",o=(e.desc instanceof Function?e.desc():e.desc)||"",r=e.icon?`<sl-icon src="${e.icon}"></sl-icon>`:"",i=e.iconOnly&&r?"":`<span class="h5p-desc">${n}</span>`;return e.dropdownMenu?`\n            <sl-dropdown distance="6">\n              <span slot="trigger" class="h5p-action-btn" title="${o||n}" data-title="${n}" data-action="${e.action||""}">\n                ${r}\n                ${i}\n              </span>\n              ${Zn(e.dropdownMenu)}\n            </sl-dropdown>\n          `:`\n            <span class="h5p-action-btn h5p-menu-action" title="${o||n}" data-title="${n}" data-action="${e.action||""}" data-args='${JSON.stringify(e.args||null)}'>\n              ${r}\n              ${i}\n            </span>\n          `})).join("")} \n  </div>\n  `}function eo(e=Xn||[]){return Qn(e)}const to=[{title:"【h5player】使用手册",url:"https://u.anzz.top/h5pmanual",priority:99,i18n:{en:{title:"【h5player】User Manual"}}},{title:"【h5player】音视频一键合并工具，无需二次编码",desc:"将h5player下载到的音视频文件自动合并成一个文件，不经过二次编码，可快速合并",url:"https://u.anzz.top/ffmpegscript",i18n:{en:{title:"【h5player】Audio and video merge tool, no secondary coding required",desc:"Automatically merge the audio and video files downloaded by h5player into one file without secondary coding, which can be quickly merged"}}},{title:"【Hello-AI】抢走你工作的不是AI，而是掌握使用AI工具的人",url:"https://u.anzz.top/ai",i18n:{en:{title:"【Hello-AI】It's not AI that takes away your job, but the person who knows how to use AI tools"}}}];function no(e){if(!(Jn&&Wn.getGlobalStorage("ui.mod.recommend.enable")))return"";if(e.offsetWidth<500)return"";let t=Wn.getGlobalStorage("recommendList")||to;t=t.filter((e=>!e.disabled));const n=Vn.language()||"",o=n.replace("-",""),r=n.replace("-","_"),i=n.split("-")[0];if(t=t.filter((e=>{const t=e.lang||e.language||e.languages;return!t||Vn.isMatchCurLang(t)})),!t.length)return"";t.length>5&&(t=t.sort((()=>Math.random()-.5)).slice(0,5)),t=t.sort(((e,t)=>(t.priority||0)-(e.priority||0)));return`<div class="h5p-recommend-mod" >${t.map((e=>{let t=e.title||"",a=e.desc||"",s=e.url||"";if(e.i18n){const l=e.i18n[`${n}`]||e.i18n[`${o}`]||e.i18n[`${r}`]||e.i18n[`${i}`];l&&(t=l.title||t,a=l.desc||a,s=l.url||s)}return`<a class="h5p-recommend-item" href="${s}" title="${a}" target="_blank">${t}</a>`})).join("")}</div>`}function oo(e,t){if(!t&&(!e||e.__h5pRecommendModRegistered__))return;let n=0;e.__stopToggle__=!1;const o=()=>{if(e.__stopToggle__)return;const t=e.querySelectorAll(".h5p-recommend-item");t.forEach(((e,t)=>{t===n?e.classList.add("h5p-recommend-item__active"):e.classList.remove("h5p-recommend-item__active")})),n=(n+1)%t.length};o(),clearInterval(e.__h5pRecommendModInterval__),e.__h5pRecommendModInterval__=setInterval(o,3e3),t||(e.addEventListener("mouseenter",(()=>{e.__stopToggle__=!0})),e.addEventListener("mouseleave",(()=>{e.__stopToggle__=!1}))),e.__h5pRecommendModRegistered__=!0}if(!e.h5playerUIProvider)throw new Error("h5playerUIProvider is not defined, please check if you have imported h5playerUIProvider.js");const{debug:ro,parseHTML:io,observeVisibility:ao,isOutOfDocument:so,configManager:lo,device:co}=e.h5playerUIProvider,uo={};function po(e){const t=document.querySelector(`#${e}`);t&&t.remove(),delete uo[e]}function ho(e){if(!e)return!1;const t=e.getAttribute("data-popup-wrap-id");t&&po(t)}function go(){Object.keys(uo).forEach((e=>{const t=uo[e];so(t)&&po(e)}))}const fo={async init(){ro.log("h5playerUI init"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]},disableGUITemporarily(){this.__disableGUITemporarily__=!0;Object.keys(uo).forEach((e=>{po(e)}))},getAllPopupWrapElement:function(){return document.querySelectorAll(".h5player-popup-wrap")},findPopupWrapWithElement:function(e){const t=[];return Object.keys(uo).forEach((n=>{uo[n]===e&&t.push(n)})),t.map((e=>document.querySelector(`#${e}`)))},cleanPopupWrap:go,removePopupWrapById:po,removePopupWrapByElement:ho,popup(e,t){if(this.__disableGUITemporarily__||e.__disableGUITemporarily__)return!1;if(e.videoWidth/e.videoHeight>2.5)return!1;if(this.lastRenderedPopupTime&&Date.now()-this.lastRenderedPopupTime<100)return!1;if(this.lastRenderedPopupTime=Date.now(),e.__popupRenderedCount__&&e.__popupRenderedCount__>15)return!1;if(e.__popupRenderedCount__=e.__popupRenderedCount__?e.__popupRenderedCount__+1:1,!e||!e.tagName||"video"!==e.tagName.toLowerCase()||so(e))return!1;let n=e.getAttribute("data-popup-wrap-id");n||(n="h5player-popup-wrap-"+Math.random().toString(36).substr(2),e.setAttribute("data-popup-wrap-id",n));let o=document.querySelector(`#${n}`);if(uo[n]||(uo[n]=e),o){const e=o.querySelector("sl-popup");return void(e&&e.reposition())}const r=eo(Yn(Xn,e));o=io(`\n      <div id="${n}" class="h5player-popup-wrap">\n        <sl-popup placement="top" sync="width">\n        <div class="h5player-popup-content">\n          <div class="h5p-logo-wrap">\n            <a class="h5p-logo-mod" href="${Kn.getHomePageLink.fn()}" target="_blank">h5player</a>\n          </div>\n          <div class="h5p-recommend-wrap">\n            <div style="overflow:hidden">${no(e)}</div>\n          </div>\n          <div class="h5p-menu-wrap">\n            ${r}\n          </div>\n        </div>\n        </sl-popup>\n      </div>\n    `,document.body)[0],setTimeout((()=>{oo(o.querySelector(".h5p-recommend-wrap"))}),100);const i=o.querySelector("sl-popup");function a(){return!!(i&&i.updateComplete&&i.updateComplete.then)||(e.removeAttribute("data-popup-wrap-id"),o.remove(),delete uo[n],!1)}function s(){const t=o.querySelector(".h5player-popup-content .h5p-menu-wrap"),n=o.querySelector(".h5p-action-mod");if(t&&n){t.removeChild(n);const r=eo(Yn(Xn,e));io(r,t);const i=o.querySelectorAll("sl-icon");i&&i.forEach((e=>{e.addEventListener("sl-error",(e=>{const t=e.target.parentElement;e.target.remove(),t.getAttribute("data-title")&&(t.innerText=t.getAttribute("data-title"))}),{once:!0})}))}}customElements.whenDefined("sl-popup").then((()=>{if(!a())return!1;i.updateComplete.then((()=>{i.anchor=e,i.distance=-48,i.active=!0,setTimeout((()=>{i.reposition()}),600)}))})),setTimeout((()=>{s()}),400);const l="h5player-popup-active",c="h5player-popup-full-active",u=lo.getGlobalStorage("ui.alwaysShow");let d=null;async function p(e){const t=e.target,n="h5p-action-btn";if(!t.classList.contains(n)&&!t.parentElement.classList.contains(n))return!1;const r=o.querySelectorAll("sl-dropdown"),i="sl-dropdown"===t.parentElement.tagName.toLowerCase()?t.parentElement:t.parentElement.parentElement;return i&&"sl-dropdown"===i.tagName.toLowerCase()?(r.forEach((async e=>{e!==i&&(e._open_=!1,await e.hide())})),"mousemove"===e.type?(i._open_=!0,await i.show(),!1):void(i._open_?(await i.hide(),i._open_=!1,i.addEventListener("sl-after-show",(()=>{i._open_=!0}),{once:!0})):(await i.show(),i._open_=!0,i.addEventListener("sl-after-hide",(()=>{i._open_=!1}),{once:!0})))):(r.forEach((e=>{e.open=!1,e._open_=!1})),!1)}if(o.addEventListener("mouseenter",(()=>{if(e.videoWidth/e.videoHeight>2.5)return e.__disableGUITemporarily__=!0,ho(e),!1;clearTimeout(d),so(e)?o.classList.remove(c):o.classList.add(c),i.reposition()})),o.addEventListener("mouseleave",(()=>{clearTimeout(d),so(e)?o.classList.remove(c):d=setTimeout((()=>{!u&&!e.paused&&o.classList.remove(l),!u&&!e.paused&&o.classList.remove(c);o.querySelectorAll("sl-dropdown").forEach((e=>{e._open_=!1,e.open=!1})),s()}),500)})),!co.isMobile()){let t=Date.now();o.addEventListener("mousemove",(n=>{const r=Date.now();r-t>100&&(t=r,so(e)?(clearTimeout(d),o.classList.remove(c)):i.reposition()),p(n)}))}o.addEventListener("click",(n=>{p(n),function(e){const{event:t,h5Player:n,h5playerUI:o,videoElement:r,popup:i,actionCallback:a}=e,s=t.target.closest(".h5p-menu-action");if(!s)return void qn.log("[menuActionHandler]","未找到actionDOM",t.target);const l=s.getAttribute("data-action"),c=JSON.parse(s.getAttribute("data-args")||null),u=s.getAttribute("data-url");if(u)Kn.openInTab(u);else{if(n.setPlayerInstance(r),"disableGUITemporarily"===l)return o.disableGUITemporarily(),void qn.log("[menuActionHandler][disableGUITemporarily]");if(l&&(n[l]instanceof Function||Kn[l])){try{"setPlaybackRate"===l?n.setPlaybackRate(c,!1,!1,!0):Kn[l]&&Kn[l].fn instanceof Function?Kn[l].fn(c):(n[l](c),i&&i.reposition())}catch(e){qn.error("[menuActionHandler][error]",e)}a instanceof Function&&a(l,c)}}}({event:n,videoElement:e,h5Player:t,h5playerUI:this,popup:i,actionCallback:(e,t)=>{s()}})})),ao(((t,n)=>{let r=!1;if(t?(so(e)||(r=!0),e&&e.paused&&!so(e)?e.currentTime&&e.currentTime>1.5&&o.classList.add(l):u?(o.classList.add(l),o.classList.add(c)):(o.classList.remove(l),o.classList.remove(c))):(r=!1,o.classList.remove(l),o.classList.remove(c)),!a())return!1;i.updateComplete.then((()=>{i.active=r,i.reposition()}))}),e),i.oldRect=e.getBoundingClientRect(),i.addEventListener("sl-reposition",(()=>{if(so(e))i.active=!1,o.classList.remove(l),o.classList.remove(c);else{const t=e.getBoundingClientRect();t.width!==i.oldRect.width&&(i.oldRect=t,s(),function(){const t=o.querySelector(".h5player-popup-content .h5p-recommend-wrap"),n=o.querySelector(".h5player-popup-content .h5p-recommend-wrap>div");if(t&&n){t.removeChild(n);const o=`<div style="overflow:hidden">${no(e)}</div>`;io(o,t),oo(t,!0)}}())}})),e.addEventListener("play",(()=>{u?(o.classList.add(l),o.classList.add(c)):(o.classList.remove(l),o.classList.remove(c)),so(e)?i.active=!1:i.active=!0,i.reposition(),go(),s()})),e.addEventListener("pause",(()=>{s(),u?(o.classList.add(l),o.classList.add(c)):e.currentTime&&e.currentTime>1.5&&o.classList.add(l),so(e)?(i.active=!1,o.classList.remove(l),o.classList.remove(c)):i.active=!0,i.reposition(),go()}));let h=Date.now();e.addEventListener("timeupdate",(()=>{const t=Date.now();!so(e)&&t-h>400&&(h=t,i.reposition())})),go()}};return fo}();return t},supportMediaTags=["video","bwp-video"];let TCC=null;const h5Player={version:"4.2.7",mediaCore:mediaCore,mediaPlusApi:null,mediaSource:mediaSource,configManager:configManager,fontSize:12,enable:!0,globalMode:!0,playerInstance:null,scale:1,translate:{x:0,y:0},rotate:0,rotateY:0,rotateX:0,defaultTransform:{scale:1,translate:{x:0,y:0},rotate:0,rotateY:0,rotateX:0},historyTransform:{},playbackRate:configManager.get("media.playbackRate"),volume:configManager.get("media.volume"),lastPlaybackRate:configManager.get("media.lastPlaybackRate"),skipStep:5,mouseObserver:new MouseObserver,disableHotkeysTemporarily(){this.__disableHotkeysTemporarily__=!0},enableHotkeys(){this.__disableHotkeysTemporarily__=!1},toggleHotkeys(){window.confirm(this.__disableHotkeysTemporarily__?i18n.t("enableHotkeys"):i18n.t("disableHotkeys"))&&(this.__disableHotkeysTemporarily__=!this.__disableHotkeysTemporarily__)},debuggerNow(){if(debug.isDebugMode()){const e=document.createElement("script");e.innerText="debugger",document.body.appendChild(e)}},disableCurrentInstanceGUI(){const e=this,t=e.player();t&&e.UI&&e.UI.removePopupWrapByElement&&(t.__disableGUITemporarily__=!0,e.UI.removePopupWrapByElement(t))},player:function(){const e=this;let t=e.playerInstance;if(!t){const n=e.getPlayerList();n.length&&(t=n[n.length-1],e.playerInstance=t,e.initPlayerInstance(1===n.length))}return t&&!e.mediaPlusApi&&(e.mediaPlusApi=mediaCore.mediaPlus(t)),t},isAudioInstance(){return isAudioElement(this.player())},getPlayerList:function(){const e=mediaCore.mediaElementList||[];function t(t){supportMediaTags.forEach((n=>{t.querySelectorAll(n).forEach((function(t){"bwp-video"===t.tagName.toLowerCase()&&(t.HTMLVideoElement=!0),isMediaElement(t)&&!e.includes(t)&&e.push(t)}))}))}return t(document),window._shadowDomList_&&window._shadowDomList_.forEach((function(e){t(e)})),e},getPlayerWrapDom:function(){const e=this.player();if(!e)return;let t=null;const n=e.getBoundingClientRect();return eachParentNode(e,(function(e){if(e===document||!e.getBoundingClientRect)return;const o=e.getBoundingClientRect();o.width&&o.height&&o.width===n.width&&o.height===n.height&&(t=e)})),t},async mountToGlobal(){try{const e=await getPageWindow();e&&(e._h5Player=h5Player||"null",window.top!==window&&(e._h5PlayerInFrame=h5Player||"null"),e._window=window||"",debug.log("h5Player对象已成功挂载到全局"))}catch(e){debug.error(e)}},initPlayerInstance(e){const t=this;if(!t.playerInstance)return;const n=t.playerInstance;if(t.mediaPlusApi=mediaCore.mediaPlus(n),t.initPlaybackRate(),t.isFoucs(),t.proxyPlayerInstance(n),t.unLockPlaybackRate(),t.setPlaybackRate(),t.lockPlaybackRate(1e3),n._fullScreen_=new FullScreen(n),n._fullPageScreen_=new FullScreen(n,!0),t.registerHotkeysRunner(),n._hasCanplayEvent_||(n.addEventListener("canplay",(function(e){t.initAutoPlay(n)})),n._hasCanplayEvent_=!0),!n._hasPlayerInitEvent_){let e=0;n.addEventListener("playing",(function(o){t.unLockPlaybackRate(),t.setPlaybackRate(null,!0),t.lockPlaybackRate(1e3),!0===configManager.get("enhance.blockSetVolume")&&!1===o.target.muted&&t.setVolume(configManager.getGlobalStorage("media.volume"),!0),!0===configManager.get("enhance.blockSetCurrentTime")&&t.lockCurrentTime(),t.setPlayProgress(n),0===e?(t.unLockPlaybackRate(),t.setPlaybackRate(),t.lockPlaybackRate(1e3),setTimeout((()=>{t.playProgressRecorder(n)}),2e3)):(t.unLockPlaybackRate(),t.setPlaybackRate(null,!0),t.lockPlaybackRate(1e3)),e+=1})),n._hasPlayerInitEvent_=!0}TCC.getTaskConfig().init&&TCC.doTask("init",n);const o=!n.__registeredInitEvent__;function r(e){const t=e.currentSrc||e.src;t&&(e.srcList=e.srcList||[t],e.srcList.includes(t)||e.srcList.push(t))}o&&t.mouseObserver.on(n,"click",(function(e,t,n){})),o&&n.addEventListener("enterpictureinpicture",(()=>{monkeyMsg.send("globalPictureInPictureInfo",{usePictureInPicture:!0}),debug.log("enterpictureinpicture",n)})),o&&n.addEventListener("leavepictureinpicture",(()=>{t.leavepictureinpictureTime=Date.now(),monkeyMsg.send("globalPictureInPictureInfo",{usePictureInPicture:!1}),debug.log("leavepictureinpicture",n)})),o&&n.addEventListener("loadeddata",(function(){debug.log(`[player][loadeddata] ${n.src} video duration: ${n.duration} video dom:`,n),r(n)})),o&&n.addEventListener("durationchange",(function(){debug.log(`[player][durationchange] ${n.duration}`),r(n)})),o&&n.addEventListener("loadstart",(function(){debug.log("[player][loadstart]",n.currentSrc,n.src),r(n)})),t.UI&&t.UI.popup&&t.UI.popup(n,t),o&&n.addEventListener("play",(function(){t.UI&&t.UI.popup&&t.UI.popup(n,t)})),o&&n.addEventListener("pause",(function(){t.UI&&t.UI.popup&&t.UI.popup(n,t)}));let i=Date.now(),a=0;o&&n.addEventListener("timeupdate",(function(){Date.now()-i>800&&a<60&&(i=Date.now(),a+=1,t.UI&&t.UI.popup&&t.UI.popup(n,t)),r(n),mediaSource.connectMediaSourceWithMediaElement(n)}));let s=Date.now();o&&n.addEventListener("progress",(()=>{!function(e){if(e.buffered.length>0){const t=e.buffered.end(e.buffered.length-1);e.bufferedTime=t}t.autoGotoBufferedTime&&e.bufferedTime&&t.player()===e&&e.bufferedTime<e.duration-1&&e.currentTime<e.bufferedTime-1&&t.setCurrentTime(e.bufferedTime)}(n),mediaSource.connectMediaSourceWithMediaElement(n),Date.now()-s>1e4&&(s=Date.now(),mediaSource.cleanMediaSourceData())})),o&&n.addEventListener("durationchange",(function(){i=Date.now(),a=0,t.UI&&t.UI.popup&&t.UI.popup(n,t)})),n.__registeredInitEvent__=!0},registerHotkeysRunner(){this.hotkeysRunner||(this.hotkeysRunner=new HotkeysRunner(configManager.get("hotkeys")),isInIframe()&&!isInCrossOriginFrame()&&this.hotkeysRunner.setCombinationKeysMonitor(window.top))},isLeavepictureinpictureAwhile(){return this.leavepictureinpictureTime&&Date.now()-this.leavepictureinpictureTime<1e4},proxyPlayerInstance(e){if(!e)return;["play","pause"].forEach((t=>{const n="origin_"+t;if(Reflect.has(e,t)&&!Reflect.has(e,n)){e[n]=e[t];const o=new Proxy(e[t],{apply(n,o,r){const i=e._hangUpInfo_||{},a=i[t]||i["hangUp_"+t];return a&&a.timeout>=Date.now()?(debug.log(t+"已被挂起，本次调用将被忽略"),!1):n.apply(o||e,r)}});e[t]=o}})),e._hangUp_||(e._hangUpInfo_={},e._hangUp_=function(t,n){n=Number(n)||200,e._hangUpInfo_[t]={timeout:Date.now()+n}},e._unHangUp_=function(t){e._hangUpInfo_&&e._hangUpInfo_[t]&&(e._hangUpInfo_[t].timeout=Date.now()-1)})},initAutoPlay:function(e){const t=this,n=e||t.player(),o=TCC.getTaskConfig();if(o.autoPlay&&(null===configManager.getLocalStorage("media.autoPlay")&&configManager.setLocalStorage("media.autoPlay",!0),addMenu({title:()=>configManager.getLocalStorage("media.autoPlay")?i18n.t("disableInitAutoPlay"):i18n.t("enableInitAutoPlay"),fn:()=>{if(window.confirm(configManager.getLocalStorage("media.autoPlay")?i18n.t("disableInitAutoPlay"):i18n.t("enableInitAutoPlay"))){const e=configManager.getLocalStorage("media.autoPlay");null===e?alert(i18n.t("configFail")):configManager.setLocalStorage("media.autoPlay",!e)}}})),!configManager.get("media.autoPlay")||!e&&t.hasInitAutoPlay||!n||e&&e!==t.player()||document.hidden)return!1;if(!isInViewPort(n)||isInIframe())return!1;if(!o.autoPlay)return!1;if(t.hasInitAutoPlay=!0,n&&o.autoPlay&&n.paused&&(TCC.doTask("autoPlay"),n.paused)){if(n._initAutoPlayCount_||(n._initAutoPlayCount_=1),n._initAutoPlayCount_+=1,n._initAutoPlayCount_>=10)return!1;setTimeout((function(){t.initAutoPlay(n)}),200)}},printPlayerInfo(e){const t=this,n=e||t.player(),o={curPlayer:n,srcList:n.srcList,h5player:t,h5playerUI:t.UI,mediaSource:mediaSource,window:window};t.UI&&t.UI.findPopupWrapWithElement&&(o.curlPopupWrap=t.UI.findPopupWrapWithElement(n),o.allPopupWrap=t.UI.getAllPopupWrapElement()),debug.info("[playerInfo]",o)},setFullScreen(){const e=this.player();!TCC.doTask("fullScreen")&&e&&e._fullScreen_&&e._fullScreen_.toggle()},setWebFullScreen:function(){const e=this.player();!TCC.doTask("webFullScreen")&&e&&e._fullPageScreen_&&e._fullPageScreen_.toggle()},initPlaybackRate(){this.playbackRate=this.getPlaybackRate()},playbackRateInfo:{lockTimeout:Date.now()-1,time:Date.now(),value:-1},getPlaybackRate(){let e=configManager.get("media.playbackRate")||this.playbackRate;if(isInIframe()){const t=configManager.getGlobalStorage("media.playbackRate");t&&(e=t)}return Number(Number(e).toFixed(1))},lockPlaybackRate:function(e=200){if(this.mediaPlusApi)return!0===configManager.get("enhance.blockSetPlaybackRate")&&(e=31536e6),this.mediaPlusApi.lockPlaybackRate(e),!0;this.playbackRateInfo.lockTimeout=Date.now()+e},unLockPlaybackRate:function(){if(this.mediaPlusApi)return this.mediaPlusApi.unLockPlaybackRate(),!0;this.playbackRateInfo.lockTimeout=Date.now()-1},isLockPlaybackRate:function(){return this.mediaPlusApi?this.mediaPlusApi.isLockPlaybackRate():Date.now()-this.playbackRateInfo.lockTimeout<0},fixPlaybackRate:function(e){const t=this,n=t.getPlaybackRate();Math.abs(n-e)>1&&t.setCurrentTimeUp(.1,!0)},setPlaybackRate:function(e,t,n,o){const r=this,i=r.player();if(!o&&r.isLockPlaybackRate())return debug.info("调速能力已被锁定"),!1;if(TCC.doTask("playbackRate"))return;if(!i)return;const a=r.getPlaybackRate();let s;if(e){if(e=Number(e),Number.isNaN(e))return debug.error("h5player: 播放速度转换出错"),!1;e<=0?e=.1:e>16&&(e=16),e=Number(e.toFixed(1)),s=e}else s=r.getPlaybackRate();if(r.playbackRate=s,isInIframe()?configManager.setGlobalStorage("media.playbackRate",s):configManager.set("media.playbackRate",s),r.mediaPlusApi){r.mediaPlusApi.setPlaybackRate(s),!e&&1===s||t||r.tips(i18n.t("tipsMsg.playspeed")+i.playbackRate);return r.getPlayerList().forEach((e=>{if(e!==i){const t=mediaCore.mediaPlus(e);t&&t.setPlaybackRate(s)}})),r.fixPlaybackRate(a),!0}delete i.playbackRate,i.playbackRate=s,r.playbackRateInfo.time=Date.now(),r.playbackRateInfo.value=s,i._setPlaybackRate_={time:Date.now(),value:s};try{const e=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"playbackRate");originalMethods.Object.defineProperty.call(Object,i,"playbackRate",{configurable:!0,get:function(){return s||e.get.apply(i,arguments)},set:function(e){return"number"==typeof e&&(!Number.isInteger(i._blockSetPlaybackRateTips_)&&(i._blockSetPlaybackRateTips_=0),TCC.doTask("blockSetPlaybackRate")?(i._blockSetPlaybackRateTips_++,i._blockSetPlaybackRateTips_<3&&debug.info("调速能力已被自定义的调速任务进行处理"),!1):!0===configManager.get("enhance.blockSetPlaybackRate")?(i._blockSetPlaybackRateTips_++,i._blockSetPlaybackRateTips_<3&&debug.info("调速能力已被blockSetPlaybackRate锁定"),!1):void r.setPlaybackRate(e))}})}catch(e){debug.error("解锁playbackRate失败",e)}if(!e&&1===s)return!0;if(!t&&r.tips(i18n.t("tipsMsg.playspeed")+i.playbackRate),!n&&!0===configManager.get("enhance.blockSetPlaybackRate")){clearTimeout(r._setPlaybackRateDuplicate_),clearTimeout(r._setPlaybackRateDuplicate2_);const e=()=>{r.unLockPlaybackRate(),r.setPlaybackRate(s,!0,!0),r.lockPlaybackRate(1e3)};r._setPlaybackRateDuplicate_=setTimeout(e,600),r._setPlaybackRateDuplicate2_=setTimeout(e,1200)}r.fixPlaybackRate(a)},setPlaybackRatePlus:function(e){if(!(e=Number(e))||Number.isNaN(e))return!1;const t=this;t.playbackRatePlusInfo=t.playbackRatePlusInfo||{},t.playbackRatePlusInfo[e]=t.playbackRatePlusInfo[e]||{time:Date.now()-1e3,value:e},Date.now()-t.playbackRatePlusInfo[e].time<300?t.playbackRatePlusInfo[e].value=t.playbackRatePlusInfo[e].value+e:t.playbackRatePlusInfo[e].value=e,t.playbackRatePlusInfo[e].time=Date.now(),t.unLockPlaybackRate(),t.setPlaybackRate(t.playbackRatePlusInfo[e].value),t.lockPlaybackRate(1e3)},resetPlaybackRate:function(e){const t=this;e=e||t.player(),t.unLockPlaybackRate();const n=Number(e.playbackRate),o=1===n?t.lastPlaybackRate:1;1!==n&&(t.lastPlaybackRate=n,configManager.setLocalStorage("media.lastPlaybackRate",n)),t.setPlaybackRate(o),t.lockPlaybackRate(1e3)},setPlaybackRateUp(e){e=numUp(e)||.1,this.player()&&(this.unLockPlaybackRate(),this.setPlaybackRate(this.player().playbackRate+e),this.lockPlaybackRate(1e3))},setPlaybackRateDown(e){e=numDown(e)||-.1,this.player()&&(this.unLockPlaybackRate(),this.setPlaybackRate(this.player().playbackRate+e),this.lockPlaybackRate(1e3))},lockCurrentTime:function(e=200){if(this.mediaPlusApi)return!0===configManager.get("enhance.blockSetCurrentTime")&&(e=31536e6),this.mediaPlusApi.lockCurrentTime(e),!0;const t=this.player();t&&(t.currentTimeInfo=t.currentTimeInfo||{},t.currentTimeInfo.lockTimeout=Date.now()+e)},unLockCurrentTime:function(){if(this.mediaPlusApi)return this.mediaPlusApi.unLockCurrentTime(),!0;const e=this.player();e&&(e.currentTimeInfo=e.currentTimeInfo||{},e.currentTimeInfo.lockTimeout=Date.now()-1)},isLockCurrentTime:function(){if(this.mediaPlusApi)return this.mediaPlusApi.isLockCurrentTime();const e=this.player();return!!(e&&e.currentTimeInfo&&e.currentTimeInfo.lockTimeout)&&Date.now()-e.currentTimeInfo.lockTimeout<0},setCurrentTime:function(e){if(!e&&0!==e)return;e=Number(e);const t=Math.abs(Number(e.toFixed(1))),n=this,o=n.player();if(n.isLockCurrentTime())return!1;if(!TCC.doTask("currentTime")){if(this.mediaPlusApi)return this.mediaPlusApi.setCurrentTime(t),!0;delete o.currentTime,o.currentTime=t,o.currentTimeInfo=o.currentTimeInfo||{},o.currentTimeInfo.time=Date.now(),o.currentTimeInfo.value=t;try{const e=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");originalMethods.Object.defineProperty.call(Object,o,"currentTime",{configurable:!0,enumerable:!0,get:function(){return e.get.apply(o,arguments)},set:function(t){return"number"==typeof t&&!TCC.doTask("blockSetCurrentTime")&&!0!==configManager.get("enhance.blockSetCurrentTime")&&(!n.isLockCurrentTime()&&(o.currentTimeInfo.time=Date.now(),o.currentTimeInfo.value=t,e.set.apply(o,arguments)))}})}catch(e){debug.error("解锁currentTime失败",e)}}},setCurrentTimeUp(e,t){e=Number(numUp(e)||this.skipStep),TCC.doTask("addCurrentTime")||this.player()&&(this.unLockCurrentTime(),this.setCurrentTime(this.player().currentTime+e),this.lockCurrentTime(500),t||this.tips(i18n.t("tipsMsg.forward")+e+i18n.t("tipsMsg.seconds")))},setCurrentTimeDown(e){if(e=Number(numDown(e)||-this.skipStep),TCC.doTask("subtractCurrentTime"));else if(this.player()){let t=this.player().currentTime+e;t<1&&(t=0),this.unLockCurrentTime(),this.setCurrentTime(t),this.lockCurrentTime(500),this.tips(i18n.t("tipsMsg.backward")+Math.abs(e)+i18n.t("tipsMsg.seconds"))}},volumeInfo:{lockTimeout:Date.now()-1,time:Date.now(),value:-1},getVolume:function(){let e=configManager.get("media.volume");if(isInIframe()||!0===configManager.get("enhance.blockSetVolume")){const t=configManager.getGlobalStorage("media.volume");null!==t&&(e=t)}return Number(Number(e).toFixed(2))},lockVolume:function(e=200){if(this.mediaPlusApi)return!0===configManager.get("enhance.blockSetVolume")&&(e=31536e6),this.mediaPlusApi.lockVolume(e),!0;this.volumeInfo.lockTimeout=Date.now()+e},unLockVolume:function(){if(this.mediaPlusApi)return this.mediaPlusApi.unLockVolume(),!0;this.volumeInfo.lockTimeout=Date.now()-1},isLockVolume:function(){return this.mediaPlusApi?this.mediaPlusApi.isLockVolume():Date.now()-this.volumeInfo.lockTimeout<0},setVolume:function(e,t,n){const o=this,r=o.player();if(o.isLockVolume())return!1;if(e||0===e||(e=o.getVolume()),(e=Number(e).toFixed(2))<0&&(e=0),e>1&&configManager.get("enhance.allowAcousticGain")){e=Math.ceil(e);try{r._amp_=r._amp_||new MediaElementAmplifier(r)}catch(t){e=1,debug.error("媒体声音响度增益逻辑异常",t)}e>6&&(e=6),r._amp_&&r._amp_.setLoudness||(e=1)}else e>1&&(e=1);if(o.volume=e,e>1&&r._amp_&&r._amp_.setLoudness)return r._amp_.setLoudness(e),n||(r.muted=!1),!t&&o.tips(i18n.t("tipsMsg.volume")+parseInt(100*e)+"%"),!0;if(isInIframe()||!0===configManager.get("enhance.blockSetVolume")?configManager.setGlobalStorage("media.volume",e):configManager.setLocalStorage("media.volume",e),o.mediaPlusApi){o.mediaPlusApi.setVolume(e);o.getPlayerList().forEach((t=>{if(t!==r){const n=mediaCore.mediaPlus(t);n&&n.setVolume(e)}}))}else{delete r.volume,r.volume=e,o.volumeInfo.time=Date.now(),o.volumeInfo.value=e;try{const e=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"volume");originalMethods.Object.defineProperty.call(Object,r,"volume",{configurable:!0,get:function(){return e.get.apply(r,arguments)},set:function(e){return!("number"!=typeof e||e<0)&&(!TCC.doTask("blockSetVolume")&&!0!==configManager.get("enhance.blockSetVolume")&&void o.setVolume(e,!1,!0))}})}catch(e){debug.error("解锁volume失败",e)}}n||(r.muted=!1),!t&&o.tips(i18n.t("tipsMsg.volume")+parseInt(100*r.volume)+"%")},setVolumeUp(e){e=numUp(e)||.2;const t=this.player();t&&(this.unLockVolume(),this.volume>1&&t._amp_?this.setVolume(this.volume+e):this.setVolume(t.volume+e),this.lockVolume(500))},setVolumeDown(e){e=numDown(e)||-.2;const t=this.player();t&&(this.unLockVolume(),this.volume>1&&t._amp_?this.setVolume(Math.floor(this.volume+e)):this.setVolume(t.volume+e),this.lockVolume(500))},collectTransformHistoryInfo(){const e=this;Object.keys(e.defaultTransform).forEach((t=>{if("translate"===t){const t=e.defaultTransform.translate;e.historyTransform.translate=e.historyTransform.translate||{},Object.keys(t).forEach((t=>{Number(e.translate[t])!==e.defaultTransform.translate[t]&&(e.historyTransform.translate[t]=e.translate[t])}))}else Number(e[t])!==e.defaultTransform[t]&&(e.historyTransform[t]=e[t])}))},isSameAsDefaultTransform(){let e=!0;const t=this;return Object.keys(t.defaultTransform).forEach((n=>{isObj$1(t.defaultTransform[n])?Object.keys(t.defaultTransform[n]).forEach((o=>{Number(t[n][o])!==t.defaultTransform[n][o]&&(e=!1)})):Number(t[n])!==t.defaultTransform[n]&&(e=!1)})),e},setTransform(e){const t=this,n=t.player(),o=t.scale=Number(t.scale).toFixed(2),r=t.translate,i=180===t.rotateX?`rotateX(${t.rotateX}deg)`:180===t.rotateY?`rotateY(${t.rotateY}deg)`:"";n.style.transform=`scale(${o}) translate(${r.x}px, ${r.y}px) rotate(${t.rotate}deg) ${i}`;let a=i18n.t("tipsMsg.videozoom")+`${(100*o).toFixed(0)}%`;r.x&&(a+=` ${i18n.t("tipsMsg.horizontal")}${t.translate.x}px`),r.y&&(a+=` ${i18n.t("tipsMsg.vertical")}${t.translate.y}px`),!0===e||(t.collectTransformHistoryInfo(),t.tips(a)),t._transformStateGuard_||(t._transformStateGuard_=setInterval((()=>{t.setTransform(!0)}),300))},setRotate(){const e=this;e.rotate+=90,e.rotate%360==0&&(e.rotate=0),e.setTransform(!0),e.tips(i18n.t("tipsMsg.imgrotate")+e.rotate+"°")},setMirror(e=!1){const t=this;let n="";e?(t.rotateX=0===t.rotateX?180:0,n+=` ${i18n.t("tipsMsg.verticalMirror")} ${t.rotateX}deg`):(t.rotateY=0===t.rotateY?180:0,n+=` ${i18n.t("tipsMsg.horizontalMirror")} ${t.rotateY}deg`),t.setTransform(!0),t.tips(n)},setScale(e){Number.isNaN(this.scale)||Number.isNaN(e)?this.scale=1:this.scale=e,this.setTransform()},setScaleUp(e){e=numUp(e)||.05,this.setScale(Number(this.scale)+e)},setScaleDown(e){e=numDown(e)||-.05,this.setScale(Number(this.scale)+e)},setTranslate(e,t){"number"==typeof e&&(this.translate.x=e),"number"==typeof t&&(this.translate.y=t),this.setTransform()},setTranslateRight(e){e=numUp(e)||10,this.setTranslate(this.translate.x+e)},setTranslateLeft(e){e=numDown(e)||-10,this.setTranslate(this.translate.x+e)},setTranslateUp(e){e=numUp(e)||10,this.setTranslate(null,this.translate.y-e)},setTranslateDown(e){e=numDown(e)||-10,this.setTranslate(null,this.translate.y-e)},resetTransform(e){const t=this;if(t.isSameAsDefaultTransform()&&Object.keys(t.historyTransform).length)Object.keys(t.historyTransform).forEach((e=>{isObj$1(t.historyTransform[e])?Object.keys(t.historyTransform[e]).forEach((n=>{t[e][n]=t.historyTransform[e][n]})):t[e]=t.historyTransform[e]}));else{const e=clone(t.defaultTransform);Object.keys(e).forEach((n=>{t[n]=e[n]}))}t.setTransform(e)},freezeFrame(e){e=e||1;const t=this,n=t.player();n.currentTime+=Number(e/t.fps),n.paused||n.pause(),n._hangUp_&&n._hangUp_("play",400),1===e?t.tips(i18n.t("tipsMsg.nextframe")):-1===e?t.tips(i18n.t("tipsMsg.previousframe")):t.tips(i18n.t("tipsMsg.stopframe")+e)},autoGotoBufferedTime:!1,toggleAutoGotoBufferedTime(){const e=this;e.autoGotoBufferedTime=!e.autoGotoBufferedTime,e.tips(e.autoGotoBufferedTime?i18n.t("autoGotoBufferedTime"):i18n.t("disableAutoGotoBufferedTime"))},togglePictureInPicture(){const e=this.player();window._isPictureInPicture_&&document.pictureInPictureElement?document.exitPictureInPicture().then((()=>{window._isPictureInPicture_=null})).catch((e=>{window._isPictureInPicture_=null,debug.error("[togglePictureInPicture]",e)})):e.requestPictureInPicture&&e.requestPictureInPicture().then((()=>{window._isPictureInPicture_=!0})).catch((e=>{window._isPictureInPicture_=null,debug.error("[togglePictureInPicture]",e)}))},setNextVideo(){TCC.doTask("next")||debug.log("当前网页不支持一键播放下个视频功能~")},switchPlayStatus(){const e=this,t=e.player();TCC.doTask("switchPlayStatus")||(t.paused?(TCC.doTask("play")||(e.mediaPlusApi?(e.mediaPlusApi.lockPause(400),e.mediaPlusApi.applyPlay()):(t._hangUp_ instanceof Function&&(t._hangUp_("pause",400),t._unHangUp_("play")),t.play()),e.tips(i18n.t("tipsMsg.play"))),TCC.doTask("afterPlay")):(TCC.doTask("pause")||(e.mediaPlusApi?(e.mediaPlusApi.lockPlay(400),e.mediaPlusApi.applyPause()):(t._hangUp_ instanceof Function&&(t._hangUp_("play",400),t._unHangUp_("pause")),t.pause()),e.tips(i18n.t("tipsMsg.pause"))),TCC.doTask("afterPause")))},isAllowRestorePlayProgress:function(){const e=configManager.get(`media.allowRestorePlayProgress.${window.location.host}`);return null===e||e},switchRestorePlayProgressStatus:function(){const e=h5Player;let t=e.isAllowRestorePlayProgress();t=!isInCrossOriginFrame()&&!t,configManager.set(`media.allowRestorePlayProgress.${window.location.host}`,t),t?(e.tips(i18n.t("tipsMsg.arpl")),e.setPlayProgress(e.player())):e.tips(i18n.t("tipsMsg.drpl"))},tipsClassName:"html_player_enhance_tips",getTipsContainer:function(e){const t=e||h5Player.player();let n=t.parentNode||t;const o=n.getBoundingClientRect();return o.width&&o.height||!n.parentNode||(n=n.parentNode),n},tips:function(e){const t=h5Player,n=t.player();if(!n)return debug.log("h5Player Tips:",e),!0;const o=t.isAudioInstance(),r=o?document.body:t.getTipsContainer();if(r===n)return debug.info("获取tips的包裹容器异常：",n,e),!1;let i="";if(!o){const e=r.getAttribute("style")||"";if(i=r.getAttribute("style-backup")||"",i)e&&!e.includes("style-backup")&&(i=e);else{let t=e||"style-backup: none";const n=inlineStyleToObj(t);"0"===n.opacity&&(n.opacity="1"),"hidden"===n.visibility&&(n.visibility="visible"),t=objToInlineStyle(n),r.setAttribute("style-backup",t),i=e}const t=i.split(";"),o=r.getAttribute("def-position")||window.getComputedStyle(r).position;null===r.getAttribute("def-position")&&r.setAttribute("def-position",o||""),["static","inherit","initial","unset",""].includes(o)&&t.push("position: relative");const a=n.getBoundingClientRect(),s=r.getBoundingClientRect();s.width&&s.height||(t.push("min-width:"+a.width+"px"),t.push("min-height:"+a.height+"px")),r.setAttribute("style",t.join(";"));const l=n.getBoundingClientRect();Math.abs(l.height-a.height)>50&&r.setAttribute("style",i)}const a="."+t.tipsClassName,s=document.querySelectorAll(a);s.length>1&&s.forEach((e=>{e.remove()}));let l=r.querySelector(a);if(!l&&(t.initTips(),l=r.querySelector(a),!l))return debug.log("init h5player tips dom error..."),!1;const c=l.style;l.innerText=e;for(let e=0;e<3;e++)this.on_off[e]&&clearTimeout(this.on_off[e]);function u(){c.display="block",t.on_off[0]=setTimeout((function(){c.opacity=1}),50),t.on_off[1]=setTimeout((function(){c.opacity=0,c.display="none",i&&r.setAttribute("style",i)}),2e3)}"block"===c.display?(c.display="none",clearTimeout(this.on_off[3]),t.on_off[2]=setTimeout((function(){u()}),100)):u()},initTips:function(){const e=h5Player,t=e.isAudioInstance(),n=t?document.body:e.getTipsContainer();if(n.querySelector("."+e.tipsClassName))return;let o=`\n      position: absolute;\n      z-index: 999999;\n      font-size: ${e.fontSize||16}px;\n      padding: 5px 10px;\n      background: rgba(0,0,0,0.4);\n      color:white;\n      top: 0;\n      left: 0;\n      transition: all 500ms ease;\n      opacity: 0;\n      border-bottom-right-radius: 5px;\n      display: none;\n      -webkit-font-smoothing: subpixel-antialiased;\n      font-family: 'microsoft yahei', Verdana, Geneva, sans-serif;\n      -webkit-user-select: none;\n    `;t&&(o=`\n        position: fixed;\n        z-index: 999999;\n        font-size: ${e.fontSize||16}px;\n        padding: 5px 10px;\n        background: rgba(0,0,0,0.4);\n        color:white;\n        bottom: 0;\n        right: 0;\n        transition: all 500ms ease;\n        opacity: 0;\n        border-top-left-radius: 5px;\n        display: none;\n        -webkit-font-smoothing: subpixel-antialiased;\n        font-family: 'microsoft yahei', Verdana, Geneva, sans-serif;\n        -webkit-user-select: none;\n      `);const r=document.createElement("div");r.setAttribute("style",o),r.setAttribute("class",e.tipsClassName),n.appendChild(r)},on_off:new Array(3),fps:30,filter:{key:[1,1,1,0,0],setup:function(){let e="brightness({0}) contrast({1}) saturate({2}) hue-rotate({3}deg) blur({4}px)";for(let t=0;t<5;t++)e=e.replace("{"+t+"}",String(this.key[t])),this.key[t]=Number(this.key[t]);h5Player.player().style.filter=e},reset:function(){this.key[0]=1,this.key[1]=1,this.key[2]=1,this.key[3]=0,this.key[4]=0,this.setup()}},setFilter(e,t,n){if(![0,1,2,3,4].includes(e)||"number"!=typeof t)return debug.error("[setFilter]","参数有误",e,t),!1;!0===n&&t&&t>0&&(t=-t);const o={0:"brightness",1:"contrast",2:"saturation",3:"hue",4:"blur"},r=this;r.filter.key[e]+=t||.1,r.filter.key[e]=r.filter.key[e].toFixed(2),r.filter.key[e]<0&&"hue"!==o[e]&&(r.filter.key[e]=0),r.filter.setup(),r.tips(i18n.t(`tipsMsg.${o[e]}`)+parseInt(100*r.filter.key[e])+"%")},setBrightness(e){this.setFilter(0,e)},setBrightnessUp(e){this.setFilter(0,e||.1)},setBrightnessDown(e){this.setFilter(0,e||-.1,!0)},setContrast(e){this.setFilter(1,e)},setContrastUp(e){this.setFilter(1,e||.1)},setContrastDown(e){this.setFilter(1,e||-.1,!0)},setSaturation(e){this.setFilter(2,e)},setSaturationUp(e){this.setFilter(2,e||.1)},setSaturationDown(e){this.setFilter(2,e||-.1,!0)},setHue(e){this.setFilter(3,e)},setHueUp(e){this.setFilter(3,e||1)},setHueDown(e){this.setFilter(3,e||-1,!0)},setBlur(e){this.setFilter(4,e)},setBlurUp(e){this.setFilter(4,e||1)},setBlurDown(e){this.setFilter(4,e||-1,!0)},resetFilterAndTransform(){const e=this;e.resetTransform(!0),e.filter.reset(),e.tips(i18n.t("tipsMsg.imgattrreset"))},mediaDownload(){if(configManager.get("enhance.allowExperimentFeatures"))debug.warn("[experimentFeatures][mediaDownload]"),mediaDownload(this.player());else{window.confirm(i18n.t("useMediaDownloadTips"))&&(configManager.setGlobalStorage("enhance.allowExperimentFeatures",!configManager.get("enhance.allowExperimentFeatures")),window.location.reload())}},capture(){const e=this.player();videoCapturer.capture(e,!0),e.paused||document.pictureInPictureElement||"visible"===document.visibilityState||this.freezeFrame()},_isFoucs:!1,isFoucs:function(){const e=h5Player.player();e&&(e.onmouseenter=function(e){h5Player._isFoucs=!0},e.onmouseleave=function(e){h5Player._isFoucs=!1})},palyerTrigger:function(e,t){if(!e||!t)return;const n=h5Player,o=t.keyCode,r=t.key.toLowerCase();if(t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey){"enter"===r&&n.setWebFullScreen(),"p"===r&&n.togglePictureInPicture(),"s"===r&&n.capture(),"r"===r&&n.switchRestorePlayProgressStatus(),"m"===r&&n.setMirror(!0),"d"===r&&n.mediaDownload();if(!["x","c","z","arrowright","arrowleft","arrowup","arrowdown"].includes(r))return;switch(n.scale=Number(n.scale),r){case"x":n.setScaleDown();break;case"c":n.setScaleUp();break;case"z":n.resetTransform();break;case"arrowright":n.setTranslateRight();break;case"arrowleft":n.setTranslateLeft();break;case"arrowup":n.setTranslateUp();break;case"arrowdown":n.setTranslateDown()}return t.stopPropagation(),t.preventDefault(),!0}return t.ctrlKey&&39===o&&n.setCurrentTimeUp(6*n.skipStep),t.ctrlKey&&37===o&&n.setCurrentTimeDown(6*-n.skipStep),t.ctrlKey&&38===o&&n.setVolumeUp(.2),t.ctrlKey&&40===o&&n.setVolumeDown(-.2),t.altKey||t.ctrlKey||t.shiftKey||t.metaKey?void 0:(39===o&&n.setCurrentTimeUp(),37===o&&n.setCurrentTimeDown(),38===o&&n.setVolumeUp(.05),40===o&&n.setVolumeDown(-.05),32===o&&n.switchPlayStatus(),88===o&&n.setPlaybackRateDown(),67===o&&n.setPlaybackRateUp(),90===o&&n.resetPlaybackRate(),(o>=49&&o<=52||o>=97&&o<=100)&&n.setPlaybackRatePlus(t.key),70===o&&n.freezeFrame(1),68===o&&n.freezeFrame(-1),69===o&&n.setBrightnessUp(),87===o&&n.setBrightnessDown(),84===o&&n.setContrastUp(),82===o&&n.setContrastDown(),85===o&&n.setSaturationUp(),89===o&&n.setSaturationDown(),79===o&&n.setHueUp(),73===o&&n.setHueDown(),75===o&&n.setBlurUp(),74===o&&n.setBlurDown(),81===o&&n.resetFilterAndTransform(),83===o&&n.setRotate(),77===o&&n.setMirror(),13===o&&n.setFullScreen(),"n"===r&&n.setNextVideo(),t.stopPropagation(),t.preventDefault(),!0)},runCustomShortcuts:function(e,t){if(!e||!t)return;const n=t.key.toLowerCase(),o=TCC.getTaskConfig();if(isObj$1(o.shortcuts)&&Array.isArray(o.shortcuts.register)&&o.shortcuts.callback instanceof Function&&function(){const e=o.shortcuts.register,r=[];t.ctrlKey&&r.push("ctrl"),t.shiftKey&&r.push("shift"),t.altKey&&r.push("alt"),t.metaKey&&r.push("command"),r.push(n);let i=!1;return e.forEach((e=>{const t=e.split("+");if(r.length===t.length){let e=!0;t.forEach((t=>{r.includes(t)||(e=!1)})),e&&(i=!0)}})),i}()){const n=TCC.doTask("shortcuts",{event:t,player:e,h5Player:h5Player});return n&&(t.stopPropagation(),t.preventDefault()),n}return!1},keydownEvent:function(e){const t=h5Player,n=e.keyCode,o=t.player(),r=e.composedPath&&e.composedPath()[0]||e.target;if(!t.__disableHotkeysTemporarily__&&!isEditableTarget(r)){if(monkeyMsg.send("globalKeydownEvent",e,0),!o){if(t.hasCrossOriginVideoDetected){if(!configManager.get("enhance.allowCrossOriginControl"))return!1;t.hotkeysRunner&&t.hotkeysRunner.run?t.hotkeysRunner.run({event:e,stopPropagation:!0,preventDefault:!0}):(t.registerHotkeysRunner(),e.stopPropagation(),e.preventDefault())}return!1}if(e.ctrlKey&&32===n&&(t.enable=!t.enable,t.enable?t.tips(i18n.t("tipsMsg.onplugin")):t.tips(i18n.t("tipsMsg.offplugin"))),!t.enable)return debug.log("h5Player 已禁用~"),!1;if(e.ctrlKey&&220===n&&(t.globalMode=!t.globalMode,t.globalMode?t.tips(i18n.t("tipsMsg.globalmode")+" ON"):t.tips(i18n.t("tipsMsg.globalmode")+" OFF")),(t.globalMode||t._isFoucs)&&!0!==t.runCustomShortcuts(o,e))if(t.hotkeysRunner&&t.hotkeysRunner.run){const n=t.hotkeysRunner.run({event:e,target:t,stopPropagation:!0,preventDefault:!0,conditionHandler(e){if(e)return!0}});if(n)return debug.info("[hotkeysRunner][matchResult]",n),!0}else{if(!isRegisterKey(e))return!1;t.palyerTrigger(o,e)}}},getPlayProgress:function(e){const t=configManager.get("media.progress")||{};if(e){const n=window.location.href+e.duration;return t[n]?Number.isNaN(Number(e.duration))||Number(t[n].duration)!==Number(e.duration)?e.currentTime:t[n].progress:e.currentTime}return t},playProgressRecorder:function(e){const t=h5Player;clearTimeout(e._playProgressTimer_),function e(n){n._playProgressTimer_=setTimeout((function(){const o=!n.duration||Number.isNaN(Number(n.duration))||n.duration<120,r="visible"!==document.visibilityState&&n.paused;if(!t.isAllowRestorePlayProgress()||o||r)return e(n),!0;const i=t.getPlayProgress()||{},a=Object.keys(i),s=window.location.href+n.duration;if(i[s]||(t._firstProgressRecord_=s,t._hasRestorePlayProgress_=s),a.length>10){let e=[];a.forEach((function(t){i[t]&&i[t].t&&e.push(i[t].t)})),e=quickSort(e);const t=e[0];a.forEach((function(e){i[e].t===t&&delete i[e]}))}i[s]={progress:n.currentTime,duration:n.duration,t:(new Date).getTime()},configManager.setLocalStorage("media.progress",i),e(n)}),2e3)}(e)},setPlayProgress:function(e){const t=h5Player;if(!e||!e.duration||Number.isNaN(e.duration))return;const n=Number(t.getPlayProgress(e));if(!n||Number.isNaN(n)||n<10||n>=e.duration)return;if(Math.abs(n-e.currentTime)<2)return!1;const o=window.location.href+e.duration;if(t._hasRestorePlayProgress_=t._hasRestorePlayProgress_||"",t._hasRestorePlayProgress_===o||t._firstProgressRecord_===o)return t._hasRestorePlayProgress_===o&&(t._firstProgressRecord_=""),!1;t.isAllowRestorePlayProgress()?(e.currentTime=n-1.5,t._hasRestorePlayProgress_=o,t.tips(i18n.t("tipsMsg.playbackrestored"))):t.tips(i18n.t("tipsMsg.playbackrestoreoff"))},setPlayerInstance(e){if(!e&&!e.getBoundingClientRect)return!1;const t=h5Player;if(t.player()===e)return!1;if(!t.playerInstance&&isMediaElement(e))return t.playerInstance=e,t.initPlayerInstance(!1),!0;if(isVideoElement(e)){const n=t.getTipsContainer(e),o=e.getBoundingClientRect(),r=n&&n.getBoundingClientRect();o&&o.width>200&&r&&r.width>200&&(t.playerInstance=e,t.initPlayerInstance(!1))}else isAudioElement(e)&&(isAudioElement(t.playerInstance)||isVideoElement(t.playerInstance)&&!t.playerInstance.isConnected)&&(t.playerInstance=e,t.initPlayerInstance(!1))},intersectionObserver:new IntersectionObserver((function(e,t){const n=h5Player;let o=0;e.forEach((e=>{if(e.target._intersectionInfo_=e,e.intersectionRatio>o&&e.intersectionRatio>.4){o=e.intersectionRatio;const t=n.player();if(t&&t._intersectionInfo_&&o<t._intersectionInfo_.intersectionRatio)return;n.setPlayerInstance(e.target)&&debug.log("[intersectionObserver] 切换视频实例",e)}}))}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),detecH5Player:function(){const e=this,t=e.getPlayerList();t.length&&(1===t.length&&(e.playerInstance=t[0],e.initPlayerInstance(!0)),t.forEach((function(t){t._hasMouseRedirectEvent_||(t.addEventListener("mouseenter",(function(t){e.setPlayerInstance(t.target)})),t._hasMouseRedirectEvent_=!0),t._hasPlayingRedirectEvent_||(t.addEventListener("playing",(function(t){const n=t.target;if(n.duration&&n.duration<8)return!1;e.setPlayerInstance(n)})),t._hasPlayingRedirectEvent_=!0),t._hasIntersectionObserver_||(e.intersectionObserver.observe(t),t._hasIntersectionObserver_=!0)})),isInCrossOriginFrame()&&monkeyMsg.send("videoDetected",{src:e.playerInstance.src}),registerH5playerMenus(h5Player))},bindFakeEvent(){const e=this;if(e._hasBindFakeEvent_)return;let t=function(t,n,o,r){const i=e.player();if(i&&!e.__disableHotkeysTemporarily__){const t=o.data;t.stopPropagation=()=>{},t.preventDefault=()=>{},e.palyerTrigger(i,t),debug.log("已响应跨Tab/跨域按键控制信息：",o)}};crossTabCtl.hasOpenPictureInPicture()||e.hasCrossOriginVideoDetected||(t=throttle(t,80)),monkeyMsg.on("globalKeydownEvent",(async(n,o,r,i)=>{i&&(isInCrossOriginFrame()?"visible"===document.visibilityState&&r.originTab&&t(n,o,r,i):crossTabCtl.hasOpenPictureInPicture()&&(r.originTab||!document.pictureInPictureElement&&!e.isLeavepictureinpictureAwhile()||t(n,o,r,i)))})),e._hasBindFakeEvent_=!0},bindEvent:function(){const e=this;e._hasBindEvent_||(document.removeEventListener("keydown",e.keydownEvent),document.addEventListener("keydown",e.keydownEvent,!0),isInIframe()&&!isInCrossOriginFrame()&&(window.top.document.removeEventListener("keydown",e.keydownEvent),window.top.document.addEventListener("keydown",e.keydownEvent,!0)),e._hasBindEvent_=!0)},setCustomConfiguration(e,t="Default"){if(!e)return!1;const n=configManager.mergeDefConf(e.customConfiguration),o=mergeTaskConf(e.customTaskControlCenter);TCC&&TCC.setTaskConf&&TCC.setTaskConf(o),h5Player.hasSetCustomConfiguration=t,debug.info(`[CustomConfiguration][${t}]`,n,o)},mergeExternalConfiguration(e,t="Default"){if(!e||!configManager.getGlobalStorage("enhance.allowExternalCustomConfiguration"))return!1;h5Player.setCustomConfiguration(e,"External"),h5Player.hasExternalCustomConfiguration=t},init:function(e){const t=this;return window.unsafeWindow&&window.unsafeWindow.__h5PlayerCustomConfiguration__&&!t.hasExternalCustomConfiguration&&t.mergeExternalConfiguration(window.unsafeWindow.__h5PlayerCustomConfiguration__),TCC&&!0===TCC.doTask("disable")?(debug.info(`[TCC][disable][${location.host}] 已禁止在该网站运行视频检测逻辑，您可查看任务配置中心的相关配置了解详情`),!0):e?(!0===configManager.get("debug")&&(window._debugMode_=!0,t.mountToGlobal()),setFakeUA(),TCC=h5PlayerTccInit(t),!1!==configManager.get("enableHotkeys")?(t.bindEvent(),t.bindFakeEvent()):debug.warn("快捷键能力已被禁用"),monkeyMsg.on("videoDetected",(async(e,n,o,r)=>{o.originTab&&(t.hasCrossOriginVideoDetected=!0),debug.log("[hasCrossOriginVideoDetected]",t,e,n,o,r)})),document.addEventListener("visibilitychange",(function(){h5Player.initAutoPlay()})),void(window.unsafeWindow&&configManager.getGlobalStorage("enhance.allowExternalCustomConfiguration")&&(window.unsafeWindow.__setH5PlayerCustomConfiguration__=t.mergeExternalConfiguration))):(t.detecH5Player(),!0)}};async function h5PlayerInit(){const e=configManager.get("enable"),t=configManager.get("blacklist.urls")||[],n=configManager.get("blacklist.domains")||[],o=t.includes(location.href)||n.includes(location.host);o&&console.warn(`[h5player][config][blacklist][${location.href}] \n当前页面已被加入黑名单，不执行h5player增强脚本的相关逻辑，如有需要开启，请在配置里的blacklist移除对应的地址`);try{e&&!o&&(mediaCore.init((function(e){h5Player.init()})),configManager.get("enhance.allowExperimentFeatures")&&configManager.get("download.enable")&&(mediaSource.init(),debug.warn(`[experimentFeatures][warning] ${i18n.t("experimentFeaturesWarning")}`),debug.warn("[experimentFeatures][mediaSource][activated]")),hackDefineProperty(),hackAttachShadow(),proxyHTMLMediaElementEvent())}catch(e){console.error("h5player hack error",e)}if(menuRegister(),!e||o)return debug.warn(`[config][disable][${location.host}] 当前网站已禁用脚本，如要启用脚本，请在菜单里开启`),!1;try{h5Player.init(!0),supportMediaTags.forEach((e=>{ready(e,(function(){h5Player.init()}))})),document.addEventListener("addShadowRoot",(function(e){const t=e.detail.shadowRoot;supportMediaTags.forEach((e=>{ready(e,(function(e){h5Player.init()}),t)}))})),crossTabCtl.init(),isInIframe()?debug.log("h5Player init suc, in iframe:"):debug.log("h5Player init suc"),isInCrossOriginFrame()&&debug.log("当前处于跨域受限的iframe中，h5Player部分功能可能无法正常开启",window.location.href),configManager.get("mouse.enable")&&registerMouseEvent(h5Player)}catch(e){debug.error("h5Player init fail",e)}!1!==configManager.get("ui.enable")?window.customElements&&document.adoptedStyleSheets?(h5Player.UI=h5playerUI(windowSandbox),setTimeout((async()=>{h5Player.UI.init()}),400)):debug.warn("当前浏览器不支持customElements或adoptedStyleSheets，无法使用UI组件，建议使用Chrome 83+，Edge 83+"):debug.warn("UI组件已被禁用",configManager.get("ui.enable"));try{!1!==configManager.get("ui.enable")&&remoteHelper.init()}catch(e){debug.error("[remoteHelper.init]",e)}}function init(e=0){if(!window.document||!window.document.documentElement)return setTimeout((()=>{e<200?init(e+1):console.error("[h5player message:]","not documentElement detected!",window)}),10),!1;e>0&&console.warn("[h5player message:]","documentElement detected!",e,window),h5PlayerInit()}let initTryCount=0;try{init(0)}catch(e){setTimeout((()=>{initTryCount<200&&(initTryCount++,init(0),console.error("[h5player message:]","init error",initTryCount,e))}),10)}