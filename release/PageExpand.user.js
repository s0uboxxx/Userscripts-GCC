// ==UserScript==
// @name           PageExpand
// @name:ja        PageExpand
// @name:zh        PageExpand
// @version        1.5.31
// @namespace      http://hakuhin.jp/page_expand
// @description    All Image Download. Image Zoom. Expand Thumbnail and Audio and Video. Expand the short URL. Generate a link from text. Extend BBS. etc...
// @description:ja 画像の一括ダウンロード、画像のポップアップ、サムネイルやビデオの展開、短縮URLの展開、URL文字列のリンク化、2chなどの主要掲示板の拡張表示など...
// @description:zh 下载所有图片、图片缩放、扩展缩略图以及音频和视频、展开短网址、从文本生成链接、扩展BBS，等等...
// @match          http://*/*
// @match          https://*/*
// @match          ftp://*/*
// @connect        *
// @icon           https://hakuhin.github.io/PageExpand/GreaseMonkey/icon32.png
// @icon64         https://hakuhin.github.io/PageExpand/GreaseMonkey/icon64.png
// @author         hakuhin
// @grant          GM.xmlHttpRequest 
// @grant          GM_xmlhttpRequest
// @grant          GM.getValue
// @grant          GM_getValue
// @grant          GM.setValue
// @grant          GM_setValue
// @grant          GM.deleteValue
// @grant          GM_deleteValue
// @grant          GM.openInTab
// @grant          GM_openInTab
// @grant          GM.registerMenuCommand
// @grant          GM_registerMenuCommand
// @grant          GM_unregisterMenuCommand
// @grant          GM_download
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/PageExpand.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/PageExpand.meta.js
// ==/UserScript==
(function(page_expand_arguments){var project_import_manual=null,admin=page_expand_arguments.admin,window=page_expand_arguments.window,document=window.document,PageExpand=arguments.callee,page_expand_project,project,page_expand_root,page_expand_node,page_expand_event_dispatcher,input_mouse,input_touch,execute_queue,loader_queue,downloader_queue,download_list_image,download_list_user,url_info_dictionary,address_collection,task_container,task_execute_level,page_expand_execute_faster,page_expand_debug,document_observer_remove_node,document_observer_modify_node,document_observer_scroll,notify_progress,element_limitter_image,popup_image_container,element_limitter_sound,element_limitter_video,analyze_work_dictionary,bbs_dictionary,expand_bbs,preset_script_dictionary,extension_message,window_manager,started=!1,enable_analyze=!0,TASK_EXECUTE_LEVEL_POPUP=1;function PageExpandInitialize(){page_expand_node||(page_expand_node=new PageExpandNode,page_expand_arguments.page_expand_parent&&page_expand_arguments.page_expand_parent.attachChild(page_expand_node),page_expand_root=page_expand_node.getPageExpandRoot()),page_expand_event_dispatcher||(page_expand_event_dispatcher=new EventDispatcher,WindowIsChild(window)&&PageExpandObserverUnload())}function PageExpandConstructor(){var e;input_mouse||(input_mouse=new InputMouse(window)),execute_queue||(execute_queue=new ExecuteQueue),loader_queue||(loader_queue=new LoaderQueue),downloader_queue||(downloader_queue=new LoaderQueue),url_info_dictionary||(url_info_dictionary=new UrlInfoDictionary),address_collection||(address_collection=new AddressCollection),download_list_image||(download_list_image=new DownloadList),download_list_user||(download_list_user=new DownloadList),task_container||(task_container=new TaskContainer,task_execute_level=4294967295,e=null,task_container.setStartFunc((function(){null===e&&(e=setInterval((function(){task_container.execute(task_execute_level)}),1e3/60))})),task_container.setEndFunc((function(){null!==e&&(clearInterval(e),e=null)}))),page_expand_execute_faster||(page_expand_execute_faster=new PageExpandExecuteFaster),page_expand_debug||(page_expand_debug=new PageExpandDebug),document_observer_remove_node||(document_observer_remove_node=new DocumentObserverRemoveDomNode),document_observer_modify_node||(document_observer_modify_node=new DocumentObserverModifyProperty),document_observer_scroll||(document_observer_scroll=new DocumentObserverScroll),notify_progress||(notify_progress=new NotifyProgress),element_limitter_image||(element_limitter_image=new ElementLimiterByByteSize),popup_image_container||(popup_image_container=new PopupImageContainer),element_limitter_sound||(element_limitter_sound=new ElementLimiterByCount),element_limitter_video||(element_limitter_video=new ElementLimiterByCount),analyze_work_dictionary||(analyze_work_dictionary=new AnalyzeWorkDictionary),bbs_dictionary||(bbs_dictionary=new BbsDictionary),window_manager||(window_manager=new WindowManager(window)),expand_bbs||(expand_bbs={enable:!1,initialized:!1,node_queue:new Array,work:new Object})}function WindowIsExecutedByPageExpand(e){try{var t=new RegExp("^(blob|about):","i");if(e.location.href,e.document.URL.match(t))return!0}catch(e){}return!1}function PageExpandRelease(){page_expand_event_dispatcher&&page_expand_event_dispatcher.dispatchEvent("release",null),window_manager&&(window_manager.release(),window_manager=null),extension_message&&(extension_message.release(),extension_message=null),page_expand_execute_faster&&(page_expand_execute_faster.release(),page_expand_execute_faster=null),page_expand_debug&&(page_expand_debug.release(),page_expand_debug=null),bbs_dictionary&&(bbs_dictionary.release(),bbs_dictionary=null),preset_script_dictionary&&(preset_script_dictionary.release(),preset_script_dictionary=null),analyze_work_dictionary&&(analyze_work_dictionary.release(),analyze_work_dictionary=null),element_limitter_video&&(element_limitter_video.release(),element_limitter_video=null),element_limitter_sound&&(element_limitter_sound.release(),element_limitter_sound=null),element_limitter_image&&(element_limitter_image.release(),element_limitter_image=null),popup_image_container&&(popup_image_container.release(),popup_image_container=null),notify_progress&&(notify_progress.release(),notify_progress=null),document_observer_scroll&&(document_observer_scroll.release(),document_observer_scroll=null),document_observer_modify_node&&(document_observer_modify_node.release(),document_observer_modify_node=null),document_observer_remove_node&&(document_observer_remove_node.release(),document_observer_remove_node=null),task_container&&(task_container.release(),task_container=null),url_info_dictionary&&(url_info_dictionary.release(),url_info_dictionary=null),address_collection&&(address_collection.release(),address_collection=null),download_list_image&&(download_list_image.release(),download_list_image=null),download_list_user&&(download_list_user.release(),download_list_user=null),downloader_queue&&(downloader_queue.release(),downloader_queue=null),loader_queue&&(loader_queue.release(),loader_queue=null),execute_queue&&(execute_queue.release(),execute_queue=null),input_touch&&(input_touch.release(),input_touch=null),input_mouse&&(input_mouse.release(),input_mouse=null),page_expand_event_dispatcher&&(page_expand_event_dispatcher.release(),page_expand_event_dispatcher=null),page_expand_node&&(page_expand_node.release(),page_expand_node=null,page_expand_root=null),project&&(project.release(),project=null),page_expand_project=null,document=null,window=null,admin=null}function PageExpandObserverUnload(){var e,t=function(t){e&&(e.release(),e=null),window.removeEventListener?window.removeEventListener("unload",n):window.detachEvent&&window.detachEvent("onunload",n)},n=function(e){t(),PageExpandRelease()};window.addEventListener?window.addEventListener("unload",n):window.attachEvent&&window.attachEvent("onunload",n),(e=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){t()}))}function PageExpandStart(){started||(started=!0,loader_queue.setMaxThread(project.getLoadThreadMax()),downloader_queue.setMaxThread(project.getDownloadThreadMax()),element_limitter_image.setEnableUnload(project.getEnableUnloadExpandImage()),element_limitter_image.setByteSizeMax(project.getSizeMoreThenAllowUnloadExpandImage()),element_limitter_sound.setMaxUse(project.getSoundMaxInlineSound()),element_limitter_video.setMaxUse(project.getVideoMaxInlineVideo()),execute_queue.setOccupancyTime(project.getExecuteQueueOccupancyTime()),execute_queue.setSleepTime(project.getExecuteQueueSleepTime()),function(){if(project.enableInputTouch()){var e,t;page_expand_event_dispatcher.createEventHandler("release").setFunction((function(){e&&(e.release(),e=null),t&&(t.release(),t=null)})),input_touch=new InputTouch,e=new VirtualMousePointer(document),project.enableDoubleTouchAssist()&&(t=new DoubleTouchAssist);var n=0;input_touch.createEventHandler("update").setFunction((function(a){var i=a.getEnableTouch();if(i){var o=a.getTouchList(),r=o.length;if(n<=1){if(1==r)input_mouse.setInputTouch(a),e.setPosition(input_touch.getPositionAverage());else if(2==r){var l=o[0],s=o[1];if(l&&s){var c={x:l.clientX,y:l.clientY},_={x:s.clientX-l.clientX,y:s.clientY-l.clientY};e.setPosition(c),e.addVector(_),t&&t.setShow(c,_)}}n=r}}else n=0;0}))}}(),function(){if(window_manager.existWindowRoot()){var e=window_manager.getWindowRoot().document;page_expand_event_dispatcher.createEventHandler("release").setFunction((function(){e.removeEventListener?e.removeEventListener("mousemove",t):e.detachEvent&&e.detachEvent("onmousemove",t)})),e.addEventListener?e.addEventListener("mousemove",t):e.attachEvent&&e.attachEvent("onmousemove",t)}function t(e){if(task_container.getCountTask()){var t=window_manager.getPositionFromRoot();input_mouse.setMouseEvent({clientX:e.clientX-t.x,clientY:e.clientY-t.y,detail:e.detail,screenX:e.screenX,screenY:e.screenY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,button:e.button})}}}(),MutationObserverSupported()||task_container.createTask().setExecuteFunc((function(e){document_observer_modify_node.execute(),document_observer_remove_node.execute()})),DocumentGetLoadedDomContent(document,(function(){var e,t,n,a;project.getEnableDebugMode()&&(WindowIsChild(window)||page_expand_debug.setVisible(!0)),project.getEnableExpandBbs()&&project.initializeScriptCallbackExpandBbs((function(e){expand_bbs.initialized=!0,expand_bbs.enable=e.result;var t,n=expand_bbs.node_queue,a=n.length;for(t=0;t<a;t++)execute_queue.attachForExpandBbs(ElementAnalyzeBbs,n[t]);expand_bbs.node_queue.length=0})),document.addEventListener?MutationObserverSupported()?((a=MutationObserverCreate((function(e){var t,n=e.length;for(t=0;t<n;t++){var a=e[t].addedNodes;if(a){var i,o=a.length;for(i=0;i<o;i++)execute_queue.attachLastForInsertDomNode(DomNodeAnalyzeRoot,a[i])}}}))).observe(document.documentElement,{subtree:!0,childList:!0}),page_expand_event_dispatcher.createEventHandler("release").setFunction((function(){a&&(a.disconnect(),a=null)}))):function(){function e(e){enable_analyze&&execute_queue.attachLastForInsertDomNode(DomNodeAnalyzeRoot,e.target)}document.addEventListener("DOMNodeInserted",e,!1),page_expand_event_dispatcher.createEventHandler("release").setFunction((function(){document.removeEventListener("DOMNodeInserted",e,!1)}))}():(e=0,t=[],n=0,task_container.createTask().setExecuteFunc((function(a){if(e<=0){var i,o=5;for(o>n&&(o=n),i=0;i<o;i++){var r=t[n];n-=1,r&&(DomNodeGetInserted(r)||execute_queue.attachLastForInsertDomNode(DomNodeAnalyzeRoot,r))}n<=0&&(t=ElementGetElementsByTagName(document.body,"*"),(n=t.length)>0&&(n-=1),e=60)}else execute_queue.getCountQueue()<=0&&(e-=1)}))),execute_queue.attachLastForInsertDomNode(DomNodeAnalyzeRoot,document.documentElement),page_expand_execute_faster.startedAnalyze()})))}function PageExpandExecuteFaster(){var e=this;function t(){if(!i){i=!0;var e=WindowGetScrollPosition(window),t=document.documentElement,n=t.style.display;t.style.display="none",setTimeout((function(){execute_queue.setOccupancyTime(1e3),execute_queue.setSleepTime(0),(o=task_container.createTask()).setExecuteFunc((function(e){execute_queue.getCountQueue()<=0&&e.release()})),o.setDestructorFunc((function(a){void 0===n?StyleDeclarationRemoveProperty(t.style,"display"):StyleDeclarationSetProperty(t.style,"display",n),WindowSetScrollPosition(window,e),execute_queue.setOccupancyTime(project.getExecuteQueueOccupancyTime()),execute_queue.setSleepTime(project.getExecuteQueueSleepTime()),i=!1,o=null}))}),0)}}e.release=function(){o&&(o.release(),o=null)},e.start=function(){n?t():a=!0},e.startedAnalyze=function(){n=!0,a&&(a=!1,t())};var n=!1,a=!1,i=!1,o=null}function PageExpandExecuteFastest(){page_expand_execute_faster&&page_expand_execute_faster.start()}function PageExpandProject(){var e,t,n,a,i,o,r,l,s,c,_,u,d,p,m,g=this;function f(){var t,g,f,h=[{asset:"access_block",func:ProjectObjectInstantiateAccessBlock},{asset:"replacement_to_element",func:ProjectObjectInstantiateReplacementToElement},{asset:"replacement_to_text",func:ProjectObjectInstantiateReplacementToText},{asset:"replacement_to_anchor",func:ProjectObjectInstantiateReplacementToAnchor},{asset:"replacement_to_link",func:ProjectObjectInstantiateReplacementToLink},{asset:"make_link_to_text",func:ProjectObjectInstantiateMakeLinkToText},{asset:"expand_short_url",func:ProjectObjectInstantiateExpandShortUrl},{asset:"expand_text",func:ProjectObjectInstantiateExpandText},{asset:"expand_image",func:ProjectObjectInstantiateExpandImage},{asset:"expand_sound",func:ProjectObjectInstantiateExpandSound},{asset:"expand_video",func:ProjectObjectInstantiateExpandVideo},{asset:"expand_iframe",func:ProjectObjectInstantiateExpandIframe},{asset:"style_sheet",func:ProjectObjectInstantiateStyleSheet},{asset:"experimental",func:ProjectObjectInstantiateExperimental}],x=[{asset:"access_block",func:ProjectObjectInstantiateAccessBlock},{asset:"replacement_to_referer",func:ProjectObjectInstantiateReplacementToReferer},{asset:"replacement_to_useragent",func:ProjectObjectInstantiateReplacementToUseragent}],b=h.length,v=x.length;d&&(c=new UrlCacheDictionary).setCacheMax(32),(_=new Project).importObjectForBackground({enable:!0,standard:e.standard,download:e.download,expand_bbs:null});var y=e.standard,E=new Object;switch(y.filter_type){case"deny":E.filter_allow=!1,E.filter=y.filter_deny;break;case"allow":E.filter_allow=!0,E.filter=y.filter_allow}if(d){var w=E.filter,S=new Array,C=w.length;for(t=0;t<C;t++)S[t]=StringRegExpListFromAsteriskWord(w[t]);E.filter=S}for(n=E,l=new Object,s=new Object,o=new Object,r=new Object,t=0;t<b;t++){var A=h[t].asset,k=new Object,I=e[A];for(var D in I){(Z=I[D]).user?k[Z.id]=Z.user:Z.preset&&(k[Z.id]=Z.preset)}l[A]=k,s[A]=new Object}if(p)for(t=0;t<v;t++){A=x[t].asset;if(!s[A]){k=new Object,I=e[A];for(var D in I){(Z=I[D]).user?k[Z.id]=Z.user:Z.preset&&(k[Z.id]=Z.preset)}l[A]=k,s[A]=new Object,k.wildcard&&(o[A]=k.wildcard)}}if(m)for(t=0;t<b;t++){A=h[t].asset;var T=h[t].func,R=l[A],N=s[A];for(var D in R)N[D]=T(R[D])}if(p)for(t=0;t<v;t++){A=x[t].asset,T=x[t].func,R=l[A],N=s[A];for(var D in R)N[D]||(N[D]=T(R[D]));N.wildcard&&(r[A]=N.wildcard)}if(d){a=new Array;var j=e.urlmap,P=j.length;for(t=0;t<P;t++){var L;if((Z=j[t]).user?L=Z.user:Z.preset&&(L=Z.preset),L.enable){(Q=new Object).urlmap=L,Q.filter=ProjectObjectInstantiateUrlEditContainer(L.filter);var M=new Object,O=new Object;for(g=0;g<b;g++){if((D=L[A=h[g].asset]).enable){var U=l[A],z=s[A];if((V=D.id)&&"object"==typeof V){var F=new Array,B=new Array,G=V.length;for(f=0;f<G;f++)F.push(U[V[f]]),B.push(z[V[f]]);M[A]=F,O[A]=B}else M[A]=U[V],O[A]=z[V]}o[A]&&(M[A]?M[A].push(o[A]):M[A]=[o[A]])}if(Q.proj_src=M,Q.proj_ins=O,p){var W=new Object;for(g=0;g<v;g++){if((D=L[A=x[g].asset]).enable){var V;z=s[A];if((V=D.id)&&"object"==typeof V){B=new Array,G=V.length;for(f=0;f<G;f++)B.push(z[V[f]]);W[A]=B}else W[A]=z[V]}r[A]&&(W[A]?W[A].push(r[A]):W[A]=[r[A]])}(H=new UrlCacheDictionary).setCacheMax(64),W.url_cache=H,Q.web_request=W}a.push(Q)}}if(p){for(u=new Object,t=0;t<v;t++){A=x[t].asset;r[A]&&(u[A]=[r[A]])}var H;(H=new UrlCacheDictionary).setCacheMax(128),u.url_cache=H}i=new Array;var q=e.expand_bbs,Y=q.length;for(t=0;t<Y;t++){var Z,$,Q;if((Z=q[t]).user?$=Z.user:Z.preset&&($=Z.preset),$.enable)(Q=new Object).expand_bbs=$,Q.filter=ProjectObjectInstantiateUrlEditContainer($.filter),m&&(Q.expand_bbs=ProjectObjectInstantiateExpandBbs(Q.expand_bbs)),i.push(Q)}}}function h(e){var t,a=n.filter,i=a.length;if(d){for(t=0;t<i;t++)if(StringUrlMatchRegExpList(e,a[t]))return!!n.filter_allow}else for(t=0;t<i;t++)if(StringUrlMatchAsteriskWord(e,a[t]))return!!n.filter_allow;return!n.filter_allow}g.loadLocalStorage=function(n){function a(){try{e=PageExpandProjectObjectUpdate(e=PageExpandProjectObjectAppendPreset(e),null),f()}catch(e){return void i()}n({result:!0})}function i(){e=PageExpandProjectObjectUpdate(null,null),f(),n({result:!0})}e=null,project_import_manual?(e=project_import_manual,a()):LocalStorageGetItem(t,(function(t){if(t.result){try{e=JsonParse(t.value)}catch(t){}a()}else i()}))},g.saveLocalStorage=function(e){var n=g.exportObject();n=PageExpandProjectObjectRemovePreset(n),LocalStorageSetItem(t,JsonStringify(n),(function(t){e(t)}))},g.removeLocalStorage=function(e){LocalStorageRemoveItem(t,(function(t){e(t)}))},g.loadSyncStorage=function(n){SyncStorageGetItem(t,(function(t){if(t.result){var a=null;t.value&&(a=PageExpandProjectObjectAppendPreset(a=JsonParse(t.value))),e=PageExpandProjectObjectUpdate(a,null),f(),n({result:!0})}else n(t)}))},g.saveSyncStorage=function(e){var n=ObjectCopy(g.getObject());n=PageExpandProjectObjectRemovePreset(n),SyncStorageSetItem(t,JsonStringify(n),(function(t){e(t)}))},g.removeSyncStorage=function(e){SyncStorageRemoveItem(t,(function(t){e(t)}))},g.initialize=function(t){e=PageExpandProjectObjectUpdate(e=null,null),f()},g.importJSON=function(t){e=PageExpandProjectObjectUpdate(e=JsonParse(t),null),f()},g.importObject=function(t){e=PageExpandProjectObjectUpdate(e=ObjectCopy(t),null),f()},g.exportJSON=function(){return JsonStringify(e)},g.exportObject=function(){return ObjectCopy(e)},g.getObject=function(){return e},g.getProject=function(t){var n,r,s;if(!t)return _.getInstance();if(d){var u=c.getObject(t);if(!u.project){var p;if((p=new Object).standard=e.standard,p.download=e.download,void 0===u.enable&&(u.enable=h(t)),p.enable=u.enable,p.enable){var g=i.length;for(n=0;n<g;n++){var f=(L=i[n].filter).length;for(r=0;r<f;r++)if(StringUrlMatchRegExpList(t,L[r])){E=i[n];break}if(E)break}if(u.expand_bbs=E,void 0===(y=u.urlmap)){y=null;var x=a.length;for(n=0;n<x;n++){f=(L=a[n].filter).length;for(r=0;r<f;r++)if(StringUrlMatchRegExpList(t,L[r])){y=a[n];break}if(y)break}u.urlmap=y}if(y){var b;for(var v in b=m?y.proj_ins:y.proj_src)p[v]=b[v];p.mixed_passive_content=y.urlmap.mixed_passive_content,p.mixed_active_content=y.urlmap.mixed_active_content}E&&(p.expand_bbs=E.expand_bbs),p.current_secure=Boolean(0==t.indexOf("https://"))}u.project=p}return u.project}if((p=new Object).standard=e.standard,p.download=e.download,p.enable=h(t),p.enable){var y,E,w=[{asset:"access_block",func:ProjectObjectInstantiateAccessBlock},{asset:"replacement_to_element",func:ProjectObjectInstantiateReplacementToElement},{asset:"replacement_to_text",func:ProjectObjectInstantiateReplacementToText},{asset:"replacement_to_anchor",func:ProjectObjectInstantiateReplacementToAnchor},{asset:"replacement_to_link",func:ProjectObjectInstantiateReplacementToLink},{asset:"make_link_to_text",func:ProjectObjectInstantiateMakeLinkToText},{asset:"expand_short_url",func:ProjectObjectInstantiateExpandShortUrl},{asset:"expand_text",func:ProjectObjectInstantiateExpandText},{asset:"expand_image",func:ProjectObjectInstantiateExpandImage},{asset:"expand_sound",func:ProjectObjectInstantiateExpandSound},{asset:"expand_video",func:ProjectObjectInstantiateExpandVideo},{asset:"expand_iframe",func:ProjectObjectInstantiateExpandIframe},{asset:"style_sheet",func:ProjectObjectInstantiateStyleSheet},{asset:"experimental",func:ProjectObjectInstantiateExperimental}],S=w.length,C=e.urlmap;x=C.length;for(n=0;n<x;n++){var A;if((j=C[n]).user?A=j.user:j.preset&&(A=j.preset),A.enable){if("asterisk"==A.filter.type){f=(L=A.filter.asterisk.filter).length;for(r=0;r<f;r++)if(StringUrlMatchAsteriskWord(t,L[r])){y=A;break}}else if("regexp"==A.filter.type){f=(L=A.filter.regexp.filter).length;for(r=0;r<f;r++){if((M=RegExpObjectGetRegExp(L[r]))&&StringUrlMatchRegExpList(t,[M])){y=A;break}}}if(y)break}}if(y){for(r=0;r<S;r++){var k=w[r].asset;if((v=y[k]).enable){var I=l[k],D=v.id;if(D&&"object"==typeof D){var T=new Array,R=D.length;for(s=0;s<R;s++)T.push(I[D[s]]);o[k]&&T.push(o[k]),p[k]=T}else p[k]=I[D]}}p.mixed_passive_content=y.mixed_passive_content,p.mixed_active_content=y.mixed_active_content}var N=e.expand_bbs;g=N.length;for(n=0;n<g;n++){var j,P;if((j=N[n]).user?P=j.user:j.preset&&(P=j.preset),P.enable){if((new Object).expand_bbs=P,"asterisk"==P.filter.type){f=(L=P.filter.asterisk.filter).length;for(r=0;r<f;r++)if(StringUrlMatchAsteriskWord(t,L[r])){E=P;break}}else if("regexp"==P.filter.type){var L;f=(L=P.filter.regexp.filter).length;for(r=0;r<f;r++){var M;if((M=RegExpObjectGetRegExp(L[r]))&&StringUrlMatchRegExpList(t,[M])){E=P;break}}}if(E)break}}p.expand_bbs=E}return 0==t.indexOf("https://")?p.current_secure=!0:p.current_secure=!1,p},g.getWebRequest=function(e,t){var n,i;if(e){var o=(i=c.getObject(e)).urlmap;if(void 0===o){o=null;var r=a.length;for(f=0;f<r;f++){var l=(d=a[f].filter).length;for(x=0;x<l;x++)if(StringUrlMatchRegExpList(e,d[x])){o=a[f];break}if(o)break}i.urlmap=o}o&&(n=o.web_request)}n||(i={enable:!0},n=u);var s=n.url_cache.getObject(t);if(!s.web_request){var _=new Object;if(void 0===i.enable&&(i.enable=h(e)),i.enable){var d,p=n.access_block,m=n.replacement_to_useragent,g=n.replacement_to_referer;if(p){var f,x,b,v=p.length;for(f=0;f<v;f++){for(l=(b=p[f].filter).length,x=0;x<l;x++)if(StringUrlMatchRegExpList(t,b[x])){_.access_block=!0;break}if(_.access_block)break}}if(g)if(d=ProjectInstanceDefinesGetFilterFromURL(g,t)){var y=new Object,E=d.send_referer;switch(y.send_referer=E,y.cached=!1,E.type){case"default":y.cached=!0;break;case"link_url":y.referer=t,y.cached=!0;break;case"custom":y.referer=E.custom,y.cached=!0}E.regexp.pattern&&(y.regexp=RegExpObjectGetRegExp(E.regexp),void 0!==y.referer&&(y.referer=RegExpReplacementDollarWord(y.regexp,y.referer,E.replacement))),_.replacement_to_referer=y}if(m)(d=ProjectInstanceDefinesGetFilterFromURL(m,t))&&(_.replacement_to_useragent=d.send_useragent.custom)}s.web_request=_}if((y=s.web_request.replacement_to_referer)&&!y.cached){if("current_url"===(E=y.send_referer).type)y.referer=e;y.regexp&&void 0!==y.referer&&(y.referer=RegExpReplacementDollarWord(y.regexp,y.referer,E.replacement))}return s.web_request},g.getLanguage=function(){var t=e.language;return t.auto?NavigatorGetBrowserLanguage():t.code},t="PageExpandProject",d=!1,p=!1,m=!1}function Project(){var e,t,n,a=this;function i(){var e,t=this;t.release=function(){e=null},t.getObject=function(t){return e[t]},t.setObject=function(t,n){e[t]=n},e=new Object}a.release=function(){n.release(),n=null,e=null,t=null},a.importJSON=function(e){a.importObject(JsonParse(e))},a.importObject=function(n){e=n,function(){(t=new Object).enable=e.enable,t.current_secure=e.current_secure,t.mixed_passive_content=e.mixed_passive_content,t.mixed_active_content=e.mixed_active_content,t.standard=e.standard,t.download=e.download;var n,a,i=[{asset:"access_block",func:ProjectObjectInstantiateAccessBlock},{asset:"replacement_to_element",func:ProjectObjectInstantiateReplacementToElement},{asset:"replacement_to_text",func:ProjectObjectInstantiateReplacementToText},{asset:"replacement_to_anchor",func:ProjectObjectInstantiateReplacementToAnchor},{asset:"replacement_to_link",func:ProjectObjectInstantiateReplacementToLink},{asset:"make_link_to_text",func:ProjectObjectInstantiateMakeLinkToText},{asset:"expand_short_url",func:ProjectObjectInstantiateExpandShortUrl},{asset:"expand_text",func:ProjectObjectInstantiateExpandText},{asset:"expand_image",func:ProjectObjectInstantiateExpandImage},{asset:"expand_sound",func:ProjectObjectInstantiateExpandSound},{asset:"expand_video",func:ProjectObjectInstantiateExpandVideo},{asset:"expand_iframe",func:ProjectObjectInstantiateExpandIframe},{asset:"style_sheet",func:ProjectObjectInstantiateStyleSheet},{asset:"experimental",func:ProjectObjectInstantiateExperimental},{asset:"expand_bbs",func:ProjectObjectInstantiateExpandBbs}],o=i.length;for(n=0;n<o;n++){var r=i[n].asset,l=i[n].func,s=e[r];if(s&&"object"==typeof s)if(s.constructor==Array){var c=s,_=new Array,u=c.length;for(a=0;a<u;a++)_[a]=l(c[a]);t[r]=_}else t[r]=l(e[r])}}()},a.importObjectForBackground=function(n){t={enable:(e=n).enable,standard:e.standard,download:e.download,expand_bbs:e.expand_bbs}},a.getInstance=function(){return t},a.setInstance=function(e){t=e},a.getEnable=function(){return t.enable},a.getEnableDebugMode=function(){return t.standard.enable_debug_mode},a.getEnableOutputLog=function(){return t.standard.enable_output_log},a.getEnableIconAddressBar=function(){return t.standard.enable_icon_address_bar},a.getEnableContextMenu=function(){return t.standard.enable_context_menu},a.getEnableStartup=function(){return t.standard.enable_startup},a.getLoadThreadMax=function(){var e=t.download.load.thread_max;return e<1&&(e=1),e},a.getLoadTimeout=function(){var e=t.download.load.timeout;return e<0&&(e=0),e},a.getLoadCacheModeForMedia=function(){return t.download.load.cache_for_media},a.getDownloadThreadMax=function(){var e=t.download.download.thread_max;return e<1&&(e=1),e},a.getDownloadConflict=function(){return t.download.download.conflict_type},a.getSaveFileDownload=function(e){var n=t.download.download.save_file,a=null;return(a="simple"==n.type?"PageExpand/"+ProjectDownloadSaveFile_DetailFromSimple(n.simple):n.detail)||(a="PageExpand/"+ProjectDownloadSaveFile_DetailFromSimple("url")),ProjectDownloadSaveFile_GetFileNameFromDetail(a,e)},a.getSaveFileBatchDownload=function(e){var n=t.download.batch_download.save_file,a=null;return(a="simple"==n.type?ProjectDownloadSaveFile_DetailFromSimple(n.simple):n.detail)||(a=ProjectDownloadSaveFile_DetailFromSimple("url")),ProjectDownloadSaveFile_GetFileNameFromDetail(a,e)},a.getExecuteQueueOccupancyTime=function(){var e=t.standard.execute_queue.time_occupancy;return e<0&&(e=0),e>5e3&&(e=5e3),e},a.getExecuteQueueSleepTime=function(){var e=t.standard.execute_queue.time_sleep;return e<0&&(e=0),e>1e3&&(e=1e3),e},a.getSecureCurrent=function(){return t.current_secure},a.checkMixedContent=function(e){return!(!t.current_secure||0!=e.indexOf("http://"))},a.fixURL_PassiveContent=function(e){return"unsafe"==t.mixed_passive_content?e:a.checkMixedContent(e)?"https://"+e.slice(7):e},a.fixURL_ActiveContent=function(e){return"unsafe"==t.mixed_active_content?e:a.checkMixedContent(e)?"https://"+e.slice(7):e},a.checkAllowExpandIframeElement=function(e){return!0},a.enableInputTouch=function(){return!!window.TouchEvent&&t.standard.enable_input_touch},a.enableDoubleTouchAssist=function(){return!!window.TouchEvent&&t.standard.enable_double_touch_assist},a.checkAccessBlock=function(e){if(!t.access_block)return!1;var n,a,i,o,r=t.access_block,l=r.length;for(n=0;n<l;n++)for(o=(i=r[n].filter).length,a=0;a<o;a++)if(StringUrlMatchRegExpList(e,i[a]))return!0;return!1},a.getEnableReplacementToElement=function(){return t.replacement_to_element},a.executeScriptReplacementToElement=function(e,n){var a=t.replacement_to_element,i=0,o=a.length,r={element:e.element},l={};!function e(t){var s;if(t&&"object"==typeof t)for(s in t)l[s]=t[s];if(o<=i)n(l);else{var c=a[i];i++;var _,u=c.script,d=u.length;if(d)for(_=0;_<d&&!u[_](r,e);_++);else e({})}}({})},a.getEnableReplacementToText=function(){return t.replacement_to_text},a.executeScriptReplacementToText=function(e,n){var a=t.replacement_to_text,i=0,o=a.length,r={text_node:e},l={};!function e(t){var s;if(t&&"object"==typeof t)for(s in t)l[s]=t[s];if(o<=i)n(l);else{var c=a[i];i++;var _,u=c.script,d=u.length;if(d)for(_=0;_<d&&!u[_](r,e);_++);else e({})}}({})},a.getEnableReplacementToAnchor=function(){return t.replacement_to_anchor},a.executeScriptReplacementToAnchor=function(e,n,a){var i=t.replacement_to_anchor,o=0,r=i.length,l={anchor_element:e,event_dispatcher:n},s={};!function e(t){var n;if(t&&"object"==typeof t)for(n in t)s[n]=t[n];if(r<=o)a(s);else{var c=i[o];o++;var _,u=c.script,d=u.length;if(d)for(_=0;_<d&&!u[_](l,e);_++);else e({})}}({})},a.getEnableReplacementToLink=function(){return t.replacement_to_link},a.getReplacementToLink=function(e){var a,i=new Object;return i.executeScript=function(t){var n={anchor_element:e},i=null,o=0;function r(e){e.result?t({result:e,filter:i}):s()}function l(){t({result:{result:!1},filter:i})}function s(){if(i=a[o],o+=1,i){var e,t=i.script,c=t.length;if(c)for(e=0;e<c&&!t[e](n,r);e++);else s()}else l()}a?s():l()},i.getResult=function(t){function a(e){i.executeScript((function(n){e.setFilter(n.filter),e.setResult(n.result),t(e),e.getCompleted()||(e.setCompleted(),e.getEnableCache()?e.dispatchEvent("complete",e):e.dispatchEvent("execute",e),e.releaseEventDispatcher())}))}var o,r=e.href,l=n.getObject(r);if(l)if(l.getCompleted())l.getEnableCache()?t(l):a(l);else{l.createEventHandler("execute").setFunction((function(e){a(e)})),l.createEventHandler("complete").setFunction((function(e){t(e)}))}else(o=new Object).getCompleted=function(){return o.completed},o.setCompleted=function(){o.completed=!0},o.getResult=function(){return o.result},o.setResult=function(e){o.result=e},o.setFilter=function(e){o._filter=e},o.getEnableReflectToAnchor=function(){return!!o._filter&&o._filter.enable_reflect_to_anchor},o.getEnableCache=function(){return!!o._filter&&o._filter.enable_cache},o.releaseEventDispatcher=function(){o.event_dispatcher&&(o.event_dispatcher.release(),o.event_dispatcher=null)},o.createEventHandler=function(e){return o._event_dispatcher.createEventHandler(e)},o.dispatchEvent=function(e,t){o._event_dispatcher.dispatchEvent(e,t)},o.completed=!1,o.result=null,o._event_dispatcher=new EventDispatcher,o._filter=null,l=o,n.setObject(r,l),a(l)},a=ProjectInstanceDefinesGetAllFiltersFromURL(t.replacement_to_link,e.href),i},a.getEnableReplacementToReferer=function(){return t.replacement_to_referer},a.getEnableReplacementToUserAgent=function(){return t.replacement_to_useragent},a.getEnableMakeLinkToText=function(){return t.make_link_to_text},a.executeScriptMakeLinkToText=function(e,n){var a,i={text_node:e},o=t.make_link_to_text.script,r=o.length;if(r)for(a=0;a<r&&!o[a](i,n);a++);else n({})},a.getEnableExpandShortUrl=function(){return t.expand_short_url},a.checkExpandShortUrl=function(e){if(!t.expand_short_url)return!1;var n,a=t.expand_short_url.filter,i=a.length;for(n=0;n<i;n++)if(StringUrlMatchRegExpList(e,a[n]))return!0;return!1},a.getEnableExpandBbs=function(){return!!t.expand_bbs},a.getEnableAnimationPopupBbsResponse=function(){return t.expand_bbs.popup.enable_animation},a.getOriginPopupExpandBbsResponse=function(){return t.expand_bbs.popup.origin_type},a.getStylePositionPopupBbsResponse=function(){return t.expand_bbs.popup.position_type},a.getPercentPopupBbsResponse=function(){return t.expand_bbs.popup.percent},a.getTimeWaitOpenPopupExpandBbsResponse=function(){return t.expand_bbs.popup.time_wait_open},a.getTimeWaitClosePopupExpandBbsResponse=function(){return t.expand_bbs.popup.time_wait_close},a.getStyleSheetExpandBbsPopupResponse=function(){return t.expand_bbs.popup.style_sheet},a.initializeScriptCallbackExpandBbs=function(e){var n,a={work:expand_bbs.work},i=t.expand_bbs.script_initialize,o=i.length;for(n=0;n<o&&!i[n](a,e);n++);},a.executeScriptCallbackExpandBbs=function(e,n){var a,i={element:e,work:expand_bbs.work},o=t.expand_bbs.script_callback,r=o.length;if(r)for(a=0;a<r&&!o[a](i,n);a++);else n({useful:!1})},a.getEnableExpandText=function(){return t.expand_text},a.getDisableSameInlineText=function(){return!!t.expand_text&&t.expand_text.inline.disable_same_text},a.executeScriptAllowInlineText=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,url:n,content_type:a},l=t.expand_text.inline.script_allow,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i({result:!1})},a.executeScriptInsertInlineText=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,textarea_element:n,event_dispatcher:a},l=t.expand_text.inline.script_insert,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i()},a.getEnableExpandImage=function(){return t.expand_image},a.getDisableSameThumbnailImage=function(){return!!t.expand_image&&t.expand_image.thumbnail.disable_same_image},a.getEnablePopupImage=function(){return!!t.expand_image&&t.expand_image.popup.enable_popup_mouseover},a.getEnableAnimationPopupImage=function(){return!!t.expand_image.popup.enable_animation_scale||!!t.expand_image.popup.enable_animation_alpha},a.getEnableScaleAnimationPopupImage=function(){return t.expand_image.popup.enable_animation_scale},a.getEnableAlphaAnimationPopupImage=function(){return t.expand_image.popup.enable_animation_alpha},a.getEnableThumbnailImage=function(){return!!t.expand_image&&t.expand_image.thumbnail.enable_thumbnail},a.getEnablePopupMouseoverToThumbnailImage=function(){return t.expand_image.thumbnail.enable_popup_mouseover},a.getScalePercentThumbnailImage=function(){return t.expand_image.thumbnail.scale_percent},a.getWidthMinThumbnailImage=function(){return t.expand_image.thumbnail.width_min},a.getWidthMaxThumbnailImage=function(){return t.expand_image.thumbnail.width_max},a.executeScriptAllowThumbnailImage=function(e,n){var a,i={anchor_element:e.element,current_element:e.element,url:e.url,content_type:e.content_type,is_overridden_url:e.is_overridden_url},o=t.expand_image.thumbnail.script_allow,r=o.length;if(r)for(a=0;a<r&&!o[a](i,n);a++);else n({result:!1})},a.executeScriptInsertThumbnailImage=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,image_element:n,event_dispatcher:a},l=t.expand_image.thumbnail.script_insert,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i()},a.getEnablePreLoadThumbnailImage=function(){return"preload"==t.expand_image.thumbnail.load_type},a.getEnablePreLoadPopupImage=function(){return"preload"==t.expand_image.popup.load_type},a.getOriginPopupImage=function(){return t.expand_image.popup.origin_type},a.getStylePositionPopupImage=function(){return t.expand_image.popup.position_type},a.getScalePercentPopupImage=function(){return t.expand_image.popup.scale_percent},a.getTimeWaitOpenPopupImage=function(){return t.expand_image.popup.time_wait_open},a.getTimeWaitClosePopupImage=function(){return t.expand_image.popup.time_wait_close},a.executeScriptAllowPopupImage=function(e,n){var a,i={anchor_element:e.element,current_element:e.element,url:e.url,content_type:e.content_type,is_overridden_url:e.is_overridden_url},o=t.expand_image.popup.script_allow,r=o.length;if(r)for(a=0;a<r&&!o[a](i,n);a++);else n({result:!1})},a.getEnablePopupReducedImage=function(){return!!t.expand_image&&t.expand_image.reduced_image.enable_popup},a.getScaleLessThenAllowPopupReducedImage=function(){return!!t.expand_image&&t.expand_image.reduced_image.popup_allow_slcale_less_then},a.getEnableLoadNotifyExpandImage=function(){return!!t.expand_image&&t.expand_image.load.enable_notify},a.getSourceLoadExpandImage=function(){return t.expand_image?t.expand_image.load.src_type:"blob_url"},a.getDecodeLoadExpandImage=function(){return t.expand_image?t.expand_image.load.decode:"pre-decode"},a.getEnableUnloadExpandImage=function(){return!!t.expand_image&&t.expand_image.load.enable_unload},a.getSizeMoreThenAllowUnloadExpandImage=function(){return!!t.expand_image&&t.expand_image.load.unload_allow_size_more_then},a.getEnableExpandSound=function(){return t.expand_sound},a.getDisableSameInlineSound=function(){return!!t.expand_sound&&t.expand_sound.inline.disable_same_audio},a.getSoundMaxInlineSound=function(){return t.expand_sound?t.expand_sound.inline.sound_max:0},a.executeScriptAllowInlineSound=function(e,n){var a,i={anchor_element:e.element,current_element:e.element,url:e.url,content_type:e.content_type,is_overridden_url:e.is_overridden_url},o=t.expand_sound.inline.script_allow,r=o.length;if(r)for(a=0;a<r&&!o[a](i,n);a++);else n({result:!1})},a.executeScriptInsertInlineSound=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,element:n,event_dispatcher:a},l=t.expand_sound.inline.script_insert,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i()},a.executeScriptAllowAudioElement=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,url:n,content_type:a},l=t.expand_sound.audio_element.script_allow,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i({result:!1})},a.getSourceAudioElement=function(){return t.expand_sound?t.expand_sound.audio_element.src_type:"url"},a.getVisiblePlayerHtml5Soundcloud=function(){return t.expand_sound.soundcloud.visible_player_html5},a.getVisiblePlayerMixcloud=function(){return t.expand_sound.mixcloud.visible_player},a.getEnableExpandVideo=function(){return t.expand_video},a.getDisableSameInlineVideo=function(){return!!t.expand_video&&t.expand_video.inline.disable_same_video},a.getVideoMaxInlineVideo=function(){return t.expand_video?t.expand_video.inline.video_max:0},a.getWidthMaxInlineVideo=function(){var e;return t.expand_video&&(e=t.expand_video.inline.width_max),(e=Number(e)||0)<100&&(e=100),e},a.getHeightMaxInlineVideo=function(){var e;return t.expand_video&&(e=t.expand_video.inline.height_max),(e=Number(e)||0)<100&&(e=100),e},a.executeScriptAllowInlineVideo=function(e,n){var a,i={anchor_element:e.element,current_element:e.element,url:e.url,content_type:e.content_type,is_overridden_url:e.is_overridden_url},o=t.expand_video.inline.script_allow,r=o.length;if(r)for(a=0;a<r&&!o[a](i,n);a++);else n({result:!1})},a.executeScriptInsertInlineVideo=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,element:n,event_dispatcher:a},l=t.expand_video.inline.script_insert,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i()},a.executeScriptAllowVideoElement=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,url:n,content_type:a},l=t.expand_video.video_element.script_allow,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i({result:!1})},a.getSourceVideoElement=function(){return t.expand_video?t.expand_video.video_element.src_type:"url"},a.getVisibleVideoYoutube=function(){return t.expand_video.youtube.visible_video},a.getVisibleVideoNicovideo=function(){return t.expand_video.nicovideo.visible_video},a.getVisibleVideoDailymotion=function(){return t.expand_video.dailymotion.visible_video},a.getVisibleVideoVimeo=function(){return t.expand_video.vimeo.visible_video},a.getStyleSheetExpandTextInline=function(e){var n=t.style_sheet.expand_text;return a.checkMixedContent(e)?n.inline_unsafe:n.inline},a.getStyleSheetExpandImageThumbnail=function(e){var n=t.style_sheet.expand_image;return a.checkMixedContent(e)?n.thumbnail_unsafe:n.thumbnail},a.getStyleSheetExpandImagePopup=function(e){var n=t.style_sheet.expand_image;return a.checkMixedContent(e)?n.popup_unsafe:n.popup},a.getStyleSheetExpandSoundInlineAudioElement=function(e){var n=t.style_sheet.expand_sound.inline.audio_element;return a.checkMixedContent(e)?n.audio_unsafe:n.audio},a.getStyleSheetExpandSoundSoundcloudInlinePlayerHtml5=function(){return t.style_sheet?t.style_sheet.expand_sound.inline.soundcloud.player_html5:""},a.getStyleSheetExpandSoundMixcloudInlinePlayer=function(){return t.style_sheet?t.style_sheet.expand_sound.inline.mixcloud.player:""},a.getStyleSheetExpandVideoInlineVideoElement=function(e){var n=t.style_sheet.expand_video.inline.video_element;return a.checkMixedContent(e)?n.video_unsafe:n.video},a.getStyleSheetExpandVideoYoutubeInlineVideo=function(){return t.style_sheet?t.style_sheet.expand_video.inline.youtube.video:""},a.getStyleSheetExpandVideoNicovideoInlineVideo=function(){return t.style_sheet?t.style_sheet.expand_video.inline.nicovideo.video:""},a.getStyleSheetExpandVideoDailymotionInlineVideo=function(){return t.style_sheet?t.style_sheet.expand_video.inline.dailymotion.video:""},a.getStyleSheetExpandVideoVimeoInlineVideo=function(){return t.style_sheet?t.style_sheet.expand_video.inline.vimeo.video:""},a.getStyleSheetExpandIframeInline=function(e){var n=t.style_sheet.expand_iframe;return a.checkMixedContent(e)?n.inline_unsafe:n.inline},a.getEnableExpandIframe=function(){return t.expand_iframe},a.getDisableSameInlineIframe=function(){return!!t.expand_iframe&&t.expand_iframe.inline.disable_same_iframe},a.executeScriptAllowInlineIframe=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,url:n,content_type:a},l=t.expand_iframe.inline.script_allow,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i({result:!1})},a.executeScriptInsertInlineIframe=function(e,n,a,i){var o,r={anchor_element:e,current_element:e,iframe_element:n,event_dispatcher:a},l=t.expand_iframe.inline.script_insert,s=l.length;if(s)for(o=0;o<s&&!l[o](r,i);o++);else i()},n=new i}function ProjectObjectInstantiateStandard(e){return e}function ProjectObjectInstantiateExpandBbs(e){var t=ObjectCopy(e);return t.script_initialize=PageExpandProjectScriptObject_EvalArrayFunction(t.script_initialize),t.script_callback=PageExpandProjectScriptObject_EvalArrayFunction(t.script_callback),t}function ProjectObjectInstantiateAccessBlock(e){return{filter:ProjectObjectInstantiateUrlEditContainer(e.filter)}}function ProjectObjectInstantiateReplacementToElement(e){return{script:PageExpandProjectScriptObject_EvalArrayFunction(e.script)}}function ProjectObjectInstantiateReplacementToText(e){return{script:PageExpandProjectScriptObject_EvalArrayFunction(e.script)}}function ProjectObjectInstantiateReplacementToAnchor(e){return{script:PageExpandProjectScriptObject_EvalArrayFunction(e.script)}}function ProjectObjectInstantiateReplacementToLink(e){var t,n,a=new Array,i=e.filter,o=i.length;for(t=0;t<o;t++)n=i[t],a[t]={filter:ProjectObjectInstantiateUrlEditContainer(n.filter),enable_reflect_to_anchor:n.enable_reflect_to_anchor,enable_cache:n.enable_cache,script:PageExpandProjectScriptObject_EvalArrayFunction(n.script)};return{filter:a}}function ProjectObjectInstantiateReplacementToReferer(e){var t,n,a=new Array,i=e.filter,o=i.length;for(t=0;t<o;t++)n=i[t],a[t]={filter:ProjectObjectInstantiateUrlEditContainer(n.filter),send_referer:n.send_referer};return{filter:a}}function ProjectObjectInstantiateReplacementToUseragent(e){var t,n,a=new Array,i=e.filter,o=i.length;for(t=0;t<o;t++)n=i[t],a[t]={filter:ProjectObjectInstantiateUrlEditContainer(n.filter),send_useragent:n.send_useragent};return{filter:a}}function ProjectObjectInstantiateMakeLinkToText(e){return{script:PageExpandProjectScriptObject_EvalArrayFunction(e.script)}}function ProjectObjectInstantiateExpandShortUrl(e){return{filter:ProjectObjectInstantiateUrlEditContainer(e.filter)}}function ProjectObjectInstantiateExpandText(e){var t=ObjectCopy(e);return t.inline.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_allow),t.inline.script_insert=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_insert),t}function ProjectObjectInstantiateExpandImage(e){var t=ObjectCopy(e);return t.thumbnail.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.thumbnail.script_allow),t.thumbnail.script_insert=PageExpandProjectScriptObject_EvalArrayFunction(t.thumbnail.script_insert),t.popup.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.popup.script_allow),t}function ProjectObjectInstantiateExpandSound(e){var t=ObjectCopy(e);return t.inline.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_allow),t.inline.script_insert=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_insert),t.audio_element.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.audio_element.script_allow),t}function ProjectObjectInstantiateExpandVideo(e){var t=ObjectCopy(e);return t.inline.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_allow),t.inline.script_insert=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_insert),t.video_element.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.video_element.script_allow),t}function ProjectObjectInstantiateExpandIframe(e){var t=ObjectCopy(e);return t.inline.script_allow=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_allow),t.inline.script_insert=PageExpandProjectScriptObject_EvalArrayFunction(t.inline.script_insert),t}function ProjectObjectInstantiateStyleSheet(e){return e}function ProjectObjectInstantiateExperimental(e){return e}function ProjectObjectInstantiateUrlEditContainer(e){var t,n,a,i=new Array;switch(e.type){case"asterisk":for(n=(t=e.asterisk.filter).length,a=0;a<n;a++)i[a]=StringRegExpListFromAsteriskWord(t[a]);break;case"regexp":for(n=(t=e.regexp.filter).length,a=0;a<n;a++)i[a]=[RegExpObjectGetRegExp(t[a])]}return i}function ProjectInstanceDefinesGetFilterFromURL(e,t){var n,a,i,o,r,l,s,c,_=e.length;for(n=0;n<_;n++)for(l=(o=e[n].filter).length,a=0;a<l;a++)for(c=(s=(r=o[a]).filter).length,i=0;i<c;i++)if(StringUrlMatchRegExpList(t,s[i]))return r;return null}function ProjectInstanceDefinesGetAllFiltersFromURL(e,t){var n,a,i,o,r,l,s,c,_=new Array,u=e.length;for(n=0;n<u;n++)for(l=(o=e[n].filter).length,a=0;a<l;a++)for(c=(s=(r=o[a]).filter).length,i=0;i<c;i++)if(StringUrlMatchRegExpList(t,s[i])){_.push(r);break}return _}function PageExpandProjectObjectImportExpandBbs(e,t,n){if(void 0!==t.version&&t.expand_bbs){var a=PageExpandProjectObjectUpdate(null,{version:t.version}),i=new Object,o=new Object,r=new Object,l=new Array;!function(){var e,n=t.expand_bbs,a=n.length;for(e=0;e<a;e++){var o=n[e];void 0!==o.id&&(i[o.id]=o,o.user&&l.push(o.id))}}(),function(){var e,t=a.expand_bbs,n=t.length;for(e=0;e<n;e++){var i=t[e];void 0!==i.id&&(o[i.id]=i)}}(),function(){var e,t,n=a.expand_bbs,r=n.length;for(e=0;e<r;e++){var l=n[e];i[l.id]&&(l.user=i[l.id].user)}for(t in i)o[t]||n.push(i[t]);a=PageExpandProjectObjectUpdate(a,null)}(),function(){var e,t=a.expand_bbs,n=t.length;for(e=0;e<n;e++){var i=t[e];void 0!==i.id&&(r[i.id]=i)}}(),function(){var t,n=e.expand_bbs,a=new Object,i=n.length;for(t=0;t<i;t++){a[(o=n[t]).id]=o}for(t=(i=l.length)-1;t>=0;t--){var o;if((o=r[l[t]]).preset)a[o.id].user=o.user;else{var s=PageExpandProjectObjectDefineGenerateNewUserId(e.expand_bbs);n.unshift(o),o.id=s}}}()}}function PageExpandProjectObjectImportDefine(e,t,n){if(void 0!==t.version){var a=PageExpandProjectObjectUpdate(null,{version:t.version}),i=new Object,o=new Object,r=new Object,l=new Object;!function(){var e;for(e in t){var n=t[e];if(n&&"object"==typeof n&&n.constructor==Array){i[e]=new Object;var a,o=new Array,r=n.length;for(a=0;a<r;a++){var s=n[a];void 0!==s.id&&(i[e][s.id]=s,s.user&&o.push(s.id))}o.length&&(l[e]=o)}}}(),l[n]&&(function(){var e;for(e in a){var t=a[e];if(t&&"object"==typeof t&&t.constructor==Array){var n;o[e]=new Object;var i=t.length;for(n=0;n<i;n++){var r=t[n];void 0!==r.id&&(o[e][r.id]=r)}}}}(),function(){var e;for(e in a){var t=a[e];if(t&&"object"==typeof t&&t.constructor==Array){if(!l[e])continue;var n,r=t.length;for(n=0;n<r;n++){var s=t[n];i[e][s.id]&&(s.user=i[e][s.id].user)}var c,_=i[e];for(c in _)o[e][c]||t.push(_[c])}}a=PageExpandProjectObjectUpdate(a,null)}(),function(){var e;for(e in a){var t=a[e];if(t&&"object"==typeof t&&t.constructor==Array){var n;r[e]=new Object;var i=t.length;for(n=0;n<i;n++){var o=t[n];void 0!==o.id&&(r[e][o.id]=o)}}}}(),function(){var t,a=e[n],i=new Object,o=a.length;for(t=0;t<o;t++){i[(c=a[t]).id]=c}var s=l[n];for(t=(o=s.length)-1;t>=0;t--){var c;if((c=r[n][s[t]]).preset)i[c.id].user=c.user;else{var _=PageExpandProjectObjectDefineGenerateNewUserId(e[n]);a.unshift(c),c.id=_}}}())}}function PageExpandProjectObjectGetDefineFilterLatest(e,t){if(void 0!==e.version&&e[t]){var n=PageExpandProjectObjectUpdate(null,{version:e.version}),a=e[t][0];return n[t].push(a),n=PageExpandProjectObjectUpdate(n,null),a.user.filter}}function PageExpandProjectObjectAppendPreset(e){if(void 0===e.version)return null;var t,n=PageExpandProjectObjectUpdate(null,{version:e.version}),a=new Object;for(t in n){if((o=n[t])&&"object"==typeof o&&o.constructor==Array){a[t]=new Object;var i=o.length;for(r=0;r<i;r++){void 0!==(l=o[r]).id&&(a[t][l.id]=l)}}}for(t in e){var o;if((o=e[t])&&"object"==typeof o&&o.constructor==Array){var r;i=o.length;for(r=0;r<i;r++){var l;void 0!==(l=o[r]).id&&void 0!==a[t][l.id]&&(l.preset=a[t][l.id].preset)}}}return e}function PageExpandProjectObjectRemovePreset(e){var t;for(t in e){var n=e[t];if(n&&"object"==typeof n&&n.constructor==Array){var a,i=n.length;for(a=0;a<i;a++){var o=n[a];void 0!==o.id&&void 0!==o.preset&&ObjectDeleteProperty(o,"preset")}}}return e}function PageExpandProjectObjectDefineGenerateNewUserId(e){var t,n=new Object,a=e.length;for(t=0;t<a;t++)n[e[t].id]=e[t];for(t=0;n["user"+t];)t++;return"user"+t}function ProjectDownloadSaveFile_DetailFromSimple(e){switch(e){case"kebab_url":return"<kebab-url>";case"filename":return"<filename>";case"domain":return"<domain>-<filename>";case"date":return"<year><month><day>/<filename>"}return"<url>"}function ProjectDownloadSaveFile_GetFileNameFromDetail(e,t){function n(e,t){for(var n=String(e),a=n.length;a<t;)n="0"+n,a++;return n}var a=URL_Parser(t),i=t.replace(/\//g,"-"),o=new Date,r=n(o.getFullYear(),4),l=n(o.getMonth()+1,2),s=n(o.getDate(),2),c=n(o.getHours(),2),_=n(o.getMinutes(),2),u=n(o.getSeconds(),2),d=n(o.getMilliseconds(),3),p=Math.floor(o.getTime()/1e3);if(str=e,str=str.replace(/<url>/gi,t),str=str.replace(/<kebab-url>/gi,i),str=str.replace(/<origin>/gi,a.origin),str=str.replace(/<domain>/gi,a.domain),str=str.replace(/<filename>/gi,a.filename),str=str.replace(/<name>/gi,a.name),str=str.replace(/<ext>/gi,a.ext),str=str.replace(/<query>/gi,a.search),str=str.replace(/<fragment>/gi,a.hash),str=str.replace(/<year>/gi,r),str=str.replace(/<month>/gi,l),str=str.replace(/<day>/gi,s),str=str.replace(/<hour>/gi,c),str=str.replace(/<minute>/gi,_),str=str.replace(/<second>/gi,u),str=str.replace(/<millisecond>/gi,d),str=str.replace(/<unixtime>/gi,p),a.ext){var m="."+a.ext;m!=str.slice(-m.length)&&(str+=m)}return str}function ProjectDownloadSaveFile_Sanitize(e){var t,n=new Array,a=e.split(new RegExp("[/\\\\]+","i")),i=a.length;for(t=0;t<i;t++){var o=a[t];o&&(o.match(/^[. ]+$/)||(o=(o=o.replace(/^[. ]*(.*?)[. ]*$/,"$1")).replace(/[":*?<>|~]/g,"-"),n.push(o)))}return n.join("/")}function PageExpandProjectObjectUpdate(e,t){function n(e,t,n){var a,i,o=e.length;for(a=0;a<o;a++)if(e[a].id==t){i=e[a];break}if(i){if(i.user){var r=ObjectCopy(i);delete i.user,delete r.preset;var l=r.user;l.name.standard+=" (BackUp)";var s=l.name.locales;for(var c in s)s[c]+=" (BackUp)";e.splice(a+1,0,r),r.id=PageExpandProjectObjectDefineGenerateNewUserId(e)}}else{if(n){for(a=o-1;a>=0&&e[a].id!=n;a--);a<0&&(a=0)}else a=o;(i=new Object).id=t,e.splice(a,0,i)}return i}function a(e,t){var n,a,i=e.length;for(n=0;n<i;n++)if((a=e[n]).id==t){if(a.preset)return a.preset;break}return null}function i(t,n){var a=e[t];if(!a)return null;var i=!1,o=!1,r=!{urlmap:!0,expand_bbs:!0}[t],l=function(){var e,t,i=a.length;for(t=0;t<i;t++)if((e=a[t]).id===n)return a.splice(t,1),e;return null}();if(!l)return null;var s=function(){var n=ObjectCopy(l);n.user?i=!0:n.user=n.preset,delete l.user,delete n.preset;var a=n.user;a.name.standard+=" (BackUp)";var o=a.name.locales;for(var r in o)o[r]+=" (BackUp)";return n.id=PageExpandProjectObjectDefineGenerateNewUserId(e[t]),n}();!function(){if(r){var a,i,l=e.urlmap,c=l.length;for(a=0;a<c;a++){var _=l[a].preset;if(_)if(u=_[t])if(u.id&&"object"==typeof u.id)for(i=(d=u.id).length-1;i>=0;i--)d[i]===n&&(d.splice(i,1),0==d.length&&(u.enable=!1));else u.id===n&&(u.id="",u.enable=!1)}for(a=0;a<c;a++){var u,d,p=l[a].user;if(p)if(u=p[t])if(u.id&&"object"==typeof u.id)for(i=(d=u.id).length-1;i>=0;i--)d[i]===n&&(d[i]=s.id,u.enable=!0,o=!0);else u.id===n&&(u.id=s.id,u.enable=!0,o=!0)}}}();var c=!1;return!r&&i&&(c=!0),o&&(c=!0),c&&a.push(s),l}function o(e,t,n){var a,i,o=e.length;if("*"==t)for(i=0;i<o;i++)(a=e[i]).preset&&n(a.preset,a);else for(i=0;i<o;i++)if((a=e[i]).id==t){a.preset&&n(a.preset,a);break}}function r(e,t,n){var a,i,o=e.length;if("*"==t)for(i=0;i<o;i++)(a=e[i]).user&&n(a.user,a);else for(i=0;i<o;i++)if((a=e[i]).id==t){a.user&&n(a.user,a);break}}function l(e,t,n){var a,i,o=e.length;if("*"==t)for(i=0;i<o;i++)(a=e[i]).user&&n(a.user,a),a.preset&&n(a.preset,a);else for(i=0;i<o;i++)if((a=e[i]).id==t){a.user&&n(a.user,a),a.preset&&n(a.preset,a);break}}function s(e,t){var n,a=e.length;for(n=0;n<a;n++)if(e[n].id==t)return n;return-1}function c(t){return e[t]&&"object"==typeof e[t]&&e[t].constructor==Array||(e[t]=new Array),e[t]}function _(){return!!(t&&void 0!==t.version&&e.version>=t.version)}if(e||((e=new Object).version=0),_())return e;e.version<1&&(e.version=1,e.standard={filter_type:"deny",filter_deny:["*://example.com/*","*://*.example.com/*"],filter_allow:["*://example.com/*","*://*.example.com/*"],enable_debug_mode:!1,enable_icon_address_bar:!0,enable_context_menu:!0,enable_enable_startup:!0,load_thread_max:10,execute_queue:{time_occupancy:5,time_sleep:0}},c("expand_bbs"),l(e.expand_bbs,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.enable||(e.enable=!1),e.script_allow||(e.script_allow=""),e.script_callback||(e.script_callback=""),e.popup||(e.popup=new Object),e.popup.origin_type||(e.popup.origin_type="adsorb_top_down"),e.popup.position_type||(e.popup.position_type="absolute"),e.popup.enable_animation||(e.popup.enable_animation=!1),e.popup.percent||(e.popup.percent=new Object),e.popup.percent.x||(e.popup.percent.x=0),e.popup.percent.y||(e.popup.percent.y=0),e.popup.time_wait_open||(e.popup.time_wait_open=0),e.popup.time_wait_close||(e.popup.time_wait_close=0),e.popup.style_sheet||(e.popup.style_sheet=0)})),(w=n(e.expand_bbs,"2ch",null)).preset={name:{standard:"2ch.net",locales:{ja:"２ちゃんねる掲示板",en:"2ch.net"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},(w=n(e.expand_bbs,"logsoku","2ch")).preset={name:{standard:"logsoku.com",locales:{ja:"ログ速",en:"logsoku.com"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},(w=n(e.expand_bbs,"mimizun","logsoku")).preset={name:{standard:"mimizun.com",locales:{ja:"みみずん検索",en:"mimizun.com"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},(w=n(e.expand_bbs,"2chan","mimizun")).preset={name:{standard:"2chan.net",locales:{ja:"ふたば☆ちゃんねる",en:"2chan.net"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},(w=n(e.expand_bbs,"4chan","2chan")).preset={name:{standard:"4chan.org",locales:{ja:"4chan",en:"4chan.org"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},c("urlmap"),l(e.urlmap,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.enable||(e.enable=!1),e.filter||(e.filter=[]),e.access_block||(e.access_block=new Object),e.access_block.enable||(e.access_block.enable=!1),e.replacement_to_element||(e.replacement_to_element=new Object),e.replacement_to_element.enable||(e.replacement_to_element.enable=!1),e.replacement_to_text||(e.replacement_to_text=new Object),e.replacement_to_text.enable||(e.replacement_to_text.enable=!1),e.replacement_to_link||(e.replacement_to_link=new Object),e.replacement_to_link.enable||(e.replacement_to_link.enable=!1),e.replacement_to_referer||(e.replacement_to_referer=new Object),e.replacement_to_referer.enable||(e.replacement_to_referer.enable=!1),e.replacement_to_useragent||(e.replacement_to_useragent=new Object),e.replacement_to_useragent.enable||(e.replacement_to_useragent.enable=!1),e.make_link_to_text||(e.make_link_to_text=new Object),e.make_link_to_text.enable||(e.make_link_to_text.enable=!1),e.expand_short_url||(e.expand_short_url=new Object),e.expand_short_url.enable||(e.expand_short_url.enable=!1),e.expand_text||(e.expand_text=new Object),e.expand_text.enable||(e.expand_text.enable=!1),e.expand_image||(e.expand_image=new Object),e.expand_image.enable||(e.expand_image.enable=!1),e.expand_sound||(e.expand_sound=new Object),e.expand_sound.enable||(e.expand_sound.enable=!1),e.expand_video||(e.expand_video=new Object),e.expand_video.enable||(e.expand_video.enable=!1),e.expand_iframe||(e.expand_iframe=new Object),e.expand_iframe.enable||(e.expand_iframe.enable=!1),e.style_sheet||(e.style_sheet=new Object),e.style_sheet.enable||(e.style_sheet.enable=!1),e.experimental||(e.experimental=new Object),e.experimental.enable||(e.experimental.enable=!1)})),(w=n(e.urlmap,"default",null)).preset={name:{standard:"Default",locales:{ja:"デフォルト（すべて）",en:"Default"}},enable:!0,filter:["*://*"],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!1,id:""},replacement_to_referer:{enable:!1,id:""},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"simple"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup"},expand_sound:{enable:!1,id:""},expand_video:{enable:!1,id:""},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"twitter","default")).preset={name:{standard:"twitter.com",locales:{ja:"ツイッター",en:"twitter.com"}},enable:!0,filter:["*://twitter.com/*"],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!0,id:"no_referrer"},replacement_to_referer:{enable:!0,id:"replacement_link"},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"thumbnail"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"bbs","twitter")).preset={name:{standard:"2ch.net",locales:{ja:"スレッド掲示板",en:"2ch.net"}},enable:!0,filter:["*://2ch.net/*","*://*.2ch.net/*","*://*.machi.to/*","*://machibbs.net/*","*://*.machibbs.net/*","*://*.bbspink.com/*","*://jbbs.livedoor.jp/*","*://logsoku.com/*","*://mimizun.com/log/*/*","*://*.kakiko.com/*","*://*.60.kg/*","*://*.atchs.jp/*"],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!0,id:"direct_link_bbs"},replacement_to_referer:{enable:!0,id:"replacement_link"},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"thumbnail"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"image_bbs","bbs")).preset={name:{standard:"www.4chan.org",locales:{ja:"画像掲示板",en:"www.4chan.org"}},enable:!0,filter:["*://*.4chan.org/*","*://*.2chan.net/*"],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!0,id:"no_referrer"},replacement_to_referer:{enable:!0,id:"replacement_link"},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"search","image_bbs")).preset={name:{standard:"Search",locales:{ja:"検索サイト",en:"Search"}},enable:!0,filter:["*://www.google.com/#*q=*","*://www.google.com/search?*","*://www.google.co.jp/#*q=*","*://www.google.co.jp/search?*","*://search.yahoo.com/search*","*://search.yahoo.co.jp/*","*://www.bing.com/search?*q=*","*://topsy.com/s*"],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!0,id:"direct_link_search"},replacement_to_referer:{enable:!1,id:""},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"simple"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"image_search","search")).preset={name:{standard:"Image Search",locales:{ja:"画像検索サイト",en:"Image Search"}},enable:!0,filter:[],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!0,id:"direct_link_image_search"},replacement_to_referer:{enable:!0,id:"replacement_link"},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"simple"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup"},expand_sound:{enable:!1,id:""},expand_video:{enable:!1,id:""},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"realtime_search","image_search")).preset={name:{standard:"Real Time Search",locales:{ja:"リアルタイム検索サイト",en:"Real Time Search"}},enable:!0,filter:["*://realtime.search.yahoo.co.jp/*","*://topsy.com/s/*/tweet?*","*://topsy.com/s?*type=tweet*","*://www.bing.com/social/search*","*://*search.naver.jp/realtime?*"],access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:""},replacement_to_text:{enable:!1,id:""},replacement_to_link:{enable:!0,id:"direct_link_realtime_search"},replacement_to_referer:{enable:!1,id:""},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"simple"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"thumbnail"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},c("access_block"),l(e.access_block,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.filter||(e.filter=[])})),c("replacement_to_element"),l(e.replacement_to_element,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.replacement_to_element,"meiryo_font",null)).preset={name:{standard:"Meiryo Font",locales:{ja:"フォントの種類をメイリオに変更",en:"Meiryo Font"}},script:""},c("replacement_to_text"),l(e.replacement_to_text,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.replacement_to_text,"alphanumeric_half",null)).preset={name:{standard:"String Convert From AlphanumericHalf To AlphanumericFull",locales:{ja:"英数字記号を半角、カタカナを全角に変更",en:"String Convert From AlphanumericHalf To AlphanumericFull"}},script:""},c("replacement_to_link"),l(e.replacement_to_link,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.replacement_to_link,"no_referrer",null)).preset={name:{standard:"No Referer",locales:{ja:"ノーリファラ属性を追加",en:"No Referer"}},script:""},(w=n(e.replacement_to_link,"attach_sns_counter","no_referrer")).preset={name:{standard:"Attach SNS Counter",locales:{ja:"ソーシャルサービスのカウント数を表示",en:"Attach SNS Counter"}},script:""},(w=n(e.replacement_to_link,"direct_link_bbs","attach_sns_counter")).preset={name:{standard:"Direct Link (bbs)",locales:{ja:"直リンクに変更（スレッド掲示板用）",en:"Direct Link (bbs)"}},script:""},(w=n(e.replacement_to_link,"direct_link_search","direct_link_bbs")).preset={name:{standard:"Direct Link (search)",locales:{ja:"直リンクに変更（検索用）",en:"Direct Link (search)"}},script:""},(w=n(e.replacement_to_link,"direct_link_image_search","direct_link_search")).preset={name:{standard:"Direct Link (image search)",locales:{ja:"直リンクに変更（イメージ検索用）",en:"Direct Link (image search)"}},script:""},(w=n(e.replacement_to_link,"direct_link_realtime_search","direct_link_image_search")).preset={name:{standard:"Direct Link (realtime search)",locales:{ja:"直リンクに変更（リアルタイム検索用）",en:"Direct Link (realtime search)"}},script:""},c("replacement_to_referer"),l(e.replacement_to_referer,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.replacement_to_referer,"replacement_empty",null)).preset={name:{standard:"Replace Empty",locales:{ja:"空文字列に変更",en:"Replace Empty"}},script:""},(w=n(e.replacement_to_referer,"replacement_link","replacement_empty")).preset={name:{standard:"Replace Link",locales:{ja:"リンク先のURLに変更",en:"Replace Link"}},script:""},c("replacement_to_useragent"),l(e.replacement_to_useragent,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.replacement_to_useragent,"iphone_4",null)).preset={name:{standard:"iPhone4",locales:{ja:"iPhone4",en:"iPhone4"}},script:""},(w=n(e.replacement_to_useragent,"android_2_1","iphone_4")).preset={name:{standard:"Android 2.1",locales:{ja:"Android 2.1",en:"Android 2.1"}},script:""},(w=n(e.replacement_to_useragent,"docomo_2_0","android_2_1")).preset={name:{standard:"DoCoMo / 2.0",locales:{ja:"DoCoMo / 2.0",en:"DoCoMo / 2.0"}},script:""},c("make_link_to_text"),l(e.make_link_to_text,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.make_link_to_text,"simple",null)).preset={name:{standard:"Simple",locales:{ja:"簡易",en:"Simple"}},script:""},(w=n(e.make_link_to_text,"detail","simple")).preset={name:{standard:"Detail",locales:{ja:"詳細",en:"Detail"}},script:""},c("expand_short_url"),l(e.expand_short_url,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.filter||(e.filter=[])})),(w=n(e.expand_short_url,"simple",null)).preset={name:{standard:"Simple",locales:{ja:"簡易",en:"Simple"}},filter:["http://bit.ly/*","http://j.mp/*","http://goo.gl/*","http://c23.biz/*","http://p.tl/*","http://tinyurl.com/*","http://ow.ly/*","http://t.co/*","http://fb.me/*","http://amzn.to/*","http://youtu.be/*","http://g.co/*","http://r10.to/*","http://s.nikkei.com/*","http://t.asahi.com/*"]},(w=n(e.expand_short_url,"detail","simple")).preset={name:{standard:"Detail",locales:{ja:"詳細",en:"Detail"}},filter:["http://tinyurl.com/*","http://ow.ly/*","http://dlvr.it/*","http://s.nikkei.com/*","http://t.asahi.com/*","http://is.gd/*","http://t.co/*","http://fb.me/*","http://amzn.to/*","http://youtu.be/*","http://tumblr.com/*","http://a.r10.to/*","http://ht.ly/*","http://lnk.ms/*","http://ustre.am/**","http://r10.to/*","http://tou.ch/*","http://po.st/*","http://htn.to/*","http://moi.st/*","http://fc2.in/*","http://a8.net/*","http://p.tl/*","http://itun.es/*","http://flic.kr/*","http://moby.to/*","http://instapaper.com/*","http://icio.us/*","http://dai.ly/*","http://pbckt.com/*","http://nhk.jp/*","http://post.ly/*","http://bit.ly/*","http://goo.gl/*","http://r.sm3.jp/*","http://cot.ag/*","http://mpr.hn/*","http://rss.rssad.jp/*","http://to.ly/*","http://g.co/*","http://fon.gs/*","http://tuna.be/*","http://mysp.ac/*","http://j.mp/*","http://snurl.com/*","http://v.gd/*","http://ux.nu/*","http://qurl.com/*","http://tr.im/*","http://gigaz.in/*","http://3.ly/*","http://artbeat.ly/*","http://sgp.cm/*","http://30m.in/*","http://bt.io/*","http://pic.gd/*","http://twt.mx/*","http://url4.eu/*","http://idek.net/*","http://c23.biz/*"]},c("expand_text"),l(e.expand_text,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.inline||(e.inline=new Object),e.inline.disable_same_text||(e.inline.disable_same_text=!1),e.inline.script_allow||(e.inline.script_allow=""),e.inline.script_insert||(e.inline.script_insert="")})),(w=n(e.expand_text,"inline",null)).preset={name:{standard:"Inline",locales:{ja:"インライン表示",en:"Inline"}},inline:{disable_same_text:!0,script_allow:"",script_insert:""}},c("expand_image"),l(e.expand_image,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.thumbnail||(e.thumbnail=new Object),e.thumbnail.enable_popup_mouseover||(e.thumbnail.enable_popup_mouseover=!1),e.thumbnail.disable_same_image||(e.thumbnail.disable_same_image=!1),e.thumbnail.script_allow||(e.thumbnail.script_allow=""),e.thumbnail.script_insert||(e.thumbnail.script_insert=""),e.popup||(e.popup=new Object),e.popup.origin_type||(e.popup.origin_type="center"),e.popup.position_type||(e.popup.position_type="absolute"),e.popup.time_wait_open||(e.popup.time_wait_open=0),e.popup.time_wait_close||(e.popup.time_wait_close=0),e.popup.enable_animation||(e.popup.enable_animation=!1),e.popup.script_allow||(e.popup.script_allow=""),e.reduced_image||(e.reduced_image=new Object),e.reduced_image.enable_popup||(e.reduced_image.enable_popup=!1),e.reduced_image.popup_allow_slcale_less_then||(e.reduced_image.popup_allow_slcale_less_then=0)})),(w=n(e.expand_image,"thumbnail",null)).preset={name:{standard:"Thumbnail",locales:{ja:"サムネイル表示",en:"Thumbnail"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation:!0,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70}},(w=n(e.expand_image,"popup","thumbnail")).preset={name:{standard:"Popup",locales:{ja:"ポップアップ表示",en:"Popup"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation:!0,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70}},c("expand_sound"),l(e.expand_sound,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.inline||(e.inline=new Object),e.inline.disable_same_audio||(e.inline.disable_same_audio=!1),e.inline.script_allow||(e.inline.script_allow=""),e.inline.script_insert||(e.inline.script_insert="")})),(w=n(e.expand_sound,"inline",null)).preset={name:{standard:"Inline",locales:{ja:"インライン表示",en:"Inline"}},inline:{disable_same_audio:!0,script_allow:"",script_insert:""}},c("expand_video"),l(e.expand_video,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.inline||(e.inline=new Object),e.inline.disable_same_video||(e.inline.disable_same_video=!1),e.inline.script_allow||(e.inline.script_allow=""),e.inline.script_insert||(e.inline.script_insert=""),e.video_element||(e.video_element=new Object),e.video_element.script_allow||(e.video_element.script_allow=""),e.youtube||(e.youtube=new Object),e.youtube.visible_video||(e.youtube.visible_video=!1),e.nicovideo||(e.nicovideo=new Object),e.nicovideo.visible_video||(e.nicovideo.visible_video=!1),e.nicovideo.visible_thumbnail_video||(e.nicovideo.visible_thumbnail_video=!1),e.nicovideo.visible_thumbnail_mylist||(e.nicovideo.visible_thumbnail_mylist=!1),e.nicovideo.visible_thumbnail_user||(e.nicovideo.visible_thumbnail_user=!1),e.nicovideo.visible_thumbnail_community||(e.nicovideo.visible_thumbnail_community=!1),e.nicovideo.visible_thumbnail_live||(e.nicovideo.visible_thumbnail_live=!1),e.ustream||(e.ustream=new Object),e.ustream.visible_video||(e.ustream.visible_video=!1),e.dailymotion||(e.dailymotion=new Object),e.dailymotion.visible_video||(e.dailymotion.visible_video=!1),e.vimeo||(e.vimeo=new Object),e.vimeo.visible_video||(e.vimeo.visible_video=!1),e.fc2video||(e.fc2video=new Object),e.fc2video.visible_video||(e.fc2video.visible_video=!1)})),(w=n(e.expand_video,"inline",null)).preset={name:{standard:"Inline",locales:{ja:"インライン表示",en:"Inline"}},inline:{disable_same_video:!0,video_max:10,script_allow:"",script_insert:""},video_element:{script_allow:""},youtube:{visible_video:!0},nicovideo:{visible_video:!0,visible_thumbnail_video:!0,visible_thumbnail_mylist:!0,visible_thumbnail_user:!0,visible_thumbnail_community:!0,visible_thumbnail_live:!0},ustream:{visible_video_live:!0,visible_video_record:!0},dailymotion:{visible_video:!0},vimeo:{visible_video:!0},fc2video:{visible_video:!0}},c("expand_iframe"),l(e.expand_iframe,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.inline||(e.inline=new Object),e.inline.disable_same_iframe||(e.inline.disable_same_iframe=!1),e.inline.script_allow||(e.inline.script_allow=""),e.inline.script_insert||(e.inline.script_insert="")})),(w=n(e.expand_iframe,"expand_flash_inline",null)).preset={name:{standard:"Expand Flash Inline",locales:{ja:"Flash のインライン表示",en:"Expand Flash Inline"}},inline:{disable_same_iframe:!0,script_allow:"",script_insert:""}},(w=n(e.expand_iframe,"expand_pdf_inline","expand_flash_inline")).preset={name:{standard:"Expand PDF Inline",locales:{ja:"PDF のインライン表示",en:"Expand PDF Inline"}},inline:{disable_same_iframe:!0,script_allow:"",script_insert:""}},c("style_sheet"),l(e.style_sheet,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.expand_text||(e.expand_text=new Object),e.expand_text.inline||(e.expand_text.inline=""),e.expand_image||(e.expand_image=new Object),e.expand_image.thumbnail||(e.expand_image.thumbnail=""),e.expand_image.popup||(e.expand_image.popup=""),e.expand_sound||(e.expand_sound=new Object),e.expand_sound.inline||(e.expand_sound.inline=""),e.expand_video||(e.expand_video=new Object),e.expand_video.inline||(e.expand_video.inline=new Object);var t=e.expand_video.inline;t.video_element||(t.video_element=new Object),t.video_element.video||(t.video_element.video=""),t.youtube||(t.youtube=new Object),t.youtube.video||(t.youtube.video=""),t.nicovideo||(t.nicovideo=new Object),t.nicovideo.video||(t.nicovideo.video=""),t.nicovideo.thumbnail_video||(t.nicovideo.thumbnail_video=""),t.nicovideo.thumbnail_mylist||(t.nicovideo.thumbnail_mylist=""),t.nicovideo.thumbnail_user||(t.nicovideo.thumbnail_user=""),t.nicovideo.thumbnail_community||(t.nicovideo.thumbnail_community=""),t.nicovideo.thumbnail_live||(t.nicovideo.thumbnail_live=""),t.ustream||(t.ustream=new Object),t.ustream.video_live||(t.ustream.video_live=""),t.ustream.video_record||(t.ustream.video_record=""),t.dailymotion||(t.dailymotion=new Object),t.dailymotion.video||(t.dailymotion.video=""),t.vimeo||(t.vimeo=new Object),t.vimeo.video||(t.vimeo.video=""),t.fc2video||(t.fc2video=new Object),t.fc2video.video||(t.fc2video.video=""),e.expand_iframe||(e.expand_iframe=new Object),e.expand_iframe.inline||(e.expand_iframe.inline="")})),(w=n(e.style_sheet,"simple",null)).preset={name:{standard:"Simple",locales:{ja:"シンプル",en:"Simple"}},expand_text:{inline:"margin:2px 0px 2px 0px;"},expand_image:{thumbnail:"margin:2px 0px 2px 0px; background-color:#FFF; border:1px #000 solid;",popup:"background-color:#FFF; border:1px #000 solid;"},expand_sound:{inline:"margin:2px 0px 2px 0px;"},expand_video:{inline:{video_element:{video:"margin:2px 0px 2px 0px; width:720px; height:405px;"},youtube:{video:"margin:2px 0px 2px 0px; width:720px; height:405px; border:0px;"},nicovideo:{video:"margin:2px 0px 2px 0px; width:674px; height:386px; border:0px;",thumbnail_video:"margin:2px 0px 2px 0px; width:400px; height:180px; border:0px;",thumbnail_mylist:"margin:2px 0px 2px 0px; width:400px; height:180px; border:0px;",thumbnail_user:"margin:2px 0px 2px 0px; width:340px; height:160px; border:0px;",thumbnail_community:"margin:2px 0px 2px 0px; width:340px; height:180px; border:0px;",thumbnail_live:"margin:2px 0px 2px 0px; width:340px; height:180px; border:0px;"},ustream:{video_live:"margin:2px 0px 2px 0px; width:720px; height:405px; border:0px;",video_record:"margin:2px 0px 2px 0px; width:720px; height:405px; border:0px;"},dailymotion:{video:"margin:2px 0px 2px 0px; width:720px; height:405px; border:0px;"},vimeo:{video:"margin:2px 0px 2px 0px; width:720px; height:405px; border:0px;"},fc2video:{video:"margin:2px 0px 2px 0px; width:720px; height:405px; border:0px;"}}},expand_iframe:{inline:"margin:2px 0px 2px 0px; background-color:#FFF; border:1px #000 solid;"}},(w=n(e.style_sheet,"default","simple")).preset={name:{standard:"Default",locales:{ja:"デフォルト",en:"Default"}},expand_text:{inline:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:4px; background-color:#FFF; display:block;"},expand_image:{thumbnail:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF;",popup:"margin:0px; border:1px #000 solid; padding:1px; background-color:#FFF;"},expand_sound:{inline:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF;"},expand_video:{inline:{video_element:{video:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;"},youtube:{video:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;"},nicovideo:{video:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:674px; height:386px;",thumbnail_video:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:400px; height:180px;",thumbnail_mylist:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:400px; height:180px;",thumbnail_user:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:340px; height:160px;",thumbnail_community:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:340px; height:180px;",thumbnail_live:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:340px; height:180px;"},ustream:{video_live:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;",video_record:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;"},dailymotion:{video:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;"},vimeo:{video:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;"},fc2video:{video:"margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:720px; height:405px;"}}},expand_iframe:{inline:"margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF;"}},c("experimental"),l(e.experimental,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object)})),e.language={type:-1});if(_())return e;e.version<2&&(e.version=2,(w=n(e.expand_bbs,"nicovideo_dictionary","4chan")).preset={name:{standard:"dic.nicovideo.jp",locales:{ja:"ニコニコ大百科",en:"dic.nicovideo.jp"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}});if(_())return e;e.version<3&&(e.version=3,l(e.urlmap,"*",(function(e){e.enable_unsecure||(e.enable_unsecure=!1)})),(w=n(e.urlmap,"bbs","bbs")).preset.filter.push("*://unkar.org/r/*/*"),(w=n(e.expand_bbs,"unkar","mimizun")).preset={name:{standard:"unkar.org",locales:{ja:"うんかー",en:"unkar.org"}},enable:!0,script_allow:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}});if(_())return e;e.version<4&&(e.version=4,e.standard.enable_output_log=!1,l(e.expand_bbs,"*",(function(e){e.filter||(e.filter=new Array),e.script_initialize||(e.script_initialize="")})),o(e.expand_bbs,"*",(function(e){void 0!==e.script_allow&&delete e.script_allow})),l(e.expand_bbs,"2ch",(function(e){e.filter=[{pattern:"http://.*\\.2ch\\.net/test/read\\.cgi/.*/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://.*\\.machi\\.to/bbs/read\\.cgi/.*/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://machibbs\\.net/.*/[0-9]+.html",flags:{i:!0,g:!1}},{pattern:"http://.*\\.machibbs\\.net/.*/[0-9]+.html",flags:{i:!0,g:!1}},{pattern:"http://.*\\.bbspink\\.com/test/read\\.cgi/.*/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://jbbs\\.livedoor\\.jp/bbs/read.cgi/.*/[0-9]+/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://.*\\.kakiko\\.com/test/read\\.cgi/.*/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://.*\\.60\\.kg/test/read\\.cgi/.*/[0-9]+",flags:{i:!0,g:!1}}],e.script_initialize="",e.script_callback=""})),l(e.expand_bbs,"logsoku",(function(e){e.filter=[{pattern:"http://logsoku\\.com/thread/.*\\.2ch\\.net/.*/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://.*\\.atchs\\.jp/test/read\\.cgi/.*/[0-9]+",flags:{i:!0,g:!1}}],e.script_initialize="",e.script_callback=""})),l(e.expand_bbs,"mimizun",(function(e){e.filter=[{pattern:"http://mimizun\\.com/log/2ch/.*/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://mimizun\\.com/log/machi/.*/[0-9]+",flags:{i:!0,g:!1}}],e.script_initialize="",e.script_callback=""})),l(e.expand_bbs,"unkar",(function(e){e.filter=[{pattern:"http://unkar\\.org/r/.*/[0-9]+",flags:{i:!0,g:!1}}],e.script_initialize="",e.script_callback=""})),l(e.expand_bbs,"2chan",(function(e){e.filter=[{pattern:"http://.*?\\.2chan\\.net/.*/",flags:{i:!0,g:!1}}]})),l(e.expand_bbs,"4chan",(function(e){e.filter=[{pattern:"http://boards\\.4chan\\.org/.*/",flags:{i:!0,g:!1}}],e.script_callback=""})),l(e.expand_bbs,"nicovideo_dictionary",(function(e){e.filter=[{pattern:"http://dic\\.nicovideo\\.jp/b/a/.+",flags:{i:!0,g:!1}},{pattern:"http://dic\\.nicovideo\\.jp/a/.+",flags:{i:!0,g:!1}}],e.script_initialize="",e.script_callback=""})),l(e.urlmap,"*",(function(e){e.replacement_to_anchor=e.replacement_to_link,delete e.replacement_to_link})),e.replacement_to_anchor=e.replacement_to_link,delete e.replacement_to_link,(w=n(e.access_block,"opera_extension",null)).preset={name:{standard:"For Opera Extension",locales:{ja:"Opera 拡張機能用",en:"For Opera Extension"}},filter:[]},(w=n(e.replacement_to_element,"delete_br_tags","meiryo_font")).preset={name:{standard:"Delete BR Tags Continuous",locales:{ja:"連続するBRタグを削除",en:"Delete BR Tags Continuous"}},script:""},(w=n(e.replacement_to_anchor,"disable_popup_image_search","direct_link_realtime_search")).preset={name:{standard:"Disable Popup (image search)",locales:{ja:"ポップアップを無効化（イメージ検索用）",en:"Disable Popup (image search)"}},script:""},i("replacement_to_anchor","direct_link_image_search"),(w=n(e.replacement_to_anchor,"direct_link_twitter","direct_link_realtime_search")).preset={name:{standard:"Direct Link (twitter.com)",locales:{ja:"直リンクに変更（ツイッター用）",en:"Direct Link (twitter.com)"}},script:""},c("replacement_to_link"),(w=n(e.replacement_to_link,"direct_link_image_search",null)).preset={name:{standard:"Direct Link (image search)",locales:{ja:"直リンク（イメージ検索用）",en:"Direct Link (image search)"}},filter:[{name:{standard:"Google",locales:{ja:"Google 画像検索",en:"Google"}},filter:["*://*.google.*/imgres?*","*://*.google.co.*/imgres?*","*://*.google.com.*/imgres?*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Yahoo Image Search",locales:{ja:"Yahoo Image Search",en:"Yahoo Image Search"}},filter:["*://images.search.yahoo.com/images/view;*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Yahoo! JAPAN",locales:{ja:"Yahoo! JAPAN 画像検索",en:"Yahoo! JAPAN"}},filter:["*://ord.yahoo.co.jp/o/image/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Bing",locales:{ja:"Bing 画像検索",en:"Bing"}},filter:["*://www.bing.com/images/search?*"],enable_reflect_to_anchor:!1,script:""}]},(w=n(e.replacement_to_link,"direct_link_generic","direct_link_image_search")).preset={name:{standard:"Direct Link (generic)",locales:{ja:"直リンク（汎用）",en:"Direct Link (generic)"}},filter:[{name:{standard:'OGP "og:image"',locales:{ja:'OGP "og:image"',en:'OGP "og:image"'}},filter:["*://instagr.am/p/*","*://www.flickr.com/photos/*/*","*://lockerz.com/s/*","*://pics.lockerz.com/s/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Twitpic",locales:{ja:"Twitpic",en:"Twitpic"}},filter:["*://twitpic.com/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Twitter Photo",locales:{ja:"Twitter Photo",en:"Twitter Photo"}},filter:["*://pic.twitter.com/*","*://twitter.com/*/status/*/photo/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Facebook Photo",locales:{ja:"Facebook Photo",en:"Facebook Photo"}},filter:["*://www.facebook.com/photo.php?*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Tumblr",locales:{ja:"Tumblr",en:"Tumblr"}},filter:["*://*.tumblr.com/post/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Photozou Photo",locales:{ja:"フォト蔵",en:"Photozou Photo"}},filter:["*://photozou.jp/photo/show/*/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"Twipple Photo",locales:{ja:"ついっぷる",en:"Twipple Photo"}},filter:["*://p.twipple.jp/*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"NICONICO SEIGA (must log in)",locales:{ja:"ニコニコ静画 (ログインが必要)",en:"NICONICO SEIGA (must log in)"}},filter:["*://seiga.nicovideo.jp/seiga/im*","*://nico.ms/im*"],enable_reflect_to_anchor:!1,script:""},{name:{standard:"pixiv (must referer)",locales:{ja:"ピクシブ (リファラが必要)",en:"pixiv (must referer)"}},filter:["*://www.pixiv.net/member_illust.php?*illust_id*"],enable_reflect_to_anchor:!1,script:""}]},l(e.replacement_to_referer,"*",(function(e){e.filter||(e.filter=new Array)})),o(e.replacement_to_referer,"*",(function(e){void 0!==e.script&&delete e.script})),l(e.replacement_to_referer,"replacement_empty",(function(e){e.filter=[{name:{standard:"Empty",locales:{ja:"空文字列",en:"Empty"}},filter:["*://*"],send_referer:{type:"custom",custom:"",regexp:{pattern:"",flags:{i:!1,g:!1}},replacement:""}}]})),(w=n(e.replacement_to_referer,"replacement_link_url","replacement_link")).preset={name:{standard:"Replace Link URL",locales:{ja:"リンク先のURLに変更",en:"Replace Link URL"}},filter:[{name:{standard:"Link URL",locales:{ja:"リンク先のURL",en:"Link URL"}},filter:["*://*"],send_referer:{type:"link_url",custom:"",regexp:{pattern:"",flags:{i:!1,g:!1}},replacement:""}}]},(w=n(e.replacement_to_referer,"replacement_link_directory","replacement_link")).preset={name:{standard:"Replace Link Directory",locales:{ja:"リンク先のカレントディレクトリに変更",en:"Replace Link Directory"}},filter:[{name:{standard:"Link Directory",locales:{ja:"リンク先のディレクトリ",en:"Link Directory"}},filter:["*://*"],send_referer:{type:"link_url",custom:"",regexp:{pattern:"^(http|https|ftp)(:\\/\\/.*\\/).*",flags:{i:!0,g:!1}},replacement:"\\1\\2"}}]},(w=n(e.replacement_to_referer,"replacement_link_domain","replacement_link_directory")).preset={name:{standard:"Replace Link Domain",locales:{ja:"リンク先のドメインに変更",en:"Replace Link Domain"}},filter:[{name:{standard:"Link Domain",locales:{ja:"リンク先のドメイン",en:"Link Domain"}},filter:["*://*"],send_referer:{type:"link_url",custom:"",regexp:{pattern:"^(http|https|ftp)(:\\/\\/.*?\\/).*",flags:{i:!0,g:!1}},replacement:"\\1\\2"}}]},i("replacement_to_referer","replacement_link"),l(e.replacement_to_useragent,"*",(function(e){e.filter||(e.filter=new Array)})),o(e.replacement_to_useragent,"*",(function(e){void 0!==e.script&&delete e.script})),l(e.replacement_to_useragent,"iphone_4",(function(e){e.filter=[{name:{standard:"iPhone4",locales:{ja:"iPhone4",en:"iPhone4"}},filter:["*://*"],send_useragent:{custom:"Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7"}}]})),l(e.replacement_to_useragent,"android_2_1",(function(e){e.filter=[{name:{standard:"Android 2.1",locales:{ja:"Android 2.1",en:"Android 2.1"}},filter:["*://*"],send_useragent:{custom:"Mozilla/5.0 (Linux; U; Android 2.1-update1; ja-jp; XXX Build/RA201) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17"}}]})),l(e.replacement_to_useragent,"docomo_2_0",(function(e){e.filter=[{name:{standard:"DoCoMo / 2.0",locales:{ja:"DoCoMo / 2.0",en:"DoCoMo / 2.0"}},filter:["*://*"],send_useragent:{custom:"DoCoMo/2.0 XXX(c100;TB)"}}]})),(w=a(e.expand_short_url,"detail")).filter.splice(7,0,"http://pic.twitter.com/*","http://tmblr.co/*"),(w=n(e.expand_text,"inline",null)).preset.inline.script_allow="",(w=n(e.expand_image,"thumbnail",null)).preset.thumbnail.script_allow="",(w=n(e.expand_image,"popup",null)).preset.popup.script_allow="",(w=n(e.expand_sound,"inline",null)).preset.inline.script_allow="",l(e.expand_video,"*",(function(e){e.nicovideo.visible_thumbnail_seiga||(e.nicovideo.visible_thumbnail_seiga=!0),e.liveleak||(e.liveleak=new Object),e.liveleak.visible_video||(e.liveleak.visible_video=!0)})),(w=n(e.expand_video,"inline",null)).preset.video_element.script_allow="",(w=n(e.expand_iframe,"expand_flash_inline",null)).preset.inline.script_allow="",(w=n(e.expand_iframe,"expand_pdf_inline",null)).preset.inline.script_allow="",l(e.style_sheet,"*",(function(e){var t=e.expand_video.inline;t.nicovideo.thumbnail_seiga||(t.nicovideo.thumbnail_seiga=""),t.liveleak||(t.liveleak=new Object),t.liveleak.video||(t.liveleak.video="")})),l(e.style_sheet,"default",(function(e){e.expand_video.inline.nicovideo.thumbnail_seiga="margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:312px; height:176px;",e.expand_video.inline.liveleak.video="margin:2px 0px 2px 0px; border:1px #000 solid; background-color:#000; width:640px; height:360px;"})),l(e.style_sheet,"simple",(function(e){e.expand_video.inline.nicovideo.thumbnail_seiga="margin:2px 0px 2px 0px; width:312px; height:176px; border:0px;",e.expand_video.inline.liveleak.video="margin:2px 0px 2px 0px; width:640px; height:360px; border:0px;"})),l(e.urlmap,"*",(function(e){e.replacement_to_link||(e.replacement_to_link=new Object);var t=e.replacement_to_link;t.enable||(t.enable=!1),t.id||(t.id="")})),(E=a(e.urlmap,"twitter")).replacement_to_anchor={enable:!0,id:"direct_link_twitter"},E.replacement_to_link={enable:!0,id:"direct_link_generic"},E.replacement_to_referer={enable:!0,id:"replacement_link_url"},(E=a(e.urlmap,"bbs")).replacement_to_link={enable:!0,id:"direct_link_generic"},E.replacement_to_referer={enable:!0,id:"replacement_link_url"},(E=a(e.urlmap,"image_bbs")).replacement_to_link={enable:!0,id:"direct_link_generic"},E.replacement_to_referer={enable:!0,id:"replacement_link_url"},(w=n(e.urlmap,"image_search",null)).preset.replacement_to_referer={enable:!0,id:"replacement_link_url"},w.preset.replacement_to_anchor={enable:!0,id:"disable_popup_image_search"},w.preset.replacement_to_link={enable:!0,id:"direct_link_image_search"},w.preset.filter=["*://*.google.at/search?*tbm=isch*","*://*.google.be/search?*tbm=isch*","*://*.google.ca/search?*tbm=isch*","*://*.google.ch/search?*tbm=isch*","*://*.google.de/search?*tbm=isch*","*://*.google.es/search?*tbm=isch*","*://*.google.fr/search?*tbm=isch*","*://*.google.it/search?*tbm=isch*","*://*.google.nl/search?*tbm=isch*","*://*.google.no/search?*tbm=isch*","*://*.google.pl/search?*tbm=isch*","*://*.google.ru/search?*tbm=isch*","*://*.google.se/search?*tbm=isch*","*://*.google.co.id/search?*tbm=isch*","*://*.google.co.in/search?*tbm=isch*","*://*.google.co.jp/search?*tbm=isch*","*://*.google.co.th/search?*tbm=isch*","*://*.google.co.uk/search?*tbm=isch*","*://*.google.co.za/search?*tbm=isch*","*://*.google.com/search?*tbm=isch*","*://*.google.com.ar/search?*tbm=isch*","*://*.google.com.au/search?*tbm=isch*","*://*.google.com.br/search?*tbm=isch*","*://*.google.com.mx/search?*tbm=isch*","*://*.google.com.sa/search?*tbm=isch*","*://*.google.com.tr/search?*tbm=isch*","*://*.google.com.tw/search?*tbm=isch*","*://www.google.at/images?*","*://www.google.be/images?*","*://www.google.ca/images?*","*://www.google.ch/images?*","*://www.google.de/images?*","*://www.google.es/images?*","*://www.google.fr/images?*","*://www.google.it/images?*","*://www.google.nl/images?*","*://www.google.no/images?*","*://www.google.pl/images?*","*://www.google.ru/images?*","*://www.google.se/images?*","*://www.google.co.id/images?*","*://www.google.co.in/images?*","*://www.google.co.jp/images?*","*://www.google.co.th/images?*","*://www.google.co.uk/images?*","*://www.google.co.za/images?*","*://www.google.com/images?*","*://www.google.com.ar/images?*","*://www.google.com.au/images?*","*://www.google.com.br/images?*","*://www.google.com.mx/images?*","*://www.google.com.sa/images?*","*://www.google.com.tr/images?*","*://www.google.com.tw/images?*","*://images.search.yahoo.com/search/images*","*://image.search.yahoo.co.jp/search?*","*://www.bing.com/images/search?*"]);if(_())return e;e.version<5&&(e.version=5,(w=n(e.replacement_to_text,"visualize_space_and_tab",null)).preset={name:{standard:"Visualize spaces and tabs",locales:{ja:"空白とタブを可視化",en:"Visualize spaces and tabs"}},script:""},o(e.replacement_to_link,"direct_link_generic",(function(e){e.filter[0].filter.splice(0,0,"*://instagram.com/p/*"),e.filter.splice(1,0,{name:{standard:'OGP "twitter:*"',locales:{ja:'OGP "twitter:*"',en:'OGP "twitter:*"'}},filter:[],enable_reflect_to_anchor:!1,script:""})})),o(e.replacement_to_link,"direct_link_image_search",(function(e){e.filter[1].filter.push("*://*.images.search.yahoo.com/images/view;*"),e.filter[1].filter.push("*://*.image.search.yahoo.com/images/view;*"),e.filter.splice(3,0,{name:{standard:"yahoo.cn",locales:{ja:"yahoo.cn",en:"yahoo.cn"}},filter:["http://image.yahoo.cn/view?*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"Ask.com",locales:{ja:"Ask 画像検索",en:"Ask.com"}},filter:["*://*.ask.com/fr?*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"AOL Image Search",locales:{ja:"AOL 画像検索",en:"AOL Image Search"}},filter:["*://search.aol.*/aol/imageDetails?*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"goo",locales:{ja:"goo 画像検索",en:"goo"}},filter:["*://*bsearch.goo.ne.jp/image_detail.php?*DOC_ID=*","*://*bsearch.goo.ne.jp/similarity.php?*DOC_ID=*","*://*bsearch.goo.ne.jp/imgdt.php?*DOC_ID=*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"Baidu",locales:{ja:"百度",en:"Baidu"}},filter:["http://image.baidu.com/i*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"Baidu.jp",locales:{ja:"Baidu.jp",en:"Baidu.jp"}},filter:["http://image.baidu.jp/*baiduimagedetail*di=*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"NAVER",locales:{ja:"NAVER 画像検索",en:"NAVER"}},filter:["http://imagesearch.naver.com/search*","http://image.search.naver.com/search*"],enable_reflect_to_anchor:!1,script:""}),e.filter.push({name:{standard:"naver.jp",locales:{ja:"naver.jp",en:"naver.jp"}},filter:["http://*search.naver.jp/image?*","http://image.search.biglobe.ne.jp/search?*"],enable_reflect_to_anchor:!1,script:""})})),(w=n(e.replacement_to_link,"direct_link_wikipedia",null)).preset={name:{standard:"Direct Link (wikipedia.org)",locales:{ja:"直リンク（ウィキペディア用）",en:"Direct Link (wikipedia.org)"}},filter:[{name:{standard:"File:",locales:{ja:"ファイル:",en:"File:"}},filter:["*://*.wikipedia.org/wiki/*:*","*://*.wikipedia.org/w/*:*","*://*.wikimedia.org/wiki/*:*","*://*.wikimedia.org/w/*:*"],enable_reflect_to_anchor:!1,script:""}]},l(e.expand_sound,"*",(function(e){e.audio_element||(e.audio_element=new Object),e.audio_element.script_allow="",e.soundcloud||(e.soundcloud=new Object),e.soundcloud.visible_player_flash=!0,e.soundcloud.visible_player_html5=!1,e.mixcloud||(e.mixcloud=new Object),e.mixcloud.visible_player=!0,e.inline.script_allow="",e.inline.script_insert="",e.inline.sound_max=10})),l(e.style_sheet,"*",(function(e){var t=new Object;t.audio_element||(t.audio_element=new Object),t.audio_element.audio=e.expand_sound.inline,t.soundcloud||(t.soundcloud=new Object),t.mixcloud||(t.mixcloud=new Object),e.expand_sound.inline=t})),l(e.style_sheet,"default",(function(e){e.expand_sound.inline.soundcloud.player_flash="margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:100%;",e.expand_sound.inline.soundcloud.player_html5="margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:100%;",e.expand_sound.inline.mixcloud.player="margin:2px 0px 2px 0px; border:1px #000 solid; padding:1px; background-color:#FFF; width:460px; height:68px;"})),l(e.style_sheet,"simple",(function(e){e.expand_sound.inline.soundcloud.player_flash="margin:2px 0px 2px 0px; width:100%; border:0px;",e.expand_sound.inline.soundcloud.player_html5="margin:2px 0px 2px 0px; width:100%; border:0px;",e.expand_sound.inline.mixcloud.player="margin:2px 0px 2px 0px; width:460px; border:0px; height:68px;"})),l(e.urlmap,"*",(function(e){e.replacement_to_element.enable?e.replacement_to_element.id=[e.replacement_to_element.id]:e.replacement_to_element.id=[],e.replacement_to_text.enable?e.replacement_to_text.id=[e.replacement_to_text.id]:e.replacement_to_text.id=[],e.replacement_to_anchor.enable?e.replacement_to_anchor.id=[e.replacement_to_anchor.id]:e.replacement_to_anchor.id=[]})),(E=a(e.urlmap,"realtime_search")).replacement_to_anchor.id.push("no_referrer"),E.filter.push("*://search.goo.ne.jp/web.jsp?*from=lside_twitter*"),E.filter.push("*://search.goo.ne.jp/web.jsp?*mode=1*"),E.replacement_to_link={enable:!0,id:"direct_link_generic"},E.expand_short_url={enable:!0,id:"detail"},(E=a(e.urlmap,"search")).replacement_to_anchor.id.push("no_referrer"),(E=a(e.urlmap,"twitter")).replacement_to_anchor.id.push("no_referrer"),(E=a(e.urlmap,"bbs")).replacement_to_anchor.id.push("no_referrer"),(E=a(e.urlmap,"image_search")).replacement_to_anchor.id.push("no_referrer"),E.filter.splice(55,0,"*://*.images.search.yahoo.com/search/images*"),E.filter.splice(56,0,"*://*.image.search.yahoo.com/search/images*"),E.filter.splice(58,0,"*://image.yahoo.cn/s?*"),E.filter.push("*://*.ask.com/pictures?*"),E.filter.push("*://search.aol.com/aol/image?*"),E.filter.push("*://search.aol.jp/aol/image?*"),E.filter.push("*://*bsearch.goo.ne.jp/image.php?*MT=*"),E.filter.push("*://*bsearch.goo.ne.jp/scrimg.php?*MT=*"),E.filter.push("*://*bsearch.goo.ne.jp/similarity.php?*MT=*"),E.filter.push("*://image.baidu.com/*"),E.filter.push("*://image.baidu.jp/*"),E.filter.push("*://image.search.naver.com/*"),E.filter.push("*://*search.naver.jp/image?*"),E.filter.push("*://image.search.biglobe.ne.jp/search?*"),(w=n(e.urlmap,"wikipedia","default")).preset={name:{standard:"Wikipedia",locales:{ja:"ウィキペディア",en:"Wikipedia"}},enable:!0,filter:["*://*.wikipedia.org/*"],enable_unsecure:!1,access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:[]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["no_referrer"]},replacement_to_link:{enable:!0,id:"direct_link_wikipedia"},replacement_to_referer:{enable:!1,id:""},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"simple"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}});if(_())return e;e.version<6&&(e.version=6,o(e.replacement_to_link,"direct_link_image_search",(function(e){e.filter.splice(7,0,{name:{standard:"Yandex Images",locales:{ja:"Yandex 画像検索",en:"Yandex Images"}},filter:["http://images.yandex.ru/yandsearch?*","http://images.yandex.com/yandsearch?*"],enable_reflect_to_anchor:!1,script:""})})),(E=a(e.urlmap,"image_search")).filter.splice(63,0,"*://images.yandex.ru/*"),E.filter.splice(64,0,"*://images.yandex.com/*"));if(_())return e;e.version<7&&(e.version=7,l(e.expand_bbs,"logsoku",(function(e){e.filter=[{pattern:"http://logsoku\\.com/thread/.*\\.2ch\\.net/.*?/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://.*?\\.logsoku\\.com/r/.*?/[0-9]+",flags:{i:!0,g:!1}},{pattern:"http://logsoku\\.com/r/.*?/[0-9]+",flags:{i:!0,g:!1}}],e.script_initialize="",e.script_callback=""})),(w=n(e.expand_bbs,"atchs","unkar")).preset={name:{standard:"atchs.jp",locales:{ja:"あっとちゃんねるず",en:"atchs.jp"}},enable:!0,filter:[],script_initialize:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},(w=n(e.access_block,"firefox_extension","opera_extension")).preset={name:{standard:"For Firefox Extension",locales:{ja:"Firefox 拡張機能用",en:"For Firefox Extension"}},filter:[]},l(e.replacement_to_referer,"*",(function(e){var t,n=e.filter,a=n.length;for(t=0;t<a;t++){var i=n[t].send_referer,o=i.replacement.replace(new RegExp("[$]","g"),"$$$$");i.replacement=o.replace(new RegExp("\\\\\\\\|\\\\[0-9]","g"),(function(e,t,n){return"\\\\"==e?"\\":"$"+e[1]}))}})),(w=n(e.replacement_to_referer,"firefox_extension",null)).preset={name:{standard:"For Firefox Extension",locales:{ja:"Firefox 拡張機能用",en:"For Firefox Extension"}},filter:[]},(w=n(e.replacement_to_useragent,"firefox_extension",null)).preset={name:{standard:"For Firefox Extension",locales:{ja:"Firefox 拡張機能用",en:"For Firefox Extension"}},filter:[]},o(e.replacement_to_link,"*",(function(e){var t,n=e.filter,a=n.length;for(t=0;t<a;t++)n[t].enable_cache=!0})),(w=a(e.expand_short_url,"simple")).filter[7]="*://t.co/*",(w=a(e.expand_short_url,"detail")).filter[6]="*://t.co/*",(w=n(e.urlmap,"bbs","bbs")).preset.filter.splice(8,0,"*://*.logsoku.com/*"));if(_())return e;if(e.version<8&&(e.version=8,o(e.replacement_to_link,"direct_link_image_search",(function(e){e.filter[12].enable_cache=!1})),l(e.expand_image,"*",(function(e){var t=!1;e.popup.enable_animation&&(t=!0),e.popup.enable_animation_scale=t,e.popup.enable_animation_alpha=t,delete e.popup.enable_animation,void 0===e.popup.load_type&&(e.popup.load_type="preload"),void 0===e.thumbnail.load_type&&(e.thumbnail.load_type="preload"),void 0===e.load&&(e.load=new Object),void 0===e.load.enable_notify&&(e.load.enable_notify=!0),void 0===e.load.enable_unload&&(e.load.enable_unload=!1),void 0===e.load.unload_allow_size_more_then&&(e.load.unload_allow_size_more_then=256)}))),_())return e;e.version<9&&(e.version=9,o(e.replacement_to_link,"direct_link_generic",(function(e){var t=e.filter;t[0].filter.push("*://twitter.yfrog.com/*"),t[0].filter.push("*://yfrog.com/*"),t[1].filter.push("*://campl.us/*"),t.splice(6,0,{name:{standard:"giphy.com",locales:{ja:"giphy.com",en:"giphy.com"}},filter:["*://giphy.com/gifs/*","*://giphy.com/embed/*"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(7,0,{name:{standard:"gyazo.com",locales:{ja:"Gyazo",en:"gyazo.com"}},filter:["*://gyazo.com/*"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""})})),(w=a(e.expand_short_url,"detail")).filter.push("http://gph.is/*"));if(_())return e;e.version<10&&(e.version=10,(E=(w=n(e.expand_bbs,"4chan",null)).preset).name={standard:"4chan.org (Image Boards)",locales:{ja:"4chan (Image Boards)",en:"4chan.org (Image Boards)"}},E.filter=[{pattern:"^(http|https)://boards\\.4chan\\.org/.*/",flags:{i:!0,g:!1}}],E.popup.style_sheet="padding:20px 10px; border:1px solid #000; overflow-y:auto; word-wrap:break-word; word-break:break-all; display:block;",(E=(w=n(e.expand_bbs,"nicovideo_dictionary",null)).preset).filter=[{pattern:"^http://dic\\.nicovideo\\.jp/b/(a|c|i|l|u|v)/.+",flags:{i:!0,g:!1}},{pattern:"^http://dic\\.nicovideo\\.jp/(a|c|i|l|u|v)/.+",flags:{i:!0,g:!1}}],(w=n(e.replacement_to_anchor,"display_url_in_tooltip","attach_sns_counter")).preset={name:{standard:"Display URL in the ToolTip",locales:{ja:"ツールチップにリンク先を表示",en:"Display URL in the ToolTip"}},script:""},o(e.replacement_to_link,"direct_link_generic",(function(e){var t=e.filter;t.splice(5,0,{name:{standard:"Google+ Photo",locales:{ja:"Google+ Photo",en:"Google+ Photo"}},filter:["*://plus.google.com/*photos/*/albums/*"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(6,0,{name:{standard:"Picasa Photo",locales:{ja:"Picasa Photo",en:"Picasa Photo"}},filter:["*://picasaweb.google.com/lh/photo/*","*://picasaweb.google.com/*/*?*#*","*://picasaweb.google.com/*/*#*"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(12,0,{name:{standard:"Twipple Photo (Direct Link)",locales:{ja:"ついっぷる (直リンク)",en:"Twipple Photo (Direct Link)"}},filter:["*://p.twpl.jp/show/*"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t[14].filter.push("*://touch.pixiv.net/member_illust.php?*illust_id*")})),(w=n(e.expand_image,"image_bbs",null)).preset={name:{standard:"For www.4chan.org",locales:{ja:"画像掲示板用",en:"For www.4chan.org"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,unload_allow_size_more_then:256}},o(e.urlmap,"image_bbs",(function(e){e.expand_image.id="image_bbs"})));if(_())return e;e.version<11&&(e.version=11,c("replacement_to_element"),l(e.replacement_to_element,"*",(function(e){e.name||(e.name=new Object),e.name.standard||(e.name.standard=""),e.name.locales||(e.name.locales=new Object),e.script||(e.script="")})),(w=n(e.replacement_to_element,"assist_image_search",null)).preset={name:{standard:"Assist Expand (image search)",locales:{ja:"展開アシスト（画像検索用）",en:"Assist Expand (image search)"}},script:""},(w=n(e.replacement_to_element,"assist_twitter",null)).preset={name:{standard:"Assist Expand (twitter)",locales:{ja:"展開アシスト（ツイッター用）",en:"Assist Expand (twitter)"}},script:""},(w=n(e.replacement_to_element,"assist_pixiv",null)).preset={name:{standard:"Assist Expand (pixiv)",locales:{ja:"展開アシスト（ピクシブ用）",en:"Assist Expand (pixiv)"}},script:""},(w=n(e.replacement_to_anchor,"direct_link_facebook","direct_link_realtime_search")).preset={name:{standard:"Direct Link (facebook.com)",locales:{ja:"直リンクに変更（フェイスブック用）",en:"Direct Link (facebook.com)"}},script:""},(w=n(e.replacement_to_anchor,"disable_event_facebook","direct_link_twitter")).preset={name:{standard:"Disable Event (facebook)",locales:{ja:"イベントを無効化（フェイスブック用）",en:"Disable Event (facebook)"}},script:""},o(e.replacement_to_link,"direct_link_generic",(function(e){var t=e.filter;t[0].filter.push("*://seiga.nicovideo.jp/watch/bk*"),t.splice(13,0,{name:{standard:"blog.fc2.com",locales:{ja:"FC2ブログ Photo",en:"blog.fc2.com"}},filter:["http://*.blog.fc2.com/img/*/"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(16,0,{name:{standard:"Miiverse",locales:{ja:"Miiverse",en:"Miiverse"}},filter:["*://miiverse.nintendo.net/posts/*"],enable_reflect_to_anchor:!1,enable_cache:!0,script:""})})),o(e.replacement_to_link,"direct_link_image_search",(function(e){var t=e.filter;t[12].filter=["http://*search.naver.jp/jthumb?*","http://*search.naver.jp/jdanmi?*"],t[12].enable_cache=!0})),o(e.replacement_to_link,"direct_link_wikipedia",(function(e){var t=e.filter;(t=t[0].filter).push("*://*.m.wikipedia.org/wiki/*:*"),t.push("*://*.m.wikipedia.org/w/*:*"),t.push("*://*.m.wikimedia.org/wiki/*:*"),t.push("*://*.m.wikimedia.org/w/*:*")})),(w=a(e.expand_short_url,"simple")).filter.splice(12,3),w.filter.push("http://dlvr.it/*"),w.filter.push("http://is.gd/*"),w.filter.push("http://ht.ly/*"),w.filter.push("http://lnk.ms/*"),w.filter.push("http://po.st/*"),w.filter.push("http://htn.to/*"),w.filter.push("http://r.sm3.jp/*"),w.filter.push("http://cot.ag/*"),w.filter.push("http://to.ly/*"),w.filter.push("http://ux.nu/*"),w.filter.push("http://qurl.com/*"),w.filter.push("http://tr.im/*"),w.filter.push("http://spr.ly/*"),w.filter.push("http://buff.ly/*"),(w=a(e.expand_short_url,"detail")).filter.splice(59,1),w.filter.splice(54,4),w.filter.splice(52,1),w.filter.splice(47,1),w.filter.splice(42,1),w.filter.splice(38,1),w.filter.splice(33,1),w.filter.splice(28,2),w.filter.splice(23,1),w.filter.splice(12,1),w.filter.push("http://spr.ly/*"),w.filter.push("http://buff.ly/*"),w.filter.push("http://amba.to/*"),w.filter.push("http://nico.ms/*"),w.filter.push("http://yhoo.it/*"),w.filter.push("http://shar.es/*"),w.filter.push("http://feedly.com/k/*"),w.filter.push("http://wp.me/*"),w.filter.push("http://migre.me/*"),w.filter.push("http://flip.it/*"),i("expand_image","thumbnail"),i("expand_image","popup"),l(e.expand_image,"*",(function(e){e.popup.scale_percent||(e.popup.scale_percent=100)})),(w=n(e.expand_image,"popup_all","image_bbs")).preset={name:{standard:"Popup (all)",locales:{ja:"ポップアップ表示（すべてのリンク）",en:"Popup (all)"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,unload_allow_size_more_then:256}},(w=n(e.expand_image,"popup_include_image","image_bbs")).preset={name:{standard:"Popup (include image)",locales:{ja:"ポップアップ表示（画像を含むリンク）",en:"Popup (include image)"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,unload_allow_size_more_then:256}},(w=n(e.expand_image,"thumbnail_all","image_bbs")).preset={name:{standard:"Thumbnail (all)",locales:{ja:"サムネイル表示（すべてのリンク）",en:"Thumbnail (all)"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,unload_allow_size_more_then:256}},(w=n(e.expand_image,"thumbnail_not_include_image","image_bbs")).preset={name:{standard:"Thumbnail (not include image)",locales:{ja:"サムネイル表示（画像を含まないリンク）",en:"Thumbnail (not include image)"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,unload_allow_size_more_then:256}},(w=n(e.expand_image,"twitter",null)).preset={name:{standard:"For twitter",locales:{ja:"ツイッター用",en:"For twitter"}},thumbnail:{enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,unload_allow_size_more_then:256}},l(e.urlmap,"*",(function(e){void 0===e.enable_mixed_content&&(e.enable_mixed_content=!1)})),(E=a(e.urlmap,"default")).make_link_to_text={enable:!1,id:""},E.expand_image={enable:!0,id:"popup_all"},(E=a(e.urlmap,"search")).expand_image={enable:!0,id:"popup_include_image"},(E=a(e.urlmap,"image_search")).replacement_to_element={enable:!0,id:["assist_image_search"]},E.expand_image={enable:!0,id:"popup_include_image"},(E=a(e.urlmap,"realtime_search")).expand_image={enable:!0,id:"thumbnail_not_include_image"},(E=a(e.urlmap,"bbs")).expand_image={enable:!0,id:"thumbnail_not_include_image"},(E=a(e.urlmap,"twitter")).replacement_to_element={enable:!0,id:["assist_twitter"]},E.expand_image={enable:!0,id:"twitter"},(E=a(e.urlmap,"wikipedia")).expand_image={enable:!0,id:"popup_include_image"},E.filter.push("*://*.m.wikipedia.org/*"),(w=n(e.urlmap,"pixiv","default")).preset={name:{standard:"pixiv",locales:{ja:"ピクシブ",en:"pixiv"}},enable:!0,filter:["http://*.pixiv.net/","http://*.pixiv.net/*"],enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:""},replacement_to_element:{enable:!0,id:["assist_pixiv"]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!1,id:[]},replacement_to_link:{enable:!0,id:"direct_link_generic"},replacement_to_referer:{enable:!1,id:""},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup_include_image"},expand_sound:{enable:!1,id:""},expand_video:{enable:!1,id:""},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"facebook","twitter")).preset={name:{standard:"Facebook",locales:{ja:"フェイスブック",en:"Facebook"}},enable:!0,filter:["*://www.facebook.com/*"],enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:""},replacement_to_element:{enable:!1,id:[]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["disable_event_facebook","direct_link_facebook","no_referrer"]},replacement_to_link:{enable:!0,id:"direct_link_generic"},replacement_to_referer:{enable:!1,id:""},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"simple"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup_include_image"},expand_sound:{enable:!1,id:""},expand_video:{enable:!1,id:""},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}});if(_())return e;if(e.version<12&&(e.version=12,l(e.urlmap,"*",(function(e){e.access_block.enable?e.access_block.id=[e.access_block.id]:e.access_block.id=[],e.replacement_to_link.enable?e.replacement_to_link.id=[e.replacement_to_link.id]:e.replacement_to_link.id=[],e.replacement_to_referer.enable?e.replacement_to_referer.id=[e.replacement_to_referer.id]:e.replacement_to_referer.id=[],e.replacement_to_useragent.enable?e.replacement_to_useragent.id=[e.replacement_to_useragent.id]:e.replacement_to_useragent.id=[]}))),_())return e;e.version<13&&(e.version=13,(E=(w=n(e.expand_bbs,"logsoku",null)).preset).filter=[{pattern:"^http://logsoku\\.com/thread/.*\\.2ch\\.net/[^/]+/[0-9]+",flags:{i:!0,g:!1}},{pattern:"^http://[^.]+\\.logsoku\\.com/r/[^/]+/[0-9]+",flags:{i:!0,g:!1}},{pattern:"^http://logsoku\\.com/r/[^/]+/[0-9]+",flags:{i:!0,g:!1}}],(E=(w=n(e.expand_bbs,"mimizun",null)).preset).filter=[{pattern:"^http://mimizun\\.com/log/2ch/[^/]+/[0-9]+",flags:{i:!0,g:!1}},{pattern:"^http://mimizun\\.com/log/machi/[^/]+/[0-9]+",flags:{i:!0,g:!1}}],(E=(w=n(e.expand_bbs,"unkar",null)).preset).filter=[{pattern:"^http://unkar\\.org/r/[^/]+/[0-9]+",flags:{i:!0,g:!1}}],(E=(w=n(e.expand_bbs,"atchs",null)).preset).filter=[{pattern:"^http://[^.]+\\.atchs\\.jp/test/read\\.cgi/[^/]+/[0-9]+",flags:{i:!0,g:!1}}],(w=n(e.urlmap,"chaika","image_bbs")).preset={name:{standard:"chaika",locales:{ja:"chaika",en:"chaika"}},enable:!0,filter:["http://127.0.0.1:*/thread/http://2ch.net/*","http://127.0.0.1:*/thread/http://*.2ch.net/*","http://127.0.0.1:*/thread/http://*.bbspink.com/*","http://127.0.0.1:*/thread/http://jbbs.livedoor.jp/*"],enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:[]},replacement_to_element:{enable:!1,id:[]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["direct_link_bbs","no_referrer"]},replacement_to_link:{enable:!0,id:["direct_link_generic"]},replacement_to_referer:{enable:!0,id:["replacement_link_url"]},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"thumbnail_not_include_image"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}});if(_())return e;if(e.version<14){e.version=14;var u={standard:"Wild Card",locales:{ja:"ワイルドカード",en:"Wild Card"}};i("access_block","firefox_extension"),i("access_block","opera_extension"),(w=n(e.access_block,"wildcard",null)).preset={name:u,filter:[]},i("replacement_to_referer","firefox_extension"),(w=n(e.replacement_to_referer,"wildcard",null)).preset={name:u,filter:[]},i("replacement_to_useragent","firefox_extension"),(w=n(e.replacement_to_useragent,"wildcard",null)).preset={name:u,filter:[]},(w=n(e.replacement_to_element,"assist_image_in_anchor","assist_image_search")).preset={name:{standard:"Assist Expand (image in anchor)",locales:{ja:"展開アシスト（アンカー内画像用）",en:"Assist Expand (image in anchor)"}},script:""},l(e.expand_image,"*",(function(e){void 0===e.thumbnail.enable_thumbnail&&(e.thumbnail.enable_thumbnail=!0),void 0===e.popup.enable_popup_mouseover&&(e.popup.enable_popup_mouseover=!0),void 0===e.load.src_type&&(e.load.src_type="mixed_content")})),a(e.expand_image,"popup_all").thumbnail.enable_thumbnail=!1,a(e.expand_image,"popup_include_image").thumbnail.enable_thumbnail=!1,a(e.expand_image,"thumbnail_all").popup.enable_popup_mouseover=!1,a(e.expand_image,"thumbnail_not_include_image").popup.enable_popup_mouseover=!1,(w=n(e.expand_image,"popup_image_in_anchor","thumbnail_all")).preset={name:{standard:"Popup (assist only)",locales:{ja:"ポップアップ表示（アシスト要素のみ）",en:"Popup (assist only)"}},thumbnail:{enable_thumbnail:!1,enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{enable_popup_mouseover:!0,origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,src_type:"mixed_content",unload_allow_size_more_then:256}},(E=(w=n(e.expand_bbs,"2chan",null)).preset).filter=[{pattern:"^http://[^.]+\\.2chan\\.net/[^/]+/res/[0-9]+.htm",flags:{i:!0,g:!1}}],(w=n(e.expand_bbs,"chaika","atchs")).preset={name:{standard:"chaika",locales:{ja:"chaika",en:"chaika"}},enable:!0,filter:[{pattern:"^http://127\\.0\\.0\\.1:[0-9]+/thread/http://[^.]+\\.2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+",flags:{i:!0,g:!1}},{pattern:"^http://127\\.0\\.0\\.1:[0-9]+/thread/http://[^.]+\\.bbspink\\.com/test/read\\.cgi/[^/]+/[0-9]+",flags:{i:!0,g:!1}},{pattern:"^http://127\\.0\\.0\\.1:[0-9]+/thread/http://jbbs\\.shitaraba\\.net/bbs/read.cgi/[^/]+/[0-9]+/[0-9]+",flags:{i:!0,g:!1}}],script_initialize:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},o(e.urlmap,"bbs",(function(e){e.filter[6]="*://jbbs.shitaraba.net/*"})),o(e.urlmap,"chaika",(function(e){e.filter[3]="http://127.0.0.1:*/thread/http://jbbs.shitaraba.net/*"})),o(e.urlmap,"pixiv",(function(e){e.replacement_to_element.id.unshift("assist_image_in_anchor"),e.expand_image.id="popup_image_in_anchor"})),e.standard.enable_startup=e.standard.enable_enable_startup,delete e.standard.enable_enable_startup,e.standard.enable_input_touch=!0,e.standard.enable_double_touch_assist=!1}if(_())return e;if(e.version<15){e.version=15;var d=function(e){return{type:"asterisk",asterisk:{filter:e},regexp:{filter:[]}}};l(e.expand_bbs,"*",(function(e){e.filter=function(e){return{type:"regexp",asterisk:{filter:[]},regexp:{filter:e}}}(e.filter)})),(E=(w=n(e.expand_bbs,"2ch",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://[^.]+\\.2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://(|[^.]+\\.)machi\\.to/bbs/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://(|[^.]+\\.)machibbs\\.net/[^/]+/[^/]*[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://[^.]+\\.bbspink\\.com/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://jbbs\\.shitaraba\\.net/bbs/read.cgi/[^/]+/[0-9]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://[^.]+\\.kakiko\\.com/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://[^.]+\\.60\\.kg/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},(E=(w=n(e.expand_bbs,"logsoku",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://logsoku\\.com/thread/.*\\.2ch\\.net/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://[^.]+\\.logsoku\\.com/r/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://logsoku\\.com/r/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},(E=(w=n(e.expand_bbs,"mimizun",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://mimizun\\.com/log/2ch/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://mimizun\\.com/log/machi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},(E=(w=n(e.expand_bbs,"unkar",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://unkar\\.org/r/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},(E=(w=n(e.expand_bbs,"atchs",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://[^.]+\\.atchs\\.jp/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},(E=(w=n(e.expand_bbs,"chaika",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://127\\.0\\.0\\.1:[0-9]+/thread/http://[^.]+\\.2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://127\\.0\\.0\\.1:[0-9]+/thread/http://[^.]+\\.bbspink\\.com/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://127\\.0\\.0\\.1:[0-9]+/thread/http://jbbs\\.shitaraba\\.net/bbs/read.cgi/[^/]+/[0-9]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},(E=(w=n(e.expand_bbs,"4chan",null)).preset).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://boards\\.4chan\\.org/[^/]+/.*$",flags:{i:!0,g:!1}}]}},l(e.access_block,"*",(function(e){e.filter=d(e.filter)})),l(e.replacement_to_referer,"*",(function(e){var t,n=e.filter,a=n.length;for(t=0;t<a;t++)n[t].filter=d(n[t].filter)})),l(e.replacement_to_useragent,"*",(function(e){var t,n=e.filter,a=n.length;for(t=0;t<a;t++)n[t].filter=d(n[t].filter)})),l(e.replacement_to_link,"*",(function(e){var t,n=e.filter,a=n.length;for(t=0;t<a;t++)n[t].filter=d(n[t].filter)})),(E=a(e.replacement_to_link,"direct_link_wikipedia")).filter[0].filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^[^:]+://[^.]+\\.(|m\\.)(wikipedia|wikimedia|wiktionary|wikinews|wikiquote|wikibooks|wikisource|wikiversity|wikivoyage|mediawiki)\\.org/(wiki|w).*:.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://en\\.uncyclopedia\\.co/(wiki|w).*:.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://ansaikuropedia\\.org/(wiki|w).*:.*",flags:{i:!0,g:!1}}]}},l(e.expand_short_url,"*",(function(e){e.filter=d(e.filter)})),l(e.urlmap,"*",(function(e){e.filter=d(e.filter)})),(E=a(e.urlmap,"image_search")).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^[^:]+://[^.]+\\.google\\.(at|be|ca|ch|de|es|fr|it|nl|no|pl|ru|se|co\\.(id|in|jp|th|uk|za)|com|com\\.(ar|au|br|mx|sa|tr|tw))/(search[?].*tbm=isch|images[?]).*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://images\\.search\\.yahoo\\.com/search/images.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://[^.]+\\.images\\.search\\.yahoo\\.com/search/images.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://[^.]+\\.image\\.search\\.yahoo\\.com/search/images.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://image\\.search\\.yahoo\\.co\\.jp/search[?].*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://image\\.yahoo\\.cn/s[?].*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://www\\.bing\\.com/images/search[?].*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://[^.]+\\.ask\\.com/pictures[?].*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://search\\.aol\\.(com|jp)/aol/image[?].*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://images\\.yandex\\.(ru|com)/.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://bsearch\\.goo\\.ne\\.jp/(image|scrimg|similarity)\\.php[?].*MT=.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://image\\.baidu\\.com/.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://image\\.search\\.naver\\.com/.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://[^.]*search\\.naver\\.jp/image[?].*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://image\\.search\\.biglobe\\.ne\\.jp/search[?].*",flags:{i:!0,g:!1}}]}},(E=a(e.urlmap,"wikipedia")).filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^[^:]+://[^.]+\\.(|m\\.)(wikipedia|wikimedia|wiktionary|wikinews|wikiquote|wikibooks|wikisource|wikiversity|wikivoyage|mediawiki)\\.org/.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://en\\.uncyclopedia\\.co/.*",flags:{i:!0,g:!1}},{pattern:"^[^:]+://ansaikuropedia\\.org/.*",flags:{i:!0,g:!1}}]}}}if(_())return e;if(e.version<16&&(e.version=16),_())return e;if(e.version<17){e.version=17,e.download=new Object;var p=e.download.load=new Object,m=e.download.download=new Object;p.thread_max=e.standard.load_thread_max,p.timeout=0,m.thread_max=2,m.conflict_type="rename",delete e.standard.load_thread_max,(w=n(e.replacement_to_anchor,"auto_download_all","disable_popup_image_search")).preset={name:{standard:"Auto Download (all)",locales:{ja:"自動ダウンロード（すべて）",en:"Auto Download (all)"}},script:""},(w=n(e.replacement_to_anchor,"auto_download_image","disable_popup_image_search")).preset={name:{standard:"Auto Download (image only)",locales:{ja:"自動ダウンロード（画像のみ）",en:"Auto Download (image only)"}},script:""},(w=n(e.replacement_to_anchor,"add_download_list_all","disable_popup_image_search")).preset={name:{standard:"Add the DownloadList (all)",locales:{ja:"ダウンロードリストに登録（すべて）",en:"Add the DownloadList (all)"}},script:""},(w=n(e.replacement_to_anchor,"add_download_list_image","disable_popup_image_search")).preset={name:{standard:"Add the DownloadList (image only)",locales:{ja:"ダウンロードリストに登録（画像のみ）",en:"Add the DownloadList (image only)"}},script:""}}if(_())return e;e.version<18&&(e.version=18,(E=(w=n(e.expand_bbs,"2ch",null)).preset).filter.regexp.filter.push({pattern:"^http://[^.]+\\.2ch\\.sc/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}),(w=n(e.expand_bbs,"open2ch","atchs")).preset={name:{standard:"open2ch.net",locales:{ja:"おーぷん２ちゃんねる",en:"open2ch.net"}},enable:!0,filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://[^.]+\\.open2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^http://open2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},script_initialize:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all;"}},o(e.urlmap,"bbs",(function(e){var t=e.filter.asterisk.filter;t.push("*://open2ch.net/*"),t.push("*://*.open2ch.net/*"),t.push("*://2ch.sc/*"),t.push("*://*.2ch.sc/*")})));if(_())return e;e.version<19&&(e.version=19,(w=n(e.replacement_to_element,"assist_deviant_art","assist_pixiv")).preset={name:{standard:"Assist Expand (deviantART)",locales:{ja:"展開アシスト（deviantART 用）",en:"Assist Expand (deviantART)"}},script:""},(w=n(e.replacement_to_element,"assist_nico_seiga","assist_pixiv")).preset={name:{standard:"Assist Expand (NICONICO SEIGA)",locales:{ja:"展開アシスト（ニコニコ静画用）",en:"Assist Expand (NICONICO SEIGA)"}},script:""},o(e.replacement_to_link,"direct_link_generic",(function(e){var t=e.filter;t[0].filter.asterisk.filter.splice(2,5),t[4].filter.asterisk.filter.push("*://www.facebook.com/*/photos/*"),t[5].filter.asterisk.filter.push("*://plus.google.com/*/posts/*"),t.splice(8,0,{name:{standard:"Flickr",locales:{ja:"Flickr",en:"Flickr"}},filter:{type:"asterisk",asterisk:{filter:["*://www.flickr.com/photos/*/*","*://flic.kr/p/*"]},regexp:{filter:[]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(9,0,{name:{standard:"yfrog.com",locales:{ja:"yfrog.com",en:"yfrog.com"}},filter:{type:"asterisk",asterisk:{filter:["*://twitter.yfrog.com/*","*://yfrog.com/*"]},regexp:{filter:[]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(16,0,{name:{standard:"deviantART",locales:{ja:"deviantART",en:"deviantART"}},filter:{type:"asterisk",asterisk:{filter:["*://*.deviantart.com/art/*"]},regexp:{filter:[]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t[17].name={standard:"NICONICO SEIGA Illust",locales:{ja:"ニコニコ静画 イラスト",en:"NICONICO SEIGA Illust"}},t.splice(18,0,{name:{standard:"NICONICO SEIGA Illust (Direct Link)",locales:{ja:"ニコニコ静画 イラスト (直リンク)",en:"NICONICO SEIGA Illust (Direct Link)"}},filter:{type:"asterisk",asterisk:{filter:["*://seiga.nicovideo.jp/image/source/*","*://seiga.nicovideo.jp/image/source?id=*"]},regexp:{filter:[]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:""}),t.splice(19,0,{name:{standard:"NICONICO SEIGA Manga",locales:{ja:"ニコニコ静画 漫画",en:"NICONICO SEIGA Manga"}},filter:{type:"asterisk",asterisk:{filter:["*://seiga.nicovideo.jp/watch/mg*","*://nico.ms/mg*"]},regexp:{filter:[]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:""})})),o(e.replacement_to_link,"direct_link_image_search",(function(e){var t=e.filter;t.splice(3,1),t.splice(9,1),t[6].filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^http://yandex\\.(ru|com)/images/search[?].*$",flags:{i:!0,g:!1}}]}}})),(E=(w=n(e.expand_bbs,"2ch",null)).preset).filter.regexp.filter.splice(5,0,{pattern:"^http://jbbs\\.shitaraba\\.net/[^/]+/[0-9]+/storage/[0-9]+.*$",flags:{i:!0,g:!1}}),i("expand_bbs","unkar"),(b=(E=a(e.urlmap,"image_search")).filter.regexp.filter).splice(5,1),b[8]={pattern:"^[^:]+://yandex\\.(ru|com)/images/.*",flags:{i:!0,g:!1}},b[9]={pattern:"^[^:]+://(|[^.]+\\.)bsearch\\.goo\\.ne\\.jp/(image|scrimg|similarity)\\.php[?].*MT=.*",flags:{i:!0,g:!1}},b[13]={pattern:"^[^:]+://images\\.search\\.biglobe\\.ne\\.jp/cgi-bin/search[?].*",flags:{i:!0,g:!1}},(E=a(e.urlmap,"facebook")).replacement_to_anchor={enable:!0,id:["disable_event_facebook","direct_link_facebook"]},(w=n(e.urlmap,"deviant_art","pixiv")).preset={name:{standard:"deviantART",locales:{ja:"deviantART",en:"deviantART"}},enable:!0,filter:{type:"asterisk",asterisk:{filter:["*://*.deviantart.com/*"]},regexp:{filter:[]}},enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:[]},replacement_to_element:{enable:!0,id:["assist_deviant_art"]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["no_referrer"]},replacement_to_link:{enable:!0,id:["direct_link_generic"]},replacement_to_referer:{enable:!0,id:["replacement_link_url"]},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup_image_in_anchor"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.urlmap,"nico_seiga","pixiv")).preset={name:{standard:"niconico seiga",locales:{ja:"ニコニコ静画",en:"niconico seiga"}},enable:!0,filter:{type:"asterisk",asterisk:{filter:["http://seiga.nicovideo.jp/seiga/im*","http://seiga.nicovideo.jp/illust/*","http://seiga.nicovideo.jp/shunga/*"]},regexp:{filter:[]}},enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:[]},replacement_to_element:{enable:!0,id:["assist_nico_seiga"]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["no_referrer"]},replacement_to_link:{enable:!0,id:["direct_link_generic"]},replacement_to_referer:{enable:!0,id:["replacement_link_url"]},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup_image_in_anchor"},expand_sound:{enable:!0,id:"inline"},expand_video:{enable:!0,id:"inline"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},o(e.urlmap,"pixiv",(function(e){e.replacement_to_element.id.shift()})),(w=n(e.urlmap,"blog_ja","default")).preset={name:{standard:"Blog",locales:{ja:"ブログ",en:"Blog"}},enable:!0,filter:{type:"asterisk",asterisk:{filter:["*://ameblo.jp/*/*","*://blogs.yahoo.co.jp/*","*://blog.livedoor.jp/*","*://*.blog.jp/*","*://*.doorblog.jp/*","*://*.blog*.fc2.com/*","*://*.exblog.jp/*","*://*.seesaa.net/*","*://*.blogspot.jp/*","*://*.hatenablog.jp/*"]},regexp:{filter:[]}},enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:[]},replacement_to_element:{enable:!0,id:["assist_image_in_anchor"]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["no_referrer"]},replacement_to_link:{enable:!0,id:["direct_link_generic"]},replacement_to_referer:{enable:!0,id:["replacement_link_url"]},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"popup_image_in_anchor"},expand_sound:{enable:!1,id:""},expand_video:{enable:!1,id:""},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}});if(_())return e;if(e.version<20&&(e.version=20),_())return e;e.version<21&&(e.version=21,(w=n(e.expand_bbs,"8chan","4chan")).preset={name:{standard:"8chan.co",locales:{ja:"8chan",en:"8chan.co"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://([^.]+\\.|)8chan\\.co/[^/]+/.*$",flags:{i:!0,g:!1}},{pattern:"^(http|https)://([^.]+\\.|)8ch\\.net/[^/]+/.*$",flags:{i:!0,g:!1}}]}},enable:!0,script_initialize:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; margin:0px; border:1px solid #000; overflow-y:auto; word-wrap:break-word; word-break:break-all; display:block;"}},o(e.urlmap,"image_bbs",(function(e){var t=e.filter.asterisk.filter;t.push("*://8ch.net/*"),t.push("*://8chan.co/*"),t.push("*://*.8chan.co/*")})));if(_())return e;e.version<22&&(e.version=22,(w=n(e.replacement_to_link,"direct_link_find_image_in_html",null)).preset={name:{standard:"Direct Link (Find an image in HTML)",locales:{ja:"直リンク（HTML 内の画像を検索）",en:"Direct Link (Find an image in HTML)"}},filter:[{name:{standard:"Image of the largest byte",locales:{ja:"最大バイトの画像",en:"Image of the largest byte"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://.*\\.(bmp|gif|jpg|jpe|jpeg|png)([^#?/]*)([#?].*|$)",flags:{i:!0,g:!1}}]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:""}]});if(_())return e;if(e.version<23&&(e.version=23),_())return e;e.version<24&&(e.version=24,(w=n(e.replacement_to_referer,"bbs","wildcard")).preset={name:{standard:"For 2ch.net",locales:{ja:"スレッド掲示板用",en:"For 2ch.net"}},filter:[{name:{standard:"shitaraba.net",locales:{ja:"したらば掲示板",en:"shitaraba.net"}},filter:{type:"asterisk",asterisk:{filter:["http://jbbs.shitaraba.net/bbs/write.cgi/*"]},regexp:{filter:[]}},send_referer:{type:"default",custom:"",regexp:{pattern:"",flags:{i:!1,g:!1}},replacement:""}}]},(E=a(e.urlmap,"bbs")).replacement_to_referer.id.unshift("bbs"));if(_())return e;e.version<25&&(e.version=25,(w=n(e.expand_image,"bbs","twitter")).preset={name:{standard:"For 2ch.net",locales:{ja:"スレッド掲示板用",en:"For 2ch.net"}},thumbnail:{enable_thumbnail:!0,enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{enable_popup_mouseover:!0,origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,src_type:"mixed_content",unload_allow_size_more_then:256}},(E=a(e.urlmap,"bbs")).replacement_to_element={enable:!0,id:["assist_image_in_anchor"]},E.expand_image={enable:!0,id:"bbs"});if(_())return e;e.version<26&&(e.version=26,(w=n(e.replacement_to_element,"assist_reddit","assist_deviant_art")).preset={name:{standard:"Assist Expand (reddit)",locales:{ja:"展開アシスト（reddit 用）",en:"Assist Expand (reddit)"}},script:""},o(e.replacement_to_link,"direct_link_generic",(function(e){e.filter[1].filter.asterisk.filter.push("*://imgur.com/*")})),(w=n(e.expand_image,"reddit",null)).preset={name:{standard:"For reddit",locales:{ja:"reddit 用",en:"For reddit"}},thumbnail:{enable_thumbnail:!0,enable_popup_mouseover:!0,disable_same_image:!1,load_type:"preload",script_allow:"",script_insert:""},popup:{enable_popup_mouseover:!0,origin_type:"center",position_type:"absolute",time_wait_open:0,time_wait_close:0,enable_animation_scale:!0,enable_animation_alpha:!0,load_type:"preload",scale_percent:100,script_allow:""},reduced_image:{enable_popup:!0,popup_allow_slcale_less_then:70},load:{enable_notify:!0,enable_unload:!1,src_type:"mixed_content",unload_allow_size_more_then:256}},(w=n(e.expand_sound,"inline_from_assist",null)).preset={name:{standard:"Inline (assist only)",locales:{ja:"インライン表示（アシスト要素のみ）",en:"Inline (assist only)"}},inline:{disable_same_audio:!0,sound_max:10,script_allow:"",script_insert:""},audio_element:{script_allow:""},soundcloud:{visible_player_flash:!0,visible_player_html5:!1},mixcloud:{visible_player:!0}},(w=n(e.expand_video,"inline_from_assist",null)).preset={name:{standard:"Inline (assist only)",locales:{ja:"インライン表示（アシスト要素のみ）",en:"Inline (assist only)"}},inline:{disable_same_video:!0,video_max:10,script_allow:"",script_insert:""},video_element:{script_allow:""},youtube:{visible_video:!0},nicovideo:{visible_video:!0,visible_thumbnail_video:!0,visible_thumbnail_mylist:!0,visible_thumbnail_user:!0,visible_thumbnail_community:!0,visible_thumbnail_live:!0,visible_thumbnail_seiga:!0},ustream:{visible_video_live:!0,visible_video_record:!0},dailymotion:{visible_video:!0},vimeo:{visible_video:!0},fc2video:{visible_video:!0},liveleak:{visible_video:!0}},(w=n(e.urlmap,"reddit","chaika")).preset={name:{standard:"reddit.com",locales:{ja:"reddit.com",en:"reddit.com"}},enable:!0,filter:{type:"asterisk",asterisk:{filter:["*://*.reddit.com/*"]},regexp:{filter:[]}},enable_unsecure:!1,enable_mixed_content:!1,access_block:{enable:!1,id:[]},replacement_to_element:{enable:!0,id:["assist_reddit"]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!0,id:["no_referrer"]},replacement_to_link:{enable:!0,id:["direct_link_generic"]},replacement_to_referer:{enable:!0,id:["replacement_link_url"]},replacement_to_useragent:{enable:!1,id:""},make_link_to_text:{enable:!0,id:"detail"},expand_short_url:{enable:!0,id:"detail"},expand_text:{enable:!1,id:""},expand_image:{enable:!0,id:"reddit"},expand_sound:{enable:!0,id:"inline_from_assist"},expand_video:{enable:!0,id:"inline_from_assist"},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!0,id:"default"},experimental:{enable:!1,id:""}},(w=n(e.expand_bbs,"reddit","8chan")).preset={name:{standard:"reddit.com",locales:{ja:"reddit.com",en:"reddit.com"}},filter:{type:"asterisk",asterisk:{filter:["*://*.reddit.com/*/*"]},regexp:{filter:[]}},enable:!0,script_initialize:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; margin:0px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all; display:block;"}});if(_())return e;e.version<27&&(e.version=27,(b=(E=(w=n(e.expand_bbs,"2ch",null)).preset).filter.regexp.filter)[4].pattern="^http://jbbs\\.shitaraba\\.net/bbs/read\\.cgi/[^/]+/[0-9]+/[0-9]+.*$",b[5].pattern="^http://jbbs\\.shitaraba\\.net/bbs/read_archive\\.cgi/[^/]+/[0-9]+/[0-9]+.*$");if(_())return e;if(e.version<28){e.version=28;var g=e.language;g.auto=g.type<0,g.code=["ja","en"][g.type]||"en",delete g.type,i("replacement_to_referer","bbs"),(w=n(e.replacement_to_referer,"direct_link_generic","wildcard")).preset={name:{standard:"For Direct Link (generic)",locales:{ja:"直リンク用（汎用）",en:"For Direct Link (generic)"}},filter:[{name:{standard:"pixiv.net",locales:{ja:"pixiv.net",en:"pixiv.net"}},filter:{type:"asterisk",asterisk:{filter:["*://*.pixiv.net/*"]},regexp:{filter:[]}},send_referer:{type:"link_url",custom:"",regexp:{pattern:"",flags:{i:!1,g:!1}},replacement:""}}]};var f=function(e){var t,n=e.filter.asterisk.filter,a=new RegExp("^(http|https)://(.*)$","i"),i=n.length;for(t=0;t<i;t++){var o=n[t].match(a);o&&(n[t]="*://"+o[2])}};o(e.expand_short_url,"detail",f),o(e.expand_short_url,"simple",f),i("urlmap","chaika"),(w=a(e.urlmap,"blog_ja")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"nico_seiga")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"deviant_art")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"twitter")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"facebook")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(b=(w=a(e.urlmap,"bbs")).filter.asterisk.filter).splice(12,1),b.splice(11,1),b.splice(10,1),w.replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"image_bbs")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"reddit")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(w=a(e.urlmap,"image_search")).replacement_to_referer={enable:!1,id:[]},(b=(E=(w=n(e.expand_bbs,"2ch",null)).preset).filter.regexp.filter).splice(7,1),b.splice(6,1),(E=(w=n(e.expand_bbs,"logsoku",null)).preset).filter.regexp.filter.splice(0,3,{pattern:"^http://www\\.logsoku\\.com/r/[^/]+/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}),i("expand_bbs","atchs"),i("expand_bbs","chaika"),(w=n(e.expand_bbs,"2ch_v6","2ch")).preset={name:{standard:"2ch.net (v.06)",locales:{ja:"２ちゃんねる掲示板（v.06）",en:"2ch.net (v.06)"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[]}},enable:!0,script_initialize:"",script_callback:"",popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; margin:0px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all; display:block;"}}}if(_())return e;if(e.version<29){e.version=29;var h={delete_br_tags:{script:"ReplacementToElement_DeleteBrTags"},meiryo_font:{script:"ReplacementToElement_MeiryoFont"},assist_image_in_anchor:{script:"ReplacementToElement_AssistImageInAnchor"},assist_image_search:{script:"ReplacementToElement_AssistImageSearch"},assist_twitter:{script:"ReplacementToElement_AssistTwitter"},assist_reddit:{script:"ReplacementToElement_AssistReddit"},assist_deviant_art:{script:"ReplacementToElement_AssistDeviantArt"},assist_nico_seiga:{script:"ReplacementToElement_AssistNicoSeiga"},assist_pixiv:{script:"ReplacementToElement_AssistPixiv"}};o(e.replacement_to_element,"*",(function(e,t){var n=h[t.id];e.script=PageExpandProjectScriptObject_Create(n.script)})),r(e.replacement_to_element,"*",(function(e,t){var n=h[t.id],a=PageExpandProjectScriptObject_Create(n?n.script:"ReplacementToElement_Default");PageExpandProjectScriptObject_SetUserScript(a,e.script),e.script=a}));h={alphanumeric_half:{script:"ReplacementToText_AlphanumericHalf"},visualize_space_and_tab:{script:"ReplacementToText_VisualizeSpaceAndTab"}};o(e.replacement_to_text,"*",(function(e,t){var n=h[t.id];e.script=PageExpandProjectScriptObject_Create(n.script)})),r(e.replacement_to_text,"*",(function(e,t){var n=h[t.id],a=PageExpandProjectScriptObject_Create(n?n.script:"ReplacementToText_Default");PageExpandProjectScriptObject_SetUserScript(a,e.script),e.script=a}));h={auto_download_all:{script:"ReplacementToAnchor_AutoDownloadAll"},auto_download_image:{script:"ReplacementToAnchor_AutoDownloadImage"},add_download_list_all:{script:"ReplacementToAnchor_AddDownloadListAll"},add_download_list_image:{script:"ReplacementToAnchor_AddDownloadListImage"},disable_popup_image_search:{script:"ReplacementToAnchor_DisablePopupImageSearch"},disable_event_facebook:{script:"ReplacementToAnchor_DisableEventFacebook"},direct_link_twitter:{script:"ReplacementToAnchor_DirectLinkTwitter"},direct_link_facebook:{script:"ReplacementToAnchor_DirectLinkFacebook"},direct_link_realtime_search:{script:"ReplacementToAnchor_DirectLinkRealtimeSearch"},direct_link_search:{script:"ReplacementToAnchor_DirectLinkSearch"},direct_link_bbs:{script:"ReplacementToAnchor_DirectLinkBbs"},display_url_in_tooltip:{script:"ReplacementToAnchor_DisplayUrlInTooltip"},attach_sns_counter:{script:"ReplacementToAnchor_AttachSnsCounter"},no_referrer:{script:"ReplacementToAnchor_NoReferrer"}};o(e.replacement_to_anchor,"*",(function(e,t){var n=h[t.id];e.script=PageExpandProjectScriptObject_Create(n.script)})),r(e.replacement_to_anchor,"*",(function(e,t){var n=h[t.id],a=PageExpandProjectScriptObject_Create(n?n.script:"ReplacementToAnchor_Default");PageExpandProjectScriptObject_SetUserScript(a,e.script),e.script=a})),r(e.replacement_to_link,"*",(function(e,t){var n,a=e.filter,i=a.length;for(n=0;n<i;n++){var o=a[n],r=PageExpandProjectScriptObject_Create("ReplacementToLink_Default");PageExpandProjectScriptObject_SetUserScript(r,o.script),o.script=r}})),o(e.replacement_to_link,"direct_link_generic",(function(e,t){var n,a=["ReplacementToLink_DirectLinkGeneric_OgpOgImage","ReplacementToLink_DirectLinkGeneric_OgpTwitter","ReplacementToLink_DirectLinkGeneric_Twitpic","ReplacementToLink_DirectLinkGeneric_TwitterPhoto","ReplacementToLink_DirectLinkGeneric_FacebookPhoto","ReplacementToLink_DirectLinkGeneric_GooglePlusPhoto","ReplacementToLink_DirectLinkGeneric_PicasaPhoto","ReplacementToLink_DirectLinkGeneric_Tumblr","ReplacementToLink_DirectLinkGeneric_Flickr","ReplacementToLink_DirectLinkGeneric_Yfrog","ReplacementToLink_DirectLinkGeneric_Giphy","ReplacementToLink_DirectLinkGeneric_Gyazo","ReplacementToLink_DirectLinkGeneric_PhotozouPhoto","ReplacementToLink_DirectLinkGeneric_Twipple","ReplacementToLink_DirectLinkGeneric_TwippleDirectLink","ReplacementToLink_DirectLinkGeneric_BlogFc2Com","ReplacementToLink_DirectLinkGeneric_DeviantArt","ReplacementToLink_DirectLinkGeneric_NicoSeigaIllust","ReplacementToLink_DirectLinkGeneric_NicoSeigaIllustDirectLink","ReplacementToLink_DirectLinkGeneric_NicoSeigaManga","ReplacementToLink_DirectLinkGeneric_PixivNet","ReplacementToLink_DirectLinkGeneric_Miiverse"],i=e.filter,o=i.length;for(n=0;n<o;n++){i[n].script=PageExpandProjectScriptObject_Create(a[n])}})),o(e.replacement_to_link,"direct_link_image_search",(function(e,t){var n,a=["ReplacementToLink_DirectLinkImageSearch_Google","ReplacementToLink_DirectLinkImageSearch_YahooImageSearch","ReplacementToLink_DirectLinkImageSearch_YahooJapan","ReplacementToLink_DirectLinkImageSearch_Bing","ReplacementToLink_DirectLinkImageSearch_Ask","ReplacementToLink_DirectLinkImageSearch_Aol","ReplacementToLink_DirectLinkImageSearch_Yandex","ReplacementToLink_DirectLinkImageSearch_Goo","ReplacementToLink_DirectLinkImageSearch_Baidu","ReplacementToLink_DirectLinkImageSearch_Naver","ReplacementToLink_DirectLinkImageSearch_NaverJp"],i=e.filter,o=i.length;for(n=0;n<o;n++){i[n].script=PageExpandProjectScriptObject_Create(a[n])}})),o(e.replacement_to_link,"direct_link_wikipedia",(function(e,t){e.filter[0].script=PageExpandProjectScriptObject_Create("ReplacementToLink_DirectLinkWikipedia")})),o(e.replacement_to_link,"direct_link_find_image_in_html",(function(e,t){e.filter[0].script=PageExpandProjectScriptObject_Create("ReplacementToLink_DirectLinkFindImageInHTML_ImageOfTheLargestByte")}));h={detail:{script:"MakeLinkToText_Detail"},simple:{script:"MakeLinkToText_Simple"}};o(e.make_link_to_text,"*",(function(e,t){var n=h[t.id];e.script=PageExpandProjectScriptObject_Create(n.script)})),r(e.make_link_to_text,"*",(function(e,t){var n=h[t.id],a=PageExpandProjectScriptObject_Create(n?n.script:"MakeLinkToText_Default");PageExpandProjectScriptObject_SetUserScript(a,e.script),e.script=a}));h={inline:{script_allow:"ExpandText_InlineScriptAllow_Inline",script_insert:"ExpandText_InlineScriptInsert_Inline"}};o(e.expand_text,"*",(function(e,t){var n=h[t.id];e.inline.script_allow=PageExpandProjectScriptObject_Create(n.script_allow),e.inline.script_insert=PageExpandProjectScriptObject_Create(n.script_insert)})),r(e.expand_text,"*",(function(e,t){var n,a=h[t.id];PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.script_allow:"ExpandText_InlineScriptAllow_Default"),e.inline.script_allow),e.inline.script_allow=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.script_insert:"ExpandText_InlineScriptInsert_Default"),e.inline.script_insert),e.inline.script_insert=n}));h={popup_all:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_PopupAll",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_PopupAll"}},popup_include_image:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_PopupIncludeImage",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_PopupIncludeImage"}},popup_image_in_anchor:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_PopupImageInAnchor",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_PopupImageInAnchor"}},thumbnail_all:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_ThumbnailAll",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_ThumbnailAll"}},thumbnail_not_include_image:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_ThumbnailNotIncludeImage",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_ThumbnailNotIncludeImage"}},image_bbs:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_ImageBbs",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_ImageBbs"}},bbs:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_ThumbnailNotIncludeImage",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_PopupImageInAnchor"}},twitter:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_Twitter",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_Twitter"}},reddit:{thumbnail:{script_allow:"ExpandImage_ThumbnailScriptAllow_Reddit",script_insert:"ExpandImage_ThumbnailScriptInsert"},popup:{script_allow:"ExpandImage_PopupScriptAllow_Reddit"}}};o(e.expand_image,"*",(function(e,t){var n=h[t.id];e.thumbnail.script_allow=PageExpandProjectScriptObject_Create(n.thumbnail.script_allow),e.thumbnail.script_insert=PageExpandProjectScriptObject_Create(n.thumbnail.script_insert),e.popup.script_allow=PageExpandProjectScriptObject_Create(n.popup.script_allow)})),r(e.expand_image,"*",(function(e,t){var n,a=h[t.id];PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.thumbnail.script_allow:"ExpandImage_ThumbnailScriptAllow_Default"),e.thumbnail.script_allow),e.thumbnail.script_allow=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.thumbnail.script_insert:"ExpandImage_ThumbnailScriptInsert_Default"),e.thumbnail.script_insert),e.thumbnail.script_insert=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.popup.script_allow:"ExpandImage_PopupScriptAllow_Default"),e.popup.script_allow),e.popup.script_allow=n})),l(e.expand_image,"*",(function(e){var t=e.thumbnail;t.scale_percent||(t.scale_percent=20),t.width_min||(t.width_min=50),t.width_max||(t.width_max=300)}));h={inline:{inline:{script_allow:"ExpandSound_InlineScriptAllow_Inline",script_insert:"ExpandSound_InlineScriptInsert_Inline"},audio_element:{script_allow:"ExpandSound_AudioElementScriptAllow_Inline"}},inline_from_assist:{inline:{script_allow:"ExpandSound_InlineScriptAllow_InlineFromAssist",script_insert:"ExpandSound_InlineScriptInsert_Inline"},audio_element:{script_allow:"ExpandSound_AudioElementScriptAllow_Inline"}}};o(e.expand_sound,"*",(function(e,t){var n=h[t.id];e.inline.script_allow=PageExpandProjectScriptObject_Create(n.inline.script_allow),e.inline.script_insert=PageExpandProjectScriptObject_Create(n.inline.script_insert),e.audio_element.script_allow=PageExpandProjectScriptObject_Create(n.audio_element.script_allow)})),r(e.expand_sound,"*",(function(e,t){var n,a=h[t.id];PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.inline.script_allow:"ExpandSound_InlineScriptAllow_Default"),e.inline.script_allow),e.inline.script_allow=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.inline.script_insert:"ExpandSound_InlineScriptInsert_Default"),e.inline.script_insert),e.inline.script_insert=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.audio_element.script_allow:"ExpandSound_AudioElementScriptAllow_Default"),e.audio_element.script_allow),e.audio_element.script_allow=n}));h={inline:{inline:{script_allow:"ExpandVideo_InlineScriptAllow_Inline",script_insert:"ExpandVideo_InlineScriptInsert_Inline"},video_element:{script_allow:"ExpandVideo_VideoElementScriptAllow_Inline"}},inline_from_assist:{inline:{script_allow:"ExpandVideo_InlineScriptAllow_InlineFromAssist",script_insert:"ExpandVideo_InlineScriptInsert_Inline"},video_element:{script_allow:"ExpandVideo_VideoElementScriptAllow_Inline"}}};o(e.expand_video,"*",(function(e,t){var n=h[t.id];e.inline.script_allow=PageExpandProjectScriptObject_Create(n.inline.script_allow),e.inline.script_insert=PageExpandProjectScriptObject_Create(n.inline.script_insert),e.video_element.script_allow=PageExpandProjectScriptObject_Create(n.video_element.script_allow)})),r(e.expand_video,"*",(function(e,t){var n,a=h[t.id];PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.inline.script_allow:"ExpandVideo_InlineScriptAllow_Default"),e.inline.script_allow),e.inline.script_allow=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.inline.script_insert:"ExpandVideo_InlineScriptInsert_Default"),e.inline.script_insert),e.inline.script_insert=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.video_element.script_allow:"ExpandVideo_VideoElementScriptAllow_Default"),e.video_element.script_allow),e.video_element.script_allow=n}));h={expand_pdf_inline:{script_allow:"ExpandIframe_InlineScriptAllow_ExpandPdfInline",script_insert:"ExpandIframe_InlineScriptInsert_ExpandPdfInline"},expand_flash_inline:{script_allow:"ExpandIframe_InlineScriptAllow_ExpandFlashInline",script_insert:"ExpandIframe_InlineScriptInsert_ExpandFlashInline"}};o(e.expand_iframe,"*",(function(e,t){var n=h[t.id];e.inline.script_allow=PageExpandProjectScriptObject_Create(n.script_allow),e.inline.script_insert=PageExpandProjectScriptObject_Create(n.script_insert)})),r(e.expand_iframe,"*",(function(e,t){var n,a=h[t.id];PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.script_allow:"ExpandIframe_InlineScriptAllow_Default"),e.inline.script_allow),e.inline.script_allow=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.script_insert:"ExpandIframe_InlineScriptInsert_Default"),e.inline.script_insert),e.inline.script_insert=n}));h={nicovideo_dictionary:{script_initialize:"ExpandBbs_ScriptInitialize_NicovideoDictionary",script_callback:"ExpandBbs_ScriptCallback_NicovideoDictionary"},reddit:{script_initialize:"ExpandBbs_ScriptInitialize",script_callback:"ExpandBbs_ScriptCallback_reddit"},"8chan":{script_initialize:"ExpandBbs_ScriptInitialize",script_callback:"ExpandBbs_ScriptCallback_8chan"},"4chan":{script_initialize:"ExpandBbs_ScriptInitialize",script_callback:"ExpandBbs_ScriptCallback_4chan"},"2chan":{script_initialize:"ExpandBbs_ScriptInitialize_2chan",script_callback:"ExpandBbs_ScriptCallback_2chan"},open2ch:{script_initialize:"ExpandBbs_ScriptInitialize_Open2ch",script_callback:"ExpandBbs_ScriptCallback_Open2ch"},mimizun:{script_initialize:"ExpandBbs_ScriptInitialize_Mimizun",script_callback:"ExpandBbs_ScriptCallback_Mimizun"},logsoku:{script_initialize:"ExpandBbs_ScriptInitialize_Logsoku",script_callback:"ExpandBbs_ScriptCallback_Logsoku"},"2ch_v6":{script_initialize:"ExpandBbs_ScriptInitialize_2ch_v6",script_callback:"ExpandBbs_ScriptCallback_2ch_v6"},"2ch":{script_initialize:"ExpandBbs_ScriptInitialize_2ch",script_callback:"ExpandBbs_ScriptCallback_2ch"}};o(e.expand_bbs,"*",(function(e,t){var n=h[t.id];e.script_initialize=PageExpandProjectScriptObject_Create(n.script_initialize),e.script_callback=PageExpandProjectScriptObject_Create(n.script_callback)})),r(e.expand_bbs,"*",(function(e,t){var n,a=h[t.id];PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.script_initialize:"ExpandBbs_ScriptInitialize_Default"),e.script_initialize),e.script_initialize=n,PageExpandProjectScriptObject_SetUserScript(n=PageExpandProjectScriptObject_Create(a?a.script_callback:"ExpandBbs_ScriptCallback_Default"),e.script_callback),e.script_callback=n}))}if(_())return e;e.version<30&&(e.version=30,(b=(w=a(e.replacement_to_link,"direct_link_image_search")).filter[8]).filter.asterisk.filter[0]="http://image.baidu.com/search/detail?*");if(_())return e;if(e.version<31&&(e.version=31),_())return e;if(e.version<32&&(e.version=32),_())return e;if(e.version<33&&(e.version=33,o(e.replacement_to_link,"direct_link_generic",(function(e){var t=e.filter;t[1].filter.asterisk.filter.splice(1,1),t.splice(9,0,{name:{standard:"Imgur",locales:{ja:"Imgur",en:"Imgur"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"(http|https)://imgur\\.com/[a-zA-Z0-9]+(|[?#].*)$",flags:{i:!0,g:!1}},{pattern:"^(http|https)://i\\.imgur\\.com/[a-zA-Z0-9]+\\.gifv(|[?#].*)$",flags:{i:!0,g:!1}}]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:PageExpandProjectScriptObject_Create("ReplacementToLink_DirectLinkGeneric_Imgur")})}))),_())return e;e.version<34&&(e.version=34,(b=(w=n(e.expand_bbs,"2chan",null)).preset.filter.regexp.filter).push({pattern:"^http://(futalog|imgbako)\\.com/[0-9]+\\.htm$",flags:{i:!0,g:!1}},{pattern:"^http://[^.]+\\.ftbucket\\.info/.*/cont/.*$",flags:{i:!0,g:!1}}),o(e.urlmap,"image_bbs",(function(e){var t=e.filter.asterisk.filter;t.push("*://futalog.com/*"),t.push("*://imgbako.com/*"),t.push("*://*.ftbucket.info/*")})));if(_())return e;if(e.version<35){e.version=35;var x,b=(w=a(e.replacement_to_referer,"direct_link_generic")).filter[0].filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://i[0-9]+[.]pixiv[.]net/.*[.](bmp|gif|jpg|jpeg|png)$",flags:{i:!0,g:!1}}]}};(w=a(e.urlmap,"pixiv")).replacement_to_referer={enable:!0,id:["direct_link_generic"]},(x=(m=e.download.download).save_file=new Object).type="simple",x.simple="url",x.detail="",(x=(e.download.batch_download=new Object).save_file=new Object).type="simple",x.simple="url",x.detail=""}if(_())return e;if(e.version<36&&(e.version=36),_())return e;e.version<37&&(e.version=37,o(e.expand_sound,"*",(function(e){var t=e.soundcloud;delete t.visible_player_flash,t.visible_player_html5=!0})),o(e.style_sheet,"*",(function(e){delete e.expand_sound.inline.soundcloud.player_flash})),(b=(w=n(e.expand_bbs,"2chan",null)).preset.filter.regexp.filter)[0].pattern="^(http|https)://[^.]+\\.2chan\\.net/.*/.*");if(_())return e;e.version<38&&(e.version=38,(b=(E=a(e.urlmap,"image_search")).filter.regexp.filter)[4]={pattern:"^[^:]+://image\\.search\\.yahoo\\.co\\.jp/search.*",flags:{i:!0,g:!1}});if(_())return e;if(e.version<39){e.version=39,o(e.replacement_to_link,"direct_link_image_search",(function(e,t){var n=e.filter;n.splice(8,3),n.splice(4,2),n[4].filter.regexp.filter[0]={pattern:"^[^:]+://yandex\\.(ru|com)/images/search[?].*img_url=.*$",flags:{i:!0,g:!1}},n[5].filter={type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^[^:]+://search\\.goo\\.ne\\.jp/imageDetail[?].*mode=7.*$",flags:{i:!0,g:!1}}]}}})),l(e.expand_video,"*",(function(e){delete e.ustream})),l(e.style_sheet,"*",(function(e){delete e.expand_video.inline.ustream})),(b=(E=a(e.urlmap,"search")).filter.asterisk.filter).splice(7,1),(b=(E=a(e.urlmap,"image_search")).filter.regexp.filter).splice(12,1),b.splice(6,1),b[4]={pattern:"^[^:]+://search\\.yahoo\\.co\\.jp/image/search.*",flags:{i:!0,g:!1}},b.splice(7,0,{pattern:"^[^:]+://[^.]+\\.aolsearch\\.com/image[?].*",flags:{i:!0,g:!1}}),b[9]={pattern:"^[^:]+://search\\.goo\\.ne\\.jp/web\\.jsp[?].*mode=7.*",flags:{i:!0,g:!1}},b[11]={pattern:"^[^:]+://search\\.naver\\.com/search\\.naver[?].*where=image.*",flags:{i:!0,g:!1}},(b=(E=a(e.urlmap,"realtime_search")).filter.asterisk.filter).splice(4,1),b.splice(1,5),b[0]="*://search.yahoo.co.jp/realtime/*",function(e,t,n){var a=s(e,t),i=e[a];e.splice(a,1),e.splice(n,0,i)}(e.expand_bbs,"2ch_v6",s(e.expand_bbs,"2ch"));var v,b=(w=a(e.expand_bbs,"2ch_v6")).filter.regexp.filter=[{pattern:"^(http|https)://[^.]+\\.2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},{pattern:"^(http|https)://[^.]+\\.bbspink\\.com/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}],y=(b=(w=a(e.expand_bbs,"2ch")).filter.regexp.filter).length;for(v=0;v<y;v++){(f=b[v]).pattern=f.pattern.replace("^http:","^(http|https):")}b.splice(3,1)}if(_())return e;if(e.version<40){var E;e.version=40,(E=a(e.urlmap,"pixiv")).filter.asterisk.filter=["*://*.pixiv.net/","*://*.pixiv.net/*"],(b=(w=a(e.expand_bbs,"2ch")).filter.regexp.filter).splice(0,1);var w,b=(w=a(e.expand_bbs,"2ch_v6")).filter.regexp.filter.push({pattern:"^(http|https)://[^.]+\\.2ch\\.net/[^/]+/kako/[0-9]+.*$",flags:{i:!0,g:!1}})}if(_())return e;e.version<41&&(e.version=41,(w=a(e.replacement_to_referer,"direct_link_generic")).filter[0].filter.regexp.filter.push({pattern:"^(http|https)://i[0-9]*[.]pximg[.]net/.*[.](bmp|gif|jpg|jpeg|png)$",flags:{i:!0,g:!1}}));if(_())return e;e.version<42&&(e.version=42,(w=a(e.urlmap,"bbs")).filter.asterisk.filter.splice(2,0,"*://5ch.net/*","*://*.5ch.net/*"),(b=(w=a(e.expand_bbs,"2ch_v6")).filter.regexp.filter)[0]={pattern:"^(http|https)://[^.]+\\.(2ch|5ch)\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},b[2]={pattern:"^(http|https)://[^.]+\\.(2ch|5ch)\\.net/[^/]+/kako/[0-9]+.*$",flags:{i:!0,g:!1}});if(_())return e;e.version<43&&(e.version=43,(b=(E=a(e.urlmap,"image_search")).filter.regexp.filter).splice(9,4),b.splice(6,2),b.splice(4,1),(b=(w=a(e.replacement_to_link,"direct_link_image_search")).filter).splice(5,1),b.splice(2,1),(b=(w=a(e.replacement_to_link,"direct_link_generic")).filter).splice(2,2),b.splice(2,0,{name:{standard:"pbs.twimg.com (query)",locales:{ja:"pbs.twimg.com (query)",en:"pbs.twimg.com (query)"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://pbs[.]twimg[.]com[/][^?]+[?].*format=.*$",flags:{i:!0,g:!1}}]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:PageExpandProjectScriptObject_Create("ReplacementToLink_DirectLinkGeneric_Twimg_Query")}),b.splice(3,0,{name:{standard:"pbs.twimg.com (colon)",locales:{ja:"pbs.twimg.com (colon)",en:"pbs.twimg.com (colon)"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://pbs[.]twimg[.]com[/][^.]+[.](jpg|png):.*$",flags:{i:!0,g:!1}}]}},enable_reflect_to_anchor:!1,enable_cache:!0,script:PageExpandProjectScriptObject_Create("ReplacementToLink_DirectLinkGeneric_Twimg_Coron")}),b.splice(4,4),b.splice(6,7),b.splice(11,1));if(_())return e;if(e.version<44&&(e.version=44,l(e.expand_video,"*",(function(e){delete e.fc2video,delete e.liveleak;var t=e.nicovideo;delete t.visible_thumbnail_video,delete t.visible_thumbnail_mylist,delete t.visible_thumbnail_user,delete t.visible_thumbnail_community,delete t.visible_thumbnail_live,delete t.visible_thumbnail_seiga})),i("expand_iframe","expand_flash_inline"),l(e.style_sheet,"*",(function(e){var t=e.expand_video.inline;delete t.fc2video,delete t.liveleak;var n=t.nicovideo;delete n.thumbnail_video,delete n.thumbnail_mylist,delete n.thumbnail_user,delete n.thumbnail_community,delete n.thumbnail_live,delete n.thumbnail_seiga}))),_())return e;e.version<45&&(e.version=45,(w=a(e.expand_bbs,"nicovideo_dictionary")).filter.regexp.filter=[{pattern:"^https://dic\\.nicovideo\\.jp/b/(a|c|i|l|u|v)/.+",flags:{i:!0,g:!1}},{pattern:"^https://dic\\.nicovideo\\.jp/(a|c|i|l|u|v)/.+",flags:{i:!0,g:!1}}]);if(_())return e;if(e.version<46&&(e.version=46,l(e.expand_image,"*",(function(e){delete e.load.src_type})),l(e.expand_video,"*",(function(e){var t=e.inline;t.width_max=720,t.height_max=480})),e.download.load.cache_for_media="default"),_())return e;if(e.version<47&&(e.version=47,l(e.expand_image,"*",(function(e){e.load.src_type="blob_url",e.load.decode="pre-decode"})),l(e.expand_sound,"*",(function(e){e.audio_element.src_type="url"})),l(e.expand_video,"*",(function(e){e.video_element.src_type="url"})),l(e.style_sheet,"simple",(function(e){e.expand_text.inline_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid;",e.expand_image.thumbnail_unsafe="margin:2px 0px 2px 0px; background-color:#FFF; border:2px #F00 solid;",e.expand_image.popup_unsafe="background-color:#FFF; border:2px #F00 solid;",e.expand_sound.inline.audio_element.audio_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid;",e.expand_video.inline.video_element.video_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid; width:720px; height:405px;",e.expand_iframe.inline_unsafe="margin:2px 0px 2px 0px; background-color:#FFF; border:2px #F00 solid;"})),l(e.style_sheet,"default",(function(e){e.expand_text.inline_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid; padding:4px; background-color:#FFF; display:block;",e.expand_image.thumbnail_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid; padding:1px; background-color:#FFF;",e.expand_image.popup_unsafe="margin:0px; border:2px #F00 solid; padding:1px; background-color:#FFF;",e.expand_sound.inline.audio_element.audio_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid; padding:1px; background-color:#FFF;",e.expand_video.inline.video_element.video_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid; background-color:#F00; width:720px; height:405px;",e.expand_iframe.inline_unsafe="margin:2px 0px 2px 0px; border:2px #F00 solid; padding:1px; background-color:#FFF;"})),l(e.urlmap,"*",(function(e){delete e.enable_unsecure,delete e.enable_mixed_content,e.mixed_passive_content="unsafe",e.mixed_active_content="safe"}))),_())return e;e.version<48&&(e.version=48,(b=(w=a(e.expand_bbs,"2ch_v6")).filter.regexp.filter)[0]={pattern:"^(http|https)://[^.]+\\.(2ch|5ch)\\.net/test/read\\.cgi/c/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}},(w=n(e.expand_bbs,"5ch_v8",null)).preset={name:{standard:"5ch.net (v.08)",locales:{ja:"５ちゃんねる掲示板（v.08）",en:"5ch.net (v.08)"}},filter:{type:"regexp",asterisk:{filter:[]},regexp:{filter:[{pattern:"^(http|https)://[^.]+\\.(2ch|5ch)\\.net/test/read\\.cgi/[^/]+/[0-9]+.*$",flags:{i:!0,g:!1}}]}},enable:!0,script_initialize:PageExpandProjectScriptObject_Create("ExpandBbs_ScriptInitialize_5ch_v8"),script_callback:PageExpandProjectScriptObject_Create("ExpandBbs_ScriptCallback_5ch_v8"),popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:75,y:90},time_wait_open:0,time_wait_close:250,style_sheet:"padding:20px 10px; margin:0px; border:1px solid #000; background:#FFF; overflow-y:auto; word-wrap:break-word; word-break:break-all; display:block;"}});return _(),e}function PresetScriptDictionary(){function e(e,n){t[e]=n}this.release=function(){t=null},this.getItem=function(e){return t[e]};var t=new Object;e("ReplacementToElement_DeleteBrTags",[function(e,t){var n=e.element;if("br"!=n.tagName.toLowerCase())return!1;for(var a=0,i=n.previousSibling;i;){var o=i.nodeType;if(1==o){if("br"!=i.tagName.toLowerCase())break;if(++a>=2){var r=new DocumentReviseScroll;r.executeRemoveElementBefore(n),DomNodeRemove(n),r.executeRemoveElementAfter(n);break}}else if(3==o&&!ElementGetTextContent(i).match(new RegExp("^[ \r\n\t　]*$")))break;i=i.previousSibling}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_MeiryoFont",[function(e,t){var n=e.element.style;return n&&(n.fontFamily="'メイリオ','Meiryo'"),!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistImageInAnchor",[function(e,t){var n=e.element;if(function(){if("IMG"==n.tagName)return!0;var e=ElementGetComputedStyle(n,null);return!(!e||0!=e.backgroundImage.indexOf("url("))}())for(;n;){if("A"==n.tagName)return t({url:n.href}),!0;n=n.parentNode}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistImageSearch",[function(e,t){var n=e.element;if("DIV"==n.tagName)try{if(n.getAttribute("data-ri")){var a=n.getElementsByTagName("IMG")[0];if(a){var i=document.createEvent("MouseEvent");return i.initMouseEvent("mousedown",!0,!1,document.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i),!0}}}catch(e){}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistTwitter",[function(e,t){var n=e.element;return!("IMG"!=n.tagName||!n.src.match(/(http|https)(:[/][/]pbs[.]twimg[.]com[/](media|card_img)[/][^?]+)[?].*format=/)||!function(){for(var e={"card.layoutLarge.media":1,tweetPhoto:1},t=n;t;){if(1==t.nodeType&&e[t.getAttribute("data-testid")])return!0;t=t.parentNode}return!1}())&&(t({url:n.src}),!0)},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistReddit",[function(e,t){var n=e.element;if("A"==n.tagName)for(var a=n;a;){if(1==a.nodeType&&a.className.match(new RegExp("(^| )usertext( |$)")))return t({url:n.href}),!0;a=a.parentNode}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistDeviantArt",[function(e,t){var n=e.element;if("IMG"==n.tagName||"tt-bookendh"==n.className||ElementGetClassName(n).search(new RegExp("tinythumb","i"))>=0)for(;n;){if("A"==n.tagName)return t({url:n.href}),!0;n=n.parentNode}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistPixiv",[function(e,t){var n=e.element;if("LI"!=n.tagName)return!1;var a=document.URL;if(a.indexOf("mode=manga")<0)return!1;var i=StringGetQuery(a);if(!i.illust_id)return!1;var o=n.getAttribute("data-position");if(!o)return!1;var r=n.getAttribute("data-tooltip");return!!r&&!!r.match(/^[0-9]+$/)&&(t({url:"http://www.pixiv.net/member_illust.php?mode=manga_big&illust_id="+i.illust_id+"&page="+o}),!0)},function(e,t){var n=e.element;if("DIV"==n.tagName&&ElementGetClassName(n).match(new RegExp("(^| )_layout-thumbnail( |$)")))for(;n;){if("A"==n.tagName)return t({url:n.href}),!0;n=n.parentNode}return!1},function(e,t){var n=e.element;if(function(){if(ElementGetClassName(n).indexOf("user-icon")>=0)return!1;if("IMG"==n.tagName)return!0;var e=ElementGetComputedStyle(n,null);return!(!e||0!=e.backgroundImage.indexOf("url("))}())for(;n&&"_layout-thumbnail"!=n.className;){if("A"==n.tagName)return t({url:n.href}),!0;n=n.parentNode}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_AssistNicoSeiga",[function(e,t){var n=e.element;if("IMG"==n.tagName||"item_info_container"==n.className)for(;n;){if("A"==n.tagName)return t({url:n.href}),!0;n=n.parentNode}return!1},function(e,t){return t({}),!0}]),e("ReplacementToElement_Default",[function(e,t){return e.element,t({}),!0}]),e("ReplacementToText_AlphanumericHalf",[function(e,t){var n=e.text_node,a=DomNodeGetNodeValue(n);return!!a&&(a=StringConvertFromSignFullToSignHalf(a=StringConvertFromNumericFullToNumericHalf(a=StringConvertFromAlphabeticFullToAlphabeticHalf(a))),DomNodeSetNodeValue(n,a=StringConvertFromKatakanaFullToKatakanaHalf(a)),!1)},function(e,t){return t({}),!0}]),e("ReplacementToText_VisualizeSpaceAndTab",[function(e,t){for(var n=e.text_node;n;){var a=DomNodeGetNodeValue(n);if(!a)return!1;if(a.match(/^( |　|\t|\n|\r)+$/))break;var i=new RegExp("( |　|\t)","i"),o=a.match(i);if(!o)break;DomNodeSetNodeValue(n,RegExp.leftContext);var r,l=DocumentCreateElement("pre");switch(l.style.display="inline",o[1]){case" ":l.style.backgroundColor="#f00";break;case"　":l.style.backgroundColor="#0f0";break;case"\t":l.style.backgroundColor="#00f"}l.style.opacity=.1,DomNodeInsertAfter(l,n),DomNodeSetCompletedReplacementToText(r=DocumentCreateText(o[1])),l.appendChild(r),DomNodeSetNodeValue(r=DocumentCreateText("text"),RegExp.rightContext),DomNodeInsertAfter(r,l),n=r}return!1},function(e,t){return t({}),!0}]),e("ReplacementToText_Default",[function(e,t){return e.text_node,t(),!0}]),e("ReplacementToAnchor_AutoDownloadAll",[function(e,t){var n=e.anchor_element.href;if(URL_Parser(n).protocol.match(/^(http|https|ftp):/i)||DataURL_Parser(n)){var a=new Downloader;a.setURL(n),a.setSaveAs(!1),a.setSilent(!0),a.setAllowSameRequest(!1),a.start()}return!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_AutoDownloadImage",[function(e,t){var n=e.anchor_element.href;if(function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()){var a=new Downloader;a.setURL(n),a.setSaveAs(!1),a.setSilent(!0),a.setAllowSameRequest(!1),a.start()}return!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_AddDownloadListAll",[function(e,t){var n=e.anchor_element.href;return!URL_Parser(n).protocol.match(/^(http|https|ftp):/i)&&!DataURL_Parser(n)||download_list_user.createItem().setURL(n),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_AddDownloadListImage",[function(e,t){var n=e.anchor_element.href;return function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&download_list_user.createItem().setURL(n),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DisablePopupImageSearch",[function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DisableEventFacebook",[function(e,t){var n=e.anchor_element,a=n.parentNode;return a&&ElementGetClassName(a).match(new RegExp("(^| )userContent( |$)","i"))&&(n.removeAttribute("onmouseover"),n.removeAttribute("onclick"),n.onmouseover=null,n.onclick=null),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DirectLinkTwitter",[function(e,t){var n=e.anchor_element,a=n.getAttribute("data-expanded-url");return a&&StringUrlMatchAsteriskWord(n.href,"*://t.co/*")&&(n.href=a),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DirectLinkFacebook",[function(e,t){var n=e.anchor_element,a=n.href;if(a.match(new RegExp("^(http|https)://[^\\.]+\\.facebook\\.com/l\\.php?","i"))){var i=StringGetQuery(a);i.u&&(n.href=unescape(i.u))}return!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DirectLinkRealtimeSearch",[function(e,t){var n=e.anchor_element,a=decodeURIComponent(n.href).match(new RegExp("^(http|https)://ord\\.yahoo\\.co\\.jp/o/realtime/.*RU=([0-9a-zA-Z._]+)"));if(a){var i=a[2],o=Base64_To_ArrayBuffer(i=(i=(i=i.replace(/[.]/g,"+")).replace(/[_]/g,"/")).replace(/[-]/g,"="));o&&(n.href=String_From_ArrayBuffer_As_UTF8(o))}return!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DirectLinkSearch",[function(e,t){var n,a=e.anchor_element;if((n=a.getAttribute("onmousedown")||(a.onmousedown?a.onmousedown.toString():"")||"").match(/return rwt\(this,/)||n.match(/return lswap\(this/)){a.onmousedown=null;var i=a.parentNode;i.addEventListener&&i.addEventListener("mousedown",(function(e){e.stopPropagation()}),!0)}return!1},function(e,t){var n=e.anchor_element,a=n.href,i=new RegExp("^(http|https)://www\\.google\\.(com|co\\.jp)/url[?].*","i");if(a.match(i)){var o=StringGetQuery(a);o.url&&(n.href=decodeURIComponent(o.url))}return!1},function(e,t){var n=e.anchor_element,a=n.href,i=new RegExp("^(http|https)://search[.]yahoo[.]co[.]jp/r/.*_ylt=.*[/][*][*](.*)$","i");return a.match(i)&&(n.href=decodeURIComponent(RegExp.$2)),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DirectLinkBbs",[function(e,t){var n,a,i=e.anchor_element,o=i.href,r=[{search:"^(http|https)://ime\\.nu/",replace:""},{search:"^(http|https)://jump\\.(2ch|5ch)\\.net/[?]",replace:""},{search:"^(http|https)://2ch\\.io/",replace:""},{search:"^(http|https)://machi\\.to/bbs/link\\.cgi[?]URL=",replace:""},{search:"^(http|https)://(www\\.|)pinktower\\.com/([?]|)",replace:""},{search:"^(http|https)://jbbs\\.shitaraba\\.net/bbs/link\\.cgi[?]url=",replace:"",decode_uri:!0},{search:"^(http|https)://l\\.moapi\\.net/",replace:""}],l=r.length,s=new RegExp("^(http|https|ftp)://");for(a=0;a<l;a++){var c=r[a];if(n=new RegExp(c.search,"i"),o.match(n)){o=o.replace(n,c.replace),c.decode_uri&&(o=decodeURIComponent(o)),o.match(s)||(o="http://"+o),i.href=o;break}}return!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_DisplayUrlInTooltip",[function(e,t){var n=e.anchor_element,a=e.event_dispatcher;function i(){n.title=n.href}var o=a.createEventHandler("release");o.setFunction((function(){r&&(r.release(),r=null),o&&(o.release(),o=null)}));var r=a.createEventHandler("anchor_href_change");return r.setFunction(i),i(),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_AttachSnsCounter",[function(e,t){var n=e.anchor_element,a=n.href,i=new Array,o=[function(){var e=new Loader;e.onerror=l,e.onload=function(e){try{var t=JsonParse(e).count;t&&i.push(s({label:"t",value:t,tooltip:"twitter Retweet",color:"#fff",background:"#33CCFF",borderColor:"#33CCFF"}))}catch(e){}r()},e.setURL("http://urls.api.twitter.com/1/urls/count.json?url="+a),e.loadText()},function(){var e=new Loader;e.onerror=l,e.onload=function(e){try{var t=JsonParse(e)[0].total_count;t&&i.push(s({label:"f",value:t,tooltip:"Facebook Like",color:"#fff",background:"#3B5999",borderColor:"#233774"}))}catch(e){}r()};var t='SELECT total_count FROM link_stat WHERE url="'+a+'"';t=encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+"),e.setURL("https://api.facebook.com/method/fql.query?format=json&query="+t),e.loadText()},function(){var e=new Loader;e.onerror=l,e.onload=function(e){if(e.match(/window\.__SSR = [{]c: ([0-9]+)/i)){var t=parseInt(RegExp.$1);t&&i.push(s({label:"g+",value:t,tooltip:"Google +1",color:"#fff",background:"#CD4131",borderColor:"#A5281A"}))}r()},e.setURL("https://plusone.google.com/u/0/_/+1/fastbutton?count=true&url="+a),e.loadText()},function(){var e=new Loader;e.onerror=l,e.onload=function(e){try{e&&i.push(s({label:"B!",value:e,tooltip:"Hatena Bookmark",color:"#fff",background:"#2B65A9",borderColor:"#2B65A9"}))}catch(e){}r()},e.setURL("http://api.b.st-hatena.com/entry.count?url="+escape(a)),e.loadText()},function(){var e=new Loader;e.onerror=l,e.onload=function(e){try{var t=JsonParse(e.match(/\((.*)\)/i)[1]).count;t&&i.push(s({label:"Pi",value:t,tooltip:"Pinterest Pin Count",color:"#fff",background:"#DF2532",borderColor:"#8C1B22"}))}catch(e){}r()},e.setURL("http://widgets.pinterest.com/v1/urls/count.json?source=6&url="+encodeURIComponent(a)),e.loadText()},function(){var e=new Loader;e.onerror=l,e.onload=function(e){try{var t=JsonParse(e).data.children[0].data.score;t&&i.push(s({label:"r",value:t,tooltip:"reddit Score",color:"#30659A",background:"#C7DEF7",borderColor:"#C7DEF7"}))}catch(e){}r()},e.setURL("http://buttons.reddit.com/button_info.json?url="+encodeURIComponent(a)),e.loadText()},function(){var e=new Loader;e.onerror=l,e.onload=function(e){try{var t=JsonParse(e).result.views;t&&i.push(s({label:"SU",value:t,tooltip:"StumbleUpon Views",color:"#fff",background:"#E6492E",borderColor:"#E6492E"}))}catch(e){}r()},e.setURL("http://www.stumbleupon.com/services/1.01/badge.getinfo?url="+encodeURIComponent(a)),e.loadText()},function(){var e=i.length;if(e){var t,a=DocumentCreateElement("span");for(ElementSetStyle(a,"all:initial; line-height:1.0;"),t=0;t<e;t++)a.appendChild(i[t]);var o=function(e){DomNodeRemove(a)};a.addEventListener?a.addEventListener("click",o,!0):a.attachEvent&&a.attachEvent("onclick",o),DomNodeInsertAfter(a,n)}}];function r(){var e=o.shift();e&&e()}function l(){r()}function s(e){var t=DocumentCreateElement("table"),n=DocumentCreateElement("tbody");t.appendChild(n);var a,i=DocumentCreateElement("tr"),o=DocumentCreateElement("td"),r=DocumentCreateElement("td");return n.appendChild(i),i.appendChild(o),i.appendChild(r),o.appendChild(DocumentCreateText(e.label)),r.appendChild(DocumentCreateText(e.value)),t.cellspacing="0",(a=t.style).cssText="border:1px solid #888; border-spacing:0; margin;0; margin-right:2px; padding:0; line-height:1.0; border-radius:2px; display:inline-block; font-size:14px; width:auto; heigh:auto;",e.tooltip&&(t.title=e.tooltip),e.borderColor&&(a.borderColor=e.borderColor),(a=i.style).cssText="margin:0; padding:0; width:auto; height:auto;",(a=o.style).cssText="margin:0; padding:1px 2px; background:#fff; text-align:center; width:auto; height:auto; color:#000;",e.color&&(a.color=e.color),e.background&&(a.background=e.background),(a=r.style).cssText="padding:1px 2px; background:#fff; text-align:center; width:auto; height:auto;",t}return a.match(new RegExp("^(http|https)://","i"))&&r(),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_NoReferrer",[function(e,t){var n=e.anchor_element;return n.rel.match(/noreferrer/i)||(n.rel?n.rel+=" noreferrer":n.rel="noreferrer"),!1},function(e,t){return t({}),!0}]),e("ReplacementToAnchor_Default",[function(e,t){return e.anchor_element,e.event_dispatcher,t(),!0}]),e("ReplacementToLink_DirectLinkGeneric_OgpOgImage",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){var n=e.match(new RegExp('<meta[^>]+?(property|name)[ \n\r\t]*=[ \n\r\t]*"og:image"[^>]*>',"i"));n&&(n=n[0].match(new RegExp('content[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i")))?t({result:!0,url:n[1],content_type:["image"]}):t({result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_OgpTwitter",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){if(e.match(new RegExp('<meta[ \n\r\t]+?name[ \n\r\t]*?=[ \n\r\t]*?"twitter:card"[ \n\r\t]+?content[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i")))switch(RegExp.$1){case"player":if(e.match(new RegExp('<meta[ \n\r\t]+?name[ \n\r\t]*?=[ \n\r\t]*?"twitter:player"[ \n\r\t]+?content[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i"))){var n=RegExp.$1.replace(/&amp;/g,"&");return n=n.replace(/&amp;/g,"&"),void t({result:!0,url:n})}case"photo":case"summary":if(e.match(new RegExp('<meta[ \n\r\t]+?name[ \n\r\t]*?=[ \n\r\t]*?"twitter:image"[ \n\r\t]+?content[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i"))){var a=RegExp.$1.replace(/&amp;/g,"&");return a=a.replace(/&amp;/g,"&"),void t({result:!0,url:a,content_type:["image"]})}}t({result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_Twimg_Query",[function(e,t){var n=e.anchor_element.href,a=n.match(/(http|https)(:[/][/]pbs[.]twimg[.]com[/])([^/]+)([/][^?]+)[?].*format=/);if(a){var i=StringGetQuery(n),o=a[1]+a[2]+a[3]+a[4];"media"==a[3]?o+="."+i.format+":orig":o+="?format="+i.format+"&name=orig",t({result:!0,url:o,content_type:["image"]})}return!0}]),e("ReplacementToLink_DirectLinkGeneric_Twimg_Coron",[function(e,t){var n=e.anchor_element.href.match(/(http|https)(:[/][/]pbs[.]twimg[.]com[/][^.]+)[.](jpg|png)[:]/);return n&&t({result:!0,url:n[1]+n[2]+"."+n[3]+":orig",content_type:["image"]}),!0}]),e("ReplacementToLink_DirectLinkGeneric_Flickr",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){var n,a;n||(a=e.match(new RegExp('<img[^>]+class="[^"]*main-photo[^"]*"',"i")))&&(a=a[0].match(new RegExp('src[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i")))&&(n=a[1]),n||(a=e.match(new RegExp('<meta[^>]+?(property|name)[ \n\r\t]*=[ \n\r\t]*"og:image"[^>]*>',"i")))&&(a=a[0].match(new RegExp('content[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i")))&&(n=a[1]),t(n?{result:!0,url:n,content_type:["image"]}:{result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_Imgur",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){var n,a="",i=new Array;a||(n=e.match(new RegExp('<meta[ \n\r\t]+?name[ \n\r\t]*?=[ \n\r\t]*?"twitter:player"[ \n\r\t]+?content[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i")))&&(n=n[1].match(new RegExp("(.*?\\.gif)v","i")))&&(a=n[1],i.push("image")),a||(n=e.match(new RegExp('<meta[ \n\r\t]+?name[ \n\r\t]*?=[ \n\r\t]*?"twitter:stream"[ \n\r\t]+?content[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i")))&&(a=n[1]),a||(n=e.match(new RegExp('<link[ \n\r\t]+?rel[ \n\r\t]*?=[ \n\r\t]*?"image_src"[ \n\r\t]+?href[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i")))&&(a=n[1],i.push("image")),a||(n=e.match(new RegExp('<meta[ \n\r\t]+?name[ \n\r\t]*?=[ \n\r\t]*?"twitter:image"[ \n\r\t]+?content[ \n\r\t]*?=[ \n\r\t]*?"([^"]+?)"',"i")))&&(a=n[1],i.push("image")),a&&t({result:!0,url:a,content_type:i}),t({result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_DeviantArt",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){var n,a=e.match(new RegExp('<meta[^>]+?(property|name)[ \n\r\t]*=[ \n\r\t]*"og:image"[^>]*>',"i"));if(a&&(a=a[0].match(new RegExp('content[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i")))&&(n=a[1]),n)return(a=n.match(new RegExp("^(.*)/PRE/(.*)$","i")))&&(n=a[1]+"/"+a[2]),void t({result:!0,url:n,content_type:["image"]});t({result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_NicoSeigaIllust",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){function a(){var n,a=e.match(new RegExp('<meta[^>]+?(property|name)[ \n\r\t]*=[ \n\r\t]*"og:image"[^>]*>',"i"));a&&(a=a[0].match(new RegExp('content[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i")))&&(n=a[1]),t(n?{result:!0,url:n,content_type:["image"]}:{result:!1})}if(e.search(new RegExp('class[ \n\r\t]*=[ \n\r\t]*"siteHeaderLogin"',"i"))>=0)a();else{var i="";n.href.match(new RegExp("im([0-9]+)","i"))&&(i=RegExp.$1),n.href.match(new RegExp("id=([0-9]+)","i"))&&(i=RegExp.$1);var o="http://seiga.nicovideo.jp/image/source/"+i,r=new Loader;r.onload=function(e){var n=(i=e).match(new RegExp("((http|https)://lohas\\.nicoseiga\\.jp/)o(/[a-z0-9]+/[0-9]+/[0-9]+)","i"));if(n)var i=n[1]+"priv"+n[3];i?t({result:!0,url:i,content_type:["image"]}):a()},r.onerror=function(){a()},r.setMethod("GET"),r.setURL(o),r.loadFinalURL()}},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_NicoSeigaIllustDirectLink",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){var n=e,a=n.match(new RegExp("((http|https)://lohas\\.nicoseiga\\.jp/)o(/[a-z0-9]+/[0-9]+/[0-9]+)","i"));a&&(n=a[1]+"priv"+a[3]),t(n?{result:!0,url:n,content_type:["image"]}:{result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadFinalURL(),!0}]),e("ReplacementToLink_DirectLinkGeneric_NicoSeigaManga",[function(e,t){var n=e.anchor_element,a=new Loader;return a.onload=function(e){var n,a;n||(a=e.match(new RegExp('data-original[ \n\r\t]*=[ \n\r\t]*"((http|https)://lohas.nicoseiga.jp/thumb/[^"]*)"',"i")))&&(n=a[1]),n||(a=e.match(new RegExp('<img[^>]+?class[ \n\r\t]*=[ \n\r\t]*"thumb"[^>]*>',"i")))&&(a=a[0].match(new RegExp('src[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i")))&&(n=a[1]),t(n?{result:!0,url:n,content_type:["image"]}:{result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0}]),e("ReplacementToLink_DirectLinkGeneric_PixivNet",[function(e,t){var n=e.anchor_element.href,a=StringGetQuery(n);(i=n.match(new RegExp("(http|https)(://)([^\\.]+)(\\.pixiv\\.net/.*)","i")))&&(n=i[1]+i[2]+"www"+i[4]);var i,o=new Loader;return"manga_big"==a.mode&&a.page?o.onload=function(e){var n;(n=e.match(new RegExp('<body><img[^>]+src="([^"]+)"',"i")))?t({result:!0,url:n[1],content_type:["image"]}):(n=e.match(new RegExp("pixiv\\.context\\.images\\["+a.page+"\\] = '([^']+)';","i")))&&(n=n[1].match("(.*)(_p[0-9]+\\.[a-z]+)$","i"))?t({result:!0,url:n[1]+"_big"+n[2],content_type:["image"]}):t({result:!1})}:((i=n.match(new RegExp("mode=([a-z]+)","i")))&&(n=RegExp.leftContext+"mode=medium"+RegExp.rightContext),o.onload=function(e){var n,a,i,o;if(n||(r=e.match(new RegExp('<img[^>]+class="original-image"[^>]*>',"i")))&&(r=r[0].match(new RegExp('src="([^"]+)"',"i")))&&(n=r[1]),!n&&(r=e.match(new RegExp('<div class="(img-container|front-centered|works_display)">.*',"i")))&&(r=r[0].match(new RegExp('<a[^>]+href="([^"]+)".*</a>',"i")))){var r,l=r[1];if((r=r[0].match(new RegExp('<img src="((http|https)://i[0-9]+\\.pixiv\\.net[^"]*)"',"i")))&&(n=r[1],-1==l.indexOf("mode=manga")&&((r=n.match(new RegExp("^(.*)_m(\\.[a-z]+)$","i")))&&(n=r[1]+r[2]),r=n.match(new RegExp("^(http://[^/]+/).*(/img/.*)_master1200(\\.[a-z]+)$","i"))))){var s=r[1]+"img-original"+r[2]+".";return a=["gif","png","jpg"],i=function(e){t({result:!0,url:e,content_type:["image"]})},o=function(){var e=a.pop();if(e){var t=s+e,r=new Loader;r.onload=function(e){var n=e["Content-Type"];n||(n=""),n.match("image")?i(t):o()},r.onerror=function(){o()},r.setMethod("GET"),r.setURL(t),r.loadResponseHeader()}else i(n)},void o()}}t(n?{result:!0,url:n,content_type:["image"]}:{result:!1})}),o.onerror=function(){t({result:!1})},o.setMethod("GET"),o.setURL(n),o.loadText(),!0}]),e("ReplacementToLink_DirectLinkImageSearch_Google",[function(e,t){var n=e.anchor_element.href,a=new RegExp("^(http|https)://.*?\\.google\\.(at|be|ca|ch|de|es|fr|it|nl|no|pl|ru|se|co\\.(id|in|jp|th|uk|za)|com|com\\.(ar|au|br|mx|sa|tr|tw))/imgres[?].*","i");if(n.match(a)){var i=StringGetQuery(n);if(i.imgurl)try{return t({result:!0,url:decodeURIComponent(decodeURIComponent(i.imgurl)),content_type:["image"]}),!0}catch(e){}}return!1},function(e,t){return t({result:!1}),!0}]),e("ReplacementToLink_DirectLinkImageSearch_YahooImageSearch",[function(e,t){var n=e.anchor_element.href,a=new RegExp("(image|images)\\.search\\.yahoo\\.com/images/view;.*","i");if(n.match(a)){var i=StringGetQuery(n);if(i.imgurl)return t({result:!0,url:"http://"+unescape(i.imgurl),content_type:["image"]}),!0}return!1},function(e,t){return t({result:!1}),!0}]),e("ReplacementToLink_DirectLinkImageSearch_Bing",[function(e,t){var n=e.anchor_element,a=n.href,i=new RegExp("^(http|https)://www\\.bing\\.com/images/search[?].*","i");if(a.match(i)){var o=function(){try{var e=JsonParse(n.getAttribute("m")||"");if(e.murl)return e.murl}catch(e){}return null}();if(o)return t({result:!0,url:o,content_type:["image"]}),!0}return!1},function(e,t){var n=e.anchor_element;if("dg_u"!=n.parentNode.className)return!1;var a=new Loader;return a.onload=function(e){e.match(new RegExp('<a[ ]+?id="m_fsi"[ ]+?href="(.*?)"',"i"))?t({result:!0,url:RegExp.$1,content_type:["image"]}):t({result:!1})},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n.href),a.loadText(),!0},function(e,t){return t({result:!1}),!0}]),e("ReplacementToLink_DirectLinkImageSearch_Yandex",[function(e,t){var n=StringGetQuery(e.anchor_element.href);if(n.img_url){var a=decodeURIComponent(n.img_url);return 0!=a.indexOf("http")&&(a="http://"+a),t({result:!0,url:a,content_type:["image"]}),!0}return!1},function(e,t){return t({result:!1}),!0}]),e("ReplacementToLink_DirectLinkWikipedia",[function(e,t){var n,a=e.anchor_element;if((n=URL_Parser(a.href)).name.match(/:/)&&n.ext.match(/^(bmp|gif|jpg|jpeg|png|svg|webp|avif)$/i)){var i=new Loader;i.onload=function(e){var n=e.match(/<meta[^>]+?property="og:image"[^>]+?content="([^">]+)"[^>]*>[^">]/i);if(n){var a=n[1];(n=a.match(/([/][/]upload[.]wikimedia[.]org[/]wikipedia[/][^/]+[/])thumb[/]([^/]+[/][^/]+[/].*?)[/]/i))&&(a="https:"+n[1]+n[2]),t({result:!0,url:a,content_type:["image"]})}t({result:!1})},i.onerror=function(){t({result:!1})},i.setMethod("GET"),i.setURL(a.href),i.loadText()}return!0}]),e("ReplacementToLink_DirectLinkFindImageInHTML_ImageOfTheLargestByte",[function(e,t){var n=e.anchor_element.href,a=new Loader;return a.onload=function(e){e["Content-Type"]&&e["Content-Type"].match("text")||t({result:!1});var a=new Loader;a.onload=function(e){var a,i=new Array,o=e.match(new RegExp('<base[^>]+href[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"i"));o&&(a=o[0]),e.replace(new RegExp('<img[^>]+src[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"ig"),(function(e,t,o,r){i.push(StringUrl_To_Absolute(t,n,a))}));var r=new RegExp("\\.(bmp|gif|jpg|jpe|jpeg|png)([#?]|$)","i");e.replace(new RegExp('<a[^>]+href[ \n\r\t]*=[ \n\r\t]*"([^"]+?)"',"ig"),(function(e,t,o,l){t.match(r)&&i.push(StringUrl_To_Absolute(t,n,a))}));var l=new Array;!function e(){var n=i.pop();if(n)if(n.match(new RegExp("^(http|https)://","i"))){var a=new Loader;a.onload=function(t){!t["Content-Type"]||!t["Content-Length"]||!t["Content-Type"].match("image")||l.push({url:n,byte_size:parseInt(t["Content-Length"])}),e()},a.onerror=function(){e()},a.setURL(n),a.loadResponseHeader()}else e();else{var o,r,s=0,c=l.length;for(r=0;r<c;r++){var _=l[r];_.byte_size>s&&(s=_.byte_size,o=_)}t(o?{result:!0,url:o.url,content_type:["image"]}:{result:!1})}}()},a.onerror=function(){t({result:!1})},a.setMethod("GET"),a.setURL(n),a.loadText()},a.onerror=function(){t({result:!1})},a.setURL(n),a.loadResponseHeader(),!0},function(e,t){return t({result:!1}),!0}]),e("ReplacementToLink_Default",[function(e,t){return e.anchor_element,t({result:!1}),!0}]),e("MakeLinkToText_Simple",[function(e,t){var n,a=e.text_node,i=[["https://","https://"],["http://","http://"],["ftp://","ftp://"]],o=i.length,r="(",l=new Object;for(n=0;n<o;n++){var s=i[n];l[s[0]]=s[1],r+=s[0],n<o-1&&(r+="|")}r+=")";var c,_,u,d={WBR:1},p={SPAN:1,FONT:1,TT:1,EM:1,B:1,S:1,I:1,BIG:1,SMALL:1},m="[-a-zA-Z0-9#%_.!~*';/?:@&=+$,]",g=new RegExp(r+"("+m+"*)","ig"),f=new RegExp("^("+m+"*)","i"),h=new RegExp("^(http|https|ftp)://("+m+"{4,})$",""),x=new RegExp("\\.\\.\\.$",""),b=DomNodeGetNodeValue(a),v=0,y=0,E=b.length;return b.replace(g,(function(e,t,i,r,s){v=r,_=t.length,u=i.length;var m=l[t]+b.substr(v+_,u);if(E>v+_+u)m.match(h)&&!m.match(x)&&(a.nodeValue=b.substring(y,v),(S=DocumentCreateElement("a")).href=m,ElementSetTextContent(S,t+i),DomNode_InsertAfter(a,S),y=v+=_+u,DomNode_InsertAfter(S,a=DocumentCreateText(b.substring(v))));else{var g=new Array,w=b.substring(y,v);g.push(DocumentCreateText(t+i));for(var S,C=a.nextSibling;C;){if(1==C.nodeType){var A=!1,k=C.tagName;if(d[k])g.push(C),A=!0;else if(p[k]){var I=C.childNodes;for(o=I.length,n=0;n<o&&(3==(D=I[n]).nodeType||1==D.nodeType&&d[D.tagName]);n++);n>=o&&(b=ElementGetTextContent(C),(c=b.match(f))&&(RegExp.rightContext||(m+=b.substr(0,c[1].length),g.push(C),A=!0)))}if(!A)break}else if(3==C.nodeType&&(b=DomNodeGetNodeValue(C),c=b.match(f))){if(m+=b.substr(0,c[1].length),RegExp.rightContext){var D;m.match(h)&&!m.match(x)&&(C.nodeValue=b.substr(0,c[1].length),g.push(C),DomNode_InsertAfter(C,D=DocumentCreateText(b.substring(c[1].length))));break}g.push(C)}C=C.nextSibling}if(m.match(h)&&!m.match(x))for(a.nodeValue=w,(S=DocumentCreateElement("a")).href=m,DomNode_InsertAfter(a,S),o=g.length,n=0;n<o;n++)g[n]&&S.appendChild(g[n])}})),!1},function(e,t){return t({}),!0}]),e("MakeLinkToText_Detail",[function(e,t){var n,a=e.text_node,i=[["https://","https://"],["http://","http://"],["ttps://","https://"],["ttp://","http://"],["ftp://","ftp://"],["tps://","https://"]],o=i.length,r="(",l=new Object;for(n=0;n<o;n++){var s=i[n];l[s[0]]=s[1],r+=s[0],n<o-1&&(r+="|")}r+=")";var c={WBR:1},_={SPAN:1,FONT:1,TT:1,EM:1,B:1,S:1,I:1,BIG:1,SMALL:1},u="[-a-zA-Z0-9#%_.!~*';/?:@&=+$,]",d=new RegExp(r+"("+u+"*)","ig"),p=new RegExp("^("+u+"*)","i"),m=new RegExp("^(http|https|ftp)://("+u+"{4,})$",""),g=new RegExp("\\.\\.\\.$",""),f=DomNodeGetNodeValue(a),h=StringConvertFromAlphabeticFullToAlphabeticHalf(f);h=StringConvertFromSignFullToSignHalf(h=StringConvertFromNumericFullToNumericHalf(h));var x,b,v,y=0,E=0,w=h.length;return h.replace(d,(function(e,t,i,r,s){y=r,b=t.length,v=i.length;var u=l[t]+h.substr(y+b,v);if(w>y+b+v)u.match(m)&&!u.match(g)&&(a.nodeValue=f.substring(E,y),(C=DocumentCreateElement("a")).href=u,ElementSetTextContent(C,f.substr(y,b+v)),DomNode_InsertAfter(a,C),E=y+=b+v,DomNode_InsertAfter(C,a=DocumentCreateText(f.substring(y))));else{var d=new Array,S=f.substring(E,y);d.push(DocumentCreateText(f.substr(y,b+v)));for(var C,A=a.nextSibling;A;){if(1==A.nodeType){var k=!1,I=A.tagName;if(c[I])d.push(A),k=!0;else if(_[I]){var D=A.childNodes;for(o=D.length,n=0;n<o&&(3==(T=D[n]).nodeType||1==T.nodeType&&c[T.tagName]);n++);n>=o&&(f=ElementGetTextContent(A),h=StringConvertFromSignFullToSignHalf(h=StringConvertFromNumericFullToNumericHalf(h=StringConvertFromAlphabeticFullToAlphabeticHalf(f))),(x=h.match(p))&&(RegExp.rightContext||(u+=h.substr(0,x[1].length),d.push(A),k=!0)))}if(!k)break}else if(3==A.nodeType&&(f=DomNodeGetNodeValue(A),h=StringConvertFromSignFullToSignHalf(h=StringConvertFromNumericFullToNumericHalf(h=StringConvertFromAlphabeticFullToAlphabeticHalf(f))),x=h.match(p))){if(u+=h.substr(0,x[1].length),RegExp.rightContext){var T;u.match(m)&&!u.match(g)&&(A.nodeValue=f.substr(0,x[1].length),d.push(A),DomNode_InsertAfter(A,T=DocumentCreateText(f.substring(x[1].length))));break}d.push(A)}A=A.nextSibling}if(u.match(m)&&!u.match(g))for(a.nodeValue=S,(C=DocumentCreateElement("a")).href=u,DomNode_InsertAfter(a,C),o=d.length,n=0;n<o;n++)d[n]&&C.appendChild(d[n])}})),!1},function(e,t){return t({}),!0}]),e("MakeLinkToText_Default",[function(e,t){return e.text_node,t(),!0}]),e("ExpandText_InlineScriptAllow_Inline",[function(e,t){var n=e.anchor_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){e.anchor_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(txt)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^text[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandText_InlineScriptInsert_Inline",[function(e,t){var n=e.anchor_element,a=e.textarea_element,i=e.event_dispatcher,o=a.style,r=400,l=new DocumentReviseScroll;l.executeAttachElementBefore(a);var s=DocumentCreateElement("div"),c=new ElementAnalyzeManager(s,!0);ElementSetStyle(s,"height:0px;"),DomNode_InsertAfter(n,s),DomNode_InsertAfter(s,a);var _=DocumentCreateElement("div"),u=new ElementAnalyzeManager(_,!0);ElementSetStyle(_,"height:0px;"),DomNode_InsertAfter(a,_);var d=ElementGetBoundingClientRect(a),p=d.bottom-d.top;o.width="0px",o.height="0px";var m=(d=ElementGetBoundingClientRect(a)).right-d.left,g=d.bottom-d.top,f=ElementGetClientWidth(a.parentNode)-m;f<(r-=m)&&(r=f),o.width=r+"px",o.height=p-g+"px",l.executeAttachElementAfter(a);var h=i.createEventHandler("release");return h.setFunction((function(e){c&&(c.release(),c=null),u&&(u.release(),u=null),h&&(h.release(),h=null)})),t(),!1}]),e("ExpandText_InlineScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandText_InlineScriptInsert_Default",[function(e,t){return e.current_element,e.textarea_element,e.event_dispatcher,t(),!0}]),e("ExpandImage_ThumbnailScriptInsert",[function(e,t){var n,a,i=e.current_element,o=e.image_element,r=e.event_dispatcher,l=o.style;function s(){DomNodeRemove(o),g&&(g.release(),g=null),h&&(h.release(),h=null),C&&(C.release(),C=null)}var c=new DocumentReviseScroll;c.executeAttachElementBefore(o);var _=ImageGetNaturalSize(o),u=project.getWidthMinThumbnailImage(),d=project.getWidthMaxThumbnailImage(),p=project.getScalePercentThumbnailImage();n=_.width/100*p,a=_.height/100*p;var m=DocumentCreateElement("div"),g=new ElementAnalyzeManager(m,!0);ElementSetStyle(m,"height:0px;"),DomNode_InsertAfter(i,m),DomNode_InsertAfter(m,o);var f=DocumentCreateElement("div"),h=new ElementAnalyzeManager(f,!0);ElementSetStyle(f,"height:0px"),DomNode_InsertAfter(o,f),l.width="0px",l.height="0px";var x=ElementGetBoundingClientRect(o),b=x.right-x.left,v=x.bottom-x.top,y=ElementGetClientWidth(o.parentNode);d>y&&(d=y),a-=v;var E=u-b;E>(n-=b)&&(a*=E/n,n=E);var w=u-v;function S(e){e.ctrlKey?(l.width=_.width+"px",l.height=_.height+"px"):s()}w>a&&(n*=w/a,a=w),(E=d-b)<n&&(a*=E/n,n=E),(w=d-v)<a&&(n*=w/a,a=w),l.width=n+"px",l.height=a+"px",c.executeAttachElementAfter(o),o.addEventListener?o.addEventListener("click",S,!0):o.attachEvent&&o.attachEvent("onclick",S);var C=r.createEventHandler("release");return C.setFunction(s),t(),!1}]),e("ExpandImage_ThumbnailScriptAllow_PopupAll",[function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_PopupAll",[function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_PopupIncludeImage",[function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_PopupIncludeImage",[function(e,t){var n=e.current_element;return!function(){if((e=ElementGetElementsByTagName(n,"img")).length)return!0;var e,t,a=(e=ElementGetElementsByTagName(n,"*")).length;for(t=0;t<a;t++){var i=ElementGetComputedStyle(e[t],null);if(i&&"none"!=i.backgroundImage)return!0}return!1}()&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_PopupImageInAnchor",[function(e,t){return e.current_element,!e.is_overridden_url&&(t({result:!1}),!0)},function(e,t){var n=e.current_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_PopupImageInAnchor",[function(e,t){return e.current_element,!e.is_overridden_url&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_ThumbnailAll",[function(e,t){var n=e.current_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_ThumbnailAll",[function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_ThumbnailNotIncludeImage",[function(e,t){var n=e.current_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){var n=e.current_element;return!function(){if((e=ElementGetElementsByTagName(n,"img")).length)return!1;var e,t,a=(e=ElementGetElementsByTagName(n,"*")).length;for(t=0;t<a;t++){var i=ElementGetComputedStyle(e[t],null);if(i&&"none"!=i.backgroundImage)return!1}return!!n.childNodes.length}()&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_ThumbnailNotIncludeImage",[function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_ImageBbs",[function(e,t){var n=e.anchor_element.parentNode;if(n){if("BLOCKQUOTE"==n.tagName)return!1;if("body"==n.className)return!1}return t({result:!1}),!0},function(e,t){var n=e.anchor_element,a=n.parentNode;return(a&&ElementGetClientWidth(a)<50||ElementGetElementsByTagName(n,"img").length>0||0==n.childNodes.length)&&(t({result:!1}),!0)},function(e,t){e.anchor_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.anchor_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_ImageBbs",[function(e,t){var n=ElementGetElementsByTagName(e.anchor_element,"IMG");return(1!=n.length||"extButton"==n[0].className)&&(t({result:!1}),!0)},function(e,t){e.anchor_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.anchor_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_Twitter",[function(e,t){var n=e.current_element;return e.url,!function(){var e=n.parentNode;if(!e)return!1;if("P"!=e.tagName)return!1;if(!ElementGetClassName(e).match(new RegExp("(^| )tweet-text( |$)","i")))return!1;if("true"===n.getAttribute("data-pre-embedded"))return!1;var t,a=0,i=(o=ElementGetElementsByTagName(e,"a")).length;for(t=0;t<i;t++)if(o[t].getAttribute("data-expanded-url")&&++a>1)return!0;for(e=e.nextSibling;e;){var o;if(1==e.nodeType&&ElementGetClassName(e).match(new RegExp("(^| )(cards-media-container|permalink-footer)( |$)","i"))&&(o=ElementGetElementsByTagName(e,"img")).length)return!1;e=e.nextSibling}return!0}()&&(t({result:!1}),!0)},function(e,t){var n=e.current_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){var n=e.current_element;return!function(){if((e=ElementGetElementsByTagName(n,"img")).length)return!1;var e,t,a=(e=ElementGetElementsByTagName(n,"*")).length;for(t=0;t<a;t++){var i=ElementGetComputedStyle(e[t],null);if(i&&"none"!=i.backgroundImage)return!1}return!!n.childNodes.length}()&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_Twitter",[function(e,t){return e.current_element,!e.is_overridden_url&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptAllow_Reddit",[function(e,t){return e.current_element,!e.is_overridden_url&&(t({result:!1}),!0)},function(e,t){var n=e.current_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){var n=e.current_element;return!function(){if((e=ElementGetElementsByTagName(n,"img")).length)return!1;var e,t,a=(e=ElementGetElementsByTagName(n,"*")).length;for(t=0;t<a;t++){var i=ElementGetComputedStyle(e[t],null);if(i&&"none"!=i.backgroundImage)return!1}return!!n.childNodes.length}()&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_Reddit",[function(e,t){var n=e.current_element;return!function(){if((e=ElementGetElementsByTagName(n,"img")).length)return!0;var e,t,a=(e=ElementGetElementsByTagName(n,"*")).length;for(t=0;t<a;t++){var i=ElementGetComputedStyle(e[t],null);if(i&&"none"!=i.backgroundImage)return!0}return!1}()&&(t({result:!1}),!0)},function(e,t){e.current_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(bmp|gif|jpg|jpe|jpeg|png|webp|avif)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^image[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return e.current_element,!!e.content_type.join(",").match(/image/i)&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandImage_ThumbnailScriptInsert_Default",[function(e,t){return e.current_element,e.image_element,e.event_dispatcher,t(),!0}]),e("ExpandImage_ThumbnailScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandImage_PopupScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandSound_InlineScriptAllow_Inline",[function(e,t){var n=e.anchor_element.parentNode;return!!(n&&ElementGetClientWidth(n)<150)&&(t({result:!1}),!0)},function(e,t){return t({result:!0}),!0}]),e("ExpandSound_InlineScriptInsert_Inline",[function(e,t){var n=e.anchor_element,a=e.element,i=e.event_dispatcher,o=a.style,r=new DocumentReviseScroll;r.executeAttachElementBefore(a);var l=DocumentCreateElement("div"),s=new ElementAnalyzeManager(l,!0);ElementSetStyle(l,"height:0px;"),DomNode_InsertAfter(n,l),DomNode_InsertAfter(l,a);var c=DocumentCreateElement("div"),_=new ElementAnalyzeManager(c,!0);ElementSetStyle(c,"height:0px;"),DomNode_InsertAfter(a,c);var u=ElementGetBoundingClientRect(a),d=u.right-u.left,p=u.bottom-u.top;o.width="0px",o.height="0px";var m=(u=ElementGetBoundingClientRect(a)).right-u.left;p-=u.bottom-u.top;var g=ElementGetClientWidth(a.parentNode)-m;g<(d-=m)&&(d=g),o.width=d+"px",o.height=p+"px",r.executeAttachElementAfter(a);var f=i.createEventHandler("release");return f.setFunction((function(e){s&&(s.release(),s=null),_&&(_.release(),_=null),f&&(f.release(),f=null)})),t(),!1}]),e("ExpandSound_AudioElementScriptAllow_Inline",[function(e,t){e.anchor_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(mp3|wav|ogg|m4a|aac|midi|mid)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^audio[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandSound_InlineScriptAllow_InlineFromAssist",[function(e,t){return e.current_element,!e.is_overridden_url&&(t({result:!1}),!0)},function(e,t){var n=e.anchor_element.parentNode;return!!(n&&ElementGetClientWidth(n)<150)&&(t({result:!1}),!0)},function(e,t){return t({result:!0}),!0}]),e("ExpandSound_InlineScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandSound_InlineScriptInsert_Default",[function(e,t){return e.current_element,e.element,e.event_dispatcher,t(),!0}]),e("ExpandSound_AudioElementScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandVideo_InlineScriptAllow_Inline",[function(e,t){var n=e.anchor_element.parentNode;return!!(n&&ElementGetClientWidth(n)<150)&&(t({result:!1}),!0)},function(e,t){return t({result:!0}),!0}]),e("ExpandVideo_InlineScriptInsert_Inline",[function(e,t){var n=e.anchor_element,a=e.element,i=e.event_dispatcher,o=a.style,r=new DocumentReviseScroll;r.executeAttachElementBefore(a);var l=DocumentCreateElement("div"),s=new ElementAnalyzeManager(l,!0);ElementSetStyle(l,"height:0px;"),DomNode_InsertAfter(n,l),DomNode_InsertAfter(l,a);var c=DocumentCreateElement("div"),_=new ElementAnalyzeManager(c,!0);ElementSetStyle(c,"height:0px;"),DomNode_InsertAfter(a,c);var u=ElementGetBoundingClientRect(a),d=u.right-u.left,p=u.bottom-u.top,m=project.getWidthMaxInlineVideo(),g=project.getHeightMaxInlineVideo();o.width="0px",o.height="0px";var f=(u=ElementGetBoundingClientRect(a)).right-u.left,h=u.bottom-u.top,x=ElementGetClientWidth(a.parentNode);m>x&&(m=x),d-=f,p-=h,a.videoWidth&&(d=a.videoWidth),a.videoHeight&&(p=a.videoHeight);var b=m-f;b<d&&(p*=b/d,d=b);var v=g-h;v<p&&(d*=v/p,p=v),o.width=d+"px",o.height=p+"px",r.executeAttachElementAfter(a);var y=i.createEventHandler("release");return y.setFunction((function(e){s&&(s.release(),s=null),_&&(_.release(),_=null),y&&(y.release(),y=null)})),t(),!1}]),e("ExpandVideo_VideoElementScriptAllow_Inline",[function(e,t){e.anchor_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(mp4|webm|avi|m4v|ogv|mpg|mpeg)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^video[/]/i))}()&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandVideo_InlineScriptAllow_InlineFromAssist",[function(e,t){return e.current_element,!e.is_overridden_url&&(t({result:!1}),!0)},function(e,t){var n=e.anchor_element.parentNode;return!!(n&&ElementGetClientWidth(n)<150)&&(t({result:!1}),!0)},function(e,t){return t({result:!0}),!0}]),e("ExpandVideo_InlineScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandVideo_InlineScriptInsert_Default",[function(e,t){return e.current_element,e.element,e.event_dispatcher,t(),!0}]),e("ExpandVideo_VideoElementScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandIframe_InlineScriptAllow_ExpandPdfInline",[function(e,t){var n=e.anchor_element.parentNode;return!!(n&&ElementGetClientWidth(n)<50)&&(t({result:!1}),!0)},function(e,t){e.anchor_element;var n=e.url;return!!function(){if(URL_Parser(n).ext.match(/^(pdf)$/i))return!0;var e=DataURL_Parser(n);return!(!e||!e.mimetype.match(/^application[/]pdf/i))}()&&(t({result:!0}),!0)},function(e,t){return t({result:!1}),!0}]),e("ExpandIframe_InlineScriptInsert_ExpandPdfInline",[function(e,t){var n=e.anchor_element,a=e.iframe_element,i=e.event_dispatcher,o=597,r=844,l=new DocumentReviseScroll;l.executeAttachElementBefore(a);var s=DocumentCreateElement("div"),c=new ElementAnalyzeManager(s,!0);ElementSetStyle(s,"height:0px;"),DomNode_InsertAfter(n,s),DomNode_InsertAfter(s,a);var _=DocumentCreateElement("div"),u=new ElementAnalyzeManager(_,!0);ElementSetStyle(_,"height:0px"),DomNode_InsertAfter(a,_),a.style.width="0px",a.style.height="0px";var d=ElementGetBoundingClientRect(a),p=d.right-d.left;r-=d.bottom-d.top;var m=ElementGetClientWidth(a.parentNode)-p;m<(o-=p)&&(o=m),a.style.width=o+"px",a.style.height=r+"px",l.executeAttachElementAfter(a);var g=i.createEventHandler("release");return g.setFunction((function(e){c&&(c.release(),c=null),u&&(u.release(),u=null),g&&(g.release(),g=null)})),t(),!1}]),e("ExpandIframe_InlineScriptAllow_Default",[function(e,t){return e.current_element,e.url,e.content_type,t({result:!1}),!0}]),e("ExpandIframe_InlineScriptInsert_Default",[function(e,t){return e.current_element,e.iframe_element,e.event_dispatcher,t(),!0}]),e("ExpandBbs_ScriptInitialize",[function(e,t){return e.work,t({result:!0}),!0}]),e("ExpandBbs_ScriptInitialize_NicovideoDictionary",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"(https://dic\\.nicovideo\\.jp/b/(a|c|i|l|u|v)/[^/#?]+)",replace:"$1/",name:"nicopedia"},{url:"(https://dic\\.nicovideo\\.jp)/(a|c|i|l|u|v)/([^/#?]+)",replace:"$1/b/$2/$3/",name:"nicopedia"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[0].replace(s,l.replace),a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a=30,i=1,o=1,r=1,l=1,s=new Array,c=null,_=null,u=n.base_url,d=u,p=u;if(n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));if(l<1&&(l=1),s<1&&(s=1),l>2147483647&&(l=2147483647),s>2147483647&&(s=2147483647),s<l){var c=l;l=s,s=c}s-l>1e4&&(s=l+1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var _=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));_<1&&(_=1),_>2147483647&&(_=2147483647),t.addNumber(_)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext);var g=DocumentCreateElement("a");ElementSetTextContent(g,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var f="";if(m=ElementGetTextContent(g).match(l)){var h=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),x=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(h<1&&(h=1),x<1&&(x=1),h>2147483647&&(h=2147483647),x>2147483647&&(x=2147483647),x<h){var b=h;h=x,x=b}f=h}else(m=ElementGetTextContent(g).match(s))&&((f=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(f=1),f>2147483647&&(f=2147483647));g.href=n.base_url+(30*Math.floor(f/30)+1)+"-#"+f}}}}},function(){var e=ElementGetElementsByClassName(document.body,"st-bbs-contents")[0];if(e){var t=ElementGetElementsByTagName(e,"dl");t.length&&(c=t[t.length-1])}}(),!c)return!1;var m,g=ElementGetElementsByTagName(c,"dt"),f=g.length,h=new RegExp("([0-9]+)","i");for(m=0;m<f&&(!(x=ElementGetTextContent(g[m]).match(h))||(i=parseInt(x[1]),s[i]=!0,1==i));m++);for(m=f-1;m>=0;m--){var x;if(x=ElementGetTextContent(g[m]).match(h)){o=parseInt(x[1]),s[o]=!0;break}}var b=Math.floor(o/a)*a+1;return d=u+"1-",p=u+b+"-",(_=new BbsControlReadMoreButton).setWaitTime(2e3),_.onclick=function(e){var t=0,n=function(){var i=new Loader;i.onload=function(i){var r=new RegExp('<span class="st[-]bbs_resNo">([0-9]+)',"i"),s=0,_=i.length;l=o,execute_queue.attachFirst((function d(){try{if(s>=_)throw 0;if((s=i.indexOf('<dt class="st-bbs_reshead">',s))<0)throw 0;var m=i.indexOf("</dd>",s);m>=0&&(m+=5);var g=i.indexOf('<dd class="res_reaction">',m);if(g>=0){var f=i.indexOf("</dd>",g);f>=0&&(m=f+5)}var h=i.substring(s,m),x=h.match(r);if(x){var b=parseInt(x[1]);if(o<b){var v=bbs_dictionary.getResponse(b);v.clearAnalyzed(),v.clearOriginalElements(),v.clearFollowing();var y,E=StringHtmlCreateDomNodesSafe(h),w=E.length;for(y=0;y<w;y++)c.appendChild(E[y]);t+=1,p=u+(o=b)+"-"}}if(s<m)return s=m,void execute_queue.attachFirst(d,null)}catch(m){}var S=!1;(o+1)%a==1&&(Math.floor(l/a)>=Math.floor(o/a)||Math.floor(l/1e3)<Math.floor(o/1e3)||(S=!0));var C=Math.floor(o/a)*a+1;p=u+C+"-",S?n():e({result:!0,add_count:t})}),null)},i.onerror=function(){e({result:!1})},i.setMethod("GET"),i.setURL(p),i.loadText()};n()},DomNode_InsertAfter(c,_.getElement()),function e(){var t=r,l=new Loader;l.onload=function(l){var c=new RegExp('<span class="st[-]bbs_resNo">([0-9]+)',"i"),_=new RegExp("ID:[ ]([a-zA-Z0-9+/.]{8,10})","i"),p=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"),m=0,g=l.length;execute_queue.attachFirst((function f(){try{if(m>=g)throw 0;if((m=l.indexOf('<dt class="st-bbs_reshead">',m))<0)throw 0;var h=l.indexOf("</dd>",m);h>=0&&(h+=5);var x=l.indexOf('<dd class="res_reaction">',h);if(x>=0){var b=l.indexOf("</dd>",x);b>=0&&(h=b+5)}var v=l.substring(m,h),y=v.match(c);if(y){var E=t=parseInt(y[1]);if(i<=E&&E<=o);else if(s[E]);else{var w=bbs_dictionary.getResponse(E);if(!w.getAnalyzed()){var S=StringHtmlCreateDomNodesSafe(v),C=S[0],A=S[2],k=S[5];try{if("DT"!=C.tagName)throw 0;if("DD"!=A.tagName)throw 0}catch(h){throw 0}var I=ElementGetTextContent(C);n.extendResponseAnchor(A),I.match(_)&&w.setId(RegExp.$1),I.match(p)&&w.setName(RegExp.$1);var D=new Object;!function(){var e,t=ElementGetElementsByTagName(A,"a"),a=t.length;for(e=0;e<a;e++)n.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){D[e]||(bbs_dictionary.getResponse(e).addFollower(w),D[e]=!0)}))}(),C&&w.addOriginalElements("dt",C),A&&w.addOriginalElements("dd",A),k&&w.addOriginalElements("reaction",k),w.onerase=function(){},w.setAnalyzed()}}}if(m<h)return m=h,void execute_queue.attachFirst(f,null)}catch(h){}var T=!1;(t+1)%a==1&&(Math.floor(r/a)>=Math.floor(t/a)||t>i||(T=!0));var R=Math.floor(t/a)*a+1;d=u+R+"-",T&&(r=t,e())}),null)},l.onerror=function(){},l.setMethod("GET"),l.setURL(d),l.loadText()}(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_NicovideoDictionary",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var l=!1,s=0,c=o.getNumberList(),_=c.length;if(!_)return!1;execute_queue.attachFirst((function e(){var o,u=bbs_dictionary.getResponse(c[s]),d=u.getCloneElements(),p=d.length;if(p){var m=new Object;for(m.parent=t.parent,o=0;o<p;o++){var g=d[o];m[g.name]=g.element,a.appendChild(g.element)}i(u,m,r,"response"),l=!0}(s+=1)<_?execute_queue.attachFirst(e,null):n({result:l})}),null)},null})))}function l(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("ID:[ ]([a-zA-Z0-9+/.]{8,10})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlId(null,!1);u.setId(_[1]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=DocumentCreateText("");if(s.appendChild(c),a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromId(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"id")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null})))}function s(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromName(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"name")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null})))}t.dt&&(r(t.dt),l(t.dt),s(t.dt),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?"follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 0px 0px 8px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();var s=ElementGetElementsByTagName(a,"br");s.length?DomNode_InsertBefore(s[0],r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=DocumentCreateElement("dl");o.style.margin="0px",n.appendChild(o);var r=e.getFollower(),l=0,s=r.length;if(s<=0)return!1;execute_queue.attachFirst((function e(){var n,_=bbs_dictionary.getResponse(r[l].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,n=0;n<d;n++){var m=u[n];p[m.name]=m.element,o.appendChild(m.element)}i(_,p,c,"response")}(l+=1)<s?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(t.dt)),t.dd&&(r(t.dd),l(t.dd),s(t.dd))}var o=function(){var e,t,o,r=n;try{if("DT"!=r.tagName)return!1;if("st-bbs_reshead"!=r.className)return!1}catch(e){return!1}e=DomNodeGetNextElementSibling(r);try{if("DD"!=e.tagName)return!1}catch(e){return!1}if(t=(o=DomNodeGetNextElementSibling(e))&&"res_reaction"==o.className?o:null,!DomNodeGetAttachedDocument(r))return!1;a.extendResponseAnchor(e),function(){function t(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:[ ]([a-zA-Z0-9+/.]{8,10})","i")))||(t=n.nodeValue.match(new RegExp("^(◆[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):null:null}))}r&&t(r),e&&t(e)}();var l=ElementGetTextContent(r);if(!l.match(new RegExp("([0-9]+)","i")))return!1;var s=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!s.getAnalyzed()){l.match(new RegExp("ID:[ ]([a-zA-Z0-9+/.]{8,10})","i"))&&s.setId(RegExp.$1),l.match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"))&&s.setName(RegExp.$1);var c=new Object;!function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++)a.createResponseAnchorNumbers(ElementGetTextContent(n[t])).getNumbers((function(e){c[e]||(bbs_dictionary.getResponse(e).addFollower(s),c[e]=!0)}))}(),r&&s.addOriginalElements("dt",r),e&&s.addOriginalElements("dd",e),t&&s.addOriginalElements("reaction",t),s.onerase=function(){var e,t=s.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},s.setAnalyzed()}return i(s,{dt:r,dd:e,parent:r.parentNode},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptCallback_reddit",[function(e,t){var n=e.element;function a(e,t,n,i){var o;t.post_info&&(BbsControlNameExist(o=t.post_info)||(function(){var e,t,n,a={SCRIPT:1},i=new Object;for(n={p:i,n:i,node:o},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if("A"==r.tagName){var l=r.className.match(new RegExp("id[-]([a-zA-Z0-9_]+)","i"));if(l){var s=new BbsControlName(null,!0);s.setName(l[1]),DomNode_InsertAfter(r,s.getElement());break}}if(!a[r.tagName]){var c,_=r.childNodes,u=_.length;for(c=0;c<u;c++)n={p:e=(t=i).p,n:t,node:_[c]},e.n=n,t.p=n}}}}(),BbsControlNameSearch(o,(function(o){o.setResponse(e);var r=o.getName(),l=e.getName()===r,s=o.getElement(),c=DocumentCreateText("");if(o.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?StyleDeclarationSetProperty(t,"color","#e80000"):e>=2?StyleDeclarationRemoveProperty(t,"color"):StyleDeclarationSetProperty(t,"color","#707070")},o.update(),s.appendChild(c),"name"==i&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var i=bbs_dictionary.getResponsesFromName(r),o=0,s=i.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=i[o],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("div");p.className="entry noncollapsed comment",p.style.marginBottom="20px",e.appendChild(p);var m=new Object;for(m.parent=t.parent,l=0;l<d;l++){var g=u[l];m[g.name]=g.element,p.appendChild(g.element)}a(c,m,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))),t.post_buttons&&function(e){if(!BbsControlResponseAnchorExist(e)){var i,o;!function(){var t=ElementGetElementsByClassName(e,"bylink")[1];if(t){var n=t.href.match(new RegExp("[#/]([a-zA-Z0-9]+)$","i"));n&&(o=n[1],new BbsControlResponseAnchor(i=t,!1))}}();var r=new BbsResponseDialog;n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(i),r.oncreate=function(e,n){var i,l=!1,s=bbs_dictionary.getResponse(o),c=s.getCloneElements(),_=c.length;if(_){var u=DocumentCreateElement("div");u.className="entry noncollapsed comment",u.style.marginBottom="20px",e.appendChild(u);var d=new Object;for(d.parent=t.parent,i=0;i<_;i++){var p=c[i];d[p.name]=p.element,u.appendChild(p.element)}a(s,d,r,"response"),l=!0}n({result:l})}}}(t.post_buttons),t.post_info&&t.post_buttons&&function(i,o){if(!BbsControlFollowerExist(i)){var r=DocumentCreateElement("span"),l=DocumentCreateText(""),s=new BbsControlFollower(r,!0);s.setResponse(e),r.appendChild(l),s.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?StyleDeclarationSetProperty(t,"color","#e80000"):StyleDeclarationRemoveProperty(t,"color")},s.update(),o.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,i){var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var s,_=bbs_dictionary.getResponse(o[r].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("div");p.className="entry noncollapsed comment",p.style.marginBottom="20px",n.appendChild(p);var m=new Object;for(m.parent=t.parent,s=0;s<d;s++){var g=u[s];m[g.name]=g.element,p.appendChild(g.element)}a(_,m,c,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):i({result:!0})}),null)}}}(t.post_buttons,t.post_info)}var i=function(){var e=n;try{if(!e.className.match(new RegExp("(^| )thing( |$)","i")))return!1}catch(e){return!1}try{var t,i,o;if(!(t=ElementGetElementsByClassName(e,"tagline")[0]))return!1;if(!(i=ElementGetElementsByClassName(e,"usertext")[0]))return!1;if(!(o=ElementGetElementsByClassName(e,"buttons")[0]))return!1}catch(e){}if(!DomNodeGetAttachedDocument(e))return!1;var r=ElementGetElementsByTagName(i,"input")[0];if(!r)return!1;var l=r.value.match(new RegExp("[_]([a-zA-Z0-9_]+)","i"));if(!l)return!1;var s=bbs_dictionary.getResponse(l[1]);return s.getAnalyzed()||(function(){var e=ElementGetElementsByClassName(t,"author")[0];if(e){var n=e.className.match(new RegExp("id[-]([a-zA-Z0-9_]+)","i"));n&&s.setName(n[1])}}(),function(){var e=ElementGetElementsByClassName(o,"bylink")[1];if(e){var t=e.href.match(new RegExp("[#/]([a-zA-Z0-9]+)$","i"));t&&bbs_dictionary.getResponse(t[1]).addFollower(s)}}(),t&&s.addOriginalElements("post_info",t),i&&s.addOriginalElements("post_body",i),o&&s.addOriginalElements("post_buttons",o),s.onerase=function(){var e=s.getOriginalElements(),t=0;for(t=e.length-1;t>=1;t--){var n=e[t].element,a=new DocumentReviseScroll;a.executeRemoveElementBefore(n),n.style.display="none",a.executeRemoveElementAfter(n)}},s.setAnalyzed()),a(s,{post_info:t,post_body:i,post_buttons:o,parent:ElementGetElementsByClassName(document,"commentarea")[0]},null,null),!0}();return t({useful:i}),!0}]),e("ExpandBbs_ScriptCallback_8chan",[function(e,t){var n=e.element;function a(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),a=n.length;for(t=0;t<a;t++){var o=n[t],r=i(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var i=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(i),r.oncreate=function(e,n){e.className="post reply";var i=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _,u=bbs_dictionary.getResponse(s[l]),d=u.getCloneElements(),p=d.length;if(p){var m=DocumentCreateElement("table");m.style.margin="0px 0px 20px",e.appendChild(m);var g=new Object;for(g.parent=t.parent,_=0;_<p;_++){var f=d[_];g[f.name]=f.element,m.appendChild(f.element)}a(u,g,r,"response"),i=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:i})}),null)},null})))}function l(i){BbsControlIdExist(i)||(function(){var e,t,n,a={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:i},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!a[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}if("SPAN"==r.tagName&&"poster_id"==r.className&&(u=ElementGetTextContent(r).match(new RegExp("^([a-zA-Z0-9+/.]{6,8})$","i")))){(d=new BbsControlId(null,!0)).setId(u[1]),DomNode_InsertAfter(r,p=d.getElement());var _=DocumentCreateText("");p.appendChild(_),d.setTextNode(_)}break;case 3:for(;r;){var u,d,p;if(!(u=DomNodeGetNodeValue(r).match(new RegExp("ID:(|[ ])([a-zA-Z0-9+/.]{6,8})","i"))))break;DomNodeSetNodeValue(r,RegExp.leftContext),(d=new BbsControlId(null,!1)).setId(u[2]),ElementSetTextContent(p=d.getElement(),u[0]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(i,(function(i){i.setResponse(e);var r=i.getId(),l=e.getId()===r,s=i.getElement(),c=DocumentCreateText("");if(s.appendChild(c),i.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small")),e>1?(StyleDeclarationSetProperty(t,"margin-left","2px"),StyleDeclarationSetProperty(t,"margin-right","5px")):(StyleDeclarationRemoveProperty(t,"margin-left"),StyleDeclarationRemoveProperty(t,"margin-right"))},i.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){e.className="post reply";var i=bbs_dictionary.getResponsesFromId(r),o=0,s=i.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=i[o],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");p.style.margin="0px 0px 20px",e.appendChild(p);var m=new Object;for(m.parent=t.parent,l=0;l<d;l++){var g=u[l];m[g.name]=g.element,p.appendChild(g.element)}a(c,m,_,"id")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}function s(i){BbsControlNameExist(i)||(function(){var e,t,n,a={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:i},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!a[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(!|!!)([a-zA-Z0-9+/.]{10})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(i,(function(i){i.setResponse(e);var r=i.getName(),l=e.getName()===r,s=i.getElement(),c=DocumentCreateText("");if(i.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small"))},i.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){e.className="post reply";var i=bbs_dictionary.getResponsesFromName(r),o=0,s=i.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=i[o],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");p.style.margin="0px 0px 20px",e.appendChild(p);var m=new Object;for(m.parent=t.parent,l=0;l<d;l++){var g=u[l];m[g.name]=g.element,p.appendChild(g.element)}a(c,m,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}t.post_intro&&(r(t.post_intro),l(t.post_intro),s(t.post_intro),function(i){if(!BbsControlFollowerExist(i)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update(),i.appendChild(r);var s=new BbsResponseDialog;n&&n.attachChild(s),s.setElementParent(t.parent),s.setElementHitArea(r),s.oncreate=function(n,i){n.className="post reply";var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var c,_=bbs_dictionary.getResponse(o[r].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");p.style.margin="0px 0px 20px",n.appendChild(p);var m=new Object;for(m.parent=t.parent,c=0;c<d;c++){var g=u[c];m[g.name]=g.element,p.appendChild(g.element)}a(_,m,s,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):i({result:!0})}),null)}}}(t.post_intro)),t.post_body&&(r(t.post_body),l(t.post_body),s(t.post_body))}function i(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));if(l<1&&(l=1),s<1&&(s=1),l>2147483647&&(l=2147483647),s>2147483647&&(s=2147483647),s<l){var c=l;l=s,s=c}s-l>1e4&&(s=l+1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var _=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));_<1&&(_=1),_>2147483647&&(_=2147483647),t.addNumber(_)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t}var o=function(){var e,t,o,r=n;try{if("DIV"!=r.tagName)return!1;if(!r.className.match(new RegExp("^post","i")))return!1}catch(e){return!1}try{"DIV"==(u=r.previousSibling.previousSibling).tagName&&"files"==u.className&&(t=u)}catch(e){}try{var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)switch((u=s[l]).className){case"intro":e=u;break;case"files":t=u;break;case"body":o=u}}catch(e){}try{if(!e)return!1;if(!o)return!1}catch(e){}if(!DomNodeGetAttachedDocument(e))return!1;for(var _=!1,u=e;u;){if(u.id.match(new RegExp("^thread","i"))){_=!0;break}u=u.parentNode}if(!_)return!1;if(e&&(function(){var t,a=ElementGetElementsByTagName(e,"span"),i=a.length;for(t=0;t<i;t++){var o=a[t];if("postertrip"==o.className){var r=ElementGetTextContent(n).match(new RegExp("(!|!!)([a-zA-Z0-9+/.]{10})","i"));r&&ElementSetTextContent(o,r[0]);break}}}(),function(e){var t,n,a,i=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),o=new Object;for(a={p:o,n:o,node:e},o.p=a,o.n=a;o.n!=o;){t=(a=o.n).p,n=a.n,t.n=n,n.p=t;var r=a.node;if(1===r.nodeType)if("A"==r.tagName)ElementGetTextContent(r).match(i)&&DomNodeRemove(r);else{var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)a={p:t=(n=o).p,n:n,node:s[l]},t.n=a,n.p=a}}}(e)),o&&(BbsControlSearchTrash(o,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:(|[ ])([a-zA-Z0-9+/.]{6,8})","i")))||(t=n.nodeValue.match(new RegExp("^(!|!!)([a-zA-Z0-9+/.]{10})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):null:null})),function(e){var t,n,a,i=new Object;for(a={p:i,n:i,node:e},i.p=a,i.n=a;i.n!=i;){t=(a=i.n).p,n=a.n,t.n=n,n.p=t;var o=a.node;if(1===o.nodeType)if("A"==o.tagName){var r=o.cloneNode(!0);DomNode_InsertAfter(o,r),DomNodeRemove(o)}else{var l,s=o.childNodes,c=s.length;for(l=0;l<c;l++)a={p:t=(n=i).p,n:n,node:s[l]},t.n=a,n.p=a}}}(o)),!ElementGetTextContent(e).match(new RegExp("No\\.([0-9]+)","i")))return!1;var d=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!d.getAnalyzed()){(u=ElementGetElementsByClassName(e,"poster_id")[0])&&d.setId(ElementGetTextContent(u)),(u=ElementGetElementsByClassName(e,"trip")[0])&&d.setName(ElementGetTextContent(u));var p=new Object;!function(){var e,t=ElementGetElementsByTagName(o,"a"),n=t.length;for(e=0;e<n;e++)i(ElementGetTextContent(t[e])).getNumbers((function(e){p[e]||(bbs_dictionary.getResponse(e).addFollower(d),p[e]=!0)}))}(),e&&d.addOriginalElements("post_intro",e),t&&d.addOriginalElements("post_files",t),o&&d.addOriginalElements("post_body",o),d.onerase=function(){var e=d.getOriginalElements();if(e.length)for(var t=e[0].element;t&&1==t.nodeType;){if(ElementGetClassName(t).match(new RegExp("^post","i"))){var n=new DocumentReviseScroll;n.executeRemoveElementBefore(t),t.style.display="none",n.executeRemoveElementAfter(t);break}t=t.parentNode}},d.setAnalyzed()}return a(d,{post_intro:e,post_body:o,parent:document.body},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptCallback_4chan",[function(e,t){var n=e.element;function a(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),a=n.length;for(t=0;t<a;t++){var o=n[t],r=i(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var i=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(i),r.oncreate=function(e,n){e.className="reply";var i=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _,u=bbs_dictionary.getResponse(s[l]),d=u.getCloneElements(),p=d.length;if(p){var m=DocumentCreateElement("table");m.style.margin="0px 0px 10px",e.appendChild(m);var g=new Object;for(g.parent=t.parent,_=0;_<p;_++){var f=d[_];g[f.name]=f.element,m.appendChild(f.element)}a(u,g,r,"response"),i=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:i})}),null)},null})))}function l(i){BbsControlIdExist(i)||(function(){var e,t,n,a={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:i},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!a[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}"SPAN"==r.tagName&&"hand"==r.className&&(_=ElementGetTextContent(r).match(new RegExp("^([a-zA-Z0-9+/.]{8})$","i")))&&((u=new BbsControlId(null,!0)).setId(_[1]),DomNode_InsertAfter(r,d=u.getElement()));break;case 3:for(;r;){var _,u,d;if(!(_=DomNodeGetNodeValue(r).match(new RegExp("ID:(|[ ])([a-zA-Z0-9+/.]{8})","i"))))break;DomNodeSetNodeValue(r,RegExp.leftContext),(u=new BbsControlId(null,!1)).setId(_[2]),ElementSetTextContent(d=u.getElement(),_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(i,(function(i){i.setResponse(e);var r=i.getId(),l=e.getId()===r,s=i.getElement(),c=DocumentCreateText("");if(s.appendChild(c),i.onchange=function(e){DomNodeSetNodeValue(c,e>1?"["+e+"]":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small")),e>1?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 4px"):StyleDeclarationRemoveProperty(t,"margin")},i.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){e.className="reply";var i=bbs_dictionary.getResponsesFromId(r),o=0,s=i.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=i[o],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");p.style.margin="0px 0px 10px",e.appendChild(p);var m=new Object;for(m.parent=t.parent,l=0;l<d;l++){var g=u[l];m[g.name]=g.element,p.appendChild(g.element)}a(c,m,_,"id")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}function s(i){BbsControlNameExist(i)||(function(){var e,t,n,a={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:i},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!a[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(!|!!)([a-zA-Z0-9+/.]{10})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(i,(function(i){i.setResponse(e);var r=i.getName(),l=e.getName()===r,s=i.getElement(),c=DocumentCreateText("");if(i.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small"))},i.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){e.className="reply";var i=bbs_dictionary.getResponsesFromName(r),o=0,s=i.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=i[o],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");p.style.margin="0px 0px 10px",e.appendChild(p);var m=new Object;for(m.parent=t.parent,l=0;l<d;l++){var g=u[l];m[g.name]=g.element,p.appendChild(g.element)}a(c,m,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}t.post_info&&(r(t.post_info),l(t.post_info),s(t.post_info),function(i){if(!BbsControlFollowerExist(i)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update(),i.appendChild(r);var s=new BbsResponseDialog;n&&n.attachChild(s),s.setElementParent(t.parent),s.setElementHitArea(r),s.oncreate=function(n,i){n.className="reply";var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var c,_=bbs_dictionary.getResponse(o[r].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");p.style.margin="0px 0px 10px",n.appendChild(p);var m=new Object;for(m.parent=t.parent,c=0;c<d;c++){var g=u[c];m[g.name]=g.element,p.appendChild(g.element)}a(_,m,s,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):i({result:!0})}),null)}}}(t.post_info)),t.post_message&&(r(t.post_message),l(t.post_message),s(t.post_message))}function i(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));if(l<1&&(l=1),s<1&&(s=1),l>2147483647&&(l=2147483647),s>2147483647&&(s=2147483647),s<l){var c=l;l=s,s=c}s-l>1e4&&(s=l+1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var _=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));_<1&&(_=1),_>2147483647&&(_=2147483647),t.addNumber(_)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t}var o=function(){var e,t,o=n;try{if("DIV"!=o.tagName)return!1;if(!o.className.match(new RegExp("^postInfo","i")))return!1}catch(e){return!1}try{"DIV"==(t=o.nextSibling).tagName&&"file"==t.className&&(t=(e=t).nextSibling)}catch(e){}try{if("BLOCKQUOTE"!=t.tagName)return!1;if("postMessage"!=t.className)return!1}catch(e){return!1}if(!e)try{"DIV"==(l=o.previousSibling).tagName&&"file"==l.className&&(e=l)}catch(e){}if(!DomNodeGetAttachedDocument(o))return!1;for(var r=!1,l=o;l;){if("board"==l.className){r=!0;break}l=l.parentNode}if(!r)return!1;o&&function(){var e,t=ElementGetElementsByTagName(o,"span"),a=t.length;for(e=0;e<a;e++){var i=t[e];if("postertrip"==i.className){var r=ElementGetTextContent(n).match(new RegExp("(!|!!)([a-zA-Z0-9+/.]{10})","i"));r&&ElementSetTextContent(i,r[0]);break}}}(),t&&BbsControlSearchTrash(t,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:(|[ ])([a-zA-Z0-9+/.]{8})","i")))||(t=n.nodeValue.match(new RegExp("^(!|!!)([a-zA-Z0-9+/.]{10})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):null:null}));var s=ElementGetTextContent(o);if(!s.match(new RegExp("No\\.([0-9]+)","i")))return!1;var c=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!c.getAnalyzed()){s.match(new RegExp("\\(ID:[ ]([a-zA-Z0-9+/.]+)\\)","i"))&&c.setId(RegExp.$1),function(){var e,t=ElementGetElementsByTagName(o,"span"),n=t.length;for(e=0;e<n;e++){var a=t[e];if("postertrip"==a.className){c.setName(ElementGetTextContent(a));break}}}();var _=new Object;!function(){var e,n=ElementGetElementsByTagName(t,"a"),a=n.length;for(e=0;e<a;e++)i(ElementGetTextContent(n[e])).getNumbers((function(e){_[e]||(bbs_dictionary.getResponse(e).addFollower(c),_[e]=!0)}))}(),o&&c.addOriginalElements("post_info",o),e&&c.addOriginalElements("post_file",e),t&&c.addOriginalElements("post_message",t),c.onerase=function(){var e=c.getOriginalElements();if(e.length)for(var t=e[0].element;t&&1==t.nodeType;){if(ElementGetClassName(t).match(new RegExp("^postContainer","i"))){var n=new DocumentReviseScroll;n.executeRemoveElementBefore(t),DomNodeRemove(t),n.executeRemoveElementAfter(t);break}t=t.parentNode}},c.setAnalyzed()}return a(c,{post_info:o,post_file:e,post_message:t,parent:document.body},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_2chan",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"^(http|https)://[^.]+\\.2chan\\.net/[^/]+/res/[0-9]+.htm",name:"2chan"},{url:"^http://[^.]+.ftbucket\\.info/.*/cont/.*$",name:"ftbucket"}],r=o.length;for(n=0;n<r;n++){var l=i.match(new RegExp(o[n].url,"i"));if(l){a.base_url=l[0],a.bbs_name=o[n].name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a=1,i=null,o=null,r=n.base_url,l=r;function s(){var e,t,n,a=this;a.createResponse=function(a){var i=e[a];return i||(i=function(a){var i,o=new Object;return o.release=function(n){var a=o._prev,r=o._next;a._next=r,r._prev=a,o._prev=o,o._next=o,delete e[i],delete t[i],o._text_dictionary=new Object},o.getNumber=function(){return a},o.attachText=function(e){var t=e.match(new RegExp("([ 　]*)([>＞]*)([ 　]*)(.+?)([ 　]*)$"));t&&t[4]&&(o._text_dictionary[t[4]]={depth:t[2].length})},o.getResponsesFromText=function(e){var t=new Array,a=e.match(new RegExp("^([ 　]*)([>＞]*)([ 　]*)(.+?)([ 　]*)$","i"));if(!a)return t;if(!a[4])return t;var i=a[2].length;if((e=a[4]).length<1)return t;if(i<1)return t;for(var r=o._prev;n!=r;)(c=r._text_dictionary[e])&&c.depth<i&&t.push(r),r=r._prev;if(t.length)return t;for(r=o._prev;n!=r;){var l,s=r._text_dictionary;for(l in s){var c;if((c=s[l]).depth<i&&l.indexOf(e)>=0){t.push(r);break}}r=r._prev}return t},o.setImageId=function(e){t[i=e]=o},function(){o._prev=o,o._next=o,o._text_dictionary=new Object;for(var t=n._prev;n!=t&&!(t.getNumber()>=a);)t=t._prev;var i=t,r=i._prev;r._next=o,i._prev=o,o._prev=r,o._next=i,e[a]=o}(),o}(a),e[a]=i),i},a.getResponse=function(t){return e[t]},a.getResponseFromImageId=function(e){return t[e]},e=new Object,t=new Object,(n=new Object)._prev=n,n._next=n}if(n.analyzeNodeList=function(e){var t=new RegExp("No\\.([0-9]+)","i"),a=new RegExp(".*/([0-9]+)(|s)\\.(bmp|gif|jpeg|jpe|jpg|png|webp|webm|mp4)","i"),i=e.length,o="";for(p=0;p<i;p++)o+=ElementGetTextContent(e[p]);var r=o.match(t);if(r){var l=parseInt(r[1]);if(!n.futaba_dictionary.getResponse(l)){var s=n.futaba_dictionary.createResponse(l);try{var c=null;for(p=i-1;p>=0;p--)if("BLOCKQUOTE"==(u=e[p]).tagName){c=u;break}for(var _,u=DomNodeGetPreviousElementSibling(c);u;){var d=ElementGetElementsByTagName(u,"IMG")[0];if(d&&d.src.match(a)){s.setImageId(RegExp.$1);break}u=DomNodeGetPreviousElementSibling(u)}n.bbs_name,i=(_=c.childNodes).length;var p,m="";for(p=0;p<i;p++)switch((u=_[p]).nodeType){case 1:"BR"==u.tagName?(m&&s.attachText(m),m=""):m+=ElementGetTextContent(u);break;case 3:m+=u.nodeValue}m&&s.attachText(m)}catch(e){}}}},n.bbs_name,function(){if(!i){var e,t=ElementGetElementsByTagName(document.body,"form"),n=t.length;for(e=0;e<n;e++){var a=t[e];if(-1!=a.action.indexOf("futaba.php")&&ElementGetElementsByTagName(a,"blockquote").length){i=a;break}}}}(),function(){if(!i){var e=ElementGetElementsByClassName(document.body,"thre")[0];e&&e.getAttribute("data-res")&&(i=e)}}(),!i)return!1;if("2chan"==n.bbs_name){function c(){try{var e=document.getElementById("ftbl"),t=document.getElementById("ufm");if("absolute"==e.style.position){var n=DocumentGetScrollPos(),a=t.getBoundingClientRect();e.style.top=n.y+a.top+"px"}}catch(e){}}var _,u=ElementGetElementsByTagName(i,"table"),d=u.length;for(_=d-1;_>=0;_--){var p,m=ElementGetTextContent(p=u[_]).match(new RegExp("No\\.([0-9]+)","i"));if(m){a=parseInt(m[1]);break}}l=r,function(){var e=document.getElementById("ftbl");if(e){var t=e.getElementsByTagName("tbody");if(t.length){var a=new BbsControlDockingForm(t[0],!1);a.setStyle("background:#e8e8ec; background-image:linear-gradient(to bottom, #f8f8fc, #e8e8ec); padding:20px; border:1px solid #888; border-radius:4px; box-shadow:2px 2px 5px #aaa; margin:0px; display:block; visibility:visible"),n.docking_form=a}}}(),(o=new BbsControlReadMoreButton).setWaitTime(2e3),o.onclick=function(e){var t=document.getElementById("contdisp"),n=new Loader;n.onload=function(n){var o,r=new RegExp("No\\.([0-9]+)","i"),l=new RegExp('<span id="contdisp">(.*?)<\\\\/span>',"i"),s=null,_=0,u=n.length,d=0;(o=ElementGetElementsByTagName(i,"table")).length&&(s=o[o.length-1]),s||(o=ElementGetElementsByTagName(i,"blockquote")).length&&(s=o[o.length-1]),execute_queue.attachFirst((function i(){try{if(_>=u)throw 0;if((_=n.indexOf("<table border=0>",_))<0)throw 0;var o=n.indexOf("</td>",_);o>=0&&(o=n.indexOf("</tr>",o+5))>=0&&(o=n.indexOf("</table>",o+5))>=0&&(o+=8);var p=n.substring(_,o);if(v=p.match(r)){var m=function(){try{for(var e=new RegExp("No\\.([0-9]+)","i"),t=ElementGetElementsByTagName(document.body,"table"),n=t.length-1;n>=0;n--){var a=ElementGetElementsByClassName(t[n],"rtd")[0];if(a&&ElementGetTextContent(a).match(e))return parseInt(RegExp.$1)}}catch(e){}return-1}();a<m&&(a=m);var g=parseInt(v[1]);if(a<g){var f=bbs_dictionary.getResponse(g);f.clearAnalyzed(),f.clearOriginalElements(),f.clearFollowing();var h,x=StringHtmlCreateDomNodesSafe(p),b=x.length;for(h=0;h<b;h++)DomNode_InsertAfter(s,x[h]),s=x[h];c(),d+=1,a=g}}if(_<o)return _=o,void execute_queue.attachFirst(i,null)}catch(o){}if(t){var v=n.match(l);ElementSetTextContent(t,v?v[1]:"not found!")}c(),e({result:!0,add_count:d})}),null)},n.onerror=function(){t&&ElementSetTextContent(t,"not found!"),e({result:!1})},n.setMethod("GET"),n.setURL(l),n.overrideMimeType("text/plain; charset=Shift_JIS"),n.loadText()},(p=document.getElementById("contres"))&&DomNode_InsertAfter(p,o.getElement()),function(){var e,t,a,i;function o(){var t,n=new Array,i=e.length;for(t=0;t<i;t++)n.push({e:e[t],v:e[t].value});for(e.reset(),t=0;t<i;t++)try{var o=n[t];o.e.value=o.v}catch(e){}a.value=""}!function(){for(var i=document.getElementById("ftbl");i;){if("FORM"==i.tagName){e=i;break}i=i.parentNode}if(e){var o=ElementGetElementsByTagName(e,"input");for(_=0;_<o.length;_++)if("submit"==o[_].type.toLowerCase()){t=o[_];break}(o=ElementGetElementsByTagName(e,"textarea")).length&&(a=o[0],n.form_textarea=a)}}(),e&&t&&a&&((i=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){i&&(i.release(),i=null)})),n.docking_form&&(n.docking_form.onreset=o))}(),execute_queue.attachLast((function(){c()}),null)}return function(){n.futaba_dictionary=new s;var e=ElementGetElementsByTagName(i,"table"),a=e.length,o=0;!function(){var e=ElementGetElementsByTagName(document.body,"blockquote")[0];if(e){for(var t=new Array;e&&"HR"!=e.tagName;)t.unshift(e),e=e.previousSibling;n.analyzeNodeList(t)}}(),execute_queue.attachFirst((function i(){try{var r=e[o];if(!r)throw 0;var l=r.rows[0].cells;n.analyzeNodeList(l[l.length-1].childNodes)}catch(e){}if(o<a)return o+=1,void execute_queue.attachFirst(i,null);t({result:!0})}),null)}(),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_2chan",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,l){function s(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),a=n.length;for(t=0;t<a;t++){var i=n[t],r=o(ElementGetTextContent(i));r.getCount()&&new BbsControlResponseAnchor(i,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _,u=bbs_dictionary.getResponse(s[l]),d=u.getCloneElements(),p=d.length;if(p){var m=DocumentCreateElement("table");e.appendChild(m);var g=m.insertRow(-1).insertCell(-1);m.style.margin="0px 0px 10px";var f=new Object;for(f.parent=t.parent,_=0;_<p;_++){var h=d[_];f[h.name]||(f[h.name]=new Array),f[h.name].push(h.element),g.appendChild(h.element)}i(u,f,r,"response"),a=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:a})}),null)},null})))}function c(a){BbsControlQuoteExist(a)||(function(){function t(e,t){var n,a=e.length;if(a!=t.length)return!1;for(n=0;n<a;n++)if(e[n]!=t[n])return!1;return!0}var n,i=null,o=null,l=a.childNodes;for(n=l.length-1;n>=0;n--){var s=l[n];if("FONT"==s.tagName){var c=r(e.getNumber(),ElementGetTextContent(s));if(c.getCount()){o=c.getNumberList();var _=!1;if(i&&t(i,o)&&(_=!0),!_){var u=new BbsControlQuote(null,!0),d=u.getElement(),p=d.style;p.fontSize="small",p.textDecoration="underline",p.marginLeft="10px";var m=DocumentCreateText(" >>"+o.length);d.appendChild(m),DomNode_InsertLastChild(s,d),u.setResponseAnchorNumbers(c),i=o}}}}}(),BbsControlQuoteSearch(a,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _,u=bbs_dictionary.getResponse(s[l]),d=u.getCloneElements(),p=d.length;if(p){var m=DocumentCreateElement("table");e.appendChild(m);var g=m.insertRow(-1).insertCell(-1);m.style.margin="0px 0px 10px";var f=new Object;for(f.parent=t.parent,_=0;_<p;_++){var h=d[_];f[h.name]||(f[h.name]=new Array),f[h.name].push(h.element),g.appendChild(h.element)}i(u,f,r,"response"),a=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:a})}),null)},null})))}function _(a){if(!BbsControlIdExist(a)){var o,r=new Array;!function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var l=n.node;switch(l.nodeType){case 1:if(!i[l.tagName]){var s,c=l.childNodes,_=c.length;for(s=0;s<_;s++)n={p:e=(t=o).p,n:t,node:c[s]},e.n=n,t.p=n}break;case 3:for(;l;){var u=DomNodeGetNodeValue(l).match(new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"));if(!u)break;DomNodeSetNodeValue(l,RegExp.leftContext);var d=new BbsControlId(null,!1);d.setId(u[1]),r.push(d);var p=d.getElement();ElementSetTextContent(p,u[0]),DomNode_InsertAfter(l,p),DomNode_InsertAfter(p,l=DocumentCreateText(RegExp.rightContext))}}}}();var s=r.length;for(o=0;o<s;o++)!function(a){a.setResponse(e);var o=a.getId(),r=e.getId()===o,s=a.getElement(),c=DocumentCreateText("");if(s.appendChild(c),a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==l&&r)return null;var _=new BbsResponseDialog;n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromId(o),l=0,s=a.length;if(r){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function o(){var r,c=a[l],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");e.appendChild(p);var m=p.insertRow(-1).insertCell(-1);p.style.margin="0px 0px 10px";var g=new Object;for(g.parent=t.parent,r=0;r<d;r++){var f=u[r];g[f.name]||(g[f.name]=new Array),g[f.name].push(f.element),m.appendChild(f.element)}i(c,g,_,"id")}(l+=1)<s?execute_queue.attachFirst(o,null):n({result:!0})}),null)}}(r[o])}}function u(a){if(!BbsControlNameExist(a)){var o,r=new Array;!function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var l=n.node;switch(l.nodeType){case 1:if(!i[l.tagName]){var s,c=l.childNodes,_=c.length;for(s=0;s<_;s++)n={p:e=(t=o).p,n:t,node:c[s]},e.n=n,t.p=n}break;case 3:for(;l;){var u=DomNodeGetNodeValue(l).match(new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"));if(!u)break;DomNodeSetNodeValue(l,RegExp.leftContext);var d=new BbsControlName(null,!1);d.setName(u[0]),r.push(d);var p=d.getElement();ElementSetTextContent(p,u[0]),DomNode_InsertAfter(l,p),DomNode_InsertAfter(p,l=DocumentCreateText(RegExp.rightContext))}}}}();var s=r.length;for(o=0;o<s;o++)!function(a){a.setResponse(e);var o=a.getName(),r=e.getName()===o,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==l&&r)return null;var _=new BbsResponseDialog;n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromName(o),l=0,s=a.length;if(r){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function o(){var r,c=a[l],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");e.appendChild(p);var m=p.insertRow(-1).insertCell(-1);p.style.margin="0px 0px 10px";var g=new Object;for(g.parent=t.parent,r=0;r<d;r++){var f=u[r];g[f.name]||(g[f.name]=new Array),g[f.name].push(f.element),m.appendChild(f.element)}i(c,g,_,"name")}(l+=1)<s?execute_queue.attachFirst(o,null):n({result:!0})}),null)}}(r[o])}}function d(a){if(!BbsControlHostExist(a)){var o,r=new Array;!function(){var e,t,n,i={B:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var l=n.node;switch(l.nodeType){case 1:if(!i[l.tagName]){var s,c=l.childNodes,_=c.length;for(s=0;s<_;s++)n={p:e=(t=o).p,n:t,node:c[s]},e.n=n,t.p=n}break;case 3:for(;l;){var u=DomNodeGetNodeValue(l).match(new RegExp("(IP:)([-.:*a-zA-Z0-9()]+)","i"));if(!u)break;DomNodeSetNodeValue(l,RegExp.leftContext+u[1]);var d=new BbsControlHost(null,!1);d.setHost(u[2]),r.push(d);var p=d.getElement();ElementSetTextContent(p,u[2]),DomNode_InsertAfter(l,p),DomNode_InsertAfter(p,l=DocumentCreateText(RegExp.rightContext))}}}}();var s=r.length;for(o=0;o<s;o++)!function(a){a.setResponse(e);var o=a.getHost(),r=e.getHost()===o,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"["+e+"]":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==l&&r)return null;var _=new BbsResponseDialog;n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromHost(o),l=0,s=a.length;if(r){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function o(){var r,c=a[l],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");e.appendChild(p);var m=p.insertRow(-1).insertCell(-1);p.style.margin="0px 0px 10px";var g=new Object;for(g.parent=t.parent,r=0;r<d;r++){var f=u[r];g[f.name]||(g[f.name]=new Array),g[f.name].push(f.element),m.appendChild(f.element)}i(c,g,_,"host")}(l+=1)<s?execute_queue.attachFirst(o,null):n({result:!0})}),null)}}(r[o])}}function p(a){if(!BbsControlHostExist(a)){var o,r=new Array;!function(){try{var e=a.firstChild;if("["!==e.nodeValue)return;if("FONT"!==(e=e.nextSibling).tagName)return;var t=e.innerHTML.match(new RegExp("^([-.:*a-zA-Z0-9()]+)$","i"));if(!t)return;if("]"!==(e=e.nextSibling).nodeValue)return;var n=new BbsControlHost(null,!1);n.setHost(t[1]),r.push(n),DomNode_InsertBefore(e,n.getElement())}catch(e){}}();var s=r.length;for(o=0;o<s;o++)!function(a){a.setResponse(e);var o=a.getHost(),r=e.getHost()===o,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){var t=s.style;e>1?(DomNodeSetNodeValue(c,"("+e+")"),StyleDeclarationSetProperty(t,"margin-left","4px"),StyleDeclarationSetProperty(t,"margin-right","4px")):(DomNodeSetNodeValue(c,""),StyleDeclarationRemoveProperty(t,"margin-left"),StyleDeclarationRemoveProperty(t,"margin-right")),e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==l&&r)return null;var _=new BbsResponseDialog;n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromHost(o),l=0,s=a.length;if(r){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function o(){var r,c=a[l],u=c.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");e.appendChild(p);var m=p.insertRow(-1).insertCell(-1);p.style.margin="0px 0px 10px";var g=new Object;for(g.parent=t.parent,r=0;r<d;r++){var f=u[r];g[f.name]||(g[f.name]=new Array),g[f.name].push(f.element),m.appendChild(f.element)}i(c,g,_,"host")}(l+=1)<s?execute_queue.attachFirst(o,null):n({result:!0})}),null)}}(r[o])}}!function(){var o,r,l,m;for(r=(l=t.post_info).length,o=0;o<r;o++)BbsControlReplyExist(m=l[o])||function(){var n=m;if(n){var i=ElementGetTextContent(n).match(new RegExp("No[.][0-9]+","i"));if(i){switch(n.nodeType){case 1:control_reply=new BbsControlReply(n,!0);break;case 3:var o;DomNodeSetNodeValue(n,RegExp.leftContext),control_reply=new BbsControlReply(null,!1),ElementSetTextContent(o=control_reply.getElement(),i[0]),DomNode_InsertAfter(n,o),n=DocumentCreateText(RegExp.rightContext),DomNode_InsertAfter(o,n)}control_reply.setResponse(e);var r=a.docking_form,l=a.form_textarea,s=function(){var e,n=t.post_message,a=n.length;for(e=0;e<a;e++)if("BLOCKQUOTE"==n[e].nodeName)return n[e];return null}();control_reply.onclick=function(t){r.popupForReply(o);var n,a,i,c=l.value,_=c.length,u=l.selectionEnd;0==_?(a=[">"],i=function(e){switch(e.nodeType){case 1:if(BbsControlQuoteEqual(e))return;if("BR"===e.tagName)a.push("\n"),a.push(">");else{var t,n=e.childNodes,o=n.length;for(t=0;t<o;t++)i(n[t])}break;case 3:a.push(e.nodeValue)}},i(s),">"==a[a.length-1]&&a.pop(),a.push("\n"),n=a.join("")):n=u>=_?">No."+e.getNumber()+"\n":">No."+e.getNumber(),l.value=c.slice(0,u)+n+c.slice(u),l.selectionEnd=u+n.length,l.focus()}}}}(),_(l[o]),u(l[o]),d(l[o]);for(r&&function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#707070"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update(),DomNode_InsertAfter(a,r);var s=new BbsResponseDialog;n&&n.attachChild(s),s.setElementParent(t.parent),s.setElementHitArea(r),s.oncreate=function(n,a){var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var c,_=bbs_dictionary.getResponse(o[r].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=DocumentCreateElement("table");n.appendChild(p);var m=p.insertRow(-1).insertCell(-1);p.style.margin="0px 0px 10px";var g=new Object;for(g.parent=t.parent,c=0;c<d;c++){var f=u[c];g[f.name]||(g[f.name]=new Array),g[f.name].push(f.element),m.appendChild(f.element)}i(_,g,s,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(l[r-1]),r=(l=t.post_message).length,o=0;o<r;o++)s(l[o]),c(l[o]),_(l[o]),u(l[o]),p(l[o])}()}function o(e){var t,n=new ResponseAnchorNumbers,i=new RegExp("^(No\\.|>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),o=new RegExp("([0-9０-９]+)\\.(bmp|gif|jpeg|jpe|jpg|png|webp|webm|mp4)","i"),r=new RegExp("^([0-9０-９]+)","i");if(t=e.match(i))for(var l=t[1].length;;){if(t=e.substr(l).match(r)){l+=t[0].length;var s=null,c=StringConvertFromNumericFullToNumericHalf(t[1]);s||(s=a.futaba_dictionary.getResponseFromImageId(c)),(c=parseInt(c))<1&&(c=1),c>2147483647&&(c=2147483647),s||(s=a.futaba_dictionary.getResponse(c)),s&&(c=s.getNumber()),n.addNumber(c)}if(!t||0!=RegExp.rightContext.search(","))break;l+=1}return(t=e.match(o))&&(c=StringConvertFromNumericFullToNumericHalf(t[1]),(s=a.futaba_dictionary.getResponseFromImageId(c))&&n.addNumber(s.getNumber())),n}function r(e,t){var n=new ResponseAnchorNumbers,i=a.futaba_dictionary.getResponse(e);if(!i)return n;var o,r=i.getResponsesFromText(t),l=r.length;for(o=0;o<l;o++)n.addNumber(r[o].getNumber());return n}var l=function(){var e,t=n,l=new Array,s=new Array,c=new Array,_=new Array,u=new Array;try{if("BLOCKQUOTE"!=t.tagName)return!1}catch(e){return!1}if(BbsResponseDialogContains(t))return!1;if(!DomNodeGetAttachedDocument(t))return!1;for(var d=t;d&&"HR"!=d.tagName;)l.unshift(d),d=d.previousSibling;try{for(d=DomNodeGetPreviousElementSibling(t);d;){if(1==ElementGetElementsByTagName(d,"img").length){e=d;break}d=DomNodeGetPreviousElementSibling(d)}}catch(e){}try{if("BR"==(d=DomNodeGetPreviousElementSibling(e)).tagName){var p={BR:1,HR:1};for(d=d.previousSibling;d&&!p[d.tagName];)_.unshift(d),d=d.previousSibling}}catch(e){}try{if("TD"!=(d=l[0]).parentNode.tagName){p={FONT:1,INPUT:1,SPAN:1};var m=l.length;for(g=0;g<m;g++)if(p[l[g].tagName]){d=l[g];break}}for(p={DIV:1,SMALL:1,BLOCKQUOTE:1,BR:1};d&&!p[d.tagName];)s.push(d),d=d.nextSibling}catch(e){}a.analyzeNodeList(l),t&&u.push(t),e&&c.push(e),function(e){if(!BbsControlResponseAnchorExist(e)&&!BbsControlQuoteExist(e)){var t,n,i,o=new RegExp("^(No\\.|>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("([0-9０-９]+)\\.(bmp|gif|jpeg|jpe|jpg|png|webp|webm|mp4)","i"),l=new RegExp("(No\\.|>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+,)*[0-9０-９]+","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,n=i.n,t.n=n,n.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(n=c).p,n:n,node:d[u]},t.n=i,n.p=i;break;case 3:for(;_;){var m;if((m=DomNodeGetNodeValue(_).match(r))&&(v=a.futaba_dictionary.getResponseFromImageId(m[1])))DomNodeSetNodeValue(_,RegExp.leftContext),ElementSetTextContent(g=DocumentCreateElement("a"),m[0]),DomNode_InsertAfter(_,g),_=DocumentCreateText(RegExp.rightContext),g.href=a.base_url+"#"+v.getNumber(),DomNode_InsertAfter(g,_);else{if(!(m=DomNodeGetNodeValue(_).match(l)))break;var g,f=RegExp.leftContext,h=m[0],x=RegExp.rightContext,b=0;for(m=h.match(s);m;){var v,y=parseInt(StringConvertFromNumericFullToNumericHalf(m[0]));if(y<1&&(y=1),y>2147483647&&(y=2147483647),(v=null)||(v=a.futaba_dictionary.getResponse(y)),v||(v=a.futaba_dictionary.getResponseFromImageId(y)),v){b=y;break}m=RegExp.rightContext.match(s)}if(!b)break;DomNodeSetNodeValue(_,f),ElementSetTextContent(g=DocumentCreateElement("a"),h),DomNode_InsertAfter(_,g),_=DocumentCreateText(x),g.href=a.base_url+"#"+b,DomNode_InsertAfter(g,_)}}}}}}(t),function(){function e(e){var t,n=e.length;for(t=0;t<n;t++)BbsControlSearchTrash(e[t],(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i")))||(t=n.nodeValue.match(new RegExp("^(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[*][(][-.a-zA-Z0-9]+[)])","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}e(s),e(u)}();var g,f="";for(m=s.length,g=0;g<m;g++)f+=ElementGetTextContent(s[g])+"|";if(!f.match(new RegExp("No\\.([0-9]+)","i")))return!1;try{if("TD"==(d=l[0].parentNode).tagName)d.id=""+RegExp.$1;else{var h=DocumentCreateElement("a");h.name=""+RegExp.$1,DomNode_InsertBefore(l[0],h)}}catch(e){}var x,b,v=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!v.getAnalyzed()){f.match(new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"))&&v.setId(RegExp.$1),f.match(new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"))&&v.setName(RegExp.$1),(f.match(new RegExp("IP:([-.:*a-zA-Z0-9()]+)","i"))||t.innerHTML.match(new RegExp('^\\[<font color="#ff0000">([-.:*a-zA-Z0-9()]+)</font>\\]',"i")))&&v.setHost(RegExp.$1);var y=new Object;!function(){var e,n,a=(e=ElementGetElementsByTagName(t,"a")).length;for(n=0;n<a;n++)o(ElementGetTextContent(e[n])).getNumbers((function(e){y[e]||(bbs_dictionary.getResponse(e).addFollower(v),y[e]=!0)}));for(a=(e=t.childNodes).length,n=0;n<a;n++){var i=e[n];"FONT"==i.tagName&&r(v.getNumber(),ElementGetTextContent(i)).getNumbers((function(e){y[e]||(bbs_dictionary.getResponse(e).addFollower(v),y[e]=!0)}))}}(),x=0,b=function(e,t){var n,a=t.length;for(a&&x&&v.addOriginalElements("break_line",DocumentCreateElement("br")),n=0;n<a;n++)v.addOriginalElements(e,t[n]),x++},b("post_info",s),b("post_file_info",_),b("post_file",c),b("post_message",u),v.onerase=function(){var e=v.getOriginalElements();if(e.length){for(var t,n=e[e.length-1].element;n;){if("TABLE"==n.tagName){t=n;break}n=n.parentNode}if(t){var a=new DocumentReviseScroll;a.executeRemoveElementBefore(t),DomNodeRemove(t),a.executeRemoveElementAfter(t)}else{var i;for(i=e.length-1;i>=0;i--)DomNodeRemove(n=e[i].element)}}},v.setAnalyzed()}return i(v,{post_info:s,post_file_info:_,post_file:c,post_message:u,parent:document.body},null,null),!0}();return t({useful:l}),!0}]),e("ExpandBbs_ScriptInitialize_Open2ch",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"(http://[^.]+\\.open2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",name:"open2ch"},{url:"(http://open2ch\\.net/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",name:"open2ch"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[1].replace(s,l.replace),a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a,i=1,o=1,r=new Array,l=0,s=null,c=n.base_url;function _(e){return!0}n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));l<1&&(l=1),s<1&&(s=1),l>1e4&&(l=1e4),s>1e4&&(s=1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var c=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));c<1&&(c=1),c>2147483647&&(c=2147483647),t.addNumber(c)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext);var g=DocumentCreateElement("a"),f=DocumentCreateElement("span");g.appendChild(f),ElementSetTextContent(f,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var h="";if(m=ElementGetTextContent(g).match(l)){var x=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),b=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(x<1&&(x=1),b<1&&(b=1),x>1e4&&(x=1e4),b>1e4&&(b=1e4),b<x){var v=x;x=b,b=v}h=x+"-"+b}else(m=ElementGetTextContent(g).match(s))&&((h=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(h=1),h>2147483647&&(h=2147483647));g.href=n.base_url+h}}}}};var u=(d=ElementGetElementsByClassName(document.body,"thread")).length;if(u&&(s=d[u-1]),!s)return!1;var d,p=(d=ElementGetElementsByTagName(s,"dt")).length;if(p){var m=new RegExp("^([0-9]+)","i");ElementGetTextContent(d[0]).match(m)&&(i=parseInt(RegExp.$1),r[0]=!0),1==i&&p>1&&ElementGetTextContent(d[1]).match(m)&&(i=parseInt(RegExp.$1),r[i]=!0,i<=2&&(i=1)),ElementGetTextContent(d[p-1]).match(m)&&(o=parseInt(RegExp.$1),r[o]=!0)}return l=0,a=[{url:c,parse:function(e){var t,a=new RegExp("ID:([-a-zA-Z0-9+/.]+)[●!]{0,2}","i"),l=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i");"open2ch"===n.bbs_name&&(t=new RegExp("([0-9]+)","i"));var s=0,c=e.length;execute_queue.attachFirst((function _(){if(!(s>=c||(s=e.indexOf("<dt",s))<0)){var u=e.indexOf("</dt>",s),d=e.substring(s,u)+"\n<br>",p=d.match(t);if(p){var m=parseInt(p[1]);if(i<=m&&m<=o);else if(r[m]);else{var g=StringHtmlCreateDomNodesSafe(d),f=g[0],h=g[1],x=g[3];try{if("DT"!=f.tagName)return;if("DD"!=h.tagName)return;if("BR"!=x.tagName)return}catch(u){return}var b=bbs_dictionary.getResponse(m);if(!b.getAnalyzed()){var v=ElementGetTextContent(f);n.extendResponseAnchor(h),v.match(a)&&b.setId(RegExp.$1),v.match(l)&&b.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:f},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void b.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void b.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void b.setHost(c[2])}}}();var y=new Object;!function(){var e,t=ElementGetElementsByTagName(h,"a"),a=t.length;for(e=0;e<a;e++)n.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){y[e]||(bbs_dictionary.getResponse(e).addFollower(b),y[e]=!0)}))}(),f&&b.addOriginalElements("dt",f),h&&b.addOriginalElements("dd",h),x&&b.addOriginalElements("br",x),b.onerase=function(){},b.setAnalyzed()}}}s<u&&(s=u+1,execute_queue.attachFirst(_,null))}}),null)},validity:_}],function(){var e,t,n=ElementGetElementsByTagName(document.body,"form");for(t=0;t<n.length;t++)if(n[t].action.indexOf("/test/bbs.cgi")>=0){e=n[t];break}e&&new BbsControlDockingForm(e,!1).setStyle("background:#e8e8e8; background-image:linear-gradient(to bottom, #f8f8f8, #e8e8e8); padding:20px; border:1px solid #888; border-radius:4px; box-shadow:2px 2px 5px #aaa; margin:0px;")}(),function(){var e=a.length,t=l,n=0,i=function(){e<=(n+=1)||(e<=(t+=1)&&(t=0),l=t,o())},o=function(){var e=a[t],n=new Loader;n.onload=function(t){e.validity(t)?e.parse(t):i()},n.onerror=function(){i()},n.setMethod("GET"),n.setURL(e.url),n.loadText()};o()}(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_Open2ch",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var l=!1,s=0,c=o.getNumberList(),_=c.length;if(!_)return!1;execute_queue.attachFirst((function e(){var o,u=bbs_dictionary.getResponse(c[s]),d=u.getCloneElements(),p=d.length;if(p){var m=new Object;for(m.parent=t.parent,o=0;o<p;o++){var g=d[o];m[g.name]=g.element,a.appendChild(g.element)}i(u,m,r,"response"),l=!0}(s+=1)<_?execute_queue.attachFirst(e,null):n({result:l})}),null)},null})))}function l(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}if("A"==r.tagName&&(u=r.href.match(new RegExp("[?]ID=([a-zA-Z0-9+/.]{3,10})[●!]{0,2}","i")))){(d=new BbsControlId(null,!0)).setId(u[1]),DomNode_InsertAfter(r,p=d.getElement());var _=DocumentCreateText("");p.appendChild(_),d.setTextNode(_)}break;case 3:for(;r;){var u,d,p;if(!(u=DomNodeGetNodeValue(r).match(new RegExp("ID:([a-zA-Z0-9+/.]{3,10})[●!]{0,2}","i"))))break;DomNodeSetNodeValue(r,RegExp.leftContext),(d=new BbsControlId(null,!1)).setId(u[1]),ElementSetTextContent(p=d.getElement(),u[0]),DomNode_InsertAfter(r,p),_=DocumentCreateText(""),p.appendChild(_),d.setTextNode(_),DomNode_InsertAfter(p,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=a.getTextNode();if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromId(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"id")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null})))}function s(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){if(!(_=DomNodeGetNodeValue(r).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i")))){if(_=DomNodeGetNodeValue(r).match(new RegExp("◆$","i")))try{var _,u,d,p=r.parentNode.nextSibling;(_=ElementGetTextContent(p).match(new RegExp("^([a-zA-Z0-9+/.]{10,12})$","i")))&&((u=new BbsControlName(null,!0)).setName("◆"+_[0]),DomNode_InsertAfter(p,d=u.getElement()))}catch(e){}break}DomNodeSetNodeValue(r,RegExp.leftContext),(u=new BbsControlName(null,!1)).setName(_[0]),ElementSetTextContent(d=u.getElement(),_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromName(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"name")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null})))}var c;t.dt&&(r(t.dt),l(t.dt),s(t.dt),BbsControlHostExist(c=t.dt)||(function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:c},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:for(;o;){var _=DomNodeGetNodeValue(o);if(u=_.match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext));else if(u=_.match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})((|\\n) \\])","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText("\n ]"+RegExp.rightContext));else{var u,d,p;if(!(u=_.match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i"))))break;DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext))}}}}}(),BbsControlHostSearch(c,(function(a){a.setResponse(e);var r=a.getHost(),l=e.getHost()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromHost(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"host")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null}))),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();var s=ElementGetElementsByTagName(a,"br");s.length?DomNode_InsertBefore(s[0],r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=DocumentCreateElement("dl");o.style.margin="0px",n.appendChild(o);var r=e.getFollower(),l=0,s=r.length;if(s<=0)return!1;execute_queue.attachFirst((function e(){var n,_=bbs_dictionary.getResponse(r[l].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,n=0;n<d;n++){var m=u[n];p[m.name]=m.element,o.appendChild(m.element)}i(_,p,c,"response")}(l+=1)<s?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(t.dt)),t.dd&&(r(t.dd),l(t.dd),s(t.dd))}var o=function(){var e,t,o=n;try{if("DT"!=o.tagName)return!1}catch(e){return!1}e=o.nextSibling;try{if("DD"!=e.tagName)return!1}catch(e){return!1}try{if("DL"!=(_=o.parentNode).tagName)return!1}catch(e){return!1}try{"BR"!=(t=e.nextSibling.nextSibling).tagName&&(t=null)}catch(e){}if(!t){t=DocumentCreateElement("br");var r=DocumentCreateText("\n");DomNodeInsertAfter(n,r),DomNodeInsertAfter(r,t)}if(!DomNodeGetAttachedDocument(o))return!1;a.extendResponseAnchor(e),function(){function t(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([a-zA-Z0-9+/.]{3,10})[●!]{0,2}","i")))||(t=n.nodeValue.match(new RegExp("^(◆[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))||(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}o&&t(o),e&&t(e)}();var l=ElementGetTextContent(o);if(!l.match(new RegExp("([0-9]+)[ ]","i")))return!1;var s=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!s.getAnalyzed()){l.match(new RegExp("ID:([a-zA-Z0-9+/.]{3,10})[●!]{0,2}","i"))&&s.setId(RegExp.$1),l.match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"))&&s.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:o},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!a[r.tagName]){var l,c=r.childNodes,_=c.length;for(l=0;l<_;l++)n={p:e=(t=i).p,n:t,node:c[l]},e.n=n,t.p=n}break;case 3:var u;if(u=DomNodeGetNodeValue(r).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void s.setHost(u[2]);if(u=DomNodeGetNodeValue(r).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void s.setHost(u[2]);if(u=DomNodeGetNodeValue(r).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void s.setHost(u[2])}}}();var c=new Object;!function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++)a.createResponseAnchorNumbers(ElementGetTextContent(n[t])).getNumbers((function(e){c[e]||(bbs_dictionary.getResponse(e).addFollower(s),c[e]=!0)}))}(),o&&s.addOriginalElements("dt",o),e&&s.addOriginalElements("dd",e),t&&s.addOriginalElements("br",t),s.onerase=function(){var e,t=s.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},s.setAnalyzed()}for(var _=document.body,u=o;u;)"DL"==u.tagName&&(_=u),u=u.parentNode;return i(s,{dt:o,dd:e,parent:_},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_Mimizun",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"(http://mimizun\\.com/log/2ch/[^/]+/[0-9]+)",replace:"$1/",name:"mimizun"},{url:"(http://mimizun\\.com/log/machi/[^/]+/[0-9]+)",replace:"$1/",name:"mimizun"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[1].replace(s,l.replace),a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a,i=1,o=1,r=new Array,l=null,s=null,c=n.base_url,_=c;if(n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));l<1&&(l=1),s<1&&(s=1),l>1e4&&(l=1e4),s>1e4&&(s=1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var c=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));c<1&&(c=1),c>2147483647&&(c=2147483647),t.addNumber(c)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext);var g=DocumentCreateElement("a");ElementSetTextContent(g,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var f="";if(m=ElementGetTextContent(g).match(l)){var h=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),x=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(h<1&&(h=1),x<1&&(x=1),h>1e4&&(h=1e4),x>1e4&&(x=1e4),x<h){var b=h;h=x,x=b}f=h+"-"+x}else(m=ElementGetTextContent(g).match(s))&&((f=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(f=1),f>2147483647&&(f=2147483647));g.href=n.base_url+f}}}}},l||(l=document.getElementById("thread")),l||(l=document.getElementById("thread2")),!l)return!1;var u,d,p=ElementGetElementsByTagName(l,"div"),m=p.length;for(u=0;u<m&&("contributor"!=(g=p[u]).className||!(f=ElementGetTextContent(g).match(new RegExp("([0-9]+)","i")))||(i=parseInt(f[1]),r[i]=!0,1==i));u++);for(u=m-1;u>=0;u--){var g,f;if("contributor"==(g=p[u]).className&&(f=ElementGetTextContent(g).match(new RegExp("([0-9]+)","i")))){o=parseInt(f[1]),r[o]=!0;break}}return a=c,_=c+o+"-",(s=new BbsControlReadMoreButton).setWaitTime(2e3),s.onclick=function(e){var t=new Loader;t.onload=function(t){var n=new RegExp('<a name="([0-9]+)">',"i"),a=0,i=t.length,r=0;execute_queue.attachFirst((function s(){try{if(a>=i)throw 0;if((a=t.indexOf('<div class="contributor">',a))<0)throw 0;var u=t.indexOf("\n",a),d=t.substring(a,u),p=d.match(n);if(p){var m=parseInt(p[1]);if(o<m){var g=bbs_dictionary.getResponse(m);g.clearAnalyzed(),g.clearOriginalElements(),g.clearFollowing();var f,h=StringHtmlCreateDomNodesSafe(d),x=h.length;for(f=0;f<x;f++)l.appendChild(h[f]);r+=1,_=c+(o=m)+"-"}}if(a<u)return a=u+1,void execute_queue.attachFirst(s,null)}catch(u){}e({result:!0,add_count:r})}),null)},t.onerror=function(){e({result:!1})},t.setMethod("GET"),t.setURL(_),t.overrideMimeType("text/plain; charset=Shift_JIS"),t.loadText()},DomNode_InsertAfter(l,s.getElement()),(d=new Loader).onload=function(e){var t=new RegExp('<a name="([0-9]+)">',"i"),a=new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"),l=new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"),s=0,c=e.length;execute_queue.attachFirst((function _(){if(!(s>=c||(s=e.indexOf('<div class="contributor">',s))<0)){var u=e.indexOf("\n",s),d=e.substring(s,u),p=d.match(t);if(p){var m=parseInt(p[1]);if(i<=m&&m<=o);else if(r[m]);else{var g=bbs_dictionary.getResponse(m);if(!g.getAnalyzed()){var f=StringHtmlCreateDomNodesSafe(d),h=f[0],x=f[1];try{if("DIV"!=h.tagName)return;if("contributor"!=h.className)return;if("DIV"!=x.tagName)return;if("res"!=x.className)return}catch(u){return}var b=ElementGetTextContent(h);n.extendResponseAnchor(x),b.match(a)&&g.setId(RegExp.$1),b.match(l)&&g.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:h},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void g.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,}) \\]","i")))return void g.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void g.setHost(c[2])}}}();var v=new Object;!function(){var e,t=ElementGetElementsByTagName(x,"a"),a=t.length;for(e=0;e<a;e++)n.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){v[e]||(bbs_dictionary.getResponse(e).addFollower(g),v[e]=!0)}))}(),h&&g.addOriginalElements("dt",h),x&&g.addOriginalElements("dd",x),g.onerase=function(){},g.setAnalyzed()}}}s<u&&(s=u+1,execute_queue.attachFirst(_,null))}}),null)},d.onerror=function(){},d.setMethod("GET"),d.setURL(a),d.loadText(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_Mimizun",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _,u=bbs_dictionary.getResponse(s[l]),d=u.getCloneElements(),p=d.length;if(p){var m=new Object;for(m.parent=t.parent,_=0;_<p;_++){var g=d[_];m[g.name]=g.element,e.appendChild(g.element)}try{var f=ElementGetElementsByTagName(m.dt,"p")[0];DomNode_InsertBefore(f,m.dd),DomNodeRemove(f)}catch(e){}i(u,m,r,"response"),a=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:a})}),null)},null})))}function l(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlId(null,!1);u.setId(_[1]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=DocumentCreateText("");if(s.appendChild(c),a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromId(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=a[o],u=c.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,l=0;l<d;l++){var m=u[l];p[m.name]=m.element,e.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"p")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g)}catch(e){}i(c,p,_,"id")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}function s(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromName(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=a[o],u=c.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,l=0;l<d;l++){var m=u[l];p[m.name]=m.element,e.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"p")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g)}catch(e){}i(c,p,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}var c;t.dt&&(r(t.dt),l(t.dt),s(t.dt),BbsControlHostExist(c=t.dt)||(function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:c},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:for(;o;){var _=DomNodeGetNodeValue(o);if(u=_.match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext));else if(u=_.match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})( \\])","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(" ]"+RegExp.rightContext));else{var u,d,p;if(!(u=_.match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i"))))break;DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext))}}}}}(),BbsControlHostSearch(c,(function(a){a.setResponse(e);var r=a.getHost(),l=e.getHost()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromHost(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=a[o],u=c.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,l=0;l<d;l++){var m=u[l];p[m.name]=m.element,e.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"p")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g)}catch(e){}i(c,p,_,"host")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null}))),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();var s=ElementGetElementsByTagName(a,"br");s.length?DomNode_InsertBefore(s[0],r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var s,_=bbs_dictionary.getResponse(o[r].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,s=0;s<d;s++){var m=u[s];p[m.name]=m.element,n.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"p")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g)}catch(e){}i(_,p,c,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(t.dt)),t.dd&&(r(t.dd),l(t.dd),s(t.dd))}var o=function(){var e,t=n;try{if("DIV"!=t.tagName)return!1;if("contributor"!=t.className)return!1}catch(e){return!1}e=t.nextSibling;try{if("DIV"!=e.tagName)return!1;if("res"!=e.className)return!1}catch(e){return!1}try{var o=t.parentNode;if("DIV"!=o.tagName)return!1;if(0!=o.id.indexOf("thread"))return!1}catch(e){return!1}if(!DomNodeGetAttachedDocument(t))return!1;a.extendResponseAnchor(e),function(){function n(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i")))||(t=n.nodeValue.match(new RegExp("^(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))||(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}t&&n(t),e&&n(e)}();var r=ElementGetTextContent(t);if(!r.match(new RegExp("([0-9]+)","i")))return!1;var l=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!l.getAnalyzed()){!function(){var e=t.cloneNode(!0);try{DomNodeRemove(ElementGetElementsByTagName(e,"p")[0])}catch(e){}r=ElementGetTextContent(e)}(),r.match(new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"))&&l.setId(RegExp.$1),r.match(new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"))&&l.setName(RegExp.$1),function(){var e,n,a,i={B:1,SCRIPT:1},o=new Object;for(a={p:o,n:o,node:t},o.p=a,o.n=a;o.n!=o;){e=(a=o.n).p,n=a.n,e.n=n,n.p=e;var r=a.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var s,c=r.childNodes,_=c.length;for(s=0;s<_;s++)a={p:e=(n=o).p,n:n,node:c[s]},e.n=a,n.p=a}break;case 3:var u;if(u=DomNodeGetNodeValue(r).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void l.setHost(u[2]);if(u=DomNodeGetNodeValue(r).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,}) \\]","i")))return void l.setHost(u[2]);if(u=DomNodeGetNodeValue(r).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void l.setHost(u[2])}}}();var s=new Object;!function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++)a.createResponseAnchorNumbers(ElementGetTextContent(n[t])).getNumbers((function(e){s[e]||(bbs_dictionary.getResponse(e).addFollower(l),s[e]=!0)}))}(),t&&l.addOriginalElements("dt",t),e&&l.addOriginalElements("dd",e),l.onerase=function(){var e,t=l.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},l.setAnalyzed()}return i(l,{dt:t,dd:e,parent:t.parentNode},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_Logsoku",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"http://logsoku\\.com/thread/.*?\\.2ch\\.net/.*?/[0-9]+/",name:"logsoku"},{url:"http://.*?\\.logsoku\\.com/r/.*?/[0-9]+/",name:"logsoku"},{url:"http://logsoku\\.com/r/.*?/[0-9]+/",name:"logsoku"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[0],a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a,i=1,o=1,r=new Array,l=null,s=null,c=n.base_url,_=c;if(n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));l<1&&(l=1),s<1&&(s=1),l>1e4&&(l=1e4),s>1e4&&(s=1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var c=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));c<1&&(c=1),c>2147483647&&(c=2147483647),t.addNumber(c)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext);var g=DocumentCreateElement("a");ElementSetTextContent(g,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var f="";if(m=ElementGetTextContent(g).match(l)){var h=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),x=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(h<1&&(h=1),x<1&&(x=1),h>1e4&&(h=1e4),x>1e4&&(x=1e4),x<h){var b=h;h=x,x=b}f=h+"-"+x}else(m=ElementGetTextContent(g).match(s))&&((f=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(f=1),f>2147483647&&(f=2147483647));g.href=n.base_url+f}}}}},!(l=document.getElementById("comments")))return!1;var u,d,p=ElementGetElementsByTagName(l,"div"),m=p.length;for(u=0;u<m&&(!(g=p[u].id.match(new RegExp("^([0-9]+)$","i")))||(i=parseInt(g[1]),r[i]=!0,1==i));u++);for(u=m-1;u>=0;u--){var g;if(g=p[u].id.match(new RegExp("^([0-9]+)$","i"))){o=parseInt(g[1]),r[o]=!0;break}}return a=c,_=c+o+"-",(s=new BbsControlReadMoreButton).setWaitTime(2e3),s.onclick=function(e){var t=new Loader;t.onload=function(t){var n=new RegExp('<div id="([0-9]+)">',"i"),a=0,i=t.length,r=0;(a=t.indexOf('<div id="comments">',a))>=0&&(a+=19,execute_queue.attachFirst((function s(){try{if(a>=i)throw 0;if((a=t.indexOf("<div id=",a))<0)throw 0;var u=t.indexOf("</div>",a);u>=0&&(u=t.indexOf("</div>",u+6))>=0&&(u+=6);var d=t.substring(a,u),p=d.match(n);if(p){var m=parseInt(p[1]);if(o<m){var g=bbs_dictionary.getResponse(m);g.clearAnalyzed(),g.clearOriginalElements(),g.clearFollowing();var f,h=StringHtmlCreateDomNodesSafe(d),x=h.length;for(f=0;f<x;f++)l.appendChild(h[f]);r+=1,_=c+(o=m)+"-"}}if(a<u)return a=u,void execute_queue.attachFirst(s,null)}catch(u){}e({result:!0,add_count:r})}),null))},t.onerror=function(){e({result:!1})},t.setMethod("GET"),t.setURL(_),t.loadText()},DomNode_InsertAfter(l,s.getElement()),(d=new Loader).onload=function(e){var t=new RegExp('<div id="([0-9]+)">',"i"),a=new RegExp("ID:([-a-zA-Z0-9+/.]+)[●!]{0,2}","i"),l=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"),s=0,c=e.length;(s=e.indexOf('<div id="comments">',s))>=0&&(s+=19,execute_queue.attachFirst((function _(){if(!(s>=c||(s=e.indexOf("<div id=",s))<0)){var u=e.indexOf("</div>",s);u>=0&&(u=e.indexOf("</div>",u+6))>=0&&(u+=6);var d=e.substring(s,u),p=d.match(t);if(p){var m=parseInt(p[1]);if(i<=m&&m<=o);else if(r[m]);else{var g=bbs_dictionary.getResponse(m);if(!g.getAnalyzed()){var f=StringHtmlCreateDomNodesSafe(d)[0],h=ElementGetElementsByTagName(f,"DIV")[0];try{if("DIV"!=f.tagName)return;if(!f.id.match(/^[0-9]+$/))return;if("comment"!=h.className)return}catch(u){return}var x=ElementGetTextContent(f);n.extendResponseAnchor(h),x.match(a)&&g.setId(RegExp.$1),x.match(l)&&g.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:f},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void g.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})\\n \\]","i")))return void g.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void g.setHost(c[2])}}}();var b=new Object;!function(){var e,t=ElementGetElementsByTagName(h,"a"),a=t.length;for(e=0;e<a;e++)n.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){b[e]||(bbs_dictionary.getResponse(e).addFollower(g),b[e]=!0)}))}(),f&&g.addOriginalElements("dt",f),h&&g.addOriginalElements("dd",h),g.onerase=function(){},g.setAnalyzed()}}}s<u&&(s=u,execute_queue.attachFirst(_,null))}}),null))},d.onerror=function(){},d.setMethod("GET"),d.setURL(a),d.loadText(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_Logsoku",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _,u=bbs_dictionary.getResponse(s[l]),d=u.getCloneElements(),p=d.length;if(p){var m=new Object;for(m.parent=t.parent,_=0;_<p;_++){var g=d[_];m[g.name]=g.element,e.appendChild(g.element)}try{var f=ElementGetElementsByTagName(m.dt,"div")[0];DomNode_InsertBefore(f,m.dd),DomNodeRemove(f),m.dd.style.minHeight="0px"}catch(e){}i(u,m,r,"response"),a=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:a})}),null)},null})))}function l(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}if("SPAN"==r.tagName){var _;try{_=r.dataset.logsokuLink}catch(e){}if(_||(_=""),d=_.match(new RegExp("/ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}$","i"))){(p=new BbsControlId(null,!0)).setId(d[1]),DomNode_InsertAfter(r,m=p.getElement());var u=DocumentCreateText("");m.appendChild(u),p.setTextNode(u)}}break;case 3:for(;r;){var d,p,m;if(!(d=DomNodeGetNodeValue(r).match(new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"))))break;DomNodeSetNodeValue(r,RegExp.leftContext),(p=new BbsControlId(null,!1)).setId(d[1]),ElementSetTextContent(m=p.getElement(),d[0]),DomNode_InsertAfter(r,m),u=DocumentCreateText(""),m.appendChild(u),p.setTextNode(u),DomNode_InsertAfter(m,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=a.getTextNode();if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromId(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=a[o],u=c.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,l=0;l<d;l++){var m=u[l];p[m.name]=m.element,e.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"div")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g),p.dd.style.minHeight="0px"}catch(e){}i(c,p,_,"id")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}function s(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromName(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=a[o],u=c.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,l=0;l<d;l++){var m=u[l];p[m.name]=m.element,e.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"div")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g),p.dd.style.minHeight="0px"}catch(e){}i(c,p,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}var c;t.dt&&(r(t.dt),l(t.dt),s(t.dt),BbsControlHostExist(c=t.dt)||(function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:c},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:for(;o;){var _=DomNodeGetNodeValue(o);if(u=_.match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext));else if(u=_.match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(\\n \\])","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText("\n ]"+RegExp.rightContext));else{var u,d,p;if(!(u=_.match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i"))))break;DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext))}}}}}(),BbsControlHostSearch(c,(function(a){a.setResponse(e);var r=a.getHost(),l=e.getHost()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromHost(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l,c=a[o],u=c.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,l=0;l<d;l++){var m=u[l];p[m.name]=m.element,e.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"div")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g),p.dd.style.minHeight="0px"}catch(e){}i(c,p,_,"host")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null}))),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();var s=ElementGetElementsByTagName(a,"div");s.length?DomNode_InsertBefore(s[0],r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var s,_=bbs_dictionary.getResponse(o[r].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,s=0;s<d;s++){var m=u[s];p[m.name]=m.element,n.appendChild(m.element)}try{var g=ElementGetElementsByTagName(p.dt,"div")[0];DomNode_InsertBefore(g,p.dd),DomNodeRemove(g),p.dd.style.minHeight="0px"}catch(e){}i(_,p,c,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(t.dt)),t.dd&&(r(t.dd),l(t.dd),s(t.dd))}var o=function(){var e,t=n;try{if("DIV"!=t.tagName)return!1;if(!t.id.match(/^[0-9]+$/))return!1}catch(e){return!1}try{if("comment"!=(e=ElementGetElementsByTagName(t,"DIV")[0]).className)return!1}catch(e){return!1}try{var o=t.parentNode;if("DIV"!=o.tagName)return!1;if("comments"!=o.id)return!1}catch(e){return!1}if(!DomNodeGetAttachedDocument(t))return!1;a.extendResponseAnchor(e),function(){function n(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i")))||(t=n.nodeValue.match(new RegExp("^(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))||(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}t&&(function(e){var t,n,a,i={A:1},o={comment:1},r=new Object;for(a={p:r,n:r,node:e},r.p=a,r.n=a;r.n!=r;){t=(a=r.n).p,n=a.n,t.n=n,n.p=t;var l=a.node;switch(l.nodeType){case 1:if(i[l.tagName]);else if(o[l.className]);else{var s,c=l.childNodes,_=c.length;for(s=0;s<_;s++)a={p:t=(n=r).p,n:n,node:c[s]},t.n=a,n.p=a}break;case 3:for(;l&&DomNodeGetNodeValue(l).match(new RegExp("[[0-9]+/[0-9]+回.*?]","i"));){DomNodeSetNodeValue(l,RegExp.leftContext);var u=DocumentCreateText(RegExp.rightContext);DomNode_InsertAfter(l,u),l=u}}}}(t),n(t)),e&&n(e)}();var r=ElementGetTextContent(t);if(!r.match(new RegExp("([0-9]+)","i")))return!1;var l=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!l.getAnalyzed()){!function(){var e=t.cloneNode(!0);try{DomNodeRemove(ElementGetElementsByTagName(e,"div")[0])}catch(e){}r=ElementGetTextContent(e)}(),r.match(new RegExp("ID:([a-zA-Z0-9+/.]{8,10})[●!]{0,2}","i"))&&l.setId(RegExp.$1),r.match(new RegExp("(◆(|[ ])[a-zA-Z0-9+/.]{10,12})","i"))&&l.setName(RegExp.$1),function(){var e,n,a,i={B:1,SCRIPT:1},o=new Object;for(a={p:o,n:o,node:t},o.p=a,o.n=a;o.n!=o;){e=(a=o.n).p,n=a.n,e.n=n,n.p=e;var r=a.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var s,c=r.childNodes,_=c.length;for(s=0;s<_;s++)a={p:e=(n=o).p,n:n,node:c[s]},e.n=a,n.p=a}break;case 3:var u;if(u=DomNodeGetNodeValue(r).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void l.setHost(u[2]);if(u=DomNodeGetNodeValue(r).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})\\n \\]","i")))return void l.setHost(u[2]);if(u=DomNodeGetNodeValue(r).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void l.setHost(u[2])}}}();var s=new Object;!function(){var t,n=ElementGetElementsByTagName(e,"a"),i=n.length;for(t=0;t<i;t++)a.createResponseAnchorNumbers(ElementGetTextContent(n[t])).getNumbers((function(e){s[e]||(bbs_dictionary.getResponse(e).addFollower(l),s[e]=!0)}))}(),t&&l.addOriginalElements("dt",t),e&&l.addOriginalElements("dd",e),l.onerase=function(){var e,t=l.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},l.setAnalyzed()}return i(l,{dt:t,dd:e,parent:t.parentNode},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_2ch_v6",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"((http|https)://[^.]+\\.(2ch|5ch)\\.net/test/read\\.cgi/c/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"2ch"},{url:"((http|https)://[^.]+\\.(2ch|5ch)\\.net/[^/]+/kako/[0-9]+)",replace:"$1/",secure:!0,name:"2ch"},{url:"((http|https)://[^.]+\\.bbspink\\.com/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"pink"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[1].replace(s,l.replace),l.secure&&(c=a.base_url.match(new RegExp("[^:]+(.*)")))&&(a.base_url="https"+c[1]),a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a,i,o,r,l,s=1,c=1,_=new Array,u=0,d=0,p=null,m=[],g=null,f=n.base_url;function h(e){var t;switch(n.bbs_name){case"2ch_v5":var a=e.match(new RegExp("<dt>.*?<dd>[ ].*?[ ]<br><br>","i"));if(a&&!(a=a[0].match(new RegExp("[\r\n]"))))return!0;break;case"2ch_v6":return t=new RegExp('<div[^>]+class="(| )thread( |)"[^>]*>.*?<div[^>]+class="(| )post( |)"[^>]*>.*?<div[^>]+class="(| )message( |)"[^>]*>',"i"),Boolean(e.match(t));case"pink":return t=new RegExp('<dl[^>]+class="(| )post( |)"[^>]*>.*?<dd[^>]+class="(| )thread_in( |)"[^>]*>',"i"),Boolean(e.match(t))}return!1}function x(e){var t=i.length,a=d,o=0,r=function(){t<=(o+=1)?e({result:!1}):(t<=(a+=1)&&(a=0),d=a,l())},l=function(){var t=i[a],o=new Loader;switch(o.onload=function(n){t.validity(n)?t.parse(n,(function(t){t.result?e(t):r()})):r()},o.onerror=function(){r()},o.setMethod("GET"),o.setURL(t.url),n.bbs_name){case"2ch_v5":case"2ch_v6":case"pink":o.overrideMimeType("text/plain; charset=Shift_JIS")}o.loadText()};l()}if("2ch"==n.bbs_name&&(n.bbs_name=(o=function(){var e=new RegExp("read[.]cgi[ \t]+ver[ \t]*([0-9]+)[.][0-9]+","i"),t=ElementGetElementsByClassName(document.body,"footer"),n=t[t.length-1];if(n){var a=ElementGetTextContent(n).match(e);if(a)return parseInt(a[1])}return 5}(),6==o||o>=7?"2ch_v6":"2ch_v5")),n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));l<1&&(l=1),s<1&&(s=1),l>1e4&&(l=1e4),s>1e4&&(s=1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var c=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));c<1&&(c=1),c>2147483647&&(c=2147483647),t.addNumber(c)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext);var g=DocumentCreateElement("span");g.style.cssText="color:#00F; text-decoration: underline; cursor: pointer;",ElementSetTextContent(g,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var f="";if(m=ElementGetTextContent(g).match(l)){var h=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),x=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(h<1&&(h=1),x<1&&(x=1),h>1e4&&(h=1e4),x>1e4&&(x=1e4),x<h){var b=h;h=x,x=b}f=h+"-"+x}else(m=ElementGetTextContent(g).match(s))&&((f=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(f=1),f>2147483647&&(f=2147483647));g.href=n.base_url+f}}}}},!p){var b=(l=ElementGetElementsByClassName(document.body,"thread")).length;for(r=0;r<b;r++)m.push(l[r]),p=l[r]}if(!p)for(b=(l=ElementGetElementsByTagName(document.body,"DL")).length,r=0;r<b;r++)m.push(l[r]),p=l[r];if(!p)return!1;function v(e){var t,a;switch(n.bbs_name){case"2ch_v5":t=function(e){return ElementGetElementsByTagName(e,"dt")};break;case"2ch_v6":case"pink":t=function(e){return ElementGetElementsByClassName(e,"post")}}for(a=m.length-1;a>=0;a--){var i=t(m[a]),o=i.length;if(o){var r=new RegExp("^[ \t\r\n]*([0-9]+)","i");if(ElementGetTextContent(i[o-1]).match(r))return void e(parseInt(RegExp.$1))}}}return function(){var e;switch(n.bbs_name){case"2ch_v5":e=function(e){return ElementGetElementsByTagName(e,"dt")};break;case"2ch_v6":case"pink":e=function(e){return ElementGetElementsByClassName(e,"post")}}var t,a,i=0,o=new RegExp("^[ \t\r\n]*([0-9]+)","i"),r=m.length;for(t=0;t<r;t++){var l=e(m[t]),c=l.length;for(a=0;a<c;a++){var u=ElementGetTextContent(l[a]).match(o);if(!u)break;if(0==i){if(s=parseInt(u[1]),_[0]=!0,s>1)return}else if(1==i)return s=parseInt(u[1]),_[s]=!0,void(s<=2&&(s=1));i+=1}}}(),v((function(e){_[c=e]=!0})),a=[{url:f,parse:function(e){var t,a,i,o=new RegExp('id="([0-9]+)',"i"),l=new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"),u=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i");switch(n.bbs_name){case"2ch_v5":o=new RegExp("([0-9]+)","i"),t="<dt>",a="<br><br>";break;case"2ch_v6":t='<div class="post"',a="</div></div>",i="message";break;case"pink":t='<dl class="post"',a="</dd></dl>",i="thread_in"}var d=0,p=e.length;execute_queue.attachFirst((function m(){if(!(d>=p||(d=e.indexOf(t,d))<0)){var g=e.indexOf(a,d);g>=0&&(g+=a.length);var f=e.substring(d,g),h=f.match(o);if(h){var x=parseInt(h[1]);if(s<=x&&x<=c);else if(_[x]);else{var b,v,y,E,w,S=StringHtmlCreateDomNodesSafe(f);try{switch(n.bbs_name){case"2ch_v5":if("DT"!=(v=y=E=S[0]).tagName)return;if("DD"!=(w=S[1]).tagName)return;break;case"2ch_v6":case"pink":if("post"!=(b=S[0]).className)return;ElementGetElementsByClassName(b,"number")[0],v=ElementGetElementsByClassName(b,"name")[0],y=ElementGetElementsByClassName(b,"date")[0],E=ElementGetElementsByClassName(b,"uid")[0]||y,w=ElementGetElementsByClassName(b,i)[0]}}catch(g){return}var C=bbs_dictionary.getResponse(x);if(!C.getAnalyzed()){n.extendResponseAnchor(w),ElementGetTextContent(E).match(l)&&C.setId(RegExp.$1),ElementGetTextContent(v).match(u)&&C.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:y},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void C.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void C.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void C.setHost(c[2])}}}();var A=new Object;!function(){var e,t=ElementGetElementsByTagName(w,"span"),a=t.length;for(e=0;e<a;e++)n.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){A[e]||(bbs_dictionary.getResponse(e).addFollower(C),A[e]=!0)}))}();var k=S.length;for(r=0;r<k;r++)C.addOriginalElements(String(r),S[r]);C.onerase=function(){},C.setAnalyzed()}}}d<g&&(d=g,execute_queue.attachFirst(m,null))}}),null)},validity:h}],i=[{url:f+c+"-",parse:function(e,t){v((function(e){_[c=e]=!0}));var a,i,o=new RegExp("([0-9]+)","i");switch(n.bbs_name){case"2ch_v5":a="<dt>",i="<br><br>";break;case"2ch_v6":a='<div class="post"',i="</div></div>";break;case"pink":a='<dl class="post"',i="</dd></dl>"}var r=0,l=e.length,s=0;execute_queue.attachFirst((function n(){try{if(r>=l)throw 0;if((r=e.indexOf(a,r))<0)throw 0;var _=e.indexOf(i,r);_>=0&&(_+=i.length);var u=e.substring(r,_),d=u.match(o);if(d){var m=parseInt(d[1]);if(c<m){var g=bbs_dictionary.getResponse(m);g.clearAnalyzed(),g.clearOriginalElements(),g.clearFollowing(),"<br>"==e.substr(_,4)&&(u+="<br>");var f,h=StringHtmlCreateDomNodesSafe(u),x=h.length;for(f=0;f<x;f++)p.appendChild(h[f]);s+=1,c=m}}if(r<_)return r=_,void execute_queue.attachFirst(n,null)}catch(_){if(_)return void t({result:!1})}t({result:!0,add_count:s})}),null)},validity:h}],u=0,d=0,(g=new BbsControlReadMoreButton).setWaitTime(2e3),g.onclick=x,DomNode_InsertAfter(p,g.getElement()),function(){var e,t,a,i,o;function r(){i&&(i.release(),i=null),window.removeEventListener?(t.removeEventListener("click",_),e.removeEventListener("submit",c)):window.detachEvent&&(t.detachEvent("onclick",_),e.detachEvent("onsubmit",c)),o&&o.release()}function l(){a.value=""}function s(e){t.disabled=!e}function c(e){s(!1)}function _(t){var a,i;switch(n.bbs_name){case"2ch_v5":case"2ch_v6":case"pink":a=800,i=600;var r=document.cookie;r&&-1!=r.indexOf("PREN=")&&(a=600,i=450)}var c="_pageexpand_"+Math.floor(2147483647*Math.random()),_=new BbsControlPopupIframe(c);_.setWindowSize(a,i),_.onclose=function(){s(!0)};var u,d,p=_.getIFrameElement();e.target=c,u=!1,d=null,(o=task_container.createTask()).setDestructorFunc((function(){o=null})),o.setExecuteFunc((function(){try{var e="",t=p.contentWindow;if(t.document&&(e=t.document.URL),e.match(/^(http|https):/))switch(n.bbs_name){case"2ch_v5":case"2ch_v6":case"pink":if(-1==e.indexOf("/test/bbs.cgi"))u=!0;else if(!d){var a=t.document.body;a&&-1!=ElementGetTextContent(a).indexOf("書きこみが終わりました")&&(d=(new Date).getTime())}}d&&(new Date).getTime()-d>2e3&&(u=!0)}catch(e){u=!0}u&&(o&&o.release(),_.close(),s(!0),d&&(x((function(){})),l()))}))}!function(){var i,o=ElementGetElementsByTagName(document.body,"form");switch(n.bbs_name){case"2ch_v5":case"2ch_v6":case"pink":for(i=0;i<o.length;i++)if(o[i].action.indexOf("/test/bbs.cgi")>=0){e=o[i];break}}if(e){for(o=ElementGetElementsByTagName(e,"input"),i=0;i<o.length;i++)if("submit"==o[i].type.toLowerCase()){t=o[i];break}(o=ElementGetElementsByTagName(e,"textarea")).length&&(a=o[0],n.form_textarea=a);var r=new BbsControlDockingForm(e,!1);r.setStyle("background:#e8e8e8; background-image:linear-gradient(to bottom, #f8f8f8, #e8e8e8); padding:10px 20px; border:1px solid #888; border-radius:4px; box-shadow:2px 2px 5px #aaa; margin:0px;"),n.docking_form=r}}(),e&&t&&a&&"true"!=window.localStorage.getItem("autoPost")&&(n.docking_form&&(n.docking_form.onreset=l),function(){try{var t=new RegExp("^[^:]+"),n=e.action.match(t),a=document.URL.match(t);if(!n)return!0;if(!a)return!0;if(n[0]===a[0])return!1}catch(e){}return!0}()||0==d&&(window.addEventListener?(t.addEventListener("click",_),e.addEventListener("submit",c)):window.attachEvent&&(t.attachEvent("onclick",_),e.attachEvent("onsubmit",c)),(i=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){r()}))))}(),function(){var e=a.length,t=u,i=0,o=function(){e<=(i+=1)||(e<=(t+=1)&&(t=0),u=t,r())},r=function(){var e=a[t],i=new Loader;switch(i.onload=function(t){e.validity(t)?e.parse(t):o()},i.onerror=function(){o()},i.setMethod("GET"),i.setURL(e.url),n.bbs_name){case"2ch_v5":case"2ch_v6":case"pink":i.overrideMimeType("text/plain; charset=Shift_JIS")}i.loadText()};r()}(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_2ch_v6",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlId(null,!1);u.setId(_[1]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=DocumentCreateText("");if(s.appendChild(c),a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromId(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l=DocumentCreateElement("div");l.style.margin="0px",e.appendChild(l);var c,u=a[o],d=u.getCloneElements(),p=d.length;if(p){var m=[];for(c=0;c<p;c++){var g=d[c];m.push(g.element),l.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,_,"id")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}function l(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromName(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l=DocumentCreateElement("div");l.style.margin="0px",e.appendChild(l);var c,u=a[o],d=u.getCloneElements(),p=d.length;if(p){var m=[];for(c=0;c<p;c++){var g=d[c];m.push(g.element),l.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}var s,c,_,u,d,p;switch(a.bbs_name){case"2ch_v5":s=c=_=u=t.clone_nodes[0],d=t.clone_nodes[1];break;case"2ch_v6":case"pink":var m=t.clone_nodes[0];s=ElementGetElementsByClassName(m,"number")[0],c=ElementGetElementsByClassName(m,"name")[0],_=ElementGetElementsByClassName(m,"date")[0],u=ElementGetElementsByClassName(m,"uid")[0]||_,d=ElementGetElementsByClassName(m,"message")[0]||ElementGetElementsByClassName(m,"thread_in")[0]}s&&(BbsControlReplyExist(p=s)||(function(){var e=p.firstChild;if(e)switch(e.nodeType){case 1:if(!(t=ElementGetTextContent(e).match(new RegExp("^[0-9]+$","i"))))return;new BbsControlReply(e,!0);break;case 3:var t;if(!(t=DomNodeGetNodeValue(e).match(new RegExp("^[0-9]+","i"))))return;DomNodeSetNodeValue(e,RegExp.leftContext);var n=new BbsControlReply(null,!1).getElement();ElementSetTextContent(n,t[0]),DomNode_InsertAfter(e,n),DomNode_InsertAfter(n,e=DocumentCreateText(RegExp.rightContext))}}(),BbsControlReplySearch(p,(function(t){t.setResponse(e);var n=t.getElement(),i=a.docking_form,o=a.form_textarea;return t.onclick=function(t){i.popupForReply(n);var a,r=o.value,l=r.length,s=o.selectionEnd;a=s>=l?">>"+e.getNumber()+"\n":">>"+e.getNumber(),o.value=r.slice(0,s)+a+r.slice(s),o.selectionEnd=s+a.length,o.focus(),t.stopImmediatePropagation&&t.stopImmediatePropagation()},null})))),c&&l(c),_&&function(a){BbsControlHostExist(a)||(function(){var e,t,n,i={B:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r);if(u=_.match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))DomNodeSetNodeValue(r,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText(RegExp.rightContext));else if(u=_.match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})((|\\n) \\])","i")))DomNodeSetNodeValue(r,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText("\n ]"+RegExp.rightContext));else{var u,d,p;if(!(u=_.match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i"))))break;DomNodeSetNodeValue(r,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText(RegExp.rightContext))}}}}}(),BbsControlHostSearch(a,(function(a){a.setResponse(e);var r=a.getHost(),l=e.getHost()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromHost(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l=DocumentCreateElement("div");l.style.margin="0px",e.appendChild(l);var c,u=a[o],d=u.getCloneElements(),p=d.length;if(p){var m=[];for(c=0;c<p;c++){var g=d[c];m.push(g.element),l.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,_,"host")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}(_),u&&(r(u),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();for(var s=a.lastChild;s&&"BR"==s.tagName;)s=s.previousSibling;s?DomNode_InsertAfter(s,r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var s=DocumentCreateElement("div");s.style.margin="0px",n.appendChild(s);var _,u=bbs_dictionary.getResponse(o[r].getNumber()),d=u.getCloneElements(),p=d.length;if(p){var m=[];for(_=0;_<p;_++){var g=d[_];m.push(g.element),s.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,c,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(u)),d&&(function(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"span"),i=n.length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _=DocumentCreateElement("div");_.style.margin="0px",e.appendChild(_);var u,d=bbs_dictionary.getResponse(s[l]),p=d.getCloneElements(),m=p.length;if(m){var g=[];for(u=0;u<m;u++){var f=p[u];g.push(f.element),_.appendChild(f.element)}var h=new Object;h.clone_nodes=g,h.parent=t.parent,i(d,h,r,"response"),a=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:a})}),null)},null})))}(d),r(d),l(d))}var o=function(){var e,t,o,r,l,s,c=[];switch(a.bbs_name){case"2ch_v5":try{var _=n;if("DT"!=_.tagName)return!1;var u=DomNodeGetNextElementSibling(_),d=_.parentNode;if("DD"!=u.tagName)return!1;if("DL"!=d.tagName)return!1;e=d,t=o=r=l=_,s=u,c.push(_),c.push(u)}catch(e){return!1}break;case"2ch_v6":case"pink":try{if("post"!=(e=n).className)return!1;t=ElementGetElementsByClassName(e,"number")[0],o=ElementGetElementsByClassName(e,"name")[0],r=ElementGetElementsByClassName(e,"date")[0],l=ElementGetElementsByClassName(e,"uid")[0]||r,s=ElementGetElementsByClassName(e,"message")[0]||ElementGetElementsByClassName(e,"thread_in")[0],c.push(e)}catch(e){return!1}}if(!DomNodeGetAttachedDocument(e))return!1;if(a.extendResponseAnchor(s),function(){function e(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([-a-zA-Z0-9+/.●!=]{8,})","i")))||(t=n.nodeValue.match(new RegExp("^(◆[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))||(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}t&&e(t),o&&e(o),r&&e(r),l&&e(l),s&&e(s)}(),function(){switch(a.bbs_name){case"2ch_v5":case"2ch_v6":case"pink":var t,n=ElementGetElementsByClassName(e,"back-links");for(t=n.length-1;t>=0;t--)DomNodeRemove(n[t])}}(),!ElementGetTextContent(t).match(new RegExp("^([0-9]+)","i")))return!1;var p=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!p.getAnalyzed()){ElementGetTextContent(l).match(new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"))&&p.setId(RegExp.$1),ElementGetTextContent(o).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"))&&p.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:r},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var l,s=o.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=i).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:var _;if(_=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void p.setHost(_[2]);if(_=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void p.setHost(_[2]);if(_=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void p.setHost(_[2])}}}();var m,g=new Object;!function(){var e,t=ElementGetElementsByTagName(s,"span"),n=t.length;for(e=0;e<n;e++)a.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){g[e]||(bbs_dictionary.getResponse(e).addFollower(p),g[e]=!0)}))}();var f=c.length;for(m=0;m<f;m++)p.addOriginalElements(String(m),c[m]);p.onerase=function(){var e,t=p.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},p.setAnalyzed()}var h=new Object;return h.parent=document.body,h.clone_nodes=c,i(p,h,null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_5ch_v8",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"((http|https)://[^.]+\\.(2ch|5ch)\\.net/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"5ch"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[1].replace(s,l.replace),l.secure&&(c=a.base_url.match(new RegExp("[^:]+(.*)")))&&(a.base_url="https"+c[1]),a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a,i,o,r,l,s,c=1,_=1,u=new Array,d=0,p=0,m=null,g=[],f=null,h=n.base_url;if("5ch"==n.bbs_name&&(n.bbs_name=(o=function(){var e=new RegExp("read[.]cgi[ \t]+ver[ \t]*([0-9]+)[.][0-9]+","i"),t=ElementGetElementsByTagName(document.body,"footer"),n=t[t.length-1];if(n){var a=ElementGetTextContent(n).match(e);if(a)return parseInt(a[1])}return 0}(),o>=8?"5ch_v8":""),!n.bbs_name))return!1;function x(e){var t;return"5ch_v8"===n.bbs_name&&(t=new RegExp('<article[^>]+class="(|[^"]* )post(|[^"]* )"[^>]*>.*?<section[^>]+class="(|[^"]* )post-content(|[^"]* )"[^>]*>',"i"),Boolean(e.match(t)))}function b(e){var t=i.length,a=p,o=0,r=function(){t<=(o+=1)?e({result:!1}):(t<=(a+=1)&&(a=0),p=a,l())},l=function(){var t=i[a],o=new Loader;o.onload=function(n){t.validity(n)?t.parse(n,(function(t){t.result?e(t):r()})):r()},o.onerror=function(){r()},o.setMethod("GET"),o.setURL(t.url),"5ch_v8"===n.bbs_name&&o.overrideMimeType("text/plain; charset=Shift_JIS"),o.loadText()};l()}if(n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));l<1&&(l=1),s<1&&(s=1),l>1e4&&(l=1e4),s>1e4&&(s=1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var c=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));c<1&&(c=1),c>2147483647&&(c=2147483647),t.addNumber(c)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext);var g=DocumentCreateElement("span");g.style.cssText="color:#00F; text-decoration: underline; cursor: pointer;",ElementSetTextContent(g,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var f="";if(m=ElementGetTextContent(g).match(l)){var h=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),x=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(h<1&&(h=1),x<1&&(x=1),h>1e4&&(h=1e4),x>1e4&&(x=1e4),x<h){var b=h;h=x,x=b}f=h+"-"+x}else(m=ElementGetTextContent(g).match(s))&&((f=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(f=1),f>2147483647&&(f=2147483647));g.href=n.base_url+f}}}}},!m){var v=(s=ElementGetElementsByClassName(document.body,"thread")).length;for(l=0;l<v;l++)g.push(s[l]),m=s[l]}if(!m)for(v=(s=ElementGetElementsByTagName(document.body,"DL")).length,l=0;l<v;l++)g.push(s[l]),m=s[l];if(!m)return!1;function y(e){var t,a;for("5ch_v8"===n.bbs_name&&(t=function(e){return ElementGetElementsByClassName(e,"post")}),a=g.length-1;a>=0;a--){var i=t(g[a]),o=i.length;if(o){var r=new RegExp("^[ \t\r\n]*([0-9]+)","i");if(ElementGetTextContent(i[o-1]).match(r))return void e(parseInt(RegExp.$1))}}}return function(){var e;"5ch_v8"===n.bbs_name&&(e=function(e){return ElementGetElementsByClassName(e,"post")});var t,a,i=0,o=new RegExp("^[ \t\r\n]*([0-9]+)","i"),r=g.length;for(t=0;t<r;t++){var l=e(g[t]),s=l.length;for(a=0;a<s;a++){var _=ElementGetTextContent(l[a]).match(o);if(!_)break;if(0==i){if(c=parseInt(_[1]),u[0]=!0,c>1)return}else if(1==i)return c=parseInt(_[1]),u[c]=!0,void(c<=2&&(c=1));i+=1}}}(),y((function(e){u[_=e]=!0})),a=[{url:h,parse:function(e){var t,a,i,o=new RegExp('id="([0-9]+)',"i"),r=new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"),s=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i");"5ch_v8"===n.bbs_name&&(t='<article id="',a="</article>",i="post-content");var d=0,p=e.length;execute_queue.attachFirst((function m(){if(!(d>=p||(d=e.indexOf(t,d))<0)){var g=e.indexOf(a,d);g>=0&&(g+=a.length);var f=e.substring(d,g),h=f.match(o);if(h){var x=parseInt(h[1]);if(c<=x&&x<=_);else if(u[x]);else{var b,v,y,E,w,S=StringHtmlCreateDomNodesSafe(f);try{if("5ch_v8"===n.bbs_name){if(!(b=S[0]).classList.contains("post"))return;ElementGetElementsByClassName(b,"postid")[0],v=ElementGetElementsByClassName(b,"postusername")[0],y=ElementGetElementsByClassName(b,"date")[0],E=ElementGetElementsByClassName(b,"uid")[0]||y,w=ElementGetElementsByClassName(b,i)[0]}}catch(g){return}var C=bbs_dictionary.getResponse(x);if(!C.getAnalyzed()){n.extendResponseAnchor(w),ElementGetTextContent(E).match(r)&&C.setId(RegExp.$1),ElementGetTextContent(v).match(s)&&C.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:y},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void C.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void C.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void C.setHost(c[2])}}}();var A=new Object;!function(){var e,t=ElementGetElementsByTagName(w,"span"),a=t.length;for(e=0;e<a;e++)n.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){A[e]||(bbs_dictionary.getResponse(e).addFollower(C),A[e]=!0)}))}();var k=S.length;for(l=0;l<k;l++)C.addOriginalElements(String(l),S[l]);C.onerase=function(){},C.setAnalyzed()}}}d<g&&(d=g,execute_queue.attachFirst(m,null))}}),null)},validity:x}],i=[{url:h+_+"-",parse:function(e,t){y((function(e){u[_=e]=!0}));var a,i,o=new RegExp("([0-9]+)","i");"5ch_v8"===n.bbs_name&&(a='<article id="',i="</article>");var r=0,l=e.length,s=0;execute_queue.attachFirst((function n(){try{if(r>=l)throw 0;if((r=e.indexOf(a,r))<0)throw 0;var c=e.indexOf(i,r);c>=0&&(c+=i.length);var u=e.substring(r,c),d=u.match(o);if(d){var p=parseInt(d[1]);if(_<p){var g=bbs_dictionary.getResponse(p);g.clearAnalyzed(),g.clearOriginalElements(),g.clearFollowing();var f,h=StringHtmlCreateDomNodesSafe(u),x=h.length;for(f=0;f<x;f++)b=void 0,v=void 0,b=m.getElementsByTagName("article"),(v=b[b.length-1])?DomNode_InsertAfter(v,h[f]):m.appendChild(h[f]);s+=1,_=p}}if(r<c)return r=c,void execute_queue.attachFirst(n,null)}catch(c){if(c)return void t({result:!1})}var b,v;t({result:!0,add_count:s})}),null)},validity:x}],d=0,p=0,(f=new BbsControlReadMoreButton).setWaitTime(2e3),f.onclick=b,(r=ElementGetElementsByClassName(document.body,"newposts")[0])&&DomNode_InsertBefore(r,f.getElement()),function(){var e,t,a,i,o,r;function s(){r&&(r.release(),r=null)}function c(e){a.disabled=!e}(i=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){o&&(e.removeEventListener("submit",o),o=null),i&&(i.release(),i=null),s()})),e=function(){var e,t=ElementGetElementsByTagName(document.body,"form");if("5ch_v8"===n.bbs_name)for(e=0;e<t.length;e++)if(t[e].action.indexOf("/test/bbs.cgi")>=0)return t[e];return null}(),e&&(a=function(){var t=ElementGetElementsByTagName(e,"input");for(l=0;l<t.length;l++)if("submit"==t[l].type.toLowerCase())return t[l];return null}(),n.form_textarea=t=ElementGetElementsByTagName(e,"textarea")[0]||null,(n.docking_form=new BbsControlDockingForm(e,!1)).setStyle("background:#e8e8e8; background-image:linear-gradient(to bottom, #f8f8f8, #e8e8e8); padding:10px 20px; border:1px solid #888; border-radius:4px; box-shadow:2px 2px 5px #aaa; margin:0px;")),function(){if(!e)return!1;if(!a)return!1;if(!t)return!1;if("true"==window.localStorage.getItem("autoPost"))return!1;var n=URL_Parser(WindowGetOwnerURL(window)),i=URL_Parser(e.action);return n.origin==i.origin&&0==p}()&&(o=function(a){var i,o;if(c(!1),"5ch_v8"===n.bbs_name){i=800,o=600;var l=document.cookie;l&&-1!=l.indexOf("PREN=")&&(i=600,o=450)}var _="_pageexpand_"+Math.floor(2147483647*Math.random()),u=new BbsControlPopupIframe(_);u.setWindowSize(i,o),u.onclose=function(){c(!0)};var d,p,m=u.getIFrameElement();e.target=_,d=!1,p=null,(r=task_container.createTask()).setDestructorFunc((function(){r=null})),r.setExecuteFunc((function(){try{var e=m.contentWindow,a=e.document.URL;if(a.match(/^(http|https):/)&&"5ch_v8"===n.bbs_name)if(-1==a.indexOf("/test/bbs.cgi"))d=!0;else if(!p){var i=e.document.body;i&&-1!=ElementGetTextContent(i).indexOf("書きこみが終わりました")&&(p=(new Date).getTime())}p&&(new Date).getTime()-p>2e3&&(d=!0)}catch(e){d=!0}d&&(c(!0),s(),u.close(),p&&(b((function(){})),t.value=""))}))},e.addEventListener("submit",o))}(),function(){var e=a.length,t=d,i=0,o=function(){e<=(i+=1)||(e<=(t+=1)&&(t=0),d=t,r())},r=function(){var e=a[t],i=new Loader;i.onload=function(t){e.validity(t)?e.parse(t):o()},i.onerror=function(){o()},i.setMethod("GET"),i.setURL(e.url),"5ch_v8"===n.bbs_name&&i.overrideMimeType("text/plain; charset=Shift_JIS"),i.loadText()};r()}(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_5ch_v8",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlId(null,!1);u.setId(_[1]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=DocumentCreateText("");if(s.appendChild(c),a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromId(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l=DocumentCreateElement("div");l.style.margin="0px",e.appendChild(l);var c,u=a[o],d=u.getCloneElements(),p=d.length;if(p){var m=[];for(c=0;c<p;c++){var g=d[c];m.push(g.element),l.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,_,"id")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}function l(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromName(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l=DocumentCreateElement("div");l.style.margin="0px",e.appendChild(l);var c,u=a[o],d=u.getCloneElements(),p=d.length;if(p){var m=[];for(c=0;c<p;c++){var g=d[c];m.push(g.element),l.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,_,"name")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}var s,c,_,u,d,p;if("5ch_v8"===a.bbs_name){var m=t.clone_nodes[0];s=ElementGetElementsByClassName(m,"postid")[0],c=ElementGetElementsByClassName(m,"postusername")[0],_=ElementGetElementsByClassName(m,"date")[0],u=ElementGetElementsByClassName(m,"uid")[0]||_,d=ElementGetElementsByClassName(m,"post-content")[0]}s&&(BbsControlReplyExist(p=s)||(function(){var e=p.firstChild;if(e)switch(e.nodeType){case 1:if(!(t=ElementGetTextContent(e).match(new RegExp("^[0-9]+$","i"))))return;new BbsControlReply(e,!0);break;case 3:var t;if(!(t=DomNodeGetNodeValue(e).match(new RegExp("^[0-9]+","i"))))return;DomNodeSetNodeValue(e,RegExp.leftContext);var n=new BbsControlReply(null,!1).getElement();ElementSetTextContent(n,t[0]),DomNode_InsertAfter(e,n),DomNode_InsertAfter(n,e=DocumentCreateText(RegExp.rightContext))}}(),BbsControlReplySearch(p,(function(t){t.setResponse(e);var n=t.getElement(),i=a.docking_form,o=a.form_textarea;return t.onclick=function(t){i.popupForReply(n);var a,r=o.value,l=r.length,s=o.selectionEnd;a=s>=l?">>"+e.getNumber()+"\n":">>"+e.getNumber(),o.value=r.slice(0,s)+a+r.slice(s),o.selectionEnd=s+a.length,o.focus(),t.stopImmediatePropagation&&t.stopImmediatePropagation()},null})))),c&&l(c),_&&function(a){BbsControlHostExist(a)||(function(){var e,t,n,i={B:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r);if(u=_.match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))DomNodeSetNodeValue(r,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText(RegExp.rightContext));else if(u=_.match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})((|\\n) \\])","i")))DomNodeSetNodeValue(r,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText("\n ]"+RegExp.rightContext));else{var u,d,p;if(!(u=_.match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i"))))break;DomNodeSetNodeValue(r,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(r,p),DomNode_InsertAfter(p,r=DocumentCreateText(RegExp.rightContext))}}}}}(),BbsControlHostSearch(a,(function(a){a.setResponse(e);var r=a.getHost(),l=e.getHost()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=bbs_dictionary.getResponsesFromHost(r),o=0,s=a.length;if(l){if(s<2)return!1}else if(s<1)return!1;execute_queue.attachFirst((function r(){var l=DocumentCreateElement("div");l.style.margin="0px",e.appendChild(l);var c,u=a[o],d=u.getCloneElements(),p=d.length;if(p){var m=[];for(c=0;c<p;c++){var g=d[c];m.push(g.element),l.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,_,"host")}(o+=1)<s?execute_queue.attachFirst(r,null):n({result:!0})}),null)},null})))}(_),u&&(r(u),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();for(var s=a.lastChild;s&&"BR"==s.tagName;)s=s.previousSibling;s?DomNode_InsertAfter(s,r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=e.getFollower(),r=0,l=o.length;if(l<=0)return!1;execute_queue.attachFirst((function e(){var s=DocumentCreateElement("div");s.style.margin="0px",n.appendChild(s);var _,u=bbs_dictionary.getResponse(o[r].getNumber()),d=u.getCloneElements(),p=d.length;if(p){var m=[];for(_=0;_<p;_++){var g=d[_];m.push(g.element),s.appendChild(g.element)}var f=new Object;f.clone_nodes=m,f.parent=t.parent,i(u,f,c,"response")}(r+=1)<l?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(u)),d&&(function(e){BbsControlResponseAnchorExist(e)||(function(){var t,n=ElementGetElementsByTagName(e,"span"),i=n.length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=!1,l=0,s=o.getNumberList(),c=s.length;if(!c)return!1;execute_queue.attachFirst((function o(){var _=DocumentCreateElement("div");_.style.margin="0px",e.appendChild(_);var u,d=bbs_dictionary.getResponse(s[l]),p=d.getCloneElements(),m=p.length;if(m){var g=[];for(u=0;u<m;u++){var f=p[u];g.push(f.element),_.appendChild(f.element)}var h=new Object;h.clone_nodes=g,h.parent=t.parent,i(d,h,r,"response"),a=!0}(l+=1)<c?execute_queue.attachFirst(o,null):n({result:a})}),null)},null})))}(d),r(d),l(d))}var o=function(){var e,t,o,r,l,s,c=[];if("5ch_v8"===a.bbs_name)try{if(!(e=n).classList.contains("post"))return!1;t=ElementGetElementsByClassName(e,"postid")[0],o=ElementGetElementsByClassName(e,"postusername")[0],r=ElementGetElementsByClassName(e,"date")[0],l=ElementGetElementsByClassName(e,"uid")[0]||r,s=ElementGetElementsByClassName(e,"post-content")[0],c.push(e)}catch(e){return!1}if(!DomNodeGetAttachedDocument(e))return!1;if(a.extendResponseAnchor(s),function(){function e(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([-a-zA-Z0-9+/.●!=]{8,})","i")))||(t=n.nodeValue.match(new RegExp("^(◆[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))||(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}t&&e(t),o&&e(o),r&&e(r),l&&e(l),s&&e(s)}(),function(){if("5ch_v8"===a.bbs_name){var t,n=ElementGetElementsByClassName(e,"back-links");for(t=n.length-1;t>=0;t--)DomNodeRemove(n[t])}}(),!ElementGetTextContent(t).match(new RegExp("^([0-9]+)","i")))return!1;var _=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!_.getAnalyzed()){ElementGetTextContent(l).match(new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"))&&_.setId(RegExp.$1),ElementGetTextContent(o).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"))&&_.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:r},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var l,s=o.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=i).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:var u;if(u=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void _.setHost(u[2]);if(u=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void _.setHost(u[2]);if(u=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void _.setHost(u[2])}}}();var u,d=new Object;!function(){var e,t=ElementGetElementsByTagName(s,"span"),n=t.length;for(e=0;e<n;e++)a.createResponseAnchorNumbers(ElementGetTextContent(t[e])).getNumbers((function(e){d[e]||(bbs_dictionary.getResponse(e).addFollower(_),d[e]=!0)}))}();var p=c.length;for(u=0;u<p;u++)_.addOriginalElements(String(u),c[u]);_.onerase=function(){var e,t=_.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},_.setAnalyzed()}var m=new Object;return m.parent=document.body,m.clone_nodes=c,i(_,m,null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_2ch",[function(e,t){var n,a=e.work,i=document.URL,o=[{url:"((http|https)://[^.]+\\.(2ch|5ch)\\.net/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"2ch"},{url:"((http|https)://[^.]+\\.2ch\\.sc/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"2ch.sc"},{url:"((http|https)://(|[^.]+\\.)machi\\.to/bbs/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"machi"},{url:"((http|https)://(|[^.]+\\.)machibbs\\.net/[^/]+/[^/]*[0-9]+)",replace:"$1",secure:!0,name:"machibbs"},{url:"((http|https)://[^.]+\\.bbspink\\.com/test/read\\.cgi/[^/]+/[0-9]+)",replace:"$1/",secure:!0,name:"pink"},{url:"((http|https)://jbbs\\.shitaraba\\.net/bbs/read\\.cgi/[^/]+/[0-9]+/[0-9]+)",replace:"$1/",secure:!1,name:"shitaraba"},{url:"((http|https)://jbbs\\.shitaraba\\.net/bbs/read_archive\\.cgi/[^/]+/[0-9]+/[0-9]+)",replace:"$1/",secure:!1,name:"shitaraba_storage"}],r=o.length;for(n=0;n<r;n++){var l=o[n],s=new RegExp(l.url,"i"),c=i.match(s);if(c){a.base_url=c[1].replace(s,l.replace),l.secure&&(c=a.base_url.match(new RegExp("[^:]+(.*)")))&&(a.base_url="https"+c[1]),a.bbs_name=l.name;break}}return!1},function(e,t){var n=e.work;if(!n.bbs_name)return!1;var a,i,o=1,r=1,l=new Array,s=0,c=0,_=null,u=null,d=n.base_url;function p(e){var t;return"shitaraba"===n.bbs_name?!!(t=e.match(new RegExp("<dt>","i")))&&!!(t=e.match(new RegExp("<dd>","i"))):!(!(t=e.match(new RegExp("<dt>.*?<dd>[ ].*?[ ]<br><br>","i")))||(t=t[0].match(new RegExp("[\r\n]"))))}function m(e){var t=e.match(new RegExp("</b>.*<b>.*?<>.*?<>.*?<>.*?<>","i"));return!(!t||(t=t[0].match(new RegExp("[\r\n]"))))}function g(e){var t=i.length,a=c,o=0,r=function(){t<=(o+=1)?e({result:!1}):(t<=(a+=1)&&(a=0),c=a,l())},l=function(){var t=i[a],o=new Loader;switch(o.onload=function(n){t.validity(n)?t.parse(n,(function(t){t.result?e(t):r()})):r()},o.onerror=function(){r()},o.setMethod("GET"),o.setURL(t.url),n.bbs_name){case"2ch":case"2ch.sc":case"machi":case"machibbs":case"pink":o.overrideMimeType("text/plain; charset=Shift_JIS");break;case"shitaraba":o.overrideMimeType("text/plain; charset=EUC-JP")}o.loadText()};l()}n.createResponseAnchorNumbers=function(e){var t=new ResponseAnchorNumbers,n=new RegExp("^(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)([0-9０-９]+)","i"),a=new RegExp("^([0-9０-９]+)[-]([0-9０-９]+)","i"),i=new RegExp("^([0-9０-９]+)","i"),o=e.match(n);if(o)for(var r=o[1].length;;){if(o=e.substr(r).match(a)){var l=parseInt(StringConvertFromNumericFullToNumericHalf(o[1])),s=parseInt(StringConvertFromNumericFullToNumericHalf(o[2]));l<1&&(l=1),s<1&&(s=1),l>1e4&&(l=1e4),s>1e4&&(s=1e4),r+=o[0].length,t.addNumbers(l,s)}else if(o=e.substr(r).match(i)){r+=o[0].length;var c=parseInt(StringConvertFromNumericFullToNumericHalf(o[1]));c<1&&(c=1),c>2147483647&&(c=2147483647),t.addNumber(c)}if(!o||0!=RegExp.rightContext.search(","))break;r+=1}return t},n.extendResponseAnchor=function(e){if(!BbsControlResponseAnchorExist(e)){var t,a,i,o=new RegExp("^(>>|<<|>)[-,0-9０-９]+$","i"),r=new RegExp("(>>|<<|＞＞|＜＜|>|＞|》|≫|&gt;&gt;)(([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+),)*([0-9０-９]+[-][0-9０-９]+|[0-9０-９]+)","i"),l=new RegExp("([0-9０-９]+)[-]([0-9０-９]+)","i"),s=new RegExp("([0-9０-９]+)","i");for(u=(p=(d=ElementGetElementsByTagName(e,"a")).length)-1;u>=0;u--)(m=ElementGetTextContent(_=d[u]).match(o))&&(DomNode_InsertBefore(_,DocumentCreateText(m[0])),DomNodeRemove(_));e.normalize();var c=new Object;for(i={p:c,n:c,node:e},c.p=i,c.n=i;c.n!=c;){var _;switch(t=(i=c.n).p,a=i.n,t.n=a,a.p=t,(_=i.node).nodeType){case 1:var u,d,p=(d=_.childNodes).length;for(u=0;u<p;u++)i={p:t=(a=c).p,n:a,node:d[u]},t.n=i,a.p=i;break;case 3:for(;_;){var m,g;if(!(m=DomNodeGetNodeValue(_).match(r)))break;DomNodeSetNodeValue(_,RegExp.leftContext),"2ch.sc"===n.bbs_name?(g=DocumentCreateElement("span")).style.cssText="color:#00F; text-decoration: underline; cursor: pointer;":g=DocumentCreateElement("a"),ElementSetTextContent(g,m[0]),DomNode_InsertAfter(_,g),DomNode_InsertAfter(g,_=DocumentCreateText(RegExp.rightContext));var f="";if(m=ElementGetTextContent(g).match(l)){var h=parseInt(StringConvertFromNumericFullToNumericHalf(m[1])),x=parseInt(StringConvertFromNumericFullToNumericHalf(m[2]));if(h<1&&(h=1),x<1&&(x=1),h>1e4&&(h=1e4),x>1e4&&(x=1e4),x<h){var b=h;h=x,x=b}f=h+"-"+x}else(m=ElementGetTextContent(g).match(s))&&((f=parseInt(StringConvertFromNumericFullToNumericHalf(m[0])))<1&&(f=1),f>2147483647&&(f=2147483647));g.href=n.base_url+f}}}}};var f=(w=ElementGetElementsByTagName(document.body,"dl")).length;for(S=0;S<f;S++){_=w[S];break}if(!_)return!1;if("machi"===n.bbs_name){if((w=ElementGetElementsByTagName(_,"dt")).length){for(var h=w[w.length-1],x=h.firstChild;x;){var b=x.nextSibling;DomNode_InsertAfter(_,x),x=b}DomNodeRemove(h)}if((w=ElementGetElementsByTagName(_,"dd")).length&&(w=ElementGetElementsByTagName(w[w.length-1],"br")).length)for(x=(x=w[w.length-1]).nextSibling;x;)b=x.nextSibling,DomNode_InsertAfter(_,x),x=b}var v=(w=ElementGetElementsByTagName(_,"dt")).length;if(v){var y,E=new RegExp("^[ \t\r\n]*([0-9]+)","i");(y=ElementGetTextContent(w[0]).match(E))&&(o=parseInt(y[1]),l[0]=!0),1==o&&v>1&&(y=ElementGetTextContent(w[1]).match(E))&&(o=parseInt(y[1]),l[o]=!0,o<=2&&(o=1)),(y=ElementGetTextContent(w[v-1]).match(E))&&(r=parseInt(y[1]),l[r]=!0)}switch(a=[{url:d,parse:function(e){var t,a,i=new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"),s=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i");switch(n.bbs_name){case"2ch":case"2ch.sc":case"pink":case"machi":case"machibbs":t=new RegExp("([0-9]+)","i"),a="\n";break;case"shitaraba":t=new RegExp("<a[^>]*>([0-9]+)</a>","i"),a="</dd>"}var c=0,_=e.length;execute_queue.attachFirst((function u(){if(!(c>=_||(c=e.indexOf("<dt>",c))<0)){var d=e.indexOf(a,c);if(!(d<0)){var p=e.substring(c,d),m=p.match(t);if(m){var g=parseInt(m[1]);if(o<=g&&g<=r);else if(l[g]);else{var f=StringHtmlCreateDomNodesSafe(p),h=f[0],x=function(){for(var e=1;;){var t=f[e];if(!t)break;if("DD"==t.tagName)return t;e++}return null}();try{if("DT"!=h.tagName)return;if("DD"!=x.tagName)return}catch(d){return}var b=bbs_dictionary.getResponse(g);if(!b.getAnalyzed()){var v=ElementGetTextContent(h);n.extendResponseAnchor(x),v.match(i)&&b.setId(RegExp.$1),v.match(s)&&b.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:h},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void b.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void b.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void b.setHost(c[2])}}}();var y=new Object;!function(){var e,t,a=(e="2ch.sc"===n.bbs_name?ElementGetElementsByTagName(x,"span"):ElementGetElementsByTagName(x,"a")).length;for(t=0;t<a;t++)n.createResponseAnchorNumbers(ElementGetTextContent(e[t])).getNumbers((function(e){y[e]||(bbs_dictionary.getResponse(e).addFollower(b),y[e]=!0)}))}(),h&&b.addOriginalElements("dt",h),x&&b.addOriginalElements("dd",x),b.onerase=function(){},b.setAnalyzed()}}}c<d&&(c=d+1,execute_queue.attachFirst(u,null))}}}),null)},validity:p},{url:function(){var e=d.match(new RegExp("http://([^/]+)/test/read\\.cgi/([^/]+)/([0-9]+)/","i"));return e?"http://"+e[1]+"/"+e[2]+"/dat/"+e[3]+".dat":""}(),parse:function(e){var t=new RegExp("(.*?)<>(.*?)<>(.*?)<>(.*?)<>","i"),a=(new RegExp("([0-9]+)","i"),new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i")),i=new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"),s=new RegExp("^ sssp://img.2ch.net/ico/(.*?)( <br> .*)$","i"),c=0,_=e.length,u=1;execute_queue.attachFirst((function d(){if(!(c>=_)){var p=e.indexOf("\n",c);if(o<=u&&u<=r);else if(l[u]);else{var m=bbs_dictionary.getResponse(u);if(!m.getAnalyzed()){var g=e.substring(c,p).match(t);if(g){var f="<dt>"+u+" ：";g[2]?f+='<a href="mailto:'+g[2]+'"><b>'+g[1]+"</b></a>":f+="<font color=green><b>"+g[1]+"</b></font>",f+="："+g[3]+"<dd>";var h=g[4];h.match(s)&&(h='<img src="http://img.2ch.net/ico/'+RegExp.$1+'">'+RegExp.$2);var x=StringHtmlCreateDomNodesSafe(f+=h+"<br><br>"),b=x[0],v=x[1];try{if("DT"!=b.tagName)return;if("DD"!=v.tagName)return}catch(p){return}var y=ElementGetTextContent(b);n.extendResponseAnchor(v),y.match(a)&&m.setId(RegExp.$1),y.match(i)&&m.setName(RegExp.$1),function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:b},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:var c;if(c=DomNodeGetNodeValue(o).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void m.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void m.setHost(c[2]);if(c=DomNodeGetNodeValue(o).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void m.setHost(c[2])}}}();var E=new Object;!function(){var e,t,a=(e="2ch.sc"===n.bbs_name?ElementGetElementsByTagName(v,"span"):ElementGetElementsByTagName(v,"a")).length;for(t=0;t<a;t++)n.createResponseAnchorNumbers(ElementGetTextContent(e[t])).getNumbers((function(e){E[e]||(bbs_dictionary.getResponse(e).addFollower(m),E[e]=!0)}))}(),b&&m.addOriginalElements("dt",b),v&&m.addOriginalElements("dd",v),m.onerase=function(){},m.setAnalyzed()}}}u+=1,c<p&&(c=p+1,execute_queue.attachFirst(d,null))}}),null)},validity:m}],i=[{url:d+r+"-",parse:function(e,t){var a,i;switch(n.bbs_name){case"2ch":case"2ch.sc":case"pink":case"machi":case"machibbs":a=new RegExp("([0-9]+)","i"),i="\n";break;case"shitaraba":a=new RegExp("<a[^>]*>([0-9]+)</a>","i"),i="</dd>"}var o=0,l=e.length,s=0;execute_queue.attachFirst((function n(){try{if(o>=l)throw 0;if((o=e.indexOf("<dt>",o))<0)throw 0;var c=e.indexOf(i,o);if(c<0)throw 0;var u=e.substring(o,c),d=u.match(a);if(d){var p=parseInt(d[1]);if(r<p){var m=bbs_dictionary.getResponse(p);m.clearAnalyzed(),m.clearOriginalElements(),m.clearFollowing();var g,f=StringHtmlCreateDomNodesSafe(u),h=f.length;for(g=0;g<h;g++)_.appendChild(f[g]);s+=1,r=p}}if(o<c)return o=c+1,void execute_queue.attachFirst(n,null)}catch(c){if(c)return void t({result:!1})}t({result:!0,add_count:s})}),null)},validity:p},{url:function(){var e=d.match(new RegExp("http://([^/]+)/test/read\\.cgi/([^/]+)/([0-9]+)/","i"));return e?"http://"+e[1]+"/"+e[2]+"/dat/"+e[3]+".dat":""}(),parse:function(e,t){var n=ElementGetElementsByTagName(_,"dt"),a=n.length;a&&ElementGetTextContent(n[a-1]).match(new RegExp("^([0-9]+)[ ]：","i"))&&(r=parseInt(RegExp.$1));var i=new RegExp("(.*?)<>(.*?)<>(.*?)<>(.*?)<>","i"),o=new RegExp("^ sssp://img.2ch.net/ico/(.*?)( <br> .*)$","i"),l=0,s=e.length,c=1,u=0;execute_queue.attachFirst((function n(){try{if(l>=s)throw 0;var a=e.indexOf("\n",l);if(r<c){var d=e.substring(l,a).match(i);if(d){var p=bbs_dictionary.getResponse(c);p.clearAnalyzed(),p.clearOriginalElements(),p.clearFollowing();var m="<dt>"+c+" ：";d[2]?m+='<a href="mailto:'+d[2]+'"><b>'+d[1]+"</b></a>":m+="<font color=green><b>"+d[1]+"</b></font>",m+="："+d[3]+"<dd>";var g=d[4];g.match(o)&&(g='<img src="http://img.2ch.net/ico/'+RegExp.$1+'">'+RegExp.$2);var f,h=StringHtmlCreateDomNodesSafe(m+=g+"<br><br>"),x=h.length;for(f=0;f<x;f++)_.appendChild(h[f]);r=c,u+=1}}if(c+=1,l<a)return l=a+1,void execute_queue.attachFirst(n,null)}catch(a){if(a)return void t({result:!1})}t({result:!0,add_count:u})}),null)},validity:m}],s=0,c=0,n.bbs_name){case"2ch":case"2ch.sc":var w,S;for(s=1,f=(w=ElementGetElementsByTagName(DocumentGetHeadElement(document),"meta")).length,S=0;S<f;S++){var C=(x=w[S]).getAttribute("http-equiv");if(C||(C=x.httpEquiv),C&&"content-type"==C.toLowerCase()){var A=x.getAttribute("content");if(A||(A=x.content),A&&-1!=A.indexOf("application")){c=1;break}}}}return(u=new BbsControlReadMoreButton).setWaitTime(2e3),u.onclick=g,DomNode_InsertAfter(_,u.getElement()),function(){var e,t,a,i,o;function r(){i&&(i.release(),i=null),window.removeEventListener?(t.removeEventListener("click",u),e.removeEventListener("submit",_)):window.detachEvent&&(t.detachEvent("onclick",u),e.detachEvent("onsubmit",_)),o&&o.release()}function l(){a.value=""}function s(e){t.disabled=!e}function _(e){s(!1)}function u(t){var a,i;switch(n.bbs_name){case"2ch":case"2ch.sc":case"pink":a=800,i=600;var r=document.cookie;r&&-1!=r.indexOf("PREN=")&&(a=600,i=450);break;case"shitaraba":a=600,i=450;break;case"machi":case"machibbs":a=700,i=400}var c="_pageexpand_"+Math.floor(2147483647*Math.random()),_=new BbsControlPopupIframe(c);_.setWindowSize(a,i),_.onclose=function(){s(!0)};var u,d,p=_.getIFrameElement();e.target=c,u=!1,d=null,(o=task_container.createTask()).setDestructorFunc((function(){o=null})),o.setExecuteFunc((function(){try{var e="",t=p.contentWindow;if(t.document&&(e=t.document.URL),e.match(/^(http|https):/))switch(n.bbs_name){case"2ch":case"pink":case"2ch.sc":-1==e.indexOf("test/bbs.cgi?guid=")?u=!0:d||(a=t.document.body)&&-1!=ElementGetTextContent(a).indexOf("書きこみが終わりました")&&(d=(new Date).getTime());break;case"shitaraba":if(-1==e.indexOf("/bbs/write.cgi/"))u=!0;else if(!d){var a;(a=t.document.body)&&-1!=ElementGetTextContent(a).indexOf("書きこみが終りました")&&(d=(new Date).getTime())}break;case"machi":case"machibbs":-1==e.indexOf("bbs/write.cgi?guid=ON")&&(u=!0,d=1)}d&&(new Date).getTime()-d>2e3&&(u=!0)}catch(e){u=!0}u&&(o&&o.release(),_.close(),s(!0),d&&(g((function(){})),l()))}))}!function(){var i,o=ElementGetElementsByTagName(document.body,"form");switch(n.bbs_name){case"2ch":case"pink":case"2ch.sc":for(i=0;i<o.length;i++)if(o[i].action.indexOf("/test/bbs.cgi")>=0){e=o[i];break}break;case"shitaraba":for(i=0;i<o.length;i++)if(o[i].action.indexOf("/bbs/write.cgi/")>=0){e=o[i];break}break;case"machi":case"machibbs":for(i=0;i<o.length;i++)if(o[i].action.indexOf("/bbs/write.cgi")>=0){e=o[i];break}}if(e||"2ch.sc"!==n.bbs_name||(e=document.getElementById("postForm")),e){for(o=ElementGetElementsByTagName(e,"input"),i=0;i<o.length;i++)if("submit"==o[i].type.toLowerCase()){t=o[i];break}(o=ElementGetElementsByTagName(e,"textarea")).length&&(a=o[0],n.form_textarea=a);var r=new BbsControlDockingForm(e,!1);r.setStyle("background:#e8e8e8; background-image:linear-gradient(to bottom, #f8f8f8, #e8e8e8); padding:20px; border:1px solid #888; border-radius:4px; box-shadow:2px 2px 5px #aaa; margin:0px;"),n.docking_form=r}}(),e&&t&&a&&(n.docking_form&&(n.docking_form.onreset=l),function(){try{var t=new RegExp("^[^:]+"),n=e.action.match(t),a=document.URL.match(t);if(!n)return!0;if(!a)return!0;if(n[0]===a[0])return!1}catch(e){}return!0}()||0==c&&(window.addEventListener?(t.addEventListener("click",u),e.addEventListener("submit",_)):window.attachEvent&&(t.attachEvent("onclick",u),e.attachEvent("onsubmit",_)),(i=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){r()}))))}(),function(){var e=a.length,t=s,i=0,o=function(){e<=(i+=1)||(e<=(t+=1)&&(t=0),s=t,r())},r=function(){var e=a[t],i=new Loader;switch(i.onload=function(t){e.validity(t)?e.parse(t):o()},i.onerror=function(){o()},i.setMethod("GET"),i.setURL(e.url),n.bbs_name){case"2ch":case"2ch.sc":case"pink":i.overrideMimeType("text/plain; charset=Shift_JIS");break;case"shitaraba":i.overrideMimeType("text/plain; charset=EUC-JP")}i.loadText()};r()}(),t({result:!0}),!0},function(e,t){return t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_2ch",[function(e,t){var n=e.element,a=e.work;function i(e,t,n,o){function r(e){BbsControlResponseAnchorExist(e)||(function(){var t,n,i=(n="2ch.sc"===a.bbs_name?ElementGetElementsByTagName(e,"span"):ElementGetElementsByTagName(e,"a")).length;for(t=0;t<i;t++){var o=n[t],r=a.createResponseAnchorNumbers(ElementGetTextContent(o));r.getCount()&&new BbsControlResponseAnchor(o,!1).setResponseAnchorNumbers(r)}}(),BbsControlResponseAnchorSearch(e,(function(e){var a=e.getElement(),o=e.getResponseAnchorNumbers(),r=new BbsResponseDialog;return n&&n.attachChild(r),r.setElementParent(t.parent),r.setElementHitArea(a),r.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var l=!1,s=0,c=o.getNumberList(),_=c.length;if(!_)return!1;execute_queue.attachFirst((function e(){var o,u=bbs_dictionary.getResponse(c[s]),d=u.getCloneElements(),p=d.length;if(p){var m=new Object;for(m.parent=t.parent,o=0;o<p;o++){var g=d[o];m[g.name]=g.element,a.appendChild(g.element)}i(u,m,r,"response"),l=!0}(s+=1)<_?execute_queue.attachFirst(e,null):n({result:l})}),null)},null})))}function l(a){BbsControlIdExist(a)||(function(){var e,t,n,i={A:1,SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlId(null,!1);u.setId(_[1]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlIdSearch(a,(function(a){a.setResponse(e);var r=a.getId(),l=e.getId()===r,s=a.getElement(),c=DocumentCreateText("");if(s.appendChild(c),a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),"id"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromId(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"id")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null})))}function s(a){BbsControlNameExist(a)||(function(){var e,t,n,i={SCRIPT:1},o=new Object;for(n={p:o,n:o,node:a},o.p=n,o.n=n;o.n!=o;){e=(n=o.n).p,t=n.n,e.n=t,t.p=e;var r=n.node;switch(r.nodeType){case 1:if(!i[r.tagName]){var l,s=r.childNodes,c=s.length;for(l=0;l<c;l++)n={p:e=(t=o).p,n:t,node:s[l]},e.n=n,t.p=n}break;case 3:for(;r;){var _=DomNodeGetNodeValue(r).match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"));if(!_)break;DomNodeSetNodeValue(r,RegExp.leftContext);var u=new BbsControlName(null,!1);u.setName(_[0]);var d=u.getElement();ElementSetTextContent(d,_[0]),DomNode_InsertAfter(r,d),DomNode_InsertAfter(d,r=DocumentCreateText(RegExp.rightContext))}}}}(),BbsControlNameSearch(a,(function(a){a.setResponse(e);var r=a.getName(),l=e.getName()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small"))},a.update(),s.appendChild(c),"name"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromName(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"name")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null})))}var c;t.dt&&(r(t.dt),l(t.dt),s(t.dt),BbsControlHostExist(c=t.dt)||(function(){var e,t,n,a={B:1,SCRIPT:1},i=new Object;for(n={p:i,n:i,node:c},i.p=n,i.n=n;i.n!=i;){e=(n=i.n).p,t=n.n,e.n=t,t.p=e;var o=n.node;switch(o.nodeType){case 1:if(!a[o.tagName]){var r,l=o.childNodes,s=l.length;for(r=0;r<s;r++)n={p:e=(t=i).p,n:t,node:l[r]},e.n=n,t.p=n}break;case 3:for(;o;){var _=DomNodeGetNodeValue(o);if(u=_.match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext));else if(u=_.match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})((|\\n) \\])","i")))DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText("\n ]"+RegExp.rightContext));else{var u,d,p;if(!(u=_.match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i"))))break;DomNodeSetNodeValue(o,RegExp.leftContext+u[1]),(d=new BbsControlHost(null,!1)).setHost(u[2]),ElementSetTextContent(p=d.getElement(),u[2]),DomNode_InsertAfter(o,p),DomNode_InsertAfter(p,o=DocumentCreateText(RegExp.rightContext))}}}}}(),BbsControlHostSearch(c,(function(a){a.setResponse(e);var r=a.getHost(),l=e.getHost()===r,s=a.getElement(),c=DocumentCreateText("");if(a.onchange=function(e){DomNodeSetNodeValue(c,e>1?"("+e+")":"");var t=s.style;e>=5?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):e>=2?(StyleDeclarationRemoveProperty(t,"color"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","80%"))},a.update(),s.appendChild(c),"host"==o&&l)return null;var _=new BbsResponseDialog;return n&&n.attachChild(_),_.setElementParent(t.parent),_.setElementHitArea(s),_.oncreate=function(e,n){var a=DocumentCreateElement("dl");a.style.margin="0px",e.appendChild(a);var o=bbs_dictionary.getResponsesFromHost(r),s=0,c=o.length;if(l){if(c<2)return!1}else if(c<1)return!1;execute_queue.attachFirst((function e(){var r,l=o[s],u=l.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,r=0;r<d;r++){var m=u[r];p[m.name]=m.element,a.appendChild(m.element)}i(l,p,_,"host")}(s+=1)<c?execute_queue.attachFirst(e,null):n({result:!0})}),null)},null}))),function(a){if(!BbsControlFollowerExist(a)){var o=new BbsControlFollower(null,!0);o.setResponse(e);var r=o.getElement(),l=DocumentCreateText("");r.appendChild(l),o.onchange=function(e){l.nodeValue=e?" follower("+e+")":"";var t=r.style;e>=3?(StyleDeclarationSetProperty(t,"color","#e80000"),StyleDeclarationRemoveProperty(t,"font-size")):(StyleDeclarationSetProperty(t,"color","#888"),StyleDeclarationSetProperty(t,"font-size","small")),e?StyleDeclarationSetProperty(t,"margin","0px 4px 0px 0px"):StyleDeclarationRemoveProperty(t,"margin")},o.update();var s=ElementGetElementsByTagName(a,"br");s.length?DomNode_InsertBefore(s[0],r):a.appendChild(r);var c=new BbsResponseDialog;n&&n.attachChild(c),c.setElementParent(t.parent),c.setElementHitArea(r),c.oncreate=function(n,a){var o=DocumentCreateElement("dl");o.style.margin="0px",n.appendChild(o);var r=e.getFollower(),l=0,s=r.length;if(s<=0)return!1;execute_queue.attachFirst((function e(){var n,_=bbs_dictionary.getResponse(r[l].getNumber()),u=_.getCloneElements(),d=u.length;if(d){var p=new Object;for(p.parent=t.parent,n=0;n<d;n++){var m=u[n];p[m.name]=m.element,o.appendChild(m.element)}i(_,p,c,"response")}(l+=1)<s?execute_queue.attachFirst(e,null):a({result:!0})}),null)}}}(t.dt),function(t){BbsControlReplyExist(t)||(function(){var e;if(e="shitaraba"===a.bbs_name?DomNodeGetFirstElementChild(t):t.firstChild)switch(e.nodeType){case 1:if(!(n=ElementGetTextContent(e).match(new RegExp("^[0-9]+$","i"))))return;new BbsControlReply(e,!0);break;case 3:var n;if(!(n=DomNodeGetNodeValue(e).match(new RegExp("^[0-9]+","i"))))return;DomNodeSetNodeValue(e,RegExp.leftContext);var i=new BbsControlReply(null,!1).getElement();ElementSetTextContent(i,n[0]),DomNode_InsertAfter(e,i),DomNode_InsertAfter(i,e=DocumentCreateText(RegExp.rightContext))}}(),BbsControlReplySearch(t,(function(t){t.setResponse(e);var n=t.getElement(),i=a.docking_form,o=a.form_textarea;return t.onclick=function(t){i.popupForReply(n);var a,r=o.value,l=r.length,s=o.selectionEnd;a=s>=l?">>"+e.getNumber()+"\n":">>"+e.getNumber(),o.value=r.slice(0,s)+a+r.slice(s),o.selectionEnd=s+a.length,o.focus()},null})))}(t.dt)),t.dd&&(r(t.dd),l(t.dd),s(t.dd))}var o=function(){var e,t=n;try{if("DT"!=t.tagName)return!1}catch(e){return!1}e=DomNodeGetNextElementSibling(t);try{if("DD"!=e.tagName)return!1}catch(e){return!1}try{if("DL"!=(s=t.parentNode).tagName)return!1;switch(a.bbs_name){case"2ch":case"pink":break;case"shitaraba":case"machi":if(s.parentNode.parentNode!=document.body)return!1;break;default:if(s.parentNode!=document.body)return!1}}catch(e){return!1}if(!DomNodeGetAttachedDocument(t))return!1;a.extendResponseAnchor(e),function(){function n(e){BbsControlSearchTrash(e,(function(e){var t,n;return(n=e.firstChild)?3!=n.nodeType?null:(t=n.nodeValue.match(new RegExp("^ID:([-a-zA-Z0-9+/.●!=]{8,})","i")))||(t=n.nodeValue.match(new RegExp("^(◆[a-zA-Z0-9+/.]{10,12})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),null):(t=n.nodeValue.match(new RegExp("^([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))||(t=n.nodeValue.match(new RegExp("^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))?(DomNode_InsertAfter(e,n=DocumentCreateText(t[0])),DomNodeRemove(e),n.parentNode.normalize(),null):null:null}))}t&&n(t),e&&n(e)}(),function(){if("2ch.sc"===a.bbs_name){var e,n;for(n=(e=ElementGetElementsByClassName(t,"id")).length-1;n>=0;n--){var i;DomNode_InsertAfter(i=e[n],DocumentCreateText(ElementGetTextContent(i))),DomNodeRemove(i)}for(n=(e=ElementGetElementsByClassName(t,"idNum")).length-1;n>=0;n--)DomNodeRemove(e[n]);if("SPAN"==(i=t.firstChild).tagName){var o=ElementGetTextContent(i);o.match(new RegExp("^([0-9]+)","i"))&&(DomNode_InsertAfter(i,DocumentCreateText(o)),DomNodeRemove(i))}}}();var o=ElementGetTextContent(t);if(!o.match(new RegExp("^[ \t\r\n]*([0-9]+)","i")))return!1;var r=bbs_dictionary.getResponse(parseInt(RegExp.$1));if(!r.getAnalyzed()){o.match(new RegExp("ID:([-a-zA-Z0-9+/.●!=]{8,})","i"))&&r.setId(RegExp.$1),o.match(new RegExp("(◆[a-zA-Z0-9+/.]{10,12})","i"))&&r.setName(RegExp.$1),function(){var e,n,a,i={B:1,SCRIPT:1},o=new Object;for(a={p:o,n:o,node:t},o.p=a,o.n=a;o.n!=o;){e=(a=o.n).p,n=a.n,e.n=n,n.p=e;var l=a.node;switch(l.nodeType){case 1:if(!i[l.tagName]){var s,c=l.childNodes,_=c.length;for(s=0;s<_;s++)a={p:e=(n=o).p,n:n,node:c[s]},e.n=a,n.p=a}break;case 3:var u;if(u=DomNodeGetNodeValue(l).match(new RegExp("(^|HOST:)([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})","i")))return void r.setHost(u[2]);if(u=DomNodeGetNodeValue(l).match(new RegExp("(\\[ )([-._a-zA-Z0-9]{1,}(\\.[-._a-zA-Z0-9]{1,}){2,})(|\\n) \\]","i")))return void r.setHost(u[2]);if(u=DomNodeGetNodeValue(l).match(new RegExp("(発信元:)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})","i")))return void r.setHost(u[2])}}}();var l=new Object;!function(){var t,n,i=(t="2ch.sc"===a.bbs_name?ElementGetElementsByTagName(e,"span"):ElementGetElementsByTagName(e,"a")).length;for(n=0;n<i;n++)a.createResponseAnchorNumbers(ElementGetTextContent(t[n])).getNumbers((function(e){l[e]||(bbs_dictionary.getResponse(e).addFollower(r),l[e]=!0)}))}(),t&&r.addOriginalElements("dt",t),e&&r.addOriginalElements("dd",e),r.onerase=function(){var e,t=r.getOriginalElements(),n=t.length;for(e=0;e<n;e++){var a=new DocumentReviseScroll,i=t[e].element;a.executeRemoveElementBefore(i),DomNodeRemove(i),a.executeRemoveElementAfter(i)}},r.setAnalyzed()}for(var s=document.body,c=t;c;)"DL"==c.tagName&&(s=c),c=c.parentNode;return i(r,{dt:t,dd:e,parent:s},null,null),!0}();return t({useful:o}),!0}]),e("ExpandBbs_ScriptInitialize_Default",[function(e,t){return e.work,t({result:!1}),!0}]),e("ExpandBbs_ScriptCallback_Default",[function(e,t){return e.element,e.work,t({useful:!1}),!0}])}function PageExpandDebug(){var e,t,n,a,i=this;function o(e){var t,n;this.setText=function(e){n!=e&&DomNodeSetNodeValue(t,n=e)},t=DocumentCreateText(""),e.appendChild(t)}function r(e){var t,n,a,i;function o(){var e=0;i&&(e=Math.floor(a/i*100)),n.style.width=e+"%"}this.setValue=function(e){a!=e&&(a=e,o())},this.setMaximum=function(e){i!=e&&(i=e,o())},a=0,i=0,ElementSetStyle(t=DocumentCreateElement("div"),"height:2px; min-height:0; border:1px #888 solid; margin:0px 5px 2px; line-height:1.0;"),e.appendChild(t),ElementSetStyle(n=DocumentCreateElement("div"),"height:2px; min-height:0; background-color :#888; margin:0px 0px 2px; width:0%; line-height:1.0;"),t.appendChild(n)}i.release=function(){n&&(analyze_work_dictionary.removeAnalyzeWork(n),n=null),a&&(a.release(),a=null),t&&(t.release(),t=null),e&&(DomNodeRemove(e),e=null)},i.setVisible=function(l){l?function(){i.release();var l=DocumentCreateElement("div");ElementSetStyle(l,"width:220px;border:3px #888 outset; padding:0px; margin:0px; right:5px; bottom:5px; position:fixed; text-align:left; color:#000; font-size:12px; line-height:1.0; z-index:2147483647;"),AnalyzeWorkSetInvalid(n=AnalyzeWorkCreate(e=l));var s=new AnalyzeWorkDictionaryAttachOptions;s.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(n,s),(a=new DomNodeObserverRemoveFromDocument(e)).setFunction(i.release);var c=DocumentCreateElement("div");ElementSetStyle(c,"background-color:#FFF; line-height:1.0; border:1px #ccc solid; padding:0px; margin:0px; opacity:0.8;"),l.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"font-weight:bold; text-align:left; color:#000; line-height:1.0; background-color:#ccc; padding:2px 5px; margin:0px 0px 2px; position:relative;"),ElementSetTextContent(_,"PageExpand Debug"),c.appendChild(_);var u,d=DocumentCreateElement("div");ElementSetStyle(d,"width:12px; position:absolute; right:1px; top:1px; bottom:1px; border:1px #888 solid; background:#ddd; line-height:1.0;"),ElementSetTextContent(d,""),_.appendChild(d),d.onclick=function(){i.release()};var p="text-align:left; color:#000; font-size:12px; line-height:1.0;";ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 0px; "+p),c.appendChild(u);var m=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 0px; "+p),c.appendChild(u);var g=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 0px; "+p),c.appendChild(u);var f=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 0px; "+p),c.appendChild(u);var h=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var x=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 1px; "+p),c.appendChild(u);var b=new o(u),v=new r(c);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var y=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var E=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 1px; "+p),c.appendChild(u);var w=new o(u),S=new r(c);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var C=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 1px; "+p),c.appendChild(u);var A=new o(u),k=new r(c);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var I=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 1px; "+p),c.appendChild(u);var D=new o(u),T=new r(c);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 0px; "+p),c.appendChild(u);var R=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var N=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 1px; "+p),c.appendChild(u);var j=new o(u),P=new r(c);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var L=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var M=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var O=new o(u);ElementSetStyle(u=DocumentCreateElement("div"),"margin:0px 5px 2px; "+p),c.appendChild(u);var U=new o(u),z=["interrupt","remove","insert","bbs","analyze","element","text","complete",""];(t=task_container.createTask()).setExecuteFunc((function(e){m.setText("execute queue: "+execute_queue.getCountQueue()),g.setText("execute phase: "+z[execute_queue.getPhase()]),f.setText("execute error: "+execute_queue.getCountError()),h.setText("loader queue: "+loader_queue.getCountQueue()),x.setText("loader error: "+loader_queue.getCountError()),b.setText("loader thread: "+loader_queue.getCountThread()+" / "+loader_queue.getMaxThread()),v.setValue(loader_queue.getCountThread()),v.setMaximum(loader_queue.getMaxThread()),y.setText("task count: "+task_container.getCountTask());var t=Math.floor(element_limitter_image.getByteSizeNow()/1024/1024*100)/100;E.setText("image size: "+t),w.setText("image thread: "+element_limitter_image.getCountUse()+" / "+element_limitter_image.getCount()),S.setValue(element_limitter_image.getCountUse()),S.setMaximum(element_limitter_image.getCount()),C.setText("sound count: "+element_limitter_sound.getCount()),A.setText("sound thread: "+element_limitter_sound.getCountUse()+" / "+element_limitter_sound.getMaxUse()),k.setValue(element_limitter_sound.getCountUse()),k.setMaximum(element_limitter_sound.getMaxUse()),I.setText("video count: "+element_limitter_video.getCount()),D.setText("video thread: "+element_limitter_video.getCountUse()+" / "+element_limitter_video.getMaxUse()),T.setValue(element_limitter_video.getCountUse()),T.setMaximum(element_limitter_video.getMaxUse()),R.setText("download queue: "+downloader_queue.getCountQueue()),N.setText("download error: "+downloader_queue.getCountError()),j.setText("download thread: "+downloader_queue.getCountThread()+" / "+downloader_queue.getMaxThread()),P.setValue(downloader_queue.getCountThread()),P.setMaximum(downloader_queue.getMaxThread()),L.setText("observer remove: "+document_observer_remove_node.getCount()),M.setText("observer modify: "+document_observer_modify_node.getCount()),O.setText("observer scroll: "+document_observer_scroll.getCount()),U.setText("src count: "+address_collection.getCountAddress())})),t.execute(4294967295),document.body.appendChild(e)}():i.release()}}function PageExpandConfig(){var _config=new Object,_menu_window,_content_window,_i18n,_menu_items,_history_state,_history_state_list;function MenuItemCreate(e,t){var n,a,i,o,r=this;function l(){var e=i>>16&255,t=i>>8&255,n=255&i;e=Math.floor(e*o),t=Math.floor(t*o),n=Math.floor(n*o),a.background="#"+e.toString(16)+t.toString(16)+n.toString(16)}function s(){_config.pushHistory(t),_config.MenuItemSelect(t)}r.normal=function(){n.onmouseout=r.normal,n.onmouseover=r.over,n.onmousedown=s,a.fontSize="12px",a.width="230px",a.boxShadow="",a.padding="5px 10px 5px 0px",a.marginTop="0px",a.marginBottom="1px",o=.75,l()},r.over=function(){r.normal(),a.width="240px",o=.9375,l()},r.active=function(){n.onmouseover=null,n.onmouseout=null,n.onmousedown=null,a.fontSize="16px",a.width="250px",a.padding="14px 5px 14px 0px",a.marginTop="2px",a.marginBottom="3px";var e=.25,t=i>>16&255,r=i>>8&255,l=255&i;t=Math.floor(t*e),r=Math.floor(r*e),l=Math.floor(l*e),a.boxShadow="0px 1px 2px #"+t.toString(16)+r.toString(16)+l.toString(16);e=1,t=i>>16&255,r=i>>8&255,l=255&i;t=Math.floor(t*e),r=Math.floor(r*e),l=Math.floor(l*e);var s="linear-gradient(left, #"+t.toString(16)+r.toString(16)+l.toString(16)+" 25px, #ffffff 25px)";a.background="#FFF",a.backgroundImage=s;var c={none:1,initial:1};c[a.backgroundImage]&&(a.backgroundImage="-webkit-"+s),c[a.backgroundImage]&&(a.backgroundImage="-moz-"+s),c[a.backgroundImage]&&(a.backgroundImage="-ms-"+s),c[a.backgroundImage]&&(a.backgroundImage="-o-"+s),o=1},r.setSupport=function(e){n.style.color=e?"#000":"#888"},r.setBackgroundColor=function(e){i=e,l()},(n=DocumentCreateElement("a")).href="",n.onclick=function(){return!1},ElementSetStyle(n,"display:block; width:250px; text-decoration:none; text-align:right; margin:0px 0px 2px auto; line-height:1.0; border-radius:5px 0px 0px 5px;"),a=n.style,ElementSetTextContent(n,e),_menu_window.appendChild(n),i=4294967295,o=1,l()}function ContentClear(){DomNodeRemoveChildren(_content_window),WindowSetScrollPositionY(window,0)}function ContentSettingStandard(){var e,t,n,a,i,o,r,l,s,c,_;!function(){var u=page_expand_project.getObject().standard,d=(new UI_Title(_content_window,_i18n.getMessage("menu_setting_standard")),(p=new UI_LineContainer(_content_window,_i18n.getMessage("menu_setting_standard_filter_url"))).getElement());(e=new UI_ComboBox(d)).attachItem(_i18n.getMessage("menu_setting_standard_filter_url_combo_box_item_deny"),"deny"),e.attachItem(_i18n.getMessage("menu_setting_standard_filter_url_combo_box_item_allow"),"allow"),e.onchange=function(e){u.filter_type=e,m(),projectModify()},(t=new UI_TextArea(d)).oninput=function(e){var n=t.spiritByLine();if("deny"===u.filter_type)u.filter_deny=n;else u.filter_allow=n;projectModify()},new UI_TextHint(d,_i18n.getMessage("menu_setting_standard_filter_url_hint")),(p=new UI_InlineContainer(_content_window,_i18n.getMessage("menu_setting_standard_check_box_container"))).setWidth(400);d=p.getElement();(n=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_icon_address_bar"))).onchange=function(e){u.enable_icon_address_bar=e,projectModify()},(a=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_context_menu"))).onchange=function(e){u.enable_context_menu=e,projectModify()},(i=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_startup"))).onchange=function(e){u.enable_startup=e,projectModify()},(o=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_debug_mode"))).onchange=function(e){u.enable_debug_mode=e,projectModify()},(r=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_output_log"))).onchange=function(e){u.enable_output_log=e,projectModify()},(p=new UI_InlineContainer(_content_window,_i18n.getMessage("menu_setting_standard_touch"))).setWidth(400);d=p.getElement();(l=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_input_touch"))).onchange=function(e){u.enable_input_touch=e,projectModify()},(s=new UI_CheckBox(d,_i18n.getMessage("menu_setting_standard_enable_double_touch_assist"))).onchange=function(e){u.enable_double_touch_assist=e,projectModify()};d=(p=new UI_LineContainer(_content_window,_i18n.getMessage("menu_setting_standard_execute_queue"))).getElement();new UI_TitleItem(d=p.getElement(),_i18n.getMessage("menu_setting_standard_execute_queue_time_occupancy")),(c=new UI_NumericStepper(d)).setMinimum(0),c.setMaximum(5e3),c.oninput=function(e){u.execute_queue.time_occupancy=e,projectModify()},new UI_BreakItem(d),new UI_TitleItem(d,_i18n.getMessage("menu_setting_standard_execute_queue_time_sleep")),(_=new UI_NumericStepper(d)).setMinimum(0),_.setMaximum(1e3),_.oninput=function(e){u.execute_queue.time_sleep=e,projectModify()},new UI_TextHint(d,_i18n.getMessage("menu_setting_standard_execute_queue_hint"));d=(p=new UI_LineContainer(_content_window,_i18n.getMessage("menu_setting_standard_export_import"))).getElement();new UI_InlineButton(d,_i18n.getMessage("menu_setting_standard_export_button")).onclick=function(){var e=new UI_ModalDialog(_content_window),t=e.getElement(),n=(new UI_Title(t,_i18n.getMessage("menu_setting_standard_export_dialog")),new UI_LineContainer(t,_i18n.getMessage("menu_setting_standard_export_dialog_export")).getElement()),a=new UI_TextArea(n);new UI_TextHint(n,_i18n.getMessage("menu_setting_standard_export_dialog_export_hint"));var i=new UI_OkButton(t);i.setEnable(!1),i.onclick=function(t){e.close()},projectSave((function(e){var t=page_expand_project.exportObject();(t=PageExpandProjectObjectRemovePreset(t)).setting_export={type:"setting"},a.setValue(JsonStringify(t)),i.setEnable(!0)})),e.open()},new UI_InlineButton(d,_i18n.getMessage("menu_setting_standard_import_button")).onclick=function(){var e=new UI_ModalDialog(_content_window),t=e.getElement(),n=(new UI_Title(t,_i18n.getMessage("menu_setting_standard_import_dialog")),new UI_UnorderedList(a=new UI_LineContainer(t,_i18n.getMessage("menu_setting_standard_import_dialog_explanation")).getElement()));n.addListItem(_i18n.getMessage("menu_setting_standard_import_dialog_explanation_0")),n.addListItem(_i18n.getMessage("menu_setting_standard_import_dialog_explanation_1")),n.addListItem(_i18n.getMessage("menu_setting_standard_import_dialog_explanation_2"));var a,i=new UI_TextArea(a=new UI_LineContainer(t,_i18n.getMessage("menu_setting_standard_import_dialog_import")).getElement());new UI_TextHint(a,_i18n.getMessage("menu_setting_standard_import_dialog_import_hint")),new UI_Text(a=new UI_LineContainer(t,null).getElement(),_i18n.getMessage("menu_setting_standard_import_dialog_confirm")),new UI_YesNoButton(t).onclick=function(n){if(n)try{var a=page_expand_project.getObject(),o=new PageExpandProject,r=JsonParse(i.getValue());if(r.version>a.version)throw"Error: It is a version not supported.";var l=!0;try{if(r.setting_export){if("setting"===r.setting_export.type)l=!1}else l=!1}catch(e){}if(l)throw"Error: It is a type not supported.";delete r.setting_export,r=PageExpandProjectObjectAppendPreset(r),o.importObject(r),page_expand_project=o,projectSave((function(n){if(n.result){i.setValue("");var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_standard_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_standard_import_alert_success")),a.oncomplete=function(){e.oncomplete=function(){initialize(),_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_STANDARD)},e.close()},a.open()}else s(n.message)}))}catch(e){s(e)}else e.close();function s(n){var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_standard_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_standard_import_alert_failure")),new UI_Text(a.getElement(),n),a.oncomplete=function(){e.close()},a.open()}},e.open()};var p;d=(p=new UI_LineContainer(_content_window,_i18n.getMessage("menu_setting_standard_reset"))).getElement();function m(){if("deny"===u.filter_type)t.joinArray(u.filter_deny,"\n");else t.joinArray(u.filter_allow,"\n")}new UI_LineButton(d,_i18n.getMessage("menu_setting_standard_reset_button")).onclick=function(){var e=new UI_ModalDialog(_content_window),t=e.getElement(),n=(new UI_Title(t,_i18n.getMessage("menu_setting_standard_reset_dialog")),new UI_LineContainer(t,_i18n.getMessage("menu_setting_standard_reset_dialog_explanation")).getElement()),a=new UI_UnorderedList(n);a.addListItem(_i18n.getMessage("menu_setting_standard_reset_dialog_explanation_0")),a.addListItem(_i18n.getMessage("menu_setting_standard_reset_dialog_explanation_1")),new UI_Text(n,_i18n.getMessage("menu_setting_standard_reset_dialog_confirm")),new UI_YesNoButton(t).onclick=function(n){if(n)try{projectDelete((function(n){(page_expand_project=new PageExpandProject).initialize(),projectSave((function(n){if(n.result){var i=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_standard_reset_alert"));new UI_Text(i.getElement(),_i18n.getMessage("menu_setting_standard_reset_alert_success")),i.oncomplete=function(){e.oncomplete=function(){initialize(),_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_STANDARD)},e.close()},i.open()}else a(n.message)}))}))}catch(e){a(e)}else e.close();function a(n){var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_standard_reset_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_standard_reset_alert_failure")),new UI_Text(a.getElement(),n),a.oncomplete=function(){e.close()},a.open()}},e.open()},e.setValue(u.filter_type),m(),n.setValue(u.enable_icon_address_bar),a.setValue(u.enable_context_menu),i.setValue(u.enable_startup),o.setValue(u.enable_debug_mode),r.setValue(u.enable_output_log),l.setValue(u.enable_input_touch),s.setValue(u.enable_double_touch_assist),c.setValue(u.execute_queue.time_occupancy),_.setValue(u.execute_queue.time_sleep)}()}function ContentSettingDownload(){var e,t,n,a,i,o,r,l,s,c,_,u,d,p,m;!function(){var g=page_expand_project.getObject().download,f=(new UI_Title(_content_window,_i18n.getMessage("menu_setting_download")),new UI_TitleSub(_content_window,_i18n.getMessage("menu_setting_download_load")),new UI_LineContainer(y=new UI_GroupContainer(_content_window).getElement(),_i18n.getMessage("menu_setting_download_load_thread_max")).getElement());(e=new UI_NumericStepper(f)).setMinimum(1),e.setMaximum(99999),e.oninput=function(e){g.load.thread_max=e,projectModify()};f=new UI_LineContainer(y,_i18n.getMessage("menu_setting_download_load_timeout")).getElement();(t=new UI_NumericStepper(f)).setMinimum(0),t.setMaximum(6e5),t.oninput=function(e){g.load.timeout=e,projectModify()},new UI_TextHint(f,_i18n.getMessage("menu_setting_download_load_timeout_hint")),new UI_Break(_content_window);f=new UI_LineContainer(y,_i18n.getMessage("menu_setting_download_load_cache_for_media")).getElement();(n=new UI_ComboBox(f)).attachItem(_i18n.getMessage("menu_setting_expand_image_load_cache_for_media_combo_box_item_default"),"default"),n.attachItem(_i18n.getMessage("menu_setting_expand_image_load_cache_for_media_combo_box_item_no_store"),"no-store"),n.attachItem(_i18n.getMessage("menu_setting_expand_image_load_cache_for_media_combo_box_item_force_cache"),"force-cache"),n.onchange=function(e){g.load.cache_for_media=e,projectModify()},new UI_TextHint(f,_i18n.getMessage("menu_setting_download_load_cache_for_media_hint")),new UI_Break(_content_window);new UI_TitleSub(_content_window,_i18n.getMessage("menu_setting_download_download")),f=new UI_LineContainer(y=new UI_GroupContainer(_content_window).getElement(),_i18n.getMessage("menu_setting_download_download_thread_max")).getElement();(a=new UI_NumericStepper(f)).setMinimum(1),a.setMaximum(99999),a.oninput=function(e){g.download.thread_max=e,projectModify()};f=new UI_LineContainer(y,_i18n.getMessage("menu_setting_download_download_save_file")).getElement();function h(e){var t=Boolean("detail"===g.download.save_file.type);if(t&&e){var n="PageExpand/"+ProjectDownloadSaveFile_DetailFromSimple(g.download.save_file.simple);c.setValue(n),g.download.save_file.detail=n}o.setVisible(!t),r.setVisible(t)}(l=new UI_ComboBox(f)).attachItem(_i18n.getMessage("menu_setting_download_download_save_file_combo_box_item_simple"),"simple"),l.attachItem(_i18n.getMessage("menu_setting_download_download_save_file_combo_box_item_detail"),"detail"),l.onchange=function(e){g.download.save_file.type=e,h(!0),projectModify()},new UI_BreakItem(f),(o=new UI_FormContainer(f)).setVisible(!0);var x=o.getElement();new UI_TitleItem(x,_i18n.getMessage("menu_setting_download_download_save_file_simple")),(s=new UI_ComboBox(x)).attachItem("PageExpand / <url>","url"),s.attachItem("PageExpand / <kebab-url>","kebab_url"),s.attachItem("PageExpand / <filename>","filename"),s.attachItem("PageExpand / <domain> - <filename>","domain"),s.attachItem("PageExpand / <year> <month> <day> / <filename>","date"),s.onchange=function(e){g.download.save_file.simple=e,projectModify()},new UI_BreakItem(x),(r=new UI_FormContainer(f)).setVisible(!1);var b=r.getElement();function v(e){new UI_TitleItem(e,_i18n.getMessage("menu_setting_download_download_save_file_variable")),new UI_TextItem(e,"<url> <kebab-url> <origin> <domain> <filename> <name> <ext> <query> <fragment>"),new UI_TextItem(e,"<year> <month> <day> <hour> <minute> <second> <millisecond> <unixtime>")}new UI_TitleItem(b,_i18n.getMessage("menu_setting_download_download_save_file_detail")),(c=new UI_TextInput(b)).oninput=function(e){g.download.save_file.detail=e,projectModify()},new UI_BreakItem(b),v(b);f=new UI_LineContainer(y,_i18n.getMessage("menu_setting_download_download_conflict_type")).getElement();(i=new UI_ComboBox(f)).attachItem(_i18n.getMessage("menu_setting_download_download_conflict_type_combo_box_item_rename"),"rename"),i.attachItem(_i18n.getMessage("menu_setting_download_download_conflict_type_combo_box_item_overwrite"),"overwrite"),i.onchange=function(e){g.download.conflict_type=e,projectModify()},new UI_Break(_content_window);var y;new UI_TitleSub(_content_window,_i18n.getMessage("menu_setting_download_batch_download")),f=new UI_LineContainer(y=new UI_GroupContainer(_content_window).getElement(),_i18n.getMessage("menu_setting_download_download_save_file")).getElement();function E(e){var t=Boolean("detail"===g.batch_download.save_file.type);if(t&&e){var n=ProjectDownloadSaveFile_DetailFromSimple(g.batch_download.save_file.simple);m.setValue(n),g.batch_download.save_file.detail=n}_.setVisible(!t),u.setVisible(t)}(d=new UI_ComboBox(f)).attachItem(_i18n.getMessage("menu_setting_download_download_save_file_combo_box_item_simple"),"simple"),d.attachItem(_i18n.getMessage("menu_setting_download_download_save_file_combo_box_item_detail"),"detail"),d.onchange=function(e){g.batch_download.save_file.type=e,E(!0),projectModify()},new UI_BreakItem(f),(_=new UI_FormContainer(f)).setVisible(!0);var w=_.getElement();new UI_TitleItem(w,_i18n.getMessage("menu_setting_download_download_save_file_simple")),(p=new UI_ComboBox(w)).attachItem("<url>","url"),p.attachItem("<kebab-url>","kebab_url"),p.attachItem("<filename>","filename"),p.attachItem("<domain> - <filename>","domain"),p.attachItem("<year> <month> <day> / <filename>","date"),p.onchange=function(e){g.batch_download.save_file.simple=e,projectModify()},new UI_BreakItem(w),(u=new UI_FormContainer(f)).setVisible(!1);var S=u.getElement();new UI_TitleItem(S,_i18n.getMessage("menu_setting_download_download_save_file_detail")),(m=new UI_TextInput(S)).oninput=function(e){g.batch_download.save_file.detail=e,projectModify()},new UI_BreakItem(S),v(S),new UI_Break(_content_window),e.setValue(g.load.thread_max),t.setValue(g.load.timeout),n.setValue(g.load.cache_for_media),a.setValue(g.download.thread_max),i.setValue(g.download.conflict_type),l.setValue(g.download.save_file.type),s.setValue(g.download.save_file.simple),c.setValue(g.download.save_file.detail),d.setValue(g.batch_download.save_file.type),p.setValue(g.batch_download.save_file.simple),m.setValue(g.batch_download.save_file.detail),h(!1),E(!1)}()}function ContentSettingExpandBbs(){var e,t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f=this;function h(t){var n,a,i,o=page_expand_project.getObject().expand_bbs,r=e.getSelectedIndices(),l=r.length;for(i=0;i<l;i++)a=null,(n=o[r[i]]).user?a=n.user:n.preset&&(a=n.user=ObjectCopy(n.preset)),a&&t(a)}f.selectFromURL=function(t){var n,a,i=page_expand_project.getObject().expand_bbs,o=i.length;for(n=0;n<o;n++){var r=ProjectObjectGetActiveData(i[n]);if(r)switch(r.filter.type){case"asterisk":var l=(s=r.filter.asterisk.filter).length;for(a=0;a<l;a++)if(StringUrlMatchAsteriskWord(t,s[a]))return e.select(n),void e.replaceHistory();break;case"regexp":var s;l=(s=r.filter.regexp.filter).length;for(a=0;a<l;a++){var c=RegExpObjectGetRegExp(s[a]);if(c&&StringUrlMatchRegExpList(t,[c]))return e.select(n),void e.replaceHistory()}}}},f.selectFromIdList=function(t){e.selectFromIdList(t)},f.replaceHistory=function(){e.replaceHistory()},function(){var f=page_expand_project.getObject().expand_bbs,x=(new UI_Title(_content_window,_i18n.getMessage("menu_setting_expand_bbs")),new UI_LineContainer(_content_window,_i18n.getMessage("menu_setting_expand_bbs_list")).getElement());(e=new UI_ExpandBbsList(x)).attachExpandBbsData(f),e.onselect=function(e){e<0||f.length<=e?t.setVisible(!1):(t.setVisible(!0),function(e){var t=ProjectObjectGetActiveData(page_expand_project.getObject().expand_bbs[e]);t&&(a.setValue(LocaleObjectGetString(t.name)),i.setValue(t.enable),n.setVisible(t.enable),o.attachObject(t.filter),r.setScriptObject(t.script_initialize),l.setValue(t.popup.enable_animation),s.setValue(t.popup.origin_type),c.setValue(t.popup.position_type),_.setValue(t.popup.percent.x),u.setValue(t.popup.percent.y),d.setValue(t.popup.time_wait_open),p.setValue(t.popup.time_wait_close),m.setValue(t.popup.style_sheet),g.setScriptObject(t.script_callback))}(e))},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_BBS)};var b=(t=new UI_FormContainer(_content_window)).getElement();t.setVisible(!1);x=new UI_LineContainer(b,_i18n.getMessage("menu_setting_expand_bbs_name")).getElement();(a=new UI_TextInput(x)).oninput=function(t){h((function(e){LocaleObjectSetString(e.name,t)})),e.update(),projectModify()};x=new UI_LineContainer(b,_i18n.getMessage("menu_setting_expand_bbs_check_box_container")).getElement();(i=new UI_CheckBox(x,_i18n.getMessage("menu_setting_expand_bbs_enable_setting"))).onchange=function(t){h((function(e){e.enable=t})),n.setVisible(t),e.update(),projectModify()},(n=new UI_FormContainer(b)).setVisible(!1);var v=n.getElement();x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_filter_url")).getElement();(o=new UI_UrlEditContainer(x)).onchange=function(t){h((function(e){e.filter=ObjectCopy(t)})),e.update(),projectModify()};x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_popup_check_box_container")).getElement();(l=new UI_CheckBox(x,_i18n.getMessage("menu_setting_expand_bbs_popup_enable_animation"))).onchange=function(t){h((function(e){e.popup.enable_animation=t})),e.update(),projectModify()};x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_popup_origin_type")).getElement();(s=new UI_ComboBox(x)).attachItem(_i18n.getMessage("menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_top_bottom"),"adsorb_top_bottom"),s.attachItem(_i18n.getMessage("menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_left_right"),"adsorb_left_right"),s.onchange=function(t){h((function(e){e.popup.origin_type=t})),e.update(),projectModify()};x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_popup_position_type")).getElement();(c=new UI_ComboBox(x)).attachItem(_i18n.getMessage("menu_setting_expand_bbs_popup_position_type_combo_box_item_absolute"),"absolute"),c.attachItem(_i18n.getMessage("menu_setting_expand_bbs_popup_position_type_combo_box_item_fixed"),"fixed"),c.onchange=function(t){h((function(e){e.popup.position_type=t})),e.update(),projectModify()},new UI_TitleItem(x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_popup_percent")).getElement(),_i18n.getMessage("menu_setting_expand_bbs_popup_percent_h")),(_=new UI_NumericStepper(x)).setMinimum(0),_.setMaximum(100),_.oninput=function(t){h((function(e){e.popup.percent.x=t})),e.update(),projectModify()},new UI_BreakItem(x),new UI_TitleItem(x,_i18n.getMessage("menu_setting_expand_bbs_popup_percent_v")),(u=new UI_NumericStepper(x)).setMinimum(0),u.setMaximum(100),u.oninput=function(t){h((function(e){e.popup.percent.y=t})),e.update(),projectModify()},new UI_TitleItem(x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_popup_time")).getElement(),_i18n.getMessage("menu_setting_expand_bbs_popup_time_wait_open")),(d=new UI_NumericStepper(x)).setMinimum(0),d.setMaximum(9999999),d.oninput=function(t){h((function(e){e.popup.time_wait_open=t})),e.update(),projectModify()},new UI_BreakItem(x),new UI_TitleItem(x,_i18n.getMessage("menu_setting_expand_bbs_popup_time_wait_close")),(p=new UI_NumericStepper(x)).setMinimum(0),p.setMaximum(9999999),p.oninput=function(t){h((function(e){e.popup.time_wait_close=t})),e.update(),projectModify()};x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_popup_style_sheet")).getElement();(m=new UI_TextInput(x)).oninput=function(t){h((function(e){e.popup.style_sheet=t})),e.update(),projectModify()};x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_script_initialize")).getElement();(r=new UI_ScriptObjectEditer(x)).onchange=function(t){h((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script_initialize,t)})),e.update(),projectModify()};x=new UI_LineContainer(v,_i18n.getMessage("menu_setting_expand_bbs_script_callback")).getElement();(g=new UI_ScriptObjectEditer(x)).onchange=function(t){h((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script_callback,t)})),e.update(),projectModify()}}()}function ContentSettingUrlMap(){var e,t,n,a,i,o,r,l,s,c=this;function _(t){var n,a,i,o=page_expand_project.getObject().urlmap,r=e.getSelectedIndices(),l=r.length;for(i=0;i<l;i++)a=null,(n=o[r[i]]).user?a=n.user:n.preset&&(a=n.user=ObjectCopy(n.preset)),a&&t(a)}c.selectFromURL=function(t){var n,a,i=page_expand_project.getObject().urlmap,o=i.length;for(n=0;n<o;n++){var r=ProjectObjectGetActiveData(i[n]);if(r)switch(r.filter.type){case"asterisk":var l=(s=r.filter.asterisk.filter).length;for(a=0;a<l;a++)if(StringUrlMatchAsteriskWord(t,s[a]))return e.select(n),void e.replaceHistory();break;case"regexp":var s;l=(s=r.filter.regexp.filter).length;for(a=0;a<l;a++){var c=RegExpObjectGetRegExp(s[a]);if(c&&StringUrlMatchRegExpList(t,[c]))return e.select(n),void e.replaceHistory()}}}},c.selectFromIdList=function(t){e.selectFromIdList(t)},c.replaceHistory=function(){e.replaceHistory()};var u=[{asset:"access_block",type:PageExpandConfig.MENU_TYPE_SETTING_ACCESS_BLOCK,select:"multiple"},{asset:"replacement_to_referer",type:PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_REFERER,select:"multiple"},{asset:"replacement_to_useragent",type:PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_USERAGENT,select:"multiple"},{asset:"replacement_to_element",type:PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_ELEMENT,select:"multiple"},{asset:"replacement_to_text",type:PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_TEXT,select:"multiple"},{asset:"replacement_to_anchor",type:PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_ANCHOR,select:"multiple"},{asset:"replacement_to_link",type:PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_LINK,select:"multiple"},{asset:"make_link_to_text",type:PageExpandConfig.MENU_TYPE_SETTING_MAKE_LINK_TO_TEXT,select:"single"},{asset:"expand_short_url",type:PageExpandConfig.MENU_TYPE_SETTING_EXPAND_SHORT_URL,select:"single"},{asset:"expand_text",type:PageExpandConfig.MENU_TYPE_SETTING_EXPAND_TEXT,select:"single"},{asset:"expand_image",type:PageExpandConfig.MENU_TYPE_SETTING_EXPAND_IMAGE,select:"single"},{asset:"expand_sound",type:PageExpandConfig.MENU_TYPE_SETTING_EXPAND_SOUND,select:"single"},{asset:"expand_video",type:PageExpandConfig.MENU_TYPE_SETTING_EXPAND_VIDEO,select:"single"},{asset:"expand_iframe",type:PageExpandConfig.MENU_TYPE_SETTING_EXPAND_IFRAME,select:"single"},{asset:"style_sheet",type:PageExpandConfig.MENU_TYPE_SETTING_STYLE_SHEET,select:"single"},{asset:"experimental",type:PageExpandConfig.MENU_TYPE_SETTING_EXPERIMENTAL,select:"single"}];!function(){var c=page_expand_project.getObject(),d=c.urlmap,p=(new UI_Title(_content_window,_i18n.getMessage("menu_setting_urlmap")),new UI_LineContainer(_content_window,_i18n.getMessage("menu_setting_urlmap_list")).getElement());(e=new UI_UrlMapList(p)).attachUrlMapData(d),e.onselect=function(c){c<0||d.length<=c?t.setVisible(!1):(t.setVisible(!0),function(t){var c=page_expand_project.getObject().urlmap,_=ProjectObjectGetActiveData(c[t]);if(_){var d;a.setValue(LocaleObjectGetString(_.name)),i.setValue(_.enable),n.setVisible(_.enable),o.attachObject(_.filter),r.setValue(_.mixed_passive_content),l.setValue(_.mixed_active_content);var p=s.length;for(d=0;d<p;d++){var m=u[d];switch(m.select){case"single":var g=s[d],f=_[m.asset];f.enable?g.setValue(f.id):g.setValue("");break;case"multiple":var h=s[d],x=new Array,b=e.getSelectedIndices();for(var v in b)x.push(c[b[v]]);h.attachUrlMaps(x,c[t])}}}}(c))};var m=(t=new UI_FormContainer(_content_window)).getElement();t.setVisible(!1);p=new UI_LineContainer(m,_i18n.getMessage("menu_setting_urlmap_name")).getElement();(a=new UI_TextInput(p)).oninput=function(t){_((function(e){LocaleObjectSetString(e.name,t)})),e.update(),projectModify()};p=new UI_LineContainer(m,_i18n.getMessage("menu_setting_urlmap_check_box_container")).getElement();(i=new UI_CheckBox(p,_i18n.getMessage("menu_setting_urlmap_enable_setting"))).onchange=function(t){_((function(e){e.enable=t})),n.setVisible(t),e.update(),projectModify()},(n=new UI_FormContainer(m)).setVisible(!1);var g,f=n.getElement();p=new UI_LineContainer(f,_i18n.getMessage("menu_setting_urlmap_filter_url")).getElement();(o=new UI_UrlEditContainer(p)).onchange=function(t){_((function(e){e.filter=ObjectCopy(t)})),e.update(),projectModify()},s=new Array;var h=u.length;for(g=0;g<h;g++)!function(){var t=u[g],n=t.type,a=t.asset,i=new UI_InlineContainer(f,_i18n.getMessage("menu_setting_"+t.asset));i.setWidth(280);var o=i.getElement();switch(_menu_support_param[n].urlmap||i.setAlpha(.5),i.setBackgroundColor(_menu_item_param[n].bgcolor),t.select){case"single":var r=new UI_ComboBoxButton(o,_i18n.getMessage("menu_setting_urlmap_define_button_edit"));s.push(r),function(){var e=c[t.asset],n=0,a=e.length;for(n=0;n<a;n++){var i=e[n],o=ProjectObjectGetActiveData(i);r.attachItem(LocaleObjectGetString(o.name),i.id)}r.attachItem(_i18n.getMessage("menu_setting_urlmap_define_combo_box_item_no_use"),"")}(),r.onchange=function(t){_((function(e){var n=e[a];t?(n.enable=!0,n.id=t):(n.enable=!1,n.id="")})),e.update(),projectModify()},r.onclick=function(){_config.pushHistory(n);var e=_config.MenuItemSelect(n);e.select(r.getSelectedIndex()),e.replaceHistory()};break;case"multiple":var l=new UI_DefineMultiSelectList(o);s.push(l),l.setAsset(t.asset),l.setMenuId(n),l.setDefineData(c[t.asset]),l.onchange=function(){e.update()}}}();p=new UI_LineContainer(f,_i18n.getMessage("menu_setting_urlmap_mixed_passive_content_container")).getElement();(r=new UI_ComboBox(p)).attachItem(_i18n.getMessage("menu_setting_urlmap_mixed_passive_content_unsafe"),"unsafe"),r.attachItem(_i18n.getMessage("menu_setting_urlmap_mixed_passive_content_safe"),"safe"),r.onchange=function(t){_((function(e){e.mixed_passive_content=t})),e.update(),projectModify()},new UI_TextHint(p,_i18n.getMessage("menu_setting_urlmap_mixed_passive_content_hint"));p=new UI_LineContainer(f,_i18n.getMessage("menu_setting_urlmap_mixed_active_content_container")).getElement();(l=new UI_ComboBox(p)).attachItem(_i18n.getMessage("menu_setting_urlmap_mixed_active_content_unsafe"),"unsafe"),l.attachItem(_i18n.getMessage("menu_setting_urlmap_mixed_active_content_safe"),"safe"),l.onchange=function(t){_((function(e){e.mixed_active_content=t})),e.update(),projectModify()},new UI_TextHint(p,_i18n.getMessage("menu_setting_urlmap_mixed_active_content_hint"))}()}function ContentSettingDefine(){var e,t,n,a,i,o,r,l=this;l.select=function(e){o.select(e)},l.selectFromIdList=function(e){o.selectFromIdList(e)},l.replaceHistory=function(){o.replaceHistory()},l.update=function(){o.update()},l.onselect=function(){},l.onreload=function(){},l.attachDefineData=function(e){r=e,o.onselect=function(e){e<0||r.length<=e?(t.setVisible(!1),n.setVisible(!1)):(t.setVisible(!0),n.setVisible(!0),function(e){var t=ProjectObjectGetActiveData(r[e]);t&&("wildcard"==r[e].id?a.setVisible(!0):a.setVisible(!1),i.setValue(LocaleObjectGetString(t.name)),l.onselect(e))}(e))},o.attachDefineData(r)},l.setDefineAssetName=function(e){o.setDefineAssetName(e)},l.setTitle=function(t){e.setValue(t)},l.setFunctionForNewData=function(e){o.setFunctionForNewData(e)},l.getElementForm=function(){return n.getElement()},l.getSelectedDefinitions=function(e){var t,n,a,i=o.getSelectedIndices(),l=i.length;for(a=0;a<l;a++)n=null,(t=r[i[a]]).user?n=t.user:t.preset&&(n=t.user=ObjectCopy(t.preset)),n&&e(n)},l.getSelectedIndex=function(){return o.getSelectedIndex()},l.getSelectedIndices=function(){return ObjectCopy(o.getSelectedIndices())},function(){e=new UI_Title(_content_window,"");var r=new UI_GroupContainer(_content_window).getElement(),s=new UI_LineContainer(r,_i18n.getMessage("menu_setting_define_list")).getElement();(o=new UI_DefineList(s)).onreload=function(){l.onreload()};var c=(t=new UI_FormContainer(r)).getElement();t.setVisible(!1);var _=(a=new UI_FormContainer(c)).getElement();a.setVisible(!1);var u=new UI_UnorderedList(s=new UI_LineContainer(_,_i18n.getMessage("menu_setting_define_wildcard_detail")).getElement());u.addListItem(_i18n.getMessage("menu_setting_define_wildcard_detail_0")),u.addListItem(_i18n.getMessage("menu_setting_define_wildcard_detail_1")),u.addListItem(_i18n.getMessage("menu_setting_define_wildcard_detail_2"));s=new UI_LineContainer(c,_i18n.getMessage("menu_setting_define_name")).getElement();(i=new UI_TextInput(s)).oninput=function(e){l.getSelectedDefinitions((function(t){LocaleObjectSetString(t.name,e)})),l.update(),projectModify()},new UI_Break(_content_window);c=(n=new UI_FormContainer(_content_window)).getElement();n.setVisible(!1)}()}function ContentSettingAccessBlock(){var e,t,n=this;n.select=function(t){e.select(t)},n.selectFromIdList=function(t){e.selectFromIdList(t)},n.replaceHistory=function(){e.replaceHistory()},function(){var n=(e=new ContentSettingDefine).getElementForm(),a=page_expand_project.getObject().access_block;e.setTitle(_i18n.getMessage("menu_setting_access_block"));var i=new UI_LineContainer(new UI_GroupContainer(n).getElement(),_i18n.getMessage("menu_setting_access_block_filter_url")).getElement();(t=new UI_UrlEditContainer(i)).onchange=function(t){e.getSelectedDefinitions((function(e){e.filter=ObjectCopy(t)})),e.update(),projectModify()},new UI_Break(n),e.attachDefineData(a),e.setDefineAssetName("access_block"),e.setFunctionForNewData(createAccessBlockData),e.onselect=function(e){var n=ProjectObjectGetActiveData(a[e]);n&&t.attachObject(n.filter)},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_ACCESS_BLOCK)}}()}function ContentSettingReplacementToElement(){var e,t,n=this;n.select=function(t){e.select(t)},n.selectFromIdList=function(t){e.selectFromIdList(t)},n.replaceHistory=function(){e.replaceHistory()},function(){var n=(e=new ContentSettingDefine).getElementForm(),a=page_expand_project.getObject().replacement_to_element;e.setTitle(_i18n.getMessage("menu_setting_replacement_to_element"));var i=new UI_LineContainer(new UI_GroupContainer(n).getElement(),_i18n.getMessage("menu_setting_replacement_to_element_script")).getElement();(t=new UI_ScriptObjectEditer(i)).onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script,t)})),e.update(),projectModify()},new UI_Break(n),e.attachDefineData(a),e.setDefineAssetName("replacement_to_element"),e.setFunctionForNewData(createReplacementToElementData),e.onselect=function(e){var n=ProjectObjectGetActiveData(a[e]);n&&t.setScriptObject(n.script)},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_ELEMENT)}}()}function ContentSettingReplacementToText(){var e,t,n=this;n.select=function(t){e.select(t)},n.selectFromIdList=function(t){e.selectFromIdList(t)},n.replaceHistory=function(){e.replaceHistory()},function(){var n=(e=new ContentSettingDefine).getElementForm(),a=page_expand_project.getObject().replacement_to_text;e.setTitle(_i18n.getMessage("menu_setting_replacement_to_text"));var i=new UI_LineContainer(new UI_GroupContainer(n).getElement(),_i18n.getMessage("menu_setting_replacement_to_text_script")).getElement();(t=new UI_ScriptObjectEditer(i)).onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script,t)})),e.update(),projectModify()},new UI_Break(n),e.attachDefineData(a),e.setDefineAssetName("replacement_to_text"),e.setFunctionForNewData(createReplacementToTextData),e.onselect=function(e){var n=ProjectObjectGetActiveData(a[e]);n&&t.setScriptObject(n.script)},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_TEXT)}}()}function ContentSettingReplacementToAnchor(){var e,t,n=this;n.select=function(t){e.select(t)},n.selectFromIdList=function(t){e.selectFromIdList(t)},n.replaceHistory=function(){e.replaceHistory()},function(){var n=(e=new ContentSettingDefine).getElementForm(),a=page_expand_project.getObject().replacement_to_anchor;e.setTitle(_i18n.getMessage("menu_setting_replacement_to_anchor"));var i=new UI_LineContainer(new UI_GroupContainer(n).getElement(),_i18n.getMessage("menu_setting_replacement_to_anchor_script")).getElement();(t=new UI_ScriptObjectEditer(i)).onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script,t)})),e.update(),projectModify()},new UI_Break(n),e.attachDefineData(a),e.setDefineAssetName("replacement_to_anchor"),e.setFunctionForNewData(createReplacementToAnchorData),e.onselect=function(e){var n=ProjectObjectGetActiveData(a[e]);n&&t.setScriptObject(n.script)},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_ANCHOR)}}()}function ContentSettingReplacementToLink(){var e,t,n,a,i,o,r,l,s,c=this;c.select=function(t){e.select(t)},c.selectFromIdList=function(t){e.selectFromIdList(t)},c.selectFilterFromList=function(e){t.selectFromList(e)},c.replaceHistory=function(){e.replaceHistory(),t.replaceHistory()},function(){var c=(e=new ContentSettingDefine).getElementForm(),_=page_expand_project.getObject().replacement_to_link;e.setTitle(_i18n.getMessage("menu_setting_replacement_to_link"));new UI_TitleSub(c,_i18n.getMessage("menu_setting_replacement_to_link_filter_list"));function u(e){var c=!1,_=ProjectObjectGetActiveData(t.getDefinitionActive());if(_){var u=_.filter;if(0<=e&&e<u.length){u=u[e];n.setValue(LocaleObjectGetString(u.name)),a.attachObject(u.filter),i.setScriptObject(u.script),o.setValue(u.enable_reflect_to_anchor),r.setValue(u.enable_cache),c=!0}}l.setVisible(c),s.setVisible(c)}var d=new UI_LineContainer(m=new UI_GroupContainer(c).getElement(),_i18n.getMessage("menu_setting_replacement_to_link_filter_list")).getElement();(t=new UI_FilterList(d)).onselect=function(e){u(e)},t.onchange=function(t){e.update()},(l=new UI_FormContainer(m)).setVisible(!1);d=new UI_LineContainer(p=l.getElement(),_i18n.getMessage("menu_setting_replacement_to_link_filter_name")).getElement();(n=new UI_TextInput(d)).oninput=function(n){t.writeFilters((function(e){LocaleObjectSetString(e.name,n)})),t.update(),e.update(),projectModify()},new UI_Break(c),(s=new UI_FormContainer(c)).setVisible(!1);var p,m;new UI_TitleSub(p=s.getElement(),_i18n.getMessage("menu_setting_replacement_to_link_filter")),d=new UI_LineContainer(m=new UI_GroupContainer(p).getElement(),_i18n.getMessage("menu_setting_replacement_to_link_filter_filter_url")).getElement();(a=new UI_UrlEditContainer(d)).onchange=function(n){t.writeFilters((function(e){e.filter=ObjectCopy(n)})),e.update(),projectModify()};d=new UI_LineContainer(m,_i18n.getMessage("menu_setting_replacement_to_link_check_box_container")).getElement();(o=new UI_CheckBox(d,_i18n.getMessage("menu_setting_replacement_to_link_enable_reflect_to_anchor"))).onchange=function(n){t.writeFilters((function(e){e.enable_reflect_to_anchor=n})),e.update(),projectModify()},(r=new UI_CheckBox(d,_i18n.getMessage("menu_setting_replacement_to_link_enable_cache"))).onchange=function(n){t.writeFilters((function(e){e.enable_cache=n})),e.update(),projectModify()};d=new UI_LineContainer(m,_i18n.getMessage("menu_setting_replacement_to_link_filter_script")).getElement();(i=new UI_ScriptObjectEditer(d)).onchange=function(n){t.writeFilters((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script,n)})),e.update(),projectModify()},new UI_Break(p),e.attachDefineData(_),e.setDefineAssetName("replacement_to_link"),e.setFunctionForNewData(createReplacementToLinkData),t.setFunctionForNewDefineData(createReplacementToLinkData),t.setFunctionForNewFilterData(createReplacementToLinkFilterItemData),t.setDefineAssetName("replacement_to_link"),e.onselect=function(n){if(ProjectObjectGetActiveData(_[n])){var a=new Array,i=e.getSelectedIndices();for(var o in i)a.push(_[i[o]]);t.attachDefinitions(a,_[n]),u(-1)}},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_LINK)}}()}function ContentSettingReplacementToReferer(){var e,t,n,a,i,o,r,l,s,c,_,u=this;u.select=function(t){e.select(t)},u.selectFromIdList=function(t){e.selectFromIdList(t)},u.selectFilterFromList=function(e){t.selectFromList(e)},u.replaceHistory=function(){e.replaceHistory(),t.replaceHistory()},function(){var u=(e=new ContentSettingDefine).getElementForm(),d=page_expand_project.getObject().replacement_to_referer;e.setTitle(_i18n.getMessage("menu_setting_replacement_to_referer"));new UI_TitleSub(u,_i18n.getMessage("menu_setting_replacement_to_referer_filter_list"));function p(e){var _=!1,u=ProjectObjectGetActiveData(t.getDefinitionActive());if(u){var d=u.filter;if(0<=e&&e<d.length){d=d[e];n.setValue(LocaleObjectGetString(d.name)),a.attachObject(d.filter),i.setValue(d.send_referer.type),o.setValue(d.send_referer.custom),r.setValue(d.send_referer.regexp),l.setValue(d.send_referer.replacement),m(),_=!0}}s.setVisible(_),c.setVisible(_)}function m(){_.setVisible("custom"==i.getValue())}var g=new UI_LineContainer(h=new UI_GroupContainer(u).getElement(),_i18n.getMessage("menu_setting_replacement_to_referer_filter_list")).getElement();(t=new UI_FilterList(g)).onselect=function(e){p(e)},t.onchange=function(t){e.update()},(s=new UI_FormContainer(h)).setVisible(!1);g=new UI_LineContainer(f=s.getElement(),_i18n.getMessage("menu_setting_replacement_to_referer_filter_name")).getElement();(n=new UI_TextInput(g)).oninput=function(n){t.writeFilters((function(e){LocaleObjectSetString(e.name,n)})),t.update(),e.update(),projectModify()},new UI_Break(u),(c=new UI_FormContainer(u)).setVisible(!1);var f,h;new UI_TitleSub(f=c.getElement(),_i18n.getMessage("menu_setting_replacement_to_referer_filter")),g=new UI_LineContainer(h=new UI_GroupContainer(f).getElement(),_i18n.getMessage("menu_setting_replacement_to_referer_filter_filter_url")).getElement();(a=new UI_UrlEditContainer(g)).onchange=function(n){t.writeFilters((function(e){e.filter=ObjectCopy(n)})),e.update(),projectModify()},new UI_TitleItem(g=new UI_LineContainer(h,_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_type")).getElement(),_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_type_combo_box_item")),(i=new UI_ComboBox(g)).attachItem(_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_type_combo_box_item_default"),"default"),i.attachItem(_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_type_combo_box_item_current_url"),"current_url"),i.attachItem(_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_type_combo_box_item_link_url"),"link_url"),i.attachItem(_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_type_combo_box_item_custom"),"custom"),i.onchange=function(n){t.writeFilters((function(e){e.send_referer.type=n})),e.update(),projectModify(),m()},(_=new UI_FormContainer(g)).setVisible(!1);var x=_.getElement();new UI_BreakItem(x),new UI_TitleItem(x,_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_custom")),(o=new UI_TextInput(x)).oninput=function(n){t.writeFilters((function(e){e.send_referer.custom=n})),e.update(),projectModify()},new UI_TitleItem(g=new UI_LineContainer(h,_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_regexp")).getElement(),_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_regexp_match")),(r=new UI_TextRegExp(g)).oninput=function(n){t.writeFilters((function(e){e.send_referer.regexp=ObjectCopy(n)})),e.update(),projectModify()},new UI_BreakItem(g),new UI_TitleItem(g,_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_regexp_replacement")),(l=new UI_TextInput(g)).oninput=function(n){t.writeFilters((function(e){e.send_referer.replacement=n})),e.update(),projectModify()},new UI_TextHint(g,_i18n.getMessage("menu_setting_replacement_to_referer_filter_send_regexp_replacement_hint")),new UI_Break(f),e.attachDefineData(d),e.setDefineAssetName("replacement_to_referer"),e.setFunctionForNewData(createReplacementToRefererData),t.setFunctionForNewDefineData(createReplacementToRefererData),t.setFunctionForNewFilterData(createReplacementToRefererFilterItemData),t.setDefineAssetName("replacement_to_referer"),e.onselect=function(n){if(ProjectObjectGetActiveData(d[n])){var a=new Array,i=e.getSelectedIndices();for(var o in i)a.push(d[i[o]]);t.attachDefinitions(a,d[n]),p(-1)}},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_REFERER)}}()}function ContentSettingReplacementToUserAgent(){var e,t,n,a,i,o,r,l=this;l.select=function(t){e.select(t)},l.selectFromIdList=function(t){e.selectFromIdList(t)},l.selectFilterFromList=function(e){t.selectFromList(e)},l.replaceHistory=function(){e.replaceHistory(),t.replaceHistory()},function(){var l=(e=new ContentSettingDefine).getElementForm(),s=page_expand_project.getObject().replacement_to_useragent;new UI_TitleSub(l,_i18n.getMessage("menu_setting_replacement_to_useragent_filter_list"));function c(e){var l=!1,s=ProjectObjectGetActiveData(t.getDefinitionActive());if(s){var c=s.filter;if(0<=e&&e<c.length){c=c[e];n.setValue(LocaleObjectGetString(c.name)),a.attachObject(c.filter),i.setValue(c.send_useragent.custom),l=!0}}o.setVisible(l),r.setVisible(l)}var _=new UI_LineContainer(d=new UI_GroupContainer(l).getElement(),_i18n.getMessage("menu_setting_replacement_to_useragent_filter_list")).getElement();(t=new UI_FilterList(_)).onselect=function(e){c(e)},t.onchange=function(t){e.update()},(o=new UI_FormContainer(d)).setVisible(!1);_=new UI_LineContainer(u=o.getElement(),_i18n.getMessage("menu_setting_replacement_to_useragent_filter_name")).getElement();(n=new UI_TextInput(_)).oninput=function(n){t.writeFilters((function(e){LocaleObjectSetString(e.name,n)})),t.update(),e.update(),projectModify()},new UI_Break(l),(r=new UI_FormContainer(l)).setVisible(!1);var u,d;new UI_TitleSub(u=r.getElement(),_i18n.getMessage("menu_setting_replacement_to_useragent_filter")),_=new UI_LineContainer(d=new UI_GroupContainer(u).getElement(),_i18n.getMessage("menu_setting_replacement_to_useragent_filter_filter_url")).getElement();(a=new UI_UrlEditContainer(_)).onchange=function(n){t.writeFilters((function(e){e.filter=ObjectCopy(n)})),e.update(),projectModify()},new UI_TitleItem(_=new UI_LineContainer(d,_i18n.getMessage("menu_setting_replacement_to_useragent_filter_send")).getElement(),_i18n.getMessage("menu_setting_replacement_to_useragent_filter_send_custom")),(i=new UI_TextInput(_)).oninput=function(n){t.writeFilters((function(e){e.send_useragent.custom=n})),e.update(),projectModify()},new UI_Break(u),e.setTitle(_i18n.getMessage("menu_setting_replacement_to_useragent")),e.attachDefineData(s),e.setDefineAssetName("replacement_to_useragent"),e.setFunctionForNewData(createReplacementToUserAgentData),t.setFunctionForNewDefineData(createReplacementToUserAgentData),t.setFunctionForNewFilterData(createReplacementToUserAgentFilterItemData),t.setDefineAssetName("replacement_to_useragent"),e.onselect=function(n){if(ProjectObjectGetActiveData(s[n])){var a=new Array,i=e.getSelectedIndices();for(var o in i)a.push(s[i[o]]);t.attachDefinitions(a,s[n]),c(-1)}},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_USERAGENT)}}()}function ContentSettingMakeLinkToText(){var e,t,n=this;n.select=function(t){e.select(t)},n.selectFromIdList=function(t){e.selectFromIdList(t)},n.replaceHistory=function(){e.replaceHistory()},function(){var n=(e=new ContentSettingDefine).getElementForm(),a=page_expand_project.getObject().make_link_to_text;e.setTitle(_i18n.getMessage("menu_setting_make_link_to_text"));var i=new UI_LineContainer(new UI_GroupContainer(n).getElement(),_i18n.getMessage("menu_setting_make_link_to_text_script")).getElement();(t=new UI_ScriptObjectEditer(i)).onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.script,t)})),e.update(),projectModify()},new UI_Break(n),e.attachDefineData(a),e.setDefineAssetName("make_link_to_text"),e.setFunctionForNewData(createMakeLinkToTextData),e.onselect=function(e){var n=ProjectObjectGetActiveData(a[e]);n&&t.setScriptObject(n.script)},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_MAKE_LINK_TO_TEXT)}}()}function ContentSettingExpandShortUrl(){var e,t,n=this;n.select=function(t){e.select(t)},n.selectFromIdList=function(t){e.selectFromIdList(t)},n.replaceHistory=function(){e.replaceHistory()},function(){var n=(e=new ContentSettingDefine).getElementForm(),a=page_expand_project.getObject().expand_short_url;e.setTitle(_i18n.getMessage("menu_setting_expand_short_url"));var i=new UI_LineContainer(new UI_GroupContainer(n).getElement(),_i18n.getMessage("menu_setting_expand_short_url_filter_url")).getElement();(t=new UI_UrlEditContainer(i)).onchange=function(t){e.getSelectedDefinitions((function(e){e.filter=ObjectCopy(t)})),e.update(),projectModify()},new UI_Break(n),e.attachDefineData(a),e.setDefineAssetName("expand_short_url"),e.setFunctionForNewData(createExpandShortUrlData),e.onselect=function(e){var n=ProjectObjectGetActiveData(a[e]);n&&t.attachObject(n.filter)},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_SHORT_URL)}}()}function ContentSettingExpandText(){var e,t=this;t.select=function(t){e.select(t)},t.selectFromIdList=function(t){e.selectFromIdList(t)},t.replaceHistory=function(){e.replaceHistory()},function(){var t=(e=new ContentSettingDefine).getElementForm(),n=page_expand_project.getObject().expand_text;e.setTitle(_i18n.getMessage("menu_setting_expand_text"));new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_text_inline"));var a=new UI_GroupContainer(t).getElement(),i=new UI_CheckBox(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_text_inline_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_text_inline_disable_same_text"));i.onchange=function(t){e.getSelectedDefinitions((function(e){e.inline.disable_same_text=t})),e.update(),projectModify()};var o=new UI_ScriptObjectEditer(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_text_inline_script_allow")).getElement());o.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_allow,t)})),e.update(),projectModify()};var r=new UI_ScriptObjectEditer(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_text_inline_script_insert")).getElement());r.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_insert,t)})),e.update(),projectModify()},new UI_Break(t),e.attachDefineData(n),e.setDefineAssetName("expand_text"),e.setFunctionForNewData(createExpandText),e.onselect=function(e){var t=ProjectObjectGetActiveData(n[e]);t&&(i.setValue(t.inline.disable_same_text),o.setScriptObject(t.inline.script_allow),r.setScriptObject(t.inline.script_insert))},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_TEXT)}}()}function ContentSettingExpandImage(){var e,t,n,a,i,o,r=this;r.select=function(t){e.select(t)},r.selectFromIdList=function(t){e.selectFromIdList(t)},r.replaceHistory=function(){e.replaceHistory()},function(){var r=(e=new ContentSettingDefine).getElementForm(),l=page_expand_project.getObject().expand_image;function s(){var e=ProjectObjectGetActiveData(l[o]);e&&(t.setVisible(e.thumbnail.enable_thumbnail),n.setVisible(e.thumbnail.enable_thumbnail||e.popup.enable_popup_mouseover||e.reduced_image.enable_popup),a.setVisible(e.reduced_image.enable_popup))}e.setTitle(_i18n.getMessage("menu_setting_expand_image"));new UI_TitleSub(r,_i18n.getMessage("menu_setting_expand_image_reduced_image"));var c=new UI_CheckBox(O=new UI_LineContainer(N=new UI_GroupContainer(r).getElement(),_i18n.getMessage("menu_setting_expand_image_reduced_image_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_popup_enable_popup"));c.onchange=function(t){e.getSelectedDefinitions((function(e){e.reduced_image.enable_popup=t})),s(),e.update(),projectModify()},(a=new UI_FormContainer(N)).setVisible(!1);var _=new UI_NumericStepper(O=new UI_LineContainer(a.getElement(),_i18n.getMessage("menu_setting_expand_image_reduced_image_allow_slcale_less_then")).getElement());_.setMinimum(0),_.setMaximum(100),_.oninput=function(t){e.getSelectedDefinitions((function(e){e.reduced_image.popup_allow_slcale_less_then=t})),e.update(),projectModify()},new UI_TextItem(O,_i18n.getMessage("menu_setting_expand_image_reduced_image_allow_slcale_less_then_text")),new UI_Break(r);new UI_TitleSub(r,_i18n.getMessage("menu_setting_expand_image_thumbnail"));var u=new UI_CheckBox(O=new UI_LineContainer(N=new UI_GroupContainer(r).getElement(),_i18n.getMessage("menu_setting_expand_image_thumbnail_enable_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_thumbnail_enable_thumbnail"));u.onchange=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.enable_thumbnail=t})),s(),e.update(),projectModify()},(t=new UI_FormContainer(N)).setVisible(!1);var d=t.getElement(),p=new UI_CheckBox(O=new UI_LineContainer(d,_i18n.getMessage("menu_setting_expand_image_thumbnail_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_thumbnail_enable_popup_mouseover"));p.onchange=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.enable_popup_mouseover=t})),e.update(),projectModify()};var m=new UI_CheckBox(O,_i18n.getMessage("menu_setting_expand_image_thumbnail_disable_same_thumbnail_image"));m.onchange=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.disable_same_image=t})),e.update(),projectModify()},new UI_TitleItem(O=new UI_LineContainer(d,_i18n.getMessage("menu_setting_expand_image_thumbnail_size")).getElement(),_i18n.getMessage("menu_setting_expand_image_thumbnail_size_min"));var g=new UI_NumericStepper(O);g.setMinimum(0),g.setMaximum(9999999),g.oninput=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.width_min=t})),e.update(),projectModify()},new UI_BreakItem(O),new UI_TitleItem(O,_i18n.getMessage("menu_setting_expand_image_thumbnail_size_scale"));var f=new UI_NumericStepper(O);f.setMinimum(0),f.setMaximum(9999999),f.oninput=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.scale_percent=t})),e.update(),projectModify()},new UI_BreakItem(O),new UI_TitleItem(O,_i18n.getMessage("menu_setting_expand_image_thumbnail_size_max"));var h=new UI_NumericStepper(O);h.setMinimum(0),h.setMaximum(9999999),h.oninput=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.width_max=t})),e.update(),projectModify()};var x=new UI_ComboBox(O=new UI_LineContainer(d,_i18n.getMessage("menu_setting_expand_image_load_start_type")).getElement());x.attachItem(_i18n.getMessage("menu_setting_expand_image_load_start_type_preload"),"preload"),x.attachItem(_i18n.getMessage("menu_setting_expand_image_load_start_type_scroll"),"scroll"),x.onchange=function(t){e.getSelectedDefinitions((function(e){e.thumbnail.load_type=t})),e.update(),projectModify()};var b=new UI_ScriptObjectEditer(O=new UI_LineContainer(d,_i18n.getMessage("menu_setting_expand_image_thumbnail_script_allow")).getElement());b.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.thumbnail.script_allow,t)})),e.update(),projectModify()};var v=new UI_ScriptObjectEditer(O=new UI_LineContainer(d,_i18n.getMessage("menu_setting_expand_image_thumbnail_script_insert")).getElement());v.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.thumbnail.script_insert,t)})),e.update(),projectModify()},new UI_Break(r);new UI_TitleSub(r,_i18n.getMessage("menu_setting_expand_image_popup"));var y=new UI_CheckBox(O=new UI_LineContainer(N=new UI_GroupContainer(r).getElement(),_i18n.getMessage("menu_setting_expand_image_popup_enable_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_popup_enable_popup_mouseover"));y.onchange=function(t){e.getSelectedDefinitions((function(e){e.popup.enable_popup_mouseover=t})),s(),e.update(),projectModify()},(n=new UI_FormContainer(N)).setVisible(!1);var E=n.getElement(),w=new UI_CheckBox(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_popup_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_popup_enable_animation_scale"));w.onchange=function(t){e.getSelectedDefinitions((function(e){e.popup.enable_animation_scale=t})),e.update(),projectModify()};var S=new UI_CheckBox(O,_i18n.getMessage("menu_setting_expand_image_popup_enable_animation_alpha"));S.onchange=function(t){e.getSelectedDefinitions((function(e){e.popup.enable_animation_alpha=t})),e.update(),projectModify()};var C=new UI_ComboBox(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_load_start_type")).getElement());C.attachItem(_i18n.getMessage("menu_setting_expand_image_load_start_type_preload"),"preload"),C.attachItem(_i18n.getMessage("menu_setting_expand_image_load_start_type_scroll"),"scroll"),C.onchange=function(t){e.getSelectedDefinitions((function(e){e.popup.load_type=t})),e.update(),projectModify()};var A=new UI_ComboBox(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_popup_origin_type")).getElement());A.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_origin_type_combo_box_item_center"),"center"),A.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_origin_type_combo_box_item_upper_left"),"upper_left"),A.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_origin_type_combo_box_item_upper_right"),"upper_right"),A.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_origin_type_combo_box_item_client_center"),"client_center"),A.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_element"),"adsorb_element"),A.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_mouse"),"adsorb_mouse"),A.onchange=function(t){e.getSelectedDefinitions((function(e){e.popup.origin_type=t})),e.update(),projectModify()};var k=new UI_ComboBox(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_popup_position_type")).getElement());k.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_position_type_combo_box_item_absolute"),"absolute"),k.attachItem(_i18n.getMessage("menu_setting_expand_image_popup_position_type_combo_box_item_fixed"),"fixed"),k.onchange=function(t){e.getSelectedDefinitions((function(e){e.popup.position_type=t})),e.update(),projectModify()},new UI_TitleItem(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_popup_size")).getElement(),_i18n.getMessage("menu_setting_expand_image_popup_size_scale"));var I=new UI_NumericStepper(O);I.setMinimum(0),I.setMaximum(9999999),I.oninput=function(t){e.getSelectedDefinitions((function(e){e.popup.scale_percent=t})),e.update(),projectModify()},new UI_TitleItem(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_popup_time")).getElement(),_i18n.getMessage("menu_setting_expand_image_popup_time_wait_open"));var D=new UI_NumericStepper(O);D.setMinimum(0),D.setMaximum(9999999),D.oninput=function(t){e.getSelectedDefinitions((function(e){e.popup.time_wait_open=t})),e.update(),projectModify()},new UI_BreakItem(O),new UI_TitleItem(O,_i18n.getMessage("menu_setting_expand_image_popup_time_wait_close"));var T=new UI_NumericStepper(O);T.setMinimum(0),T.setMaximum(9999999),T.oninput=function(t){e.getSelectedDefinitions((function(e){e.popup.time_wait_close=t})),e.update(),projectModify()};var R=new UI_ScriptObjectEditer(O=new UI_LineContainer(E,_i18n.getMessage("menu_setting_expand_image_popup_script_allow")).getElement());R.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.popup.script_allow,t)})),e.update(),projectModify()},new UI_Break(r);new UI_TitleSub(r,_i18n.getMessage("menu_setting_expand_image_load"));var N,j=new UI_CheckBox(O=new UI_LineContainer(N=new UI_GroupContainer(r).getElement(),_i18n.getMessage("menu_setting_expand_image_load_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_load_enable_notify"));j.onchange=function(t){e.getSelectedDefinitions((function(e){e.load.enable_notify=t})),e.update(),projectModify()};var P=new UI_ComboBox(O=new UI_LineContainer(N,_i18n.getMessage("menu_setting_expand_image_load_src_type")).getElement());P.attachItem(_i18n.getMessage("menu_setting_expand_image_load_src_type_combo_box_item_url"),"url"),P.attachItem(_i18n.getMessage("menu_setting_expand_image_load_src_type_combo_box_item_blob_url"),"blob_url"),P.onchange=function(t){e.getSelectedDefinitions((function(e){e.load.src_type=t})),e.update(),projectModify()};var L=new UI_ComboBox(O=new UI_LineContainer(N,_i18n.getMessage("menu_setting_expand_image_load_decode")).getElement());L.attachItem(_i18n.getMessage("menu_setting_expand_image_load_decode_combo_box_item_auto"),"auto"),L.attachItem(_i18n.getMessage("menu_setting_expand_image_load_decode_combo_box_item_pre_decode"),"pre-decode"),L.onchange=function(t){e.getSelectedDefinitions((function(e){e.load.decode=t})),e.update(),projectModify()};var M=new UI_CheckBox(O=new UI_LineContainer(N,_i18n.getMessage("menu_setting_expand_image_load_unload_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_image_load_enable_unload"));M.onchange=function(t){e.getSelectedDefinitions((function(e){e.load.enable_unload=t})),i.setVisible(t),e.update(),projectModify()},(i=new UI_FormContainer(N)).setVisible(!1);var O,U=new UI_NumericStepper(O=new UI_LineContainer(i.getElement(),_i18n.getMessage("menu_setting_expand_image_load_unload")).getElement());U.setMinimum(0),U.setMaximum(99999),U.oninput=function(t){e.getSelectedDefinitions((function(e){e.load.unload_allow_size_more_then=t})),e.update(),projectModify()},new UI_TextItem(O,_i18n.getMessage("menu_setting_expand_image_load_allow_unload_more_then_text")),new UI_Break(r),e.attachDefineData(l),e.setDefineAssetName("expand_image"),e.setFunctionForNewData(createExpandImage),e.onselect=function(e){var t=ProjectObjectGetActiveData(l[e]);t&&(u.setValue(t.thumbnail.enable_thumbnail),p.setValue(t.thumbnail.enable_popup_mouseover),m.setValue(t.thumbnail.disable_same_image),g.setValue(t.thumbnail.width_min),f.setValue(t.thumbnail.scale_percent),h.setValue(t.thumbnail.width_max),x.setValue(t.thumbnail.load_type),b.setScriptObject(t.thumbnail.script_allow),v.setScriptObject(t.thumbnail.script_insert),y.setValue(t.popup.enable_popup_mouseover),w.setValue(t.popup.enable_animation_scale),S.setValue(t.popup.enable_animation_alpha),C.setValue(t.popup.load_type),A.setValue(t.popup.origin_type),k.setValue(t.popup.position_type),I.setValue(t.popup.scale_percent),D.setValue(t.popup.time_wait_open),T.setValue(t.popup.time_wait_close),R.setScriptObject(t.popup.script_allow),c.setValue(t.reduced_image.enable_popup),_.setValue(t.reduced_image.popup_allow_slcale_less_then),j.setValue(t.load.enable_notify),P.setValue(t.load.src_type),L.setValue(t.load.decode),M.setValue(t.load.enable_unload),i.setVisible(t.load.enable_unload),U.setValue(t.load.unload_allow_size_more_then),o=e,s())},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_IMAGE)}}()}function ContentSettingExpandSound(){var e,t=this;t.select=function(t){e.select(t)},t.selectFromIdList=function(t){e.selectFromIdList(t)},t.replaceHistory=function(){e.replaceHistory()},function(){var t=(e=new ContentSettingDefine).getElementForm(),n=page_expand_project.getObject().expand_sound;e.setTitle(_i18n.getMessage("menu_setting_expand_sound"));new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_sound_inline"));var a=new UI_CheckBox(new UI_LineContainer(_=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_disable_same_text"));a.onchange=function(t){e.getSelectedDefinitions((function(e){e.inline.disable_same_audio=t})),e.update(),projectModify()};var i=new UI_NumericStepper(new UI_LineContainer(_,_i18n.getMessage("menu_setting_expand_sound_inline_sound_max")).getElement());i.setMinimum(1),i.setMaximum(99999),i.oninput=function(t){e.getSelectedDefinitions((function(e){e.inline.sound_max=t})),e.update(),projectModify()};var o=new UI_ScriptObjectEditer(new UI_LineContainer(_,_i18n.getMessage("menu_setting_expand_sound_inline_script_allow")).getElement());o.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_allow,t)})),e.update(),projectModify()};var r=new UI_ScriptObjectEditer(new UI_LineContainer(_,_i18n.getMessage("menu_setting_expand_sound_inline_script_insert")).getElement());r.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_insert,t)})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_sound_inline_element"));var l=new UI_ScriptObjectEditer(new UI_LineContainer(_=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_element_script_allow")).getElement());l.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.audio_element.script_allow,t)})),e.update(),projectModify()};var s=new UI_ComboBox(new UI_LineContainer(_,_i18n.getMessage("menu_setting_expand_sound_inline_element_src_type")).getElement());s.attachItem(_i18n.getMessage("menu_setting_expand_sound_inline_element_src_type_combo_box_item_url"),"url"),s.attachItem(_i18n.getMessage("menu_setting_expand_sound_inline_element_src_type_combo_box_item_blob_url"),"blob_url"),s.onchange=function(t){e.getSelectedDefinitions((function(e){e.audio_element.src_type=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_sound_inline_soundcloud"));var c=new UI_CheckBox(new UI_LineContainer(_=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_soundcloud_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_soundcloud_visible_player_html5"));c.onchange=function(t){e.getSelectedDefinitions((function(e){e.soundcloud.visible_player_html5=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_sound_inline_mixcloud"));var _,u=new UI_CheckBox(new UI_LineContainer(_=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_mixcloud_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_sound_inline_mixcloud_visible_player"));u.onchange=function(t){e.getSelectedDefinitions((function(e){e.mixcloud.visible_player=t})),e.update(),projectModify()},new UI_Break(t),e.attachDefineData(n),e.setDefineAssetName("expand_sound"),e.setFunctionForNewData(createExpandSound),e.onselect=function(e){var t=ProjectObjectGetActiveData(n[e]);t&&(a.setValue(t.inline.disable_same_audio),i.setValue(t.inline.sound_max),o.setScriptObject(t.inline.script_allow),r.setScriptObject(t.inline.script_insert),l.setScriptObject(t.audio_element.script_allow),s.setValue(t.audio_element.src_type),c.setValue(t.soundcloud.visible_player_html5),u.setValue(t.mixcloud.visible_player))},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_SOUND)}}()}function ContentSettingExpandVideo(){var e,t=this;t.select=function(t){e.select(t)},t.selectFromIdList=function(t){e.selectFromIdList(t)},t.replaceHistory=function(){e.replaceHistory()},function(){var t=(e=new ContentSettingDefine).getElementForm(),n=page_expand_project.getObject().expand_video;e.setTitle(_i18n.getMessage("menu_setting_expand_video"));new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_video_inline"));var a=new UI_CheckBox(g=new UI_LineContainer(m=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_disable_same_video"));a.onchange=function(t){e.getSelectedDefinitions((function(e){e.inline.disable_same_video=t})),e.update(),projectModify()};var i=new UI_NumericStepper(g=new UI_LineContainer(m,_i18n.getMessage("menu_setting_expand_video_inline_video_max")).getElement());i.setMinimum(1),i.setMaximum(99999),i.oninput=function(t){e.getSelectedDefinitions((function(e){e.inline.video_max=t})),e.update(),projectModify()},new UI_TitleItem(g=new UI_LineContainer(m,_i18n.getMessage("menu_setting_expand_video_inline_size")).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_width_max"));var o=new UI_NumericStepper(g);o.setMinimum(100),o.setMaximum(9999999),o.oninput=function(t){e.getSelectedDefinitions((function(e){e.inline.width_max=t})),e.update(),projectModify()},new UI_BreakItem(g),new UI_TitleItem(g,_i18n.getMessage("menu_setting_expand_video_inline_height_max"));var r=new UI_NumericStepper(g);r.setMinimum(100),r.setMaximum(9999999),r.oninput=function(t){e.getSelectedDefinitions((function(e){e.inline.height_max=t})),e.update(),projectModify()};var l=new UI_ScriptObjectEditer(g=new UI_LineContainer(m,_i18n.getMessage("menu_setting_expand_video_inline_script_allow")).getElement());l.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_allow,t)})),e.update(),projectModify()};var s=new UI_ScriptObjectEditer(g=new UI_LineContainer(m,_i18n.getMessage("menu_setting_expand_video_inline_script_insert")).getElement());s.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_insert,t)})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_video_inline_element"));var c=new UI_ScriptObjectEditer(g=new UI_LineContainer(m=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_element_script_allow")).getElement());c.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.video_element.script_allow,t)})),e.update(),projectModify()};var _=new UI_ComboBox(g=new UI_LineContainer(m,_i18n.getMessage("menu_setting_expand_video_inline_element_src_type")).getElement());_.attachItem(_i18n.getMessage("menu_setting_expand_video_inline_element_src_type_combo_box_item_url"),"url"),_.attachItem(_i18n.getMessage("menu_setting_expand_video_inline_element_src_type_combo_box_item_blob_url"),"blob_url"),_.onchange=function(t){e.getSelectedDefinitions((function(e){e.video_element.src_type=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_video_inline_youtube"));var u=new UI_CheckBox(g=new UI_LineContainer(m=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_youtube_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_youtube_visible_video"));u.onchange=function(t){e.getSelectedDefinitions((function(e){e.youtube.visible_video=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_video_inline_nicovideo"));var d=new UI_CheckBox(g=new UI_LineContainer(m=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_nicovideo_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_nicovideo_visible_video"));d.onchange=function(t){e.getSelectedDefinitions((function(e){e.nicovideo.visible_video=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_video_inline_dailymotion"));var p=new UI_CheckBox(g=new UI_LineContainer(m=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_dailymotion_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_dailymotion_visible_video"));p.onchange=function(t){e.getSelectedDefinitions((function(e){e.dailymotion.visible_video=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_video_inline_video"));var m,g,f=new UI_CheckBox(g=new UI_LineContainer(m=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_video_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_video_inline_video_visible_video"));f.onchange=function(t){e.getSelectedDefinitions((function(e){e.vimeo.visible_video=t})),e.update(),projectModify()},new UI_Break(t),e.attachDefineData(n),e.setDefineAssetName("expand_video"),e.setFunctionForNewData(createExpandVideo),e.onselect=function(e){var t=ProjectObjectGetActiveData(n[e]);t&&(a.setValue(t.inline.disable_same_video),i.setValue(t.inline.video_max),o.setValue(t.inline.width_max),r.setValue(t.inline.height_max),l.setScriptObject(t.inline.script_allow),s.setScriptObject(t.inline.script_insert),c.setScriptObject(t.video_element.script_allow),_.setValue(t.video_element.src_type),u.setValue(t.youtube.visible_video),d.setValue(t.nicovideo.visible_video),p.setValue(t.dailymotion.visible_video),f.setValue(t.vimeo.visible_video))},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_VIDEO)}}()}function ContentSettingExpandIframe(){var e,t=this;t.select=function(t){e.select(t)},t.selectFromIdList=function(t){e.selectFromIdList(t)},t.replaceHistory=function(){e.replaceHistory()},function(){var t=(e=new ContentSettingDefine).getElementForm(),n=page_expand_project.getObject().expand_iframe;e.setTitle(_i18n.getMessage("menu_setting_expand_iframe"));new UI_TitleSub(t,_i18n.getMessage("menu_setting_expand_iframe_inline"));var a=new UI_GroupContainer(t).getElement(),i=new UI_CheckBox(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_iframe_inline_check_box_container")).getElement(),_i18n.getMessage("menu_setting_expand_iframe_inline_disable_same_iframe"));i.onchange=function(t){e.getSelectedDefinitions((function(e){e.inline.disable_same_iframe=t})),e.update(),projectModify()};var o=new UI_ScriptObjectEditer(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_iframe_inline_script_allow")).getElement());o.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_allow,t)})),e.update(),projectModify()};var r=new UI_ScriptObjectEditer(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_iframe_inline_script_insert")).getElement());r.onchange=function(t){e.getSelectedDefinitions((function(e){PageExpandProjectScriptObject_CopyUserScript(e.inline.script_insert,t)})),e.update(),projectModify()},new UI_Break(t),e.attachDefineData(n),e.setDefineAssetName("expand_iframe"),e.setFunctionForNewData(createExpandIframe),e.onselect=function(e){var t=ProjectObjectGetActiveData(n[e]);t&&(i.setValue(t.inline.disable_same_iframe),o.setScriptObject(t.inline.script_allow),r.setScriptObject(t.inline.script_insert))},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPAND_IFRAME)}}()}function ContentSettingStyleSheet(){var e,t=this;t.select=function(t){e.select(t)},t.selectFromIdList=function(t){e.selectFromIdList(t)},t.replaceHistory=function(){e.replaceHistory()},function(){var t=(e=new ContentSettingDefine).getElementForm(),n=page_expand_project.getObject().style_sheet;e.setTitle(_i18n.getMessage("menu_setting_style_sheet"));new UI_TitleSub(t,_i18n.getMessage("menu_setting_style_sheet_expand_text"));new UI_TitleItem(v=new UI_LineContainer(b=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_text_element")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_text_element_inline"));var a=new UI_TextInput(v);a.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_text.inline=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_text_element_inline_unsafe"));var i=new UI_TextInput(v);i.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_text.inline_unsafe=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_style_sheet_expand_image"));new UI_TitleItem(v=new UI_LineContainer(b=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_image_element")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_image_element_inline"));var o=new UI_TextInput(v);o.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_image.thumbnail=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_image_element_inline_unsafe"));var r=new UI_TextInput(v);r.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_image.thumbnail_unsafe=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_image_element_popup"));var l=new UI_TextInput(v);l.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_image.popup=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_image_element_popup_unsafe"));var s=new UI_TextInput(v);s.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_image.popup_unsafe=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_style_sheet_expand_sound"));new UI_TitleItem(v=new UI_LineContainer(b=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_sound_element")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_sound_element_inline_audio"));var c=new UI_TextInput(v);c.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_sound.inline.audio_element.audio=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_sound_element_inline_audio_unsafe"));var _=new UI_TextInput(v);_.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_sound.inline.audio_element.audio_unsafe=t})),e.update(),projectModify()},new UI_TitleItem(v=new UI_LineContainer(b,_i18n.getMessage("menu_setting_style_sheet_expand_sound_soundcloud")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_sound_soundcloud_inline_player_html5"));var u=new UI_TextInput(v);u.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_sound.inline.soundcloud.player_html5=t})),e.update(),projectModify()},new UI_TitleItem(v=new UI_LineContainer(b,_i18n.getMessage("menu_setting_style_sheet_expand_sound_mixcloud")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_sound_mixcloud_inline_player"));var d=new UI_TextInput(v);d.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_sound.inline.mixcloud.player=t})),e.update(),projectModify()},new UI_Break(t);new UI_TitleSub(t,_i18n.getMessage("menu_setting_style_sheet_expand_video"));new UI_TitleItem(v=new UI_LineContainer(b=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_video_element")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_video_element_inline_video"));var p=new UI_TextInput(v);p.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_video.inline.video_element.video=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_video_element_inline_video_unsafe"));var m=new UI_TextInput(v);m.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_video.inline.video_element.video_unsafe=t})),e.update(),projectModify()},new UI_TitleItem(v=new UI_LineContainer(b,_i18n.getMessage("menu_setting_style_sheet_expand_video_youtube")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_video_youtube_inline_video"));var g=new UI_TextInput(v);g.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_video.inline.youtube.video=t})),e.update(),projectModify()},new UI_TitleItem(v=new UI_LineContainer(b,_i18n.getMessage("menu_setting_style_sheet_expand_video_nicovideo")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_video_nicovideo_inline_video"));var f=new UI_TextInput(v);f.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_video.inline.nicovideo.video=t})),e.update(),projectModify()},new UI_TitleItem(v=new UI_LineContainer(b,_i18n.getMessage("menu_setting_style_sheet_expand_video_dailymotion")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_video_dailymotion_inline_video"));var h=new UI_TextInput(v);h.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_video.inline.dailymotion.video=t})),e.update(),projectModify()},new UI_TitleItem(v=new UI_LineContainer(b,_i18n.getMessage("menu_setting_style_sheet_expand_video_vimeo")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_video_vimeo_inline_video"));var x=new UI_TextInput(v);x.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_video.inline.vimeo.video=t})),e.update(),projectModify()},new UI_Break(t);var b,v;new UI_TitleSub(t,_i18n.getMessage("menu_setting_style_sheet_expand_iframe"));new UI_TitleItem(v=new UI_LineContainer(b=new UI_GroupContainer(t).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_iframe_element")).getElement(),_i18n.getMessage("menu_setting_style_sheet_expand_iframe_element_inline"));var y=new UI_TextInput(v);y.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_iframe.inline=t})),e.update(),projectModify()},new UI_BreakItem(v),new UI_TitleItem(v,_i18n.getMessage("menu_setting_style_sheet_expand_iframe_element_inline_unsafe"));var E=new UI_TextInput(v);E.oninput=function(t){e.getSelectedDefinitions((function(e){e.expand_iframe.inline_unsafe=t})),e.update(),projectModify()},new UI_Break(t),e.attachDefineData(n),e.setDefineAssetName("style_sheet"),e.setFunctionForNewData(createStyleSheet),e.onselect=function(e){var t=ProjectObjectGetActiveData(n[e]);t&&(a.setValue(t.expand_text.inline),i.setValue(t.expand_text.inline_unsafe),o.setValue(t.expand_image.thumbnail),r.setValue(t.expand_image.thumbnail_unsafe),l.setValue(t.expand_image.popup),s.setValue(t.expand_image.popup_unsafe),c.setValue(t.expand_sound.inline.audio_element.audio),_.setValue(t.expand_sound.inline.audio_element.audio_unsafe),u.setValue(t.expand_sound.inline.soundcloud.player_html5),d.setValue(t.expand_sound.inline.mixcloud.player),p.setValue(t.expand_video.inline.video_element.video),m.setValue(t.expand_video.inline.video_element.video_unsafe),g.setValue(t.expand_video.inline.youtube.video),f.setValue(t.expand_video.inline.nicovideo.video),h.setValue(t.expand_video.inline.dailymotion.video),x.setValue(t.expand_video.inline.vimeo.video),y.setValue(t.expand_iframe.inline),E.setValue(t.expand_iframe.inline_unsafe))},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_STYLE_SHEET)}}()}function ContentSettingExperimental(){var e,t=this;t.select=function(t){e.select(t)},t.selectFromIdList=function(t){e.selectFromIdList(t)},t.replaceHistory=function(){e.replaceHistory()},function(){(e=new ContentSettingDefine).getElementForm();var t=page_expand_project.getObject().experimental;e.setTitle(_i18n.getMessage("menu_setting_experimental")),e.attachDefineData(t),e.setDefineAssetName("experimental"),e.setFunctionForNewData(createExperimental),e.onselect=function(e){ProjectObjectGetActiveData(t[e])},e.onreload=function(){_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_EXPERIMENTAL)}}()}function ContentSettingLanguage(){var e,t,n;t=page_expand_project.getObject().language,new UI_Title(_content_window,_i18n.getMessage("menu_setting_language")),n=new UI_LineContainer(_content_window,"Language").getElement(),(e=new UI_ComboBox(n)).attachItem("BROWSER LANGUAGE","auto"),e.attachItem("English","en"),e.attachItem("中文（简体中文）","zh"),e.attachItem("日本語","ja"),e.onchange=function(e){t.auto="auto"===e,t.auto||(t.code=e),projectModify(),initialize(),_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_LANGUAGE)},t.auto?e.setValue("auto"):e.setValue(t.code)}function ContentCredit(){!function(){new UI_Title(_content_window,_i18n.getMessage("menu_credit"));new UI_Text(e=new UI_LineContainer(_content_window,_i18n.getMessage("menu_credit_info_version")).getElement(),"PageExpand ver.1.5.31");var e=new UI_LineContainer(_content_window,_i18n.getMessage("menu_credit_info_copyright")).getElement(),t=document.createElement("table");e.appendChild(t),new UI_Text((n=t.insertRow(-1)).insertCell(-1),"by"),new UI_AnchorText(n.insertCell(-1),"Hakuhin","https://hakuhin.jp/"),new UI_Text(n.insertCell(-1),"2010-2023"),new UI_AnchorText(e,"https://github.com/hakuhin/PageExpand","https://github.com/hakuhin/PageExpand");var n;e=new UI_LineContainer(_content_window,_i18n.getMessage("menu_credit_info_translator")).getElement(),t=document.createElement("table");e.appendChild(t),new UI_Text((n=t.insertRow(-1)).insertCell(-1),"中文（简体中文）"),new UI_Text(n.insertCell(-1),"by"),new UI_AnchorText(n.insertCell(-1),"weiq530","https://github.com/weiq530"),new UI_Text(n.insertCell(-1),"(ver.1.4.9)")}()}function UI_LineContainer(e,t){var n,a;this.setAlpha=function(e){n.style.opacity=e},this.getElement=function(){return a},function(){if(ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 20px; padding:10px; background:#fcfcfc; border-radius:10px; box-shadow:0px 0px 2px #ccc;"),e.appendChild(n),t){var i=DocumentCreateElement("div");ElementSetStyle(i,"padding:5px 0px 5px 20px; margin:0px 0px 10px; background:#666; font-size:16px; color:#fff; border-radius:10px; box-shadow:0px 1px 1px #000;"),ElementSetTextContent(i,t),n.appendChild(i)}ElementSetStyle(a=DocumentCreateElement("div"),"margin:0px 10px 0px 10px;"),n.appendChild(a)}()}function UI_InlineContainer(e,t){var n,a,i,o=this;o.setWidth=function(e){n.style.width=e+"px"},o.setAlpha=function(e){n.style.opacity=e},o.setBackgroundColor=function(e){var t=e>>16&255,n=e>>8&255,i=255&e;t=Math.floor(.9*t),n=Math.floor(.9*n),i=Math.floor(.9*i);var o=a.style,r="linear-gradient(right, #"+t.toString(16)+n.toString(16)+i.toString(16)+" 25px, #666 25px)";o.backgroundImage=r;var l={none:1,initial:1};l[o.backgroundImage]&&(o.backgroundImage="-webkit-"+r),l[o.backgroundImage]&&(o.backgroundImage="-moz-"+r),l[o.backgroundImage]&&(o.backgroundImage="-ms-"+r),l[o.backgroundImage]&&(o.backgroundImage="-o-"+r)},o.getElement=function(){return i},ElementSetStyle(n=DocumentCreateElement("div"),"width:350px; margin:0px 5px 20px 0px; padding:10px; background:#fcfcfc; display:inline-table; vertical-align:top; border-radius:10px; box-shadow:0px 0px 2px #ccc;"),e.appendChild(n),t&&(ElementSetStyle(a=DocumentCreateElement("div"),"padding:5px 0px 5px 20px; margin:0px 0px 10px; background:#666; font-size:16px; color:#fff; border-radius:10px; box-shadow:0px 1px 1px #000;"),ElementSetTextContent(a,t),n.appendChild(a)),ElementSetStyle(i=DocumentCreateElement("div"),"margin:0px 10px 0px 10px;"),n.appendChild(i)}function UI_FormContainer(e,t){var n,a=this;a.setVisible=function(e){n.style.display=e?"":"none"},a.getElement=function(){return n},n=DocumentCreateElement("form"),e.appendChild(n),a.setVisible(!0)}function UI_GroupContainer(e){var t;this.getElement=function(){return t},(t=DocumentCreateElement("div")).style.cssText="padding-left:10px; padding-right:10px; border-left:20px #f4f4f4 solid; border-right:20px #f4f4f4 solid;",e.appendChild(t)}function UI_ModalDialog(e){var t,n,a,i=this;function o(){var e=WindowGetScrollPosition(window),t=DocumentGetClientSize(document),i=ElementGetBoundingClientRect(n),o=i.right-i.left,r=i.bottom-i.top;n.style.left=t.width/2-o/2+e.x+"px",t.height>r?(n.style.top=t.height/2-r/2+e.y+"px",a=!1):a||(n.style.top=e.y+"px",a=!0)}i.setWidth=function(e){n.style.width=e+"px"},i.open=function(){var a=task_container.createTask(null),i=0;e.appendChild(n),window.addEventListener?(window.addEventListener("scroll",o),window.addEventListener("resize",o)):window.attachEvent&&(window.attachEvent("onscroll",o),window.attachEvent("onresize",o)),o(),a.setExecuteFunc((function(){var e=!1;(i+=.2)>1&&(i=1,e=!0),t.style.opacity=.5*i,e&&a.release()})),a.execute(4294967295)},i.close=function(){var e=task_container.createTask(null),a=1;DomNodeRemove(n),e.setExecuteFunc((function(){var n=!1;if((a-=.2)<0&&(a=0,n=!0),t.style.opacity=.5*a,n)return DomNodeRemove(t),i.oncomplete(),void e.release()})),e.execute(4294967295),window.removeEventListener?(window.removeEventListener("scroll",o),window.removeEventListener("resize",o)):window.detachEvent&&(window.detachEvent("onscroll",o),window.detachEvent("onresize",o))},i.getElement=function(){return n},i.oncomplete=function(){},ElementSetStyle(t=DocumentCreateElement("div"),"position:fixed; top:0px; bottom:0px; left:0px; right:0px; opacity:0.0; background:#000;"),e.appendChild(t),ElementSetStyle(n=DocumentCreateElement("div"),"position:absolute; width:800px; padding:10px 20px 5px; background:#00F; background-color:#FFF; border-radius:5px; box-shadow:5px 5px 10px #444;")}function UI_AlertDialog(e,t){var n,a,i=this;i.getElement=function(){return a},i.open=function(){n.open()},i.oncomplete=function(){},function(){(n=new UI_ModalDialog(_content_window)).setWidth(600);var e=n.getElement();new UI_Title(e,t);var o=new UI_LineContainer(e,null);a=o.getElement(),new UI_OkButton(e).onclick=function(){n.close(),i.oncomplete()}}()}function UI_Title(e,t){var n;this.setValue=function(e){ElementSetTextContent(n,e)},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 10px; font-size:32px; text-align:right;"),ElementSetTextContent(n,t),e.appendChild(n)}function UI_TitleSub(e,t){var n;this.setValue=function(e){ElementSetTextContent(n,e)},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 10px; font-size:24px; text-align:left;"),ElementSetTextContent(n,t),e.appendChild(n)}function UI_TitleItem(e,t){var n;this.setValue=function(e){ElementSetTextContent(n,e)},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 3px; font-size:14px; line-height:1.0; text-align:left;"),ElementSetTextContent(n,t),e.appendChild(n)}function UI_Break(e){var t;this.setHeight=function(e){t.style.height=e+"px"},ElementSetStyle(t=DocumentCreateElement("div"),"margin:0px; height:20px;"),e.appendChild(t)}function UI_BreakItem(e){var t;ElementSetStyle(t=DocumentCreateElement("div"),"margin:0px; height:8px;"),e.appendChild(t)}function UI_Text(e,t){var n=DocumentCreateElement("div");return ElementSetStyle(n,"margin:0px 0px 3px; line-height:1.0; font-size:14px;"),ElementSetTextContent(n,t),e.appendChild(n),n}function UI_TextItem(e,t){var n=DocumentCreateElement("div");return ElementSetStyle(n,"margin:0px 0px 3px; line-height:1.0; font-size:12px; color:#444;"),ElementSetTextContent(n,t),e.appendChild(n),n}function UI_TextHint(e,t){var n=DocumentCreateElement("div");return ElementSetStyle(n,"margin:0px 0px 3px 0px; line-height:1.0; font-size:11px; color:#aaa;"),ElementSetTextContent(n,t),e.appendChild(n),n}function UI_AnchorText(e,t,n){var a=DocumentCreateElement("div");ElementSetStyle(a,"margin:0px 0px 5px;");var i=DocumentCreateElement("a");return i.href=n,ElementSetTextContent(i,t),a.appendChild(i),e.appendChild(a),a}function UI_UnorderedList(e,t){var n,a;this.addListItem=function(e){var t=DocumentCreateElement("li");ElementSetTextContent(t,e),n.appendChild(t)},ElementSetStyle(a=DocumentCreateElement("div"),"margin:0px 0px 5px 0px;"),e.appendChild(a),n=DocumentCreateElement("ul"),a.appendChild(n)}function UI_CheckBox(e,t){var n,a=this;a.getValue=function(){return n.checked},a.setValue=function(e){n.checked=e},a.onchange=function(){},function(){var i=DocumentCreateElement("div");ElementSetStyle(i,"margin:0px 0px 5px 0px;"),e.appendChild(i);var o=DocumentCreateElement("label");ElementSetStyle(o,"cursor:pointer; user-select:none; -webkit-user-select:none; -moz-user-select:none; -khtml-user-select:none;"),i.appendChild(o),ElementSetStyle(n=DocumentCreateElement("input"),"margin:0px 2px 0px 0px;"),n.type="checkbox",o.appendChild(n),n.onchange=function(){a.onchange(n.checked)};var r=DocumentCreateElement("span");ElementSetStyle(r,"font-size:14px;"),ElementSetTextContent(r,":"+t),o.appendChild(r)}()}function UI_LineCheckBox(e,t){var n,a=this;a.getValue=function(){return n.checked},a.setValue=function(e){n.checked=e},a.onchange=function(){},function(){var i=DocumentCreateElement("span");ElementSetStyle(i,"margin:0px 10px 5px 0px;"),e.appendChild(i);var o=DocumentCreateElement("label");ElementSetStyle(o,"user-select:none; -webkit-user-select:none; -moz-user-select:none; -khtml-user-select:none;"),i.appendChild(o),ElementSetStyle(n=DocumentCreateElement("input"),"margin:0px 2px 0px 0px;"),n.type="checkbox",o.appendChild(n),n.onchange=function(){a.onchange(n.checked)};var r=DocumentCreateElement("span");ElementSetStyle(r,"font-size:14px;"),ElementSetTextContent(r,":"+t),o.appendChild(r)}()}function UI_TextDynamic(e){var t,n;this.getValue=function(){return t.value},this.setValue=function(e){t.value=e},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 8px 5px 0px;"),e.appendChild(n),(t=DocumentCreateElement("input")).readOnly="readonly",ElementSetStyle(t,"width:100%; padding:2px; background:#f8f8f8; color:#888;"),n.appendChild(t)}function UI_TextInput(e){var t,n,a=this;a.getValue=function(){return t.value},a.setValue=function(e){t.value=e},a.oninput=function(){},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 8px 5px 0px;"),e.appendChild(n),ElementSetStyle(t=DocumentCreateElement("input"),"width:100%; padding:2px; background-color:#fff;"),n.appendChild(t),t.oninput=function(){a.oninput(t.value)}}function UI_TextRegExp(e){var t,n,a,i,o,r,l,s=this;function c(){return{pattern:n.value,flags:{i:r.getValue(),g:l.getValue()}}}function _(){u(),i||s.oninput(c())}function u(){try{new RegExp(n.value);d(!1)}catch(e){a.value=e,d(!0)}}function d(e){e?o.appendChild(a):i&&DomNodeRemove(a),i=e}s.getValue=function(){return c()},s.getElement=function(){return t},s.setValue=function(e){n.value=e.pattern,r.setValue(e.flags.i),l.setValue(e.flags.g),u()},s.oninput=function(){},function(){i=!1,t=DocumentCreateElement("div"),e.appendChild(t);var s=DocumentCreateElement("div");ElementSetStyle(s,"margin:0px 0px 0px 0px; display:table; width:100%;"),t.appendChild(s);var c=DocumentCreateElement("div");ElementSetStyle(c,"display:table-cell; widht:auto; padding-right:8px;"),s.appendChild(c),ElementSetStyle(n=DocumentCreateElement("input"),"width:100%; padding:2px; background-color:#fff;"),c.appendChild(n),n.oninput=function(){_()};var u=DocumentCreateElement("div");ElementSetStyle(u,"display:table-cell; width:100px; padding-left:10px;"),s.appendChild(u),(l=new UI_LineCheckBox(u,"g")).onchange=function(e){_()},(r=new UI_LineCheckBox(u,"i")).onchange=function(e){_()},ElementSetStyle(o=DocumentCreateElement("div"),"margin:0px 8px 5px 0px;"),t.appendChild(o),(a=DocumentCreateElement("input")).readOnly="readonly",ElementSetStyle(a,"width:100%; font-size:12px; padding:2px; background:#f88;"),new UI_TextHint(t,_i18n.getMessage("menu_text_regexp_hint"))}()}function UI_TextArea(e){var t,n,a=this;a.getValue=function(){return t.value},a.setValue=function(e){t.value=e},a.spiritByLine=function(e){var n,a=t.value.replace(/\r\n?/g,"\n").split("\n");for(n=a.length-1;n>=0;n--)a[n]||a.splice(n,1);return a},a.joinArray=function(e,n){t.value=e.join(n)},a.oninput=function(){},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 5px 0px;"),e.appendChild(n),ElementSetStyle(t=DocumentCreateElement("textarea"),"width:100%; height:100px; box-sizing:border-box; display:block;"),n.appendChild(t),t.oninput=function(){a.oninput(t.value)}}function UI_ScriptObjectEditer(e){var t,n,a,i,o=this;function r(){o.onchange&&o.onchange(ObjectCopy(n))}function l(){var e=PageExpandProjectScriptObject_HasUserScript(n);if(e){a.setLabel(_i18n.getMessage("menu_script_obj_editer_delete_script"));var t=PageExpandProjectScriptObject_ToString(n);i.setValue(t)}else a.setLabel(_i18n.getMessage("menu_script_obj_editer_edit_script"));i.setVisible(e)}o.setScriptObject=function(e){n=ObjectCopy(e),l()},o.onchange=function(){},_visible=!1,ElementSetStyle(t=DocumentCreateElement("div"),"margin:0px 0px 0px 0px;"),e.appendChild(t),(a=new UI_InlineButton(t,"")).onclick=function(){if(PageExpandProjectScriptObject_HasUserScript(n))PageExpandProjectScriptObject_ReturnPreset(n);else{var e=PageExpandProjectScriptObject_ToString(n);PageExpandProjectScriptObject_SetUserScript(n,e)}l(),r()},(i=new UI_ScriptArea(t)).oninput=function(e){PageExpandProjectScriptObject_SetUserScript(n,e),r()}}function UI_ScriptArea(parent){var _this=this,_body,_textarea,_input_container,_input,_visible;function setVisibleResult(e){e?_body.appendChild(_input_container):_visible&&DomNodeRemove(_input_container),_visible=e}_this.getValue=function(){return _textarea.value},_this.setValue=function(e){_textarea.value=e},_this.oninput=function(){},_this.setVisible=function(e){_body.style.display=e?"":"none"},function(){_visible=!1,_body=DocumentCreateElement("div"),ElementSetStyle(_body,"margin:0px 0px 5px 0px;"),parent.appendChild(_body),_textarea=DocumentCreateElement("textarea"),ElementSetStyle(_textarea,"width:100%; height:300px; box-sizing:border-box; display:block; background-color:#fff; margin-bottom:5px;"),_body.appendChild(_textarea),_textarea.oninput=function(){try{(function(){eval("[function(){"+_textarea.value+"}]")})(),setVisibleResult(!1),_this.oninput(_textarea.value)}catch(e){_input.value=e,setVisibleResult(!0)}},_input_container=DocumentCreateElement("div"),ElementSetStyle(_input_container,"margin:0px 0px 5px 0px;"),_input=DocumentCreateElement("input"),_input.readOnly="readonly",ElementSetStyle(_input,"width:100%; box-sizing:border-box; display:block; font-size:12px; padding:2px; background:#f88;"),_input_container.appendChild(_input),new UI_TextHint(_body,_i18n.getMessage("menu_scriptarea_hint"))}()}function UI_NumericStepper(e){var t,n,a,i,o=this;function r(e){o.oninput&&o.oninput(e)}o.getValue=function(){var e=parseInt(t.value);return isNaN(e)&&(e=0),e<n&&(e=n),e>a&&(e=a),e},o.setValue=function(e){isNaN(e)&&(e=0),e<n&&(e=n),e>a&&(e=a),t.value=e},o.setMinimum=function(e){n=e,t.min=e},o.setMaximum=function(e){a=e,t.max=e},o.oninput=function(){},ElementSetStyle(i=DocumentCreateElement("div"),"margin:0px 8px 5px 0px;"),e.appendChild(i),(t=DocumentCreateElement("input")).type="number",ElementSetStyle(t,"width:auto; min-width:200px; padding:2px; background-color:#fff;"),i.appendChild(t),t.oninput=function(){r(o.getValue())},t.onchange=function(){var e=o.getValue();o.setValue(e),r(e)},o.setMinimum(-2147483648),o.setMaximum(2147483647)}function UI_LineButton(e,t){var n,a,i=this;i.setLabel=function(e){n.value=e},i.onclick=function(){},ElementSetStyle(a=DocumentCreateElement("div"),"margin:0px -1px 5px 0px;"),e.appendChild(a),ElementSetStyle(n=DocumentCreateElement("input"),"width:100%; padding:20px 0px;"),n.type="button",n.value=t,a.appendChild(n),n.onclick=function(){i.onclick()}}function UI_InlineButton(e,t){var n,a=this;a.setLabel=function(e){n.value=e},a.onclick=function(){},ElementSetStyle(n=DocumentCreateElement("input"),"padding:4px 10px; margin:0px 2px 5px 0px; box-sizing:border-box;"),n.type="button",n.value=t,e.appendChild(n),n.onclick=function(){a.onclick()}}function UI_YesNoButton(e){var t=this;t.onclick=function(){},function(){var n=DocumentCreateElement("div");function a(e){i.disabled=!0,o.disabled=!0,t.onclick(e)}ElementSetStyle(n,"margin:0px 0px 5px 0px; text-align:center;"),e.appendChild(n);var i=DocumentCreateElement("input");ElementSetStyle(i,"padding:10px; width:200px; box-sizing:border-box;"),i.type="button",i.value=_i18n.getMessage("menu_button_yes"),n.appendChild(i),i.onclick=function(){a(!0)};var o=DocumentCreateElement("input");ElementSetStyle(o,"padding:10px; width:200px; box-sizing:border-box;"),o.type="button",o.value=_i18n.getMessage("menu_button_no"),n.appendChild(o),o.onclick=function(){a(!1)}}()}function UI_OkButton(e){var t,n,a=this;a.onclick=function(){},a.setEnable=function(e){t.disabled=!e},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 5px 0px; text-align:center;"),e.appendChild(n),ElementSetStyle(t=DocumentCreateElement("input"),"padding:10px; width:200px; box-sizing:border-box;"),t.type="button",t.value=_i18n.getMessage("menu_button_ok"),n.appendChild(t),t.onclick=function(){a.setEnable(!1),a.onclick()}}function UI_ComboBox(e){var t,n,a=this;a.attachItem=function(e,n){var a=DocumentCreateElement("option");ElementSetStyle(a,"margin:2px 0px;"),ElementSetTextContent(a,e),a.value=n,t.appendChild(a)},a.getValue=function(){return t.value},a.setValue=function(e){t.value=e},a.onchange=function(){},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 5px 0px;"),e.appendChild(n),ElementSetStyle(t=DocumentCreateElement("select"),"width:auto; min-width:200px; height:22px; font-size:14px; box-sizing:border-box; display:block;"),n.appendChild(t),t.onchange=function(){a.onchange(t.value)}}function UI_ListBox(e){var t,n,a=this;a.attachItem=function(e,n){var a=DocumentCreateElement("option");ElementSetStyle(a,"margin:2px 0px;"),ElementSetTextContent(a,e),a.value=n,t.appendChild(a)},a.getValue=function(e){return t.value},a.setValue=function(e){t.value=e},a.setEnable=function(e){t.disabled=!e},a.setMultiple=function(e){t.multiple=e},a.setListSize=function(e){t.size=e},a.getSelectedValues=function(){var e,n=new Array,a=t.options,i=a.length;for(e=0;e<i;e++){var o=a[e];o.selected&&n.push(o.value)}return n},a.onchange=function(){},ElementSetStyle(n=DocumentCreateElement("div"),"margin:0px 0px 5px 0px;"),e.appendChild(n),(t=DocumentCreateElement("select")).size=10,ElementSetStyle(t,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),n.appendChild(t),t.onchange=function(){a.onchange(t.value)}}function UI_RegExpList(e){var t,n,a,i,o,r=this;function l(n){var a=o.getElement();n>=0?(o.setValue(t[n]),e.appendChild(a)):DomNodeRemove(a),r.onselect(n)}function s(e){var t=DocumentCreateElement("option");ElementSetStyle(t,"margin:2px 0px;"),t.value=e,n.appendChild(t),t.onmousedown=t.onmouseup=function(){i=e},c(t)}function c(e){var n=parseInt(e.value);ElementSetTextContent(e,""+RegExpObjectGetRegExp(t[n]))}function _(e){DomNodeRemove(e)}r.attachArray=function(e){var n;r.clear();var a=(t=ObjectCopy(e)).length;for(n=0;n<a;n++)s(n);r.select(-1)},r.clear=function(){var e,t=n.options;for(e=t.length-1;e>=0;e--)_(t[e])},r.update=function(){var e,t=n.options,a=t.length;for(e=0;e<a;e++)c(t[e])},r.getSelectedIndices=function(){var e,t=new Array,a=n.options,i=a.length;for(e=0;e<i;e++)a[e].selected&&t.push(e);return t},r.onchange=function(){},r.onselect=function(){},r.select=function(e){n.selectedIndex=e,l(e)},function(){var u=DocumentCreateElement("div");ElementSetStyle(u,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(u);var d=DocumentCreateElement("div");ElementSetStyle(d,"display:table-cell; vertical-align:top; width:auto;"),u.appendChild(d),(n=DocumentCreateElement("select")).size=8,n.multiple=!0,ElementSetStyle(n,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),d.appendChild(n),n.onchange=function(e){a=n.selectedIndex;var t=n.options[i];void 0!==t&&t.selected&&(a=i),l(a)};var p=DocumentCreateElement("div");ElementSetStyle(p,"display:table-cell; vertical-align:top; width:150px;"),u.appendChild(p);var m=DocumentCreateElement("input");m.type="button",m.value=_i18n.getMessage("menu_regexp_list_button_add"),ElementSetStyle(m,"width:100%; padding:4px 0px; margin:0px;"),p.appendChild(m),m.onclick=function(){!function(){t.push(RegExpObjectCreate());var e=t.length-1;s(e),r.update(),r.select(e),r.onchange(t)}()};var g=DocumentCreateElement("input");g.type="button",g.value=_i18n.getMessage("menu_regexp_list_button_delete"),ElementSetStyle(g,"width:100%; padding:4px 0px; margin:0px;"),p.appendChild(g),g.onclick=function(){!function(){var e=!1;for(o=(s=(i=n.options).length)-1;o>=0;o--){var a=i[o];a.selected&&(t.splice(o,1),_(a),e=!0)}if(e){var i,o,s=(i=n.options).length;for(o=0;o<s;o++)i[o].value=o;r.update(),l(n.selectedIndex),r.onchange(t)}}()};var f=DocumentCreateElement("input");f.type="button",f.value=_i18n.getMessage("menu_regexp_list_button_move_up"),ElementSetStyle(f,"width:100%; padding:4px 0px; margin:0px;"),p.appendChild(f),f.onclick=function(){!function(){var e,a=!1,i=n.options,o=i.length;if(o&&!i[0].selected){for(e=1;e<o;e++)if(i[e].selected){var l,s=i[e];(l=s.previousSibling).selected=!0,s.selected=!1;var c=e,_=e-1;l=t[_],t[_]=t[c],t[c]=l,a=!0}a&&(r.update(),r.onchange(t))}}()};var h=DocumentCreateElement("input");h.type="button",h.value=_i18n.getMessage("menu_regexp_list_button_move_down"),ElementSetStyle(h,"width:100%; padding:4px 0px; margin:0px;"),p.appendChild(h),h.onclick=function(){!function(){var e,a=!1,i=n.options,o=i.length;if(o&&!i[o-1].selected){for(e=o-2;e>=0;e--)if(i[e].selected){var l,s=i[e];(l=s.nextSibling).selected=!0,s.selected=!1;var c=e,_=e+1;l=t[_],t[_]=t[c],t[c]=l,a=!0}a&&(r.update(),r.onchange(t))}}()},(o=new UI_TextRegExp(e)).oninput=function(e){var a,i=n.options,o=i.length;for(a=0;a<o;a++)i[a].selected&&(t[a]=ObjectCopy(e),c(i[a]));r.onchange(t)}}()}function UI_ComboBoxButton(e,t){var n,a=this;a.attachItem=function(e,t){var a=DocumentCreateElement("option");ElementSetStyle(a,"margin:2px 0px;"),ElementSetTextContent(a,e),a.value=t,n.appendChild(a)},a.clearItem=function(){var e,t=n.options;for(e=t.length-1;e>=0;e--)DomNodeRemove(t[e])},a.getSelectedIndex=function(){return n.selectedIndex},a.setValue=function(e){n.value=e},a.onclick=function(){},a.onchange=function(){},function(){var i=DocumentCreateElement("div");ElementSetStyle(i,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(i);var o=DocumentCreateElement("div");ElementSetStyle(o,"display:table-cell; widht:auto;"),i.appendChild(o),ElementSetStyle(n=DocumentCreateElement("select"),"width:100%; height:22px; box-sizing:border-box; display:block; font-size:14px;"),o.appendChild(n),n.onchange=function(){a.onchange(n.value)};var r=DocumentCreateElement("div");ElementSetStyle(r,"display:table-cell; width:50px;"),i.appendChild(r);var l=DocumentCreateElement("input");l.type="button",ElementSetStyle(l,"width:100%; padding:2px 0px;"),l.value=t,r.appendChild(l),l.onclick=function(){a.onclick()}}()}function UI_ExpandBbsList(e){var t,n,a,i,o,r=this;function l(e){var i=DocumentCreateElement("option");ElementSetStyle(i,"margin:2px 0px;"),i.value=t[e].id,n[i.value]=t[e],a.appendChild(i),i.onmousedown=i.onmouseup=function(){o=e},s(i)}function s(e){var t=n[e.value];t.preset&&(e.style.color="#ccc"),t.user&&(e.style.color="#000"),ElementSetTextContent(e,LocaleObjectGetString(ProjectObjectGetActiveData(t).name))}function c(e){n[e.value];DomNodeRemove(e),delete n[e.value]}r.attachExpandBbsData=function(e){var n,a=(t=e).length;for(n=0;n<a;n++)l(n)},r.clear=function(){var e,t=a.options;for(e=t.length-1;e>=0;e--)c(t[e])},r.update=function(){var e,t=a.options,n=t.length;for(e=0;e<n;e++)s(t[e])},r.getSelectedIndices=function(){var e,t=new Array,n=a.options,i=n.length;for(e=0;e<i;e++)n[e].selected&&t.push(e);return t},r.onchange=function(){},r.onselect=function(){},r.onreload=function(){},r.select=function(e){a.selectedIndex=i=o=e,r.onselect(e)},r.selectFromIdList=function(e){var n,o=new Object,l=t.length;for(n=0;n<l;n++)o[t[n].id]=n;var s=o[e[(l=e.length)-1]];void 0!==s&&(a.selectedIndex=i=s);var c=a.options;for(n=0;n<l;n++)if(void 0!==o[e[n]]){var _=c[o[e[n]]];_&&(_.selected=!0)}void 0!==s&&r.onselect(s)},r.replaceHistory=function(){var e,n=new Array,a=r.getSelectedIndices(),o=a.length;for(e=0;e<o;e++)n.push(t[a[e]].id);t[i]&&n.push(t[i].id),_history_state.selected_defines=n,delete _history_state.selected_filters},function(){n=new Object;var l=DocumentCreateElement("div");ElementSetStyle(l,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(l);var s=DocumentCreateElement("div");ElementSetStyle(s,"display:table-cell; vertical-align:top; width:auto;"),l.appendChild(s),(a=DocumentCreateElement("select")).size=10,a.multiple=!0,ElementSetStyle(a,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),s.appendChild(a),a.onchange=function(e){i=a.selectedIndex;var t=a.options[o];void 0!==t&&t.selected&&(i=o),r.onselect(i),r.replaceHistory()};var _=DocumentCreateElement("div");ElementSetStyle(_,"display:table-cell; vertical-align:top; width:150px;"),l.appendChild(_);var u=DocumentCreateElement("input");u.type="button",u.value=_i18n.getMessage("menu_setting_expand_bbs_button_add"),ElementSetStyle(u,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(u),u.onclick=function(){!function(){var e,n=new UI_ModalDialog(_content_window),a=n.getElement(),i=(new UI_Title(a,_i18n.getMessage("menu_setting_expand_bbs_add_dialog")),new UI_TextInput(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_bbs_add_dialog_name")).getElement())),o=new UI_ListBox(new UI_LineContainer(a,_i18n.getMessage("menu_setting_expand_bbs_add_dialog_copy_define")).getElement()),l=t.length;for(e=0;e<l;e++){var s=ProjectObjectGetActiveData(t[e]);o.attachItem(LocaleObjectGetString(s.name),t[e].id)}o.attachItem(_i18n.getMessage("menu_setting_expand_bbs_add_dialog_define_list_box_item_new"),""),o.setValue(""),new UI_YesNoButton(a).onclick=function(e){if(e){var a,l=new Object,s=t.length;for(a=0;a<s;a++)l[t[a].id]=t[a];for(a=0;l["user"+a];)a++;var c,_="user"+a;l[o.getValue()]?((c=ObjectCopy(l[o.getValue()])).user||(c.user=c.preset),delete c.preset):c=createExpandBbsData();var u=ProjectObjectGetActiveData(c);u.name=LocaleObjectCreate(),LocaleObjectSetString(u.name,i.getValue()),c.id=_,t.unshift(c),r.clear(),r.attachExpandBbsData(t),projectModify(),r.select(0)}n.close()},n.open()}()};var d=DocumentCreateElement("input");d.type="button",d.value=_i18n.getMessage("menu_setting_expand_bbs_button_delete"),ElementSetStyle(d,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(d),d.onclick=function(){!function(){var e,i=a.options;for(e=i.length-1;e>=0;e--){var o=i[e];if(o.selected){var l=n[o.value];l.preset?delete l.user:(t.splice(e,1),c(o))}}r.update(),r.onselect(a.selectedIndex),projectModify()}()};var p=DocumentCreateElement("input");p.type="button",p.value=_i18n.getMessage("menu_setting_expand_bbs_button_prio_up"),ElementSetStyle(p,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(p),p.onclick=function(){!function(){var e,n=a.options,i=n.length;if(i&&!n[0].selected){for(e=1;e<i;e++)if(n[e].selected){var o=n[e],l=o.previousSibling;DomNodeRemove(o),a.insertBefore(o,l);var s=e,c=e-1;l=t[c],t[c]=t[s],t[s]=l}r.update(),projectModify()}}()};var m=DocumentCreateElement("input");m.type="button",m.value=_i18n.getMessage("menu_setting_expand_bbs_button_prio_down"),ElementSetStyle(m,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(m),m.onclick=function(){!function(){var e,n=a.options,i=n.length;if(i&&!n[i-1].selected){for(e=i-2;e>=0;e--)if(n[e].selected){var o=n[e],l=o.nextSibling;DomNodeRemove(o),a.insertBefore(o,l.nextSibling);var s=e,c=e+1;l=t[c],t[c]=t[s],t[s]=l}r.update(),projectModify()}}()};var g=DocumentCreateElement("input");g.type="button",g.value=_i18n.getMessage("menu_setting_expand_bbs_button_export"),ElementSetStyle(g,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(g),g.onclick=function(){!function(){var e,n=page_expand_project.getObject(),i=new Object,o=new Array,r=a.options,l=r.length;for(e=0;e<l;e++)r[e].selected&&o.push(ObjectCopy(t[e]));i.version=n.version,i.setting_export={type:"expand_bbs"},i.expand_bbs=o,i=PageExpandProjectObjectRemovePreset(i);var s=new UI_ModalDialog(_content_window),c=s.getElement(),_=(new UI_Title(c,_i18n.getMessage("menu_setting_expand_bbs_export_dialog")),new UI_LineContainer(c,_i18n.getMessage("menu_setting_expand_bbs_export_dialog_export")).getElement());new UI_TextArea(_).setValue(JsonStringify(i)),new UI_TextHint(_,_i18n.getMessage("menu_setting_expand_bbs_export_dialog_export_hint")),new UI_OkButton(c).onclick=function(e){s.close()},s.open()}()};var f=DocumentCreateElement("input");f.type="button",f.value=_i18n.getMessage("menu_setting_expand_bbs_button_import"),ElementSetStyle(f,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(f),f.onclick=function(){!function(){var e=new UI_ModalDialog(_content_window),t=e.getElement(),n=(new UI_Title(t,_i18n.getMessage("menu_setting_expand_bbs_import_dialog")),new UI_UnorderedList(a=new UI_LineContainer(t,_i18n.getMessage("menu_setting_expand_bbs_import_dialog_explanation")).getElement()));n.addListItem(_i18n.getMessage("menu_setting_expand_bbs_import_dialog_explanation_0")),n.addListItem(_i18n.getMessage("menu_setting_expand_bbs_import_dialog_explanation_1")),n.addListItem(_i18n.getMessage("menu_setting_expand_bbs_import_dialog_explanation_2"));var a,i=new UI_TextArea(a=new UI_LineContainer(t,_i18n.getMessage("menu_setting_expand_bbs_import_dialog_import")).getElement());new UI_TextHint(a,_i18n.getMessage("menu_setting_expand_bbs_import_dialog_import_hint")),new UI_Text(a=new UI_LineContainer(t,null).getElement(),_i18n.getMessage("menu_setting_expand_bbs_import_dialog_confirm")),new UI_YesNoButton(t).onclick=function(n){if(n)try{var a=page_expand_project.getObject(),o=JsonParse(i.getValue());if(o.version>a.version)throw"Error: It is a version not supported.";var l=!0;try{"expand_bbs"===o.setting_export.type&&(l=!1)}catch(e){}if(l)throw"Error: It is a type not supported.";PageExpandProjectObjectImportExpandBbs(a,o),projectSave((function(n){if(n.result){i.setValue("");var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_expand_bbs_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_expand_bbs_import_alert_success")),a.oncomplete=function(){e.oncomplete=function(){r.onreload()},e.close()},a.open()}else s(n.message)}))}catch(e){s(e)}else e.close();function s(n){var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_expand_bbs_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_expand_bbs_import_alert_failure")),new UI_Text(a.getElement(),n),a.oncomplete=function(){e.close()},a.open()}},e.open()}()},new UI_TextHint(e,_i18n.getMessage("menu_setting_expand_bbs_list_hint"))}()}function UI_UrlMapList(e){var t,n,a,i,o,r=this;function l(e){var i=DocumentCreateElement("option");ElementSetStyle(i,"margin:2px 0px;"),i.value=t[e].id,n[i.value]=t[e],a.appendChild(i),i.onmousedown=i.onmouseup=function(){o=e},s(i)}function s(e){var t=n[e.value];t.preset&&(e.style.color="#ccc"),t.user&&(e.style.color="#000"),ElementSetTextContent(e,LocaleObjectGetString(ProjectObjectGetActiveData(t).name))}function c(e){n[e.value];DomNodeRemove(e),delete n[e.value]}r.attachUrlMapData=function(e){var n,a=(t=e).length;for(n=0;n<a;n++)l(n)},r.clear=function(){var e,t=a.options;for(e=t.length-1;e>=0;e--)c(t[e])},r.update=function(){var e,t=a.options,n=t.length;for(e=0;e<n;e++)s(t[e])},r.getSelectedIndices=function(){var e,t=new Array,n=a.options,i=n.length;for(e=0;e<i;e++)n[e].selected&&t.push(e);return t},r.onchange=function(){},r.onselect=function(){},r.select=function(e){a.selectedIndex=e,r.onselect(e)},r.selectFromIdList=function(e){var n,o=new Object,l=t.length;for(n=0;n<l;n++)o[t[n].id]=n;var s=o[e[(l=e.length)-1]];void 0!==s&&(a.selectedIndex=i=s);var c=a.options;for(n=0;n<l;n++)if(void 0!==o[e[n]]){var _=c[o[e[n]]];_&&(_.selected=!0)}void 0!==s&&r.onselect(s)},r.replaceHistory=function(){var e,n=new Array,a=r.getSelectedIndices(),o=a.length;for(e=0;e<o;e++)n.push(t[a[e]].id);t[i]&&n.push(t[i].id),_history_state.selected_defines=n,delete _history_state.selected_filters},function(){n=new Object;var l=DocumentCreateElement("div");ElementSetStyle(l,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(l);var s=DocumentCreateElement("div");ElementSetStyle(s,"display:table-cell; vertical-align:top; width:auto;"),l.appendChild(s),(a=DocumentCreateElement("select")).size=10,a.multiple=!0,ElementSetStyle(a,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),s.appendChild(a),a.onchange=function(e){i=a.selectedIndex;var t=a.options[o];void 0!==t&&t.selected&&(i=o),r.onselect(i),r.replaceHistory()};var _=DocumentCreateElement("div");ElementSetStyle(_,"display:table-cell; vertical-align:top; width:150px;"),l.appendChild(_);var u=DocumentCreateElement("input");u.type="button",u.value=_i18n.getMessage("menu_setting_urlmap_button_add"),ElementSetStyle(u,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(u),u.onclick=function(){!function(){var e,n=new UI_ModalDialog(_content_window),a=n.getElement(),i=(new UI_Title(a,_i18n.getMessage("menu_setting_urlmap_add_dialog")),new UI_TextInput(new UI_LineContainer(a,_i18n.getMessage("menu_setting_urlmap_add_dialog_name")).getElement())),o=new UI_ListBox(new UI_LineContainer(a,_i18n.getMessage("menu_setting_urlmap_add_dialog_copy_define")).getElement()),l=t.length;for(e=0;e<l;e++){var s=ProjectObjectGetActiveData(t[e]);o.attachItem(LocaleObjectGetString(s.name),t[e].id)}o.attachItem(_i18n.getMessage("menu_setting_urlmap_add_dialog_define_list_box_item_new"),""),o.setValue(""),new UI_YesNoButton(a).onclick=function(e){if(e){var a,l=new Object,s=t.length;for(a=0;a<s;a++)l[t[a].id]=t[a];for(a=0;l["user"+a];)a++;var c,_="user"+a;l[o.getValue()]?((c=ObjectCopy(l[o.getValue()])).user||(c.user=c.preset),delete c.preset):c=createUrlMapData();var u=ProjectObjectGetActiveData(c);u.name=LocaleObjectCreate(),LocaleObjectSetString(u.name,i.getValue()),c.id=_,t.unshift(c),r.clear(),r.attachUrlMapData(t),projectModify(),r.select(0)}n.close()},n.open()}()};var d=DocumentCreateElement("input");d.type="button",d.value=_i18n.getMessage("menu_setting_urlmap_button_delete"),ElementSetStyle(d,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(d),d.onclick=function(){!function(){var e,i=a.options;for(e=i.length-1;e>=0;e--){var o=i[e];if(o.selected){var l=n[o.value];l.preset?delete l.user:(t.splice(e,1),c(o))}}r.update(),r.onselect(a.selectedIndex),projectModify()}()};var p=DocumentCreateElement("input");p.type="button",p.value=_i18n.getMessage("menu_setting_urlmap_button_prio_up"),ElementSetStyle(p,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(p),p.onclick=function(){!function(){var e,n=a.options,i=n.length;if(i&&!n[0].selected){for(e=1;e<i;e++)if(n[e].selected){var o=n[e],l=o.previousSibling;DomNodeRemove(o),a.insertBefore(o,l);var s=e,c=e-1;l=t[c],t[c]=t[s],t[s]=l}r.update(),projectModify()}}()};var m=DocumentCreateElement("input");m.type="button",m.value=_i18n.getMessage("menu_setting_urlmap_button_prio_down"),ElementSetStyle(m,"width:100%; padding:4px 0px; margin:0px;"),_.appendChild(m),m.onclick=function(){!function(){var e,n=a.options,i=n.length;if(i&&!n[i-1].selected){for(e=i-2;e>=0;e--)if(n[e].selected){var o=n[e],l=o.nextSibling;DomNodeRemove(o),a.insertBefore(o,l.nextSibling);var s=e,c=e+1;l=t[c],t[c]=t[s],t[s]=l}r.update(),projectModify()}}()},new UI_TextHint(e,_i18n.getMessage("menu_setting_urlmap_list_hint"))}()}function UI_DefineList(e){var t,n,a,i,o,r,l,s=this;function c(e){var n=DocumentCreateElement("option");ElementSetStyle(n,"margin:2px 0px;"),n.value=t[e].id,i[n.value]=t[e],o.appendChild(n),n.onmousedown=n.onmouseup=function(){l=e},_(n)}function _(e){var t=i[e.value];t.preset&&(e.style.color="#ccc"),t.user&&(e.style.color="#000"),"wildcard"==t.id&&(t.preset&&(e.style.color="#f88"),t.user&&(e.style.color="#c00")),ElementSetTextContent(e,LocaleObjectGetString(ProjectObjectGetActiveData(t).name))}function u(e){i[e.value];DomNodeRemove(e),delete i[e.value]}s.attachDefineData=function(e){var n,a=(t=e).length;for(n=0;n<a;n++)c(n)},s.setDefineAssetName=function(e){n=e},s.setFunctionForNewData=function(e){a=e},s.clear=function(){var e,t=o.options;for(e=t.length-1;e>=0;e--)u(t[e])},s.update=function(){var e,t=o.options,n=t.length;for(e=0;e<n;e++)_(t[e])},s.getSelectedIndex=function(){return r=o.selectedIndex},s.getSelectedIndices=function(){var e,t=new Array,n=o.options,a=n.length;for(e=0;e<a;e++)n[e].selected&&t.push(e);return t},s.onchange=function(){},s.onselect=function(){},s.onreload=function(){},s.select=function(e){o.selectedIndex=r=l=e,s.onselect(e)},s.selectFromIdList=function(e){var n,a=new Object,i=t.length;for(n=0;n<i;n++)a[t[n].id]=n;var l=a[e[(i=e.length)-1]];void 0!==l&&(o.selectedIndex=r=l);var c=o.options;for(n=0;n<i;n++)if(void 0!==a[e[n]]){var _=c[a[e[n]]];_&&(_.selected=!0)}void 0!==l&&s.onselect(l)},s.replaceHistory=function(){var e,n=new Array,a=s.getSelectedIndices(),i=a.length;for(e=0;e<i;e++)n.push(t[a[e]].id);t[r]&&n.push(t[r].id),_history_state.selected_defines=n,delete _history_state.selected_filters},function(){i=new Object;var c=DocumentCreateElement("div");ElementSetStyle(c,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"display:table-cell; vertical-align:top; width:auto;"),c.appendChild(_),(o=DocumentCreateElement("select")).size=10,o.multiple=!0,ElementSetStyle(o,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),_.appendChild(o),o.onchange=function(e){r=o.selectedIndex;var t=o.options[l];void 0!==t&&t.selected&&(r=l),s.onselect(r),s.replaceHistory()};var d=DocumentCreateElement("div");ElementSetStyle(d,"display:table-cell; vertical-align:top; width:150px;"),c.appendChild(d);var p=DocumentCreateElement("input");p.type="button",p.value=_i18n.getMessage("menu_setting_define_button_add"),ElementSetStyle(p,"width:100%; padding:4px 0px; margin:0px;"),d.appendChild(p),p.onclick=function(){!function(){var e,n=new UI_ModalDialog(_content_window),i=n.getElement(),o=(new UI_Title(i,_i18n.getMessage("menu_setting_define_add_dialog")),new UI_TextInput(new UI_LineContainer(i,_i18n.getMessage("menu_setting_define_add_dialog_name")).getElement())),r=new UI_ListBox(new UI_LineContainer(i,_i18n.getMessage("menu_setting_define_add_dialog_copy_define")).getElement()),l=t.length;for(e=0;e<l;e++){var c=ProjectObjectGetActiveData(t[e]);r.attachItem(LocaleObjectGetString(c.name),t[e].id)}r.attachItem(_i18n.getMessage("menu_setting_define_add_dialog_define_list_box_item_new"),""),r.setValue(""),new UI_YesNoButton(i).onclick=function(e){if(e){var i,l=new Object,c=t.length;for(i=0;i<c;i++)l[t[i].id]=t[i];for(i=0;l["user"+i];)i++;var _,u="user"+i;l[r.getValue()]?((_=ObjectCopy(l[r.getValue()])).user||(_.user=_.preset),delete _.preset):_=a();var d=ProjectObjectGetActiveData(_);d.name=LocaleObjectCreate(),LocaleObjectSetString(d.name,o.getValue()),_.id=u,t.unshift(_),s.clear(),s.attachDefineData(t),projectModify(),s.select(0)}n.close()},n.open()}()};var m=DocumentCreateElement("input");m.type="button",m.value=_i18n.getMessage("menu_setting_define_button_delete"),ElementSetStyle(m,"width:100%; padding:4px 0px; margin:0px;"),d.appendChild(m),m.onclick=function(){!function(){var e=page_expand_project.getObject().urlmap,a=new Array;!function(){var e,t=o.options,n=t.length;for(e=0;e<n;e++){var i=t[e];i.selected&&a.push({item:i,id:e})}}();var r=new Array;!function(){var e,n,o=new Object;for(n=a.length,e=0;e<n;e++)(l=i[a[e].item.value]).preset||(o[l.id]=l);for(n=t.length,e=0;e<n;e++){var l;o[(l=t[e]).id]||r.push(l)}}(),function l(){for(;;){var c=a.pop();if(!c)return s.update(),s.onselect(o.selectedIndex),void projectModify();var _=i[c.item.value];if(_.preset)delete _.user;else{var d=new Array;if(function(){var t,a=e.length;for(t=0;t<a;t++){var i=ProjectObjectGetActiveData(e[t]);if(i){var o=i[n];if(o.enable)if(o.id&&"object"==typeof o.id){var r,l=o.id,s=l.length;for(r=0;r<s;r++)if(l[r]==_.id){d.push(e[t]);break}}else o.id==_.id&&d.push(e[t])}}}(),d.length){var p=new UI_ModalDialog(_content_window),m=p.getElement();new UI_Title(m,_i18n.getMessage("menu_setting_define_delete_dialog")),new UI_TextDynamic(new UI_LineContainer(m,_i18n.getMessage("menu_setting_define_delete_dialog_name")).getElement()).setValue(LocaleObjectGetString(_.user.name));var g=new UI_ListBox(new UI_LineContainer(m,_i18n.getMessage("menu_setting_define_delete_dialog_change_define")).getElement());return function(){var e,t=r.length;for(e=0;e<t;e++){var n=ProjectObjectGetActiveData(r[e]);g.attachItem(LocaleObjectGetString(n.name),r[e].id)}g.attachItem(_i18n.getMessage("menu_setting_define_delete_dialog_define_list_box_item_no_use"),""),g.setValue("")}(),new UI_YesNoButton(m).onclick=function(e){if(e){var a,i=d.length;for(a=0;a<i;a++){var o=d[a].user;if(o){var r=o[n];if(r.id&&"object"==typeof r.id){var s,m=r.id;for(s=m.length-1;s>=0;s--)m[s]==_.id&&(g.getValue()?m[s]=g.getValue():m.splice(s,1));m.length||(r.enable=!1)}else g.getValue()?(r.id=g.getValue(),r.enable=!0):(r.id="",r.enable=!1)}}t.splice(c.id,1),u(c.item),l()}p.close()},p.open(),s.update(),s.onselect(o.selectedIndex),void projectModify()}t.splice(c.id,1),u(c.item)}}}()}()};var g=DocumentCreateElement("input");g.type="button",g.value=_i18n.getMessage("menu_setting_define_button_move_up"),ElementSetStyle(g,"width:100%; padding:4px 0px; margin:0px;"),d.appendChild(g),g.onclick=function(){!function(){var e,n=o.options,a=n.length;if(a&&!n[0].selected){for(e=1;e<a;e++)if(n[e].selected){var i=n[e],r=i.previousSibling;DomNodeRemove(i),o.insertBefore(i,r);var l=e,c=e-1;r=t[c],t[c]=t[l],t[l]=r}s.update(),projectModify()}}()};var f=DocumentCreateElement("input");f.type="button",f.value=_i18n.getMessage("menu_setting_define_button_move_down"),ElementSetStyle(f,"width:100%; padding:4px 0px; margin:0px;"),d.appendChild(f),f.onclick=function(){!function(){var e,n=o.options,a=n.length;if(a&&!n[a-1].selected){for(e=a-2;e>=0;e--)if(n[e].selected){var i=n[e],r=i.nextSibling;DomNodeRemove(i),o.insertBefore(i,r.nextSibling);var l=e,c=e+1;r=t[c],t[c]=t[l],t[l]=r}s.update(),projectModify()}}()};var h=DocumentCreateElement("input");h.type="button",h.value=_i18n.getMessage("menu_setting_define_button_export"),ElementSetStyle(h,"width:100%; padding:4px 0px; margin:0px;"),d.appendChild(h),h.onclick=function(){!function(){var e,a=page_expand_project.getObject(),i=new Object,r=new Array,l=o.options,s=l.length;for(e=0;e<s;e++)l[e].selected&&r.push(ObjectCopy(t[e]));i.version=a.version,i.setting_export={type:"define",asset:n},i[n]=r,i=PageExpandProjectObjectRemovePreset(i);var c=new UI_ModalDialog(_content_window),_=c.getElement(),u=(new UI_Title(_,_i18n.getMessage("menu_setting_define_export_dialog")),new UI_LineContainer(_,_i18n.getMessage("menu_setting_define_export_dialog_export")).getElement());new UI_TextArea(u).setValue(JsonStringify(i)),new UI_TextHint(u,_i18n.getMessage("menu_setting_define_export_dialog_export_hint")),new UI_OkButton(_).onclick=function(e){c.close()},c.open()}()};var x=DocumentCreateElement("input");x.type="button",x.value=_i18n.getMessage("menu_setting_define_button_import"),ElementSetStyle(x,"width:100%; padding:4px 0px; margin:0px;"),d.appendChild(x),x.onclick=function(){!function(){var e=new UI_ModalDialog(_content_window),t=e.getElement(),a=(new UI_Title(t,_i18n.getMessage("menu_setting_define_import_dialog")),new UI_UnorderedList(i=new UI_LineContainer(t,_i18n.getMessage("menu_setting_define_import_dialog_explanation")).getElement()));a.addListItem(_i18n.getMessage("menu_setting_define_import_dialog_explanation_0")),a.addListItem(_i18n.getMessage("menu_setting_define_import_dialog_explanation_1")),a.addListItem(_i18n.getMessage("menu_setting_define_import_dialog_explanation_2"));var i,o=new UI_TextArea(i=new UI_LineContainer(t,_i18n.getMessage("menu_setting_define_import_dialog_import")).getElement());new UI_TextHint(i,_i18n.getMessage("menu_setting_define_import_dialog_import_hint")),new UI_Text(i=new UI_LineContainer(t,null).getElement(),_i18n.getMessage("menu_setting_define_import_dialog_confirm")),new UI_YesNoButton(t).onclick=function(a){if(a)try{var i=page_expand_project.getObject(),r=JsonParse(o.getValue());if(r.version>i.version)throw"Error: It is a version not supported.";var l=!0;try{switch(r.setting_export.type){case"setting":case"define":l=!1}}catch(e){}if(l)throw"Error: It is a type not supported.";PageExpandProjectObjectImportDefine(i,r,n),projectSave((function(n){if(n.result){o.setValue("");var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_define_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_define_import_alert_success")),a.oncomplete=function(){e.oncomplete=function(){s.onreload()},e.close()},a.open()}else c(n.message)}))}catch(e){c(e)}else e.close();function c(n){var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_define_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_define_import_alert_failure")),new UI_Text(a.getElement(),n),a.oncomplete=function(){e.close()},a.open()}},e.open()}()},new UI_TextHint(e,_i18n.getMessage("menu_setting_define_list_hint"))}()}function UI_FilterList(e){var t,n,a,i,o,r,l,s,c,_,u,d=this;function p(){d.attachDefinitions(t,i)}function m(e){var t=DocumentCreateElement("option");ElementSetStyle(t,"margin:2px 0px;"),t.value=e,r.appendChild(t),t.onmousedown=t.onmouseup=function(){c=e},g(t)}function g(e){e.style.color="#000";var t,a=parseInt(e.value);o?(n<=a&&(e.style.color="#ccc"),(t=ProjectObjectGetActiveData(i).filter).length<=a?ElementSetTextContent(e," *"):ElementSetTextContent(e,LocaleObjectGetString(t[a].name)+" *")):ElementSetTextContent(e,LocaleObjectGetString((t=ProjectObjectGetActiveData(i).filter)[a].name))}function f(e){DomNodeRemove(e)}d.attachDefinitions=function(e,r){var l;d.clear(),i=r,o=!1,(t=e).length>1&&(o=!0),n=2147483647,a=0;var s=t.length;for(l=0;l<s;l++){var c=ProjectObjectGetActiveData(t[l]).filter;c.length>a&&(a=c.length),c.length<n&&(n=c.length)}for(l=0;l<a;l++)m(l)},d.getDefinitionActive=function(){return i},d.setDefineAssetName=function(e){l=e},d.setFunctionForNewDefineData=function(e){_=e},d.setFunctionForNewFilterData=function(e){u=e},d.clear=function(){var e,t=r.options;for(e=t.length-1;e>=0;e--)f(t[e])},d.update=function(){var e,t=r.options,n=t.length;for(e=0;e<n;e++)g(t[e])},d.writeDefinitions=function(e){var n,a,i,o=t.length;for(i=0;i<o;i++)(n=t[i]).user?a=n.user:n.preset&&(a=n.user=ObjectCopy(n.preset)),a&&e(a)},d.writeFilters=function(e){var t,n=d.getSelectedIndices(),a=n.length;d.writeDefinitions((function(i){var o=i.filter;for(t=0;t<a;t++)n[t]<o.length&&e(o[n[t]])}))},d.getSelectedIndices=function(){var e,t=new Array,n=r.options,a=n.length;for(e=0;e<a;e++)n[e].selected&&t.push(e);return t},d.onchange=function(){},d.onselect=function(){},d.select=function(e){r.selectedIndex=s=c=e,d.onselect(e)},d.selectFromList=function(e){new Object;var n,a=e.length,i=e[a-1];void 0!==t[i]&&(r.selectedIndex=s=i);var o=r.options;for(n=0;n<a;n++){var l=o[e[n]];l&&(l.selected=!0)}void 0!==i&&d.onselect(i)},d.replaceHistory=function(){var e,n=new Array,a=d.getSelectedIndices(),i=a.length;for(e=0;e<i;e++)n.push(a[e]);t[s]&&n.push(s),_history_state.selected_filters=n},function(){var a=DocumentCreateElement("div");ElementSetStyle(a,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(a);var o=DocumentCreateElement("div");ElementSetStyle(o,"display:table-cell; vertical-align:top; width:auto;"),a.appendChild(o),(r=DocumentCreateElement("select")).size=10,r.multiple=!0,ElementSetStyle(r,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),o.appendChild(r),r.onchange=function(e){s=r.selectedIndex;var t=r.options[c];void 0!==t&&t.selected&&(s=c),d.onselect(s),d.replaceHistory()};var m=DocumentCreateElement("div");ElementSetStyle(m,"display:table-cell; vertical-align:top; width:150px;"),a.appendChild(m);var g=DocumentCreateElement("input");g.type="button",g.value=_i18n.getMessage("menu_setting_filter_button_add"),ElementSetStyle(g,"width:100%; padding:4px 0px; margin:0px;"),m.appendChild(g),g.onclick=function(){!function(){var e,n,a=new UI_ModalDialog(_content_window),i=a.getElement(),o=(new UI_Title(i,_i18n.getMessage("menu_setting_filter_add_dialog")),new UI_TextInput(new UI_LineContainer(i,_i18n.getMessage("menu_setting_filter_add_dialog_name")).getElement())),r=new UI_ListBox(new UI_LineContainer(i,_i18n.getMessage("menu_setting_filter_add_dialog_copy_define")).getElement()),l=new Object,s=0,c=t.length;for(e=0;e<c;e++){var _=ProjectObjectGetActiveData(t[e]).filter,m=_.length;for(n=0;n<m;n++){var g=_[n];r.attachItem(LocaleObjectGetString(g.name),s),l[s]=g,s++}}r.attachItem(_i18n.getMessage("menu_setting_filter_add_dialog_define_list_box_item_new"),""),r.setValue(""),new UI_YesNoButton(i).onclick=function(e){if(e){var t=l[r.getValue()];t?d.writeDefinitions((function(e){var n=ObjectCopy(t);e.filter.unshift(n),n.name=LocaleObjectCreate(),LocaleObjectSetString(n.name,o.getValue())})):d.writeDefinitions((function(e){if(u){var t=u();e.filter.unshift(t),t.name=LocaleObjectCreate(),LocaleObjectSetString(t.name,o.getValue())}})),p(),projectModify(),d.select(0),d.onchange()}a.close()},a.open()}()};var h=DocumentCreateElement("input");h.type="button",h.value=_i18n.getMessage("menu_setting_filter_button_delete"),ElementSetStyle(h,"width:100%; padding:4px 0px; margin:0px;"),m.appendChild(h),h.onclick=function(){!function(){var e,t=r.options;for(e=t.length-1;e>=0;e--){var n=t[e];if(n.selected){var a=parseInt(n.value);d.writeDefinitions((function(e){var t=e.filter;t.length>a&&t.splice(a,1)})),f(n)}}p(),projectModify(),d.onselect(r.selectedIndex),d.onchange()}()};var x=DocumentCreateElement("input");x.type="button",x.value=_i18n.getMessage("menu_setting_filter_button_prio_up"),ElementSetStyle(x,"width:100%; padding:4px 0px; margin:0px;"),m.appendChild(x),x.onclick=function(){!function(){var e,t=r.options,a=t.length;if(a){for(e=n;e<a;e++)if(t[e].selected)return;if(!t[0].selected){for(e=1;e<a;e++)if(t[e].selected){var i,o=t[e];(i=o.previousSibling).selected=!0,o.selected=!1;var l=e,s=e-1;d.writeDefinitions((function(e){var t=e.filter;i=t[s],t[s]=t[l],t[l]=i}))}d.update(),projectModify(),d.onchange()}}}()};var b=DocumentCreateElement("input");b.type="button",b.value=_i18n.getMessage("menu_setting_filter_button_prio_down"),ElementSetStyle(b,"width:100%; padding:4px 0px; margin:0px;"),m.appendChild(b),b.onclick=function(){!function(){var e,t=r.options,a=t.length;if(a){for(e=n;e<a;e++)if(t[e].selected)return;if(!t[n-1].selected){for(e=a-2;e>=0;e--)if(t[e].selected){var i,o=t[e];(i=o.nextSibling).selected=!0,o.selected=!1;var l=e,s=e+1;d.writeDefinitions((function(e){var t=e.filter;i=t[s],t[s]=t[l],t[l]=i}))}d.update(),projectModify(),d.onchange()}}}()};var v=DocumentCreateElement("input");v.type="button",v.value=_i18n.getMessage("menu_setting_filter_button_export"),ElementSetStyle(v,"width:100%; padding:4px 0px; margin:0px;"),m.appendChild(v),v.onclick=function(){!function(){var e,n=page_expand_project.getObject(),a=new Object,o=new Array,s=r.options,c=s.length,u=ProjectObjectGetActiveData(i).filter;for(e=0;e<c;e++)s[e].selected&&u[e]&&o.push(ObjectCopy(u[e]));a.version=n.version,a.setting_export={type:"filter",asset:l};var d=_();d.id=PageExpandProjectObjectDefineGenerateNewUserId(t),d.user.filter=o,a[l]=[d],a=PageExpandProjectObjectRemovePreset(a);var p=new UI_ModalDialog(_content_window),m=p.getElement(),g=(new UI_Title(m,_i18n.getMessage("menu_setting_filter_export_dialog")),new UI_LineContainer(m,_i18n.getMessage("menu_setting_filter_export_dialog_export")).getElement());new UI_TextArea(g).setValue(JsonStringify(a)),new UI_TextHint(g,_i18n.getMessage("menu_setting_filter_export_dialog_export_hint")),new UI_OkButton(m).onclick=function(e){p.close()},p.open()}()};var y=DocumentCreateElement("input");y.type="button",y.value=_i18n.getMessage("menu_setting_filter_button_import"),ElementSetStyle(y,"width:100%; padding:4px 0px; margin:0px;"),m.appendChild(y),y.onclick=function(){!function(){var e=new UI_ModalDialog(_content_window),t=e.getElement(),n=(new UI_Title(t,_i18n.getMessage("menu_setting_filter_import_dialog")),new UI_UnorderedList(a=new UI_LineContainer(t,_i18n.getMessage("menu_setting_filter_import_dialog_explanation")).getElement()));n.addListItem(_i18n.getMessage("menu_setting_filter_import_dialog_explanation_0")),n.addListItem(_i18n.getMessage("menu_setting_filter_import_dialog_explanation_1")),n.addListItem(_i18n.getMessage("menu_setting_filter_import_dialog_explanation_2"));var a,i=new UI_TextArea(a=new UI_LineContainer(t,_i18n.getMessage("menu_setting_filter_import_dialog_import")).getElement());new UI_TextHint(a,_i18n.getMessage("menu_setting_filter_import_dialog_import_hint")),new UI_Text(a=new UI_LineContainer(t,null).getElement(),_i18n.getMessage("menu_setting_filter_import_dialog_confirm")),new UI_YesNoButton(t).onclick=function(n){if(n)try{var a=page_expand_project.getObject(),o=JsonParse(i.getValue());if(o.version>a.version)throw"Error: It is a version not supported.";var r=!1;try{var s=o.setting_export;"filter"!=s.type&&(r=!0),s.asset!=l&&(r=!0)}catch(e){r=!0}if(r)throw"Error: It is a type not supported.";var c=PageExpandProjectObjectGetDefineFilterLatest(o,l);d.writeDefinitions((function(e){e.filter,e.filter=e.filter.concat(c)})),projectSave((function(n){if(n.result){i.setValue("");var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_filter_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_filter_import_alert_success")),a.oncomplete=function(){e.oncomplete=function(){p(),projectModify(),d.onchange()},e.close()},a.open()}else _(n.message)}))}catch(e){_(e)}else e.close();function _(n){var a=new UI_AlertDialog(t,_i18n.getMessage("menu_setting_filter_import_alert"));new UI_Text(a.getElement(),_i18n.getMessage("menu_setting_filter_import_alert_failure")),new UI_Text(a.getElement(),n),a.oncomplete=function(){e.close()},a.open()}},e.open()}()},new UI_TextHint(e,_i18n.getMessage("menu_setting_filter_list_hint"))}()}function UI_DefineMultiSelectList(e){var t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f,h,x=this;function b(){x.attachUrlMaps(t,i)}function v(){var e=x.getSelectedIndex()<0;f.disabled=e,h.disabled=e;var t=r.options,n=t.length;n&&(t[0].selected&&(f.disabled=!0),t[n-1].selected&&(h.disabled=!0));var a="";e&&(a="none"),f.style.display=a,h.style.display=a,m.style.display=a,(n+=1)<3&&(n=3),n>10&&(n=10),e||n<6&&(n=6),r.size=n}function y(){x.onchange&&x.onchange()}function E(e){var t=DocumentCreateElement("option");ElementSetStyle(t,"margin:2px 0px;"),t.value=e,r.appendChild(t),t.onmousedown=t.onmouseup=function(){s=e},w(t)}function w(e){e.style.color="#000";var t=parseInt(e.value);if(o){n<=t&&(e.style.color="#ccc");var a=ProjectObjectGetActiveData(i)[c],r=(l=a.id).length;a.enable||(r=0),ElementSetTextContent(e,r<=t?" *":LocaleObjectGetString(u[l[t]].name)+" *")}else{var l=ProjectObjectGetActiveData(i)[c].id;ElementSetTextContent(e,LocaleObjectGetString(u[l[t]].name))}}function S(e){DomNodeRemove(e)}x.setAsset=function(e){c=e},x.setMenuId=function(e){_=e},x.setDefineData=function(e){var t;d=e,u=new Object;var n=e.length;for(t=0;t<n;t++){var a=e[t],i=ProjectObjectGetActiveData(a);u[a.id]=i}},x.attachUrlMaps=function(e,r){var l;x.clear(),i=r,o=!1,(t=e).length>1&&(o=!0),n=2147483647,a=0;var s=t.length;for(l=0;l<s;l++){var _=ProjectObjectGetActiveData(t[l])[c];if(_.enable){var u=_.id.length;u>a&&(a=u),u<n&&(n=u)}else n=0}for(l=0;l<a;l++)E(l);v()},x.getUrlmapActive=function(){return i},x.clear=function(){var e,t=r.options;for(e=t.length-1;e>=0;e--)S(t[e]);v()},x.update=function(){var e,t=r.options,n=t.length;for(e=0;e<n;e++)w(t[e]);v()},x.writeUrlmaps=function(e){var n,a,i,o=t.length;for(i=0;i<o;i++)(n=t[i]).user?a=n.user:n.preset&&(a=n.user=ObjectCopy(n.preset)),a&&e(a)},x.getSelectedIndex=function(){return l=r.selectedIndex},x.getSelectedIndices=function(){var e,t=new Array,n=r.options,a=n.length;for(e=0;e<a;e++)n[e].selected&&t.push(e);return t},x.onchange=function(){},x.onselect=function(){},x.select=function(e){r.selectedIndex=l=s=e,x.onselect(e)},function(){var t=DocumentCreateElement("div");ElementSetStyle(t,"margin:0px 0px 5px 0px; display:table; width:100%;"),e.appendChild(t);var a=DocumentCreateElement("div");ElementSetStyle(a,"display:table-cell; vertical-align:top; width:auto;"),t.appendChild(a),(r=DocumentCreateElement("select")).multiple=!0,ElementSetStyle(r,"width:100%; box-sizing:border-box; display:block; font-size:14px; background:#fff;"),a.appendChild(r),r.onchange=function(e){l=r.selectedIndex;var t=r.options[s];void 0!==t&&t.selected&&(l=s),v(),x.onselect(l)};var o=DocumentCreateElement("div");ElementSetStyle(o,"display:table-cell; vertical-align:top; width:50px; line-height:0;"),t.appendChild(o),(p=DocumentCreateElement("input")).type="button",p.value=_i18n.getMessage("menu_setting_urlmap_define_button_add"),ElementSetStyle(p,"width:100%; padding:1px 0px; margin:0px;"),o.appendChild(p),p.onclick=function(){!function(){var e=new UI_ModalDialog(_content_window),t=e.getElement();e.setWidth(600),new UI_Title(t,_i18n.getMessage("menu_setting_define_multi_select_add_dialog"));var n,a=new UI_ListBox(new UI_LineContainer(t,_i18n.getMessage("menu_setting_define_multi_select_add_dialog_list")).getElement());a.setMultiple(!0);var i=d.length;for(n=0;n<i;n++)if("wildcard"!=d[n].id){var o=ProjectObjectGetActiveData(d[n]);a.attachItem(LocaleObjectGetString(o.name),n)}new UI_YesNoButton(t).onclick=function(t){if(t){var n=a.getSelectedValues();x.writeUrlmaps((function(e){var t,a=n.length;for(t=0;t<a;t++){var i=d[n[t]];e[c].enable?e[c].id.push(i.id):(e[c].id=[i.id],e[c].enable=!0)}})),b(),y(),projectModify()}e.close()},e.open()}()},(m=DocumentCreateElement("input")).type="button",m.value=_i18n.getMessage("menu_setting_urlmap_define_button_remove"),ElementSetStyle(m,"width:100%; padding:1px 0px; margin:0px;"),o.appendChild(m),m.onclick=function(){!function(){var e,t=r.options;for(e=t.length-1;e>=0;e--){var n=t[e];if(n.selected){var a=parseInt(n.value);x.writeUrlmaps((function(e){var t=e[c].id;t.length>a&&t.splice(a,1),t.length||(e[c].enable=!1)})),S(n)}}b(),y(),projectModify()}()},(g=DocumentCreateElement("input")).type="button",g.value=_i18n.getMessage("menu_setting_urlmap_define_button_edit"),ElementSetStyle(g,"width:100%; padding:1px 0px; margin:0px;"),o.appendChild(g),g.onclick=function(){!function(){var e=x.getSelectedIndex(),t=new Array;if(e>=0){var n,a=ProjectObjectGetActiveData(i)[c].id,o=x.getSelectedIndices(),r=o.length;for(n=0;n<r;n++)t.push(a[o[n]]);a[e]&&t.push(a[e])}_config.pushHistory(_);var l=_config.MenuItemSelect(_);l.selectFromIdList(t),l.replaceHistory()}()},(f=DocumentCreateElement("input")).type="button",f.value=_i18n.getMessage("menu_setting_urlmap_define_button_prio_up"),ElementSetStyle(f,"width:100%; padding:1px 0px; margin:0px;"),o.appendChild(f),f.onclick=function(){!function(){var e,t=r.options,a=t.length;if(a){for(e=n;e<a;e++)if(t[e].selected)return;if(!t[0].selected){for(e=1;e<a;e++)if(t[e].selected){var i,o=t[e];(i=o.previousSibling).selected=!0,o.selected=!1;var l=e,s=e-1;x.writeUrlmaps((function(e){var t=e[c].id;i=t[s],t[s]=t[l],t[l]=i}))}x.update(),y(),projectModify()}}}()},(h=DocumentCreateElement("input")).type="button",h.value=_i18n.getMessage("menu_setting_urlmap_define_button_prio_down"),ElementSetStyle(h,"width:100%; padding:1px 0px; margin:0px;"),o.appendChild(h),h.onclick=function(){!function(){var e,t=r.options,a=t.length;if(a){for(e=n;e<a;e++)if(t[e].selected)return;if(!t[n-1].selected){for(e=a-2;e>=0;e--)if(t[e].selected){var i,o=t[e];(i=o.nextSibling).selected=!0,o.selected=!1;var l=e,s=e+1;x.writeUrlmaps((function(e){var t=e[c].id;i=t[s],t[s]=t[l],t[l]=i}))}x.update(),y(),projectModify()}}}()},v()}()}function UI_UrlEditContainer(e){var t,n,a,i,o,r,l=this;function s(){switch(o.setVisible(!1),r.setVisible(!1),n.setValue(t.type),t.type){case"asterisk":i.joinArray(t.asterisk.filter,"\n"),o.setVisible(!0);break;case"regexp":a.attachArray(t.regexp.filter),r.setVisible(!0)}}l.attachObject=function(e){l.clear(),t=ObjectCopy(e),s()},l.clear=function(){i.setValue(""),a.clear()},l.onchange=function(){},function(){(n=new UI_ComboBox(e)).attachItem(_i18n.getMessage("menu_setting_url_edit_container_combo_box_item_asterisk"),"asterisk"),n.attachItem(_i18n.getMessage("menu_setting_url_edit_container_combo_box_item_regexp"),"regexp"),n.onchange=function(e){t.type=e,s(),l.onchange(t)},(o=new UI_FormContainer(e)).setVisible(!1);var c=o.getElement();(i=new UI_TextArea(c)).oninput=function(e){t.asterisk.filter=i.spiritByLine(),l.onchange(t)},new UI_TextHint(c,_i18n.getMessage("menu_setting_url_edit_container_type_asterisk_hint")),(r=new UI_FormContainer(e)).setVisible(!1);var _=r.getElement();(a=new UI_RegExpList(_)).onchange=function(e){t.regexp.filter=ObjectCopy(e),l.onchange(t)}}()}function ProjectObjectGetActiveData(e){return e.user?e.user:e.preset?e.preset:null}function LocaleObjectCreate(){return{standard:"",locales:{}}}function LocaleObjectGetString(e){var t=page_expand_project.getLanguage();return e.locales.hasOwnProperty(t)?e.locales[t]:e.standard}function LocaleObjectSetString(e,t){e.locales[page_expand_project.getLanguage()]=t,e.standard=t}function createExpandBbsData(){return{id:null,user:{name:{standard:"",locales:{}},enable:!0,filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}},script_initialize:PageExpandProjectScriptObject_Create("ExpandBbs_ScriptInitialize_Default"),script_callback:PageExpandProjectScriptObject_Create("ExpandBbs_ScriptCallback_Default"),popup:{origin_type:"adsorb_top_bottom",position_type:"absolute",enable_animation:!0,percent:{x:50,y:50},time_wait_open:0,time_wait_close:0,style_sheet:""}}}}function createUrlMapData(){return{id:null,user:{name:{standard:"",locales:{}},enable:!1,filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}},mixed_passive_content:"unsafe",mixed_active_content:"safe",access_block:{enable:!1,id:[]},replacement_to_element:{enable:!1,id:[]},replacement_to_text:{enable:!1,id:[]},replacement_to_anchor:{enable:!1,id:[]},replacement_to_link:{enable:!1,id:[]},replacement_to_referer:{enable:!1,id:[]},replacement_to_useragent:{enable:!1,id:[]},make_link_to_text:{enable:!1,id:""},expand_short_url:{enable:!1,id:""},expand_text:{enable:!1,id:""},expand_image:{enable:!1,id:""},expand_sound:{enable:!1,id:""},expand_video:{enable:!1,id:""},expand_iframe:{enable:!1,id:""},style_sheet:{enable:!1,id:""},experimental:{enable:!1,id:""}}}}function createAccessBlockData(){return{id:null,user:{name:{standard:"",locales:{}},filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}}}}}function createReplacementToElementData(){return{id:null,user:{name:{standard:"",locales:{}},script:PageExpandProjectScriptObject_Create("ReplacementToElement_Default")}}}function createReplacementToTextData(){return{id:null,user:{name:{standard:"",locales:{}},script:PageExpandProjectScriptObject_Create("ReplacementToText_Default")}}}function createReplacementToAnchorData(){return{id:null,user:{name:{standard:"",locales:{}},script:PageExpandProjectScriptObject_Create("ReplacementToAnchor_Default")}}}function createReplacementToLinkData(){return{id:null,user:{name:{standard:"",locales:{}},filter:[]}}}function createReplacementToLinkFilterItemData(){return{name:{standard:"",locales:{ja:"",en:""}},filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}},enable_reflect_to_anchor:!1,enable_cache:!1,script:PageExpandProjectScriptObject_Create("ReplacementToLink_Default")}}function createReplacementToRefererData(){return{id:null,user:{name:{standard:"",locales:{}},filter:[]}}}function createReplacementToRefererFilterItemData(){return{name:{standard:"",locales:{ja:"",en:""}},filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}},send_referer:{type:"default",custom:"",regexp:{pattern:"",flags:{i:!1,g:!1}},replacement:""}}}function createReplacementToUserAgentData(){return{id:null,user:{name:{standard:"",locales:{}},filter:[]}}}function createReplacementToUserAgentFilterItemData(){return{name:{standard:"",locales:{ja:"",en:""}},filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}},send_useragent:{custom:""}}}function createMakeLinkToTextData(){return{id:null,user:{name:{standard:"",locales:{}},script:PageExpandProjectScriptObject_Create("MakeLinkToText_Default")}}}function createExpandShortUrlData(){return{id:null,user:{name:{standard:"",locales:{}},filter:{type:"asterisk",asterisk:{filter:[]},regexp:{filter:[]}}}}}function createExpandText(){return{id:null,user:{name:{standard:"",locales:{}},inline:{disable_same_text:!1,script_allow:PageExpandProjectScriptObject_Create("ExpandText_InlineScriptAllow_Default"),script_insert:PageExpandProjectScriptObject_Create("ExpandText_InlineScriptInsert_Default")}}}}function createExpandImage(){return{id:null,user:{name:{standard:"",locales:{}},thumbnail:{enable_thumbnail:!1,enable_popup_mouseover:!1,scale_percent:50,width_min:0,width_max:300,disable_same_image:!1,load_type:"preload",script_allow:PageExpandProjectScriptObject_Create("ExpandImage_ThumbnailScriptAllow_Default"),script_insert:PageExpandProjectScriptObject_Create("ExpandImage_ThumbnailScriptInsert_Default")},popup:{enable_popup_mouseover:!1,enable_animation_scale:!1,enable_animation_alpha:!1,load_type:"preload",origin_type:"center",position_type:"absolute",scale_percent:100,time_wait_open:0,time_wait_close:0,script_allow:PageExpandProjectScriptObject_Create("ExpandImage_PopupScriptAllow_Default")},reduced_image:{enable_popup:!1,popup_allow_slcale_less_then:0},load:{enable_notify:!1,enable_unload:!1,unload_allow_size_more_then:0}}}}function createExpandSound(){return{id:null,user:{name:{standard:"",locales:{}},inline:{disable_same_audio:!1,sound_max:10,script_allow:PageExpandProjectScriptObject_Create("ExpandSound_InlineScriptAllow_Default"),script_insert:PageExpandProjectScriptObject_Create("ExpandSound_InlineScriptInsert_Default")},audio_element:{script_allow:PageExpandProjectScriptObject_Create("ExpandSound_AudioElementScriptAllow_Default"),src_type:"url"},soundcloud:{visible_player_html5:!1},mixcloud:{visible_player:!1}}}}function createExpandVideo(){return{id:null,user:{name:{standard:"",locales:{}},inline:{disable_same_video:!1,video_max:10,width_max:720,height_max:480,script_allow:PageExpandProjectScriptObject_Create("ExpandVideo_InlineScriptAllow_Default"),script_insert:PageExpandProjectScriptObject_Create("ExpandVideo_InlineScriptInsert_Default")},video_element:{script_allow:PageExpandProjectScriptObject_Create("ExpandVideo_VideoElementScriptAllow_Default"),src_type:"url"},youtube:{visible_video:!1},nicovideo:{visible_video:!1},dailymotion:{visible_video:!1},vimeo:{visible_video:!1}}}}function createExpandIframe(){return{id:null,user:{name:{standard:"",locales:{}},inline:{disable_same_iframe:!1,script_allow:PageExpandProjectScriptObject_Create("ExpandIframe_InlineScriptAllow_Default"),script_insert:PageExpandProjectScriptObject_Create("ExpandIframe_InlineScriptInsert_Default")}}}}function createStyleSheet(){return{id:null,user:{name:{standard:"",locales:{}},expand_text:{inline:"",inline_unsafe:""},expand_image:{thumbnail:"",thumbnail_unsafe:"",popup:"",popup_unsafe:""},expand_sound:{inline:{audio_element:{audio:"",audio_unsafe:""},soundcloud:{player_html5:""},mixcloud:{player:""}}},expand_video:{inline:{video_element:{video:"",video_unsafe:""},youtube:{video:""},nicovideo:{video:""},dailymotion:{video:""},vimeo:{video:""}}},expand_iframe:{inline:"",inline_unsafe:""}}}}function createExperimental(){return{id:null,user:{name:{standard:"",locales:{}}}}}function projectModify(){projectSave((function(e){}))}function projectLoad(e){page_expand_project?e({result:!1}):(page_expand_project=new PageExpandProject).loadLocalStorage((function(t){e(t)}))}function projectSave(e){page_expand_project.saveLocalStorage((function(t){e(t)}))}function projectDelete(e){page_expand_project.removeLocalStorage((function(t){e(t)}))}function projectLoadFromSyncStorage(e){}function projectSaveFromSyncStorage(e){}function projectDeleteFromSyncStorage(e){}_config.pushHistory=function(e){var t=_history_state.index;_history_state.scroll_pos=WindowGetScrollPosition(window),history.replaceState({index:t,menu:_history_state.selected_menu},"",""),_history_state_list[t+=1]=_history_state={index:t,selected_menu:e},history.pushState({index:t,menu:e},"","")},_config.MenuItemSelect=function(e){var t,n=_menu_item_param[e],a=_menu_items.length;for(t=0;t<a;t++)_menu_items[t].normal();return _menu_items[e].active(),ContentClear(),_history_state.selected_menu=e,n.callback?new n.callback:null};var _menu_item_param=[{asset:"menu_setting_standard",callback:ContentSettingStandard,bgcolor:4294967295},{asset:"menu_setting_access_block",callback:ContentSettingAccessBlock,bgcolor:4294959344},{asset:"menu_setting_replacement_to_referer",callback:ContentSettingReplacementToReferer,bgcolor:4294959344},{asset:"menu_setting_replacement_to_useragent",callback:ContentSettingReplacementToUserAgent,bgcolor:4294959344},{asset:"menu_setting_replacement_to_element",callback:ContentSettingReplacementToElement,bgcolor:4292927743},{asset:"menu_setting_replacement_to_text",callback:ContentSettingReplacementToText,bgcolor:4292927743},{asset:"menu_setting_replacement_to_anchor",callback:ContentSettingReplacementToAnchor,bgcolor:4292927743},{asset:"menu_setting_replacement_to_link",callback:ContentSettingReplacementToLink,bgcolor:4292927743},{asset:"menu_setting_make_link_to_text",callback:ContentSettingMakeLinkToText,bgcolor:4292927743},{asset:"menu_setting_expand_short_url",callback:ContentSettingExpandShortUrl,bgcolor:4292927743},{asset:"menu_setting_expand_text",callback:ContentSettingExpandText,bgcolor:4292927743},{asset:"menu_setting_expand_image",callback:ContentSettingExpandImage,bgcolor:4292927743},{asset:"menu_setting_expand_sound",callback:ContentSettingExpandSound,bgcolor:4292927743},{asset:"menu_setting_expand_video",callback:ContentSettingExpandVideo,bgcolor:4292927743},{asset:"menu_setting_expand_iframe",callback:ContentSettingExpandIframe,bgcolor:4292927743},{asset:"menu_setting_style_sheet",callback:ContentSettingStyleSheet,bgcolor:4292927743},{asset:"menu_setting_experimental",callback:ContentSettingExperimental,bgcolor:4292927743},{asset:"menu_setting_urlmap",callback:ContentSettingUrlMap,bgcolor:4294963416},{asset:"menu_setting_expand_bbs",callback:ContentSettingExpandBbs,bgcolor:4292935136},{asset:"menu_setting_download",callback:ContentSettingDownload,bgcolor:4294967295},{asset:"menu_setting_language",callback:ContentSettingLanguage,bgcolor:4294967295},{asset:"menu_credit",callback:ContentCredit,bgcolor:4294967295}],_menu_support_param=[{menu:!0,urlmap:!0},{menu:!1,urlmap:!1},{menu:!1,urlmap:!1},{menu:!1,urlmap:!1},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0},{menu:!0,urlmap:!0}];function initialize(){_menu_items=new Array,(_history_state_list=new Array)[0]=_history_state={index:0},DomNodeRemoveChildren(document.head),DomNodeRemoveChildren(document.body);var e=document.body;ElementSetStyle(e,'background-color:#CCC; font-family:"Meiryo","sans-serif"; margin:0px; padding:0px; overflow-y:scroll;'),_i18n=new InternationalMessage(page_expand_project.getLanguage()),document.title=_i18n.getMessage("page_expand_config");var t,n=DocumentCreateElement("div");e.appendChild(n),t=n.attachShadow?n.attachShadow({mode:"closed"}):n;var a=DocumentCreateElement("div");ElementSetStyle(a,"background-color:#000; color:#fff; font-size:12px; font-weight:bold; padding:2px 5px; margin:0px 0px 20px;"),ElementSetTextContent(a,_i18n.getMessage("page_expand_config")),t.appendChild(a);var i=DocumentCreateElement("div");ElementSetStyle(i,"margin:0px 15px 15px 5px;"),t.appendChild(i);var o=DocumentCreateElement("div");ElementSetStyle(o,"width:100%; display:table;"),i.appendChild(o),ElementSetStyle(_menu_window=DocumentCreateElement("div"),"width:250px; display:table-cell; vertical-align:top; user-select:none; -webkit-user-select:none; -moz-user-select:none; -khtml-user-select:none; margin:20px;"),o.appendChild(_menu_window);var r=DocumentCreateElement("div");ElementSetStyle(r,"height:10px;"),_menu_window.appendChild(r);var l,s=_menu_item_param.length;for(l=0;l<s;l++){var c=_menu_item_param[l],_=new MenuItemCreate(_i18n.getMessage(c.asset),l);_.setBackgroundColor(c.bgcolor),_.setSupport(_menu_support_param[l].menu),_menu_items.push(_)}var u=DocumentCreateElement("div");ElementSetStyle(u,"height:50px;"),_menu_window.appendChild(u),ElementSetStyle(_content_window=DocumentCreateElement("div"),"width:auto; min-width:500px; display:table-cell; vertical-align:top; padding:10px 20px 50px; background-color:#FFF; border-radius:5px; box-shadow:3px 3px 3px #888;"),o.appendChild(_content_window),_config.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_STANDARD),window.onpopstate=function(e){var t,n=e.state;n&&((_history_state=_history_state_list[n.index])||(_history_state_list[n.index]=_history_state={index:n.index,selected_menu:n.menu}),void 0!==_history_state.selected_menu&&(t=_config.MenuItemSelect(_history_state.selected_menu)),void 0!==_history_state.selected_defines&&t.selectFromIdList(_history_state.selected_defines),void 0!==_history_state.selected_filters&&t.selectFilterFromList&&t.selectFilterFromList(_history_state.selected_filters),void 0!==_history_state.scroll_pos&&WindowSetScrollPosition(window,_history_state.scroll_pos))},window.onscroll=function(e){_history_state.scroll_pos=WindowGetScrollPosition(window)}}return _config.initialize=function(e){WindowIsChild(window)?e(!1):document.body?projectLoad((function(t){initialize(),e(!0)})):e(!1)},_config}function PageExpandPopupMenu(){var e;function t(e){var t=new PageExpandProject;t.loadLocalStorage((function(e){page_expand_project=t,project=new Project}))}function n(e,t){var n,a,i=this;function o(){a.color="#fff",a.background="#4281F4"}i.onclick=function(){},(n=DocumentCreateElement("a")).href="",a=n.style,ElementSetStyle(n,"display:block; text-decoration: none; font-size:13px; color:#000; margin:0px 0px 2px; padding:5px 20px; border-radius:5px; line-height:1.0;"),ElementSetTextContent(n,t),e.appendChild(n),n.addEventListener&&(n.addEventListener("click",(function(e){i.onclick(),e.preventDefault()}),!1),n.addEventListener("mouseover",(function(e){o()}),!1),n.addEventListener("mousedown",(function(e){a.color="#fff",a.background="#4281F4"}),!1),n.addEventListener("mouseup",(function(e){o()}),!1),n.addEventListener("mouseout",(function(e){a.color="#222",a.background="none"}),!1))}function a(e){var t;ElementSetStyle(t=DocumentCreateElement("div"),"height: 0px; border-top:1px solid #ddd; margin:2px 0px;"),e.appendChild(t)}function i(){document.title=e.getMessage("page_expand_popup_menu");var t=document.body;ElementSetStyle(t,'background-color:#ccc; font-family:"Meiryo","sans-serif"; margin:0px; padding:0px; width:300px; border:0px solid #000; overflow-x:hidden; box-sizing:border-box;');var i=DocumentCreateElement("div");ElementSetStyle(i,"background-color:#000; color:#fff; font-size:12px; font-weight:bold; padding:2px 5px; margin:0px;"),ElementSetTextContent(i,e.getMessage("page_expand_popup_menu")),t.appendChild(i);var o=DocumentCreateElement("div");ElementSetStyle(o,"border:2px inset #f0f0f0; background-color:#fcfcfc;"),t.appendChild(o);var r=DocumentCreateElement("div");ElementSetStyle(r,"margin:5px 5px 5px 5px;"),o.appendChild(r);var l=DocumentCreateElement("div");ElementSetStyle(l,"width:100%; display:table;"),r.appendChild(l);var s=DocumentCreateElement("div");(ElementSetStyle(s,"display:table-cell; vertical-align:top; user-select:none; -webkit-user-select:none; -moz-user-select:none; -khtml-user-select:none; margin:0px;"),l.appendChild(s),new n(s,e.getMessage("context_menu_batch_download_image")).onclick=function(){},new n(s,e.getMessage("context_menu_batch_download_user")).onclick=function(){},new a(s),new n(s,e.getMessage("context_menu_pageexpand_open_bbs_board")).onclick=function(){},new a(s),new n(s,e.getMessage("context_menu_pageexpand_config_current_page")).onclick=function(){},project.getEnableExpandBbs())&&(new n(s,e.getMessage("context_menu_pageexpand_config_current_bbs")).onclick=function(){});(new a(s),project.getEnableStartup())||(new n(s,e.getMessage("context_menu_pageexpand_start")).onclick=function(){});new n(s,e.getMessage("context_menu_pageexpand_abort")).onclick=function(){},new n(s,e.getMessage("context_menu_pageexpand_execute_fastest")).onclick=function(){},new n(s,e.getMessage("context_menu_pageexpand_debug")).onclick=function(){}}this.reload=function(){t((function(t){DomNodeRemoveChildren(document.body),e=new InternationalMessage(page_expand_project.getLanguage()),i()}))},t()}function PageExpandBbsBoard(){var t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f,h,x,b,v,y,E,w,S,C,A,k=this;function I(){var e=DocumentGetClientSize(document);e.height-=28,k.enableCompactMode(e.width<=450);var t,s,c,_,u,d,p,m=me,f=ge,h=fe;if(he||(m=0),xe||(f=0),be||(h=0),m<0&&(m=0),f<0&&(f=0),h<0&&(h=0),h>e.height-6&&(h=e.height-6),m+f>(p=e.width-6-6)){var x=m/(m+f);m=x*p,f=(1-x)*p}(p=e.width-80)>150&&(p=150),p<24&&(p=24),g.style.width=p+"px",we?(p=e.width,d=e.height,(t=n.style).width=p+"px",(t=a.style).left="0px",t.width=p+"px",t.height=d+"px",(t=i.style).left="0px",t.right="0px",t.top="0px",t.bottom="0px"):(p=m,(t=n.style).width=p+"px",t.bottom="0px",t=a.style,s=m+6,p=e.width-m-6-f,ue()&&(p-=6),d=e.height-h,ce()&&(d-=6),t.left=s+"px",t.width=p+"px",t.height=d+"px",xe&&(t=i.style,s=e.width-f,t.left=s+"px",t.right="0px",t.top="0px",t.bottom="0px"),be&&(t=i.style,s=m+6,c=6,_=e.height-h,t.left=s+"px",t.right=c+"px",t.top=_+"px",t.bottom="0px"),s=m,(t=o.style).left=s+"px",c=f,(t=r.style).right=c+"px",s=m+6,c=f+6,u=h,(t=l.style).left=s+"px",t.right=c+"px",t.bottom=u+"px"),A.resize()}function D(e){Ie=g.value,T()}function T(e){switch(R(!0),N(!0),j(!0),A.clearColumn(),k.clearThread(),Ce="category",Ie){case"2ch":case"5ch":case"5ch_pc":case"open2ch":case"shitaraba":"shitaraba"==Ie?(s.nodeValue=Ie,R(!0),ae(!1)):(s.nodeValue=Ie,R(!1),ae(!0)),(t=new Object).ppd=function(e){return(e=Math.floor(100*e)/100).toFixed(2)},t.date_new=UNIXTIME_ToString_JP,A.onUpdateItem=function(e){var n=e.parent,a=e.data,i=function(){for(var e=a.title;;){if(t=e.match(new RegExp("(.*)©(2ch[.]net|5ch[.]net|bbspink[.]com)[ \t]*$","i")))e=t[1];else{var t;if(!(t=e.match(new RegExp("(.*)\\[(転載禁止|無断転載禁止)\\]$","i"))))break;e=t[1]}}return e},o=function(){return t.date_new(a.date_new)},r=function(){return t.ppd(a.ppd)};switch(e.layout_mode){case"list":ElementSetStyle(u=DocumentCreateElement("div"),"margin:2px; margin-left:4px; margin-right:4px;"),n.appendChild(u),ElementSetStyle(d=DocumentCreateElement("div"),"left:0px; right:0px; top:0px; bottom:0px; overflow:hidden;"),u.appendChild(d),ElementSetStyle(p=DocumentCreateElement("div"),""),d.appendChild(p),ElementSetStyle(m=DocumentCreateElement("span"),"word-break:break-all;"),p.appendChild(m);var l=document.createTextNode("");m.appendChild(l),ElementSetStyle(g=DocumentCreateElement("div"),"margin-top:2px;"),d.appendChild(g),ElementSetStyle(f=DocumentCreateElement("span"),"color:#888;"),g.appendChild(f);var s=document.createTextNode("");f.appendChild(s),e.onupdate=function(){l.nodeValue=a.number+":"+i()+" ("+a.res+")",s.nodeValue="["+r()+"/d] ["+o()+"]"};break;case"small_icon":var c=DocumentCreateElement("span");ElementSetStyle(c,"text-decoration:underline; word-break:break-all;"),n.appendChild(c);var _=document.createTextNode("");c.appendChild(_),e.onupdate=function(){_.nodeValue=a.number+":"+i()+" ("+a.res+")"};break;case"large_icon":var u,d,p,m;ElementSetStyle(u=DocumentCreateElement("div"),"margin:4px;"),n.appendChild(u),ElementSetStyle(d=DocumentCreateElement("div"),"margin:4px; margin-top:0px;"),u.appendChild(d),ElementSetStyle(p=DocumentCreateElement("div"),""),d.appendChild(p),ElementSetStyle(m=DocumentCreateElement("span"),"word-break:break-all;"),p.appendChild(m);var g,f;l=document.createTextNode("");m.appendChild(l),ElementSetStyle(g=DocumentCreateElement("div"),"margin-top:2px;"),d.appendChild(g),ElementSetStyle(f=DocumentCreateElement("span"),"color:#888;"),g.appendChild(f);s=document.createTextNode("");f.appendChild(s),e.onupdate=function(){l.nodeValue=a.number+":"+i()+" ("+a.res+")",s.nodeValue="["+r()+"/d] ["+o()+"]"}}},A.onUpdateCell=function(e){var n=t[e.key],a=e.parent,i=e.data,o=document.createTextNode("");a.appendChild(o),e.onupdate=function(){o.nodeValue=n?n(i[e.key]):i[e.key]}},(n=A.createColumn("number")).setLabel("No"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("center"),(n=A.createColumn("title")).setLabel("Title"),n.setWidthMin(300),(n=A.createColumn("res")).setLabel("Res"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("right"),(n=A.createColumn("ppd")).setLabel("P/d"),n.setWidthMin(70),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("date_new")).setLabel("Since"),n.setWidthMin(150),n.setWidthMax(150),n.setTextAlign("center"),A.setBlockSize(180,90),A.sort("number",!1);break;case"2chan":s.nodeValue=Ie,R(!1),ae(!0),(t=new Object).ppd=function(e){return(e=Math.floor(100*e)/100).toFixed(2)},t.date_new=Timestamp_ToString_JP,A.onUpdateItem=function(e){var n=e.parent,a=e.data,i=function(e){return a.title.length>e?a.title.substr(0,e)+"...":a.title};switch(e.layout_mode){case"list":var o=DocumentCreateElement("div");ElementSetStyle(o,"position:relative; margin:2px; margin-left:4px; margin-right:4px; min-height:60px;"),n.appendChild(o),ElementSetStyle(m=DocumentCreateElement("div"),"position:absolute; width:60px; height:60px; text-align:right;"),o.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:60px;"),m.appendChild(g));var r=DocumentCreateElement("div");ElementSetStyle(r,"margin-left:65px;"),o.appendChild(r);var l=DocumentCreateElement("div");ElementSetStyle(l,""),r.appendChild(l);var s=DocumentCreateElement("span");ElementSetStyle(s,"word-break: break-all;"),l.appendChild(s);var c=document.createTextNode("");s.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"margin-top:2px;"),r.appendChild(_);var u=DocumentCreateElement("span");ElementSetStyle(u,"color:#888;"),_.appendChild(u);var d=document.createTextNode("");u.appendChild(d),e.onupdate=function(){c.nodeValue=a.number+":"+a.title+" ("+a.res+")",d.nodeValue="["+t.ppd(a.ppd)+"/d] ["+t.date_new(a.date_new)+"]"};break;case"small_icon":ElementSetStyle(f=DocumentCreateElement("span"),"text-decoration:underline; word-break:break-all;"),n.appendChild(f);var p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(100)+" ("+a.res+")"};break;case"large_icon":var m,g;ElementSetStyle(m=DocumentCreateElement("div"),"margin:4px; margin-bottom:0px; text-align:center;"),n.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:140px;"),m.appendChild(g));var f,h=DocumentCreateElement("div");ElementSetStyle(h,"margin:4px; margin-top:2px;"),n.appendChild(h),ElementSetStyle(f=DocumentCreateElement("span"),"word-break:break-all;"),h.appendChild(f);p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(50)+" ("+a.res+")"}}},A.onUpdateCell=function(e){var n=t[e.key],a=e.parent,i=e.data,o=document.createTextNode("");a.appendChild(o),e.onupdate=function(){o.nodeValue=n?n(i[e.key]):i[e.key]}},(n=A.createColumn("number")).setLabel("No"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("center"),(n=A.createColumn("title")).setLabel("Title"),n.setWidthMin(300),(n=A.createColumn("res")).setLabel("Res"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("right"),(n=A.createColumn("ppd")).setLabel("P/d"),n.setWidthMin(70),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("id")).setLabel("id"),n.setWidthMin(100),n.setWidthMax(100),n.setTextAlign("center"),(n=A.createColumn("date_new")).setLabel("Since"),n.setWidthMin(150),n.setWidthMax(150),n.setTextAlign("center"),A.setBlockSize(140,4/3*140),A.sort("number",!1);break;case"4chan":s.nodeValue=Ie,R(!1),ae(!0),(t=new Object).ppd=function(e){return(e=Math.floor(100*e)/100).toFixed(2)},t.date_new=UNIXTIME_ToString_JP,A.onUpdateItem=function(e){var n=e.parent,a=e.data,i=function(e){return a.title.length>e?a.title.substr(0,e)+"...":a.title};switch(e.layout_mode){case"list":var o=DocumentCreateElement("div");ElementSetStyle(o,"position:relative; margin:2px; margin-left:4px; margin-right:4px; min-height:60px;"),n.appendChild(o),ElementSetStyle(m=DocumentCreateElement("div"),"position:absolute; width:60px; height:60px; text-align:right;"),o.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:60px;"),m.appendChild(g));var r=DocumentCreateElement("div");ElementSetStyle(r,"margin-left:65px;"),o.appendChild(r);var l=DocumentCreateElement("div");ElementSetStyle(l,""),r.appendChild(l);var s=DocumentCreateElement("span");ElementSetStyle(s,"word-break: break-all;"),l.appendChild(s);var c=document.createTextNode("");s.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"margin-top:2px;"),r.appendChild(_);var u=DocumentCreateElement("span");ElementSetStyle(u,"color:#888;"),_.appendChild(u);var d=document.createTextNode("");u.appendChild(d),e.onupdate=function(){c.nodeValue=a.number+":"+a.title,d.nodeValue="R:"+a.replies+" I:"+a.images+" ["+t.ppd(a.ppd)+"/d] ["+t.date_new(a.date_new)+"]"};break;case"small_icon":ElementSetStyle(f=DocumentCreateElement("span"),"text-decoration:underline; word-break:break-all;"),n.appendChild(f);var p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(100)+" ("+a.replies+")"};break;case"large_icon":var m,g;ElementSetStyle(m=DocumentCreateElement("div"),"margin:4px; margin-bottom:0px; text-align:center;"),n.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:140px;"),m.appendChild(g));var f,h=DocumentCreateElement("div");ElementSetStyle(h,"margin:4px; margin-top:2px;"),n.appendChild(h),ElementSetStyle(f=DocumentCreateElement("span"),"word-break:break-all;"),h.appendChild(f);p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(50)+" ("+a.replies+")"}}},A.onUpdateCell=function(e){var n=t[e.key],a=e.parent,i=e.data,o=document.createTextNode("");a.appendChild(o),e.onupdate=function(){o.nodeValue=n?n(i[e.key]):i[e.key]}},(n=A.createColumn("number")).setLabel("No"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("center"),(n=A.createColumn("title")).setLabel("Title"),n.setWidthMin(300),(n=A.createColumn("replies")).setLabel("Replies"),n.setWidthMin(50),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("images")).setLabel("Images"),n.setWidthMin(50),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("ppd")).setLabel("P/d"),n.setWidthMin(70),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("id")).setLabel("id"),n.setWidthMin(100),n.setWidthMax(100),n.setTextAlign("center"),(n=A.createColumn("date_new")).setLabel("Since"),n.setWidthMin(150),n.setWidthMax(150),n.setTextAlign("center"),A.setBlockSize(140,4/3*140),A.sort("number",!1);break;case"8chan":s.nodeValue=Ie,R(!1),ae(!0),(t=new Object).ppd=function(e){return(e=Math.floor(100*e)/100).toFixed(2)},t.date_new=UNIXTIME_ToString_JP,A.onUpdateItem=function(e){var n=e.parent,a=e.data,i=function(e){return a.title.length>e?a.title.substr(0,e)+"...":a.title};switch(e.layout_mode){case"list":var o=DocumentCreateElement("div");ElementSetStyle(o,"position:relative; margin:2px; margin-left:4px; margin-right:4px; min-height:60px;"),n.appendChild(o),ElementSetStyle(m=DocumentCreateElement("div"),"position:absolute; width:60px; height:60px; text-align:right;"),o.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:60px;"),m.appendChild(g));var r=DocumentCreateElement("div");ElementSetStyle(r,"margin-left:65px;"),o.appendChild(r);var l=DocumentCreateElement("div");ElementSetStyle(l,""),r.appendChild(l);var s=DocumentCreateElement("span");ElementSetStyle(s,"word-break: break-all;"),l.appendChild(s);var c=document.createTextNode("");s.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"margin-top:2px;"),r.appendChild(_);var u=DocumentCreateElement("span");ElementSetStyle(u,"color:#888;"),_.appendChild(u);var d=document.createTextNode("");u.appendChild(d),e.onupdate=function(){c.nodeValue=a.number+":"+a.title,d.nodeValue="R:"+a.replies+" I:"+a.images+" ["+t.ppd(a.ppd)+"/d] ["+t.date_new(a.date_new)+"]"};break;case"small_icon":ElementSetStyle(f=DocumentCreateElement("span"),"text-decoration:underline; word-break:break-all;"),n.appendChild(f);var p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(100)+" ("+a.replies+")"};break;case"large_icon":var m,g;ElementSetStyle(m=DocumentCreateElement("div"),"margin:4px; margin-bottom:0px; text-align:center;"),n.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:140px;"),m.appendChild(g));var f,h=DocumentCreateElement("div");ElementSetStyle(h,"margin:4px; margin-top:2px;"),n.appendChild(h),ElementSetStyle(f=DocumentCreateElement("span"),"word-break:break-all;"),h.appendChild(f);p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(50)+" ("+a.replies+")"}}},A.onUpdateCell=function(e){var n=t[e.key],a=e.parent,i=e.data,o=document.createTextNode("");a.appendChild(o),e.onupdate=function(){o.nodeValue=n?n(i[e.key]):i[e.key]}},(n=A.createColumn("number")).setLabel("No"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("center"),(n=A.createColumn("title")).setLabel("Title"),n.setWidthMin(300),(n=A.createColumn("replies")).setLabel("Replies"),n.setWidthMin(50),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("images")).setLabel("Images"),n.setWidthMin(50),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("ppd")).setLabel("P/d"),n.setWidthMin(70),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("id")).setLabel("id"),n.setWidthMin(100),n.setWidthMax(100),n.setTextAlign("center"),(n=A.createColumn("date_new")).setLabel("Since"),n.setWidthMin(150),n.setWidthMax(150),n.setTextAlign("center"),A.setBlockSize(140,4/3*140),A.sort("number",!1);break;case"2ch.hk":s.nodeValue=Ie,R(!1),ae(!0),(t=new Object).ppd=function(e){return(e=Math.floor(100*e)/100).toFixed(2)},t.date_new=UNIXTIME_ToString_JP,A.onUpdateItem=function(e){var n=e.parent,a=e.data,i=function(e){return a.title.length>e?a.title.substr(0,e)+"...":a.title};switch(e.layout_mode){case"list":var o=DocumentCreateElement("div");ElementSetStyle(o,"position:relative; margin:2px; margin-left:4px; margin-right:4px; min-height:60px;"),n.appendChild(o),ElementSetStyle(m=DocumentCreateElement("div"),"position:absolute; width:60px; height:60px; text-align:right;"),o.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:60px;"),m.appendChild(g));var r=DocumentCreateElement("div");ElementSetStyle(r,"margin-left:65px;"),o.appendChild(r);var l=DocumentCreateElement("div");ElementSetStyle(l,""),r.appendChild(l);var s=DocumentCreateElement("span");ElementSetStyle(s,"word-break: break-all;"),l.appendChild(s);var c=document.createTextNode("");s.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"margin-top:2px;"),r.appendChild(_);var u=DocumentCreateElement("span");ElementSetStyle(u,"color:#888;"),_.appendChild(u);var d=document.createTextNode("");u.appendChild(d),e.onupdate=function(){c.nodeValue=a.number+":"+a.title,d.nodeValue="R:"+a.replies+" I:"+a.images+" ["+t.ppd(a.ppd)+"/d] ["+t.date_new(a.date_new)+"]"};break;case"small_icon":ElementSetStyle(f=DocumentCreateElement("span"),"text-decoration:underline; word-break:break-all;"),n.appendChild(f);var p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(100)+" ("+a.replies+")"};break;case"large_icon":var m,g;ElementSetStyle(m=DocumentCreateElement("div"),"margin:4px; margin-bottom:0px; text-align:center;"),n.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:140px;"),m.appendChild(g));var f,h=DocumentCreateElement("div");ElementSetStyle(h,"margin:4px; margin-top:2px;"),n.appendChild(h),ElementSetStyle(f=DocumentCreateElement("span"),"word-break:break-all;"),h.appendChild(f);p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(50)+" ("+a.replies+")"}}},A.onUpdateCell=function(e){var n=t[e.key],a=e.parent,i=e.data,o=document.createTextNode("");a.appendChild(o),e.onupdate=function(){o.nodeValue=n?n(i[e.key]):i[e.key]}},(n=A.createColumn("number")).setLabel("No"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("center"),(n=A.createColumn("title")).setLabel("Title"),n.setWidthMin(300),(n=A.createColumn("replies")).setLabel("Replies"),n.setWidthMin(50),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("images")).setLabel("Images"),n.setWidthMin(50),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("ppd")).setLabel("P/d"),n.setWidthMin(70),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("id")).setLabel("id"),n.setWidthMin(100),n.setWidthMax(100),n.setTextAlign("center"),(n=A.createColumn("date_new")).setLabel("Since"),n.setWidthMin(150),n.setWidthMax(150),n.setTextAlign("center"),A.setBlockSize(140,4/3*140),A.sort("number",!1);break;case"reddit":var t,n;s.nodeValue="reddit",R(!0),ae(!1),(t=new Object).ppd=function(e){return(e=Math.floor(100*e)/100).toFixed(2)},t.date_new=UNIXTIME_ToString_JP,A.onUpdateItem=function(e){var n=e.parent,a=e.data,i=function(e){return a.title.length>e?a.title.substr(0,e)+"...":a.title};switch(e.layout_mode){case"list":var o=DocumentCreateElement("div");ElementSetStyle(o,"position:relative; margin:2px; margin-left:4px; margin-right:4px; min-height:60px;"),n.appendChild(o),ElementSetStyle(m=DocumentCreateElement("div"),"position:absolute; width:60px; height:60px; text-align:right;"),o.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:60px;"),m.appendChild(g));var r=DocumentCreateElement("div");ElementSetStyle(r,"margin-left:65px;"),o.appendChild(r);var l=DocumentCreateElement("div");ElementSetStyle(l,""),r.appendChild(l);var s=DocumentCreateElement("span");ElementSetStyle(s,"word-break: break-all;"),l.appendChild(s);var c=document.createTextNode("");s.appendChild(c);var _=DocumentCreateElement("div");ElementSetStyle(_,"margin-top:2px;"),r.appendChild(_);var u=DocumentCreateElement("span");ElementSetStyle(u,"color:#888;"),_.appendChild(u);var d=document.createTextNode("");u.appendChild(d),e.onupdate=function(){c.nodeValue=a.number+":"+a.title,d.nodeValue="S:"+a.score+" C:"+a.comments+" ["+t.ppd(a.ppd)+"/d] ["+t.date_new(a.date_new)+"]"};break;case"small_icon":ElementSetStyle(f=DocumentCreateElement("span"),"text-decoration:underline; word-break:break-all;"),n.appendChild(f);var p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(100)+" ("+a.comments+")"};break;case"large_icon":var m,g;ElementSetStyle(m=DocumentCreateElement("div"),"margin:4px; margin-bottom:0px; text-align:center;"),n.appendChild(m),(g=a.image)&&(ElementSetStyle(g,"max-width:100%; max-height:140px;"),m.appendChild(g));var f,h=DocumentCreateElement("div");ElementSetStyle(h,"margin:4px; margin-top:2px;"),n.appendChild(h),ElementSetStyle(f=DocumentCreateElement("span"),"word-break:break-all;"),h.appendChild(f);p=document.createTextNode("");f.appendChild(p),e.onupdate=function(){p.nodeValue=a.number+":"+i(50)+" ("+a.comments+")"}}},A.onUpdateCell=function(e){var n=t[e.key],a=e.parent,i=e.data,o=document.createTextNode("");a.appendChild(o),e.onupdate=function(){o.nodeValue=n?n(i[e.key]):i[e.key]}},(n=A.createColumn("number")).setLabel("No"),n.setWidthMin(50),n.setWidthMax(50),n.setTextAlign("center"),(n=A.createColumn("title")).setLabel("Title"),n.setWidthMin(300),(n=A.createColumn("comments")).setLabel("Comments"),n.setWidthMin(50),n.setWidthMax(100),n.setTextAlign("right"),(n=A.createColumn("score")).setLabel("Score"),n.setWidthMin(50),n.setWidthMax(100),n.setTextAlign("right"),(n=A.createColumn("ppd")).setLabel("P/d"),n.setWidthMin(70),n.setWidthMax(70),n.setTextAlign("right"),(n=A.createColumn("date_new")).setLabel("Since"),n.setWidthMin(150),n.setWidthMax(150),n.setTextAlign("center"),A.setBlockSize(140,4/3*140),A.sort("number",!1);break;default:s.nodeValue=Ie,R(!0),ae(!1),Ce=""}re(),A.resize(),$(e)}function R(e){ve=e,U()}function N(e){ye=e,z()}function j(e){Ee=e,F()}function P(e){var t=n.style;t.display=e?"block":"none"}function L(e){var t=a.style;e?(t.display="block",A.resize()):t.display="none"}function M(e){var t=i.style;e?(t.display="block",A.setTargetMode("thread")):(t.display="none",A.setTargetMode("_blank"))}function O(){return!we&&(!Ee&&!(!xe&&!be))}function U(){P(!ve&&!!he)}function z(){L(!ye)}function F(){M(O())}function B(e){we?(Ce="category",re()):ae(!he)}function G(e){we&&(Ce="catalog",re())}function W(e){k.onreload&&k.onreload()}function V(e){be?(oe(!1),ie(!0)):xe?(oe(!1),ie(!1)):(oe(!0),ie(!1))}function H(){x.setVisible(!Se&&!we)}function q(e){++Ae>=4&&(Ae=0),Y(e)}function Y(e){switch(Ae){case 0:C.setOpenMode(!0),C.setLayoutMode("inline");break;case 1:C.setOpenMode(!0),C.setLayoutMode("block");break;case 2:C.setOpenMode(!1),C.setLayoutMode("inline");break;case 3:C.setOpenMode(!1),C.setLayoutMode("block")}}function Z(e){$()}function $(t){var n=De+=1,a=function(e){y.setDisabled(!1),t&&t(e)},i=function(){return n!=De&&(a({result:!1}),!0)};C.clear(),y.setDisabled(!0);var o=new Loader;switch(Ie){case"2ch":case"5ch":case"5ch_pc":case"open2ch":var r="https://menu."+("5ch_pc"==Ie?"5ch":Ie)+".net/bbsmenu.html";o.onload=function(t){if(!i()){var n=new RegExp("^<br><B>(.*)</B><br>","i"),o=new RegExp("<A HREF=(.*)>(.*)</A>","gi"),l=new RegExp("<br><b>","gi"),s=new RegExp("<br><B>","gi"),c=0,_=t.length;execute_queue.attachLast((function u(){if(!i()){try{if(c>=_)throw 0;if(l.lastIndex=c,!(d=l.exec(t)))throw 0;c=d.index,s.lastIndex=l.lastIndex;var d=s.exec(t);e=d?d.index:_;var p=t.substring(c,e);if(d=p.match(n)){var m=C.createFolder(d[1]);m.setLabel(d[1]),p.replace(o,(function(e,t,n,a,i){var o=t;o=StringUrl_To_Absolute(o=StringLiteral_To_String(o)||o,r);var l=m.createItem(t);l.setLabel(n),l.setTooltip(o),l.setURL(o)}))}if(c<e)return c=e,void execute_queue.attachFirst(u,null)}catch(e){}a({result:!0})}}),null)}},o.onerror=function(){i()||a({result:!1})},o.setMethod("GET"),o.setURL(r),o.overrideMimeType("text/plain; charset=Shift_JIS"),o.loadText();break;case"2chan":r="https://www.2chan.net/bbsmenu.html";o.onload=function(e){if(!i()){var t=new RegExp("^<b>(.*)</b><br>","i"),n=new RegExp('<a href="([^"]*)"[^>]*>([^<]*)',"gi"),o=new RegExp("://([^.]+)","i"),l=new Array,s=new Object,c=0,_=e.length;try{for(;c<_&&!((c=e.indexOf("<b>",c))<0);){var u=e.indexOf("<b>",c+3);u<0&&(u=_);var d=e.substring(c,u),p=d.match(t);if(p){var m={label:p[1]};d.replace(n,(function(e,t,n,a,i){var c={category:m,url:StringUrl_To_Absolute(t,r),label:n};c.prev=c,c.next=c;e=c.url.match(o);c.sub=e?e[1]:"";var _=s[c.label];if(_){var u=_,d=_.next;u.next=c,d.prev=c,c.prev=u,c.next=d}else _=s[c.label]=c;l.push(c)}))}c=u}}catch(u){}c=0;execute_queue.attachLast((function e(){if(!i()){try{var t=l[c];if(!t)throw 0;c++;var n=t.category,o=C.getFolder(n.label);o||(o=C.createFolder(n.label)).setLabel(n.label);var r=t.label;t.prev!=t&&(r+="("+t.sub+")");var s=o.createItem(t.url);return s.setLabel(r),s.setTooltip(t.url),s.setURL(t.url),void execute_queue.attachFirst(e,null)}catch(e){}a({result:!0})}}),null)}},o.onerror=function(){i()||a({result:!1})},o.setMethod("GET"),o.setURL(r),o.overrideMimeType("text/plain; charset=Shift_JIS"),o.loadText();break;case"4chan":o.onload=function(e){if(!i()){var t=JsonParse(e).boards,n=C.createFolder("boards");n.setLabel("Boards");var o=C.createFolder("folders");o.setLabel("Folders");var r=0,l=t.length;execute_queue.attachLast((function e(){if(!i()){try{if(r>=l)throw 0;var s=t[r];r+=1;var c,_="https://boards.4chan.org/"+s.board+"/";(c=n.createItem(s.board)).setLabel(s.title),c.setTooltip(s.board),c.setURL(_),(c=o.createItem("#"+s.board)).setLabel(s.board),c.setTooltip(s.title),c.setURL(_),execute_queue.attachFirst(e,null)}catch(e){}a({result:!0})}}),null)}},o.onerror=function(){i()||a({result:!1})},o.setMethod("GET"),o.setURL("https://a.4cdn.org/boards.json"),o.loadText();break;case"8chan":o.onload=function(e){if(!i()){var t=JsonParse(e),n=C.createFolder("8chan");n.setLabel("8chan");var o=0,r=t.length;r>2e3&&(r=2e3),execute_queue.attachLast((function e(){if(!i()){try{if(o>=r)throw 0;var l=t[o];o+=1;var s=n.createItem(l.title);s.setLabel(l.uri),s.setTooltip(l.title),s.setURL("https://8ch.net/"+l.uri+"/"),execute_queue.attachFirst(e,null)}catch(e){}a({result:!0})}}),null)}},o.onerror=function(){i()||a({result:!1})},o.setMethod("GET"),o.setURL("https://8ch.net/boards.json"),o.loadText();break;case"2ch.hk":o.onload=function(e){if(!i()){var t=JsonParse(e).boards,n=new Array,o=new Array,r=0,l=t.length;for(r=0;r<l;r++){var s=t[r],c=o[s.category];c||(c=o[s.category]=C.createFolder(s.category)).setLabel(s.category);var _={folder:c,label:s.name,id:s.id,url:"https://2ch.hk/"+s.id+"/"};n.push(_)}var u=C.createFolder("folders");u.setLabel("Folders");r=0;execute_queue.attachLast((function e(){if(!i()){try{var t,o=n[r];if(!o)throw 0;r+=1,(t=o.folder.createItem(o.id)).setLabel(o.label),t.setTooltip(o.id),t.setURL(o.url),(t=u.createItem("#"+o.id)).setLabel(o.id),t.setTooltip(o.label),t.setURL(o.url),execute_queue.attachFirst(e,null)}catch(e){}a({result:!0})}}),null)}},o.onerror=function(){i()||a({result:!1})},o.setMethod("GET"),o.setURL("https://2ch.hk/boards.json"),o.loadText();break;default:a({result:!1})}}function Q(e){++ke>=4&&(ke=0),function(){switch(ke){case 0:A.setLayoutMode("detail");break;case 1:A.setLayoutMode("list");break;case 2:A.setLayoutMode("large_icon");break;case 3:A.setLayoutMode("small_icon")}}()}function X(e){J()}function J(e){var t=Te+=1,n=function(t){w.setDisabled(!1),e&&e(t)},a=function(){return t!=Te&&(n({result:!1}),!0)};switch(w.setDisabled(!0),Ie){case"2ch":case"5ch":case"5ch_pc":case"open2ch":case"shitaraba":var i;if("shitaraba"==Ie){if(!l)(u=p.match(new RegExp("(http|https)://([^/]+[.](shitaraba)[.]net)/(test|bbs)/[^/]+[.]cgi/([^/]+/[0-9]+)","i")))&&(i=u[1],l=u[2],s=u[5]);if(!l)(u=p.match(new RegExp("(http|https)://([^/]+[.](shitaraba)[.]net)/([^/]+/[0-9]+)","i")))&&(i=u[1],l=u[2],s=u[4]);if(!l)return void n({result:!1});c.nodeValue=i+"://"+l+"/"+s+"/"}else{if(!l)(u=p.match(new RegExp("(http|https)://([^/]+[.](bbspink[.]com|open2ch[.]net|2ch[.]net|5ch[.]net))/test/read[.]cgi/([^/]+)","i")))&&(i=u[1],l=u[2],s=u[4]);if(!l)(u=p.match(new RegExp("(http|https)://([^/]+[.](bbspink[.]com|open2ch[.]net|2ch[.]net|5ch[.]net))/([^/]+)","i")))&&(i=u[1],l=u[2],s=u[4]);if(!l)return void n({result:!1});c.nodeValue=i+"://"+l+"/"+s+"/"}(o=new Loader).onload=function(e){if(!a()){var t,o,r,c,_,u=new RegExp("([0-9]+)[.](dat<>[ ]*|cgi,)(.*)[(]([0-9]+)[)]","i"),d=A.getItemList(),p=d.length;for(t=0;t<p;t++){var m=d[t].getData();m.number="x",m.ppd=(o=void 0,r=void 0,c=void 0,_=void 0,o=new Date,r=new Date(1e3*m.date_new),c=o.getTime()-r.getTime(),_=0,c>0&&(_=m.res/(c/1e3/60/60/24)),_)}var g=0,f=e.length,h=1;!function t(){if(!a()){try{if(g>=f)throw 0;var o=e.indexOf("\n",g+1);o<0&&(o=f);var r=e.substring(g,o).match(u);if(r){var c=A.createItem(r[1]);if("shitaraba"==Ie)c.setURL(i+"://"+l+"/bbs/read.cgi/"+s+"/"+r[1]);else{var _="";"5ch_pc"==Ie&&(_="c/"),l.match(/bbspink[.]com$/)&&(_=""),c.setURL(i+"://"+l+"/test/read.cgi/"+_+s+"/"+r[1])}var d=c.getData();d.number=h,d.id=parseInt(r[1]),d.title=StringConvert_From_CharacterReferences_To_Text(r[3]),d.res=parseInt(r[4]),d.date_new=parseInt(d.id),d.ppd=function(){var e=new Date,t=new Date(1e3*d.date_new),n=e.getTime()-t.getTime(),a=0;return n>0&&(a=d.res/(n/1e3/60/60/24)),a}(),h+=1}if(g<o)return g=o,void t()}catch(o){}A.commit(),n({result:!0})}}()}},o.onerror=function(){a()||n({result:!1})},o.setMethod("GET"),o.setURL(i+"://"+l+"/"+s+"/subject.txt"),"shitaraba"==Ie?o.overrideMimeType("text/plain; charset=euc-jp"):o.overrideMimeType("text/plain; charset=Shift_JIS"),o.loadText();break;case"2chan":if(!l)(u=p.match(new RegExp("(http|https)://([^/]+[.]2chan[.]net)/([^/]+)","i")))&&(l=u[2],s=u[3]);if(!l)return void n({result:!1});c.nodeValue="https://"+l+"/"+s+"/futaba.htm";var o=new Loader,r="https://"+l+"/"+s+"/futaba.php?mode=cat&cxyl=1x2000x2000x0x6";o.onload=function(e){if(!a()){var t,i,o,c,_,u=new RegExp("<a href='res/([0-9]+)[.]htm","i"),d=new RegExp("<img src='(.*)/(cat|thumb)/([^']*)","i"),p=new RegExp("<small>([^<]*)</small>","i"),m=new RegExp("<font[^>]*>([0-9]+)</font>","i"),g=new RegExp("/([0-9]+)s[.]jpg","i"),f=A.getItemList(),h=f.length;for(t=0;t<h;t++){var x=f[t].getData();x.number="x",x.ppd=(i=void 0,o=void 0,c=void 0,_=void 0,i=new Date,o=new Date(x.date_new),c=i.getTime()-o.getTime(),_=0,c>0&&(_=x.res/(c/1e3/60/60/24)),_)}var b=0,v=e.length,y=1;!function t(){if(!a()){try{if(b>=v)throw 0;if((b=e.indexOf("<tr><td>",b))<0)throw 0;var i=e.indexOf("</td>",b+8);i<0&&(i=v);var o=e.substring(b,i),c=o.match(u);if(c){var _=A.createItem(c[1]),f=_.getData();if(f.number=y,f.id=parseInt(c[1]),_.setURL("https://"+l+"/"+s+"/res/"+f.id+".htm"),(c=o.match(p))&&(f.title=StringConvert_From_CharacterReferences_To_Text(c[1])),(c=o.match(m))&&(f.res=parseInt(c[1])),c=o.match(g),f.date_new=c?parseInt(c[1]):0,c=o.match(d)){f.image_url=StringUrl_To_Absolute(c[1]+"/thumb/"+c[3],r);var h=new Image;h.src=f.image_url,f.image=h}f.ppd=function(){var e=new Date,t=new Date(f.date_new),n=e.getTime()-t.getTime(),a=0;return n>0&&(a=f.res/(n/1e3/60/60/24)),a}(),y+=1}if(b<i)return b=i,void t()}catch(i){}A.commit(),n({result:!0})}}()}},o.onerror=function(){a()||n({result:!1})},o.setMethod("GET"),o.setURL(r),o.overrideMimeType("text/plain; charset=Shift_JIS"),o.loadText();break;case"4chan":if(!l)(u=p.match(new RegExp("(http|https)://([^/]+[.]4chan[.]org)/([^/]+)","i")))&&(l=u[2],s=u[3]);if(!l)return void n({result:!1});c.nodeValue="https://"+l+"/"+s+"/",(o=new Loader).onload=function(e){if(!a()){var t,i,o,r,c=A.getItemList(),_=c.length;for(d=0;d<_;d++){(f=c[d].getData()).number="x",f.ppd=(t=void 0,i=void 0,o=void 0,r=void 0,t=new Date,i=new Date(1e3*f.date_new),o=t.getTime()-i.getTime(),r=0,o>0&&(r=f.replies/(o/1e3/60/60/24)),r)}var u=1;try{var d,p,m=JsonParse(e);for(d=0;d<m.length;d++){var g=m[d].threads;for(p=0;p<g.length;p++){var f,h=g[p],x=A.createItem(h.no);if(x.setURL("https://"+l+"/"+s+"/thread/"+h.no),(f=x.getData()).number=u,f.id=h.no,f.title=function(){if(h.sub)return h.sub;try{return ElementGetTextContent((new DOMParser).parseFromString(h.com,"text/html").body)}catch(e){}return h.com||""}(),f.replies=h.replies,f.images=h.images,f.date_new=h.time,f.image_url="https://i.4cdn.org/"+s+"/"+h.tim+"s.jpg",f.image_url){var b=new Image;b.src=f.image_url,f.image=b}f.ppd=function(){var e=new Date,t=new Date(1e3*f.date_new),n=e.getTime()-t.getTime(),a=0;return n>0&&(a=f.replies/(n/1e3/60/60/24)),a}(),u+=1}}}catch(e){}A.commit(),n({result:!0})}},o.onerror=function(){a()||n({result:!1})},o.setMethod("GET"),o.setURL("https://a.4cdn.org/"+s+"/catalog.json"),o.loadText();break;case"8chan":if(!l)(u=p.match(new RegExp("(http|https)://(8ch[.]net)/([^/]+)","i")))&&(l=u[2],s=u[3]);if(!l)return void n({result:!1});c.nodeValue="https://"+l+"/"+s+"/",(o=new Loader).onload=function(e){if(!a()){var t,i,o,r,c=A.getItemList(),_=c.length;for(d=0;d<_;d++){(f=c[d].getData()).number="x",f.ppd=(t=void 0,i=void 0,o=void 0,r=void 0,t=new Date,i=new Date(1e3*f.date_new),o=t.getTime()-i.getTime(),r=0,o>0&&(r=f.replies/(o/1e3/60/60/24)),r)}var u=1;try{var d,p,m=JsonParse(e);for(d=0;d<m.length;d++){var g=m[d].threads;for(p=0;p<g.length;p++){var f,h=g[p],x=A.createItem(h.no);if(x.setURL("https://"+l+"/"+s+"/res/"+h.no+".html"),(f=x.getData()).number=u,f.id=h.no,f.title=function(){if(h.sub)return h.sub;try{return ElementGetTextContent((new DOMParser).parseFromString(h.com,"text/html").body)}catch(e){}return h.com||""}(),f.replies=h.replies,f.images=h.images,f.date_new=h.time,f.image_url=function(){var e=function(){if(!h.tim)return null;var e=h.ext||"";return e.match(/[.](bmp|gif|jpg|jpeg|png)/i)||(e=".jpg"),h.tim+e}();if(e)return"https://media.8ch.net/file_store/thumb/"+e;if(h.embed){var t=h.embed.match(new RegExp("//img[.]youtube[.]com/vi/[^/]+/[0-9]+[.]jpg","i"));if(t)return"https:"+t[0]}return null}(),f.image_url){var b=new Image;b.src=f.image_url,f.image=b}f.ppd=function(){var e=new Date,t=new Date(1e3*f.date_new),n=e.getTime()-t.getTime(),a=0;return n>0&&(a=f.replies/(n/1e3/60/60/24)),a}(),u+=1}}}catch(e){}A.commit(),n({result:!0})}},o.onerror=function(){a()||n({result:!1})},o.setMethod("GET"),o.setURL("https://8ch.net/"+s+"/catalog.json"),o.loadText();break;case"2ch.hk":if(!l)(u=p.match(new RegExp("(http|https)://(2ch[.]hk)/([^/]+)","i")))&&(l=u[2],s=u[3]);if(!l)return void n({result:!1});c.nodeValue="https://"+l+"/"+s+"/";o=new Loader,r="https://2ch.hk/"+s+"/catalog.json";o.onload=function(e){if(!a()){var t,i,o,c,_=A.getItemList(),u=_.length;for(p=0;p<u;p++){(g=_[p].getData()).number="x",g.ppd=(t=void 0,i=void 0,o=void 0,c=void 0,t=new Date,i=new Date(1e3*g.date_new),o=t.getTime()-i.getTime(),c=0,o>0&&(c=g.replies/(o/1e3/60/60/24)),c)}var d=1;try{var p,m=JsonParse(e).threads;for(p=0;p<m.length;p++){var g,f=m[p],h=A.createItem(f.num);if(h.setURL("https://"+l+"/"+s+"/res/"+f.num+".html"),(g=h.getData()).number=d,g.id=f.num,g.title=function(){if(f.subject)return f.subject;try{return ElementGetTextContent((new DOMParser).parseFromString(f.comment,"text/html").body)}catch(e){}return f.com||""}(),g.replies=f.posts_count,g.images=f.files_count,g.date_new=f.timestamp,g.image_url=function(){try{return StringUrl_To_Absolute(f.files[0].thumbnail,r)}catch(e){}return null}(),g.image_url){var x=new Image;x.src=g.image_url,g.image=x}g.ppd=function(){var e=new Date,t=new Date(1e3*g.date_new),n=e.getTime()-t.getTime(),a=0;return n>0&&(a=g.replies/(n/1e3/60/60/24)),a}(),d+=1}}catch(e){}A.commit(),n({result:!0})}},o.onerror=function(){a()||n({result:!1})},o.setMethod("GET"),o.setURL(r),o.loadText();break;case"reddit":var l,s,_,u;if(!l)(u=p.match(new RegExp("https://(www[.]reddit[.]com)/r/([^/]+)","i")))&&(l=u[1],s=u[2]);if(!l)return void n({result:!1});(u=p.match(new RegExp("reddit[.]com/r/[^/]+/(hot|new|rising|controversial|top)")))&&(_=u[1]);var d="https://"+l+"/r/"+s+"/";_&&(d+=_+"/"),c.nodeValue=d;var m=0,g=0,f=function(e){var t=new Loader;t.onload=function(t){if(!a()){try{var i=JsonParse(t);e=i.data.after;var o,r=i.data.children,s=r.length;for(o=0;o<s;o++){var c=r[o].data,_=A.createItem(c.id);_.setURL("https://"+l+c.permalink);var u=_.getData();if(u.number=m+1,u.id=c.id,u.title=c.title,u.score=c.score,u.comments=c.num_comments,u.date_new=c.created_utc,c.thumbnail.indexOf("thumbs.redditmedia.com")>=0&&(u.image_url=c.thumbnail),u.image_url){var d=new Image;d.src=u.image_url,u.image=d}u.ppd=(p=void 0,h=void 0,x=void 0,b=void 0,p=new Date,h=new Date(1e3*u.date_new),x=p.getTime()-h.getTime(),b=0,x>0&&(b=u.comments/(x/1e3/60/60/24)),b),m+=1}}catch(e){}var p,h,x,b;A.commit(),++g<10&&e?f(e):n({result:!0})}},t.onerror=function(){a()||n({result:!1})};var i="https://"+l+"/r/"+s;_&&(i+="/"+_),i+=".json?count="+m+"&limit=100",e&&(i+="&after="+e),t.setMethod("GET"),t.setURL(i),t.loadText()};f();break;default:n({result:!1})}}function K(e){u.src=m}function ee(e){ae(!he)}function te(e){oe(!1),ie(!xe)}function ne(e){ie(!1),oe(!be)}function ae(e){he=e,U(),I()}function ie(e){if(xe=e,e&&ge<=0){var t=DocumentGetClientSize(document).width-me-6-6;(ge=t*(2/3))<10&&(ge=10)}F(),I()}function oe(e){if(be=e,e&&fe<=0){var t=DocumentGetClientSize(document).height-28-6;(fe=t*(2/3))<10&&(fe=10)}F(),I()}function re(){var e;if(e=!we,o.style.display=e?"block":"none",se(),_e(),H(),we){var t=!Boolean(ve),n=!Boolean(ye);switch(Ce){case"category":t=!1;break;case"catalog":n=!1}f.setDisabled(!t),h.setDisabled(!n),h.setVisible(!0)}else f.setDisabled(!1),h.setDisabled(!1),h.setVisible(!1);if(we)switch(P(!1),L(!1),M(!1),Ce){case"category":P(!0);break;case"catalog":L(!0)}else U(),z(),F()}function le(){se(),_e(),H(),b.setVisible(Se)}function se(){var e;e=ce(),l.style.display=e?"block":"none"}function ce(){return!we&&!Se}function _e(){var e;e=ue(),r.style.display=e?"block":"none"}function ue(){return!we&&!Se}function de(e){var t,n,a,i=this;i.setVisible=function(e){var n=t.style;n.display=e?"inline-block":"none"},i.setDisabled=function(e){t.disabled=e;var n=t.style;n.opacity=e?.5:1},i.setLabel=function(e){t.value=e},i.setImageURL=function(e){a.src=e},i.setTooltip=function(e){t.title=e},i.onclick=function(){},ElementSetStyle(t=DocumentCreateElement("button"),"position:relative; width:24px; height:24px; vertical-align:top; padding:0px;"),t.onclick=B,e.appendChild(t),ElementSetStyle(a=DocumentCreateElement("img"),CSSTextGetInitialImageElement()),ElementAddStyle(a,"vertical-align:top; margin:0px auto; display:block; pointer-events:inherit;"),t.appendChild(a),ElementSetStyle(n=DocumentCreateElement("div"),"position:absolute; left:0px; top:0px; right:0px; bottom:0px; text-align:center;"),t.appendChild(n),t.onclick=function(e){i.onclick&&i.onclick(e)}}function pe(){window.removeEventListener?window.removeEventListener("resize",I,!1):window.detachEvent&&window.detachEvent("onresize",I),window.addEventListener?window.addEventListener("resize",I,!1):window.attachEvent&&window.attachEvent("onresize",I)}k.setSite=function(e,t){Ie!=e&&(g.value=Ie=e,T(t))},k.setCatalog=function(e,t){N(!1),Ce="catalog",re(),p=e,A.clearItem(),J(t)},k.setThread=function(e){j(!1),m=e,_.nodeValue=e,u.src=e},k.clearThread=function(){j(!0),m="about:blank",u.src=m,_.nodeValue=""},k.onreload=function(){},k.enableCompactMode=function(e){var t=we!=e;we=e,t&&(re(),I())},k.enableSidebarMode=function(e){var t=Se!=e;Se=e,t&&le()},k.setURL=function(e){if(e){var t=e.match(new RegExp("(http|https)://([^/]+)","i"));if(t){var n,a=t[2];a.match(new RegExp("open2ch[.]net$","i"))?n="open2ch":a.match(new RegExp("shitaraba[.]net$","i"))?n="shitaraba":a.match(new RegExp("(5ch[.]net)$","i"))?n="5ch":a.match(new RegExp("(bbspink[.]com|2ch[.]net)$","i"))?n="2ch":a.match(new RegExp("2chan[.]net$","i"))?n="2chan":a.match(new RegExp("4chan[.]org","i"))?n="4chan":a.match(new RegExp("8ch[.]net|8chan.co","i"))?n="8chan":a.match(new RegExp("2ch[.]hk","i"))?n="2ch.hk":a.match(new RegExp("reddit[.]com$","i"))&&(n="reddit"),n?(k.setSite(n),k.setCatalog(e)):(k.setSite(""),g.focus())}}},k.initialize=function(e){var m={result:!1};WindowIsChild(window)?e(m):document.body?function(e){var t=new PageExpandProject;t.loadLocalStorage((function(n){page_expand_project=t,(project=new Project).importObjectForBackground(page_expand_project.getProject()),e(n)}))}((function(T){new InternationalMessage(page_expand_project.getLanguage()),execute_queue.setOccupancyTime(project.getExecuteQueueOccupancyTime()),execute_queue.setSleepTime(project.getExecuteQueueSleepTime()),function(){var e="data:image/gif;base64,R0lGODlhEAAQAIAAAAAAAP///yH5BAUUAAEALAAAAAAQABAAAAIrjI9pwBDt4Jru2Vsjna919lXKeEimh6UZp1lrCEvkfILyirOby3q1OEsUAAA7",m="data:image/gif;base64,R0lGODlhEAAQAIAAAP///wAAACH5BAUUAAAALAAAAAAQABAAAAIlhI+pyxD/UJDRQDdtptcymFUJGC5k2YzpuJlS02JmjG3dfK9MAQA7";DomNodeRemoveChildren(document.head),DomNodeRemoveChildren(document.body);var T=document.body;ElementSetStyle(T,'font-family:"Meiryo","sans-serif"; margin:0px; padding:0px; background-color:#ccc; overflow:hidden; user-select:none; -moz-user-select:none; -webkit-user-select:none;'),document.title="BBS Board";var P,L=DocumentCreateElement("div");T.appendChild(L),P=L.attachShadow?L.attachShadow({mode:"closed"}):L;var M,U=DocumentCreateElement("div");ElementSetStyle(U,"position:absolute; top:0px; left:0px; right:0px; height:28px; color:#fff; background:#000;"),P.appendChild(U),ElementSetStyle(ue=DocumentCreateElement("div"),"position:absolute; right:4px; top:2px;"),U.appendChild(ue),(b=new de(ue)).setImageURL(m),b.setTooltip("reload"),b.onclick=W,ElementSetStyle(_e=DocumentCreateElement("div"),"position:absolute; left:4px; top:2px;"),U.appendChild(_e),(g=DocumentCreateElement("select")).size=1,g.onchange=D,ElementSetStyle(g,"height:24px; box-sizing:border-box; vertical-align:top;"),_e.appendChild(g),ElementSetStyle(M=DocumentCreateElement("option"),"color:#aaa;"),ElementSetTextContent(M,"Select the site ..."),M.value="",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"2ch.net"),M.value="2ch",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"5ch.net"),M.value="5ch",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"5ch.net (PC)"),M.value="5ch_pc",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"open2ch.net"),M.value="open2ch",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"2chan.net"),M.value="2chan",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"4chan.org"),M.value="4chan",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"8ch.net"),M.value="8chan",g.appendChild(M),ElementSetTextContent(M=DocumentCreateElement("option"),"2ch.hk"),M.value="2ch.hk",g.appendChild(M),(f=new de(_e)).setImageURL("data:image/gif;base64,R0lGODlhEAAQAIAAAP///wAAACH5BAUUAAAALAAAAAAQABAAAAInRH6gy4bR4oORzWofbnRdy3nc1HWKaYhghoSb62mrmrJyvZWv0wIFADs="),f.setTooltip("category"),f.onclick=B,(h=new de(_e)).setImageURL("data:image/gif;base64,R0lGODlhEAAQAIAAAP///wAAACH5BAUUAAAALAAAAAAQABAAAAIhhI9pwe2+mEIh1rns27iDDV6NJ0pdGULelD4W+Z5auyoFADs="),h.setTooltip("catalog"),h.onclick=G,(x=new de(_e)).setImageURL("data:image/gif;base64,R0lGODlhEAAQAIAAAP///wAAACH5BAUUAAAALAAAAAAQABAAAAIojI9pwO2+VACITvmsTft6/kRKp2XmYmai17Fp+G2a+zZiy6I1I/VGAQA7"),x.setTooltip("thread"),x.onclick=V,ElementSetStyle(t=DocumentCreateElement("div"),"position:absolute; top:28px; left:0px; right:0px; bottom:0px;"),P.appendChild(t),ElementSetStyle(o=DocumentCreateElement("div"),"position:absolute; width:2px; top:0px; bottom:0px; border-left:2px #fff solid; border-right:2px #666 solid; cursor:col-resize;"),t.appendChild(o),ElementSetStyle(r=DocumentCreateElement("div"),"position:absolute; width:2px; top:0px; bottom:0px; border-left:2px #fff solid; border-right:2px #666 solid; cursor:col-resize;"),t.appendChild(r),ElementSetStyle(l=DocumentCreateElement("div"),"position:absolute; height:2px; bottom:0px; border-top:2px #fff solid; border-bottom:2px #666 solid; cursor:row-resize;"),t.appendChild(l),function(){function e(e){var t,n,a=!1,i=e.splitter;i.onmousedown=function(i){t&&t.release(),input_mouse.setMouseEvent(i),n=input_mouse.getPositionClient(),(t=task_container.createTask()).setDestructorFunc((function(){a=!1,t=null})),t.setExecuteFunc((function(){if(!a){var i=input_mouse.getPositionClient(),o=i.x-n.x,r=i.y-n.y;Math.sqrt(o*o+r*r)>=3&&(a=!0,d.style.display="block",e.ondragstart())}if(a&&(e.ondrag(),I()),!input_mouse.getButtonLeft())return a&&(d.style.display="none",e.ondragend()),void t.release()}))},i.onclick=function(t){a||e.onclick(t)}}e({splitter:o,onclick:ee,ondragstart:function(){ae(!0)},ondrag:function(){var e=input_mouse.getPositionClient();me=e.x-3},ondragend:function(){me<10&&(me=10,ae(!1))}}),e({splitter:r,onclick:te,ondragstart:function(){oe(!1),ie(!0)},ondrag:function(){var e=DocumentGetClientSize(document),t=input_mouse.getPositionClient();ge=e.width-t.x-3},ondragend:function(){ge<10&&(ge=10,ie(!1))}}),e({splitter:l,onclick:ne,ondragstart:function(){ie(!1),oe(!0)},ondrag:function(){var e=DocumentGetClientSize(document),t=input_mouse.getPositionClient();fe=e.height-t.y-3},ondragend:function(){fe<10&&(fe=10,oe(!1))}})}(),ElementSetStyle(n=DocumentCreateElement("div"),"position:absolute; left:0px; top:0px; bottom:0px; overflow:hidden;"),t.appendChild(n),ElementSetStyle(a=DocumentCreateElement("div"),"position:absolute; top:0px; overflow:hidden;"),t.appendChild(a),ElementSetStyle(i=DocumentCreateElement("div"),"position:absolute; top:0px; overflow:hidden;"),t.appendChild(i);var z=DocumentCreateElement("div");ElementSetStyle(z,"position:absolute; left:0px; top:0px; right:0px; height:28px; background:#444;"),n.appendChild(z),ElementSetStyle(_e=DocumentCreateElement("div"),"position:absolute; left:8px; top:2px; right:56px;"),z.appendChild(_e),ElementSetStyle(ue=DocumentCreateElement("div"),"position:absolute; right:4px; top:2px;"),z.appendChild(ue);var F=DocumentCreateElement("div");ElementSetStyle(F,"color:#fff; font-size:14px; padding-top:1px; width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"),_e.appendChild(F),(s=document.createTextNode("")).nodeValue="Category Panel",F.appendChild(s),(v=new de(ue)).setImageURL(e),v.setTooltip("layout"),v.onclick=q,(y=new de(ue)).setImageURL(m),y.setTooltip("reload"),y.onclick=Z;var H=DocumentCreateElement("div");ElementSetStyle(H,"position:absolute; left:0px; top:28px; right:0px; bottom:0px;"),n.appendChild(H),(C=new BbsBoardCategory(H)).onselect=function(e){if(1!=e.button){var t=C.getSelectedItem();return N(!1),Ce="catalog",re(),p=t.getURL(),A.clearItem(),J(),!1}},Y();var $=DocumentCreateElement("div");ElementSetStyle($,"position:absolute; left:0px; top:0px; right:0px; height:28px; background:#444;"),a.appendChild($),ElementSetStyle(_e=DocumentCreateElement("div"),"position:absolute; left:8px; top:2px; right:56px;"),$.appendChild(_e),ElementSetStyle(ue=DocumentCreateElement("div"),"position:absolute; right:4px; top:2px;"),$.appendChild(ue);var se=DocumentCreateElement("div");ElementSetStyle(se,"color:#fff; font-size:14px; padding-top:1px; width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"),_e.appendChild(se),(c=document.createTextNode("")).nodeValue="Catalog Panel",se.appendChild(c),(E=new de(ue)).setImageURL(e),E.setTooltip("layout"),E.onclick=Q,(w=new de(ue)).setImageURL(m),w.setTooltip("reload"),w.onclick=X;var ce=DocumentCreateElement("div");ElementSetStyle(ce,"position:absolute; left:0px; top:28px; right:0px; bottom:0px;"),a.appendChild(ce),(A=new BbsBoardCatalog(ce)).onselect=function(e){if(1!=e.button&&(j(!1),O())){var t=A.getSelectedItem();return k.setThread(t.getURL()),!1}};var _e,ue,he=DocumentCreateElement("div");ElementSetStyle(he,"position:absolute; left:0px; top:0px; right:0px; height:28px; background:#444;"),i.appendChild(he),ElementSetStyle(_e=DocumentCreateElement("div"),"position:absolute; left:8px; top:2px; right:40px;"),he.appendChild(_e),ElementSetStyle(ue=DocumentCreateElement("div"),"position:absolute; right:4px; top:2px;"),he.appendChild(ue);var xe=DocumentCreateElement("div");ElementSetStyle(xe,"color:#fff; font-size:14px; padding-top:1px; width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"),_e.appendChild(xe),(_=document.createTextNode("")).nodeValue="Thread Panel",xe.appendChild(_),(S=new de(ue)).setImageURL(m),S.setTooltip("reload"),S.onclick=K;var be=DocumentCreateElement("div");ElementSetStyle(be,"position:absolute; left:0px; top:28px; right:0px; bottom:0px;"),i.appendChild(be),(u=DocumentCreateElement("iframe")).name="thread",u.frameBorder="0",u.allowFullscreen=!0,ElementSetStyle(u,"position:absolute; display:block; background:#fff; left:0px; top:0px; width:100%; height:100%;"),be.appendChild(u),ElementSetStyle(d=DocumentCreateElement("div"),"position:absolute; display:none; background:#000; opacity:0.2; left:0px; top:0px; right:0px; bottom:0px;"),be.appendChild(d),re(),le(),R(!0),N(!0),j(!0),pe(),me=200,ge=0,fe=0,I()}(),m.result=!0,e(m)})):e(m)};var me=0,ge=0,fe=0,he=!1,xe=!1,be=!1,ve=!1,ye=!1,Ee=!1,we=!1,Se=!1,Ce="",Ae=0,ke=0,Ie="",De=0,Te=0}function BbsBoardCategory(e){var t,n,a,i,o,r=this;r.createFolder=function(e){var n,a,l,s,c,_,u,d,p,m=new Object;function g(){m.setOpen(!d)}return m.createItem=function(e){var t,n,a,i=new Object;function o(e){if(_selected_item=i,r.onselect)return r.onselect(e)}return i.setLabel=function(e){n.nodeValue=e},i.setTooltip=function(e){t.title=e},i.getURL=function(){return t.href},i.setURL=function(e){t.href=e},p[e]=i,ElementSetStyle(t=DocumentCreateElement("a"),""),t.className="category_item",t.title=e,t.target="_blank",t.onclick=o,u.appendChild(t),n=document.createTextNode(""),t.appendChild(n),(a=DocumentCreateElement("div")).className="category_item_separator",u.appendChild(a),ElementSetTextContent(a,"/"),i},m.setLabel=function(e){c.nodeValue=e},m.setOpen=function(e){var t;(d=Boolean(e))?(l.nodeValue="-",(t=u.style).height="auto",t.paddingBottom="10px"):(l.nodeValue="+",(t=u.style).height="0px",t.paddingBottom="0px")},o[e]=m,p=new Object,ElementSetStyle(n=DocumentCreateElement("div"),"position:relative; margin:2px; margin-bottom:2px; padding:1px;"),t.appendChild(n),(_=DocumentCreateElement("div")).className="category_folder",_.onclick=g,n.appendChild(_),ElementSetStyle(a=DocumentCreateElement("div"),"display:inline-block; width:20px; text-align:center;"),_.appendChild(a),l=document.createTextNode(""),a.appendChild(l),ElementSetStyle(s=DocumentCreateElement("span"),""),_.appendChild(s),c=document.createTextNode(""),s.appendChild(c),ElementSetStyle(u=DocumentCreateElement("div"),"margin-left:10px; overflow:hidden; line-height:16px; font-size:14px;"),n.appendChild(u),m.setOpen(i),m},r.getFolder=function(e){return o[e]||null},r.setLayoutMode=function(e){var t;switch(e){case"inline":(t=n.style).display="inline-block",t.width="auto",t.whiteSpace="normal",t.overflow="visible",t.wordBreak="break-all",t.wordWrap="break-word",(t=a.style).display="inline";break;case"block":(t=n.style).display="block",t.width="100%",t.whiteSpace="nowrap",t.overflow="hidden",t.wordBreak="normal",t.wordWrap="normal",(t=a.style).display="none"}},r.setOpenMode=function(e){var t;for(t in i=e,o)o[t].setOpen(e)},r.clear=function(){o=new Object,DomNodeRemoveChildren(t)},r.getSelectedItem=function(){return _selected_item},r.onselect=function(e){},function(){o=new Object,ElementSetStyle(t=DocumentCreateElement("div"),"position:absolute; left:0px; top:0px; right:0px; bottom:0px; overflow-y:scroll; background:#fff;"),e.appendChild(t);var i=DocumentCreateElement("style");e.appendChild(i);var l=ElementGetStyleSheet(i);CSSStyleSheetInsertRule(l,".category_folder","margin-left:0px; font-size:14px; color:#000; background:#e8e8e8; border-radius:4px; cursor:pointer; padding:2px; user-select:none; -moz-user-select:none; -webkit-user-select:none;",0),CSSStyleSheetInsertRule(l,".category_folder:hover","color:#fff; background:#4281F4;",1),CSSStyleSheetInsertRule(l,".category_item","text-overflow:ellipsis;",2),CSSStyleSheetInsertRule(l,".category_item:hover","background-color:rgba(192,255,160,0.3);",3),CSSStyleSheetInsertRule(l,".category_item_separator","font-size:14px; color:ccc; margin-left:2px; margin-right:2px;",4);var s=CSSStyleSheetGetCSSRuleList(l);n=s[2],a=s[4],r.setLayoutMode("block")}()}function BbsBoardCatalog(e){var t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f,h,x,b,v,y=this;function E(e){var t=e.getData(),n=e.renderer;if(n.layout_mode!=l)if(DomNodeRemoveChildren(e.element),n.update_list=new Array,n.layout_mode=l,"detail"===l){var a=e.element,i=_.length;for(u=0;u<i;u++){var o=_[u],r=DocumentCreateElement("div");r.className="catalog_column_"+u,r.style.cssText="display:inline-block; vertical-align:top;",a.appendChild(r);var s=DocumentCreateElement("div");s.style.cssText="left:0px; right:0px; top:0px; bottom:0px; padding:4px; padding-top:1px; padding-bottom:1px; border-bottom:1px #eee solid; border-right:1px #ddd solid; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;",s.style.textAlign=o.text_align,r.appendChild(s),(c=new Object).item=e,c.data=t,c.layout_mode=l,c.parent=s,c.onupdate=null,c.column=o,c.key=o.key,y.onUpdateCell(c),c.onupdate&&n.update_list.push(c.onupdate)}}else{var c;(c=new Object).item=e,c.data=t,c.layout_mode=l,c.parent=e.element,c.onupdate=null,y.onUpdateItem(c),c.onupdate&&n.update_list.push(c.onupdate)}var u,d=n.update_list;i=d.length;for(u=0;u<i;u++)d[u]()}function w(e,t){var n;return n=isNaN(e)||isNaN(t)?String(e).localeCompare(t):Number(e)-Number(t),p?-1*n:n}y.createColumn=function(e){var n=s[e];return n||function(e){var n,i,o,r=new Object;return r.setLabel=function(e){o.nodeValue=e},r.setTextAlign=function(e){r.text_align=e},r.setWidthMin=function(e){r.width_min=e},r.setWidthMax=function(e){r.width_max=e},r.setWidth=function(e){r.width=e,r.width_auto=!1},r.setSortIcon=function(e){var t=i.style;switch(e){case"up":t.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAOAgMAAABvOLUFAAAAA3NCSVQICAjb4U/gAAAACVBMVEX////o6Ojo6OgQrkfNAAAAA3RSTlMARP9DYaFSAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADEyLzMwLzE1azlJyQAAACF0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgNC4w6iYndQAAAB5JREFUeJxj4GBgACItMFrVAEIQEOoAQqIMIMQCQgBf3AQV/YKvewAAAABJRU5ErkJggg==)";break;case"down":t.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAOAgMAAABvOLUFAAAAA3NCSVQICAjb4U/gAAAACVBMVEX////o6Ojo6OgQrkfNAAAAA3RSTlMARP9DYaFSAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADEyLzMwLzE1azlJyQAAACF0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgNC4w6iYndQAAAB5JREFUeJxjYGFgACJRMAp1ACEIWNUAQloMIMQBQgBM1AQV4OptKwAAAABJRU5ErkJggg==)";break;default:t.backgroundImage="none"}},function(){r.key=e,s[e]=r;var l=_.length;_.push(r),r.text_align="left",r.width=0,r.width_min=0,r.width_max=65535,r.width_auto=!0,r.index=l,ElementSetStyle(n=DocumentCreateElement("div"),"position:relative; display:inline-block; vertical-align:top; height:24px;"),n.className="catalog_column_"+l,n.draggable=!0,n.ondragstart=function(t){if(!!S||"center"!=h)return!1;t.dataTransfer.setData("text",e)},t.appendChild(n),(i=DocumentCreateElement("div")).className="catalog_column",n.appendChild(i),o=document.createTextNode(""),i.appendChild(o),CSSStyleSheetGetCSSRuleList(a)[l]||CSSStyleSheetInsertRule(a,".catalog_column_"+l,"width:200px;",l),r.element=n,r.setSortIcon("")}(),r}(e)},y.createItem=function(e){var t=c[e];return t||function(e){var t,a=new Object;function i(e){e=a.index;var t,n=u[e].data[d],i=u.length;if(e+1>=i)t=!0;else if(0>w(n,u[e+1].data[d]))t=!0;else if(e<=0)t=!1;else{if(!(0>w(u[e-1].data[d],n)))return;t=!1}if(t){for(var r=e,l=1;r>=l&&!(0>w(u[r-1].data[d],n));)r--;e!=r&&o(r)}else{for(r=e+1,l=i;r<l&&!(0>w(n,u[r].data[d]));)r++;e!=r&&o(r)}}function o(e){var t,i=e,o=a.index,r=u.length;if(u[i]&&(t=u[i].element),i<o){u.splice(o,1);var l=u.slice(0,i),s=u.slice(i);for(u=l.concat([a],s);i<r;i++)u[i].index=i}else{(l=u.slice(0,i)).splice(o,1);s=u.slice(i);for(u=l.concat([a],s);o<r;o++)u[o].index=o}var c=a.element;n.insertBefore(c,t)}function r(e){if(f=a,y.onselect)return y.onselect(e)}return a.getData=function(){return a.data},a.getURL=function(){return t.href},a.setURL=function(e){t.href=e},a.commit=function(){i(),E(a)},function(){a.key=e,c[e]=a,a.renderer=new Object;var i=u.length;u.push(a),a.index=i,a.data=new Object,(t=DocumentCreateElement("a")).className="catalog_item",t.target="_blank",t.onclick=r,n.appendChild(t),a.element=t}(),a}(e)},y.update=function(){var e=g+=1,t=0,n=function(){if(e==g){var a=u[t];t++,a&&(E(a),execute_queue.attachFirst(n,null))}};execute_queue.attachLast(n,null)},y.commit=function(){y.sort(),y.update()},y.getItemList=function(){return u.slice(0)},y.resize=function(){switch(l){case"detail":var e,o,r=ElementGetBoundingClientRect(t),s=CSSStyleSheetGetCSSRuleList(a),c=r.right-r.left,u=new Array;if(b=_.length){var d=c,p=0;for(e=0;e<b;e++){var g=_[e];for((x={index:e,auto:g.width_auto}).auto?(d-=g.width_min,x.value=x.min=g.width_min,x.max=g.width_max,p+=1):(d-=g.width,x.value=x.min=x.max=g.width),o=0;o<e&&!(u[o].max>x.max);o++);u.splice(o,0,x)}if(d>0)for(p&&(d/=p),e=0;e<b;e++){if((x=u[e]).auto){p-=1;var f=x.min+d-x.max;f>0?(p&&(d=(d*p+f)/p),x.value=x.max):x.value+=d}}var h=0;for(e=0;e<b;e++){var x;s[(x=u[e]).index].style.width=x.value+"px",h+=x.value}h<c&&(h=c),i.style.width=h+"px"}break;case"large_icon":d=(r=ElementGetBoundingClientRect(n)).right-r.left-1;d-=n.offsetWidth-(n.clientWidth+n.clientLeft),d-=4;var b=Math.floor(d/m.width),v=(d-m.width*b)/b;i.style.width=m.width+v-4+"px";default:i.style.width="audo"}},y.setLayoutMode=function(e){var a;switch(l=e){case"detail":(a=i.style).display="block",a.margin="0px",a.width="auto",a.height="auto",a.minHeight="0",a.whiteSpace="nowrap",a.border="hidden",(a=n.style).padding="0px",a.lineHeight="1.0";break;case"list":(a=i.style).display="block",a.margin="0px",a.marginBottom="2px",a.width="auto",a.height="auto",a.minHeight="0",a.whiteSpace="normal",a.border="1px solid #ddd",(a=n.style).padding="4px",a.lineHeight="13px";break;case"large_icon":(a=i.style).display="inline-block",a.margin="0px",a.marginRight="2px",a.marginBottom="2px",a.width=m.width+"px",a.height="auto",a.minHeight=m.height+"px",a.whiteSpace="normal",a.border="1px solid #ddd",(a=n.style).padding="0px",a.paddingLeft="4px",a.paddingTop="4px",a.lineHeight="13px";break;case"small_icon":(a=i.style).display="inline",a.margin="0px",a.marginRight="8px",a.width="auto",a.height="auto",a.minHeight="0",a.whiteSpace="normal",a.border="hidden",(a=n.style).padding="4px",a.lineHeight="14px"}if("detail"===e)(a=t.style).display="block",(a=n.style).top="24px";else(a=t.style).display="none",(a=n.style).top="0px";if("small_icon"===e)StyleDeclarationRemoveProperty(o.style,"background-color"),StyleDeclarationRemoveProperty(r.style,"background-color");else StyleDeclarationSetProperty(o.style,"background-color","#fafafa"),StyleDeclarationSetProperty(r.style,"background-color","#ffffff");y.resize(),y.update()},y.setTargetMode=function(e){0},y.onselect=function(e){},y.onUpdateCell=function(e){},y.onUpdateItem=function(e){},y.sort=function(e,t){var a,i,o,r;for(void 0!==e&&(d=e),void 0!==t&&(p=t),o=_.length,a=0;a<o;a++)_[a].setSortIcon("");for(s[d].setSortIcon(p?"down":"up"),a=(o=u.length)-1;a>0;a--)for(i=a-1;i>=0;i--)if(0<w(u[i].data[d],u[a].data[d])){var l=u[a];u[a]=u[i],u[i]=l}o&&((c=u[o-1]).index=o-1,n.lastChild!=c.element&&n.appendChild(c.element),r=c.element);for(a=o-2;a>=0;a--){var c;(c=u[a]).index=a,r.previousSibling!=c.element&&n.insertBefore(c.element,r),r=c.element}},y.moveColumn=function(e,n){if(d=s[e]){var a=d.index;a>n&&(n+=1);var i=_[a];_.splice(a,1),n<0?_.unshift(i):_.splice(n,0,i);var o=new Array,r=t.childNodes,l=r.length;for(c=0;c<l;c++)o.push(r[c]);var c;i=o[a];for(o.splice(a,1),n<0?o.unshift(i):o.splice(n,0,i),c=0;c<l;c++){var d;(d=_[c]).index=c,t.appendChild(o[c]),o[c].className="catalog_column_"+c}l=u.length;for(c=0;c<l;c++)u[c].renderer.layout_mode="";y.resize(),y.update()}},y.clear=function(){y.clearColumn(),y.clearItem()},y.clearColumn=function(){s=new Object,_=new Array,DomNodeRemoveChildren(t)},y.clearItem=function(){g+=1,c=new Object,u=new Array,DomNodeRemoveChildren(n)},y.setBlockSize=function(e,t){m.width=e,m.height=t},y.getSelectedItem=function(){return f};var S=!1;!function(){var l,d,f;s=new Object,c=new Object,_=new Array,u=new Array,m={width:100,height:100},g=0,ElementSetStyle(t=DocumentCreateElement("div"),"position:absolute; left:0px; top:0px; right:0px; white-space:nowrap; height:24px; overflow:hidden; background:#888;"),e.appendChild(t),t.onmousemove=function(e){var n,a=function(){var e,n=new Array,a=t.childNodes,i=a.length;for(e=0;e<i;e++)n.push(ElementGetBoundingClientRect(a[e]));return n}(),i=e.clientX,o=(e.clientY,a.length);for(b=o-1,n=0;n<o;n++)if(i<(r=a[n]).right){b=n;break}for(x=o-1,n=0;n<o;n++)if(i<(r=a[n]).right-6){x=n-1;break}for(v=o-1,n=0;n<o;n++)if(i<(r=a[n]).left+.5*(r.right-r.left)){v=n-1;break}for(h="center",n=0;n<o;n++){var r=a[n];if(n<=0);else if(i<r.left+6){h="border";break}if(i<r.right-6)break}n>=o&&(h="border");var l="border"==h||!!S;t.style.cursor=l?"col-resize":"pointer"},t.onclick=function(e){if("center"==h){var t=_[b];t&&y.sort(t.key,!p)}},t.ondblclick=function(e){if("border"==h){var n=_[x];if(n){var a,i=10,o=u.length;for(a=0;a<o;a++)try{var r=u[a];if("detail"==r.renderer.layout_mode){var l=r.element.childNodes[x].cloneNode(!0);l.className="",l.style.cssText="position:absolute; left:0px; top:0px;",t.appendChild(l);var s=ElementGetBoundingClientRect(l);t.removeChild(l);var c=s.right-s.left;i<c&&(i=c)}}catch(e){}n.setWidth(i),y.resize()}}},t.ondragover=function(e){return t.onmousemove(e),!1},t.ondrop=function(e){try{var t=e.dataTransfer.getData("text");y.moveColumn(t,v)}catch(e){}return!1},f=null,t.onmousedown=function(e){input_mouse.setMouseEvent(e),l&&l.release(),t.onmousemove(e),"border"==h&&(d=input_mouse.getPositionClient(),(f=_[x])&&((l=task_container.createTask()).setDestructorFunc((function(){S=!1,f=null,l=null})),l.setExecuteFunc((function(){if(input_mouse.getButtonLeft()){if(!S){var e=(n=input_mouse.getPositionClient()).x-d.x,t=n.y-d.y;Math.sqrt(e*e+t*t)>=3&&(S=!0)}if(S){var n,a=ElementGetBoundingClientRect(f.element),i=(n=input_mouse.getPositionClient()).x-a.left;i<10&&(i=10),f.setWidth(i),y.resize()}}else l.release()}))))},ElementSetStyle(n=DocumentCreateElement("div"),"position:absolute; left:0px; top:32px; right:0px; bottom:0px; font-size:12px; line-height:1.0; overflow-x:auto; overflow-y:scroll; background:#fff;"),e.appendChild(n);var E=function(){var e=DocumentCreateElement("div");ElementSetStyle(e,"position:absolute; left:0px; top:0px; width:100px; overflow-y:scroll;"),document.body.appendChild(e);var t=e.offsetWidth-(e.clientWidth+e.clientLeft);return DomNodeRemove(e),t}();t.style.right=E+"px",n.onscroll=function(e){t.scrollLeft=n.scrollLeft};var w=DocumentCreateElement("style");e.appendChild(w);var C=DocumentCreateElement("style");e.appendChild(C);var A=ElementGetStyleSheet(w);CSSStyleSheetInsertRule(A,".catalog_item","margin:2px; vertical-align:top; text-decoration:none; border-radius:4px; user-select:none; -moz-user-select:none; -webkit-user-select:none;",0),CSSStyleSheetInsertRule(A,".catalog_item:nth-child(2n)","",1),CSSStyleSheetInsertRule(A,".catalog_item:nth-child(2n+1)","",2),CSSStyleSheetInsertRule(A,".catalog_item:hover","background-color:rgba(192,255,160,0.3);",3),CSSStyleSheetInsertRule(A,".catalog_column","font-size:14px; background-color:#646464; color:#fff; border-right:1px #888 solid; border-bottom:1px #888 solid; position:absolute; top:0px; bottom:0px; left:0px; right:0px; overflow:hidden; padding-left:4px; padding-top:2px; padding-right:10px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; text-align:center; background-repeat:no-repeat; background-position:center right; user-select:none; -moz-user-select:none; -webkit-user-select:none;",4),CSSStyleSheetInsertRule(A,".catalog_column:hover","background-color:#4281F4;",5);var k=CSSStyleSheetGetCSSRuleList(A);i=k[0],o=k[1],r=k[2],k[3],a=ElementGetStyleSheet(C),y.setLayoutMode("detail")}()}function DomNodeAnalyzeRoot(e){var t,n,a,i,o=0,r=0,l=new Object,s=e.childNodes;function c(){r=0,execute_queue.attachFirstForInsertDomNode(_,null)}function _(){for(;e;){if(s)for(;s[o];)if(n={node:s[o]},a=(i=l).p,n.p=a,n.n=i,a.n=n,i.p=n,o++,++r>100)return void c();switch(e.nodeType){case 1:execute_queue.attachForAnalyzeElement(DomNodeAnalyzePhaseAnalyzeElement,e);break;case 3:DomNodeAnalyzePhaseAnalyzeTextNode(e)}if(window.addEventListener||DomNodeSetInserted(e),n=l.n,a=n.p,i=n.n,a.n=i,i.p=a,(e=n.node)&&(o=0,s=e.childNodes,(t=analyze_work_dictionary.getAnalyzeWork(e))&&t.a_inv&&(s=null)),++r>100)return void c()}}l.p=l,l.n=l,(t=analyze_work_dictionary.getAnalyzeWork(e))&&t.a_inv||_()}function DomNodeAnalyzePhaseAnalyzeElement(e){if(!analyze_work_dictionary.verifyGuest(e)&&!e.isContentEditable){if(analyze_work_dictionary.verifyClone(e)){var t=new DocumentReviseScroll;return t.executeRemoveElementBefore(e),DomNodeRemove(e),void t.executeRemoveElementAfter(e)}var n=analyze_work_dictionary.getAnalyzeWork(e);if(n||(n=AnalyzeWorkCreate(e)),!AnalyzeWorkGetInitializedObserverElement(n))if("A"==e.tagName){AnalyzeWorkObserveElement(n);var a=document_observer_modify_node.createElement();AnalyzeWorkSetObserverModifyAnchor(n,a),a.setElement(e,"href"),a.setFunction((function(){AnalyzeWorkAddModifyCount(n);var t=AnalyzeWorkGetEventDispatcher(n);t&&(t.dispatchEvent("anchor_href_change",null),t.dispatchEvent("release",null)),AnalyzeWorkClearAnalyzedReplacementToAnchor(n),AnalyzeWorkClearAnalyzedReplacementToLink(n),AnalyzeWorkClearAnalyzedExpandShortUrl(n),AnalyzeWorkClearAnalyzedExpandInlineText(n),AnalyzeWorkClearAnalyzedExpandThumbnailImage(n),AnalyzeWorkClearAnalyzedExpandPopupImage(n),AnalyzeWorkClearAnalyzedExpandInlineSound(n),AnalyzeWorkClearAnalyzedExpandInlineVideo(n),AnalyzeWorkClearAnalyzedExpandInlineIframe(n),AnalyzeWorkClearExpandUrl(n),AnalyzeWorkClearExpandContentType(n),DomNodeAnalyzePhaseAnalyzeElement(e)})),AnalyzeWorkGetEventDispatcher(n).createEventHandler("destructor").setFunction((function(){a&&(a.release(),a=null,AnalyzeWorkClearObserverModifyAnchor(n))})),AnalyzeWorkSetAnchorElement(n,e)}else"IFRAME"==e.tagName&&AnalyzeWorkObserveElement(n);var i={modify:AnalyzeWorkGetModifyCount(n),work:n};ElementAnalyzeAddressCollection(i),AnalyzeWorkGetAnalyzedExpandIframeContent(n)||(AnalyzeWorkSetAnalyzedExpandIframeContent(n),execute_queue.attachForExpandElement(ElementAnalyzePhaseExpandIframeContent,i)),project.getEnableExpandBbs()&&(expand_bbs.initialized?expand_bbs.enable&&execute_queue.attachForExpandBbs(ElementAnalyzeBbs,i):expand_bbs.node_queue.push(i)),project.getEnableReplacementToAnchor()?execute_queue.attachForExpandElement(ElementAnalyzeReplacementToAnchor,i):ElementAnalyzePhaseExpandShortUrl(i),project.getEnableReplacementToElement()?execute_queue.attachForExpandElement(ElementAnalyzeReplacementToElement,i):ElementAnalyzePhasePopupReducedImage(i)}}function DomNodeAnalyzePhaseAnalyzeTextNode(e){var t=analyze_work_dictionary.getAnalyzeWork(e);t||(t=AnalyzeWorkCreate(e));var n={modify:AnalyzeWorkGetModifyCount(t),work:t};project.getEnableReplacementToText()?execute_queue.attachForAnalyzeTextNode(ElementAnalyzeReplacementToText,n):ElementAnalyzePhaseMakeLinkToText(n)}function ElementAnalyzePhaseExpandShortUrl(e){AnalyzeWorkEqualModifyCount(e.work,e.modify)&&(project.getEnableExpandShortUrl()?execute_queue.attachForExpandElement(ElementAnalyzeExpandShortUrl,e):ElementAnalyzePhaseReplacementToLink(e))}function ElementAnalyzePhaseReplacementToAnchor(e){AnalyzeWorkEqualModifyCount(e.work,e.modify)&&(project.getEnableReplacementToAnchor()?execute_queue.attachForExpandElement(ElementAnalyzeReplacementToAnchor,e):ElementAnalyzePhaseReplacementToLink(e))}function ElementAnalyzePhaseReplacementToLink(e){AnalyzeWorkEqualModifyCount(e.work,e.modify)&&(project.getEnableReplacementToLink()?execute_queue.attachForExpandElement(ElementAnalyzeReplacementToLink,e):execute_queue.attachForExpandElement(ElementAnalyzePhaseExpand,e))}function ElementAnalyzePhaseMakeLinkToText(e){AnalyzeWorkEqualModifyCount(e.work,e.modify)&&project.getEnableMakeLinkToText()&&execute_queue.attachForAnalyzeTextNode(ElementAnalyzeMakeLinkToText,e)}function ElementAnalyzePhaseExpand(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=AnalyzeWorkGetAnchorElement(t);if(a&&"A"==a.tagName&&DomNodeGetAttachedDocument(n)){var i=ElementMatchesSelector(n,"head *,script *,style *");if(void 0===i)for(var o=n,r={HEAD:1,SCRIPT:1,STYLE:1};o;){if(r[o.tagName])return;o=o.parentNode}else if(i)return;AnalyzeWorkGetExpandUrl(t)||AnalyzeWorkSetExpandUrl(t,a.href),project.getEnableExpandText()&&(AnalyzeWorkGetAnalyzedExpandInlineText(t)||(AnalyzeWorkSetAnalyzedExpandInlineText(t),execute_queue.attachForExpandElement(ElementExpandInlineText,e))),project.getEnableExpandImage()&&(AnalyzeWorkGetAnalyzedExpandThumbnailImage(t)||(AnalyzeWorkSetAnalyzedExpandThumbnailImage(t),project.getEnableThumbnailImage()&&execute_queue.attachForExpandElement(ElementExpandThumbnailImage,e)),AnalyzeWorkGetAnalyzedExpandPopupImage(t)||(AnalyzeWorkSetAnalyzedExpandPopupImage(t),project.getEnablePopupImage()&&execute_queue.attachForExpandElement(ElementExpandPopupImage,e))),project.getEnableExpandSound()&&(AnalyzeWorkGetAnalyzedExpandInlineSound(t)||(AnalyzeWorkSetAnalyzedExpandInlineSound(t),execute_queue.attachForExpandElement(ElementExpandInlineSound,e))),project.getEnableExpandVideo()&&(AnalyzeWorkGetAnalyzedExpandInlineVideo(t)||(AnalyzeWorkSetAnalyzedExpandInlineVideo(t),execute_queue.attachForExpandElement(ElementExpandInlineVideo,e))),project.getEnableExpandIframe()&&(AnalyzeWorkGetAnalyzedExpandInlineIframe(t)||(AnalyzeWorkSetAnalyzedExpandInlineIframe(t),execute_queue.attachForExpandElement(ElementExpandInlineIframe,e)))}}}function ElementAnalyzePhasePopupReducedImage(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){project.getEnablePopupReducedImage()&&execute_queue.attachForExpandElement(ElementAnalyzePopupReducedImage,e);AnalyzeWorkGetDomNode(t);AnalyzeWorkGetOverrodeAnchorElement(t)&&AnalyzeWorkGetAnchorElement(t)&&(project.getEnableReplacementToAnchor()?execute_queue.attachForExpandElement(ElementAnalyzeReplacementToAnchor,e):ElementAnalyzePhaseExpandShortUrl(e))}}function ElementAnalyzePhaseExpandIframeContent(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t);"IFRAME"==n.tagName&&DomNodeGetAttachedDocument(n)&&ElementExpandIframeContent(e)}}function ElementAnalyzeAddressCollection(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=n.tagName;if("IMG"==a)if(0==n.src.search(new RegExp("^(http|https)://")))project.getDisableSameThumbnailImage()&&n.src&&address_collection.addAddress("image",n.src),download_list_image.createItem().setURL(n.src);project.getDisableSameInlineSound()&&"AUDIO"==a&&n.src&&address_collection.addAddress("sound",n.src),project.getDisableSameInlineVideo()&&("EMBED"==a&&n.src&&address_collection.addAddress("video",n.src),"OBJECT"==a&&n.src&&address_collection.addAddress("video",n.src),"IFRAME"==a&&n.src&&address_collection.addAddress("video",n.src)),project.getDisableSameInlineIframe()&&"IFRAME"==a&&n.src&&address_collection.addAddress("iframe",n.src),((ElementGetComputedStyle(n,null)||{}).backgroundImage||"").replace(new RegExp("url[(]([^)]*?)[)]","ig"),(function(e,t){t=StringUrl_To_Absolute(t=StringLiteral_To_String(t)||t,WindowGetOwnerURL(window)),download_list_image.createItem().setURL(t)}))}}function ElementAnalyzeReplacementToElement(e){var t=e.work;AnalyzeWorkEqualModifyCount(t,e.modify)&&(DomNodeGetAttachedDocument(AnalyzeWorkGetDomNode(t))&&ElementReplacementToElement(e))}function ElementAnalyzeReplacementToText(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=n.parentNode;if(a&&DomNodeGetAttachedDocument(a)){var i=ElementMatchesSelector(a,"script *,style *,script,style");if(void 0===i)for(var o=n,r={SCRIPT:1,STYLE:1};o;){if(r[o.tagName])return;o=o.parentNode}else if(i)return;ElementReplacementToText(e)}}}function ElementAnalyzeReplacementToAnchor(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=AnalyzeWorkGetAnchorElement(t);if(a&&"A"==a.tagName&&DomNodeGetAttachedDocument(n)){var i=ElementMatchesSelector(n,"head *,script *,style *");if(void 0===i)for(var o=n,r={HEAD:1,SCRIPT:1,STYLE:1};o;){if(r[o.tagName])return;o=o.parentNode}else if(i)return;a.name&&!a.href||ElementReplacementToAnchor(e)}}}function ElementAnalyzeReplacementToLink(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=AnalyzeWorkGetAnchorElement(t);if(a&&"A"==a.tagName&&DomNodeGetAttachedDocument(n)){var i=ElementMatchesSelector(n,"head *,script *,style *");if(void 0===i)for(var o=n,r={HEAD:1,SCRIPT:1,STYLE:1};o;){if(r[o.tagName])return;o=o.parentNode}else if(i)return;a.href&&ElementReplacementToLink(e)}}}function ElementAnalyzeMakeLinkToText(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=n.parentNode;if(a&&DomNodeGetAttachedDocument(a)){var i=ElementMatchesSelector(a,"script *,style *,a *,textarea *,script,style,a,textarea");if(void 0===i)for(var o=n,r={SCRIPT:1,STYLE:1,A:1,TEXTAREA:1};o;){if(r[o.tagName])return;o=o.parentNode}else if(i)return;ElementMakeLinkToText(e)}}}function ElementAnalyzeExpandShortUrl(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t),a=AnalyzeWorkGetAnchorElement(t);if(a&&"A"==a.tagName&&DomNodeGetAttachedDocument(n)){var i=ElementMatchesSelector(n,"head *,script *,style *");if(void 0===i)for(var o=n,r={HEAD:1,SCRIPT:1,STYLE:1};o;){if(r[o.tagName])return;o=o.parentNode}else if(i)return;a.href&&ElementExpandShortUrl(e)}}}function ElementAnalyzePopupReducedImage(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t);"IMG"==n.tagName&&DomNodeGetAttachedDocument(n)&&ElementPopupReducedImage(e)}}function ElementAnalyzeBbs(e){var t=e.work;if(AnalyzeWorkEqualModifyCount(t,e.modify)){var n=AnalyzeWorkGetDomNode(t);if(DomNodeGetAttachedDocument(n)){var a=ElementMatchesSelector(n,"head *,script *,style *");if(void 0===a)for(var i=n,o={HEAD:1,SCRIPT:1,STYLE:1};i;){if(o[i.tagName])return;i=i.parentNode}else if(a)return;ElementExpandBbs(e)}}}function ElementReplacementToElement(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){var a=AnalyzeWorkGetDomNode(t),i=!1;if(!AnalyzeWorkGetAnalyzedReplacementToElement(t)){AnalyzeWorkSetAnalyzedReplacementToElement(t);var o={element:a};project.executeScriptReplacementToElement(o,(function(a){if(AnalyzeWorkEqualModifyCount(t,n)&&!i){if(i=!0,a.url){if(!AnalyzeWorkGetOverrodeAnchorElement(t)){var o=DocumentCreateElement("a");o.href=a.url,AnalyzeWorkSetAnchorElement(t,o),AnalyzeWorkSetOverrodeAnchorElement(t),AnalyzeWorkSetOverrodeUrl(t)}AnalyzeWorkObserveElement(t)}ElementAnalyzePhasePopupReducedImage(e)}}))}}}function ElementReplacementToText(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){var a=AnalyzeWorkGetDomNode(t),i=!1;AnalyzeWorkGetAnalyzedReplacementToText(t)||(AnalyzeWorkSetAnalyzedReplacementToText(t),project.executeScriptReplacementToText(a,(function(){AnalyzeWorkEqualModifyCount(t,n)&&(i||(i=!0,ElementAnalyzePhaseMakeLinkToText(e)))})))}}function ElementReplacementToAnchor(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){AnalyzeWorkGetDomNode(t);var a=AnalyzeWorkGetAnchorElement(t),i=!1;AnalyzeWorkGetAnalyzedReplacementToAnchor(t)||(AnalyzeWorkSetAnalyzedReplacementToAnchor(t),project.executeScriptReplacementToAnchor(a,t.event_dispatcher,(function(){AnalyzeWorkEqualModifyCount(t,n)&&(i||(i=!0,AnalyzeWorkGetAnalyzedExpandShortUrl(t)?ElementAnalyzePhaseReplacementToLink(e):ElementAnalyzePhaseExpandShortUrl(e)))})))}}function ElementReplacementToLink(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){AnalyzeWorkGetDomNode(t);var a=AnalyzeWorkGetAnchorElement(t),i=project.getReplacementToLink(a),o=!1;AnalyzeWorkGetAnalyzedReplacementToLink(t)||(AnalyzeWorkSetAnalyzedReplacementToLink(t),i.getResult((function(i){if(AnalyzeWorkEqualModifyCount(t,n)&&!o){o=!0;var r=i.getResult();if(i.getEnableReflectToAnchor()&&r.result){var l=AnalyzeWorkGetObserverModifyAnchor(t);l&&l.setBaseValue(r.url),a.href=r.url}if(r.result&&(r.url&&AnalyzeWorkSetExpandUrl(t,r.url),r.content_type))try{var s,c=r.content_type,_=c.length;for(s=0;s<_;s++)"string"==typeof c[s]&&AnalyzeWorkAddContentType(t,c[s])}catch(e){}execute_queue.attachForExpandElement(ElementAnalyzePhaseExpand,e)}})))}}function ElementMakeLinkToText(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){var a=AnalyzeWorkGetDomNode(t),i=!1;AnalyzeWorkGetAnalyzedMakeLinkToText(t)||(AnalyzeWorkSetAnalyzedMakeLinkToText(t),project.executeScriptMakeLinkToText(a,(function(){AnalyzeWorkEqualModifyCount(t,n)&&(i||(i=!0))})))}}function ElementExpandShortUrl(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){AnalyzeWorkGetDomNode(t);var a=AnalyzeWorkGetAnchorElement(t),i=!1;if(!AnalyzeWorkGetAnalyzedExpandShortUrl(t)){AnalyzeWorkSetAnalyzedExpandShortUrl(t);var o=a.href;if(o)if(project.checkExpandShortUrl(o)){var r=new Loader;r.onload=function(e){if(AnalyzeWorkEqualModifyCount(t,n)){var i=AnalyzeWorkGetObserverModifyAnchor(t);i&&i.setBaseValue(e),a.href=e,l(o!=e)}},r.onerror=function(){AnalyzeWorkEqualModifyCount(t,n)&&l(!1)},r.setURL(o),r.setSendData(null),r.loadFinalURL()}else l(!1);else l(!1)}}function l(a){AnalyzeWorkEqualModifyCount(t,n)&&(i||(i=!0,a?(AnalyzeWorkClearAnalyzedReplacementToAnchor(t),execute_queue.attachForExpandElement(ElementAnalyzePhaseReplacementToAnchor,e)):ElementAnalyzePhaseReplacementToLink(e)))}}function ElementExpandInlineText(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);i=project.fixURL_PassiveContent(i);var o=AnalyzeWorkGetContentType(t);AnalyzeWorkEqualModifyCount(t,n)&&project.executeScriptAllowInlineText(a,i,o,(function(e){if(AnalyzeWorkEqualModifyCount(t,n)&&e.result){var o=AnalyzeWorkGetEventDispatcher(t),r=null,l=null,s=null,c=i,_=null,u=null;if(project.getDisableSameInlineText()){if(address_collection.hasAddress("text",c))return c=null,void p();address_collection.addAddress("text",c)}(_=o.createEventHandler("release")).setFunction(p),(r=new Loader).onload=function(e){(l=DocumentCreateElement("textarea")).value=e,ElementSetStyle(l,project.getStyleSheetExpandTextInline(c)),s=AnalyzeWorkCreate(l);var n=new AnalyzeWorkDictionaryAttachOptions;n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(s,n),(u=new DomNodeObserverRemoveFromDocument(l)).setFunction(d),project.executeScriptInsertInlineText(a,l,t.event_dispatcher,(function(){}))},r.onerror=function(){},r.setMethod("GET"),r.setURL(c),r.loadText()}function d(e){o.dispatchEvent("release",null)}function p(e){r&&(r.onload=null,r.onerror=null,r=null),c&&(address_collection.removeAddress("text",c),c=null),_&&(_.release(),_=null),u&&(u.release(),u=null),s&&(analyze_work_dictionary.removeAnalyzeWork(s),s=null),l&&(DomNodeRemove(l),l=null)}}))}function ElementExpandThumbnailImage(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);i=project.fixURL_PassiveContent(i);var o=AnalyzeWorkGetContentType(t);if(AnalyzeWorkEqualModifyCount(t,n)){var r={element:a,url:i,content_type:o,is_overridden_url:AnalyzeWorkGetOverrodeUrl(t)};project.executeScriptAllowThumbnailImage(r,(function(e){if(AnalyzeWorkEqualModifyCount(t,n)&&e.result){var o=AnalyzeWorkGetEventDispatcher(t),r=null,l=null,s=null,c=null,_=i,u=null,d=null,p=null,m=null;if(download_list_image.createItem().setURL(_),project.getDisableSameThumbnailImage()){if(address_collection.hasAddress("image",_))return _=null,void h();address_collection.addAddress("image",_)}(u=o.createEventHandler("release")).setFunction(h),p=element_limitter_image.createElement(),b(),p.update()}function g(e){if(r&&(r.onload=null,r.onerror=null,r=null),f(),_&&(address_collection.removeAddress("image",_),_=null),u&&(u.release(),u=null),d&&(d.release(),d=null),m&&(m.release(),m=null),c&&(analyze_work_dictionary.removeAnalyzeWork(c),c=null),s){var t=new DocumentReviseScroll;t.executeRemoveElementBefore(s),DomNodeRemove(s),t.executeRemoveElementAfter(s),s=null}b()}function f(e){l&&(l.suicide(),l=null)}function h(e){g(),AnalyzeWorkClearPopupImage(t),p&&(p.release(),p=null)}function x(e){o.dispatchEvent("release",null)}function b(){p&&(p.onattach=function(){!function(){project.getEnableLoadNotifyExpandImage()&&(m=notify_progress.createElement());m&&(m.setElementHitArea(a),m.setNotify(NotifyProgress.NOTIFY_TYPE_LOADING));(r=new Loader).onload=function(e){AnalyzeWorkSetAnalyzedPopupReducedImage(c=AnalyzeWorkCreate(s=e));var n=new AnalyzeWorkDictionaryAttachOptions;n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(c,n),m&&(m.setNotify(NotifyProgress.NOTIFY_TYPE_COMPLETE),m.release(),m=null);var i=ImageGetNaturalSize(s);function o(){if(s){(d=new DomNodeObserverRemoveFromDocument(s)).setFunction(x);var e=s.src;p.onattach=function(){s.src=e,n()},p.onremove=function(){s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEHAAAALAAAAAABAAEAAAICRAEAOw==",f()},p.setElementHitArea(s),new ImageDragger(s).setOriginalURL(_),n()}function n(){if(project.getEnablePopupMouseoverToThumbnailImage()){PopupReducedImageReleaseAll(a);var e=new Loader;e.setURL(_),e.onload=function(e){s&&((l=new PopupImage(e)).setElementParent(document.body),l.setElementAnchor(s),l.setElementHitArea(s),l.setElementBeginArea(s),l.setOriginalURL(_),AnalyzeWorkSetPopupImage(t,l))},e.loadImage()}}}p.setByteSize(i.width*i.height*4),element_limitter_image.removeOldElements(),s&&(ElementSetStyle(s,project.getStyleSheetExpandImageThumbnail(_)),project.executeScriptInsertThumbnailImage(a,s,t.event_dispatcher,o))},r.onerror=function(){m&&m.setNotify(NotifyProgress.NOTIFY_TYPE_ERROR)},r.setMethod("GET"),r.setURL(_),r.loadImage()}()},p.onremove=function(){g()},p.setElementHitArea(a),p.setEnablePreload(project.getEnablePreLoadThumbnailImage()))}}))}}function ElementExpandPopupImage(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);i=project.fixURL_PassiveContent(i);var o=AnalyzeWorkGetContentType(t);if(AnalyzeWorkEqualModifyCount(t,n)){var r={element:a,url:i,content_type:o,is_overridden_url:AnalyzeWorkGetOverrodeUrl(t)};project.executeScriptAllowPopupImage(r,(function(e){if(AnalyzeWorkEqualModifyCount(t,n)&&e.result){var o=AnalyzeWorkGetEventDispatcher(t),r=null,l=null,s=null,c=null,_=null,u=null,d=null;download_list_image.createItem().setURL(i),(c=o.createEventHandler("release")).setFunction(m),(u=element_limitter_image.createElement()).onattach=function(){project.getEnableLoadNotifyExpandImage()&&(d=notify_progress.createElement()),d&&(d.setElementHitArea(a),d.setNotify(NotifyProgress.NOTIFY_TYPE_LOADING)),(r=new Loader).onload=function(e){var n=ImageGetNaturalSize(e);if(u.setByteSize(n.width*n.height*4),element_limitter_image.removeOldElements(),r){if(n.width>1);else if(!(n.height>1))return void m();if(function(){var e=null;"IMG"==a.tagName&&ElementGetVisibility(a)&&(e=a);var t,n=ElementGetElementsByTagName(a,"img"),i=n.length;for(t=0;t<i;t++){var o=n[t];if(ElementGetVisibility(o)){if(e)return;e=o}}e&&(s=e)}(),!s){var o=DomTreeGetBoundingClientRect(a);o.bottom-o.top>n.height||o.right-o.left>n.width||(s=a)}PopupReducedImageReleaseAll(a),s&&(_=new DomNodeObserverRemoveFromDocument(s)),_&&_.setFunction(g),(l=new PopupImage(e)).setElementParent(document.body),l.setElementAnchor(a),l.setElementHitArea(a),l.setElementBeginArea(s),l.setOriginalURL(i),AnalyzeWorkSetPopupImage(t,l),d&&(d.setNotify(NotifyProgress.NOTIFY_TYPE_COMPLETE),d.release(),d=null),ElementHitTestMousePosition(a,input_mouse.getPositionClient(),!0)&&l.popup()}},r.onerror=function(){d&&d.setNotify(NotifyProgress.NOTIFY_TYPE_ERROR)},r.setMethod("GET"),r.setURL(i),r.loadImage()},u.onremove=function(){p()},u.setElementHitArea(a),u.setEnablePreload(project.getEnablePreLoadPopupImage()),u.update()}function p(e){r&&(r.onload=null,r.onerror=null,r=null),l&&(l.suicide(),l=null),c&&(c.release(),c=null),_&&(_.release(),_=null),d&&(d.release(),d=null)}function m(e){p(),AnalyzeWorkClearPopupImage(t),u&&(u.release(),u=null)}function g(e){o.dispatchEvent("release",null)}}))}}function ElementExpandInlineSound(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t),o=AnalyzeWorkGetContentType(t);if(AnalyzeWorkEqualModifyCount(t,n)){var r={element:a,url:i,content_type:o,is_overridden_url:AnalyzeWorkGetOverrodeUrl(t)};project.executeScriptAllowInlineSound(r,(function(a){AnalyzeWorkEqualModifyCount(t,n)&&a.result&&(ElementExpandInlineAudioElement(e),ElementExpandInlinePlayerSoundcloud(e),ElementExpandInlinePlayerMixcloud(e))}))}}function ElementExpandInlineAudioElement(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);i=project.fixURL_PassiveContent(i);var o=AnalyzeWorkGetContentType(t);AnalyzeWorkEqualModifyCount(t,n)&&project.executeScriptAllowAudioElement(a,i,o,(function(e){if(AnalyzeWorkEqualModifyCount(t,n)&&e.result){var o=AnalyzeWorkGetEventDispatcher(t),r=null,l=null,s=null,c=i,_=null,u=null,d=null,p=null;if(project.getDisableSameInlineSound()){if(address_collection.hasAddress("sound",c))return c=null,void g();address_collection.addAddress("sound",c)}(_=o.createEventHandler("release")).setFunction(g),(r=new Loader).onload=function(e){s=AnalyzeWorkCreate(l=e);var n=new AnalyzeWorkDictionaryAttachOptions;n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(s,n),ElementSetStyle(l,project.getStyleSheetExpandSoundInlineAudioElement(c)),(d=new DomNodeObserverRemoveFromDocument(l)).setFunction(m),(p=new MediaPlayerExtendUI(l)).createEventHandler("close").setFunction(m),project.executeScriptInsertInlineSound(a,l,t.event_dispatcher,(function(){l&&((u=element_limitter_sound.createElement()).onattach=function(){},u.onremove=function(){l.preload="none",l.load()},u.setElementHitArea(l),u.update())}))},r.onerror=function(){},r.setMethod("GET"),r.setURL(c),r.loadAudio()}function m(e){o.dispatchEvent("release",null)}function g(e){r&&(r.onload=null,r.onerror=null,r=null),c&&(address_collection.removeAddress("sound",c),c=null),_&&(_.release(),_=null),u&&(u.onremove=null,u.release(),u=null),d&&(d.release(),d=null),p&&(p.release(),p=null),s&&(analyze_work_dictionary.removeAnalyzeWork(s),s=null),l&&(DomNodeRemove(l),l=null)}}))}function ElementExpandInlinePlayerSoundcloud(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);if(AnalyzeWorkEqualModifyCount(t,n)){var o,r=["*://soundcloud.com/*","*://*.soundcloud.com/*"],l=r.length;for(o=0;o<l;o++)if(StringUrlMatchAsteriskWord(document.URL,r[o]))return;if(project.getVisiblePlayerHtml5Soundcloud()){var s=["(http|https)://soundcloud\\.com/.+?/.+([?]|$)"];for(l=s.length,o=0;o<l;o++)if(i.match(new RegExp(s[o],"i")))return void(project.getVisiblePlayerHtml5Soundcloud()&&function(){var e="https://w.soundcloud.com/player/?url="+encodeURIComponent(i),n=AnalyzeWorkGetEventDispatcher(t),o=null,r=null,l=null,s=null,c=null,_=null;function u(e){n.dispatchEvent("release",null)}function d(t){e&&(address_collection.removeAddress("sound",e),e=null),l&&(l.release(),l=null),s&&(s.onremove=null,s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),r&&(analyze_work_dictionary.removeAnalyzeWork(r),r=null),o&&(DomNodeRemove(o),o=null)}if(project.checkAllowExpandIframeElement(e)){if(project.getDisableSameInlineSound()){if(address_collection.hasAddress("sound",e))return e=null,void d();address_collection.addAddress("sound",e)}(l=n.createEventHandler("release")).setFunction(d),(o=DocumentCreateElement("iframe")).frameBorder="0",o.scrolling="no",o.allowFullscreen=!0,ElementSetStyle(o,project.getStyleSheetExpandSoundSoundcloudInlinePlayerHtml5()),o.style.height=parseInt(166)+"px",r=AnalyzeWorkCreate(o);var p=new AnalyzeWorkDictionaryAttachOptions;p.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(r,p),(c=new DomNodeObserverRemoveFromDocument(o)).setFunction(u),(_=new MediaPlayerExtendUI(o)).createEventHandler("close").setFunction(u),project.executeScriptInsertInlineSound(a,o,t.event_dispatcher,(function(){o&&((s=element_limitter_sound.createElement()).onattach=function(){o.src=e},s.onremove=function(){o.src=""},s.setElementHitArea(o),s.update())}))}else d()}())}}}function ElementExpandInlinePlayerMixcloud(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);if(AnalyzeWorkEqualModifyCount(t,n)){var o,r=["*://mixcloud.com/*","*://*.mixcloud.com/*"],l=r.length;for(o=0;o<l;o++)if(StringUrlMatchAsteriskWord(document.URL,r[o]))return;if(project.getVisiblePlayerMixcloud()){var s=["^(http|https)://[^.]+\\.mixcloud\\.com/([^/]+)[/]([^/]+)[/]([?]|$)"],c={live:1,discover:1,upload:1,pro:1},_={stream:1,uploads:1,favorites:1,listens:1,playlists:1};for(l=s.length,o=0;o<l;o++){var u=i.match(new RegExp(s[o],"i"));if(u&&!c[u[2]]&&!_[u[3]])return void d("/"+u[2]+"/"+u[3]+"/")}}}function d(e){var n=AnalyzeWorkGetEventDispatcher(t),i=null,o=null,r="https://www.mixcloud.com/widget/iframe/?hide_cover=1&light=1&feed="+encodeURIComponent(e),l=null,s=null,c=null,_=null;function u(e){n.dispatchEvent("release",null)}function d(e){r&&(address_collection.removeAddress("sound",r),r=null),l&&(l.release(),l=null),s&&(s.onremove=null,s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(analyze_work_dictionary.removeAnalyzeWork(o),o=null),i&&(DomNodeRemove(i),i=null)}if((l=n.createEventHandler("release")).setFunction(d),project.checkAllowExpandIframeElement(r)){if(project.getDisableSameInlineSound()){if(address_collection.hasAddress("sound",r))return r=null,void d();address_collection.addAddress("sound",r)}(i=DocumentCreateElement("iframe")).frameBorder="0",i.scrolling="no",i.allowFullscreen=!0,ElementSetStyle(i,project.getStyleSheetExpandSoundMixcloudInlinePlayer()),i.style.height="120px",o=AnalyzeWorkCreate(i);var p=new AnalyzeWorkDictionaryAttachOptions;p.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,p),(c=new DomNodeObserverRemoveFromDocument(i)).setFunction(u),(_=new MediaPlayerExtendUI(i)).createEventHandler("close").setFunction(u),project.executeScriptInsertInlineSound(a,i,t.event_dispatcher,(function(){i&&((s=element_limitter_sound.createElement()).onattach=function(){i.src=r},s.onremove=function(){i.src=""},s.setElementHitArea(i),s.update())}))}else d()}}function ElementExpandInlineVideo(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t),o=AnalyzeWorkGetContentType(t);if(AnalyzeWorkEqualModifyCount(t,n)){var r={element:a,url:i,content_type:o,is_overridden_url:AnalyzeWorkGetOverrodeUrl(t)};project.executeScriptAllowInlineVideo(r,(function(a){AnalyzeWorkEqualModifyCount(t,n)&&a.result&&(ElementExpandInlineVideoElement(e),ElementExpandInlineVideoYoutube(e),ElementExpandInlineVideoNicovideo(e),ElementExpandInlineVideoDailymotion(e),ElementExpandInlineVideoVimeo(e))}))}}function ElementExpandInlineVideoElement(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);i=project.fixURL_PassiveContent(i);var o=AnalyzeWorkGetContentType(t);AnalyzeWorkEqualModifyCount(t,n)&&project.executeScriptAllowVideoElement(a,i,o,(function(e){if(AnalyzeWorkEqualModifyCount(t,n)&&e.result){var o=AnalyzeWorkGetEventDispatcher(t),r=null,l=null,s=null,c=i,_=null,u=null,d=null,p=null;if(project.getDisableSameInlineVideo()){if(address_collection.hasAddress("video",c))return c=null,void g();address_collection.addAddress("video",c)}(_=o.createEventHandler("release")).setFunction(g),(r=new Loader).onload=function(e){s=AnalyzeWorkCreate(l=e);var n=new AnalyzeWorkDictionaryAttachOptions;n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(s,n),ElementSetStyle(l,project.getStyleSheetExpandVideoInlineVideoElement(c)),(d=new DomNodeObserverRemoveFromDocument(l)).setFunction(m),(p=new MediaPlayerExtendUI(l)).createEventHandler("close").setFunction(m),project.executeScriptInsertInlineVideo(a,l,t.event_dispatcher,(function(){l&&((u=element_limitter_video.createElement()).onattach=function(){},u.onremove=function(){l.preload="none",l.load()},u.setElementHitArea(l),u.update())}))},r.onerror=function(){},r.setMethod("GET"),r.setURL(c),r.loadVideo()}function m(e){o.dispatchEvent("release",null)}function g(e){r&&(r.onload=null,r.onerror=null,r=null),c&&(address_collection.removeAddress("video",c),c=null),_&&(_.release(),_=null),u&&(u.onremove=null,u.release(),u=null),d&&(d.release(),d=null),p&&(p.release(),p=null),s&&(analyze_work_dictionary.removeAnalyzeWork(s),s=null),l&&(DomNodeRemove(l),l=null)}}))}function ElementExpandInlineVideoYoutube(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);if(AnalyzeWorkEqualModifyCount(t,n)){var o,r=["*://*.youtube.com/*","*://youtube.com/*"],l=r.length;for(o=0;o<l;o++)if(StringUrlMatchAsteriskWord(document.URL,r[o]))return;if(project.getVisibleVideoYoutube()){var s=["*://www.youtube.com/watch?*","*://www.youtube.com/watch_popup?*","*://m.youtube.com/watch?*","*://m.youtube.com/#/watch?*"];for(l=s.length,o=0;o<l;o++)if(StringUrlMatchAsteriskWord(i,s[o])){var c=StringGetQuery(i);if(c.v)return void u(d(i,c.v))}var _=["(http|https)://www\\.youtube\\.com/v/","(http|https)://youtu\\.be/"];for(l=_.length,o=0;o<l;o++)if(i.match(new RegExp(_[o],"i"))&&RegExp.rightContext.match(new RegExp("^([-_a-zA-Z0-9]+)","i")))return void u(d(i,RegExp.$1))}}function u(e){var n=AnalyzeWorkGetEventDispatcher(t),i=null,o=null,r=e,l=null,s=null,c=null,_=null;function u(e){n.dispatchEvent("release",null)}function d(e){r&&(address_collection.removeAddress("video",r),r=null),l&&(l.release(),l=null),s&&(s.onremove=null,s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(analyze_work_dictionary.removeAnalyzeWork(o),o=null),i&&(DomNodeRemove(i),i=null)}if(project.checkAllowExpandIframeElement(r)){if(project.getDisableSameInlineVideo()){if(address_collection.hasAddress("video",r))return r=null,void d();address_collection.addAddress("video",r)}(l=n.createEventHandler("release")).setFunction(d),(i=DocumentCreateElement("iframe")).frameBorder="0",i.scrolling="no",i.allowFullscreen=!0,ElementSetStyle(i,project.getStyleSheetExpandVideoYoutubeInlineVideo()),o=AnalyzeWorkCreate(i);var p=new AnalyzeWorkDictionaryAttachOptions;p.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,p),(c=new DomNodeObserverRemoveFromDocument(i)).setFunction(u),(_=new MediaPlayerExtendUI(i)).createEventHandler("close").setFunction(u),project.executeScriptInsertInlineVideo(a,i,t.event_dispatcher,(function(){i&&((s=element_limitter_video.createElement()).onattach=function(){i.src=r},s.onremove=function(){i.src=""},s.setElementHitArea(i),s.update())}))}else d()}function d(e,t){var n=StringGetQuery(e),a=function(e){var t=new Object,n=e.match(new RegExp("[#](.*?)([?]|$)"));if(!n)return t;var a,i=n[1].split("&"),o=i.length;for(a=0;a<o;a++){var r=i[a].split("=");2==r.length&&(t[r[0]]=r[1])}return t}(e),i=n.t||a.t;if(i){var o,r=0;(o=i.match(/([0-9]+)h/i))&&(r+=60*parseInt(o[1])*60),(o=i.match(/([0-9]+)m/i))&&(r+=60*parseInt(o[1])),(o=i.match(/([0-9]+)s/i))&&(r+=parseInt(o[1])),r&&(i=r+""),o=i.match(/([0-9]+)/i),i=o?o[1]:""}var l=(project.getSecureCurrent()?"https":"http")+"://www.youtube-nocookie.com/embed/"+t;return i&&(l+="?start="+i),l}}function ElementExpandInlineVideoNicovideo(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);if(AnalyzeWorkEqualModifyCount(t,n)){var o,r=["*://nicovideo.jp/*","*://*.nicovideo.jp/*"],l=r.length;for(o=0;o<l;o++)if(StringUrlMatchAsteriskWord(document.URL,r[o]))return;var s=["(http|https)://.*\\.nicovideo\\.jp/watch/","(http|https)://nicovideo\\.jp/watch/","(http|https)://nico\\.ms/.*/","(http|https)://nico\\.ms/"];for(l=s.length,o=0;o<l;o++)if(i.match(new RegExp(s[o],"i"))){var c=RegExp.rightContext;if(c.match(new RegExp("^(.*?)[?#]","i"))&&(c=RegExp.$1),c.match(/([a-z]{2})([0-9]+$)/i))switch(c=RegExp.$1+RegExp.$2,RegExp.$1){case"im":case"mg":case"lv":case"bk":case"nw":case"co":c=null}if(i.match(new RegExp("^(http|https)://([a-z]+?)\\.nicovideo\\.jp/","i"))){switch(RegExp.$2){case"de":case"es":case"tw":RegExp.$2}switch(RegExp.$2){case"live":case"news":case"seiga":c=null}}if(c&&project.getVisibleVideoNicovideo())return void _(c)}}function _(e,n){!function(){var n=AnalyzeWorkGetEventDispatcher(t),i=null,o=null,r="https://embed.nicovideo.jp/watch/"+e,l=null,s=null,c=null,_=null;function u(e){n.dispatchEvent("release",null)}function d(e){r&&(address_collection.removeAddress("video",r),r=null),l&&(l.release(),l=null),s&&(s.onremove=null,s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(analyze_work_dictionary.removeAnalyzeWork(o),o=null),i&&(DomNodeRemove(i),i=null)}if(project.checkAllowExpandIframeElement(r)){if(project.getDisableSameInlineVideo()){if(address_collection.hasAddress("video",r))return r=null,void d();address_collection.addAddress("video",r)}(l=n.createEventHandler("release")).setFunction(d),(i=DocumentCreateElement("iframe")).frameBorder="0",i.scrolling="no",i.allowFullscreen=!0,ElementSetStyle(i,project.getStyleSheetExpandVideoNicovideoInlineVideo()),o=AnalyzeWorkCreate(i);var p=new AnalyzeWorkDictionaryAttachOptions;p.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,p),(c=new DomNodeObserverRemoveFromDocument(i)).setFunction(u),(_=new MediaPlayerExtendUI(i)).createEventHandler("close").setFunction(u),project.executeScriptInsertInlineVideo(a,i,t.event_dispatcher,(function(){i&&((s=element_limitter_video.createElement()).onattach=function(){i.src=r},s.onremove=function(){i.src=""},s.setElementHitArea(i),s.update())}))}else d()}()}}function ElementExpandInlineVideoDailymotion(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);if(AnalyzeWorkEqualModifyCount(t,n)){var o,r=["*//www.dailymotion.com/*"],l=r.length;for(o=0;o<l;o++)if(StringUrlMatchAsteriskWord(document.URL,r[o]))return;if(project.getVisibleVideoDailymotion()){var s=["*//www.dailymotion.com/video/*","*//touch.dailymotion.com/video/*"];for(l=s.length,o=0;o<l;o++)if(StringUrlMatchAsteriskWord(i,s[o])){var c="/video/",_=i.indexOf(c);if(_>=0){_+=7;var u,d=i.indexOf("_",_);if(u=d>=0?i.substring(_,d):i.substring(_))return void p((project.getSecureCurrent()?"https":"http")+"://www.dailymotion.com/embed/video/"+u)}}}}function p(e){var n=AnalyzeWorkGetEventDispatcher(t),i=null,o=null,r=e,l=null,s=null,c=null,_=null;function u(e){n.dispatchEvent("release",null)}function d(e){r&&(address_collection.removeAddress("video",r),r=null),l&&(l.release(),l=null),s&&(s.onremove=null,s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(analyze_work_dictionary.removeAnalyzeWork(o),o=null),i&&(DomNodeRemove(i),i=null)}if(project.checkAllowExpandIframeElement(r)){if(project.getDisableSameInlineVideo()){if(address_collection.hasAddress("video",r))return r=null,void d();address_collection.addAddress("video",r)}(l=n.createEventHandler("release")).setFunction(d),(i=DocumentCreateElement("iframe")).frameBorder="0",i.scrolling="no",i.allowFullscreen=!0,ElementSetStyle(i,project.getStyleSheetExpandVideoDailymotionInlineVideo()),o=AnalyzeWorkCreate(i);var p=new AnalyzeWorkDictionaryAttachOptions;p.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,p),(c=new DomNodeObserverRemoveFromDocument(i)).setFunction(u),(_=new MediaPlayerExtendUI(i)).createEventHandler("close").setFunction(u),project.executeScriptInsertInlineVideo(a,i,t.event_dispatcher,(function(){i&&((s=element_limitter_video.createElement()).onattach=function(){i.src=r},s.onremove=function(){i.src=""},s.setElementHitArea(i),s.update())}))}else d()}}function ElementExpandInlineVideoVimeo(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);if(AnalyzeWorkEqualModifyCount(t,n)){var o,r=["*//vimeo.com/*"],l=r.length;for(o=0;o<l;o++)if(StringUrlMatchAsteriskWord(document.URL,r[o]))return;if(project.getVisibleVideoVimeo()){var s=["*//vimeo.com/*"];for(l=s.length,o=0;o<l;o++)if(StringUrlMatchAsteriskWord(i,s[o])){var c="://vimeo.com/",_=i.indexOf(c);if(_>=0){_+=13;var u,d=i.indexOf("?",_);if((u=d>=0?i.substring(_,d):i.substring(_))&&u.match(/^[0-9]+$/))return void p("https://player.vimeo.com/video/"+u)}}}}function p(e){var n=AnalyzeWorkGetEventDispatcher(t),i=null,o=null,r=e,l=null,s=null,c=null,_=null;function u(e){n.dispatchEvent("release",null)}function d(e){r&&(address_collection.removeAddress("video",r),r=null),l&&(l.release(),l=null),s&&(s.onremove=null,s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(analyze_work_dictionary.removeAnalyzeWork(o),o=null),i&&(DomNodeRemove(i),i=null)}if(project.checkAllowExpandIframeElement(r)){if(project.getDisableSameInlineVideo()){if(address_collection.hasAddress("video",r))return r=null,void d();address_collection.addAddress("video",r)}(l=n.createEventHandler("release")).setFunction(d),(i=DocumentCreateElement("iframe")).frameBorder="0",i.scrolling="no",i.allowFullscreen=!0,ElementSetStyle(i,project.getStyleSheetExpandVideoVimeoInlineVideo()),o=AnalyzeWorkCreate(i);var p=new AnalyzeWorkDictionaryAttachOptions;p.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,p),(c=new DomNodeObserverRemoveFromDocument(i)).setFunction(u),(_=new MediaPlayerExtendUI(i)).createEventHandler("close").setFunction(u),project.executeScriptInsertInlineVideo(a,i,t.event_dispatcher,(function(){i&&((s=element_limitter_video.createElement()).onattach=function(){i.src=r},s.onremove=function(){i.src=""},s.setElementHitArea(i),s.update())}))}else d()}}function ElementExpandInlineIframe(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t),i=AnalyzeWorkGetExpandUrl(t);i=project.fixURL_ActiveContent(i);var o=AnalyzeWorkGetContentType(t);AnalyzeWorkEqualModifyCount(t,n)&&project.executeScriptAllowInlineIframe(a,i,o,(function(e){if(AnalyzeWorkEqualModifyCount(t,n)&&e.result){var o=AnalyzeWorkGetEventDispatcher(t),r=null,l=null,s=null,c=i,_=null,u=null;if(project.checkAllowExpandIframeElement(c)){if(project.getDisableSameInlineIframe()){if(address_collection.hasAddress("iframe",c))return c=null,void p();address_collection.addAddress("iframe",c)}(_=o.createEventHandler("release")).setFunction(p),(r=new Loader).onload=function(e){(l=DocumentCreateElement("iframe")).frameBorder="0",l.src=c,ElementSetStyle(l,project.getStyleSheetExpandIframeInline(c)),s=AnalyzeWorkCreate(l);var n=new AnalyzeWorkDictionaryAttachOptions;n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(s,n),(u=new DomNodeObserverRemoveFromDocument(l)).setFunction(d),project.executeScriptInsertInlineIframe(a,l,t.event_dispatcher,(function(){}))},r.onerror=function(){},r.setMethod("GET"),r.setURL(c),r.loadResponseHeader()}else p()}function d(e){o.dispatchEvent("release",null)}function p(e){r&&(r.onload=null,r.onerror=null,r=null),c&&(address_collection.removeAddress("iframe",c),c=null),_&&(_.release(),_=null),u&&(u.release(),u=null),s&&(analyze_work_dictionary.removeAnalyzeWork(s),s=null),l&&(DomNodeRemove(l),l=null)}}))}function ElementExpandIframeContent(e){var t=e.work,n=e.modify,a=AnalyzeWorkGetDomNode(t);if(AnalyzeWorkEqualModifyCount(t,n)){var i,o,r=!1;AnalyzeWorkObserveElement(t),AnalyzeWorkGetEventDispatcher(t).createEventHandler("release").setFunction((function(){l(),i&&(i.release(),i=null)})),(i=document_observer_modify_node.createElement()).setElement(a,"src"),i.setFunction((function(){c()})),c()}function l(){o&&(o.release(),o=null);try{var e=a.contentWindow;e.removeEventListener?e.removeEventListener("unload",s):e.detachEvent&&e.detachEvent("onunload",s)}catch(e){}}function s(){r=!1,c()}function c(){r||(l(),(o=new Timer(1,1)).oncomplete=function(){if(!r)try{var e=a.contentWindow;WindowIsExecutedByPageExpand(e)&&(e.addEventListener?e.addEventListener("unload",s):e.attachEvent&&e.attachEvent("onunload",s),r=!0,PageExpand({execute_type:page_expand_arguments.execute_type,admin:admin,window:e,page_expand_parent:page_expand_node}))}catch(e){}},o.start())}}function ElementPopupReducedImage(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){var a=AnalyzeWorkGetDomNode(t);if(!AnalyzeWorkGetAnalyzedPopupReducedImage(t)){var i,o,r;AnalyzeWorkSetAnalyzedPopupReducedImage(t);var l=!1;AnalyzeWorkObserveElement(t),(o=AnalyzeWorkGetEventDispatcher(t)).createEventHandler("release_popup_image").setFunction((function(){i&&(i.release(),i=null),s();var e=AnalyzeWorkGetEventDispatcher(t);e&&(AnalyzeWorkGetOverrodeAnchorElement(t)||e.dispatchEvent("destructor",null))})),o.createEventHandler("release").setFunction(s),(r=document_observer_modify_node.createElement()).setElement(a,"src"),r.setFunction((function(){var e=AnalyzeWorkGetEventDispatcher(t);e&&e.dispatchEvent("destructor",null),DomNodeAnalyzePhaseAnalyzeElement(a)})),ImageGetLoaded(a,(function(){if(AnalyzeWorkEqualModifyCount(t,n)&&!l){var e=!0;if(e)try{a.src||(e=!1)}catch(t){e=!1}if(e){var o=ImageGetNaturalSize(a),r=project.getScaleLessThenAllowPopupReducedImage();a.width>o.width/100*r&&(e=!1),a.height>o.height/100*r&&(e=!1)}if(e&&a.src==document.URL&&(e=!1),e&&function(){for(var t=a;t;){var n=analyze_work_dictionary.getAnalyzeWork(t);if(n&&AnalyzeWorkGetPopupImage(n)){e=!1;break}t=t.parentNode}}(),e){var s=project.fixURL_PassiveContent(a.src),c=new Loader;c.setURL(s),c.onload=function(e){AnalyzeWorkEqualModifyCount(t,n)&&(l||((i=new PopupImage(e)).setElementParent(document.body),i.setElementAnchor(a),i.setElementHitArea(a),i.setElementBeginArea(a),i.setOriginalURL(s),i.ontrim=function(){if(i){for(var e=!1,t=new Object,n=ElementGetBoundingClientRect(a),o=ObjectCopy(n),r={hidden:1},l={hidden:1},s={inline:1,none:1,"table-column":1,"table-column-group":1},c=a;c;){var _=ElementGetBoundingClientRect(c);if(!_)break;if("BODY"==c.tagName)break;var u=ElementGetComputedStyle(c,null);u&&(s[u.display]||(r[u.overflowX]&&(_.right<o.right&&(o.right=_.right),_.left>o.left&&(o.left=_.left),e=!0),l[u.overflowY]&&(_.bottom<o.bottom&&(o.bottom=_.bottom),_.top>o.top&&(o.top=_.top),e=!0))),c=c.parentNode}if(t){var d=ImageGetNaturalSize(a),p=ElementGetComputedStyle(a,null),m=ComputedStyleGetBoaderWidth(p),g=ComputedStyleGetPaddingWidth(p),f=n.left+m.left+g.left,h=n.top+m.top+g.top,x=n.right-f-m.right+g.right,b=n.bottom-h-m.bottom+g.bottom,v=d.width/x,y=d.height/b;t.left=(o.left-f)*v,t.top=(o.top-h)*y,t.right=(o.right-f)*v,t.bottom=(o.bottom-h)*y}e&&i.setTrimRect(t)}},i.ontrim(),AnalyzeWorkSetPopupImage(t,i)))},c.loadImage()}else{var _=AnalyzeWorkGetEventDispatcher(t);_&&_.dispatchEvent("release_popup_image",null)}}}))}}function s(){r&&(r.release(),r=null),i&&(i.suicide(),i=null),l=!0}}function PopupReducedImageReleaseAll(e){function t(e){var t=analyze_work_dictionary.getAnalyzeWork(e);if(t){var n=AnalyzeWorkGetEventDispatcher(t);n&&n.dispatchEvent("release_popup_image",null)}}if(1==e.nodeType){"IMG"==e.tagName&&t(e);var n,a=ElementGetElementsByTagName(e,"img"),i=a.length;for(n=0;n<i;n++)t(a[n])}}function ElementExpandBbs(e){var t=e.work,n=e.modify;if(AnalyzeWorkEqualModifyCount(t,n)){var a=AnalyzeWorkGetDomNode(t),i=!1;AnalyzeWorkGetAnalyzedExpandBbs(t)||(AnalyzeWorkSetAnalyzedExpandBbs(t),project.executeScriptCallbackExpandBbs(a,(function(e){var o,r;function l(){AnalyzeWorkClearAnalyzedExpandBbs(t),r&&(r.release(),r=null),o&&(o.release(),o=null),analyze_work_dictionary.removeAnalyzeWork(t)}AnalyzeWorkEqualModifyCount(t,n)&&(i||(i=!0,e&&e.useful&&((o=new DomNodeObserverRemoveFromDocument(a)).setFunction(l),(r=page_expand_event_dispatcher.createEventHandler("release")).setFunction(l),analyze_work_dictionary.attachAnalyzeWork(t))))})))}}function PageExpandNode(){var e=this;e.release=function(t){var n=e._child_list._prev,a=n._next;n._next=a,a._prev=n,e.remove(),e._parent=null},e.attachChild=function(t){t.remove();var n=e._child_list,a=n._prev;a._next=t,n._prev=t,t._prev=a,t._next=n,t._parent=e},e.remove=function(){var t=e._prev,n=e._next;t._next=n,n._prev=t},e.getPageExpandRoot=function(){for(var t=e;t._parent;)t=t._parent;return t},function(){e._prev=e,e._next=e;var t=new Object;t._prev=t,t._next=t,e._child_list=t,e._parent=null}()}function PageExpandSetEnableAnalyze(e){enable_analyze=e}function DomNodeSetContentType(e,t){var n=analyze_work_dictionary.getAnalyzeWork(e);n&&AnalyzeWorkAddContentType(n,t)}function DomNodeGetContentType(e){var t=analyze_work_dictionary.getAnalyzeWork(e);if(t){var n=AnalyzeWorkGetContentType(t);if(n)return n.join(",")}return""}function DomNodeSetCompletedExpandBbs(e){}function DomNodeSetCompletedReplacementToText(e){}function DomNodeClearInserted(e){ObjectDeleteProperty(e,"_pageexpand_inserted")}function DomNodeSetInserted(e){try{e._pageexpand_inserted=!0}catch(e){}}function DomNodeGetInserted(e){try{if(e._pageexpand_inserted)return!0}catch(e){}return!1}function RegExpObjectCreate(){return{pattern:"",flags:{i:!1,g:!1}}}function RegExpObjectGetRegExp(e){try{return new RegExp(e.pattern,(e.flags.g?"g":"")+(e.flags.i?"i":""))}catch(e){return null}}function RegExpObjectGetError(e){try{new RegExp(e.pattern,(e.flags.g?"g":"")+(e.flags.i?"i":""));return""}catch(e){return e}}function PageExpandProjectScriptObject_Create(e){return{has_preset:Boolean(e),has_user:!1,preset:{asset:e||""},user:{script:""}}}function PageExpandProjectScriptObject_HasUserScript(e){return e.has_user}function PageExpandProjectScriptObject_ReturnPreset(e){e.has_preset=!0,e.has_user=!1,e.user.script=""}function PageExpandProjectScriptObject_SetUserScript(e,t){e.has_user=!0,e.user.script=t}function PageExpandProjectScriptObject_CopyUserScript(e,t){e.has_user=t.has_user,e.user.script=t.user.script}function PageExpandProjectScriptObject_EvalArrayFunction(e){if(e.has_user)return StringEvalArrayFunction(e.user.script);if(e.has_preset){preset_script_dictionary||(preset_script_dictionary=new PresetScriptDictionary);var t=preset_script_dictionary.getItem(e.preset.asset);if(t)return t}return[]}function PageExpandProjectScriptObject_ToString(e){if(e.has_user)return e.user.script;if(e.has_preset){preset_script_dictionary||(preset_script_dictionary=new PresetScriptDictionary);var t,n=["[\n"],a=preset_script_dictionary.getItem(e.preset.asset),i=a.length;for(t=0;t<i;t++)n.push("\t"),n.push(a[t].toString()),n.push(",\n");return n.pop(),n.push("\n]"),n.join("")}}function PopupImage(e){var t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f,h,x,b=this;function v(){n&&(n.removeEventListener?n.removeEventListener("mouseover",I,!1):n.detachEvent&&n.detachEvent("onmouseover",I))}function y(){n&&(E(),n.addEventListener)}function E(){n&&n.removeEventListener}function w(){S(),i.addEventListener?(i.addEventListener("mousedown",D,!1),i.addEventListener("click",T,!1)):i.attachEvent&&(i.attachEvent("onmousedown",D),i.attachEvent("onclick",T))}function S(){i.removeEventListener?(i.removeEventListener("mousedown",D,!1),i.removeEventListener("click",T,!1)):i.detachEvent&&(i.detachEvent("onmousedown",D),i.detachEvent("onclick",T))}function C(){A(),i.addEventListener?window.WheelEvent?i.addEventListener("wheel",R,!1):window.MouseScrollEvent?i.addEventListener("DOMMouseScroll",N,!1):i.addEventListener("mousewheel",j,!1):i.attachEvent&&i.attachEvent("onmousewheel",j)}function A(){i.removeEventListener?window.WheelEvent?i.removeEventListener("wheel",R,!1):window.MouseScrollEvent?i.removeEventListener("DOMMouseScroll",N,!1):i.removeEventListener("mousewheel",j,!1):i.detachEvent&&i.detachEvent("onmousewheel",j)}function k(){p&&(p.release(),p=null)}function I(e){input_mouse.setMouseEvent(e),M()}function D(e){(f.setMouseEvent(e),f.getButtonCenter()||f.getButtonLeft()&&f.getButtonRight())&&new ImageViewer(b).setInputMouse(f);if(4&MouseEventGetChangedButtons(e)){if(!e.preventDefault)return!1;e.preventDefault()}}function T(e){f.setMouseEvent(e),b.release()}function R(e){f.setMouseEvent(e);var t={x:0,y:0};switch(e.deltaMode){case 0:case 2:t.x=e.deltaX,t.y=e.deltaY;break;case 1:t.x=e.deltaX/3*50,t.y=e.deltaY/3*50}P(e,t)}function N(e){f.setMouseEvent(e),P(e,{x:0,y:e.detail/3*50})}function j(e){f.setMouseEvent(e),P(e,{x:0,y:-e.wheelDelta/40*50})}function P(e,t){var n=WheelScrollFromElement(t,a,i);if(n.result){if("absolute"==project.getStylePositionPopupImage()&&function(e){if(o){var t=o.getUserWork(),n=t.begin_rect,a=t.end_rect;n.left+=e.x,n.right+=e.x,n.top+=e.y,n.bottom+=e.y,a.left+=e.x,a.right+=e.x,a.top+=e.y,a.bottom+=e.y,Q(o)}}({x:-n.vector.x,y:-n.vector.y}),!e.preventDefault)return!1;e.preventDefault()}}function L(e){var t={x:0,y:0};for(e=e.parentNode;e;)e.scrollLeft&&(t.x+=e.scrollLeft),e.scrollTop&&(t.y+=e.scrollTop),e=e.parentNode;return t}function M(){if(o&&"fade_out"===o.getUserWork().type)o.setExecuteFunc(Z),o.execute(4294967295);input_mouse.getKeyShift()||input_mouse.getButtonLeft()||o||(E(),(o=task_container.createTask()).setLevel(TASK_EXECUTE_LEVEL_POPUP),o.setDestructorFunc($),o.setExecuteFunc(z),o.execute(4294967295))}function O(){if(o){var e=o.getUserWork(),t=ObjectCopy(input_mouse.getPositionClient()),a=ElementHitTestPosition(n,t,!0);if(!a&&c){if(n&&DomNodeGetAttachedDocument(n)){var i=L(n);u.x+=i.x-_.x,u.y+=i.y-_.y,_=i}t.x+=u.x,t.y+=u.y,(a=c.hitTestPosition(t,!0))||(c=null)}if(input_mouse.getEnableMouse()||(a=!1),project.getEnableAnimationPopupImage())if(a)switch(e.type){case"wait_before_close":o.setExecuteFunc(V),o.execute(4294967295);break;case"fade_out":o.setExecuteFunc(F),o.execute(4294967295)}else switch(e.type){case"wait_before_open":o.setExecuteFunc(Z),o.execute(4294967295);break;case"fade_in":o.setExecuteFunc(Y),o.execute(4294967295);break;case"show":o.setExecuteFunc(q),o.execute(4294967295)}else if(a){if("wait_before_close"===e.type)o.setExecuteFunc(V),o.execute(4294967295)}else switch(e.type){case"wait_before_open":o.setExecuteFunc(Z),o.execute(4294967295);break;case"show":o.setExecuteFunc(q),o.execute(4294967295)}a||y()}}function U(e){if(o){var t=o.getUserWork(),n=t.begin_rect,a=t.end_rect;n.left+=e.x,n.right+=e.x,n.top+=e.y,n.bottom+=e.y,a.left+=e.x,a.right+=e.x,a.top+=e.y,a.bottom+=e.y,_.x+=e.x,_.y+=e.y,Q(o)}}function z(e){var t=e.getUserWork();t.type="initialize",t.anime_pos=0,t.anime_spd=0,c=null,n&&(c=new ElementClientRectsTree(n),_=L(n),u={x:0,y:0}),e.setExecuteFunc(F),e.execute(4294967295)}function F(e){var t=e.getUserWork();t.type="wait_before_open",t.frame=project.getTimeWaitOpenPopupImage()/1e3*60,e.setExecuteFunc(B),e.execute(4294967295)}function B(e){var t=e.getUserWork();if(O(),t.frame-=1,t.frame<0)return e.setExecuteFunc(G),void e.execute(4294967295)}function G(e){var n=e.getUserWork();n.type="open",ElementSetStyle(l,CSSTextGetInitialImageElement()),ElementAddStyle(i,project.getStyleSheetExpandImagePopup(h)),i.style.willChange="left,top,width,height,opacity",i.style.zIndex=2147483646,i.style.position=project.getStylePositionPopupImage(),i.style.left="0px",i.style.top="0px",i.style.width="0px",i.style.height="0px",b.ontrim&&b.ontrim(),r&&(l.style.position="absolute");var o=DocumentGetClientSize(window_manager.getWindowRoot().document),s={left:1,top:1,right:o.width-1,bottom:o.height-1};t.appendChild(i);var c=ElementGetBoundingClientRect(i);n.style_w=c.right-c.left,n.style_h=c.bottom-c.top;var _,u=ImageGetNaturalSize(l);if(r&&(u.width=r.width,u.height=r.height),a&&DomNodeGetAttachedDocument(a)&&(_=r?ElementGetViewClientRect(a):DomTreeGetContentClientRect(a)),!_){var d=.5*n.style_w,p=.5*n.style_h,g=input_mouse.getPositionClient();(_=new Object).left=g.x-d,_.right=g.x+d,_.top=g.y-p,_.bottom=g.y+p}var f=window_manager.getPositionFromRoot();_.left+=f.x,_.right+=f.x,_.top+=f.y,_.bottom+=f.y;var x=WindowGetDevicePixelRatio(window);(x=1/x)<1&&(x=1);var v=project.getScalePercentPopupImage()/100*x,y=u.width*v,E=u.height*v;i.style.width=y+"px",i.style.height=E+"px";var w,S;switch(project.getOriginPopupImage()){case"adsorb_element":s.bottom-=24;var C={left:_.left-1,right:_.right+1,top:_.top-1,bottom:_.bottom+1};N=(I=C.left-s.left)<(D=s.right-C.right)?D:I,j=(T=C.top-s.top)<(R=s.bottom-C.bottom)?R:T;var A=u.width*j/u.height,k=u.height*N/u.width;A>o.width&&(A=o.width),k>o.height&&(k=o.height),N*k>j*A?I>D?s.right=C.left:s.left=C.right:T>R?s.bottom=C.top:s.top=C.bottom;break;case"adsorb_mouse":s.bottom-=24;var I,D,T,R,N,j,P=10;(g=input_mouse.getPositionClient()).x+=f.x,g.y+=f.y,N=(I=g.x-P-s.left)<(D=s.right-(g.x+P))?D:I,j=(T=g.y-P-s.top)<(R=s.bottom-(g.y+P))?R:T;A=u.width*j/u.height,k=u.height*N/u.width;A>o.width&&(A=o.width),k>o.height&&(k=o.height),N*k>j*A?I>D?s.right=g.x-P:s.left=g.x+P:T>R?s.bottom=g.y-P:s.top=g.y+P}(s.width=s.right-s.left,s.height=s.bottom-s.top,s.width<y+n.style_w)&&(E*=(d=s.width-n.style_w)/y,y=d);s.height<E+n.style_h&&(y*=(p=s.height-n.style_h)/E,E=p);switch(project.getOriginPopupImage()){default:case"center":var L=.5*(_.right+_.left),M=.5*(_.bottom+_.top);w=L-.5*(y+n.style_w),S=M-.5*(E+n.style_h),_.right-_.left<n.style_w&&(_.left=L-n.style_w/2,_.right=_.left+n.style_w),_.bottom-_.top<n.style_h&&(_.top=M-n.style_h/2,_.bottom=_.top+n.style_h);break;case"upper_left":w=_.left,S=_.top;break;case"upper_right":w=_.right-y,S=_.top;break;case"client_center":w=.5*s.width-.5*(y+n.style_w),S=.5*s.height-.5*(E+n.style_h);L=.5*(_.right+_.left),M=.5*(_.bottom+_.top);_.right-_.left<n.style_w&&(_.left=L-n.style_w/2,_.right=_.left+n.style_w),_.bottom-_.top<n.style_h&&(_.top=M-n.style_h/2,_.bottom=_.top+n.style_h)}_.right-=n.style_w,_.bottom-=n.style_h,n.begin_rect=_,w<s.left&&(w=s.left),S<s.top&&(S=s.top),w+y+n.style_w>s.right&&(w=s.right-y-n.style_w),S+E+n.style_h>s.bottom&&(S=s.bottom-E-n.style_h);var O=new Object;O.left=w,O.top=S,O.right=O.left+y,O.bottom=O.top+E,n.end_rect=O,"absolute"==project.getStylePositionPopupImage()&&(_.left-=c.left,_.top-=c.top,_.right-=c.left,_.bottom-=c.top,O.left-=c.left,O.top-=c.top,O.right-=c.left,O.bottom-=c.top,window_manager.existWindowRoot()||(m=page_expand_event_dispatcher.createEventHandler("revise_scroll")).setFunction(U)),project.getEnableScaleAnimationPopupImage()||(n.begin_rect=O,Q(e)),project.getEnableAlphaAnimationPopupImage()||X(e,1),i.style.pointerEvents="auto",project.getEnableAnimationPopupImage()?e.setExecuteFunc(W):e.setExecuteFunc(V),e.execute(4294967295)}function W(e){var t=e.getUserWork();t.type="fade_in",O();var n=1-t.anime_pos;(n*=.4)>0&&(t.anime_spd+=.05,t.anime_spd>.2&&(t.anime_spd=.2),t.anime_spd>n&&(t.anime_spd=n)),t.anime_pos+=t.anime_spd,t.anime_pos>.999&&(t.anime_spd=0,t.anime_pos=1,e.setExecuteFunc(V)),project.getEnableAlphaAnimationPopupImage()&&X(e,t.anime_pos),project.getEnableScaleAnimationPopupImage()&&Q(e)}function V(e){var t=e.getUserWork();t.type="show",t.anime_pos=1,t.anime_spd=0,t.frame=project.getTimeWaitClosePopupImage()/1e3*60,project.getEnableAlphaAnimationPopupImage()&&X(e,t.anime_pos),project.getEnableScaleAnimationPopupImage()&&Q(e),e.setExecuteFunc(H),e.execute(4294967295)}function H(e){e.getUserWork();O()}function q(e){var t=e.getUserWork();t.type="wait_before_close",O(),t.frame-=1,t.frame<0&&(project.getEnableAnimationPopupImage()?(i.style.pointerEvents="none",e.setExecuteFunc(Y)):e.setExecuteFunc(Z))}function Y(e){var t=e.getUserWork();t.type="fade_out",O();var n=0-t.anime_pos;(n*=.4)<0&&(t.anime_spd-=.2,t.anime_spd<n&&(t.anime_spd=n)),t.anime_pos+=t.anime_spd,t.anime_pos<.001&&(t.anime_spd=0,t.anime_pos=0,e.setExecuteFunc(Z)),project.getEnableAlphaAnimationPopupImage()&&X(e,t.anime_pos),project.getEnableScaleAnimationPopupImage()&&Q(e)}function Z(e){e.getUserWork();StyleDeclarationRemoveProperty(i.style,"will-change"),e.release()}function $(e){m&&(m.release(),m=null),DomNodeRemove(i),o=null,s&&b.release()}function Q(e){var t=e.getUserWork(),n=t.begin_rect,a=t.end_rect,o=t.anime_pos,s=(a.left-n.left)*o+n.left,c=(a.right-n.right)*o+n.right,_=(a.top-n.top)*o+n.top,u=(a.bottom-n.bottom)*o+n.bottom,d=c-s,p=u-_;if((m=i.style).left=s+"px",m.top=_+"px",m.width=d+"px",m.height=p+"px",r){var m=l.style,g=ImageGetNaturalSize(l),f=ComputedStyleGetPaddingWidth(ElementGetComputedStyle(i,null)),h=d/r.width,x=p/r.height;c=(s=r.left*h)+d,u=(_=r.top*x)+p,m.left=-s+f.left+"px",m.top=-_+f.top+"px",m.width=g.width*h+"px",m.height=g.height*x+"px",m.clip="rect("+_+"px "+c+"px "+u+"px "+s+"px)"}}function X(e,t){e.getUserWork();i.style.opacity=t}b.release=function(){l&&(g&&(g.release(),g=null),f&&(window_manager.existWindowRoot()&&f.release(),f=null),S(),A(),v(),E(),k(),o&&(o.release(),o=null),analyze_work_dictionary.removeAnalyzeWork(d),popup_image_container.remove(b),l=null)},b.suicide=function(){o?(b.setElementHitArea(null),s=!0):b.release()},b.setElementParent=function(e){t=window_manager.existWindowRoot()?window_manager.getWindowRoot().document.body:e},b.setElementAnchor=function(e){b._element_anchor=e,popup_image_container.attach(b)},b.getElementAnchor=function(){return b._element_anchor},b.setElementHitArea=function(e){v(),E(),k(),n=e,function(){if(!n)return;v(),n.addEventListener?n.addEventListener("mouseover",I,!1):n.attachEvent&&n.attachEvent("onmouseover",I)}(),y(),function(){if(!n)return;k(),p||(p=new DomNodeObserverRemoveFromDocument(n)).setFunction(b.suicide)}()},b.setElementBeginArea=function(e){a=e},b.setTrimRect=function(e){if(!r){S(),A();var t=DocumentCreateElement("div");ElementSetStyle(t,"overflow:hidden;"),ElementAddStyle(i,project.getStyleSheetExpandImagePopup(h)),t.appendChild(l),i=t,w(),C()}(r=ObjectCopy(e)).width=r.right-r.left,r.height=r.bottom-r.top},b.setOriginalURL=function(e){h=e,x&&x.setOriginalURL(e)},b.getOriginalURL=function(e){return h},b.getImage=function(){return l},b.popup=function(e){M()},b.ontrim=function(){},function(){n=null,a=null,o=null,i=l=e,s=!1,c=null,window_manager.existWindowRoot()?(f=new InputMouse(window_manager.getWindowRoot())).setInputMouse(input_mouse):f=input_mouse,h="",e=null,popup_image_container.initializePopupImage(b),AnalyzeWorkSetAnalyzedPopupReducedImage(d=AnalyzeWorkCreate(l));var t=new AnalyzeWorkDictionaryAttachOptions;t.SetOutsider(),window_manager.existWindowRoot()&&t.SetGuest(),analyze_work_dictionary.attachAnalyzeWork(d,t),w(),C(),(g=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){b.release()})),x=new ImageDragger(l)}()}function PopupImageContainer(){var e,t=this;t.release=function(){for(;t!=t._next;)t.remove(t._next)},t.attach=function(n){t.remove(n);var a=n._element_anchor,i=t._prev;if(a.compareDocumentPosition)for(;i!=t;){if(a.compareDocumentPosition(i._element_anchor)&document.DOCUMENT_POSITION_PRECEDING)break;i=i._prev}var o=i,r=o._next;o._next=n,r._prev=n,n._prev=o,n._next=r,e+=1},t.remove=function(t){if(t!=t._next){var n=t._prev,a=t._next;n._next=a,a._prev=n,t._prev=t,t._next=t,e-=1}},t.initializePopupImage=function(e){e._prev=e,e._next=e},t.getPrev=function(e){var n=e._prev;return n==e||n==t?null:n},t.getNext=function(e){var n=e._next;return n==e||n==t?null:n},t.getIndex=function(e){for(var n=0,a=t._next;a!=t&&a!=e;)n+=1,a=a._next;return n},t.getCount=function(){return e},t._prev=t,t._next=t,e=0}function ImageViewer(e){var t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f,h,x,b,v,y,E,w,S,C,A,k,I,D,T,R,N,j,P,L,M,O,U,z,F,B,G,W=this;function V(){H(),E&&(E.release(),E=null),(E=task_container.createTask()).setDestructorFunc((function(){E=null})),E.setExecuteFunc((function(){(w-=.2)<0&&(w=0,E.release(),q()),i.style.opacity=w})),E.execute(4294967295),task_execute_level|=TASK_EXECUTE_LEVEL_POPUP}function H(){var e;Y(),G&&(G.release(),G=null),i.style.pointerEvents="none";var t=h.length;for(e=0;e<t;e++){var n=h.pop(),a=n.element.style;void 0===n.value||(n.value?StyleDeclarationSetProperty(a,"overflow",n.value):StyleDeclarationRemoveProperty(a,"overflow"))}}function q(){oe(),DomNodeRemove(i),DomNodeRemove(a),T&&(window_manager.existWindowRoot()&&T.release(),T=null),k&&(k.release(),k=null),I&&(analyze_work_dictionary.removeAnalyzeWork(I),I=null),y&&(y.releaseChild(),y.release(),y=null)}function Y(){i.removeEventListener?(s.removeEventListener("mousedown",Z,!1),i.removeEventListener("mousemove",$,!1),i.removeEventListener("mouseup",Q,!1),i.removeEventListener("contextmenu",X,!1),r.removeEventListener("scroll",te,!1),window.MouseScrollEvent?r.removeEventListener("DOMMouseScroll",J,!1):r.removeEventListener("mousewheel",K,!1),r.removeEventListener("dragstart",ae,!1),t.removeEventListener("resize",ne,!1)):i.detachEvent&&(s.detachEvent("onmousedown",Z),i.detachEvent("onmousemove",$),i.detachEvent("onmouseup",Q),i.detachEvent("oncontextmenu",X),r.detachEvent("onscroll",te),r.detachEvent("onmousewheel",K),r.detachEvent("ondragstart",ae),t.detachEvent("onresize",ne))}function Z(e){if(T.setMouseEvent(e),T.getButtonLeft()&&(1&U||(U|=1,z.working=!1,z.pos_old=T.getPositionClient())),T.getButtonRight()&&(2&U||(U|=2,F.working=!1,F.mouse_start=T.getPositionClient(),F.origin=ObjectCopy(N),F.scale=ObjectCopy(j),F.zoom=ObjectCopy(P),F.rotate=ObjectCopy(L),F.pos=ObjectCopy(M),F.center=ObjectCopy(O))),(T.getButtonCenter()||T.getButtonLeft()&&T.getButtonRight())&&V(),4&MouseEventGetChangedButtons(e)){if(!e.preventDefault)return!1;e.preventDefault()}}function $(e){if(T.setMouseEvent(e),1&U){var t=T.getPositionClient(),n=z.pos_old,a=t.x-n.x,i=t.y-n.y;Math.sqrt(a*a+i*i)>=3&&(z.working=!0,b=!0),z.working&&(a||i)&&(r.scrollLeft-=a,r.scrollTop-=i,z.pos_old=t)}2&U&&function(){var e=.5*r.clientWidth,t=.5*r.clientHeight,n=F.mouse_start,a=T.getPositionClient(),i=a.x-n.x,o=a.y-n.y,l=n.x-e,g=n.y-t,f=a.x-e,h=a.y-t,b=Math.sqrt(l*l+g*g),y=Math.sqrt(f*f+h*h),E=Math.atan2(g,l),w=Math.atan2(h,f);if(!F.working)return void(y<100||Math.sqrt(i*i+o*o)<3||(x=!0,F.working=!0,F.mouse_start=T.getPositionClient(),F.origin=ObjectCopy(N),F.scale=ObjectCopy(j),F.zoom=ObjectCopy(P),F.rotate=ObjectCopy(L),F.pos=ObjectCopy(M),F.center=ObjectCopy(O)));P=F.zoom,L=F.rotate;var S=Math.atan2(h,f)-Math.atan2(g,l);S*=180/Math.PI,(L+=S)<-180&&(L+=360);L>180&&(L-=360);se("Zoom: "+(100*(P*=y/b)).toFixed(2)+" % , Rotate: "+L.toFixed(2)),j.y=j.x=P/B,(Y=new Matrix32).translate(-N.x,-N.y),Y.scale(j.x,j.y),Y.rotate(L*Math.PI/180);var C=new Array;C.push(Y.transformPosition({x:-N.x,y:-N.y})),C.push(Y.transformPosition({x:-N.x,y:N.y})),C.push(Y.transformPosition({x:N.x,y:-N.y})),C.push(Y.transformPosition({x:N.x,y:N.y}));var A,k=C[0].x,I=C[0].x,D=C[0].y,R=C[0].y,U=C.length;for(A=1;A<U;A++){var z=C[A];k>z.x&&(k=z.x),I<z.x&&(I=z.x),D>z.y&&(D=z.y),R<z.y&&(R=z.y)}var G=r.clientWidth,W=r.clientHeight,V=2*G+(I-k),H=2*W+(R-D);v=!0;var q=c.style;q.width=V+"px",q.height=H+"px",M={x:.5*V,y:.5*H},Y.translate(M.x,M.y),StyleDeclarationSetTransform(_.style,Y.toString());var Y,Z=Y.transformPosition(O);r.scrollLeft=Z.x-.5*G,r.scrollTop=Z.y-.5*W,(Y=new Matrix32).translate(-b-5,-b-5),Y.translate(Z.x,Z.y),StyleDeclarationSetTransform(d.style,Y.toString()),d.style.width=2*b+"px",d.style.height=2*b+"px",(Y=new Matrix32).translate(-2.5,-2.5),Y.rotate(E),Y.translate(Z.x,Z.y),StyleDeclarationSetTransform(p.style,Y.toString()),p.style.width=b+5+"px",(Y=new Matrix32).translate(-2.5,-2.5),Y.rotate(w),Y.translate(Z.x,Z.y),StyleDeclarationSetTransform(m.style,Y.toString()),m.style.width=y+5+"px",s.appendChild(u)}(),z.working?_e("move"):F.working?_e("crosshair"):ce()}function Q(e){T.setMouseEvent(e),1&U&&(T.getButtonLeft()||(U&=-2,z.working=!1,b||de(1),b=!1)),2&U&&(T.getButtonRight()||(U&=-3,F.working=!1,DomNodeRemove(u))),b||ce()}function X(e){if(T.setMouseEvent(e),x=!0,(T.getKeyShift()||T.getKeyCtrl())&&(x=!1),x){if(x=!1,!e.preventDefault)return!1;e.preventDefault()}}function J(e){ee(e,e.detail)}function K(e){ee(e,-e.wheelDelta/40)}function ee(e,t){T.setMouseEvent(e);var n=!1;if(T.getButtonRight()&&(x=!0,ue(t),F.working=!1,DomNodeRemove(u),F.mouse_start=T.getPositionClient(),n=!0),T.getButtonLeft()&&(_e(t>0?"zoom-out":"zoom-in"),le(-t),b=!0,n=!0),n){if(x=!0,!e.preventDefault)return!1;e.preventDefault()}}function te(e){if(v)v=!1;else if(WindowGetDevicePixelRatio(window)==B){var t=r.scrollLeft,n=r.scrollTop,a=r.scrollWidth-r.clientWidth,i=r.scrollHeight-r.clientHeight,o=r.clientWidth,l=r.clientHeight,s=new Matrix32;s.translate(-N.x,-N.y),s.scale(j.x,j.y),s.rotate(L*Math.PI/180),s.translate(M.x,M.y),s.invert(),O=s.transformPosition({x:t+.5*o,y:n+.5*l});if(t<=2);else if(n<=2);else if(t>=a-2);else if(!(n>=i-2))return;V()}}function ne(e){var n=DocumentGetClientSize(t.document);(f=i.style).width=n.width+"px",f.height=n.height+"px",B=WindowGetDevicePixelRatio(window),j.y=j.x=P/B;var a=new Matrix32;a.translate(-N.x,-N.y),a.scale(j.x,j.y),a.rotate(L*Math.PI/180);var o=new Array;o.push(a.transformPosition({x:-N.x,y:-N.y})),o.push(a.transformPosition({x:-N.x,y:N.y})),o.push(a.transformPosition({x:N.x,y:-N.y})),o.push(a.transformPosition({x:N.x,y:N.y}));var l,s=o[0].x,u=o[0].x,d=o[0].y,p=o[0].y,m=o.length;for(l=1;l<m;l++){var g=o[l];s>g.x&&(s=g.x),u<g.x&&(u=g.x),d>g.y&&(d=g.y),p<g.y&&(p=g.y)}var f,h=r.clientWidth,x=r.clientHeight,b=2*h+(u-s),y=2*x+(p-d);v=!0,(f=c.style).width=b+"px",f.height=y+"px",M={x:.5*b,y:.5*y},a.translate(M.x,M.y),StyleDeclarationSetTransform(_.style,a.toString());var E=a.transformPosition(O);r.scrollLeft=E.x-.5*h,r.scrollTop=E.y-.5*x}function ae(e){if(!e.preventDefault)return!1;e.preventDefault()}function ie(e){var t=e.getImage(),n=ImageGetNaturalSize(t);oe(),ElementSetStyle(_=DocumentCreateElement("img"),CSSTextGetInitialImageElement()),ElementAddStyle(_,"position:absolute; left:0px; top:0px; border:5px solid #666; cursor:inherit;");var a=_.style;a.width=n.width+"px",a.height=n.height+"px",_.src=t.src,AnalyzeWorkSetInvalid(D=AnalyzeWorkCreate(_));var i=new AnalyzeWorkDictionaryAttachOptions;i.SetOutsider(),window_manager.existWindowRoot()&&i.SetGuest(),analyze_work_dictionary.attachAnalyzeWork(D,i),s.appendChild(_),re()}function oe(){D&&(analyze_work_dictionary.removeAnalyzeWork(D),D=null),_&&(DomNodeRemove(_),_=null)}function re(){var e=ImageGetNaturalSize(f.getImage()),t=(e.width+10)/B,n=(e.height+10)/B,a=r.clientWidth,i=r.clientHeight,o=R;if(o==ImageViewer.SCALE_MODE_AUTO)if(t<a&&n<i)o=ImageViewer.SCALE_MODE_NO_SCALE;else{var l=1/B;t>a&&(l*=a/t),o=n*l*.75>i?ImageViewer.SCALE_MODE_LONG_VERTICAL:ImageViewer.SCALE_MODE_SHOW_ALL}if(o==ImageViewer.SCALE_MODE_LONG_VERTICAL)if(t<a&&n<i)o=ImageViewer.SCALE_MODE_NO_SCALE;else if(t>a){n*(s=a/t)<i&&(o=ImageViewer.SCALE_MODE_SHOW_ALL)}l=1/B;var s=1/B;switch(o){case ImageViewer.SCALE_MODE_LONG_VERTICAL:t>a&&(s=l*=a/t);break;case ImageViewer.SCALE_MODE_SHOW_ALL:t>a&&(l*=a/t),n>i&&(s*=i/n),l>s?l=s:s=l;break;case ImageViewer.SCALE_MODE_SHOW_FULL:(l*=a/t)>(s*=i/n)?l=s:s=l}var u=2*a+t*(P=l*B),d=2*i+n*P;N={x:.5*e.width+5,y:.5*e.height+5},j={x:l,y:s},L=0,M={x:.5*u,y:.5*d};var p,m=.5*u-.5*a;if(o===ImageViewer.SCALE_MODE_LONG_VERTICAL)p=.5*d-(e.height+10)*s*.5;else p=.5*d-.5*i;v=!0;var g=c.style;g.width=u+"px",g.height=d+"px";var h=new Matrix32;h.translate(-N.x,-N.y),h.scale(j.x,j.y),h.rotate(L*Math.PI/180),h.translate(M.x,M.y),StyleDeclarationSetTransformOrigin(_.style,"0% 0%"),StyleDeclarationSetTransform(_.style,h.toString()),h.invert(),O=h.transformPosition({x:m+.5*a,y:p+.5*i}),r.scrollLeft=m,r.scrollTop=p}function le(e){var t=P;if(P*=e>0?1+.01*e:1/(1-.01*e),e>0){for(var n=1;t>=1;)t/=2,n*=2;n<P&&(P=n)}else{n=0;for(t>1&&(n=1);t>2;)t/=2,n*=2;n>P&&(P=n)}se("Zoom: "+(100*P).toFixed(2)+" %"),j.y=j.x=P/B;var a=new Matrix32;a.translate(-N.x,-N.y),a.scale(j.x,j.y),a.rotate(L*Math.PI/180);var i=new Array;i.push(a.transformPosition({x:-N.x,y:-N.y})),i.push(a.transformPosition({x:-N.x,y:N.y})),i.push(a.transformPosition({x:N.x,y:-N.y})),i.push(a.transformPosition({x:N.x,y:N.y}));var o,l=i[0].x,s=i[0].x,u=i[0].y,d=i[0].y,p=i.length;for(o=1;o<p;o++){var m=i[o];l>m.x&&(l=m.x),s<m.x&&(s=m.x),u>m.y&&(u=m.y),d<m.y&&(d=m.y)}var g=r.clientWidth,f=r.clientHeight,h=2*g+(s-l),x=2*f+(d-u);v=!0;var b=c.style;b.width=h+"px",b.height=x+"px",M={x:.5*h,y:.5*x},a.translate(M.x,M.y),StyleDeclarationSetTransform(_.style,a.toString());var y=a.transformPosition(O);r.scrollLeft=y.x-.5*g,r.scrollTop=y.y-.5*f}function se(e){if(y){S&&S.release(),g.nodeValue=e,i.appendChild(l);var t=180;(S=task_container.createTask(y)).setDestructorFunc((function(){S=null})),S.setExecuteFunc((function(){var e=C;(t-=1)<0?(C-=.1)<0&&(C=0,S.release(),DomNodeRemove(l)):(C+=.2)>1&&(C=1),e!=C&&(l.style.opacity=C)})),S.execute(4294967295)}}function ce(){if(s.style.cursor="default",A&&A.release(),y){var e=60;(A=task_container.createTask(y)).setDestructorFunc((function(){A=null})),A.setExecuteFunc((function(){(e-=1)<0&&(s.style.cursor="none",A.release())})),A.execute(4294967295)}}function _e(e){s.style.cursor=e,A&&A.release()}function ue(e){var t=null;e>0&&(t=popup_image_container.getNext(f)),e<0&&(t=popup_image_container.getPrev(f)),t&&ie(f=t),se(popup_image_container.getIndex(f)+1+" / "+popup_image_container.getCount())}function de(e){(R+=e)<0&&(R+=ImageViewer.SCALE_MODE_MAX),R>=ImageViewer.SCALE_MODE_MAX&&(R-=ImageViewer.SCALE_MODE_MAX),se("ScaleMode: "+['"AUTO"','"NO SCALE"','"LONG VERTICAL"','"SHOW ALL"','"SHOW FULL"'][R]),re()}W.release=function(){H(),q()},W.setInputMouse=function(e){T.setInputMouse(e),x=T.getButtonRight(),b=T.getButtonLeft()},function(){var _=(t=window_manager.getWindowRoot()).document,S=_.documentElement;n=_.body,T=window_manager.existWindowRoot()?new InputMouse(t):input_mouse,x=T.getButtonRight(),b=T.getButtonLeft(),v=!1,R=ImageViewer.SCALE_MODE_AUTO,N={x:0,y:0},j={x:1,y:1},P=1,L=0,M={x:0,y:0},O={x:0,y:0},U=0,z=new Object,F=new Object,B=WindowGetDevicePixelRatio(window),f=e,e=null,h=new Array;var A,D=[{element:S,value_list:["hidden","initial"]},{element:n,value_list:["hidden"]}],H=D.length;for(A=0;A<H;A++){var q,ee=D[A],oe=ee.value_list,re=ee.element,_e=re.style;h.push({element:re,value:StyleDeclarationGetPropertyValue(_e,"overflow")});var pe=oe.length;for(q=0;q<pe;q++)_e.overflow=oe[q]}ElementSetStyle(i=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(i,"position:fixed; left:0px; top:0px; z-index:2147483646; line-height:0;");var me=DocumentGetClientSize(_);(_e=i.style).width=me.width+"px",_e.height=me.height+"px",ElementSetStyle(o=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(o,"background:#fcfcfc; color:#000; font-size:14px; top:10px; right:30px; line-height:1; position:absolute; border-radius:10px; box-shadow:0px 0px 5px #c0c0c0; pointer-events:inherit;");var ge="margin:0px; padding:0px; font-size:12px; font-weight:bold; text-align:center; width:24px; height:24px; display:inline-block; pointer-events:inherit;",fe="vertical-align:top; margin:0px -6px; pointer-events:inherit;",he=DocumentCreateElement("button");he.title="prev image",ElementSetStyle(he,CSSTextGetInitialButtonElement()),ElementAddStyle(he,ge),he.onclick=function(){ue(-1)};var xe=DocumentCreateElement("img");ElementSetStyle(xe,CSSTextGetInitialImageElement()),ElementAddStyle(xe,fe),xe.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIjjI+py50AVzwQvIqwqXpHzmXgKI4h9ZklenpW+bpS7NT2HRQAOw==",he.appendChild(xe);var be=DocumentCreateElement("button");be.title="next image",ElementSetStyle(be,CSSTextGetInitialButtonElement()),ElementAddStyle(be,ge),be.onclick=function(){ue(1)};var ve=DocumentCreateElement("img");ElementSetStyle(ve,CSSTextGetInitialImageElement()),ElementAddStyle(ve,fe),ve.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIljI+py50AFoxn0gqRzWbqnXkYaH2k2JEBum6jeaUx99DOjedBAQA7",be.appendChild(ve);var ye=DocumentCreateElement("button");ye.title="zoom out",ElementSetStyle(ye,CSSTextGetInitialButtonElement()),ElementAddStyle(ye,ge),ye.onclick=function(){le(-10)};var Ee=DocumentCreateElement("img");ElementSetStyle(Ee,CSSTextGetInitialImageElement()),ElementAddStyle(Ee,fe),Ee.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIXjI+py+0P4wK0WoquBnnb7mHSSJZmWQAAOw==",ye.appendChild(Ee);var we=DocumentCreateElement("button");we.title="zoom in",ElementSetStyle(we,CSSTextGetInitialButtonElement()),ElementAddStyle(we,ge),we.onclick=function(){le(10)};var Se=DocumentCreateElement("img");ElementSetStyle(Se,CSSTextGetInitialImageElement()),ElementAddStyle(Se,fe),Se.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIfjI+pywYP2oFRBmovZLTv6XVIKILkw30SZrGrmsVSAQA7",we.appendChild(Se);var Ce=DocumentCreateElement("button");Ce.title="change scale mode",ElementSetStyle(Ce,CSSTextGetInitialButtonElement()),ElementAddStyle(Ce,ge),Ce.onclick=function(){de(1)};var Ae=DocumentCreateElement("img");ElementSetStyle(Ae,CSSTextGetInitialImageElement()),ElementAddStyle(Ae,fe),Ae.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIshI9pwe2+EDwhrkftZTLWm33Q2GzPaZ4Tya3A98KVKJXZS2EWHHO3qlIIEQUAOw==",Ce.appendChild(Ae);var ke=DocumentCreateElement("button");ke.title="download",ElementSetStyle(ke,CSSTextGetInitialButtonElement()),ElementAddStyle(ke,ge),ke.onclick=function(){se("Wait...");f.getImage();var e=new Downloader;e.setURL(f.getOriginalURL()),e.setSaveAs(!1),e.setSilent(!1),e.setAllowSameRequest(!0),e.onprogress=function(e){var t=0,n=e.bytesLoaded,a=e.bytesTotal;a&&(t=Math.floor(n/a*100)),se("Loading... "+t+"% "+n+"Byte")},e.oncomplete=function(e){e.result?se("Download success"):se("Download failure ( "+e.error+" )")},e.start()};var Ie=DocumentCreateElement("img");ElementSetStyle(Ie,CSSTextGetInitialImageElement()),ElementAddStyle(Ie,fe),Ie.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIgjA8Jx63b4otSUWcvyjpM+oScIX6YqKGduULdW8ZyXAAAOw==",ke.appendChild(Ie);var De=DocumentCreateElement("button");De.title="close and scroll",ElementSetStyle(De,CSSTextGetInitialButtonElement()),ElementAddStyle(De,ge),De.onclick=function(){V(),f.getElementAnchor().scrollIntoView()};var Te=DocumentCreateElement("img");ElementSetStyle(Te,CSSTextGetInitialImageElement()),ElementAddStyle(Te,fe),Te.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIwRBypatDr4HnJxTpPtbc9zmkRMl0iVZKetpmrajEZ7M5MjI1p+LZ475PpbpLholgAADs=",De.appendChild(Te);var Re=DocumentCreateElement("button");Re.title="close",ElementSetStyle(Re,CSSTextGetInitialButtonElement()),ElementAddStyle(Re,ge),Re.onclick=function(){V()};var Ne=DocumentCreateElement("img");ElementSetStyle(Ne,CSSTextGetInitialImageElement()),ElementAddStyle(Ne,fe),Ne.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIgjI+py50AFQQvnrlw0Hna5jlG6HifZHGIqm7n+Iry3BQAOw==",Re.appendChild(Ne),ElementSetStyle(r=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(r,"position:absolute; left:0px; top:0px; right:0px; bottom:0px; overflow:scroll; line-height:0; user-select:none; pointer-events:inherit; -webkit-user-select:none; -moz-user-select:none; -khtml-user-select:none;"),ElementSetStyle(s=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ce(),ElementSetStyle(c=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(c,"background:#000; opacity:0.9; width:0px; height:0px; position:absolute; cursor:inherit; pointer-events:inherit;"),ElementSetStyle(l=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(l,"background:#fcfcfc; color:#000; font-size:14px; top:10px; left:10px; line-height:1; position:absolute; padding:5px 10px; border-radius:10px; box-shadow:0px 0px 5px #c0c0c0; pointer-events:inherit;"),g=document.createTextNode(""),l.appendChild(g),C=0,(k=new DomNodeObserverRemoveFromDocument(i)).setFunction(W.release),AnalyzeWorkSetInvalid(I=AnalyzeWorkCreate(i));var je=new AnalyzeWorkDictionaryAttachOptions;je.SetOutsider(),window_manager.existWindowRoot()&&je.SetGuest(),analyze_work_dictionary.attachAnalyzeWork(I,je),i.appendChild(r),r.appendChild(s),s.appendChild(c),a=DocumentCreateElement("div"),n.appendChild(a),(a.attachShadow?a.attachShadow({mode:"closed"}):a).appendChild(i),Y(),i.addEventListener?(s.addEventListener("mousedown",Z,!1),i.addEventListener("mousemove",$,!1),i.addEventListener("mouseup",Q,!1),i.addEventListener("contextmenu",X,!1),r.addEventListener("scroll",te,!1),window.MouseScrollEvent?r.addEventListener("DOMMouseScroll",J,!1):r.addEventListener("mousewheel",K,!1),r.addEventListener("dragstart",ae,!1),t.addEventListener("resize",ne,!1)):i.attachEvent&&(s.attachEvent("onmousedown",Z),i.attachEvent("onmousemove",$),i.attachEvent("onmouseup",Q),i.attachEvent("oncontextmenu",X),r.attachEvent("onscroll",te),r.attachEvent("onmousewheel",K),r.attachEvent("ondragstart",ae),t.attachEvent("onresize",ne)),ElementSetStyle(u=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(u,"cursor:inherit;"),ElementSetStyle(d=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(d,"position:absolute; left:0px; top:0px; cursor:inherit; opacity:0.25; background:#FFF; border-radius:50%; border:5px dotted #444;"),StyleDeclarationSetTransformOrigin(d.style,"0% 0%"),ElementSetStyle(p=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(p,"position:absolute; left:0px; top:0px; cursor:inherit; opacity:0.25; height:3px; background:#F88; border:1px solid #800; border-radius:2.5px;"),StyleDeclarationSetTransformOrigin(p.style,"0% 0%"),ElementSetStyle(m=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(m,"position:absolute; left:0px; top:0px; cursor:inherit; opacity:0.25; height:3px; background:#88F; border:1px solid #008; border-radius:2.5px;"),StyleDeclarationSetTransformOrigin(m.style,"0% 0%"),u.appendChild(d),u.appendChild(p),u.appendChild(m),ie(f),function(){function e(e){m=e;var t,n,a=o.style;switch(m){case ImageViewer.MENU_TYPE_HORIZONTAL:t=h,a.width="auto",a.padding="4px 10px";break;case ImageViewer.MENU_TYPE_VERTICAL:t=x,a.width="24px",a.padding="10px 4px"}var i=t.length;for(n=0;n<i;n++)o.appendChild(t[n])}function t(e){DomNodeRemove(o),e.setExecuteFunc(n),e.execute(4294967295)}function n(t){var n=r.clientWidth,i=T.getPositionClient();i.y<=g?(e(ImageViewer.MENU_TYPE_HORIZONTAL),t.setExecuteFunc(a)):i.x>=n-g&&(e(ImageViewer.MENU_TYPE_VERTICAL),t.setExecuteFunc(a))}function a(e){i.appendChild(o),e.setExecuteFunc(l),e.execute(4294967295)}function l(e){(f+=.2)>1&&(f=1,e.setExecuteFunc(s)),o.style.opacity=f}function s(e){e.setExecuteFunc(c),e.execute(4294967295)}function c(e){var t=r.clientWidth,n=T.getPositionClient();m==ImageViewer.MENU_TYPE_HORIZONTAL&&n.y>g&&e.setExecuteFunc(_),m==ImageViewer.MENU_TYPE_VERTICAL&&n.x<t-g&&e.setExecuteFunc(_)}function _(e){e.getUserWork().frame=0,e.setExecuteFunc(u),e.execute(4294967295)}function u(e){var t=e.getUserWork();t.frame-=1,t.frame<0&&e.setExecuteFunc(d)}function d(e){e.setExecuteFunc(p),e.execute(4294967295)}function p(e){(f-=.1)<0&&(f=0,e.setExecuteFunc(t)),o.style.opacity=f}var m,g=50,f=1,h=[he,be,ye,we,Ce,ke,De,Re],x=[Re,De,ke,Ce,we,ye,he,be];function b(){if(o.removeEventListener?o.removeEventListener("mouseover",b,!1):o.detachEvent&&o.detachEvent("onmouseover",b),y){var e=task_container.createTask(y);e.setDestructorFunc((function(){e=null})),e.setExecuteFunc(a),e.execute(4294967295)}}e(ImageViewer.MENU_TYPE_HORIZONTAL),i.appendChild(o),o.addEventListener?o.addEventListener("mouseover",b,!1):o.attachEvent&&o.attachEvent("onmouseover",b)}(),(y=task_container.createTask()).setDestructorFunc((function(){y=null})),w=0,(E=task_container.createTask(y)).setDestructorFunc((function(){E=null})),E.setExecuteFunc((function(){(w+=.2)>1&&(w=1,E.release()),i.style.opacity=w})),E.execute(4294967295),task_execute_level&=~TASK_EXECUTE_LEVEL_POPUP,(G=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){W.release()}))}()}function ImageDragger(e){function t(e){o&&(o.release(),o=null),null!==r&&(clearTimeout(r),r=null)}function n(e){if(input_mouse.setMouseEvent(e),t(),l)try{var n=e.dataTransfer;n.setData("url",l),n.setData("text",l)}catch(e){}r=setTimeout((function(){r=null,o=new ImageDropper}),1)}function a(e){"none"==e.dataTransfer.dropEffect&&t()}function i(){e.removeEventListener?(e.removeEventListener("dragstart",n,!1),e.removeEventListener("dragend",a,!1)):e.detachEvent&&(e.detachEvent("ondragstart",n),e.detachEvent("ondragend",a))}this.release=function(){i(),t()},this.setOriginalURL=function(e){l=e};var o=null,r=null,l=null;i(),e.addEventListener?(e.addEventListener("dragstart",n,!1),e.addEventListener("dragend",a,!1)):e.attachEvent&&(e.attachEvent("ondragstart",mouseMove),e.attachEvent("ondragend",a))}function ImageDropper(){var e,t,n,a,i,o,r,l,s,c=this;function _(){var e;u(),(e=task_container.createTask()).setDestructorFunc((function(){e=null})),e.setExecuteFunc((function(){if((o-=.2)<0)return o=0,e.release(),void d();t.style.opacity=o})),e.execute(4294967295)}function u(){p(),s&&(s.release(),s=null),t.style.pointerEvents="none",i&&i.releaseChild()}function d(){DomNodeRemove(e),r&&(r.release(),r=null),l&&(analyze_work_dictionary.removeAnalyzeWork(l),l=null),i&&(i.releaseChild(),i.release(),i=null)}function p(){n.removeEventListener?(n.removeEventListener("dragenter",g,!1),n.removeEventListener("dragleave",f,!1),n.removeEventListener("dragover",m,!1),n.removeEventListener("drop",x,!1)):n.detachEvent&&(n.detachEvent("ondragenter",g),n.detachEvent("ondragleave",f),n.detachEvent("ondragover",m),n.detachEvent("ondrop",x))}function m(e){if(g(e),!e.preventDefault)return!1;e.preventDefault()}function g(e){h(e.currentTarget)}function f(e){var t,n;t=e.currentTarget,(n=t.style).backgroundImage="linear-gradient(to bottom, #f8f8f8, #e8e8e8)",n.boxShadow="0px 0px 2px #808080"}function h(e){var t=e.style;t.backgroundImage="linear-gradient(to top, #f0f4ff, #c8cff0)",t.boxShadow="0px 0px 6px #6070d0"}function x(e){f(e);var t=e.dataTransfer.getData("url"),i=new b(a),o=new Downloader;if(o.setURL(t),o.setSaveAs(!1),o.setSilent(!1),o.setAllowSameRequest(!0),o.onprogress=function(e){var t=0,a=e.bytesLoaded,o=e.bytesTotal;o&&(t=a/o),i.setValue(t),n.title="Loading... "+Math.floor(100*t)+"% "+a+"Byte"},o.oncomplete=function(e){var t,i,o=document.createElementNS("http://www.w3.org/2000/svg","path");DomNode_InsertLastChild(a,o),e.error?(o.setAttribute("fill","rgba(255,128,128,0.75)"),o.setAttribute("d","M78,16.099c-0.174,0.404-0.346,0.75-0.519,1.037c-0.174,0.289-0.376,0.599-0.607,0.908c-3.543,4.736-7.181,9.417-10.564,13.982c-3.384,4.565-9.663,11.308-9.786,13.975c-0.041,0.892,1.771,3.257,2.723,4.927c0.95,1.669,1.967,3.428,3.047,5.271c1.081,1.844,2.24,3.786,3.479,5.832c1.237,2.046,2.641,4.252,4.017,6.57c0.35,0.589,0.655,1.195,0.929,1.771c0.274,0.576,0.469,1.138,0.584,1.685c-0.397-0.225-0.595-0.337-0.992-0.562c0.173,0.57,0.257,0.855,0.43,1.426c-0.346,0.035-0.519,0.053-0.864,0.088c0.207,0.847,0.312,1.271,0.519,2.118c-0.951-0.778-1.425-1.167-2.375-1.945c0.276,1.176,0.415,1.763,0.691,2.938c-0.536-0.294-0.805-0.442-1.341-0.736c-0.241,0.813-0.361,1.219-0.603,2.031c-0.984-0.985-1.479-1.477-2.463-2.462c0.207,1.072,0.311,1.608,0.518,2.681c-0.535-0.501-0.804-0.755-1.34-1.256c-0.104,0.207-0.157,0.313-0.261,0.52c-0.276-0.312-0.415-0.466-0.691-0.777c-0.035,0.415-0.049,0.622-0.084,1.037c-0.489-0.49-0.886-0.914-1.188-1.275c-0.302-0.36-0.584-0.763-0.845-1.189c-1.913-3.129-3.823-6.202-5.595-9.184c-1.771-2.982-5.085-8.793-5.121-8.794c-0.361-0.007-2.664,4.35-3.931,6.481c-1.268,2.133-2.544,4.338-3.825,6.613c-1.282,2.276-2.592,4.676-3.932,7.196c-1.338,2.521-2.758,5.265-4.256,8.23c-0.116,0.23-0.222,0.444-0.323,0.646c-0.102,0.201-0.239,0.427-0.413,0.672c-0.172,0.244-0.382,0.502-0.626,0.775c-0.244,0.272-0.555,0.6-0.929,0.974c-0.138-0.622-0.207-0.933-0.345-1.555c-0.881,0.881-1.322,1.321-2.204,2.202c0.276-1.382,0.496-2.075,0.772-3.457C28.579,86.444,28,86.921,27,87.871c0-0.674,0-1.01,0-1.684c-1,0.432-1.455,0.646-2.371,1.078c0.536-1.244,0.763-1.865,1.299-3.109c-0.985,0.743-1.498,1.113-2.482,1.856c0.242-0.812,0.352-1.217,0.594-2.029c-0.536,0.104-0.81,0.155-1.345,0.259c0.501-1.02,0.75-1.528,1.251-2.548c-0.777,0.483-1.167,0.727-1.944,1.21c0.085-0.345,0.194-0.706,0.323-1.08c0.129-0.375,0.335-0.756,0.54-1.123c3.2-5.729,6.356-12.1,9.828-17.891s10.755-14.004,10.911-17.156c0.104-2.084-4.027-7.568-5.942-11.296c-1.915-3.728-3.904-7.594-5.768-11.519c-0.175-0.368-0.339-0.755-0.497-1.144c-0.159-0.389-0.28-0.742-0.367-1.06c0.45,0.104,0.674,0.155,1.124,0.259c-0.311-0.882-0.468-1.323-0.779-2.204c0.536,0.035,0.804,0.052,1.34,0.087c-0.069-0.898-0.104-1.348-0.174-2.246c1.02,0.933,1.532,1.399,2.552,2.333c-0.432-1.487-0.626-2.229-1.058-3.716C34.812,15.702,35,15.978,36,16.531c0-0.778,0-1.167,0-1.944c1,0.968,1.429,1.452,2.396,2.42c-0.259-0.933-0.398-1.401-0.658-2.334c0.709,0.64,1.057,0.959,1.765,1.599c0.259-0.519,0.387-0.777,0.646-1.296c0.432,0.577,0.784,1.109,1.057,1.599c0.273,0.49,0.627,1.075,0.971,1.728c1.632,3.105,3.076,6.26,4.473,9.012c1.397,2.752,4.033,8.012,4.083,8.016c1.278,0.091,10.41-14.775,15.943-21.78c0.385-0.487,0.822-0.943,1.255-1.36c0.432-0.417,0.964-0.756,1.598-1.016c-0.121,0.449-0.182,0.674-0.303,1.123c0.674-0.501,1.013-0.751,1.688-1.252c-0.208,1.002-0.313,1.504-0.521,2.506c1.21-0.916,1.814-1.375,3.024-2.29c0.035,0.777,0.054,1.167,0.089,1.944c0.951-0.328,1.426-0.493,2.377-0.821c-0.605,1.175-0.907,1.764-1.513,2.938c1.072-0.743,1.606-1.115,2.679-1.858c-0.259,0.743-0.39,1.115-0.648,1.858c0.501-0.293,0.753-0.441,1.254-0.735c-0.501,0.899-0.753,1.348-1.254,2.247C77.04,16.54,77.36,16.393,78,16.099z"),n.title="Download failure ( "+e.error+" )"):(o.setAttribute("fill","rgba(96,255,96,0.75)"),o.setAttribute("d","M18.882,60.969c-0.601-0.636-1.068-1.181-1.386-1.635c-0.318-0.454-0.478-0.892-0.478-1.315c0-0.545,0.266-1.093,0.795-1.638c0.53-0.545,1.211-1.029,2.045-1.453c0.832-0.424,1.74-0.767,2.725-1.024c0.983-0.257,1.931-0.384,2.84-0.384c0.969,0,1.764,0.127,2.384,0.384c0.62,0.257,1.22,0.691,1.795,1.297c2.332,2.453,4.444,4.959,6.336,7.518c1.893,2.56,5.564,7.927,5.564,7.927c0.546-0.063,3.572-9.229,5.45-13.604c1.877-4.376,3.869-8.66,5.974-12.854c2.104-4.194,4.361-8.331,6.77-12.403c2.407-4.072,5.063-8.175,7.836-12.285c1.031-1.529,2.551-2.681,4.564-3.407S76.691,15,79.841,15c0.938,0,1.694,0.136,2.27,0.408s0.865,0.637,0.865,1.091c0,0.394-0.091,0.787-0.272,1.181s-0.461,0.85-0.818,1.363c-6.759,9.716-13.279,19.88-18.76,30.161c-5.623,10.548-10.722,22.024-14.673,33.254c-0.288,0.817-0.939,1.481-2,1.906C45.393,84.788,43.834,85,41.774,85c-0.969,0-1.786-0.03-2.451-0.091c-0.667-0.062-1.228-0.175-1.682-0.341c-0.454-0.166-0.834-0.371-1.136-0.613c-0.304-0.242-0.558-0.552-0.771-0.908c-1.26-2.109-2.566-4.097-3.793-5.93c-1.227-1.831-2.5-3.612-3.816-5.338c-1.317-1.726-2.725-3.467-4.224-5.223S20.729,62.922,18.882,60.969z"),n.title="Download success"),t=180,(i=task_container.createTask()).setDestructorFunc((function(){i=null})),i.setExecuteFunc((function(){if((t-=1)<0)return _(),void i.release()})),i.execute(4294967295)},o.start(),!e.preventDefault)return!1;e.preventDefault()}function b(e){var t;this.release=function(){DomNodeRemove(t)},this.setValue=function(e){var n,a,i,o,r,l,s,c,_,u,d,p,m,g,f,h;n=50,a=50,i=48,l=.5*((r=(o=-90)+360*e)-o)+o,s=o*Math.PI/180,c=l*Math.PI/180,_=r*Math.PI/180,u=Math.cos(s)*i+n,d=Math.sin(s)*i+a,p=Math.cos(c)*i+n,m=Math.sin(c)*i+a,g=Math.cos(_)*i+n,f=Math.sin(_)*i+a,(h=new Array).push("M"),h.push(n),h.push(a),h.push("L"),h.push(u),h.push(d),h.push("A"),h.push(i),h.push(i),h.push(o),h.push(0),h.push(1),h.push(p),h.push(m),h.push("A"),h.push(i),h.push(i),h.push(l),h.push(0),h.push(1),h.push(g),h.push(f),h.push("Z"),t.setAttribute("d",h.join(" "))},t=document.createElementNS("http://www.w3.org/2000/svg","path"),DomNode_InsertFirstChild(e,t),t.setAttribute("fill","rgba(0,128,255,0.1)")}c.release=function(){u(),d()},function(){e=DocumentCreateElement("div"),(r=new DomNodeObserverRemoveFromDocument(e)).setFunction(c.release),AnalyzeWorkSetInvalid(l=AnalyzeWorkCreate(e));var u,d=new AnalyzeWorkDictionaryAttachOptions;d.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(l,d),document.body.appendChild(e),u=e.attachShadow?e.attachShadow({mode:"closed"}):e,ElementSetStyle(t=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(t,"background:#fcfcfc; color:#000; font-size:14px; line-height:1; position:fixed; padding:15px; z-index:2147483646; border-radius:10px; box-shadow:0px 0px 5px #c0c0c0; pointer-events:inherit;"),u.appendChild(t);ElementAddStyle(n=document.createElement("div"),"margin:0px; padding:0px; background:#ffc; font-size:12px; font-weight:bold; text-align:center; width:100px; height:100px; display:inline-block; pointer-events:inherit; border-radius:10px; overflow:hidden;"),h(n),t.appendChild(n),(a=document.createElementNS("http://www.w3.org/2000/svg","svg")).innerHTML='<rect x="10" y="80" fill="#252525" width="80" height="10"/><polygon fill="#252525" points="50,75 20,45 40,45 40,10 60,10 60,45 80,45 "/>',n.appendChild(a),p(),n.addEventListener?(n.addEventListener("dragenter",g,!1),n.addEventListener("dragleave",f,!1),n.addEventListener("dragover",m,!1),n.addEventListener("drop",x,!1)):n.attachEvent&&(n.attachEvent("ondragenter",g),n.attachEvent("ondragleave",f),n.attachEvent("ondragover",m),n.attachEvent("ondrop",x));var b=ElementGetBoundingClientRect(t),v=input_mouse.getPositionClient(),y=b.right-b.left,E=b.bottom-b.top,w=v.x-.5*y,S=v.y-.5*E,C=window_manager.getPositionFromRoot();w-=C.x,S-=C.y;var A,k=t.style;k.left=w+"px",k.top=S+"px",(i=task_container.createTask()).setDestructorFunc((function(){i=null})),function(){o=0;var e=task_container.createTask(i);e.setDestructorFunc((function(){e=null})),e.setExecuteFunc((function(){(o+=.2)>1&&(o=1,e.release()),t.style.opacity=o})),e.execute(4294967295)}(),(A=task_container.createTask(i)).setDestructorFunc((function(){A=null})),A.setExecuteFunc((function(){var e=input_mouse.getPositionClient(),n=window_manager.getPositionFromRoot();e.x-=n.x,e.y-=n.y,ElementHitTestPosition(t,e,!0)||(A.release(),_())})),A.execute(4294967295),(s=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){c.release()}))}()}function MediaPlayerExtendUI(e){var t,n,a,i,o,r,l,s,c,_,u,d,p,m,g=this;function f(){l.dispatchEvent("close",g),DomNodeRemove(r),g.release()}function h(){window.removeEventListener?(r.removeEventListener("mouseover",x,!1),i.removeEventListener("mousedown",C,!1),t.removeEventListener("dragstart",k,!1)):window.detachEvent&&(r.detachEvent("onmouseover",x),i.detachEvent("onmousedown",C),t.detachEvent("ondragstart",k))}function x(e){input_mouse.setMouseEvent(e),d||((d=task_container.createTask(u)).setLevel(TASK_EXECUTE_LEVEL_POPUP),d.setDestructorFunc((function(){d=null})),d.setExecuteFunc(b),d.execute(4294967295))}function b(e){e.getUserWork().spd=0,document.body.appendChild(t),I(),e.setExecuteFunc(v),e.execute(4294967295)}function v(e){var t=e.getUserWork();t.spd+=.1,t.spd>.5&&(t.spd=.5);var n=.3*(1-m);t.spd>n&&(t.spd=n),(m+=t.spd)<0&&(m=0),m>.99&&(m=1,e.setExecuteFunc(y)),A(input_mouse.getPositionClient())||e.setExecuteFunc(w),I()}function y(e){e.getUserWork();e.setExecuteFunc(E),e.execute(4294967295)}function E(e){e.getUserWork();A(input_mouse.getPositionClient())||e.setExecuteFunc(w)}function w(e){var t=e.getUserWork();t.spd-=.01,t.spd<-.5&&(t.spd=-.5);var n=.4*(0-m);t.spd<n&&(t.spd=n),(m+=t.spd)>1&&(m=1),m<.01&&(m=0,e.setExecuteFunc(S)),A(input_mouse.getPositionClient())&&e.setExecuteFunc(v),I()}function S(e){e.getUserWork();DomNodeRemove(t),e.release()}function C(e){input_mouse.setMouseEvent(e);var t=ElementGetBoundingClientRect(i),n=input_mouse.getPositionClient(),a=n.x-t.left-4,l=n.y-t.top-4;p||input_mouse.getButtonLeft()&&(DomNode_InsertBefore(i,o),(p=task_container.createTask(u)).setLevel(TASK_EXECUTE_LEVEL_POPUP),p.setDestructorFunc((function(){p=null})),p.setExecuteFunc((function(){if(!input_mouse.getButtonLeft())return DomNodeRemove(o),void p.release();var e=ElementGetBoundingClientRect(r),t=ComputedStyleGetSize(r.style),n=input_mouse.getPositionClient(),i=n.x-a-e.left-(t.offsetWidth-t.width),s=n.y-l-e.top-(t.offsetHeight-t.height);i<0&&(i=0),s<0&&(s=0);var c=r.style;c.minWidth="0",c.minHeight="0",c.maxWidth="none",c.maxHeight="none",c.width=i+"px",c.height=s+"px",I()})),p.execute(4294967295))}function A(e){if(p)return!0;if(ElementHitTestPosition(a,e,!0))return!0;if(ElementHitTestPosition(i,e,!0))return!0;if(ElementHitTestPosition(r,e,!0))return!0;var t=ElementGetBoundingClientRect(r),n=t.right+16,o=t.bottom+16,l=n-32,s=o-32;if(n<e.x);else if(o<e.y);else if(l>e.x);else if(!(s>e.y))return!0;return!1}function k(e){if(!e.preventDefault)return!1;e.preventDefault()}function I(){var e=WindowGetScrollPosition(window),t=ElementGetBoundingClientRect(r);t.left+=e.x,t.right+=e.x,t.top+=e.y,t.bottom+=e.y;var l=t.right-t.left,s=t.bottom-t.top;(c=n.style).width=l+"px";var c,_=ElementGetBoundingClientRect(n),u=_.bottom-_.top,d=t.top-u;c.left=t.left+"px",c.top=d+"px",(c=a.style).top=(1-m)*u+"px",(c=o.style).left=t.left+"px",c.top=t.top+"px",c.width=l+"px",c.height=s+"px",(c=i.style).left=t.right-4+"px",c.top=t.bottom-4+"px",c.opacity=m}g.release=function(){h(),u&&(u.releaseChild(),u.release(),u=null),l&&(l.release(),l=null),s&&(s.release(),s=null),c&&(c.release(),c=null),_&&(analyze_work_dictionary.removeAnalyzeWork(_),_=null),DomNodeRemove(t)},g.createEventHandler=function(e){return l.createEventHandler(e)},function(){r=e,e=null,l=new EventDispatcher,m=0,(c=new DomNodeObserverRemoveFromDocument(r)).setFunction(g.release),(t=DocumentCreateElement("div")).draggable=!0,ElementSetStyle(t,CSSTextGetInitialDivElement()),ElementSetStyle(n=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(n,"position:absolute; z-index:2147483646; overflow:hidden; text-align:right;"),ElementSetStyle(a=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(a,"position:relative; background-color:rgba(128,128,128,0.9); display:inline-block; border-radius:10px 10px 0px 0px; border:2px solid #666; border-bottom-width:0px; top:0px;");var d=DocumentCreateElement("div");ElementSetStyle(d,CSSTextGetInitialDivElement()),ElementAddStyle(d,"padding:5px 10px; text-align:right;"),a.appendChild(d);var p="margin:0px; padding:0px; font-size:12px; font-weight:bold; text-align:center; width:24px; height:24px; display:inline-block;",b="vertical-align:top; margin:0px -6px;",v=DocumentCreateElement("button");v.title="close",ElementSetStyle(v,CSSTextGetInitialButtonElement()),ElementAddStyle(v,p),v.onclick=function(){f()};var y=DocumentCreateElement("img");ElementSetStyle(y,CSSTextGetInitialImageElement()),ElementAddStyle(y,b),y.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIgjI+py50AFQQvnrlw0Hna5jlG6HifZHGIqm7n+Iry3BQAOw==",v.appendChild(y);var E=DocumentCreateElement("button");E.title="full screen",ElementSetStyle(E,CSSTextGetInitialButtonElement()),ElementAddStyle(E,p),E.onclick=function(){ElementRequestFullscreen(r)};var w=DocumentCreateElement("img");ElementSetStyle(w,CSSTextGetInitialImageElement()),ElementAddStyle(w,b),w.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAIshI9pwe2+EDwhrkftZTLWm33Q2GzPaZ4Tya3A98KVKJXZS2EWHHO3qlIIEQUAOw==",E.appendChild(w);var S=DocumentCreateElement("button");S.title="popup window",ElementSetStyle(S,CSSTextGetInitialButtonElement()),ElementAddStyle(S,p),S.onclick=function(e){e||(e=window.event);var t,n=e.screenX-e.clientX,a=e.screenY-e.clientY,i=ElementGetBoundingClientRect(r),o=i.right-i.left,l=i.bottom-i.top,s="left="+(i.left+n)+",top="+(i.top+a)+",width="+o+",height="+l,c=window;try{c.wrappedJSObject&&"object"==typeof c.wrappedJSObject&&c.wrappedJSObject.open&&(c=c.wrappedJSObject),(t=(c=c.open("","_blank",s)).document).body.style.cssText="margin:0px; padding:0px; line-height:0; overflow:hidden; width:100%; height:100%;",t.title="PageExpand Media Player"}catch(e){}f(),ElementSetStyle(r,CSSTextGetInitialDivElement()),ElementAddStyle(r,"width:100%; height:100%;");var _=AnalyzeWorkCreate(r);AnalyzeWorkSetInvalid(_);var u=new AnalyzeWorkDictionaryAttachOptions;u.SetOutsider(),u.SetGuest(),analyze_work_dictionary.attachAnalyzeWork(_,u),t.adoptNode&&t.adoptNode(r),t.body.appendChild(r)};var A=DocumentCreateElement("img");ElementSetStyle(A,CSSTextGetInitialImageElement()),ElementAddStyle(A,b),A.src="data:image/gif;base64,R0lGODlhEAAQAIAAACAgIP///yH5BAUUAAEALAAAAAAQABAAAAInjI9pwO2+lALrWRYlooHr7H1cqI1fh6aSqSbUm7kpu6FwW1bXc0oFADs=",S.appendChild(A),d.appendChild(S),d.appendChild(E),d.appendChild(v),ElementSetStyle(o=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(o,"position:absolute; z-index:2147483646; background:rgba(255,0,0,0.25);"),ElementSetStyle(i=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(i,"position:absolute; z-index:2147483646; cursor:se-resize; width:16px; height:16px; background:url(data:image/gif;base64,R0lGODlhEAAQAJEAACAgIP///////wAAACH5BAUUAAIALAAAAAAQABAAAAIwjI9pwO2+lAJxUYFxoNuykFXUc3XcSG6jSH4nqKav1nZdKEd0fsePzZEcTq2UUFgAADs=);"),t.appendChild(n),n.appendChild(a),t.appendChild(i),AnalyzeWorkSetInvalid(_=AnalyzeWorkCreate(t));var I=new AnalyzeWorkDictionaryAttachOptions;I.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(_,I),(u=task_container.createTask()).setDestructorFunc((function(){u=null})),(s=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){g.release()})),h(),window.addEventListener?(r.addEventListener("mouseover",x,!1),i.addEventListener("mousedown",C,!1),t.addEventListener("dragstart",k,!1)):window.attachEvent&&(r.attachEvent("onmouseover",x),i.attachEvent("onmousedown",C),t.attachEvent("ondragstart",k))}()}function DownloadProgress(e){var t,n,a,i,o,r,l,s,c,_,u,d,p,m=this;function g(e){var t,n;this.setMessage=function(e){e||(e="　"),n.nodeValue=e},ElementSetStyle(t=DocumentCreateElement("div"),"width:100%; font-size:12px; text-align:left; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin-bottom:5px;"),n=DocumentCreateText("　"),t.appendChild(n),e.appendChild(t)}function f(e){var t,n,a;this.release=function(){DomNodeRemove(t||n)},this.setValue=function(e){var n;n=e,t?t.value=n:a.style.width=100*n+"%"},window.HTMLProgressElement?(ElementSetStyle(t=DocumentCreateElement("progress"),"display:block; width:100%;"),e.appendChild(t)):(ElementSetStyle(n=DocumentCreateElement("div"),"height:16px; min-height:0; border:1px #888 solid; margin-bottom:5px; line-height:1.0;"),e.appendChild(n),ElementSetStyle(a=DocumentCreateElement("div"),"height:16px; min-height:0; background-color :#888; margin:0px; width:0%; line-height:1.0;"),n.appendChild(a))}function h(){var e=WindowGetScrollPosition(window),t=DocumentGetClientSize(document),n=ElementGetBoundingClientRect(a),i=n.right-n.left,o=n.bottom-n.top;a.style.left=t.width/2-i/2+e.x+"px",t.height>o?(a.style.top=t.height/2-o/2+e.y+"px",p=!1):p||(a.style.top=e.y+"px",p=!0)}function x(){u&&(u.release(),u=null),window.removeEventListener?(window.removeEventListener("scroll",h),window.removeEventListener("resize",h)):window.detachEvent&&(window.detachEvent("onscroll",h),window.detachEvent("onresize",h))}m.release=function(){d&&d.release(),x(),DomNodeRemove(a),DomNodeRemove(n),DomNodeRemove(t)},m.setWidth=function(e){a.style.width=e+"px"},m.setMessage=function(e,t){var n;if(0===t)n=r;else n=l;n.setMessage(e)},m.setValueProgress=function(e,t){var n;if(0===t)n=s;else n=c;n.setValue(e)},m.setAnchor=function(e){c.release(),_.value="OK";var t=DocumentCreateElement("a");ElementSetTextContent(t,e.download),t.href=e.href,t.download=e.download,ElementSetStyle(t,"width:100%; font-size:14px; text-align:left; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin-bottom:5px;"),o.appendChild(t)},m.open=function(t){e.appendChild(a),window.addEventListener?(window.addEventListener("scroll",h),window.addEventListener("resize",h)):window.attachEvent&&(window.attachEvent("onscroll",h),window.attachEvent("onresize",h)),h(),d&&d.release();var i=0;(d=task_container.createTask(null)).setDestructorFunc((function(){d=null})),d.setExecuteFunc((function(){var e=!1;(i+=.2)>1&&(i=1,e=!0),n.style.opacity=.5*i,e&&(d.release(),m.setEnable(!0),t())})),d.execute(4294967295)},m.setEnable=function(e){_.disabled=!e},m.close=function(){DomNodeRemove(a),x(),m.setEnable(!1),d&&d.release();var e=1;(d=task_container.createTask(null)).setDestructorFunc((function(){d=null})),d.setExecuteFunc((function(){var t=!1;if((e-=.2)<0&&(e=0,t=!0),n.style.opacity=.5*e,t)return m.oncomplete(),d.release(),void m.release()})),d.execute(4294967295)},m.getElement=function(){return a},m.oncomplete=function(){},m.onclose=function(){},function(){t=DocumentCreateElement("div"),e.appendChild(t),e=t.attachShadow?t.attachShadow({mode:"closed"}):t;ElementSetStyle(n=DocumentCreateElement("div"),"position:fixed; top:0px; bottom:0px; left:0px; right:0px; opacity:0.0; background:#000; line-height:1.0; z-index:2147483646;"),e.appendChild(n),ElementSetStyle(a=DocumentCreateElement("div"),"position:absolute; width:800px; padding:25px; background:#00F; background-color:#FFF; border-radius:5px; box-shadow:5px 5px 10px #444; z-index:2147483646;"),ElementSetStyle(i=DocumentCreateElement("div"),"min-height:50px;"),a.appendChild(i),r=new g(i),s=new f(i),ElementSetStyle(o=DocumentCreateElement("div"),"min-height:60px;"),a.appendChild(o),l=new g(o),c=new f(o),(_=DocumentCreateElement("input")).type="button",_.value="CANCEL",ElementSetStyle(_,"width:100%; height:50px;"),a.appendChild(_),_.onclick=function(){m.onclose&&m.onclose(),m.close()},m.setMessage("",0),m.setMessage("",1),m.setValueProgress(0,0),m.setValueProgress(0,1),m.setEnable(!1),(u=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){m.release()}))}()}function InternationalMessage(e){var t;if(this.getMessage=function(e){return t[e]?t[e].message:"XXXXX NO LOCALE MESSAGE XXXXX"},e||(e=""),e=e.toLowerCase(),t||(t=InternationalMessage.locales[e]),!t){var n=e.match(new RegExp("[^-]+"),"");n&&(t=InternationalMessage.locales[n[0]])}t||(t=InternationalMessage.locales.en)}function Timer(e,t){var n,a,i=this;function o(){a&&(i.ontimer&&i.ontimer(),i.currentCount>=i.repeatCount&&(i.oncomplete&&i.oncomplete(),i.release()))}i.release=function(){i.stop(),a&&(a.release(),a=null)},i.ontimer=function(){},i.oncomplete=function(){},i.start=function(){null===n&&(i.running=!0,n=setInterval((function(){i.currentCount++,execute_queue.attachFirst(o,null),null===i.repeatCount||i.currentCount>=i.repeatCount&&i.stop()}),i.delay),(a=page_expand_event_dispatcher.createEventHandler("release")).setFunction(i.release))},i.stop=function(){null!==n&&(clearInterval(n),n=null,i.running=!1)},i.reset=function(){i.currentCount=0},n=null,isNaN(e)?i.delay=0:i.delay=Number(e),i.currentCount=0,isNaN(t)?i.repeatCount=null:i.repeatCount=Number(t),i.running=!1}function UrlInfoDictionary(){var e,t,n,a=this;function i(e){this.url=e,this.id=t,t+=1}i.prototype={release:function(){if(this.url){var t=this.url.toLowerCase();delete e[t],delete this.url,this.releaseBlobURL()}},getId:function(){return this.id},getURL:function(){return this.url},analyzeRedirect:function(){var e=this;if(this.analyze_redirect)return null;if(void 0!==this.redirect)return null;var t=this.analyze_redirect=new Object;return t.release=function(){t.released||(t.released=!0,t.event_dispatcher.release(),delete e.analyze_redirect)},t.success=function(n){e.redirect=n,t.event_dispatcher.dispatchEvent("success",null),t.release()},t.failure=function(n){e.redirect=null,t.event_dispatcher.dispatchEvent("failure",n),t.release()},t.released=!1,t.event_dispatcher=new EventDispatcher,t},getRedirect:function(e){var t=this,n=null,a=null;function i(){n&&(n.release(),n=null),a&&(a.release(),a=null),e(t.redirect)}var o=t.analyze_redirect;if(o&&void 0===t.redirect){var r=o.event_dispatcher;(n=r.createEventHandler("success")).setFunction((function(e){i()})),(a=r.createEventHandler("failure")).setFunction((function(e){i()}))}else i()},analyzeBlobURL:function(){var e=this;if(this.analyze_blob_url)return null;if(void 0!==this.blob_url)return null;var t=this.analyze_blob_url=new Object;return t.release=function(){t.released||(t.released=!0,t.event_dispatcher.release(),delete e.analyze_blob_url)},t.success=function(n){e.blob_url=n,t.event_dispatcher.dispatchEvent("success",null),t.release()},t.failure=function(n){e.blob_url="",t.event_dispatcher.dispatchEvent("failure",n),t.release()},t.released=!1,t.event_dispatcher=new EventDispatcher,t},getBlobURL:function(e){var t=this,n=null,a=null;function i(){n&&(n.release(),n=null),a&&(a.release(),a=null),e(t.blob_url)}var o=t.analyze_blob_url;if(o&&void 0===t.blob_url){var r=o.event_dispatcher;(n=r.createEventHandler("success")).setFunction((function(e){i()})),(a=r.createEventHandler("failure")).setFunction((function(e){i()}))}else i()},releaseBlobURL:function(){this.blob_url&&(BlobURLRevoke(this.blob_url),delete this.blob_url)},getCached:function(e){var t=this,n=null,a=null;function i(){n&&(n.release(),n=null),a&&(a.release(),a=null),e(t.cached,null)}var o=t.analyze_cached;if(!o&&void 0===t.cached)return t.analyze_cached=function(){var e=new Object;return e.release=function(){e.released||(e.released=!0,e.event_dispatcher.release(),delete t.analyze_cached)},e.success=function(){t.cached={ok:!0},e.event_dispatcher.dispatchEvent("success",null),e.release()},e.failure=function(n){t.cached={ok:!1},e.event_dispatcher.dispatchEvent("failure",n),e.release()},e.released=!1,e.event_dispatcher=new EventDispatcher,e}(),void e(t.cached,t.analyze_cached);if(o&&void 0===t.cached){var r=o.event_dispatcher;(n=r.createEventHandler("success")).setFunction((function(e){i()})),(a=r.createEventHandler("failure")).setFunction((function(e){i()}))}else i()},getMimeType:function(){return this.mimetype},setMimeType:function(e){this.mimetype=e},getExt:function(){return this.ext},setExt:function(e){this.ext=e},attachDone:function(e){this.done||(this.done={}),this.done[e]=!0},removeDone:function(e){this.done&&delete this.done[e]},getDone:function(e){return!!this.done&&Boolean(this.done[e])},url:"",id:0,analyze_redirect:null,analyze_blob_url:null,analyze_cached:null,redirect:void 0,blob_url:void 0,cached:void 0,category:"",mimetype:"",ext:""},a.release=function(){var t;for(t in e)e[t].release();e=null},a.addURL=function(t){var n=t.toLowerCase(),a=e[n];return a||(e[n]=a=new i(t)),a},a.getUrlInfo=function(t){var n=t.toLowerCase();return e[n]},a.getRedirectURL=function(e,t){var i=!1,o=a.getUrlInfo(e),r=function(){t({redirected:i,url_info:o})};if(o){var l=0,s=function(){o.getRedirect((function(e){e&&(i=!0,o=e,++l<n)?s():r()}))};s()}else r()},e=new Object,t=0,n=16}function AddressCollection(){var e,t,n=this;n.release=function(n,a){e=null,t=0},n.addAddress=function(n,a){var i=e[n];return i||(e[n]=i=new Object),!i[a]&&(i[a]=!0,t+=1,!0)},n.removeAddress=function(n,a){var i=e[n];return!!i&&(!!i[a]&&(i[a]=!1,t-=1,!0))},n.hasAddress=function(t,n){var a=e[t];return!!a&&!!a[n]},n.getCountAddress=function(){return t},t=0,e=new Object}function ExecuteQueue(){var e,t,n,a,i,o,r,l,s,c,_,u=this;function d(a){i+=1,a<n&&(e=t[n=a]),null===l&&(l=setTimeout((function(){p()}),c))}function p(){l=setTimeout((function(){p()}),c);var u=_();do{var d=e._next,m=d._prev,g=d._next;m._next=g,g._prev=m;try{d.func(d.param),o+=1}catch(e){project.getEnableDebugMode()&&ConsoleError(e.stack),r+=1}for(;n<a&&e._next==e;)n++,e=t[n];if((i-=1)<=0)return void(null!==l&&(clearTimeout(l),l=null))}while(_()-u<=s)}for(u.release=function(){var e;for(e=0;e<a;e++){var n=t[e],i=n._prev,o=n._next;i._next=o,o._prev=i,n._prev=n,n._next=n}null!==l&&(clearTimeout(l),l=null)},u.attachFirst=function(e,n){var a={func:e,param:n},i=t[0],o=i._next;a._prev=i,a._next=o,i._next=a,o._prev=a,d(0)},u.attachLastForInterrupt=function(e,n){var a={func:e,param:n},i=t[0],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(0)},u.attachFirstForRemoveDomNode=function(e,n){var a={func:e,param:n},i=t[1],o=i._next;a._prev=i,a._next=o,i._next=a,o._prev=a,d(1)},u.attachLastForRemoveDomNode=function(e,n){var a={func:e,param:n},i=t[1],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(1)},u.attachFirstForInsertDomNode=function(e,n){var a={func:e,param:n},i=t[2],o=i._next;a._prev=i,a._next=o,i._next=a,o._prev=a,d(2)},u.attachLastForInsertDomNode=function(e,n){var a={func:e,param:n},i=t[2],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(2)},u.attachForExpandBbs=function(e,n){var a={func:e,param:n},i=t[3],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(3)},u.attachForExpandElement=function(e,n){var a={func:e,param:n},i=t[4],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(4)},u.attachForAnalyzeElement=function(e,n){var a={func:e,param:n},i=t[5],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(5)},u.attachForAnalyzeTextNode=function(e,n){var a={func:e,param:n},i=t[6],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(6)},u.attachLast=function(e,n){var a={func:e,param:n},i=t[7],o=i._prev;a._prev=o,a._next=i,o._next=a,i._prev=a,d(7)},u.getCountQueue=function(){return i},u.getCountSuccess=function(){return o},u.getCountError=function(){return r},u.getPhase=function(){return n},u.setOccupancyTime=function(e){s=e},u.setSleepTime=function(e){c=e},i=0,o=0,r=0,l=null,s=5,c=0,n=0,a=8,t=new Array;n<a;)(e=new Object)._prev=e,e._next=e,t[n]=e,n++;(_=Date.now)||(_=function(){return(new Date).getTime()})}function LoaderQueue(){var e=this;function t(e){this._prev=this,this._next=this,this._released=!1,this._waiting=!1,this._loading=!1,this._rule=c[e],s[l]=this,this._unique=l,l+=1,n+=1}e.release=function(){if(!r){r=!0;for(var t,n=e.queue;n!=n._next;)h(n._next);var a=c.length;for(t=0;t<a;t++){c[t].release()}}},e.createElement=function(){return new t(0)},t.prototype={onstart:function(){},onabort:function(){},complete:function(){g(this),m(this),x()},getId:function(){return this._unique},release:function(){h(this),x()},abort:function(){f(this),x()},attachFirst:function(){f(this);var t=e.queue,n=t._next;t._next=this,n._prev=this,this._prev=t,this._next=n,this._waiting=!0,x()},attachLast:function(){f(this);var t=e.queue,n=t._prev;n._next=this,t._prev=this,this._prev=n,this._next=t,this._waiting=!0,x()}},e.createRule=function(){return new _};var n,a,i,o,r,l,s,c,_=function(){function e(){this._thread_count=0,this._thread_max=0,this._cooltime=0,this._time_handler=null}return e.prototype={release:function(){u(this)},setMaxThread:function(e){this._thread_max=e},setCoolTime:function(e){this._cooltime=e}},e}();function u(e){null!==e._time_handler&&(clearTimeout(e._time_handler),e._time_handler=null)}function d(e){return!(e._thread_count>=e._thread_max)&&!function(e){return Boolean(null!==e._time_handler)}(e)}function p(e){e._loading||(e._loading=!0,g(e),a+=1,e._rule._thread_count+=1,e.onstart())}function m(e){var t,n;e._loading&&(e._loading=!1,a-=1,t=e._rule,n=Boolean(t._thread_count>=t._thread_max),t._thread_count-=1,n&&t._cooltime&&(u(t),t._time_handler=setTimeout((function(){u(t),x()}),t._cooltime)))}function g(e){var t=e._prev,n=e._next;t._next=n,n._prev=t,e._prev=e,e._next=e,e._waiting=!1}function f(e){if(e._loading||e._waiting){var t=e.onabort;t&&t()}g(e),m(e)}function h(e){e._released||(e._released=!0,g(e),m(e),delete s[e._unique],n-=1)}function x(){if(!r)for(var t=e.queue,n=t._next;n!=e.queue&&!(a>=i);)d(n._rule)?(p(n),n=t._next):(t=n,n=n._next)}e.getElementById=function(e){return s[e]},e.getCountQueue=function(){return n},e.getCountThread=function(){return a},e.getCountError=function(){return o},e.addCountError=function(){o+=1},e.getMaxThread=function(){return i},e.setMaxThread=function(e){i=e},function(){n=0,a=0,e.setMaxThread(10),o=0,r=!1,l=1,s=new Object,c=new Array;var t=new Object;t._prev=t,t._next=t,e.queue=t;var i=e.createRule();i.setCoolTime(100),i.setMaxThread(2147483647),c.push(i)}()}PageExpandConfig.MENU_TYPE_SETTING_STANDARD=0,PageExpandConfig.MENU_TYPE_SETTING_ACCESS_BLOCK=1,PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_REFERER=2,PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_USERAGENT=3,PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_ELEMENT=4,PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_TEXT=5,PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_ANCHOR=6,PageExpandConfig.MENU_TYPE_SETTING_REPLACEMENT_TO_LINK=7,PageExpandConfig.MENU_TYPE_SETTING_MAKE_LINK_TO_TEXT=8,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_SHORT_URL=9,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_TEXT=10,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_IMAGE=11,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_SOUND=12,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_VIDEO=13,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_IFRAME=14,PageExpandConfig.MENU_TYPE_SETTING_STYLE_SHEET=15,PageExpandConfig.MENU_TYPE_SETTING_EXPERIMENTAL=16,PageExpandConfig.MENU_TYPE_SETTING_URL_MAPPING=17,PageExpandConfig.MENU_TYPE_SETTING_EXPAND_BBS=18,PageExpandConfig.MENU_TYPE_SETTING_DOWNLOAD=19,PageExpandConfig.MENU_TYPE_SETTING_LANGUAGE=20,PageExpandConfig.MENU_TYPE_CREDIT=21,ImageViewer.SCALE_MODE_AUTO=0,ImageViewer.SCALE_MODE_NO_SCALE=1,ImageViewer.SCALE_MODE_LONG_VERTICAL=2,ImageViewer.SCALE_MODE_SHOW_ALL=3,ImageViewer.SCALE_MODE_SHOW_FULL=4,ImageViewer.SCALE_MODE_MAX=5,ImageViewer.MENU_TYPE_HORIZONTAL=0,ImageViewer.MENU_TYPE_VERTICAL=1,InternationalMessage.locales={ja:{extension_name:{message:"PageExpand"},extension_description:{message:"画像の一括ダウンロード、画像のポップアップ、サムネイルやビデオの展開、短縮URLの展開、URL文字列のリンク化、リファラ置換、主要掲示板の拡張表示など..."},page_expand_config:{message:"PageExpand 設定"},menu_setting_standard:{message:"基本設定"},menu_setting_standard_filter_url:{message:"動作を制限するＵＲＬ"},menu_setting_standard_filter_url_combo_box_item_deny:{message:"指定したアドレスのみ動作させない（それ以外はすべて動作する）"},menu_setting_standard_filter_url_combo_box_item_allow:{message:"指定したアドレスのみ動作させる（それ以外はすべて動作しない）"},menu_setting_standard_filter_url_hint:{message:"URL を記述します。アスタリスク使用可。複数行指定可。"},menu_setting_standard_check_box_container:{message:"基本設定"},menu_setting_standard_enable_icon_address_bar:{message:"アドレスバーにアイコンを表示"},menu_setting_standard_enable_context_menu:{message:"コンテキストメニューを表示"},menu_setting_standard_enable_startup:{message:"ロード完了時から動作を開始"},menu_setting_standard_enable_debug_mode:{message:"デバッグモードで動作"},menu_setting_standard_enable_output_log:{message:"コンソールにログを出力（デバッグ用）"},menu_setting_standard_execute_queue:{message:"実行キュー設定（通常は変更の必要はありません）"},menu_setting_standard_execute_queue_time_sleep:{message:"スリープ時間（ミリ秒）"},menu_setting_standard_execute_queue_time_occupancy:{message:"最大CPU占有時間（ミリ秒）"},menu_setting_standard_execute_queue_hint:{message:"最大CPU占有時間が大きいほど、操作レスポンスが悪くなり、スクリプトが高速に動作します。スリープ時間が小さいほど、CPU使用率が高くなり、スクリプトが高速に動作します。"},menu_setting_standard_touch:{message:"タッチ操作設定"},menu_setting_standard_enable_input_touch:{message:"タッチ操作を有効"},menu_setting_standard_enable_double_touch_assist:{message:"ダブルタッチ補助線を表示"},menu_setting_standard_command:{message:"メニューの実行（モバイル用）"},menu_setting_standard_command_execute_button:{message:"実行する"},menu_setting_standard_command_execute_dialog:{message:"メニューの実行"},menu_setting_standard_command_execute_dialog_tab_list:{message:"実行対象となるタブを選択"},menu_setting_standard_command_execute_dialog_command_list:{message:"実行するコマンドを選択"},menu_setting_standard_command_execute_dialog_confirm:{message:"選択したメニューを実行しますか？"},menu_setting_standard_export_import:{message:"設定のエクスポート / インポート"},menu_setting_standard_export_button:{message:"エクスポート"},menu_setting_standard_import_button:{message:"インポート"},menu_setting_standard_export_dialog:{message:"設定のエクスポート"},menu_setting_standard_export_dialog_export:{message:"エクスポート"},menu_setting_standard_export_dialog_export_hint:{message:"テキストエリアの値をコピーして下さい。"},menu_setting_standard_import_dialog:{message:"設定のインポート"},menu_setting_standard_import_dialog_explanation:{message:"インポートについて"},menu_setting_standard_import_dialog_explanation_0:{message:"インポートを行うと、現在の設定は全て失われます。"},menu_setting_standard_import_dialog_explanation_1:{message:"インポートを行う前に、エクスポート機能でバックアップを取ることをお勧めします。"},menu_setting_standard_import_dialog_explanation_2:{message:"信頼の無い人物が作成した設定データを、絶対にインポートしないで下さい。悪意のあるスクリプトが含まれる恐れがあります。"},menu_setting_standard_import_dialog_import:{message:"インポート"},menu_setting_standard_import_dialog_import_hint:{message:"エクスポートから出力したテキストをペーストして下さい。"},menu_setting_standard_import_dialog_confirm:{message:"インポートを実行しますか？"},menu_setting_standard_import_alert:{message:"インポートの結果"},menu_setting_standard_import_alert_success:{message:"インポートが完了しました。"},menu_setting_standard_import_alert_failure:{message:"インポートに失敗しました。"},menu_setting_standard_storage_sync:{message:"同期ストレージ"},menu_setting_standard_storage_sync_load_button:{message:"読込"},menu_setting_standard_storage_sync_save_button:{message:"保存"},menu_setting_standard_storage_sync_delete_button:{message:"削除"},menu_setting_standard_storage_sync_load_dialog:{message:"同期ストレージの読み込み"},menu_setting_standard_storage_sync_load_dialog_explanation:{message:"同期ストレージの読み込みについて"},menu_setting_standard_storage_sync_load_dialog_explanation_0:{message:"同期ストレージからデータを読み込んで設定に反映します。"},menu_setting_standard_storage_sync_load_dialog_explanation_1:{message:"読み込みを行うと、現在の設定は全て失われます。"},menu_setting_standard_storage_sync_load_dialog_explanation_2:{message:"読み込みを行う前に、エクスポート機能でバックアップを取ることをお勧めします。"},menu_setting_standard_storage_sync_load_dialog_confirm:{message:"同期ストレージから設定データを読み込みますか？"},menu_setting_standard_storage_sync_load_alert:{message:"読み込みの結果"},menu_setting_standard_storage_sync_load_alert_success:{message:"読み込みが完了しました。"},menu_setting_standard_storage_sync_load_alert_failure:{message:"読み込みに失敗しました。"},menu_setting_standard_storage_sync_save_dialog:{message:"同期ストレージの保存"},menu_setting_standard_storage_sync_save_dialog_explanation:{message:"同期ストレージの保存について"},menu_setting_standard_storage_sync_save_dialog_explanation_0:{message:"現在の設定を、同期ストレージに保存します。"},menu_setting_standard_storage_sync_save_dialog_explanation_1:{message:"ブラウザの同期機能が有効である必要があります。"},menu_setting_standard_storage_sync_save_dialog_explanation_2:{message:"容量に制限があります。サイズが大きすぎる場合失敗します。"},menu_setting_standard_storage_sync_save_dialog_confirm:{message:"同期ストレージに設定データを保存しますか？"},menu_setting_standard_storage_sync_save_alert:{message:"保存の結果"},menu_setting_standard_storage_sync_save_alert_success:{message:"保存が完了しました。"},menu_setting_standard_storage_sync_save_alert_failure:{message:"保存に失敗しました。"},menu_setting_standard_storage_sync_delete_dialog:{message:"同期ストレージの削除"},menu_setting_standard_storage_sync_delete_dialog_explanation:{message:"同期ストレージの削除について"},menu_setting_standard_storage_sync_delete_dialog_explanation_0:{message:"同期ストレージに保存した設定データをすべて削除します。"},menu_setting_standard_storage_sync_delete_dialog_confirm:{message:"同期ストレージの設定データを削除しますか？"},menu_setting_standard_storage_sync_delete_alert:{message:"削除の結果"},menu_setting_standard_storage_sync_delete_alert_success:{message:"削除が完了しました。"},menu_setting_standard_storage_sync_delete_alert_failure:{message:"削除に失敗しました。"},menu_setting_standard_reset:{message:"設定の初期化"},menu_setting_standard_reset_button:{message:"すべての設定を削除して初期状態に戻す"},menu_setting_standard_reset_dialog:{message:"設定の初期化"},menu_setting_standard_reset_dialog_explanation:{message:"設定の初期化について"},menu_setting_standard_reset_dialog_explanation_0:{message:"すべての設定をデフォルトの状態に戻します。"},menu_setting_standard_reset_dialog_explanation_1:{message:"設定の初期化を行うと現在の設定は全て失われます。"},menu_setting_standard_reset_dialog_confirm:{message:"設定の初期化を実行しますか？"},menu_setting_standard_reset_alert:{message:"設定の初期化の結果"},menu_setting_standard_reset_alert_success:{message:"設定の初期化が完了しました。"},menu_setting_standard_reset_alert_failure:{message:"設定の初期化に失敗しました。"},menu_setting_download:{message:"ダウンロード設定"},menu_setting_download_load:{message:"ロード設定（XHR通信）"},menu_setting_download_load_thread_max:{message:"最大同時ロード数"},menu_setting_download_load_timeout:{message:"タイムアウト（ミリ秒）"},menu_setting_download_load_timeout_hint:{message:"タイムアウトエラーと判定する時間をミリ秒で指定。0 で無制限。"},menu_setting_download_load_cache_for_media:{message:"キャッシュモード（メディア用）"},menu_setting_download_load_cache_for_media_hint:{message:"通常は変更の必要はありません。fetch API を経由し、かつメディア系の読み込み時に作用します。"},menu_setting_expand_image_load_cache_for_media_combo_box_item_default:{message:"デフォルトの最適な動作"},menu_setting_expand_image_load_cache_for_media_combo_box_item_no_store:{message:"キャッシュを使用せず、必ずリクエストする"},menu_setting_expand_image_load_cache_for_media_combo_box_item_force_cache:{message:"キャッシュが残ってる限り、二度とリクエストしない（一生古いデータのまま）"},menu_setting_download_download:{message:"ダウンロード設定"},menu_setting_download_download_thread_max:{message:"最大同時ダウンロード数"},menu_setting_download_download_save_file:{message:"保存先の設定"},menu_setting_download_download_save_file_combo_box_item_simple:{message:"簡易設定"},menu_setting_download_download_save_file_combo_box_item_detail:{message:"詳細設定"},menu_setting_download_download_save_file_simple:{message:"保存先を選択"},menu_setting_download_download_save_file_detail:{message:"保存先を編集"},menu_setting_download_download_save_file_variable:{message:"変数一覧"},menu_setting_download_download_conflict_type:{message:"ファイル名衝突時の処理"},menu_setting_download_download_conflict_type_combo_box_item_rename:{message:"別名にリネーム"},menu_setting_download_download_conflict_type_combo_box_item_overwrite:{message:"同名で上書き"},menu_setting_download_batch_download:{message:"一括ダウンロード設定"},menu_setting_expand_bbs:{message:"掲示板拡張設定"},menu_setting_expand_bbs_list:{message:"掲示板拡張設定一覧"},menu_setting_expand_bbs_list_hint:{message:"リストを選択すると下部のコントロールの入力が可能です。上から順番に動作条件スクリプトを実行し、許可があればその設定が使用されます。複数選択可。複数選択時は同時編集。灰色はプリセット設定。プリセット設定は削除不可（無効化は可能）。"},menu_setting_expand_bbs_button_add:{message:"追加"},menu_setting_expand_bbs_button_delete:{message:"削除"},menu_setting_expand_bbs_button_prio_up:{message:"優先度を上げる"},menu_setting_expand_bbs_button_prio_down:{message:"優先度を下げる"},menu_setting_expand_bbs_button_export:{message:"エクスポート"},menu_setting_expand_bbs_button_import:{message:"インポート"},menu_setting_expand_bbs_add_dialog:{message:"掲示板拡張設定の新規作成"},menu_setting_expand_bbs_add_dialog_name:{message:"名前"},menu_setting_expand_bbs_add_dialog_copy_define:{message:"既存の設定から複製"},menu_setting_expand_bbs_add_dialog_define_list_box_item_new:{message:"複製せずに新規作成する"},menu_setting_expand_bbs_export_dialog:{message:"掲示板拡張設定のエクスポート"},menu_setting_expand_bbs_export_dialog_export:{message:"エクスポート"},menu_setting_expand_bbs_export_dialog_export_hint:{message:"テキストエリアの値をコピーして下さい。"},menu_setting_expand_bbs_import_dialog:{message:"掲示板拡張設定のインポート"},menu_setting_expand_bbs_import_dialog_explanation:{message:"インポートについて"},menu_setting_expand_bbs_import_dialog_explanation_0:{message:"プリセット設定は上書き、ユーザー設定は新規追加されます。"},menu_setting_expand_bbs_import_dialog_explanation_1:{message:"インポートを行う前に、基本設定のエクスポート機能でバックアップを取ることをお勧めします。"},menu_setting_expand_bbs_import_dialog_explanation_2:{message:"信頼の無い人物が作成した設定データを、絶対にインポートしないで下さい。悪意のあるスクリプトが含まれる恐れがあります。"},menu_setting_expand_bbs_import_dialog_import:{message:"インポート"},menu_setting_expand_bbs_import_dialog_import_hint:{message:"エクスポートから出力したテキストをペーストして下さい。"},menu_setting_expand_bbs_import_dialog_confirm:{message:"インポートを実行しますか？"},menu_setting_expand_bbs_import_alert:{message:"インポートの結果"},menu_setting_expand_bbs_import_alert_success:{message:"インポートが完了しました。"},menu_setting_expand_bbs_import_alert_failure:{message:"インポートに失敗しました。"},menu_setting_expand_bbs_name:{message:"名前"},menu_setting_expand_bbs_check_box_container:{message:"有効 / 無効"},menu_setting_expand_bbs_enable_setting:{message:"この設定を使用する"},menu_setting_expand_bbs_filter_url:{message:"動作URLの設定"},menu_setting_expand_bbs_popup_check_box_container:{message:"ポップアップの設定"},menu_setting_expand_bbs_popup_enable_animation:{message:"ポップアップ時のアニメーション動作を有効"},menu_setting_expand_bbs_popup_origin_type:{message:"ポップアップの配置基点"},menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_top_bottom:{message:"上下に吸着"},menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_left_right:{message:"左右に吸着"},menu_setting_expand_bbs_popup_position_type:{message:"ポップアップの配置位置"},menu_setting_expand_bbs_popup_position_type_combo_box_item_absolute:{message:"絶対座標系に配置"},menu_setting_expand_bbs_popup_position_type_combo_box_item_fixed:{message:"クライアント座標系に配置"},menu_setting_expand_bbs_popup_percent:{message:"ポップアップサイズ"},menu_setting_expand_bbs_popup_percent_h:{message:"横方向パーセント (0～100)"},menu_setting_expand_bbs_popup_percent_v:{message:"縦方向パーセント (0～100)"},menu_setting_expand_bbs_popup_time:{message:"ポップアップ時間"},menu_setting_expand_bbs_popup_time_wait_open:{message:"開くまでに待機する時間（ミリ秒）"},menu_setting_expand_bbs_popup_time_wait_close:{message:"閉じるまでに待機する時間（ミリ秒）"},menu_setting_expand_bbs_popup_style_sheet:{message:"ポップアップのスタイル"},menu_setting_expand_bbs_script_initialize:{message:"初期化スクリプト"},menu_setting_expand_bbs_script_callback:{message:"コールバックスクリプト"},menu_setting_urlmap:{message:"URLマッピング設定"},menu_setting_urlmap_list:{message:"URLマッピング設定一覧"},menu_setting_urlmap_list_hint:{message:"リストを選択すると下部のコントロールの入力が可能です。上から順番にURLの比較を行いマッチすればその設定が使用されます。複数選択可。複数選択時は同時編集。灰色はプリセット設定。プリセット設定は削除不可（無効化は可能）。"},menu_setting_urlmap_button_add:{message:"追加"},menu_setting_urlmap_button_delete:{message:"削除"},menu_setting_urlmap_button_prio_up:{message:"優先度を上げる"},menu_setting_urlmap_button_prio_down:{message:"優先度を下げる"},menu_setting_urlmap_add_dialog:{message:"URLマッピング設定の新規作成"},menu_setting_urlmap_add_dialog_name:{message:"名前"},menu_setting_urlmap_add_dialog_copy_define:{message:"既存の設定から複製"},menu_setting_urlmap_add_dialog_define_list_box_item_new:{message:"複製せずに新規作成する"},menu_setting_urlmap_name:{message:"名前"},menu_setting_urlmap_check_box_container:{message:"有効 / 無効"},menu_setting_urlmap_enable_setting:{message:"この設定を使用する"},menu_setting_urlmap_filter_url:{message:"動作URLの設定"},menu_setting_urlmap_mixed_passive_content_container:{message:"Mixed Passive Content のセキュリティ"},menu_setting_urlmap_mixed_passive_content_unsafe:{message:"http:// のままリクエスト"},menu_setting_urlmap_mixed_passive_content_safe:{message:"https:// に変換してリクエスト（失敗なら表示しない）"},menu_setting_urlmap_mixed_passive_content_hint:{message:"画像や動画などのコンテンツが赤枠付きで表示されている場合、暗号化されておらず、信頼性が低く、中間者攻撃で改ざん可能であることを意味します。"},menu_setting_urlmap_mixed_active_content_container:{message:"Mixed Active Content のセキュリティ"},menu_setting_urlmap_mixed_active_content_unsafe:{message:"http:// のままリクエスト"},menu_setting_urlmap_mixed_active_content_safe:{message:"https:// に変換してリクエスト（失敗なら表示しない）"},menu_setting_urlmap_mixed_active_content_hint:{message:"ブラウザはデフォルトで混在アクティブコンテンツをブロックします。実際に表示するには、サイトの権限の設定から「安全ではないコンテンツ」のブロックを解除する必要があります（危険）"},menu_setting_urlmap_define_button_edit:{message:"編集"},menu_setting_urlmap_define_button_add:{message:"追加"},menu_setting_urlmap_define_button_remove:{message:"除外"},menu_setting_urlmap_define_button_prio_up:{message:"上へ"},menu_setting_urlmap_define_button_prio_down:{message:"下へ"},menu_setting_urlmap_define_combo_box_item_no_use:{message:"定義を使用しない"},menu_setting_define_multi_select_add_dialog:{message:"定義の追加"},menu_setting_define_multi_select_add_dialog_list:{message:"追加する定義を選択"},menu_setting_access_block:{message:"アクセス遮断定義"},menu_setting_access_block_filter_url:{message:"アクセス遮断URLを設定"},menu_setting_replacement_to_element:{message:"エレメント置換定義"},menu_setting_replacement_to_element_script:{message:"コールバックスクリプト"},menu_setting_replacement_to_text:{message:"テキスト置換定義"},menu_setting_replacement_to_text_script:{message:"コールバックスクリプト"},menu_setting_replacement_to_anchor:{message:"アンカー置換定義"},menu_setting_replacement_to_anchor_script:{message:"コールバックスクリプト"},menu_setting_replacement_to_link:{message:"ハイパーリンク置換定義"},menu_setting_replacement_to_link_filter_list:{message:"フィルタ一覧"},menu_setting_replacement_to_link_filter_name:{message:"フィルタ名"},menu_setting_replacement_to_link_filter:{message:"フィルタ設定"},menu_setting_replacement_to_link_filter_filter_url:{message:"動作リンク先URLの設定"},menu_setting_replacement_to_link_check_box_container:{message:"ハイパーリンク置換の設定"},menu_setting_replacement_to_link_enable_reflect_to_anchor:{message:"リンクの変更をアンカーに反映する"},menu_setting_replacement_to_link_enable_cache:{message:"コールバックスクリプトの実行結果をキャッシュする"},menu_setting_replacement_to_link_filter_script:{message:"コールバックスクリプト"},menu_setting_replacement_to_referer:{message:"リファラ置換定義"},menu_setting_replacement_to_referer_filter_list:{message:"フィルタ一覧"},menu_setting_replacement_to_referer_filter_name:{message:"フィルタ名"},menu_setting_replacement_to_referer_filter:{message:"フィルタ設定"},menu_setting_replacement_to_referer_filter_filter_url:{message:"動作リンク先URLの設定"},menu_setting_replacement_to_referer_filter_send_type:{message:"基本リファラ"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item:{message:"基本リファラ値"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_default:{message:"改変しない"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_current_url:{message:"現在のURL"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_link_url:{message:"リンク先のURL"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_custom:{message:"カスタム文字列"},menu_setting_replacement_to_referer_filter_send_custom:{message:"カスタム文字列"},menu_setting_replacement_to_referer_filter_send_regexp:{message:"基本リファラを正規表現で置換"},menu_setting_replacement_to_referer_filter_send_regexp_match:{message:"マッチ条件"},menu_setting_replacement_to_referer_filter_send_regexp_replacement:{message:"置換後の文字列"},menu_setting_replacement_to_referer_filter_send_regexp_replacement_hint:{message:"$0…マッチした全体文字列。$1～$9…マッチした部分文字列。$$…ドルのエスケープシーケンス"},menu_setting_replacement_to_useragent:{message:"ユーザーエージェント置換定義"},menu_setting_replacement_to_useragent_filter_list:{message:"フィルタ一覧"},menu_setting_replacement_to_useragent_filter_name:{message:"フィルタ名"},menu_setting_replacement_to_useragent_filter:{message:"フィルタ設定"},menu_setting_replacement_to_useragent_filter_filter_url:{message:"動作リンク先URLの設定"},menu_setting_replacement_to_useragent_filter_send:{message:"基本ユーザーエージェント"},menu_setting_replacement_to_useragent_filter_send_custom:{message:"カスタム文字列"},menu_setting_make_link_to_text:{message:"ハイパーリンク化定義"},menu_setting_make_link_to_text_script:{message:"コールバックスクリプト"},menu_setting_expand_short_url:{message:"短縮URL展開定義"},menu_setting_expand_short_url_filter_url:{message:"対象URLを設定"},menu_setting_expand_text:{message:"テキスト展開定義"},menu_setting_expand_text_inline:{message:"インライン表示の設定"},menu_setting_expand_text_inline_check_box_container:{message:"インライン表示の設定"},menu_setting_expand_text_inline_disable_same_text:{message:"同じURLは展開しない"},menu_setting_expand_text_inline_script_allow:{message:"リンクからインライン表示する条件"},menu_setting_expand_text_inline_script_insert:{message:"テキストの挿入位置"},menu_setting_expand_image:{message:"イメージ展開定義"},menu_setting_expand_image_thumbnail:{message:"サムネイル表示設定"},menu_setting_expand_image_thumbnail_enable_check_box_container:{message:"有効 / 無効"},menu_setting_expand_image_thumbnail_enable_thumbnail:{message:"サムネイルを表示する"},menu_setting_expand_image_thumbnail_check_box_container:{message:"サムネイル表示設定"},menu_setting_expand_image_thumbnail_enable_popup_mouseover:{message:"サムネイルにマウスオーバーするとポップアップ表示"},menu_setting_expand_image_thumbnail_disable_same_thumbnail_image:{message:"同じイメージがすでに配置されている場合サムネイルを表示しない"},menu_setting_expand_image_thumbnail_size:{message:"サムネイルの表示サイズ"},menu_setting_expand_image_thumbnail_size_min:{message:"最小許容限界（ピクセル値）"},menu_setting_expand_image_thumbnail_size_scale:{message:"基本拡大率（パーセント）"},menu_setting_expand_image_thumbnail_size_max:{message:"最大許容限界（ピクセル値）"},menu_setting_expand_image_thumbnail_script_allow:{message:"リンクからサムネイル化する条件"},menu_setting_expand_image_thumbnail_script_insert:{message:"サムネイルの挿入位置"},menu_setting_expand_image_popup:{message:"ポップアップ表示設定"},menu_setting_expand_image_popup_enable_check_box_container:{message:"有効 / 無効"},menu_setting_expand_image_popup_enable_popup_mouseover:{message:"アンカーをマウスオーバーするとポップアップ表示"},menu_setting_expand_image_popup_check_box_container:{message:"アニメーション設定"},menu_setting_expand_image_popup_enable_animation_scale:{message:"拡大縮小フェードを有効"},menu_setting_expand_image_popup_enable_animation_alpha:{message:"半透明フェードを有効"},menu_setting_expand_image_popup_origin_type:{message:"ポップアップイメージの配置基点"},menu_setting_expand_image_popup_origin_type_combo_box_item_center:{message:"中心を基点"},menu_setting_expand_image_popup_origin_type_combo_box_item_upper_left:{message:"左上を基点"},menu_setting_expand_image_popup_origin_type_combo_box_item_upper_right:{message:"右上を基点"},menu_setting_expand_image_popup_origin_type_combo_box_item_client_center:{message:"クライアント中央"},menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_element:{message:"エレメントに吸着"},menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_mouse:{message:"マウスカーソルに吸着"},menu_setting_expand_image_popup_time:{message:"ポップアップ時間"},menu_setting_expand_image_popup_time_wait_open:{message:"開くまでに待機する時間（ミリ秒）"},menu_setting_expand_image_popup_time_wait_close:{message:"閉じるまでに待機する時間（ミリ秒）"},menu_setting_expand_image_popup_position_type:{message:"ポップアップイメージの配置位置"},menu_setting_expand_image_popup_position_type_combo_box_item_absolute:{message:"絶対座標系に配置"},menu_setting_expand_image_popup_position_type_combo_box_item_fixed:{message:"クライアント座標系に配置"},menu_setting_expand_image_popup_size:{message:"ポップアップイメージの表示サイズ"},menu_setting_expand_image_popup_size_scale:{message:"拡大率（パーセント）"},menu_setting_expand_image_popup_script_allow:{message:"リンクからポップアップ表示する条件"},menu_setting_expand_image_reduced_image:{message:"縮小イメージ設定"},menu_setting_expand_image_reduced_image_check_box_container:{message:"有効 / 無効"},menu_setting_expand_image_popup_enable_popup:{message:"縮小されたイメージをマウスオーバーするとポップアップ表示"},menu_setting_expand_image_reduced_image_allow_slcale_less_then:{message:"縮小イメージのポップアップ条件"},menu_setting_expand_image_reduced_image_allow_slcale_less_then_text:{message:"以下の拡大率の場合"},menu_setting_expand_image_load:{message:"イメージのロード設定"},menu_setting_expand_image_load_check_box_container:{message:"イメージのロード設定"},menu_setting_expand_image_load_enable_notify:{message:"ロード進捗を表示"},menu_setting_expand_image_load_start_type:{message:"イメージのロード設定"},menu_setting_expand_image_load_start_type_preload:{message:"すべて事前に読み込む"},menu_setting_expand_image_load_start_type_scroll:{message:"スクロールと連動して読み込む"},menu_setting_expand_image_load_src_type:{message:"イメージのソースタイプ"},menu_setting_expand_image_load_src_type_combo_box_item_url:{message:"URL 形式 (混在コンテンツを除く)"},menu_setting_expand_image_load_src_type_combo_box_item_blob_url:{message:"Blob URL に変換（すべて）"},menu_setting_expand_image_load_decode:{message:"イメージのデコード設定"},menu_setting_expand_image_load_decode_combo_box_item_auto:{message:"表示される瞬間から開始"},menu_setting_expand_image_load_decode_combo_box_item_pre_decode:{message:"すべて事前にデコードする"},menu_setting_expand_image_load_unload_check_box_container:{message:"イメージのアンロード設定"},menu_setting_expand_image_load_enable_unload:{message:"イメージのアンロードを有効"},menu_setting_expand_image_load_unload:{message:"イメージのアンロード条件"},menu_setting_expand_image_load_allow_unload_more_then_text:{message:"MByte以上ロードした場合、古いイメージを解放する"},menu_setting_expand_sound:{message:"サウンド展開定義"},menu_setting_expand_sound_inline:{message:"インライン表示の設定"},menu_setting_expand_sound_inline_check_box_container:{message:"インライン表示の設定"},menu_setting_expand_sound_inline_disable_same_text:{message:"同じURLは展開しない"},menu_setting_expand_sound_inline_sound_max:{message:"最大同時表示数"},menu_setting_expand_sound_inline_script_allow:{message:"リンクからインライン表示する条件"},menu_setting_expand_sound_inline_script_insert:{message:"オーディオの挿入位置"},menu_setting_expand_sound_inline_element:{message:"HTMLAudioElement の設定"},menu_setting_expand_sound_inline_element_script_allow:{message:"HTMLAudioElement を表示する条件"},menu_setting_expand_sound_inline_element_src_type:{message:"ソースタイプ"},menu_setting_expand_sound_inline_element_src_type_combo_box_item_url:{message:"URL 形式 (ストリーミング再生)"},menu_setting_expand_sound_inline_element_src_type_combo_box_item_blob_url:{message:"Blob URL に変換（すべて読み込む）"},menu_setting_expand_sound_inline_soundcloud:{message:"soundcloud.com の設定"},menu_setting_expand_sound_inline_soundcloud_check_box_container:{message:"soundcloud.com の設定"},menu_setting_expand_sound_inline_soundcloud_visible_player_html5:{message:"HTML5 版のプレイヤーを表示"},menu_setting_expand_sound_inline_mixcloud:{message:"www.mixcloud.com の設定"},menu_setting_expand_sound_inline_mixcloud_check_box_container:{message:"www.mixcloud.com の設定"},menu_setting_expand_sound_inline_mixcloud_visible_player:{message:"プレイヤーを表示"},menu_setting_expand_video:{message:"ビデオ展開定義"},menu_setting_expand_video_inline:{message:"インライン表示の設定"},menu_setting_expand_video_inline_check_box_container:{message:"インライン表示の設定"},menu_setting_expand_video_inline_disable_same_video:{message:"同じURLは展開しない"},menu_setting_expand_video_inline_video_max:{message:"最大同時表示数"},menu_setting_expand_video_inline_size:{message:"ビデオの表示サイズ"},menu_setting_expand_video_inline_width_max:{message:"幅の最大許容限界（ピクセル値）"},menu_setting_expand_video_inline_height_max:{message:"高さの最大許容限界（ピクセル値）"},menu_setting_expand_video_inline_script_allow:{message:"リンクからインライン表示する条件"},menu_setting_expand_video_inline_script_insert:{message:"エレメントの挿入位置"},menu_setting_expand_video_inline_element:{message:"HTMLVideoElement の設定"},menu_setting_expand_video_inline_element_script_allow:{message:"HTMLVideoElement を表示する条件"},menu_setting_expand_video_inline_element_src_type:{message:"ソースタイプ"},menu_setting_expand_video_inline_element_src_type_combo_box_item_url:{message:"URL 形式 (ストリーミング再生)"},menu_setting_expand_video_inline_element_src_type_combo_box_item_blob_url:{message:"Blob URL に変換（すべて読み込む）"},menu_setting_expand_video_inline_youtube:{message:"www.youtube.com の設定"},menu_setting_expand_video_inline_youtube_check_box_container:{message:"www.youtube.com の設定"},menu_setting_expand_video_inline_youtube_visible_video:{message:"ビデオを表示"},menu_setting_expand_video_inline_nicovideo:{message:"www.nicovideo.jp の設定"},menu_setting_expand_video_inline_nicovideo_check_box_container:{message:"www.nicovideo.jp の設定"},menu_setting_expand_video_inline_nicovideo_visible_video:{message:"ビデオを表示"},menu_setting_expand_video_inline_dailymotion:{message:"www.dailymotion.com の設定"},menu_setting_expand_video_inline_dailymotion_check_box_container:{message:"www.dailymotion.com の設定"},menu_setting_expand_video_inline_dailymotion_visible_video:{message:"ビデオを表示"},menu_setting_expand_video_inline_video:{message:"vimeo.com の設定"},menu_setting_expand_video_inline_video_check_box_container:{message:"vimeo.com の設定"},menu_setting_expand_video_inline_video_visible_video:{message:"ビデオを表示"},menu_setting_expand_iframe:{message:"インラインフレーム展開定義"},menu_setting_expand_iframe_inline:{message:"インライン表示の設定"},menu_setting_expand_iframe_inline_check_box_container:{message:"インライン表示の設定"},menu_setting_expand_iframe_inline_disable_same_iframe:{message:"同じURLは展開しない"},menu_setting_expand_iframe_inline_script_allow:{message:"リンクからインライン表示する条件"},menu_setting_expand_iframe_inline_script_insert:{message:"HTMLIFrameElement の挿入位置"},menu_setting_style_sheet:{message:"スタイルシート定義"},menu_setting_style_sheet_expand_text:{message:"テキスト展開のスタイル"},menu_setting_style_sheet_expand_text_element:{message:"HTMLTextAreaElement の設定"},menu_setting_style_sheet_expand_text_element_inline:{message:"テキストのインライン表示"},menu_setting_style_sheet_expand_text_element_inline_unsafe:{message:"テキストのインライン表示（混在コンテンツ）"},menu_setting_style_sheet_expand_image:{message:"イメージ展開のスタイル"},menu_setting_style_sheet_expand_image_element:{message:"HTMImageElement の設定"},menu_setting_style_sheet_expand_image_element_inline:{message:"イメージのサムネイル表示"},menu_setting_style_sheet_expand_image_element_inline_unsafe:{message:"イメージのサムネイル表示（混在コンテンツ）"},menu_setting_style_sheet_expand_image_element_popup:{message:"イメージのポップアップ表示"},menu_setting_style_sheet_expand_image_element_popup_unsafe:{message:"イメージのポップアップ表示（混在コンテンツ）"},menu_setting_style_sheet_expand_sound:{message:"サウンド展開のスタイル"},menu_setting_style_sheet_expand_sound_element:{message:"HTMLAudioElement の設定"},menu_setting_style_sheet_expand_sound_element_inline_audio:{message:"オーディオのインライン表示"},menu_setting_style_sheet_expand_sound_element_inline_audio_unsafe:{message:"オーディオのインライン表示（混在コンテンツ）"},menu_setting_style_sheet_expand_sound_soundcloud:{message:"soundcloud.com の設定"},menu_setting_style_sheet_expand_sound_soundcloud_inline_player_html5:{message:"HTML5 版プレイヤーのインライン表示"},menu_setting_style_sheet_expand_sound_mixcloud:{message:"www.mixcloud.com の設定"},menu_setting_style_sheet_expand_sound_mixcloud_inline_player:{message:"プレイヤーのインライン表示"},menu_setting_style_sheet_expand_video:{message:"ビデオ展開のスタイル"},menu_setting_style_sheet_expand_video_element:{message:"HTMLVideoElement の設定"},menu_setting_style_sheet_expand_video_element_inline_video:{message:"ビデオのインライン表示"},menu_setting_style_sheet_expand_video_element_inline_video_unsafe:{message:"ビデオのインライン表示（混在コンテンツ）"},menu_setting_style_sheet_expand_video_youtube:{message:"www.youtube.com の設定"},menu_setting_style_sheet_expand_video_youtube_inline_video:{message:"ビデオのインライン表示"},menu_setting_style_sheet_expand_video_nicovideo:{message:"www.nicovideo.jp の設定"},menu_setting_style_sheet_expand_video_nicovideo_inline_video:{message:"ビデオのインライン表示"},menu_setting_style_sheet_expand_video_dailymotion:{message:"www.dailymotion.com の設定"},menu_setting_style_sheet_expand_video_dailymotion_inline_video:{message:"ビデオのインライン表示"},menu_setting_style_sheet_expand_video_vimeo:{message:"vimeo.com の設定"},menu_setting_style_sheet_expand_video_vimeo_inline_video:{message:"ビデオのインライン表示"},menu_setting_style_sheet_expand_iframe:{message:"インラインフレーム展開のスタイル"},menu_setting_style_sheet_expand_iframe_element:{message:"HTMLIFrameElement の設定"},menu_setting_style_sheet_expand_iframe_element_inline:{message:"インラインフレームのインライン表示"},menu_setting_style_sheet_expand_iframe_element_inline_unsafe:{message:"インラインフレームのインライン表示（混在コンテンツ）"},menu_setting_experimental:{message:"試験運用機能の定義"},menu_setting_experimental_revise_scroll:{message:"スクロール補正機能"},menu_setting_experimental_revise_scroll_check_box_container:{message:"スクロール補正の設定"},menu_setting_experimental_revise_scroll_enable:{message:"有効"},menu_setting_experimental_revise_scroll_threshold_vertical:{message:"補正対象とする縦方向のしきい値（ 0 [画面上端] ～ 100 [画面下端] ）"},menu_setting_language:{message:"LANGUAGE (言語設定)"},menu_credit:{message:"クレジット"},menu_credit_info_version:{message:"バージョン情報"},menu_credit_info_copyright:{message:"製作"},menu_credit_info_translator:{message:"翻訳者"},menu_setting_define_list:{message:"定義一覧"},menu_setting_define_list_hint:{message:"リストを選択すると下部のコントロールの入力が可能です。複数選択可。複数選択時は同時編集。灰色はプリセット設定。プリセット設定は削除不可。"},menu_setting_define_button_add:{message:"追加"},menu_setting_define_button_delete:{message:"削除"},menu_setting_define_button_move_up:{message:"上に移動"},menu_setting_define_button_move_down:{message:"下に移動"},menu_setting_define_button_export:{message:"エクスポート"},menu_setting_define_button_import:{message:"インポート"},menu_setting_define_add_dialog:{message:"定義の新規作成"},menu_setting_define_add_dialog_name:{message:"名前"},menu_setting_define_add_dialog_copy_define:{message:"既存の定義から複製"},menu_setting_define_add_dialog_define_list_box_item_new:{message:"複製せずに新規作成する"},menu_setting_define_delete_dialog:{message:"定義の削除"},menu_setting_define_delete_dialog_name:{message:"削除する定義名"},menu_setting_define_delete_dialog_change_define:{message:"定義の代替選択"},menu_setting_define_delete_dialog_define_list_box_item_no_use:{message:"定義を使用しない"},menu_setting_define_name:{message:"定義名"},menu_setting_define_export_dialog:{message:"定義のエクスポート"},menu_setting_define_export_dialog_export:{message:"エクスポート"},menu_setting_define_export_dialog_export_hint:{message:"テキストエリアの値をコピーして下さい。"},menu_setting_define_import_dialog:{message:"定義のインポート"},menu_setting_define_import_dialog_explanation:{message:"インポートについて"},menu_setting_define_import_dialog_explanation_0:{message:"プリセット設定は上書き、ユーザー設定は新規追加されます。"},menu_setting_define_import_dialog_explanation_1:{message:"インポートを行う前に、基本設定のエクスポート機能でバックアップを取ることをお勧めします。"},menu_setting_define_import_dialog_explanation_2:{message:"信頼の無い人物が作成した設定データを、絶対にインポートしないで下さい。悪意のあるスクリプトが含まれる恐れがあります。"},menu_setting_define_import_dialog_import:{message:"インポート"},menu_setting_define_import_dialog_import_hint:{message:"エクスポートから出力したテキストをペーストして下さい。"},menu_setting_define_import_dialog_confirm:{message:"インポートを実行しますか？"},menu_setting_define_import_alert:{message:"インポートの結果"},menu_setting_define_import_alert_success:{message:"インポートが完了しました。"},menu_setting_define_import_alert_failure:{message:"インポートに失敗しました。"},menu_setting_define_wildcard_detail:{message:"ワイルドカードについて"},menu_setting_define_wildcard_detail_0:{message:"ワイルドカードは、最後に必ず実行されます。"},menu_setting_define_wildcard_detail_1:{message:"ワイルドカードは、ブラウザのすべての通信に影響します。"},menu_setting_define_wildcard_detail_2:{message:"ワイルドカードは、定義ではありません。「URL マッピング設定」にて使用する事はできません。"},menu_setting_filter_list:{message:"フィルタ一覧"},menu_setting_filter_list_hint:{message:"リストを選択すると下部のコントロールの入力が可能です。上から順番にURLの比較を行いマッチすればその設定が使用されます。"},menu_setting_filter_button_add:{message:"追加"},menu_setting_filter_button_delete:{message:"削除"},menu_setting_filter_button_prio_up:{message:"優先度を上げる"},menu_setting_filter_button_prio_down:{message:"優先度を下げる"},menu_setting_filter_button_export:{message:"エクスポート"},menu_setting_filter_button_import:{message:"インポート"},menu_setting_filter_add_dialog:{message:"フィルタの新規作成"},menu_setting_filter_add_dialog_name:{message:"名前"},menu_setting_filter_add_dialog_copy_define:{message:"既存の設定から複製"},menu_setting_filter_add_dialog_define_list_box_item_new:{message:"複製せずに新規作成する"},menu_setting_filter_export_dialog:{message:"フィルタのエクスポート"},menu_setting_filter_export_dialog_export:{message:"エクスポート"},menu_setting_filter_export_dialog_export_hint:{message:"テキストエリアの値をコピーして下さい。"},menu_setting_filter_import_dialog:{message:"フィルタのインポート"},menu_setting_filter_import_dialog_explanation:{message:"インポートについて"},menu_setting_filter_import_dialog_explanation_0:{message:"インポートした内容は、リストの最後に追加されます。"},menu_setting_filter_import_dialog_explanation_1:{message:"インポートを行う前に、基本設定のエクスポート機能でバックアップを取ることをお勧めします。"},menu_setting_filter_import_dialog_explanation_2:{message:"信頼の無い人物が作成した設定データを、絶対にインポートしないで下さい。悪意のあるスクリプトが含まれる恐れがあります。"},menu_setting_filter_import_dialog_import:{message:"インポート"},menu_setting_filter_import_dialog_import_hint:{message:"エクスポートから出力したテキストをペーストして下さい。"},menu_setting_filter_import_dialog_confirm:{message:"インポートを実行しますか？"},menu_setting_filter_import_alert:{message:"インポートの結果"},menu_setting_filter_import_alert_success:{message:"インポートが完了しました。"},menu_setting_filter_import_alert_failure:{message:"インポートに失敗しました。"},menu_button_ok:{message:"OK"},menu_button_yes:{message:"決定"},menu_button_no:{message:"キャンセル"},menu_script_obj_editer_edit_script:{message:"スクリプトを編集する"},menu_script_obj_editer_delete_script:{message:"スクリプトを削除する（デフォルトに戻す）"},menu_scriptarea_hint:{message:"配列に格納して匿名関数を記述します。信頼の無い人物が作成したスクリプトを、絶対に書き込まないで下さい。悪意のあるスクリプトが含まれる恐れがあります。"},menu_scriptarea_unsupport:{message:"ユーザースクリプトは現在動作しません😥（デフォルトのスクリプトが実行されます）"},menu_text_regexp_hint:{message:"正規表現文字列を記述。[オプション] g…繰り返し処理、i…小文字と大文字を区別しない"},menu_regexp_list_button_add:{message:"追加"},menu_regexp_list_button_delete:{message:"削除"},menu_regexp_list_button_move_up:{message:"上に移動"},menu_regexp_list_button_move_down:{message:"下に移動"},menu_setting_url_edit_container_combo_box_item_asterisk:{message:"アスタリスク形式で入力する"},menu_setting_url_edit_container_combo_box_item_regexp:{message:"正規表現形式で入力する"},menu_setting_url_edit_container_type_asterisk_hint:{message:"URL を記述します。アスタリスク使用可。複数行指定可。"},page_expand_popup_menu:{message:"PageExpand メニュー"},context_menu_pageexpand_config:{message:"PageExpand の設定"},context_menu_batch_download_image:{message:"一括ダウンロード（画像）"},context_menu_batch_download_user:{message:"一括ダウンロード（ユーザー）"},context_menu_pageexpand_open_bbs_board:{message:"掲示板ボードを開く"},context_menu_pageexpand_open_bbs_board_run_confirm:{message:"このページ内で掲示板ボードを実行しますか？"},context_menu_pageexpand_config_current_page:{message:"現在のページの設定を編集"},context_menu_pageexpand_config_current_bbs:{message:"現在の掲示板の設定を編集"},context_menu_pageexpand_config_current_page_confirm:{message:"PageExpand 設定は、規定のページ内でしか動作しません。\n（Web ページ側から悪意のあるスクリプトが注入されるのを防ぐためです）\n\n以下のページを開きますか？\n"},context_menu_pageexpand_config_auto_run_confirm:{message:"このページ内で PageExpand 設定を実行しますか？\n（もしこのページが汚染されている場合、悪意のあるスクリプトが注入されます）\n\n"},context_menu_pageexpand_start:{message:"PageExpand の開始"},context_menu_pageexpand_execute_fastest:{message:"PageExpand の最速実行"},context_menu_pageexpand_abort:{message:"PageExpand の中止"},context_menu_pageexpand_debug:{message:"PageExpand デバッグ"}},en:{extension_name:{message:"PageExpand"},extension_description:{message:"All Image Download. Image Zoom. Expand Thumbnail and Audio and Video. Expand the short URL. Generate a link from text. Override Referer. Extend BBS. etc..."},page_expand_config:{message:"PageExpand Setting"},menu_setting_standard:{message:"Standard Setting"},menu_setting_standard_filter_url:{message:"To limit the operation by URL"},menu_setting_standard_filter_url_combo_box_item_deny:{message:"Do not operate only at the specified address. (Otherwise it will all work.)"},menu_setting_standard_filter_url_combo_box_item_allow:{message:"Work only at the specified address. (Otherwise, all does not work.)"},menu_setting_standard_filter_url_hint:{message:"Describes the URL. Can be used an asterisk. Can be specified multi line."},menu_setting_standard_check_box_container:{message:"Standard Setting"},menu_setting_standard_enable_icon_address_bar:{message:"Displays an icon in the address bar."},menu_setting_standard_enable_context_menu:{message:"Display the context menu."},menu_setting_standard_enable_startup:{message:"Operation starts from when the load is finished."},menu_setting_standard_enable_debug_mode:{message:"Running in debug mode."},menu_setting_standard_enable_output_log:{message:"Output the log to the console.(debug)"},menu_setting_standard_execute_queue:{message:"ExecuteQueue Setting (Normally, you do not need to change.)"},menu_setting_standard_execute_queue_time_sleep:{message:"Sleep time (Millisecond)"},menu_setting_standard_execute_queue_time_occupancy:{message:"Maximum CPU occupancy time (Millisecond)"},menu_setting_standard_execute_queue_hint:{message:"When maximum CPU occupancy time is large, Response operation is worse,The script will run faster. If the sleep time is small,CPU utilization is higher,The script will run faster."},menu_setting_standard_touch:{message:"Touch Operation Setting"},menu_setting_standard_enable_input_touch:{message:"Enable touch operation."},menu_setting_standard_enable_double_touch_assist:{message:"Display the double touch assist."},menu_setting_standard_command:{message:"Execute Menu (for mobile)"},menu_setting_standard_command_execute_button:{message:"Execute"},menu_setting_standard_command_execute_dialog:{message:"Execute Menu"},menu_setting_standard_command_execute_dialog_tab_list:{message:"select the tab"},menu_setting_standard_command_execute_dialog_command_list:{message:"select the command"},menu_setting_standard_command_execute_dialog_confirm:{message:"Do you want to execute?"},menu_setting_standard_export_import:{message:"Setting Export / Import"},menu_setting_standard_export_button:{message:"Export"},menu_setting_standard_import_button:{message:"Import"},menu_setting_standard_export_dialog:{message:"Setting Export"},menu_setting_standard_export_dialog_export:{message:"Export"},menu_setting_standard_export_dialog_export_hint:{message:"Please copy the text of TextArea."},menu_setting_standard_import_dialog:{message:"Setting Import"},menu_setting_standard_import_dialog_explanation:{message:"information about Import"},menu_setting_standard_import_dialog_explanation_0:{message:"All current settings will be lost."},menu_setting_standard_import_dialog_explanation_1:{message:"It is recommended that you take a backup on the export function."},menu_setting_standard_import_dialog_explanation_2:{message:"Please note so that it does not contain malicious code."},menu_setting_standard_import_dialog_import:{message:"Import"},menu_setting_standard_import_dialog_import_hint:{message:"Please paste the output text from Export."},menu_setting_standard_import_dialog_confirm:{message:"Do you want to Import?"},menu_setting_standard_import_alert:{message:"A result of the import"},menu_setting_standard_import_alert_success:{message:"Import has been completed."},menu_setting_standard_import_alert_failure:{message:"Failed to import."},menu_setting_standard_storage_sync:{message:"Sync Storage"},menu_setting_standard_storage_sync_load_button:{message:"Load"},menu_setting_standard_storage_sync_save_button:{message:"Save"},menu_setting_standard_storage_sync_delete_button:{message:"Delete"},menu_setting_standard_storage_sync_load_dialog:{message:"Load from the Sync Storage"},menu_setting_standard_storage_sync_load_dialog_explanation:{message:"information about Load from the Sync Storage"},menu_setting_standard_storage_sync_load_dialog_explanation_0:{message:"Load the data from the Sync Storage, apply to PageExpand Setting."},menu_setting_standard_storage_sync_load_dialog_explanation_1:{message:"All current settings will be lost."},menu_setting_standard_storage_sync_load_dialog_explanation_2:{message:"It is recommended that you take a backup on the export function."},menu_setting_standard_storage_sync_load_dialog_confirm:{message:"Do you want to Load from the Sync Storage?"},menu_setting_standard_storage_sync_load_alert:{message:"A result of the Load from the Sync Storage"},menu_setting_standard_storage_sync_load_alert_success:{message:"Load from the Sync Storage has been completed."},menu_setting_standard_storage_sync_load_alert_failure:{message:"Failed to the Load from the Sync Storage."},menu_setting_standard_storage_sync_save_dialog:{message:"Save to the Sync Storage"},menu_setting_standard_storage_sync_save_dialog_explanation:{message:"information about Save to the Sync Storage"},menu_setting_standard_storage_sync_save_dialog_explanation_0:{message:"Save the current settings to the Sync Storage."},menu_setting_standard_storage_sync_save_dialog_explanation_1:{message:"Need to enable the functionality of the sync of browser."},menu_setting_standard_storage_sync_save_dialog_explanation_2:{message:"There is a limit to the size. Fail if the size is too large."},menu_setting_standard_storage_sync_save_dialog_confirm:{message:"Do you want to Save to the Sync Storage?"},menu_setting_standard_storage_sync_save_alert:{message:"A result of the Save to the Sync Storage"},menu_setting_standard_storage_sync_save_alert_success:{message:"Save to the Sync Storage has been completed."},menu_setting_standard_storage_sync_save_alert_failure:{message:"Failed to the Save to the Sync Storage."},menu_setting_standard_storage_sync_delete_dialog:{message:"Delete from the Sync Storage"},menu_setting_standard_storage_sync_delete_dialog_explanation:{message:"information about Delete from the Sync Storage"},menu_setting_standard_storage_sync_delete_dialog_explanation_0:{message:"Delete the setting data stored in the Sync Storage."},menu_setting_standard_storage_sync_delete_dialog_confirm:{message:"Do you want to Delete from the Sync Storage?"},menu_setting_standard_storage_sync_delete_alert:{message:"A result of the Delete from the Sync Storage"},menu_setting_standard_storage_sync_delete_alert_success:{message:"Delete from the Sync Storage has been completed."},menu_setting_standard_storage_sync_delete_alert_failure:{message:"Failed to the Delete from the Sync Storage."},menu_setting_standard_reset:{message:"Initialization of setting"},menu_setting_standard_reset_button:{message:"Remove all the settings, Return to the initial state."},menu_setting_standard_reset_dialog:{message:"Initialization of setting"},menu_setting_standard_reset_dialog_explanation:{message:"information about Initialization"},menu_setting_standard_reset_dialog_explanation_0:{message:"Returns all settings to their default state."},menu_setting_standard_reset_dialog_explanation_1:{message:"All current settings will be lost."},menu_setting_standard_reset_dialog_confirm:{message:"Do you want to Initialization?"},menu_setting_standard_reset_alert:{message:"Initialization results"},menu_setting_standard_reset_alert_success:{message:"Configuration initialization has been completed."},menu_setting_standard_reset_alert_failure:{message:"Failed to initialize the configuration."},menu_setting_download:{message:"Download Setting"},menu_setting_download_load:{message:"Load Setting (XHR)"},menu_setting_download_load_thread_max:{message:"Maximum number of simultaneous loads"},menu_setting_download_load_timeout:{message:"Timeout (Millisecond)"},menu_setting_download_load_timeout_hint:{message:"If specify 0, timeout is no limit."},menu_setting_download_load_cache_for_media:{message:"Cache MODE (for Media)"},menu_setting_download_load_cache_for_media_hint:{message:'Normally, you do not need to change. Use "fetch API" and works when "loading media".'},menu_setting_expand_image_load_cache_for_media_combo_box_item_default:{message:"default (best)"},menu_setting_expand_image_load_cache_for_media_combo_box_item_no_store:{message:"don't use cache."},menu_setting_expand_image_load_cache_for_media_combo_box_item_force_cache:{message:"If cache exists, don't request. (forever old data)"},menu_setting_download_download:{message:"Download Setting"},menu_setting_download_download_thread_max:{message:"Maximum number of simultaneous downloads"},menu_setting_download_download_save_file:{message:"Save File Name"},menu_setting_download_download_save_file_combo_box_item_simple:{message:"simple"},menu_setting_download_download_save_file_combo_box_item_detail:{message:"detail"},menu_setting_download_download_save_file_simple:{message:"Select File Name"},menu_setting_download_download_save_file_detail:{message:"Edit File Name"},menu_setting_download_download_save_file_variable:{message:"Variable List"},menu_setting_download_download_conflict_type:{message:"File Name Conflict"},menu_setting_download_download_conflict_type_combo_box_item_rename:{message:"rename"},menu_setting_download_download_conflict_type_combo_box_item_overwrite:{message:"overwrite"},menu_setting_download_batch_download:{message:"Batch Download Setting"},menu_setting_expand_bbs:{message:"BBS Settng"},menu_setting_expand_bbs_list:{message:"List of BBS Setting"},menu_setting_expand_bbs_list_hint:{message:"When you select an item in the list, the lower control can be edited. Condition script will be executed in order from top to bottom. possible to select multiple. Can be edited by multiple selection. Gray is preset setting. Preset setting can not be deleted."},menu_setting_expand_bbs_button_add:{message:"add"},menu_setting_expand_bbs_button_delete:{message:"delete"},menu_setting_expand_bbs_button_prio_up:{message:"prio up"},menu_setting_expand_bbs_button_prio_down:{message:"prio down"},menu_setting_expand_bbs_button_export:{message:"export"},menu_setting_expand_bbs_button_import:{message:"import"},menu_setting_expand_bbs_add_dialog:{message:"Creating a new BBS Setting"},menu_setting_expand_bbs_add_dialog_name:{message:"Name"},menu_setting_expand_bbs_add_dialog_copy_define:{message:"Replicated from the existing setting."},menu_setting_expand_bbs_add_dialog_define_list_box_item_new:{message:"create a new"},menu_setting_expand_bbs_export_dialog:{message:"BBS Setting Export"},menu_setting_expand_bbs_export_dialog_export:{message:"Export"},menu_setting_expand_bbs_export_dialog_export_hint:{message:"Please copy the text of TextArea."},menu_setting_expand_bbs_import_dialog:{message:"BBS Setting Import"},menu_setting_expand_bbs_import_dialog_explanation:{message:"information about Import"},menu_setting_expand_bbs_import_dialog_explanation_0:{message:"Preset setting will be overwritten. User setting will be add new."},menu_setting_expand_bbs_import_dialog_explanation_1:{message:"It is recommended that you take a backup on the export function."},menu_setting_expand_bbs_import_dialog_explanation_2:{message:"Please note so that it does not contain malicious code."},menu_setting_expand_bbs_import_dialog_import:{message:"Import"},menu_setting_expand_bbs_import_dialog_import_hint:{message:"Please paste the output text from Export."},menu_setting_expand_bbs_import_dialog_confirm:{message:"Do you want to Import?"},menu_setting_expand_bbs_import_alert:{message:"A result of the import"},menu_setting_expand_bbs_import_alert_success:{message:"Import has been completed."},menu_setting_expand_bbs_import_alert_failure:{message:"Failed to import."},menu_setting_expand_bbs_name:{message:"Name"},menu_setting_expand_bbs_check_box_container:{message:"Enable / Disable"},menu_setting_expand_bbs_enable_setting:{message:"Use this setting."},menu_setting_expand_bbs_filter_url:{message:"URL to allow the operation"},menu_setting_expand_bbs_popup_check_box_container:{message:"Popup Setting"},menu_setting_expand_bbs_popup_enable_animation:{message:"Enable pop-up animation"},menu_setting_expand_bbs_popup_origin_type:{message:"Placement origin of the pop-up"},menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_top_bottom:{message:"adsorb top bottom"},menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_left_right:{message:"adsorb left right"},menu_setting_expand_bbs_popup_position_type:{message:"Arrangement position of the pop-up"},menu_setting_expand_bbs_popup_position_type_combo_box_item_absolute:{message:"absolute"},menu_setting_expand_bbs_popup_position_type_combo_box_item_fixed:{message:"fixed"},menu_setting_expand_bbs_popup_percent:{message:"Popup Size"},menu_setting_expand_bbs_popup_percent_h:{message:"Percent Horizontal (0-100)"},menu_setting_expand_bbs_popup_percent_v:{message:"Percent Vertical (0-100)"},menu_setting_expand_bbs_popup_time:{message:"Popup Time"},menu_setting_expand_bbs_popup_time_wait_open:{message:"The time to wait before open (Millisecond)"},menu_setting_expand_bbs_popup_time_wait_close:{message:"The time to wait before close (Millisecond)"},menu_setting_expand_bbs_popup_style_sheet:{message:"Stylesheet of Popup"},menu_setting_expand_bbs_script_initialize:{message:"Initialize Script"},menu_setting_expand_bbs_script_callback:{message:"Callback Script"},menu_setting_urlmap:{message:"URL Mapping Setting"},menu_setting_urlmap_list:{message:"List of URL Mapping Setting"},menu_setting_urlmap_list_hint:{message:"When you select an item in the list, the lower control can be edited. Will be compared with the order from above. possible to select multiple. Can be edited by multiple selection. Gray is preset setting. Preset setting can not be deleted."},menu_setting_urlmap_button_add:{message:"add"},menu_setting_urlmap_button_delete:{message:"delete"},menu_setting_urlmap_button_prio_up:{message:"prio up"},menu_setting_urlmap_button_prio_down:{message:"prio down"},menu_setting_urlmap_add_dialog:{message:"Creating a new URL Mapping"},menu_setting_urlmap_add_dialog_name:{message:"Name"},menu_setting_urlmap_add_dialog_copy_define:{message:"Replicated from the existing setting."},menu_setting_urlmap_add_dialog_define_list_box_item_new:{message:"create a new"},menu_setting_urlmap_name:{message:"Name"},menu_setting_urlmap_check_box_container:{message:"Enable / Disable"},menu_setting_urlmap_enable_setting:{message:"Use this setting."},menu_setting_urlmap_filter_url:{message:"URL to allow the operation"},menu_setting_urlmap_mixed_passive_content_container:{message:"Mixed Passive Content Security"},menu_setting_urlmap_mixed_passive_content_unsafe:{message:'"http://" as is'},menu_setting_urlmap_mixed_passive_content_safe:{message:'Convert to "https://" (Do not display if failed)'},menu_setting_urlmap_mixed_passive_content_hint:{message:"If content such as images and videos is displayed with a red border, It means that it is unencrypted, untrustworthy, and can be tampered with by man-in-the-middle attacks."},menu_setting_urlmap_mixed_active_content_container:{message:"Mixed Active Content Security"},menu_setting_urlmap_mixed_active_content_unsafe:{message:'"http://" as is'},menu_setting_urlmap_mixed_active_content_safe:{message:'Convert to "https://" (Do not display if failed)'},menu_setting_urlmap_mixed_active_content_hint:{message:'Browser is block "mixed active content" by default. To actually display, you need to unblock "Insecure content" from the permission settings. (dangerous)'},menu_setting_urlmap_define_button_edit:{message:"edit"},menu_setting_urlmap_define_button_add:{message:"add"},menu_setting_urlmap_define_button_remove:{message:"remove"},menu_setting_urlmap_define_button_prio_up:{message:"up"},menu_setting_urlmap_define_button_prio_down:{message:"down"},menu_setting_urlmap_define_combo_box_item_no_use:{message:"not use the definine"},menu_setting_define_multi_select_add_dialog:{message:"add the define"},menu_setting_define_multi_select_add_dialog_list:{message:"Select the define you want to add."},menu_setting_access_block:{message:"Blocking Access Define"},menu_setting_access_block_filter_url:{message:"URL to block access"},menu_setting_replacement_to_element:{message:"Replace Element Define"},menu_setting_replacement_to_element_script:{message:"Callback Script"},menu_setting_replacement_to_text:{message:"Replace Text Define"},menu_setting_replacement_to_text_script:{message:"Callback Script"},menu_setting_replacement_to_anchor:{message:"Replace Anchor Define"},menu_setting_replacement_to_anchor_script:{message:"Callback Script"},menu_setting_replacement_to_link:{message:"Replace Link Define"},menu_setting_replacement_to_link_filter_list:{message:"Filter List"},menu_setting_replacement_to_link_filter_name:{message:"Filter Name"},menu_setting_replacement_to_link_filter:{message:"Filter Setting"},menu_setting_replacement_to_link_filter_filter_url:{message:"Link URL to allow the operation"},menu_setting_replacement_to_link_check_box_container:{message:"Setting to link"},menu_setting_replacement_to_link_enable_reflect_to_anchor:{message:"Reflected to the HTMLAnchorElement href"},menu_setting_replacement_to_link_enable_cache:{message:"Cache the results of callback script"},menu_setting_replacement_to_link_filter_script:{message:"Callback Script"},menu_setting_replacement_to_referer:{message:"Replace Referer Define"},menu_setting_replacement_to_referer_filter_list:{message:"Filter List"},menu_setting_replacement_to_referer_filter_name:{message:"Filter Name"},menu_setting_replacement_to_referer_filter:{message:"Filter Setting"},menu_setting_replacement_to_referer_filter_filter_url:{message:"Link URL to allow the operation"},menu_setting_replacement_to_referer_filter_send_type:{message:"Basic Referer"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item:{message:"Basic Referer Value"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_default:{message:"default"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_current_url:{message:"current url"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_link_url:{message:"link url"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_custom:{message:"custom"},menu_setting_replacement_to_referer_filter_send_custom:{message:"Custom String"},menu_setting_replacement_to_referer_filter_send_regexp:{message:"Replaced by a regular expression"},menu_setting_replacement_to_referer_filter_send_regexp_match:{message:"Match conditions"},menu_setting_replacement_to_referer_filter_send_regexp_replacement:{message:"Replace String"},menu_setting_replacement_to_referer_filter_send_regexp_replacement_hint:{message:"$0...Whole match. $1-$9...Partial match. $$…Dollar sign escape sequence."},menu_setting_replacement_to_useragent:{message:"Replace Useragent Define"},menu_setting_replacement_to_useragent_filter_list:{message:"Filter List"},menu_setting_replacement_to_useragent_filter_name:{message:"Filter Name"},menu_setting_replacement_to_useragent_filter:{message:"Filter Setting"},menu_setting_replacement_to_useragent_filter_filter_url:{message:"Link URL to allow the operation"},menu_setting_replacement_to_useragent_filter_send:{message:"Basic Useragent"},menu_setting_replacement_to_useragent_filter_send_custom:{message:"Custom String"},menu_setting_make_link_to_text:{message:"Make Link To Text Define"},menu_setting_make_link_to_text_script:{message:"Callback Script"},menu_setting_expand_short_url:{message:"Expand Short Url Define"},menu_setting_expand_short_url_filter_url:{message:"URL to allow the operation"},menu_setting_expand_text:{message:"Expand Text Define"},menu_setting_expand_text_inline:{message:"Setting to display inline"},menu_setting_expand_text_inline_check_box_container:{message:"Setting to display inline"},menu_setting_expand_text_inline_disable_same_text:{message:"If the same URL, not to Expand."},menu_setting_expand_text_inline_script_allow:{message:"Condition to display inline from a link"},menu_setting_expand_text_inline_script_insert:{message:"Text Insert"},menu_setting_expand_image:{message:"Expand Image Define"},menu_setting_expand_image_thumbnail:{message:"Setting to display thumbnail"},menu_setting_expand_image_thumbnail_enable_check_box_container:{message:"Enable / Disable"},menu_setting_expand_image_thumbnail_enable_thumbnail:{message:"Display the thumbnail."},menu_setting_expand_image_thumbnail_check_box_container:{message:"Setting to display thumbnail"},menu_setting_expand_image_thumbnail_enable_popup_mouseover:{message:"If you mouse over the thumbnail, a pop-up display"},menu_setting_expand_image_thumbnail_disable_same_thumbnail_image:{message:"If the same URL, not to Expand."},menu_setting_expand_image_thumbnail_size:{message:"Thumbnail Size"},menu_setting_expand_image_thumbnail_size_min:{message:"Minimum allowed size (pixel)"},menu_setting_expand_image_thumbnail_size_scale:{message:"Scale (Percent)"},menu_setting_expand_image_thumbnail_size_max:{message:"Maximum allowed size (pixel)"},menu_setting_expand_image_thumbnail_script_allow:{message:"Condition to display thumbnail from a link"},menu_setting_expand_image_thumbnail_script_insert:{message:"Thumbnail Insert"},menu_setting_expand_image_popup:{message:"Setting to display popup"},menu_setting_expand_image_popup_enable_check_box_container:{message:"Enable / Disable"},menu_setting_expand_image_popup_enable_popup_mouseover:{message:"If you mouse over the anchor, a pop-up display"},menu_setting_expand_image_popup_check_box_container:{message:"Animation"},menu_setting_expand_image_popup_enable_animation_scale:{message:"Enable scale fade animation"},menu_setting_expand_image_popup_enable_animation_alpha:{message:"Enable alpha fade animation"},menu_setting_expand_image_popup_origin_type:{message:"Placement origin of the pop-up image"},menu_setting_expand_image_popup_origin_type_combo_box_item_center:{message:"center"},menu_setting_expand_image_popup_origin_type_combo_box_item_upper_left:{message:"upper left"},menu_setting_expand_image_popup_origin_type_combo_box_item_upper_right:{message:"upper right"},menu_setting_expand_image_popup_origin_type_combo_box_item_client_center:{message:"client center"},menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_element:{message:"adsorb element"},menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_mouse:{message:"adsorb mouse"},menu_setting_expand_image_popup_time:{message:"Popup Time"},menu_setting_expand_image_popup_time_wait_open:{message:"The time to wait before open (Millisecond)"},menu_setting_expand_image_popup_time_wait_close:{message:"The time to wait before close (Millisecond)"},menu_setting_expand_image_popup_position_type:{message:"Arrangement position of the pop-up image"},menu_setting_expand_image_popup_position_type_combo_box_item_absolute:{message:"absolute"},menu_setting_expand_image_popup_position_type_combo_box_item_fixed:{message:"fixed"},menu_setting_expand_image_popup_size:{message:"Popup Size"},menu_setting_expand_image_popup_size_scale:{message:"Scale (Percent)"},menu_setting_expand_image_popup_script_allow:{message:"Conditions to display popup from the link"},menu_setting_expand_image_reduced_image:{message:"Reduced Image Setting"},menu_setting_expand_image_reduced_image_check_box_container:{message:"Enable / Disable"},menu_setting_expand_image_popup_enable_popup:{message:"If you mouse over the Reduced Image, a pop-up display"},menu_setting_expand_image_reduced_image_allow_slcale_less_then:{message:"Conditions to display popup"},menu_setting_expand_image_reduced_image_allow_slcale_less_then_text:{message:"If the magnification is less than."},menu_setting_expand_image_load:{message:"Load Image Setting"},menu_setting_expand_image_load_check_box_container:{message:"Load Image Setting"},menu_setting_expand_image_load_enable_notify:{message:"Display the progress."},menu_setting_expand_image_load_start_type:{message:"How to load image"},menu_setting_expand_image_load_start_type_preload:{message:"Preload"},menu_setting_expand_image_load_start_type_scroll:{message:"Conjunction with the scroll"},menu_setting_expand_image_load_src_type:{message:"Image Source Format"},menu_setting_expand_image_load_src_type_combo_box_item_url:{message:"URL (except mixed content)"},menu_setting_expand_image_load_src_type_combo_box_item_blob_url:{message:"Blob URL (all)"},menu_setting_expand_image_load_decode:{message:"Decode Image Setting"},menu_setting_expand_image_load_decode_combo_box_item_auto:{message:"Browser default"},menu_setting_expand_image_load_decode_combo_box_item_pre_decode:{message:"Pre-decode the all"},menu_setting_expand_image_load_unload_check_box_container:{message:"Unload Image Setting"},menu_setting_expand_image_load_enable_unload:{message:"Enable Unload Image"},menu_setting_expand_image_load_unload:{message:"Conditions to unload image"},menu_setting_expand_image_load_allow_unload_more_then_text:{message:"If load more than the specified of MBytes, Release the old image."},menu_setting_expand_sound:{message:"Expand Sound Define"},menu_setting_expand_sound_inline:{message:"Setting to display inline"},menu_setting_expand_sound_inline_check_box_container:{message:"Setting to display inline"},menu_setting_expand_sound_inline_disable_same_text:{message:"If the same URL, not to Expand."},menu_setting_expand_sound_inline_sound_max:{message:"Maximum number of simultaneous display"},menu_setting_expand_sound_inline_script_allow:{message:"Condition to display inline from a link"},menu_setting_expand_sound_inline_script_insert:{message:"Audio Insert"},menu_setting_expand_sound_inline_element:{message:"HTMLAudioElement Setting"},menu_setting_expand_sound_inline_element_script_allow:{message:"Condition to display HTMLAudioElement"},menu_setting_expand_sound_inline_element_src_type:{message:"Audio Source Format"},menu_setting_expand_sound_inline_element_src_type_combo_box_item_url:{message:"URL (streaming)"},menu_setting_expand_sound_inline_element_src_type_combo_box_item_blob_url:{message:"Blob URL (full)"},menu_setting_expand_sound_inline_soundcloud:{message:"soundcloud.com Setting"},menu_setting_expand_sound_inline_soundcloud_check_box_container:{message:"soundcloud.com Setting"},menu_setting_expand_sound_inline_soundcloud_visible_player_html5:{message:"enable player (HTML5)"},menu_setting_expand_sound_inline_mixcloud:{message:"www.mixcloud.com Setting"},menu_setting_expand_sound_inline_mixcloud_check_box_container:{message:"www.mixcloud.com Setting"},menu_setting_expand_sound_inline_mixcloud_visible_player:{message:"enable player"},menu_setting_expand_video:{message:"Expand Video Define"},menu_setting_expand_video_inline:{message:"Setting to display inline"},menu_setting_expand_video_inline_check_box_container:{message:"Setting to display inline"},menu_setting_expand_video_inline_disable_same_video:{message:"If the same URL, not to Expand."},menu_setting_expand_video_inline_video_max:{message:"Maximum number of simultaneous display"},menu_setting_expand_video_inline_size:{message:"Inline Video Size"},menu_setting_expand_video_inline_width_max:{message:"Maximum allowed width (pixel)"},menu_setting_expand_video_inline_height_max:{message:"Maximum allowed height (pixel)"},menu_setting_expand_video_inline_script_allow:{message:"Condition to display inline from a link"},menu_setting_expand_video_inline_script_insert:{message:"Element Insert"},menu_setting_expand_video_inline_element:{message:"HTMLVideoElement Setting"},menu_setting_expand_video_inline_element_script_allow:{message:" Condition to display HTMLVideoElement"},menu_setting_expand_video_inline_element_src_type:{message:"Video Source Format"},menu_setting_expand_video_inline_element_src_type_combo_box_item_url:{message:"URL (streaming)"},menu_setting_expand_video_inline_element_src_type_combo_box_item_blob_url:{message:"Blob URL (full)"},menu_setting_expand_video_inline_youtube:{message:"www.youtube.com Setting"},menu_setting_expand_video_inline_youtube_check_box_container:{message:"www.youtube.com Setting"},menu_setting_expand_video_inline_youtube_visible_video:{message:"enable video"},menu_setting_expand_video_inline_nicovideo:{message:"www.nicovideo.jp Setting"},menu_setting_expand_video_inline_nicovideo_check_box_container:{message:"www.nicovideo.jp Setting"},menu_setting_expand_video_inline_nicovideo_visible_video:{message:"enable video"},menu_setting_expand_video_inline_dailymotion:{message:"www.dailymotion.com Setting"},menu_setting_expand_video_inline_dailymotion_check_box_container:{message:"www.dailymotion.com Setting"},menu_setting_expand_video_inline_dailymotion_visible_video:{message:"enable video"},menu_setting_expand_video_inline_video:{message:"vimeo.com Setting"},menu_setting_expand_video_inline_video_check_box_container:{message:"vimeo.com Setting"},menu_setting_expand_video_inline_video_visible_video:{message:"enable video"},menu_setting_expand_iframe:{message:"Expand Iframe Define"},menu_setting_expand_iframe_inline:{message:"Setting to display inline"},menu_setting_expand_iframe_inline_check_box_container:{message:"Setting to display inline"},menu_setting_expand_iframe_inline_disable_same_iframe:{message:"If the same URL, not to Expand."},menu_setting_expand_iframe_inline_script_allow:{message:"Condition to display inline from a link"},menu_setting_expand_iframe_inline_script_insert:{message:"HTMLIFrameElement Insert"},menu_setting_style_sheet:{message:"Stylesheet Define"},menu_setting_style_sheet_expand_text:{message:"Stylesheet of Expanded Text"},menu_setting_style_sheet_expand_text_element:{message:"HTMLTextAreaElement Setting"},menu_setting_style_sheet_expand_text_element_inline:{message:"Text Inline Display"},menu_setting_style_sheet_expand_text_element_inline_unsafe:{message:"Text Inline Display (unsafe)"},menu_setting_style_sheet_expand_image:{message:"Stylesheet of Expanded Image"},menu_setting_style_sheet_expand_image_element:{message:"HTMImageElement Setting"},menu_setting_style_sheet_expand_image_element_inline:{message:"Image Thumbnail Display"},menu_setting_style_sheet_expand_image_element_inline_unsafe:{message:"Image Thumbnail Display (unsafe)"},menu_setting_style_sheet_expand_image_element_popup:{message:"Image Popup Display"},menu_setting_style_sheet_expand_image_element_popup_unsafe:{message:"Image Popup Display (unsafe)"},menu_setting_style_sheet_expand_sound:{message:"Stylesheet of Expanded Sound"},menu_setting_style_sheet_expand_sound_element:{message:"HTMLAudioElement Setting"},menu_setting_style_sheet_expand_sound_element_inline_audio:{message:"Audo Inline Display"},menu_setting_style_sheet_expand_sound_element_inline_audio_unsafe:{message:"Audo Inline Display (unsafe)"},menu_setting_style_sheet_expand_sound_soundcloud:{message:"soundcloud.com Setting"},menu_setting_style_sheet_expand_sound_soundcloud_inline_player_html5:{message:"Player (HTML5) Inline Display"},menu_setting_style_sheet_expand_sound_mixcloud:{message:"www.mixcloud.com Setting"},menu_setting_style_sheet_expand_sound_mixcloud_inline_player:{message:"Player Inline Display"},menu_setting_style_sheet_expand_video:{message:"Stylesheet of Expanded Video"},menu_setting_style_sheet_expand_video_element:{message:"HTMLVideoElement Setting"},menu_setting_style_sheet_expand_video_element_inline_video:{message:"Video Inline Display"},menu_setting_style_sheet_expand_video_element_inline_video_unsafe:{message:"Video Inline Display (unsafe)"},menu_setting_style_sheet_expand_video_youtube:{message:"www.youtube.com Setting"},menu_setting_style_sheet_expand_video_youtube_inline_video:{message:"Video Inline Display"},menu_setting_style_sheet_expand_video_nicovideo:{message:"www.nicovideo.jp Setting"},menu_setting_style_sheet_expand_video_nicovideo_inline_video:{message:"Video Inline Display"},menu_setting_style_sheet_expand_video_dailymotion:{message:"www.dailymotion.com Setting"},menu_setting_style_sheet_expand_video_dailymotion_inline_video:{message:"Video Inline Display"},menu_setting_style_sheet_expand_video_vimeo:{message:"vimeo.com Setting"},menu_setting_style_sheet_expand_video_vimeo_inline_video:{message:"Video Inline Display"},menu_setting_style_sheet_expand_iframe:{message:"Stylesheet of Expanded Iframe"},menu_setting_style_sheet_expand_iframe_element:{message:"HTMLIFrameElement Setting"},menu_setting_style_sheet_expand_iframe_element_inline:{message:"Iframe Inline Display"},menu_setting_style_sheet_expand_iframe_element_inline_unsafe:{message:"Iframe Inline Display (unsafe)"},menu_setting_experimental:{message:"Experimental Define"},menu_setting_experimental_revise_scroll:{message:"Revise Scroll Setting"},menu_setting_experimental_revise_scroll_check_box_container:{message:"Revise Scroll Setting"},menu_setting_experimental_revise_scroll_enable:{message:"enable"},menu_setting_experimental_revise_scroll_threshold_vertical:{message:"Threshold Vertical ( 0 [top] ～ 100 [bottom] )"},menu_setting_language:{message:"Language Setting"},menu_credit:{message:"Credit"},menu_credit_info_version:{message:"Version"},menu_credit_info_copyright:{message:"Copyright"},menu_credit_info_translator:{message:"Translator"},menu_setting_define_list:{message:"List of Define"},menu_setting_define_list_hint:{message:"When you select an item in the list, the lower control can be edited. Will be compared with the order from above. possible to select multiple. Can be edited by multiple selection. Gray is preset setting. Preset setting can not be deleted."},menu_setting_define_button_add:{message:"add"},menu_setting_define_button_delete:{message:"delete"},menu_setting_define_button_move_up:{message:"move up"},menu_setting_define_button_move_down:{message:"move down"},menu_setting_define_button_export:{message:"export"},menu_setting_define_button_import:{message:"import"},menu_setting_define_add_dialog:{message:"Create a new define"},menu_setting_define_add_dialog_name:{message:"Name"},menu_setting_define_add_dialog_copy_define:{message:"Replicated from the existing define"},menu_setting_define_add_dialog_define_list_box_item_new:{message:"create a new"},menu_setting_define_delete_dialog:{message:"Delete the Define"},menu_setting_define_delete_dialog_name:{message:"Define Name (Be removed)"},menu_setting_define_delete_dialog_change_define:{message:"Alternative Selection"},menu_setting_define_delete_dialog_define_list_box_item_no_use:{message:"not use the define"},menu_setting_define_name:{message:"Define Name"},menu_setting_define_export_dialog:{message:"Define Export"},menu_setting_define_export_dialog_export:{message:"Export"},menu_setting_define_export_dialog_export_hint:{message:"Please copy the text of TextArea."},menu_setting_define_import_dialog:{message:"Define Import"},menu_setting_define_import_dialog_explanation:{message:"information about Import"},menu_setting_define_import_dialog_explanation_0:{message:"Preset setting will be overwritten. User setting will be add new."},menu_setting_define_import_dialog_explanation_1:{message:"It is recommended that you take a backup on the export function."},menu_setting_define_import_dialog_explanation_2:{message:"Please note so that it does not contain malicious code."},menu_setting_define_import_dialog_import:{message:"Import"},menu_setting_define_import_dialog_import_hint:{message:"Please paste the output text from Export."},menu_setting_define_import_dialog_confirm:{message:"Do you want to Import?"},menu_setting_define_import_alert:{message:"A result of the import"},menu_setting_define_import_alert_success:{message:"Import has been completed."},menu_setting_define_import_alert_failure:{message:"Failed to import."},menu_setting_define_wildcard_detail:{message:"information about Wild Card"},menu_setting_define_wildcard_detail_0:{message:'"Wild Card" is always execute at the last.'},menu_setting_define_wildcard_detail_1:{message:'"Wild Card" be applied to all communications.'},menu_setting_define_wildcard_detail_2:{message:'"Wild Card" is not the define. Can not be used in the "URL Mapping Setting".'},menu_setting_filter_list:{message:"Filter List"},menu_setting_filter_list_hint:{message:"When you select an item in the list, the lower control can be edited. Will be compared with the order from above. possible to select multiple. Can be edited by multiple selection."},menu_setting_filter_button_add:{message:"add"},menu_setting_filter_button_delete:{message:"delete"},menu_setting_filter_button_prio_up:{message:"prio up"},menu_setting_filter_button_prio_down:{message:"prio down"},menu_setting_filter_button_export:{message:"export"},menu_setting_filter_button_import:{message:"import"},menu_setting_filter_add_dialog:{message:"Creating a new Filter Setting"},menu_setting_filter_add_dialog_name:{message:"Name"},menu_setting_filter_add_dialog_copy_define:{message:"Replicated from the existing setting."},menu_setting_filter_add_dialog_define_list_box_item_new:{message:"create a new"},menu_setting_filter_export_dialog:{message:"Filter Export"},menu_setting_filter_export_dialog_export:{message:"Export"},menu_setting_filter_export_dialog_export_hint:{message:"Please copy the text of TextArea."},menu_setting_filter_import_dialog:{message:"Filter Import"},menu_setting_filter_import_dialog_explanation:{message:"information about Import"},menu_setting_filter_import_dialog_explanation_0:{message:"Import data is added to the last of the list."},menu_setting_filter_import_dialog_explanation_1:{message:"It is recommended that you take a backup on the export function."},menu_setting_filter_import_dialog_explanation_2:{message:"Please note so that it does not contain malicious code."},menu_setting_filter_import_dialog_import:{message:"Import"},menu_setting_filter_import_dialog_import_hint:{message:"Please paste the output text from Export."},menu_setting_filter_import_dialog_confirm:{message:"Do you want to Import?"},menu_setting_filter_import_alert:{message:"A result of the import"},menu_setting_filter_import_alert_success:{message:"Import has been completed."},menu_setting_filter_import_alert_failure:{message:"Failed to import."},menu_button_ok:{message:"OK"},menu_button_yes:{message:"YES"},menu_button_no:{message:"CANCEL"},menu_script_obj_editer_edit_script:{message:"Edit Script"},menu_script_obj_editer_delete_script:{message:"Delete Script (return to default)"},menu_scriptarea_hint:{message:"To describe the anonymous function to array. Please note so that it does not contain malicious code."},menu_scriptarea_unsupport:{message:"UserScript doesn't work now. 😥"},menu_text_regexp_hint:{message:"regular expression string. [flags] g...repeat. i...without case-sensitive."},menu_regexp_list_button_add:{message:"add"},menu_regexp_list_button_delete:{message:"delete"},menu_regexp_list_button_move_up:{message:"move up"},menu_regexp_list_button_move_down:{message:"move down"},menu_setting_url_edit_container_combo_box_item_asterisk:{message:"asterisk format"},menu_setting_url_edit_container_combo_box_item_regexp:{message:"regular expression format"},menu_setting_url_edit_container_type_asterisk_hint:{message:"Describes the URL. Can be used an asterisk. Can be specified multi line."},page_expand_popup_menu:{message:"PageExpand Menu"},context_menu_pageexpand_config:{message:"PageExpand Setting"},context_menu_batch_download_image:{message:"Batch Download (image)"},context_menu_batch_download_user:{message:"Batch Download (user)"},context_menu_pageexpand_open_bbs_board:{message:"Open BBS Board"},context_menu_pageexpand_open_bbs_board_run_confirm:{message:"Do you want to run the BBS Board in this page?"},context_menu_pageexpand_config_current_page:{message:"PageExpand Setting Current Page"},context_menu_pageexpand_config_current_bbs:{message:"PageExpand Setting Current BBS"},context_menu_pageexpand_config_current_page_confirm:{message:"PageExpand Setting will run only in the following page. \n(The purpose is to prevent from being injected the malicious script)\n\nDo you want to open the following page?\n"},context_menu_pageexpand_config_auto_run_confirm:{message:"Do you want to run the PageExpand Setting in this page?\n(If this page is contaminated, then the malicious script will be injected)"},context_menu_pageexpand_start:{message:"Start PageExpand"},context_menu_pageexpand_execute_fastest:{message:"Execute PageExpand (fastest)"},context_menu_pageexpand_abort:{message:"Abort PageExpand"},context_menu_pageexpand_debug:{message:"PageExpand Debug"}},zh:{extension_name:{message:"PageExpand"},extension_description:{message:"下载所有图片、图片缩放、扩展缩略图以及音频和视频、展开短网址、从文本生成链接、覆盖引用站点、扩展BBS，等等..."},page_expand_config:{message:"PageExpand 设置"},menu_setting_standard:{message:"标准设置"},menu_setting_standard_filter_url:{message:"通过 URL 限制操作"},menu_setting_standard_filter_url_combo_box_item_deny:{message:"只在指定的地址不要操作。(否则它会在所有地址工作)"},menu_setting_standard_filter_url_combo_box_item_allow:{message:"只在指定的地址操作。(否则，所有地址都不工作。)"},menu_setting_standard_filter_url_hint:{message:"URL 描述。可以使用星号。可以指定多行。"},menu_setting_standard_check_box_container:{message:"标准设置"},menu_setting_standard_enable_icon_address_bar:{message:"在地址栏中显示图标。"},menu_setting_standard_enable_context_menu:{message:"显示上下文菜单。"},menu_setting_standard_enable_startup:{message:"加载完成时开始操作。"},menu_setting_standard_enable_debug_mode:{message:"在调试模式下运行。"},menu_setting_standard_enable_output_log:{message:"输出到控制台日志。(调试)"},menu_setting_standard_execute_queue:{message:"执行队列设置 (通常情况下，无需更改)"},menu_setting_standard_execute_queue_time_sleep:{message:"睡眠时间 (毫秒)"},menu_setting_standard_execute_queue_time_occupancy:{message:"最大的 CPU 占用时间 (毫秒)"},menu_setting_standard_execute_queue_hint:{message:"当最大的 CPU 占用时间较大，响应操作较差，该脚本将运行得更快。如果睡眠时间很短，CPU 利用率较高，该脚本将运行得更快。"},menu_setting_standard_touch:{message:"触摸操作设置"},menu_setting_standard_enable_input_touch:{message:"启用触摸操作。"},menu_setting_standard_enable_double_touch_assist:{message:"显示双触摸协助。"},menu_setting_standard_command:{message:"执行菜单 (移动)"},menu_setting_standard_command_execute_button:{message:"执行"},menu_setting_standard_command_execute_dialog:{message:"执行菜单"},menu_setting_standard_command_execute_dialog_tab_list:{message:"选择标签"},menu_setting_standard_command_execute_dialog_command_list:{message:"选择命令"},menu_setting_standard_command_execute_dialog_confirm:{message:"确定要执行吗?"},menu_setting_standard_export_import:{message:"设置导出/导入"},menu_setting_standard_export_button:{message:"导出"},menu_setting_standard_import_button:{message:"导入"},menu_setting_standard_export_dialog:{message:"导出设置"},menu_setting_standard_export_dialog_export:{message:"导出"},menu_setting_standard_export_dialog_export_hint:{message:"请复制文本区域的文本。"},menu_setting_standard_import_dialog:{message:"导入设置"},menu_setting_standard_import_dialog_explanation:{message:"关于导入的信息"},menu_setting_standard_import_dialog_explanation_0:{message:"当前的所有设置都将丢失。"},menu_setting_standard_import_dialog_explanation_1:{message:"建议你使用导出功能进行备份。"},menu_setting_standard_import_dialog_explanation_2:{message:"请注意，它不包含恶意代码。"},menu_setting_standard_import_dialog_import:{message:"导入"},menu_setting_standard_import_dialog_import_hint:{message:"请粘贴从导出处输出的文本。"},menu_setting_standard_import_dialog_confirm:{message:"确定要导入？"},menu_setting_standard_import_alert:{message:"导入的结果"},menu_setting_standard_import_alert_success:{message:"导入已经完成。"},menu_setting_standard_import_alert_failure:{message:"导入失败！"},menu_setting_standard_storage_sync:{message:"同步存储"},menu_setting_standard_storage_sync_load_button:{message:"加载"},menu_setting_standard_storage_sync_save_button:{message:"保存"},menu_setting_standard_storage_sync_delete_button:{message:"删除"},menu_setting_standard_storage_sync_load_dialog:{message:"从同步存储加载"},menu_setting_standard_storage_sync_load_dialog_explanation:{message:"关于从同步存储加载的信息"},menu_setting_standard_storage_sync_load_dialog_explanation_0:{message:"从同步存储加载数据，应用到 PageExpand 设置。"},menu_setting_standard_storage_sync_load_dialog_explanation_1:{message:"当前的所有设置都将丢失。"},menu_setting_standard_storage_sync_load_dialog_explanation_2:{message:"建议你使用导出功能进行备份"},menu_setting_standard_storage_sync_load_dialog_confirm:{message:"确定从同步存储加载？"},menu_setting_standard_storage_sync_load_alert:{message:"从同步存储加载的结果"},menu_setting_standard_storage_sync_load_alert_success:{message:"从同步存储加载成功。"},menu_setting_standard_storage_sync_load_alert_failure:{message:"从同步存储加载失败！"},menu_setting_standard_storage_sync_save_dialog:{message:"保存到同步存储"},menu_setting_standard_storage_sync_save_dialog_explanation:{message:"关于保存到同步存储的信息"},menu_setting_standard_storage_sync_save_dialog_explanation_0:{message:"将当前设置保存到同步存储。"},menu_setting_standard_storage_sync_save_dialog_explanation_1:{message:"需要启用浏览器的同步功能。"},menu_setting_standard_storage_sync_save_dialog_explanation_2:{message:"有大小限制。如果数据太大，会失败。"},menu_setting_standard_storage_sync_save_dialog_confirm:{message:"确定要保存到同步存储？"},menu_setting_standard_storage_sync_save_alert:{message:"保存到同步存储的结果"},menu_setting_standard_storage_sync_save_alert_success:{message:"保存到同步存储成功。"},menu_setting_standard_storage_sync_save_alert_failure:{message:"保存到同步存储失败！"},menu_setting_standard_storage_sync_delete_dialog:{message:"从同步存储删除"},menu_setting_standard_storage_sync_delete_dialog_explanation:{message:"关于从同步存储区删除的信息"},menu_setting_standard_storage_sync_delete_dialog_explanation_0:{message:"删除同步存储中存储的设置数据。"},menu_setting_standard_storage_sync_delete_dialog_confirm:{message:"确定要从同步存储删除吗？"},menu_setting_standard_storage_sync_delete_alert:{message:"关于从同步存储删除的结果"},menu_setting_standard_storage_sync_delete_alert_success:{message:"从同步存储删除成功。"},menu_setting_standard_storage_sync_delete_alert_failure:{message:"从同步存储删除失败！"},menu_setting_standard_reset:{message:"设置初始化"},menu_setting_standard_reset_button:{message:"删除所有的设置，返回到初始状态。"},menu_setting_standard_reset_dialog:{message:"设置初始化"},menu_setting_standard_reset_dialog_explanation:{message:"关于初始化的信息"},menu_setting_standard_reset_dialog_explanation_0:{message:"将所有设置都返回到它们的默认状态。"},menu_setting_standard_reset_dialog_explanation_1:{message:"当前的所有设置都将丢失。"},menu_setting_standard_reset_dialog_confirm:{message:"确定要初始化吗？"},menu_setting_standard_reset_alert:{message:"初始化的结果"},menu_setting_standard_reset_alert_success:{message:"配置初始化已完成。"},menu_setting_standard_reset_alert_failure:{message:"配置初始化失败！"},menu_setting_download:{message:"下载设置"},menu_setting_download_load:{message:"加载设置 (XHR)"},menu_setting_download_load_thread_max:{message:"同时加载的最大数目"},menu_setting_download_load_timeout:{message:"超时（毫秒）"},menu_setting_download_load_timeout_hint:{message:"如果指定为 0，超时时间没有限制。"},menu_setting_download_load_cache_for_media:{message:"Cache MODE (for Media)"},menu_setting_download_load_cache_for_media_hint:{message:'Normally, you do not need to change. Use "fetch API" and works when "loading media".'},menu_setting_expand_image_load_cache_for_media_combo_box_item_default:{message:"default (best)"},menu_setting_expand_image_load_cache_for_media_combo_box_item_no_store:{message:"don't use cache."},menu_setting_expand_image_load_cache_for_media_combo_box_item_force_cache:{message:"If cache exists, don't request. (forever old data)"},menu_setting_download_download:{message:"下载设置"},menu_setting_download_download_thread_max:{message:"同时下载的最大数目"},menu_setting_download_download_save_file:{message:"Save File Name"},menu_setting_download_download_save_file_combo_box_item_simple:{message:"simple"},menu_setting_download_download_save_file_combo_box_item_detail:{message:"detail"},menu_setting_download_download_save_file_simple:{message:"Select File Name"},menu_setting_download_download_save_file_detail:{message:"Edit File Name"},menu_setting_download_download_save_file_variable:{message:"Variable List"},menu_setting_download_download_conflict_type:{message:"文件名冲突"},menu_setting_download_download_conflict_type_combo_box_item_rename:{message:"重命名"},menu_setting_download_download_conflict_type_combo_box_item_overwrite:{message:"覆盖"},menu_setting_download_batch_download:{message:"Batch Download Setting"},menu_setting_expand_bbs:{message:"BBS 设置"},menu_setting_expand_bbs_list:{message:"BBS 设置列表"},menu_setting_expand_bbs_list_hint:{message:"当你选择列表中的项目时，可以编辑较低的控制。条件脚本按照从上到下的顺序执行。可以选择多个进行编辑。灰色是预设设置。不能删除预设的设置。"},menu_setting_expand_bbs_button_add:{message:"添加"},menu_setting_expand_bbs_button_delete:{message:"删除"},menu_setting_expand_bbs_button_prio_up:{message:"优先级+"},menu_setting_expand_bbs_button_prio_down:{message:"优先级-"},menu_setting_expand_bbs_button_export:{message:"导出"},menu_setting_expand_bbs_button_import:{message:"导入"},menu_setting_expand_bbs_add_dialog:{message:"创建新的 BBS 设置"},menu_setting_expand_bbs_add_dialog_name:{message:"名称"},menu_setting_expand_bbs_add_dialog_copy_define:{message:"从现有的设置复制。"},menu_setting_expand_bbs_add_dialog_define_list_box_item_new:{message:"创建新的"},menu_setting_expand_bbs_export_dialog:{message:"导出 BBS 设置"},menu_setting_expand_bbs_export_dialog_export:{message:"导出"},menu_setting_expand_bbs_export_dialog_export_hint:{message:"请复制文本区域的文本。"},menu_setting_expand_bbs_import_dialog:{message:"导入 BBS 设置"},menu_setting_expand_bbs_import_dialog_explanation:{message:"关于导入的信息"},menu_setting_expand_bbs_import_dialog_explanation_0:{message:"预设的设置将被覆盖。将添加新的用户设置。"},menu_setting_expand_bbs_import_dialog_explanation_1:{message:"建议你使用导出功能进行备份。"},menu_setting_expand_bbs_import_dialog_explanation_2:{message:"请注意，它不包含恶意代码。"},menu_setting_expand_bbs_import_dialog_import:{message:"导入"},menu_setting_expand_bbs_import_dialog_import_hint:{message:"请粘贴从导出处输出的文本。"},menu_setting_expand_bbs_import_dialog_confirm:{message:"确定要导入？"},menu_setting_expand_bbs_import_alert:{message:"导入的结果"},menu_setting_expand_bbs_import_alert_success:{message:"导入已经完成。"},menu_setting_expand_bbs_import_alert_failure:{message:"导入失败！"},menu_setting_expand_bbs_name:{message:"名称"},menu_setting_expand_bbs_check_box_container:{message:"启用 / 禁用"},menu_setting_expand_bbs_enable_setting:{message:"使用此设置。"},menu_setting_expand_bbs_filter_url:{message:"URL 允许进行操作"},menu_setting_expand_bbs_popup_check_box_container:{message:"弹窗设置"},menu_setting_expand_bbs_popup_enable_animation:{message:"启用弹窗动画"},menu_setting_expand_bbs_popup_origin_type:{message:"弹窗的起始位置"},menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_top_bottom:{message:"吸附顶底"},menu_setting_expand_bbs_popup_origin_type_combo_box_item_adsorb_left_right:{message:"吸附左右"},menu_setting_expand_bbs_popup_position_type:{message:"弹窗的布置位置"},menu_setting_expand_bbs_popup_position_type_combo_box_item_absolute:{message:"绝对"},menu_setting_expand_bbs_popup_position_type_combo_box_item_fixed:{message:"固定"},menu_setting_expand_bbs_popup_percent:{message:"弹窗的大小"},menu_setting_expand_bbs_popup_percent_h:{message:"水平 % (0-100)"},menu_setting_expand_bbs_popup_percent_v:{message:"垂直 % (0-100)"},menu_setting_expand_bbs_popup_time:{message:"弹窗的时间"},menu_setting_expand_bbs_popup_time_wait_open:{message:"打开前的等待时间 (毫秒)"},menu_setting_expand_bbs_popup_time_wait_close:{message:"关闭后的等待时间 (毫秒)"},menu_setting_expand_bbs_popup_style_sheet:{message:"弹窗的样式表"},menu_setting_expand_bbs_script_initialize:{message:"初始化脚本"},menu_setting_expand_bbs_script_callback:{message:"回调脚本"},menu_setting_urlmap:{message:"URL 映射设置"},menu_setting_urlmap_list:{message:"URL 映射设置列表"},menu_setting_urlmap_list_hint:{message:"当你选择列表中的项目时，可以编辑较低的控制。按照从上到下的顺序进行比较。可以选择多个，可以进行多选编辑。灰色是预设设置。不能删除预设的设置。"},menu_setting_urlmap_button_add:{message:"添加"},menu_setting_urlmap_button_delete:{message:"删除"},menu_setting_urlmap_button_prio_up:{message:"优先级+"},menu_setting_urlmap_button_prio_down:{message:"优先级-"},menu_setting_urlmap_add_dialog:{message:"创建新的 URL 映射"},menu_setting_urlmap_add_dialog_name:{message:"名称"},menu_setting_urlmap_add_dialog_copy_define:{message:"从现有的设置复制。"},menu_setting_urlmap_add_dialog_define_list_box_item_new:{message:"创建新的"},menu_setting_urlmap_name:{message:"名称"},menu_setting_urlmap_check_box_container:{message:"启用 / 禁用"},menu_setting_urlmap_enable_setting:{message:"使用此设置。"},menu_setting_urlmap_filter_url:{message:"URL 允许进行操作"},menu_setting_urlmap_mixed_passive_content_container:{message:"Mixed Passive Content Security"},menu_setting_urlmap_mixed_passive_content_unsafe:{message:'"http://" as is'},menu_setting_urlmap_mixed_passive_content_safe:{message:'Convert to "https://" (Do not display if failed)'},menu_setting_urlmap_mixed_passive_content_hint:{message:"If content such as images and videos is displayed with a red border, It means that it is unencrypted, untrustworthy, and can be tampered with by man-in-the-middle attacks."},menu_setting_urlmap_mixed_active_content_container:{message:"Mixed Active Content Security"},menu_setting_urlmap_mixed_active_content_unsafe:{message:'"http://" as is'},menu_setting_urlmap_mixed_active_content_safe:{message:'Convert to "https://" (Do not display if failed)'},menu_setting_urlmap_mixed_active_content_hint:{message:'Browser is block "mixed active content" by default. To actually display, you need to unblock "Insecure content" from the permission settings. (dangerous)'},menu_setting_urlmap_define_button_edit:{message:"编辑"},menu_setting_urlmap_define_button_add:{message:"添加"},menu_setting_urlmap_define_button_remove:{message:"移除"},menu_setting_urlmap_define_button_prio_up:{message:"向上"},menu_setting_urlmap_define_button_prio_down:{message:"向下"},menu_setting_urlmap_define_combo_box_item_no_use:{message:"不使用定义"},menu_setting_define_multi_select_add_dialog:{message:"添加定义"},menu_setting_define_multi_select_add_dialog_list:{message:"选择要添加的定义。"},menu_setting_access_block:{message:"拦截访问定义"},menu_setting_access_block_filter_url:{message:"URL 拦截访问"},menu_setting_replacement_to_element:{message:"替换元素定义"},menu_setting_replacement_to_element_script:{message:"回调脚本"},menu_setting_replacement_to_text:{message:"替换文本定义"},menu_setting_replacement_to_text_script:{message:"回调脚本"},menu_setting_replacement_to_anchor:{message:"替换锚点定义"},menu_setting_replacement_to_anchor_script:{message:"回调脚本"},menu_setting_replacement_to_link:{message:"替换链接定义"},menu_setting_replacement_to_link_filter_list:{message:"筛选器列表"},menu_setting_replacement_to_link_filter_name:{message:"筛选器名称"},menu_setting_replacement_to_link_filter:{message:"筛选器设置"},menu_setting_replacement_to_link_filter_filter_url:{message:"链接 URL，允许进行操作"},menu_setting_replacement_to_link_check_box_container:{message:"设置链接"},menu_setting_replacement_to_link_enable_reflect_to_anchor:{message:"反映到 HTML 锚点元素 href"},menu_setting_replacement_to_link_enable_cache:{message:"缓存回调脚本的结果"},menu_setting_replacement_to_link_filter_script:{message:"回调脚本"},menu_setting_replacement_to_referer:{message:"替换 Referer 定义"},menu_setting_replacement_to_referer_filter_list:{message:"筛选器列表"},menu_setting_replacement_to_referer_filter_name:{message:"筛选器名称"},menu_setting_replacement_to_referer_filter:{message:"筛选器设置"},menu_setting_replacement_to_referer_filter_filter_url:{message:"链接 URL，允许进行操作"},menu_setting_replacement_to_referer_filter_send_type:{message:"基本 Referer"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item:{message:"基本 Referer 值"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_default:{message:"默认"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_current_url:{message:"当前 url"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_link_url:{message:"链接 url"},menu_setting_replacement_to_referer_filter_send_type_combo_box_item_custom:{message:"自定义"},menu_setting_replacement_to_referer_filter_send_custom:{message:"自定义字符串"},menu_setting_replacement_to_referer_filter_send_regexp:{message:"通过正则表达式替换"},menu_setting_replacement_to_referer_filter_send_regexp_match:{message:"匹配条件"},menu_setting_replacement_to_referer_filter_send_regexp_replacement:{message:"替换字符串"},menu_setting_replacement_to_referer_filter_send_regexp_replacement_hint:{message:"$0...整体匹配。 $1-$9...部分匹配。 $$…美元符号转义序列。"},menu_setting_replacement_to_useragent:{message:"替换用户代理定义"},menu_setting_replacement_to_useragent_filter_list:{message:"筛选器列表"},menu_setting_replacement_to_useragent_filter_name:{message:"筛选器名称"},menu_setting_replacement_to_useragent_filter:{message:"筛选器设置"},menu_setting_replacement_to_useragent_filter_filter_url:{message:"链接 URL，允许进行操作"},menu_setting_replacement_to_useragent_filter_send:{message:"基本用户代理"},menu_setting_replacement_to_useragent_filter_send_custom:{message:"自定义字符串"},menu_setting_make_link_to_text:{message:"文本转链接定义"},menu_setting_make_link_to_text_script:{message:"回调脚本"},menu_setting_expand_short_url:{message:"扩展短 Url 定义"},menu_setting_expand_short_url_filter_url:{message:"URL 允许进行操作"},menu_setting_expand_text:{message:"扩展文本定义"},menu_setting_expand_text_inline:{message:"显示内联设置"},menu_setting_expand_text_inline_check_box_container:{message:"显示内联设置"},menu_setting_expand_text_inline_disable_same_text:{message:"如果 URL 相同，不扩展。"},menu_setting_expand_text_inline_script_allow:{message:"从链接显示内联的条件"},menu_setting_expand_text_inline_script_insert:{message:"文本插入"},menu_setting_expand_image:{message:"扩展图片定义"},menu_setting_expand_image_thumbnail:{message:"显示缩略图设置"},menu_setting_expand_image_thumbnail_enable_check_box_container:{message:"启用 / 禁用"},menu_setting_expand_image_thumbnail_enable_thumbnail:{message:"显示缩略图。"},menu_setting_expand_image_thumbnail_check_box_container:{message:"显示缩略图设置"},menu_setting_expand_image_thumbnail_enable_popup_mouseover:{message:"如果你的鼠标悬停在缩略图上，弹出窗口显示。"},menu_setting_expand_image_thumbnail_disable_same_thumbnail_image:{message:"如果 URL 相同，不扩展。"},menu_setting_expand_image_thumbnail_size:{message:"缩略图的大小"},menu_setting_expand_image_thumbnail_size_min:{message:"Minimum allowed size (pixel)"},menu_setting_expand_image_thumbnail_size_scale:{message:"比例 (%)"},menu_setting_expand_image_thumbnail_size_max:{message:"Maximum allowed size (pixel)"},menu_setting_expand_image_thumbnail_script_allow:{message:"从链接显示缩略图的条件"},menu_setting_expand_image_thumbnail_script_insert:{message:"缩略图插入"},menu_setting_expand_image_popup:{message:"显示弹窗设置"},menu_setting_expand_image_popup_enable_check_box_container:{message:"启用 / 禁用"},menu_setting_expand_image_popup_enable_popup_mouseover:{message:"如果你的鼠标悬停在锚点上，弹出窗口显示。"},menu_setting_expand_image_popup_check_box_container:{message:"动画"},menu_setting_expand_image_popup_enable_animation_scale:{message:"启用规模淡入淡出动画"},menu_setting_expand_image_popup_enable_animation_alpha:{message:"启用透明淡入淡出动画"},menu_setting_expand_image_popup_origin_type:{message:"弹窗的起始位置"},menu_setting_expand_image_popup_origin_type_combo_box_item_center:{message:"中央"},menu_setting_expand_image_popup_origin_type_combo_box_item_upper_left:{message:"左上角"},menu_setting_expand_image_popup_origin_type_combo_box_item_upper_right:{message:"右上角"},menu_setting_expand_image_popup_origin_type_combo_box_item_client_center:{message:"客户端中央"},menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_element:{message:"吸附元素"},menu_setting_expand_image_popup_origin_type_combo_box_item_adsorb_mouse:{message:"吸附鼠标"},menu_setting_expand_image_popup_time:{message:"弹窗的时间"},menu_setting_expand_image_popup_time_wait_open:{message:"打开前的等待时间 (毫秒)"},menu_setting_expand_image_popup_time_wait_close:{message:"关闭后的等待时间 (毫秒)"},menu_setting_expand_image_popup_position_type:{message:"弹出图片的排列位置"},menu_setting_expand_image_popup_position_type_combo_box_item_absolute:{message:"绝对"},menu_setting_expand_image_popup_position_type_combo_box_item_fixed:{message:"固定"},menu_setting_expand_image_popup_size:{message:"弹窗的大小"},menu_setting_expand_image_popup_size_scale:{message:"比例 (%)"},menu_setting_expand_image_popup_script_allow:{message:"从链接显示弹窗的条件"},menu_setting_expand_image_reduced_image:{message:"小图片设置"},menu_setting_expand_image_reduced_image_check_box_container:{message:"启用 / 禁用"},menu_setting_expand_image_popup_enable_popup:{message:"如果你的鼠标悬停在小图片上，弹出窗口显示。"},menu_setting_expand_image_reduced_image_allow_slcale_less_then:{message:"显示弹出窗口的条件"},menu_setting_expand_image_reduced_image_allow_slcale_less_then_text:{message:"如果放大倍数小于"},menu_setting_expand_image_load:{message:"加载图片设置"},menu_setting_expand_image_load_check_box_container:{message:"加载图片设置"},menu_setting_expand_image_load_enable_notify:{message:"显示进度。"},menu_setting_expand_image_load_start_type:{message:"如何加载图片"},menu_setting_expand_image_load_start_type_preload:{message:"预加载"},menu_setting_expand_image_load_start_type_scroll:{message:"滚动结合"},menu_setting_expand_image_load_src_type:{message:"Image Source Format"},menu_setting_expand_image_load_src_type_combo_box_item_url:{message:"URL (except mixed content)"},menu_setting_expand_image_load_src_type_combo_box_item_blob_url:{message:"Blob URL (all)"},menu_setting_expand_image_load_decode:{message:"Decode Image Setting"},menu_setting_expand_image_load_decode_combo_box_item_auto:{message:"Browser default"},menu_setting_expand_image_load_decode_combo_box_item_pre_decode:{message:"Pre-decode the all"},menu_setting_expand_image_load_unload_check_box_container:{message:"卸载图片设置"},menu_setting_expand_image_load_enable_unload:{message:"启用卸载图片"},menu_setting_expand_image_load_unload:{message:"卸载图片的条件"},menu_setting_expand_image_load_allow_unload_more_then_text:{message:"如果加载超过指定的 MBytes，释放旧的图片。"},menu_setting_expand_sound:{message:"扩展声音定义"},menu_setting_expand_sound_inline:{message:"显示内联设置"},menu_setting_expand_sound_inline_check_box_container:{message:"显示内联设置"},menu_setting_expand_sound_inline_disable_same_text:{message:"如果 URL 相同，不扩展。"},menu_setting_expand_sound_inline_sound_max:{message:"同时显示的最大数目"},menu_setting_expand_sound_inline_script_allow:{message:"从链接显示内联的条件"},menu_setting_expand_sound_inline_script_insert:{message:"音频插入"},menu_setting_expand_sound_inline_element:{message:"HTML 音频元素设置"},menu_setting_expand_sound_inline_element_script_allow:{message:"HTML 音频元素显示的条件"},menu_setting_expand_sound_inline_element_src_type:{message:"Audio Source Format"},menu_setting_expand_sound_inline_element_src_type_combo_box_item_url:{message:"URL (streaming)"},menu_setting_expand_sound_inline_element_src_type_combo_box_item_blob_url:{message:"Blob URL (full)"},menu_setting_expand_sound_inline_soundcloud:{message:"soundcloud.com 设置"},menu_setting_expand_sound_inline_soundcloud_check_box_container:{message:"soundcloud.com 设置"},menu_setting_expand_sound_inline_soundcloud_visible_player_html5:{message:"启用播放器 (HTML5)"},menu_setting_expand_sound_inline_mixcloud:{message:"www.mixcloud.com 设置"},menu_setting_expand_sound_inline_mixcloud_check_box_container:{message:"www.mixcloud.com 设置"},menu_setting_expand_sound_inline_mixcloud_visible_player:{message:"启用播放器"},menu_setting_expand_video:{message:"扩展视频定义"},menu_setting_expand_video_inline:{message:"显示内联设置"},menu_setting_expand_video_inline_check_box_container:{message:"显示内联设置"},menu_setting_expand_video_inline_disable_same_video:{message:"如果 URL 相同，不扩展。"},menu_setting_expand_video_inline_video_max:{message:"同时显示的最大数目"},menu_setting_expand_video_inline_size:{message:"Inline Video Size"},menu_setting_expand_video_inline_width_max:{message:"Maximum allowed width (pixel)"},menu_setting_expand_video_inline_height_max:{message:"Maximum allowed height (pixel)"},menu_setting_expand_video_inline_script_allow:{message:"从链接显示内联的条件"},menu_setting_expand_video_inline_script_insert:{message:"元素插入"},menu_setting_expand_video_inline_element:{message:"HTML 视频元素设置"},menu_setting_expand_video_inline_element_script_allow:{message:" HTML 视频元素显示的条件"},menu_setting_expand_video_inline_element_src_type:{message:"Video Source Format"},menu_setting_expand_video_inline_element_src_type_combo_box_item_url:{message:"URL (streaming)"},menu_setting_expand_video_inline_element_src_type_combo_box_item_blob_url:{message:"Blob URL (full)"},menu_setting_expand_video_inline_youtube:{message:"www.youtube.com 设置"},menu_setting_expand_video_inline_youtube_check_box_container:{message:"www.youtube.com 设置"},menu_setting_expand_video_inline_youtube_visible_video:{message:"启用视频"},menu_setting_expand_video_inline_nicovideo:{message:"www.nicovideo.jp 设置"},menu_setting_expand_video_inline_nicovideo_check_box_container:{message:"www.nicovideo.jp 设置"},menu_setting_expand_video_inline_nicovideo_visible_video:{message:"启用视频"},menu_setting_expand_video_inline_dailymotion:{message:"www.dailymotion.com 设置"},menu_setting_expand_video_inline_dailymotion_check_box_container:{message:"www.dailymotion.com 设置"},menu_setting_expand_video_inline_dailymotion_visible_video:{message:"启用视频"},menu_setting_expand_video_inline_video:{message:"vimeo.com 设置"},menu_setting_expand_video_inline_video_check_box_container:{message:"vimeo.com 设置"},menu_setting_expand_video_inline_video_visible_video:{message:"启用视频"},menu_setting_expand_iframe:{message:"扩展 Iframe 定义"},menu_setting_expand_iframe_inline:{message:"显示内联设置"},menu_setting_expand_iframe_inline_check_box_container:{message:"显示内联设置"},menu_setting_expand_iframe_inline_disable_same_iframe:{message:"如果 URL 相同，不扩展。"},menu_setting_expand_iframe_inline_script_allow:{message:"从链接显示内联的条件"},menu_setting_expand_iframe_inline_script_insert:{message:"HTML 内嵌框架元素插入"},menu_setting_style_sheet:{message:"样式表定义"},menu_setting_style_sheet_expand_text:{message:"扩展文本样式表"},menu_setting_style_sheet_expand_text_element:{message:"HTML 文本区域元素设置"},menu_setting_style_sheet_expand_text_element_inline:{message:"文本内联显示"},menu_setting_style_sheet_expand_text_element_inline_unsafe:{message:"文本内联显示 (unsafe)"},menu_setting_style_sheet_expand_image:{message:"扩展图片样式表"},menu_setting_style_sheet_expand_image_element:{message:"HTML 图片元素设置"},menu_setting_style_sheet_expand_image_element_inline:{message:"图片缩略图显示"},menu_setting_style_sheet_expand_image_element_inline_unsafe:{message:"图片缩略图显示 (unsafe)"},menu_setting_style_sheet_expand_image_element_popup:{message:"图片弹窗显示"},menu_setting_style_sheet_expand_image_element_popup_unsafe:{message:"图片弹窗显示 (unsafe)"},menu_setting_style_sheet_expand_sound:{message:"扩展声音样式表"},menu_setting_style_sheet_expand_sound_element:{message:"HTML 音频元素设置"},menu_setting_style_sheet_expand_sound_element_inline_audio:{message:"音频内联显示"},menu_setting_style_sheet_expand_sound_element_inline_audio_unsafe:{message:"音频内联显示 (unsafe)"},menu_setting_style_sheet_expand_sound_soundcloud:{message:"soundcloud.com 设置"},menu_setting_style_sheet_expand_sound_soundcloud_inline_player_html5:{message:"播放器 (HTML5) 内联显示"},menu_setting_style_sheet_expand_sound_mixcloud:{message:"www.mixcloud.com 设置"},menu_setting_style_sheet_expand_sound_mixcloud_inline_player:{message:"播放器内联显示"},menu_setting_style_sheet_expand_video:{message:"扩展视频样式表"},menu_setting_style_sheet_expand_video_element:{message:"HTML 视频元素设置"},menu_setting_style_sheet_expand_video_element_inline_video:{message:"视频内联显示"},menu_setting_style_sheet_expand_video_element_inline_video_unsafe:{message:"视频内联显示 (unsafe)"},menu_setting_style_sheet_expand_video_youtube:{message:"www.youtube.com 设置"},menu_setting_style_sheet_expand_video_youtube_inline_video:{message:"视频内联显示"},menu_setting_style_sheet_expand_video_nicovideo:{message:"www.nicovideo.jp 设置"},menu_setting_style_sheet_expand_video_nicovideo_inline_video:{message:"视频内联显示"},menu_setting_style_sheet_expand_video_dailymotion:{message:"www.dailymotion.com 设置"},menu_setting_style_sheet_expand_video_dailymotion_inline_video:{message:"视频内联显示"},menu_setting_style_sheet_expand_video_vimeo:{message:"vimeo.com 设置"},menu_setting_style_sheet_expand_video_vimeo_inline_video:{message:"视频内联显示"},menu_setting_style_sheet_expand_iframe:{message:"扩展内嵌框架样式表"},menu_setting_style_sheet_expand_iframe_element:{message:"HTML 内嵌框架样设置"},menu_setting_style_sheet_expand_iframe_element_inline:{message:"内嵌框架样内联显示"},menu_setting_style_sheet_expand_iframe_element_inline_unsafe:{message:"内嵌框架样内联显示 (unsafe)"},menu_setting_experimental:{message:"实验定义"},menu_setting_experimental_revise_scroll:{message:"修改滚动设置"},menu_setting_experimental_revise_scroll_check_box_container:{message:"修改滚动设置"},menu_setting_experimental_revise_scroll_enable:{message:"启用"},menu_setting_experimental_revise_scroll_threshold_vertical:{message:"垂直阈值 ( 0 [顶部] ～ 100 [底部] )"},menu_setting_language:{message:"LANGUAGE (语言设置)"},menu_credit:{message:"致谢"},menu_credit_info_version:{message:"版本"},menu_credit_info_copyright:{message:"版权"},menu_credit_info_translator:{message:"翻译者"},menu_setting_define_list:{message:"定义列表"},menu_setting_define_list_hint:{message:"当你选择列表中的项目时，可以编辑较低的控制。按照从上到下的顺序进行比较。可以选择多个，可以进行多选编辑。灰色是预设设置。不能删除预设的设置。"},menu_setting_define_button_add:{message:"添加"},menu_setting_define_button_delete:{message:"删除"},menu_setting_define_button_move_up:{message:"上移"},menu_setting_define_button_move_down:{message:"下移"},menu_setting_define_button_export:{message:"导出"},menu_setting_define_button_import:{message:"导入"},menu_setting_define_add_dialog:{message:"创建新定义"},menu_setting_define_add_dialog_name:{message:"名称"},menu_setting_define_add_dialog_copy_define:{message:"从现有定义复制"},menu_setting_define_add_dialog_define_list_box_item_new:{message:"创建新的"},menu_setting_define_delete_dialog:{message:"删除定义"},menu_setting_define_delete_dialog_name:{message:"定义名称 (被删除)"},menu_setting_define_delete_dialog_change_define:{message:"替代选择"},menu_setting_define_delete_dialog_define_list_box_item_no_use:{message:"不使用定义"},menu_setting_define_name:{message:"定义名称"},menu_setting_define_export_dialog:{message:"导出定义"},menu_setting_define_export_dialog_export:{message:"导出"},menu_setting_define_export_dialog_export_hint:{message:"请复制文本区域的文本。"},menu_setting_define_import_dialog:{message:"导入定义"},menu_setting_define_import_dialog_explanation:{message:"关于导入的信息"},menu_setting_define_import_dialog_explanation_0:{message:"预设的设置将被覆盖。将添加新的用户设置。"},menu_setting_define_import_dialog_explanation_1:{message:"建议你使用导出功能进行备份。"},menu_setting_define_import_dialog_explanation_2:{message:"请注意，它不包含恶意代码。"},menu_setting_define_import_dialog_import:{message:"导入"},menu_setting_define_import_dialog_import_hint:{message:"请粘贴从导出处输出的文本。"},menu_setting_define_import_dialog_confirm:{message:"确定要导入？"},menu_setting_define_import_alert:{message:"导入的结果"},menu_setting_define_import_alert_success:{message:"导入已经完成。"},menu_setting_define_import_alert_failure:{message:"导入失败！"},menu_setting_define_wildcard_detail:{message:"关于通配符的信息"},menu_setting_define_wildcard_detail_0:{message:'"通配符" 是总在最后执行。'},menu_setting_define_wildcard_detail_1:{message:'"通配符" 适用于所有通信。'},menu_setting_define_wildcard_detail_2:{message:'"通配符" 不是的定义。不能用在 "URL 映射设置"。'},menu_setting_filter_list:{message:"筛选器列表"},menu_setting_filter_list_hint:{message:"当你选择列表中的项目时，可以编辑较低的控制。按照从上到下的顺序进行比较。可以选择多个，可以进行多选编辑。"},menu_setting_filter_button_add:{message:"添加"},menu_setting_filter_button_delete:{message:"删除"},menu_setting_filter_button_prio_up:{message:"优先级+"},menu_setting_filter_button_prio_down:{message:"优先级-"},menu_setting_filter_button_export:{message:"导出"},menu_setting_filter_button_import:{message:"导入"},menu_setting_filter_add_dialog:{message:"创建新的筛选器设置"},menu_setting_filter_add_dialog_name:{message:"名称"},menu_setting_filter_add_dialog_copy_define:{message:"从现有的设置复制。"},menu_setting_filter_add_dialog_define_list_box_item_new:{message:"创建新的"},menu_setting_filter_export_dialog:{message:"导出过滤器"},menu_setting_filter_export_dialog_export:{message:"导出"},menu_setting_filter_export_dialog_export_hint:{message:"请复制文本区域的文本。"},menu_setting_filter_import_dialog:{message:"导入过滤器"},menu_setting_filter_import_dialog_explanation:{message:"关于导入的信息"},menu_setting_filter_import_dialog_explanation_0:{message:"导入的数据被添加到列表的最后。"},menu_setting_filter_import_dialog_explanation_1:{message:"建议你使用导出功能进行备份"},menu_setting_filter_import_dialog_explanation_2:{message:"请注意，它不包含恶意代码。"},menu_setting_filter_import_dialog_import:{message:"导入"},menu_setting_filter_import_dialog_import_hint:{message:"请粘贴从导出处输出的文本。"},menu_setting_filter_import_dialog_confirm:{message:"确定要导入？"},menu_setting_filter_import_alert:{message:"导入的结果"},menu_setting_filter_import_alert_success:{message:"导入已经完成。"},menu_setting_filter_import_alert_failure:{message:"导入失败！"},menu_button_ok:{message:"确定"},menu_button_yes:{message:"是"},menu_button_no:{message:"取消"},menu_script_obj_editer_edit_script:{message:"Edit Script"},menu_script_obj_editer_delete_script:{message:"Delete Script (return to default)"},menu_scriptarea_hint:{message:"用来描述到数组的匿名函数。请注意，它不包含恶意代码。"},menu_scriptarea_unsupport:{message:"UserScript doesn't work now. 😥"},menu_text_regexp_hint:{message:"正则表达式字符串。 [标记] g...重复。 i...不包含。 case-敏感。"},menu_regexp_list_button_add:{message:"添加"},menu_regexp_list_button_delete:{message:"删除"},menu_regexp_list_button_move_up:{message:"上移"},menu_regexp_list_button_move_down:{message:"下移"},menu_setting_url_edit_container_combo_box_item_asterisk:{message:"星号格式"},menu_setting_url_edit_container_combo_box_item_regexp:{message:"正则表达式格式"},menu_setting_url_edit_container_type_asterisk_hint:{message:"介绍 URL。可以使用一个星号。可以指定多行。"},page_expand_popup_menu:{message:"PageExpand 菜单"},context_menu_pageexpand_config:{message:"PageExpand 设置"},context_menu_batch_download_image:{message:"批量下载 (图片)"},context_menu_batch_download_user:{message:"批量下载 (用户)"},context_menu_pageexpand_open_bbs_board:{message:"Open BBS Board"},context_menu_pageexpand_open_bbs_board_run_confirm:{message:"Do you want to run the BBS Board in this page?"},context_menu_pageexpand_config_current_page:{message:"PageExpand 设置当前页"},context_menu_pageexpand_config_current_bbs:{message:"PageExpand 设置当前 BBS"},context_menu_pageexpand_config_current_page_confirm:{message:"PageExpand 设置将仅在以下页面中运行。 \n(目的是防止被注入恶意脚本)\n\n你想打开以下页面吗？\n"},context_menu_pageexpand_config_auto_run_confirm:{message:"你想要在此页面中运行 PageExpand 设置吗？\n(如果此页面被污染，那么恶意脚本将被注入！)"},context_menu_pageexpand_start:{message:"开始 PageExpand"},context_menu_pageexpand_execute_fastest:{message:"执行 PageExpand (最快)"},context_menu_pageexpand_abort:{message:"关于 PageExpand"},context_menu_pageexpand_debug:{message:"PageExpand 调试"}}};var Loader=function(){var e=0,t=1;function n(){var e=this.request;for(var t in e)delete e[t];e.headers=new Object,e.method="GET",e.url="",e.data=null,e.timeout=project.getLoadTimeout(),e.overrideMimeType="",e.responseType="text"}function a(e){e=this.response;for(var t in e)delete e[t];e.readyState=0,e.status=0,e.headers=new ResponseHeadersParser(""),e.responseURL="",e.redirected=!1,e.response=null,e.responseText="",e.errorText="",e.ok=!1}function i(e){e=this.progress;for(var t in e)delete e[t];e.bytesLoaded=0,e.bytesTotal=0}function o(){return(this.url_parser=URL_Parser(this.request.url)).protocol.match(/^(http|https|ftp|data|blob):/)?(this.url_info=url_info_dictionary.addURL(this.request.url),!project.checkAccessBlock(this.request.url)||(this.response.errorText="Access Block",project.getEnableOutputLog()&&ConsoleLog({type:"AccessBlock",current_url:WindowGetOwnerURL(window),url:this.request.url,call:"Loader"}),!1)):(this.response.errorText="protocol is not supported.",!1)}function r(){var e=this.onprogress;e&&e(this.progress)}function l(e){var t=this.onload;t&&t(e)}function s(){loader_queue.addCountError();var e=this.onerror;e&&e(this.response.errorText)}function c(e){try{var t,n,a=this,i=!1,o=null,l=null,s=a.request,c=a.response,_=a.progress,u=function(){try{d(),l.abort()}catch(e){}},d=function(){null!==o&&(clearTimeout(o),o=null)},p=function(){i||(i=!0,u(),d(),n&&(n.release(),n=null),t&&(t.release(),t=null))};(t=a._event_dispatcher.createEventHandler("release")).setFunction((function(){p()})),(n=a._event_dispatcher.createEventHandler("abort")).setFunction((function(){p()}));var m=function(){p(),e({state:"complete"})},g=function(){i||(c.readyState=4,m())},f=function(e){i||(c.ok=!1,c.status=0,c.readyState=4,c.errorText=e,m())},h=function(e){f(e.message)};l=new AbortController,s.timeout&&(o=setTimeout((function(){o=null,u()}),s.timeout));var x=new Object;x.signal=l.signal,x.method=s.method,x.headers=function(){var e=new Headers,t=s.headers;for(var n in t)e.append(n,t[n]);return e}(),x.body=s.data,s.cache&&(x.cache=s.cache),s.redirect&&(x.redirect=s.redirect),fetch(s.url,x).then((function(e){fetch_response=e,c.ok=e.ok,c.readyState=3,c.status=e.status;var t=e.headers,n=new Array;if(t.forEach((function(e,t){n.push(t+": "+e)})),c.headers=new ResponseHeadersParser(n.join("\r\n")),c.responseURL=e.url,c.redirected=e.redirected,e.body){var o,l,u,d,p=e.body.getReader();switch(s.responseType){case"blob":d=new Array,o=function(e){d.push(new Blob([e]))},l=function(){var e={type:t.get("Content-Type")};c.response=new Blob(d,e),g()};break;case"arraybufferlist":u=new Array,o=function(e){u.push(e)},l=function(){c.response=u,g()};break;case"arraybuffer":case"dataurischeme":case"binarystring":!function(){var e=new Array;o=function(t){e.push(new Blob([t]))},l=function(){var n=new FileReader;n.onloadend=function(e){i||(n.error?f(n.error):("arraybuffer"==s.responseType?c.response=n.result:c.responseText=n.result,g()))};var a={type:t.get("Content-Type")},o=new Blob(e,a);switch(s.responseType){case"arraybuffer":n.readAsArrayBuffer(o);break;case"dataurischeme":n.readAsDataURL(o);break;case"binarystring":n.readAsBinaryString(o)}}}();break;default:!function(){var e="utf-8",t=(s.overrideMimeType||"").match(new RegExp("text/plain; charset=([0-9a-zA-Z-_]+)"));t&&(e=t[1]);var n=new TextDecoder(e),a={stream:!0},i=new Array;o=function(e){var t=new Uint8Array(e);i.push(n.decode(t,a))},l=function(){c.responseText=i.join(""),g()}}()}var m=0,x=parseInt(t.get("Content-Length"))||0,b=function(){p.read().then((function(e){if(e.done)return p.releaseLock(),void l();m+=e.value.byteLength,_.bytesLoaded=m||0,_.bytesTotal=x||0,r.call(a),o(e.value),b()}),h)};b()}else g()}),h)}catch(t){c.errorText=t.message,p(),e({state:"unsupported"})}}function _(e){try{var t,n,a,i=this,o=!1,l=i.request,s=i.response,c=i.progress,_=function(){if(!o){o=!0,function(){try{a.abort()}catch(e){}}();try{a.onloadend=null,a.onreadystatechange=null,a.onprogress=null}catch(e){}n&&(n.release(),n=null),t&&(t.release(),t=null),a=null}};(t=i._event_dispatcher.createEventHandler("release")).setFunction((function(){_()})),(n=i._event_dispatcher.createEventHandler("abort")).setFunction((function(){_()}));var u=function(){_(),e({state:"complete"})},d=function(){o||u()},p=function(e){o||(s.ok=!1,s.status=0,s.readyState=4,s.errorText=e,u())};(a=new XMLHttpRequest).onloadend=function(e){switch(s.ok=Boolean(200<=a.status&&a.status<300||304==a.status),s.status=a.status,s.headers=new ResponseHeadersParser(a.getAllResponseHeaders()),s.responseURL=a.responseURL,s.redirected=Boolean(a.responseURL&&l.url!=a.responseURL),l.responseType){case"blob":case"arraybuffer":s.response=a.response,d();break;case"arraybufferlist":!function(){var e=a.response;if(e){var t=new Array,n=0,i=16777216,r=e.size,l=function(){var a=new FileReader;a.onloadend=function(){o||(a.error?p(a.error):(t.push(a.result),(n+=i)<r?l():(s.response=t,d())))},a.readAsArrayBuffer(e.slice(n,n+i))};l()}else d()}();break;case"dataurischeme":case"binarystring":!function(){var e=a.response;if(e){var t=new FileReader;switch(t.onloadend=function(e){o||(t.error?p(t.error):(s.responseText=t.result,d()))},l.responseType){case"dataurischeme":t.readAsDataURL(e);break;case"binarystring":t.readAsBinaryString(e)}}else d()}();break;default:s.responseText=a.responseText,d()}},a.onprogress=function(e){c.bytesLoaded=e.loaded||0,c.bytesTotal=e.total||0,r.call(i)},a.open(l.method,l.url,!0);var m=l.headers;for(var g in m)a.setRequestHeader(g,m[g]);if(l.overrideMimeType&&a.overrideMimeType&&a.overrideMimeType(l.overrideMimeType),l.timeout&&(a.timeout=l.timeout),l.responseType)switch(l.responseType){case"arraybufferlist":case"dataurischeme":case"binarystring":a.responseType="blob";break;default:a.responseType=l.responseType}a.send(l.data)}catch(t){s.errorText=t.message,_(),e({state:"unsupported"})}}function u(e){try{var t,n,a,i,o,l,s=this,c=!1,_=s.request,u=s.response,d=s.progress,p=function(){c||(c=!0,function(){try{l.abort()}catch(e){}}(),a=null,i=null,o=null,n&&(n.release(),n=null),t&&(t.release(),t=null),l=null)};(t=s._event_dispatcher.createEventHandler("release")).setFunction((function(){p()})),(n=s._event_dispatcher.createEventHandler("abort")).setFunction((function(){p()}));var m=function(){p(),e({state:"complete"})},g=function(){c||m()},f=function(e){c||(u.ok=!1,u.status=0,u.readyState=4,u.errorText=e,m())},h=new Object;if(h.onprogress=function(e){d.bytesLoaded=e.loaded||0,d.bytesTotal=e.total||0,r.call(s)},h.onload=function(e){o&&o(e)},h.onerror=function(e){f(e)},h.onreadystatechange=function(e){a&&a(e)},a=function(e){2==e.readyState&&i&&i(e),4==e.readyState&&o&&o(e)},i=function(e){u.ok=Boolean(200<=e.status&&e.status<300||304==e.status),u.status=e.status,u.readyState=e.readyState,u.headers=new ResponseHeadersParser(e.responseHeaders),u.responseURL=e.finalUrl,u.redirected=Boolean(e.finalUrl&&_.url!=e.finalUrl)},o=function(e){switch(o=null,i&&i(e),_.responseType){case"blob":case"arraybuffer":u.response=e.response,g();break;case"arraybufferlist":!function(){var t=e.response;if(t){var n=new Array,a=0,i=16777216,o=t.size,r=function(){var e=new FileReader;e.onloadend=function(){c||(e.error?f(e.error):(n.push(e.result),(a+=i)<o?r():(u.response=n,g())))},e.readAsArrayBuffer(t.slice(a,a+i))};r()}else g()}();break;case"dataurischeme":case"binarystring":!function(){var t=e.response;if(t){var n=new FileReader;switch(n.onloadend=function(e){c||(n.error?f(n.error):(u.responseText=n.result,g()))},_.responseType){case"dataurischeme":n.readAsDataURL(t);break;case"binarystring":n.readAsBinaryString(t)}}else g()}();break;default:u.responseText=e.responseText,g()}},h.method=_.method,h.url=_.url,h.headers=_.headers,_.overrideMimeType&&(h.overrideMimeType=_.overrideMimeType),_.timeout&&(h.timeout=_.timeout),_.responseType)switch(_.responseType){case"arraybufferlist":case"dataurischeme":case"binarystring":h.responseType="blob";break;default:h.responseType=_.responseType}_.data&&(h.data=_.data);try{return void(l=GM.xmlHttpRequest(h))}catch(e){}try{return void(l=GM_xmlhttpRequest(h))}catch(e){}throw{message:"GM_xmlhttpRequest is not supported"}}catch(t){u.errorText=t.message,p(),e({state:"unsupported"})}}function d(t,n){var o,r,l,s=this,c=!1,_=null,u=loader_queue.createElement();function d(){c||(c=!0,l&&(l.removeEventListener("load",g),l.removeEventListener("loadedmetadata",g),l.removeEventListener("error",m)),r&&(r.release(),r=null),o&&(o.release(),o=null),u&&(u.complete(),u.release(),u=null),null!==_&&(clearTimeout(_),_=null))}function p(){c||(d(),n.call(s,l))}function m(){c||(d(),l&&(l.src=""),l=null,n.call(s,null))}function g(){if(!c){if("IMG"==l.tagName&&!!l.decode&&"pre-decode"==project.getDecodeLoadExpandImage())return l.decoding="async",void l.decode().then(p,m);p()}}if(i.call(s),a.call(s),t.url)if((o=s._event_dispatcher.createEventHandler("release")).setFunction((function(){d()})),(r=s._event_dispatcher.createEventHandler("abort")).setFunction((function(){m()})),u.onstart=function(){l=DocumentCreateElement(t.tagName),"IMG"==t.tagName||(l.controls=!0,l.autoplay=!1,l.preload="metadata"),l.addEventListener("load",g),l.addEventListener("loadedmetadata",g),l.addEventListener("error",m),l.src=t.url,s.request.timeout&&setTimeout(m,s.request.timeout)},u.onabort=function(){s.abort()},URL_Parser(t.url).protocol.match(/^(blob|data):/)&&(s._queue_attch_type=e),s._queue_attch_type===e)u.attachFirst();else u.attachLast();else m()}function p(e){var t,n,a=this;function i(e){e?l.call(a,e):s.call(a)}switch(a.request.cache=project.getLoadCacheModeForMedia(),n=URL_Parser(WindowGetOwnerURL(window)),a.url_parser.protocol.match(/^(blob):/)?"url":a.url_parser.protocol.match(/^(data):/)||n.protocol.match(/^(https):/)&&a.url_parser.protocol.match(/^(http):/)?"blob_url":e.src_type){default:case"url":a.url_info.getCached((function(t,n){!t||t.ok?d.call(a,{tagName:e.tagName,url:a.request.url},(function(e){i(e),n&&(e?n.success(!0):n.failure())})):i(null)}));break;case"blob_url":t=a.url_info.analyzeBlobURL(),a.url_info.getBlobURL((function(t){d.call(a,{tagName:e.tagName,url:t},i)})),t&&(a.setResponseType("blob"),m.call(a,(function(){var e=a.response.response;if(e){var n=BlobURLCreate(e);t.success(n)}else t.failure()})))}}function m(n){var o,r,l,s=this,d=loader_queue.createElement(),p=new Array,m=!1;function g(){m||(m=!0,n.call(s))}function f(){r&&(r.release(),r=null),o&&(o.release(),o=null),d&&(d.complete(),d.release(),d=null),command={}}function h(){f(),g()}function x(){i.call(s),a.call(s)}function b(){var e=p[0];e?(x(),e.call(s,(function(e){var t=l[e.state];t&&t()}))):h()}x(),(o=s._event_dispatcher.createEventHandler("release")).setFunction((function(){f()})),(r=s._event_dispatcher.createEventHandler("abort")).setFunction((function(){h()})),l={complete:function(){var e;(e=s.response.headers.getResponseHeader("Content-Type"))&&s.url_info.setMimeType(e),f(),g()},retry:function(){b()},unsupported:function(){p.shift(),b()}};var v=URL_Parser(WindowGetOwnerURL(window));if(!function(){return!s.url_parser.protocol.match(/blob|data/)&&(this._xhr_type==t||Boolean(v.origin!=s.url_parser.origin))}()?(p.push(c),p.push(_)):p.push(u),d.onstart=function(){b()},d.onabort=function(){s.abort()},s._queue_attch_type===e)d.attachFirst();else d.attachLast()}var g=function(){this.request=new Object,this.response=new Object,this.progress=new Object,n.call(this),a.call(this),i.call(this),this._event_dispatcher=new EventDispatcher,this.setTimeout(project.getLoadTimeout())};return g.prototype={release:function(){this._event_dispatcher.dispatchEvent("release",null),this._event_dispatcher&&(this._event_dispatcher.release(),this._event_dispatcher=null)},abort:function(){this._event_dispatcher.dispatchEvent("abort",null)},onload:function(){},onerror:function(){},onprogress:function(){},setRequestHeader:function(e,t){this.request.headers[e]=t},overrideMimeType:function(e){this.request.overrideMimeType=e},setTimeout:function(e){this.request.timeout=e||0},setMethod:function(e){this.request.method=(e||"").toLowerCase()},setURL:function(e){this.request.url=e},setResponseType:function(e){this.request.responseType=(e||"").toLowerCase()},setSendData:function(e){this.request.data=e},loadResponseHeader:function(){var e=this;o.call(e)?(this.setMethod("head"),this.setResponseType("blob"),m.call(e,(function(){var t=e.response;t.ok?l.call(e,t.headers):s.call(e)}))):s.call(e)},load:function(){var e=this;o.call(e)?m.call(e,(function(){var t=e.response;t.ok?l.call(e,t):s.call(e)})):s.call(e)},loadText:function(){var t=this;o.call(t)?(this.setResponseType("text"),t._queue_attch_type=e,m.call(t,(function(){var e=t.response;e.ok?l.call(t,e.responseText):s.call(t)}))):s.call(t)},loadDataUriScheme:function(){var e=this;o.call(e)?(this.setResponseType("dataurischeme"),m.call(e,(function(){var t=e.response;t.ok?l.call(e,t.responseText):s.call(e)}))):s.call(e)},loadImage:function(){if(o.call(this)){var e={tagName:"IMG"};e.src_type=project.getSourceLoadExpandImage(),p.call(this,e)}else s.call(this)},loadAudio:function(){if(o.call(this)){if(!window.HTMLAudioElement)return this.response.errorText="not support HTMLAudioElement",void s.call(_this);var e={tagName:"AUDIO"};e.src_type=project.getSourceAudioElement(),p.call(this,e)}else s.call(this)},loadVideo:function(){if(o.call(this)){if(!window.HTMLVideoElement)return this.response.errorText="not support HTMLVideoElement",void s.call(_this);var e={tagName:"VIDEO"};e.src_type=project.getSourceVideoElement(),p.call(this,e)}else s.call(this)},loadFinalURL:function(){var n=this;if(o.call(n)){var a,i=16,r=n.request.url,c=url_info_dictionary.addURL(n.request.url);n.setTimeout(1e4),n.setResponseType("text"),n._xhr_type=t,n._queue_attch_type=e;var _={300:1,301:1,302:1,303:1,307:1,308:1};!function e(){a=c.analyzeRedirect(),c.getRedirect((function(t){i-=1,!t||i<=0?url_info_dictionary.getRedirectURL(r,(function(e){e.redirected?l.call(n,e.url_info.getURL()):s.call()})):(c=t,e())})),a&&p()}()}else s.call(n);function u(e){c=url_info_dictionary.addURL(e),a.success(c)}function d(){a.failure()}function p(){n.setURL(c.getURL()),o.call(n)?(n.setMethod("HEAD"),m.call(n,(function(){var e=n.response,t=e.headers;if(_[e.status]){var a=t.getResponseHeader("Location");if(a)return void u(a)}if(!e.redirected)return function(){if(!e.ok)return!1;var n=parseInt(t.getResponseHeader("Content-Length"))||0;return!!n&&(!(n>10240)&&!!t.getResponseHeader("Content-Type").match(/^text[/]/))}()?(n.setMethod("GET"),void m.call(n,(function(){var e=null,t=n.response.responseText.match(new RegExp('<meta[^>]http-equiv[ \n\r\t]*=[ \n\r\t]*"refresh"[^>]*>',"i"));t&&(t=t[0].match(new RegExp('content[ \n\r\t]*=[ \n\r\t]*"[0-9]+;URL=([^"]+)"',"i")))&&(e=t[1]),e?u(e):d()}))):void d();u(e.responseURL)}))):d()}},request:{},response:{},progress:{},url_parser:null,url_info:null,_queue_attch_type:1,_xhr_type:0},g}();function Downloader(){var e,t=this;t.setURL=function(e){t._url=e},t.setFileName=function(e){t._file_name=e},t.setSaveAs=function(e){t._save_as=e},t.setSilent=function(e){t._silent=e},t.setAllowSameRequest=function(e){t._allow_same_request=e},t.start=function(){var n=downloader_queue.createElement();n.onstart=function(){var a=function(){e.shift()(i)},i=function(e){var i=e.response;switch(e.state){case"progress":t.onprogress&&t.onprogress(i);break;case"complete":i.result||downloader_queue.addCountError(),n.complete(),n.release(),t.oncomplete&&t.oncomplete(i),t._blob_url&&(BlobURLRevoke(t._blob_url),t._blob_url=null);break;case"unsupported":a()}},o=DataURL_Parser(t._url);if(o){var r,l=o.mimetype;if("base64"==o.format)r=Base64_To_ArrayBuffer(t._url.slice(o.data_offset));else r=(new TextEncoder).encode(t._url.slice(o.data_offset)).buffer,l||(l="text/plain");var s=new CRC32;s.initialize();var c=s.getFromArrayBuffer(r,r.byteLength),_=MIMEType_To_Ext(l);_||(_=FileSignature_To_Ext_From_ArrayBuffer(r)),l||(l=MIMEType_From_Ext(_)),t._short_url="data:"+l.replace(/[/]/g,"-")+"/"+c.toString(16).toUpperCase(),_&&(t._short_url+="."+_);var u=new Blob([r],{type:l});t._url=t._blob_url=BlobURLCreate(u)}a()},n.attachLast()},t.onprogress=function(e){},t.oncomplete=function(e){},t._url="",t._short_url="",t._file_name="",t._save_as=!1,t._silent=!0,t._allow_same_request=!1,t._blob_url=null,(e=new Array).push((function(e){if(!t._allow_same_request){if(address_collection.hasAddress("download",t._url))return void e({state:"complete",response:{result:!1,error:"Request is duplicated."}});address_collection.addAddress("download",t._url)}e({state:"unsupported",response:{}})})),e.push((function(e){if(GM_downloadSupported()){var n=ProjectDownloadSaveFile_Sanitize(t._file_name||project.getSaveFileDownload(t._short_url||t._url));if(n.length>65535)e({state:"unsupported",response:{}});else{var a={url:t._url,saveAs:t._save_as,name:n,onload:function(t){e({state:"complete",response:{result:!0,completed:!0,error:""}})},onerror:function(t){e({state:"complete",response:{result:!1,completed:!0,error:t.error}})},onprogress:function(t){e({state:"progress",response:{bytesLoaded:t.loaded||0,bytesTotal:t.total||0}})}};GM_download(a)}}else e({state:"unsupported",response:{}})})),e.push((function(e){var n=DocumentCreateElement("a");if(void 0!==n.download){var a=function(a){n.target="PageExpandDownload",n.href=a,n.download=ProjectDownloadSaveFile_Sanitize(t._file_name||project.getSaveFileDownload(t._short_url||t._url)),document.body.appendChild(n),n.click(),DomNodeRemove(n),n.href="",n.download="",e({state:"complete",response:{result:!0,completed:!1,error:""}})};if(t._url.search(new RegExp("^(data|blob):","i"))>=0)a(t._url);else{var i=new Loader;i.onprogress=function(e){t.onprogress&&t.onprogress(e)},i.onload=a,i.onerror=function(){e({state:"complete",response:{result:!1,error:"Loader is failed."}})},i.setMethod("GET"),i.setURL(t._url),i.loadDataUriScheme()}}else e({state:"unsupported",response:{}})})),e.push((function(e){e({state:"complete",response:{result:!1,error:"Downloader is not supported."}})}))}function DownloadList(){var e,t=this;t.release=function(){for(;e!=e._next;)e._next.release()},t.createItem=function(){var t,n,a=new Object;return a.release=function(){var e=a._prev,t=a._next;e._next=t,t._prev=e,a._prev=a,a._next=a},a.setURL=function(e){a._url=e,a._file_name||a.setFileName(project.getSaveFileBatchDownload(e))},a.setFileName=function(e){a._file_name=ProjectDownloadSaveFile_Sanitize(e)},(n=(t=e)._prev)._next=a,t._prev=a,a._prev=n,a._next=t,a},t.createArchive=function(){var n,a,o=new CRC32,r=new DownloadProgress(document.body),l=!1,s=new EventDispatcher;function c(){a&&(a.release(),a=null),n&&(BlobURLRevoke(n),n=null),s&&(s.dispatchEvent("close",t),s.release(),s=null)}r.onclose=function(){l=!0,c()},(a=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){r.onclose()})),r.open((function(){function t(e,t){var n=new Loader;n.onload=function(e){t(e)},n.onerror=function(){t(null)},n.setMethod("GET"),n.setURL(e),n.overrideMimeType("text/plain; charset=x-user-defined"),n.loadText()}function a(e,t){r.setMessage("Converting ...",0),r.setMessage("",1),r.setValueProgress(0,0),r.setValueProgress(0,1);var n=new Object,a=new Array,i=0,o=e.length;!function s(){if(!l)if(i>=o)t(a);else{var c=1;if(o>1&&(c=i/(o-1)),item=e[i],i++,r.setValueProgress(c,1),r.setMessage(item._url,1),void 0===n[item._url]){var _=String_To_ArrayBuffer_As_UTF8(item._file_name);_&&a.push({file_name:_,item:item}),n[item._url]=!0}else item.release();execute_queue.attachFirst(s,null)}}()}function _(e,t){r.setMessage("Calculate CRC ...",0),r.setMessage("",1),r.setValueProgress(0,0),r.setValueProgress(0,1);var n=0,a=e.length;!function i(){if(!l)if(n>=a)t(e);else{var s=1;a>1&&(s=n/a),item=e[n],n++,r.setValueProgress(.5*s,0),r.setValueProgress(0,1),r.setMessage(item.item._url,1);var c=0,_=10240,u=item.file_size;o.initialize(),execute_queue.attachLastForInterrupt((function e(){if(u-c<_&&(_=u-c),_<=0)execute_queue.attachLastForInterrupt(i,null);else{c+=_;var t=1;u>0&&(t=c/u),r.setValueProgress(.5*(s+t/a),0),r.setValueProgress(t,1),item.crc32=o.getFromStringOfBinaryData(item.binary,_),execute_queue.attachFirst(e,null)}}),null)}}()}function u(e,t){var a,_,u=0,d=0,p=0,m=0,g=!0;function f(e){return 30+e.file_name.byteLength+0}function h(e){return e.file_size}function x(e){return 46+e.file_name.byteLength+0+0}function b(e){var t=e.date,n=(31&t.getHours())<<11|(63&t.getMinutes())<<5|31&Math.round(t.getSeconds()/2);_.setUint16(u,n,g),u+=2}function v(e){var t=e.date,n=(t.getFullYear()-1980&127)<<9|(t.getMonth()+1&15)<<5|31&t.getDate();_.setUint16(u,n,g),u+=2}function y(e){var t=e.file_name,n=new Uint8Array(t),a=t.byteLength,o=e.file_size;for(_.setUint32(u,67324752,g),u+=4,_.setUint16(u,10,g),u+=2,_.setUint16(u,128,g),u+=2,_.setUint16(u,0,g),u+=2,b(e),v(e),_.setUint32(u,e.crc32,g),u+=4,_.setUint32(u,o,g),u+=4,_.setUint32(u,o,g),u+=4,_.setUint16(u,a,g),u+=2,_.setUint16(u,0,g),u+=2,i=0;i<a;i++)_.setUint8(u,n[i],g),u+=1}function E(e){var t=e.file_name,n=new Uint8Array(t),a=t.byteLength,o=e.file_size;for(_.setUint32(u,33639248,g),u+=4,_.setUint16(u,10,g),u+=2,_.setUint16(u,0,g),u+=2,_.setUint16(u,128,g),u+=2,_.setUint16(u,0,g),u+=2,b(e),v(e),_.setUint32(u,e.crc32,g),u+=4,_.setUint32(u,o,g),u+=4,_.setUint32(u,o,g),u+=4,_.setUint16(u,a,g),u+=2,_.setUint16(u,0,g),u+=2,_.setUint16(u,0,g),u+=2,_.setUint16(u,0,g),u+=2,_.setUint16(u,0,g),u+=2,_.setUint32(u,0,g),u+=4,_.setUint32(u,e.offset,g),u+=4,i=0;i<a;i++)_.setUint8(u,n[i],g),u+=1}function w(){var t=e.length;_.setUint32(u,101010256,g),u+=4,_.setUint16(u,0,g),u+=2,_.setUint16(u,0,g),u+=2,_.setUint16(u,t,g),u+=2,_.setUint16(u,t,g),u+=2,_.setUint32(u,m,g),u+=4,_.setUint32(u,p,g),u+=4,_.setUint16(u,0,g),u+=2}function S(e,t){r.setMessage("Write File Data ...",0),r.setMessage("",1),r.setValueProgress(.5,0),r.setValueProgress(0,1);var n=0,a=e.length;!function i(){if(!l)if(n>=a)t(e);else{var s=1;a>1&&(s=n/a),item=e[n],n++,r.setValueProgress(.5*s+.5,0),r.setValueProgress(0,1),r.setMessage(item.item._url,1),y(item);var c,d=0,p=10240,m=item.file_size,f=item.binary;delete item.binary,o.initialize(),execute_queue.attachLastForInterrupt((function e(){if(m-d<p&&(p=m-d),p<=0)execute_queue.attachLastForInterrupt(i,null);else{for(c=d+p;d<c;)_.setUint8(u,255&f.charCodeAt(d),g),u+=1,d++;var t=1;m>0&&(t=d/m),r.setValueProgress(t,1),r.setValueProgress(.5*(s+t/a)+.5,0),execute_queue.attachFirst(e,null)}}),null)}}()}function C(e,t){r.setMessage("Write Central Directory ...",0),r.setMessage("",1),r.setValueProgress(1,0),r.setValueProgress(0,1);var n=0,a=e.length;!function i(){if(!l){if(n>=a)return w(),void t(e);item=e[n],n++;var o=1;a>1&&(o=n/a),r.setValueProgress(o,1),r.setMessage(item.item._url,1),E(item),execute_queue.attachLastForInterrupt(i,null)}}()}!function(){var t,i=new Date,o=e.length;for(t=0;t<o;t++){(u=e[t]).offset=d,d+=f(u),d+=h(u),u.index=t,u.date=i}for(p=d,t=0;t<o;t++){var u=e[t];m+=x(u)}d+=m,d+=22,a=new ArrayBuffer(d),_=new DataView(a),S(e,(function(e){C(e,(function(e){var t="PageExpand_"+i.getTime()+".zip";function o(){s.createEventHandler("close").setFunction((function(){var t=0,n=e.length;for(t=0;t<n;t++){e[t].item.release()}}))}function _(e){l||(o(),r.setMessage("Complete",0),r.setMessage("Save Zip File As ...",1),r.setAnchor({href:e,download:t}))}r.setMessage("",1),r.setValueProgress(1,0),r.setValueProgress(1,1),r.setMessage("Create Blob URL ...",0),setTimeout((function(){try{var e=new Blob([new Uint8Array(a)],{type:"application/zip"});n=BlobURLCreate(e)}catch(e){}n?(r.setMessage("Wait ...",0),setTimeout((function(){var e=new Downloader;e.setURL(n),e.setFileName(t),e.setSaveAs(!0),e.onprogress=function(e){var t=e.bytesLoaded,n=e.bytesTotal;n<t&&(n=t),r.setValueProgress(t/n,1),r.setMessage(t+" / "+n+" Byte",1)},e.oncomplete=function(e){r.setMessage("Complete",0),e.result&&e.completed?l||(o(),r.close(),c()):_(n)},e.start()}),1)):(r.setMessage("Create Data URI Scheme ...",0),Base64_From_ArrayBuffer_Async(a,(function(e){r.setMessage("Wait ...",0),r.setMessage("",1),r.setValueProgress(1,1),setTimeout((function(){_("data:application/zip;base64,"+e)}),1)}),{onprogress:function(e){r.setMessage(e.loaded+"/"+e.total+" Byte",1),r.setValueProgress(e.loaded/e.total,1)}}))}),1)}))}))}()}!function(e){r.setMessage("Wait Analyze ...",0),r.setValueProgress(0,0),r.setValueProgress(0,1);var t=execute_queue.getCountQueue(),n=t,a=task_container.createTask();a.setDestructorFunc((function(){a=null})),a.setExecuteFunc((function(){if(l)a.release();else{if(n=execute_queue.getCountQueue(),t<n&&(t=n),n<=0)return a.release(),void e();var i=1;t>0&&(i=n/t),i=1-i,r.setValueProgress(i,1),r.setMessage(Math.floor(100*i)+"% ("+n+"/"+t+")",1)}}))}((function(){for(var n=new Array,i=e._next;e!=i;)n.push(i),i=i._next;a(n,(function(e){!function(e,n){r.setMessage("Downloading ...",0),r.setMessage("",1),r.setValueProgress(0,0),r.setValueProgress(0,1);var a,i=new Array,o=0,s=e.length,c=0;for(a=0;a<s;a++)!function(){var _=e[a];t(_.item._url,(function(e){if(!l){e&&(i.push(_),_.binary=e,_.file_size=e.length,c+=_.file_size),o++,s<=o&&n(i);var t=1;s>1&&(t=o/(s-1)),r.setMessage(c+" Byte ("+o+"/"+s+")",1),r.setValueProgress(t,1)}}))}();s||n(i)}(e,(function(e){_(e,(function(e){u(e)}))}))}))}))}))},t.clear=function(){e._prev=e,e._next=e},(e=new Object)._prev=e,e._next=e}function TaskContainer(){var e,t,n=this;function a(e){var t=e._prio_next;if(e!=t){var n=e._prio_prev;n._prio_next=t,t._prio_prev=n,e._prio_prev=e,e._prio_next=e}}function i(e){e._alive&&(e._alive=!1,e._destructor_func&&e._destructor_func(e),e.removeParent(),e._user_work=null,1==(t-=1)&&r&&r())}n.createTask=function(e){var r=new Object;return r.execute=function(e){if(r._alive&&r._execute_func&&e&r._level)try{r._execute_func(r)}catch(e){project.getEnableDebugMode()&&ConsoleError(e.stack)}},r.release=function(){r.releaseChild(),i(r)},r.releaseChild=function(){for(var e,t=new Array,n=r._child,a=n._next;a!=n;)t.push(a),a=a._next;var o=t.length;for(e=0;e<o;e++)(a=t[e]).releaseChild(),i(a)},r.attachChild=function(e){e.removeParent();var t=r._child,n=t._next;t._next=e,n._prev=e,e._prev=t,e._next=n,e._parent=r,r._child_count+=1},r.removeParent=function(){if(r._parent){r._parent._child_count-=1;var e=r._prev,t=r._next;e._next=t,t._prev=e,r._prev=r,r._next=r,r._parent=null}},r.removeChild=function(){for(var e,t=new Array,n=r._child,a=n._next;a!=n;)t.push(a),a=a._next;var i=t.length;for(e=0;e<i;e++)(a=t[e]).removeParent()},r.getChild=function(e){for(var t,n=new Array,a=r._child,i=a._next;i!=a;)n.push(i),i=i._next;var o=n.length;for(t=0;t<o;t++)e(i=n[t])},r.getParent=function(){return r._parent},r.getExecuteFunc=function(){return r._execute_func},r.setExecuteFunc=function(e){r._execute_func=e},r.getDestructorFunc=function(){return r._destructor_func},r.setDestructorFunc=function(e){r._destructor_func=e},r.attachPrioPrev=function(e){a(e);var t=r._prio_prev,n=r;t._prio_next=e,n._prio_prev=e,e._prio_prev=t,e._prio_next=n},r.attachPrioNext=function(e){a(e);var t=r,n=r._prio_next;t._prio_next=e,n._prio_prev=e,e._prio_prev=t,e._prio_next=n},r.getPrioPrev=function(){return r._prio_prev},r.getPrioNext=function(){return r._prio_next},r.getCountChild=function(){return r._child_count},r.getLevel=function(){return r._level},r.setLevel=function(e){r._level=e},r.getAlive=function(){return r._alive},r.getUserWork=function(){return r._user_work},r._prio_prev=r,r._prio_next=r,r._prev=r,r._next=r,r._parent=null,r._child_count=0,r._child=new Object,r._child._prev=r._child,r._child._next=r._child,r._alive=!0,r._level=4294967295,r._user_work=new Object,r._execute_func=null,r._destructor_func=null,e&&e.attachChild(r),n.attachPrioLast(r),1==t&&o&&o(),t+=1,r},n.execute=function(e){for(var t,a=new Array,i=n._prio_next;i!=n;)a.push(i),i=i._prio_next;var o=a.length;for(t=0;t<o;t++)if((i=a[t]).getAlive())i.execute(e);else{var r=i._prio_prev,l=i._prio_next;r._prio_next=l,l._prio_prev=r,i._prio_prev=i,i._prio_next=i}},n.release=function(){for(var e,t,a,o=new Array,r=n._prio_next;r!=n;)o.push(r),r=r._prio_next;var l=o.length;for(a=0;a<l;a++)i(r=o[a]),e=r._prio_prev,t=r._prio_next,e._prio_next=t,t._prio_prev=e,r._prio_prev=r,r._prio_next=r},n.attachChild=function(t){e.attachChild(t)},n.attachPrioFirst=function(e){a(e);var t=n,i=t._prio_next;t._prio_next=e,i._prio_prev=e,e._prio_prev=t,e._prio_next=i},n.attachPrioLast=function(e){a(e);var t=n,i=t._prio_prev;i._prio_next=e,t._prio_prev=e,e._prio_prev=i,e._prio_next=t},n.getCountTask=function(){return t-1},n.setStartFunc=function(e){o=e},n.setEndFunc=function(e){r=e};var o=null,r=null;t=0,n._prio_prev=n,n._prio_next=n,e=n.createTask(null)}function NotifyProgress(){var e,t,n,a;function i(e){t=e,a?a.setExecuteFunc(_):((a=task_container.createTask()).setDestructorFunc(c),a.setExecuteFunc(s),a.execute(4294967295))}function o(e){e==t&&a&&a.setExecuteFunc(p)}function r(a,i){if(a==t&&n!=i){switch(i){case NotifyProgress.NOTIFY_TYPE_LOADING:e.src="data:image/gif;base64,R0lGODlhGAAYALMAAP//3vf31sXFtYyMjHuEjGNrc0pSY0JKUv///wAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCAAIACwAAAAAGAAYAAAEexDJSZExNetpQsBbRVQHABwhNQgFVZ6pRAhA0EovGiNFUN+dz07Sq4Euw0lRl6wYmM2o5nk4gFJUq8VnEoY6JiO4e51yjZaqNpYtS7FQlzuzzJRsoaIXuf1p9EAeIIAiNHg4JkxFAiMqLC6JFAUCAxqNEzkiSUFzTXwhEQAh+QQJCAAIACwAAAAAFgAYAAAEfxDJSZExNWsbAt4TUR0AcFQiNQgFRZpUIQyhAASt9J5SEQCCFMJ3yxk6HyKuovxcJMeihshzSTeG6ugD6mayhwPXC/2VPORJ9Dwmg8XpuByqdbVjvzqCtMw0oU4/fRNKRkg9gjkIBDaDO4Q/QRMrinslWjI0FEI6lyhuh3OAIBEAIfkECQgACAAsAAAAABgAGAAABHoQyUmRMTXraULAW0VUBwAcojYIBVWeVCEMogAErfSiUhEAglHsh5N0Pj1iruK7gS5GZajJc92WG0OVBAp5vdrDoRsKjy0/E7KcdnZMTnAbaSZnxeevXqPdb6h+TERPdlNSaGteBDZFOiZbIStYO35CE5SBFEeFgVBeEQAh+QQJCAAIACwAAAAAGAAWAAAEexDJSZExNetpQsBbRVQHAByiNggFVZ5UIQyiAASt9KJSEQCCUeyHk3Q+PWKu4ruBLkZlqMlz3ZYbQ5UECnm92sOhGwqPLT8Tspx2dkxOcBtpJmfF569eo93kpz9bOleAcRVvRRlNiYpSFAQ2jBpNQRUrWBsyNBlCep0IEQAh+QQJCAAIACwAAAAAGAAYAAAEeRDJSZExNetpQsBbRVQHAByiNggFVZ5UIQyiAASt9KJSEQCCUeyHk3Q+PWKu4ruBLkZlqMlz3ZYbQ5UECnm92sOhGwqPLT8Tspx2dkxOcBtpJmfF569+77LzdVd/Fk9Se0cgTUV6OxNNQYsmWzI0kDAUQnqHghVQXhEAIfkECQgACAAsAgAAABYAGAAABH0QyTmNoThTE8LVFIEdAHBgIjUIBUWaVCEMEyEAQSu9p1QEAEEK8cPpOB4fMIcpJhEWCceoKfZcVJDhOvqAvuDw5kD2iqHA0vM8VZvF2/J5vgUd3jEgd5dtLj9RaH1KWUgfTjoINn08E0VCEyuJCI2OMygjJXtDX4ZzGIFfEQAh+QQJCAAIACwAAAAAGAAYAAAEfBDJSZExNetpQsBbKB0AcFSESJEmVQiDOpanVASAkKrdZ+OBgkxyIQKFwwopmNQcQM2k4UCFhqZVC67ku24Bn04JbM2IuRjsU6YuR0XTzVp0aynBSE29W9Ti9UdGXXt5EgQCfzN2CHU6FQMChSw1NjAaOxOTKFIebk19IREAIfkECQgACAAsAAACABgAFgAABHgQSUSmvbLiIQrGhTBchAAE3icVASBoE3umYIt+cmBghk3XgAPmMFNNDMLPYWdsOpGHpRMBlfYAWF3zmjVwT0zVV1sNG8vTNC85NONa7AnxpsoxvZIr/ZJL9bQIfSQme0RBMS0vFxw/hnEhIxgwEo4kan9uanmZFxEAOw==";break;case NotifyProgress.NOTIFY_TYPE_COMPLETE:e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAA3NCSVQICAjb4U/gAAAAwFBMVEX///+A/4CA/4D///+A/4CA/4CA/4CA/4Dn5+eA/4CA/4CA/4CA/4CA/4CSkpIqWyr5+fng4OB9fX0REREAAAAgSiAxajH6+vrz8/Pw8PDq6urX19fHx8fExMSqqqqnp6ejo6Oenp6ZmZmWlpYtLS0lJSUeHh6Mx4yu564IHAg0RTQ5TTk4STgqNioLIAtxd3FwfXBcdVyP+Y9Ci0ImUibT09O7u7uJiYmCgoJ6enpsbGxgYGBHR0c+Pj42NjYnJyeRSLVtAAAAQHRSTlMA7iL/iFUzRP8Rd6rdzP/u///////M7v////////////////////8iM3eZqqq7u8zd3e7u7v//////////////aE0y2QAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDEvMDcvMTOlb7SWAAAA4UlEQVQokZ3R1xKCMBAFUNJIKFawF6zYe+///1dmJaA4vOh9PDczm9nVtH9jYBUj7ljnnMlwruO4M5O+YjJ9GHNq2UjGtig7ea3721NI5Vgn5OAGcz/dKxORd4MfYG5aocvnIu1yrApqK6+BO4WwYFR57uVFyr4K8I5fRFGxXEldowZ4L4OiolVrdGWzJ4S0waNisSuVyqIpvXoFt2k4/JHLEoi4bGGUZarCGN8q0Ii8A56iTFcrxtNzBdwNPVownnSz1bSzCZb4uXg8a7b7BbX2+EH8/jzpUJo2GCWf9oc8AZktDpWygbAkAAAAAElFTkSuQmCC";break;case NotifyProgress.NOTIFY_TYPE_ERROR:e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAA3NCSVQICAjb4U/gAAAAwFBMVEX/////VVX3UlJNbGyULi4mDw86GhoMERHoTEzPRET/pqb/ZmZ0MTGZMzN0JCQYIiIMERH/xcWfqqrDWVnUS0u+T0+SPz9sQkJ6OTkRGBj84ODzZmboWVl3YmJhIiJMIiJBIiIGCAgRGBiIv79okpIuQUEGCAjk///N9va66enW3Ny11tb/trbqkpKOm5u7hYWGfHyycXFZfHzgVFSsX1+cTk6xQUF3SEhTTExSOzt5JCRiKysXCAh/srIRGBgpOTlzKqofAAAAQHRSTlMA///////////////////M3f//////////3f////////+ZzN3d3d3/////////////////////////////mZnMlM/YUAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDEvMDcvMTOlb7SWAAABLElEQVQokV2SZ2OCMBCG7yCJQAEBqWKdbUVbtzg6tPX//6teBiK9T8n75HYAjNmTwpYGdXtdzOOl53mrzSC/199n8QNq6x2+Kv3tqZSl7f2a7gw558J3LbTSs4mj3g+f1UW0ibhjlXem4hgAzQzRYl06LWIV2R39anI90oVcfubkkNKrNGtq8tlDK7RhQg6nqQgodEl2iEEExRJRAIxORPwXBbYEGmB7iJxu50cK58uksK4B6EjSliRBZBoIqEh+AytEMwNJ8FhACzGMwN5Q2doFPkiivmk+gsY/oLIzXQ4MWnqOTGbND7Ic08Ja6Y6Yqk77MqnZQir174sJTQT7u+06SVpK5+VCOnur2pMT3nQaCHMNchi/3C+9Ow5ZwBgLBZ/++yd21CCLbt/nD9ghFMIF8V9xAAAAAElFTkSuQmCC"}n=i}}function l(){if(a){a.getUserWork();var t=input_mouse.getPositionClient();e.style.left=t.x-12+"px",e.style.top=t.y-24-2+"px"}}function s(t){var n=t.getUserWork();n.anime_pos=0,n.anime_spd=0,e.style.zIndex=2147483647,e.style.position="fixed",e.style.pointerEvents="none",document.body.appendChild(e),t.setExecuteFunc(_),t.execute(4294967295)}function c(t){DomNodeRemove(e),a=null}function _(t){var n=t.getUserWork();l();var a=1-n.anime_pos;(a*=.4)>0&&(n.anime_spd+=.05,n.anime_spd>.2&&(n.anime_spd=.2),n.anime_spd>a&&(n.anime_spd=a)),n.anime_pos+=n.anime_spd,n.anime_pos>.999&&(n.anime_spd=0,n.anime_pos=1,t.setExecuteFunc(u)),e.style.opacity=n.anime_pos}function u(t){var n=t.getUserWork();n.anime_pos=1,n.anime_spd=0,e.style.opacity=n.anime_pos,t.setExecuteFunc(d),t.execute(4294967295)}function d(e){e.getUserWork();l()}function p(t){var n=t.getUserWork();l();var a=0-n.anime_pos;(a*=.4)<0&&(n.anime_spd-=.2,n.anime_spd<a&&(n.anime_spd=a)),n.anime_pos+=n.anime_spd,n.anime_pos<.001&&(n.anime_spd=0,n.anime_pos=0,t.setExecuteFunc(m)),e.style.opacity=n.anime_pos}function m(e){e.getUserWork();e.release()}this.release=function(){a&&(a.release(),a=null)},this.createElement=function(){var e,t,n,a,l=new Object;function s(){e.removeEventListener?e.removeEventListener("mouseover",_,!1):e.detachEvent&&e.detachEvent("onmouseover",_)}function c(){e.removeEventListener}function _(e){input_mouse.setMouseEvent(e),u()}function u(){n||(a=!0,i(l),r(l,t),(n=task_container.createTask()).setDestructorFunc((function(){a=!1,o(l),n=null})),n.setExecuteFunc((function(){!function(){if(n){n.getUserWork();var t=ElementHitTestPosition(e,input_mouse.getPositionClient(),!0);input_mouse.getEnableMouse()||(t=!1),t||d()}}()})),n.execute(4294967295))}function d(){n&&(n.release(),n=null)}return l.release=function(){s(),c(),d()},l.setElementHitArea=function(t){e=t,s(),e.addEventListener?e.addEventListener("mouseover",_,!1):e.attachEvent&&e.attachEvent("onmouseover",_),c(),e.addEventListener,ElementHitTestMousePosition(t,input_mouse.getPositionClient(),!0)&&u()},l.setNotify=function(e){r(l,t=e)},l.hitTest=function(){return a},e=null,t=NotifyProgress.NOTIFY_TYPE_UNKNOWN,n=null,a=!1,l},e=DocumentCreateElement("img"),n=NotifyProgress.NOTIFY_TYPE_UNKNOWN}function DoubleTouchAssist(){var e,t;function n(t){var n=t.getUserWork(),a=e.style;a.left="0px",a.top="0px",a.width="0px",document.body.appendChild(e);var o=n.pos,r=n.vec,l=ElementGetBoundingClientRect(e),s=.5*r.x,c=.5*r.y,_=Math.atan2(r.y,r.x),u=Math.sqrt(r.x*r.x+r.y*r.y);a.left=o.x-l.left-s-.5*u+"px",a.top=o.y-l.top-0-c+"px",a.width=u+"px",a.transform=a.MozTransform=a.webkitTransform="rotate("+_+"rad)",a.opacity=.5,n.anime_pos=0,n.anime_spd=0,t.setExecuteFunc(i),t.execute(4294967295)}function a(n){DomNodeRemove(e),t=null}function i(e){e.getUserWork().frame=30,e.setExecuteFunc(o),e.execute(4294967295)}function o(e){var t=e.getUserWork();t.frame-=1,t.frame<0&&e.setExecuteFunc(r)}function r(e){var t=e.getUserWork();t.anime_pos=1,t.anime_spd=0,e.setExecuteFunc(l),e.execute(4294967295)}function l(t){var n=t.getUserWork(),a=0-n.anime_pos;(a*=.5)<0&&(n.anime_spd-=.25,n.anime_spd<a&&(n.anime_spd=a)),n.anime_pos+=n.anime_spd,n.anime_pos<.01&&(n.anime_spd=0,n.anime_pos=0,t.setExecuteFunc(s)),e.style.opacity=.5*n.anime_pos}function s(e){e.getUserWork();e.release()}this.release=function(){t&&t.release(),e=null},this.setShow=function(e,i){t&&(t.release(),t=null),(t=task_container.createTask()).setDestructorFunc(a),t.setExecuteFunc(n);var o=t.getUserWork();o.pos=e,o.vec=i,t.execute(4294967295)},(e=DocumentCreateElement("div")).style.cssText="height:2px; border:1px solid #000; background:#FFF; border-radius:2px; box-shadow:0px 0px 2px #888;",e.style.zIndex=2147483647,e.style.position="absolute",e.style.pointerEvents="none"}function ElementLimiterByCount(){var e,t,n,a,i,o=this;function r(e){var t=e._prev,n=e._next;t._next=n,n._prev=t,e._prev=e,e._next=e}function l(e){r(e);var n=t,a=n._next;n._next=e,a._prev=e,e._prev=n,e._next=a,e._use=!1}o.release=function(){for(;e!=e._next;)e._next.release();for(;t!=t._next;)t._next.release()},o.createElement=function(){var t,o,s=new Object;function c(){_(),t||(t=document_observer_scroll.createElement()).setFunction(s.update)}function _(){t&&(t.release(),t=null)}return s.release=function(){s.remove(),_(),r(s),n-=1},s.setElementHitArea=function(e){s._element_hit_area=e},s.onattach=function(){},s.onremove=function(){},s.attach=function(){s._use||(s._use=!0,a+=1,function(t){r(t);var n=e,a=n._next;n._next=t,a._prev=t,t._prev=n,t._next=a,t._use=!0}(s),_(),s.onattach())},s.remove=function(){s._use&&(s._use=!1,a-=1,l(s),c(),s.onremove&&s.onremove())},s.update=function(){if(a<i)s.attach();else{var t=DocumentGetClientSize(document),n=DomTreeGetBoundingClientRect(s._element_hit_area);if(n.right<0);else if(t.width<n.left);else if(n.bottom<0);else if(!(t.height<n.top)){if(!o){var r=function(){var t=DocumentGetClientSize(document),n=.5*t.width,a=.5*t.height,i=null,o=0,r=e._next;for(;r!=e;){r._next;var l=DomTreeGetBoundingClientRect(r._element_hit_area),s=.5*(l.left+l.right)-n,c=.5*(l.top+l.bottom)-a,_=s*s+c*c;_>o&&(o=_,i=r),r=r._next}return i}();r&&r.remove(),s.attach()}return void(o=!0)}o=!1}},s._use=!1,s._prev=s,s._next=s,s._element_hit_area=null,c(),l(s),o=!1,n+=1,s},o.getCountUse=function(){return a},o.getMaxUse=function(){return i},o.setMaxUse=function(e){i=e},o.getCount=function(){return n},e=new Object,t=new Object,n=0,a=0,i=0,e._prev=e,e._next=e,t._prev=t,t._next=t}function ElementLimiterByByteSize(){var e,t,n,a,i,o,r,l,s=this;function c(e){var t=e._prev,n=e._next;t._next=n,n._prev=t,e._prev=e,e._next=e}function _(e){c(e);var n=t,a=n._next;n._next=e,a._prev=e,e._prev=n,e._next=a,e._use=!1}s.release=function(){for(;e!=e._next;)e._next.release();for(;t!=t._next;)t._next.release()},s.createElement=function(){var t,o,r=new Object;function u(){d(),t||(t=document_observer_scroll.createElement()).setFunction(r.update)}function d(){t&&(t.release(),t=null)}return r.release=function(){r.remove(),d(),c(r),n-=1},r.setEnablePreload=function(e){r._preload=e},r.setElementHitArea=function(e){r._element_hit_area=e},r.setByteSize=function(e){r._byte_size=e,i+=e},r.onattach=function(){},r.onremove=function(){},r.attach=function(){r._use||(r._use=!0,a+=1,function(t){c(t);var n=e,a=n._next;n._next=t,a._prev=t,t._prev=n,t._next=a,t._use=!0}(r),d(),r.onattach())},r.remove=function(){r._use&&(r._use=!1,a-=1,_(r),u(),r.onremove&&r.onremove(),i-=r._byte_size,r._byte_size=0)},r.update=function(){var e=!1;if(r._preload&&(l||(e=!0)),e)r.attach();else{var t=DocumentGetClientSize(document),n=DomTreeGetBoundingClientRect(r._element_hit_area);if(n.right<0);else if(t.width<n.left);else if(n.bottom<0);else if(!(t.height<n.top))return o||(s.removeOldElements(),r.attach()),void(o=!0);o=!1}},r._use=!1,r._byte_size=0,r._prev=r,r._next=r,r._element_hit_area=null,r.setEnablePreload(!0),u(),_(r),o=!1,n+=1,r},s.removeOldElements=function(){if(r&&i>o){l=!0;var t=DocumentGetClientSize(document),n=e._prev;do{if(n==e)return;var a=DomTreeGetBoundingClientRect(n._element_hit_area);if(a.right<0);else if(t.width<a.left);else if(a.bottom<0);else if(!(t.height<a.top)){n=n._prev;continue}(n=n._prev)._next.remove()}while(i>o)}},s.getCountUse=function(){return a},s.getByteSizeNow=function(){return i},s.setByteSizeMax=function(e){o=1024*e*1024},s.setEnableUnload=function(e){r=e},s.getCount=function(){return n},e=new Object,t=new Object,n=0,a=0,i=0,o=0,l=!1,e._prev=e,e._next=e,t._prev=t,t._next=t}function EventDispatcher(){var e,t=this;t.release=function(){t.removeAll()},t.createEventHandler=function(t){var n=new Object;return n.release=function(){var a=n._prev,i=n._next;a._next=i,i._prev=a,n._prev=n,n._next=n,n._func=null;var o=e[t];o&&o==o._next&&ObjectDeleteProperty(e,t)},n.setFunction=function(e){n._func=e},function(){n._func=null,n._prev=n,n._next=n;var a=e[t];a||((a=new Object)._prev=a,a._next=a,e[t]=a);var i=a,o=i._prev;o._next=n,i._prev=n,n._prev=o,n._next=i}(),n},t.dispatchEvent=function(t,n){var a=e[t];if(a){for(var i,o=new Array,r=a._next;a!=r;)o.push(r),r=r._next;var l=o.length;for(i=0;i<l;i++){(r=o[i])._func&&r._func(n)}}},t.removeAll=function(){for(var t in e)for(var n=e[t];;){var a=n._next;if(n==a)break;a.release()}},e=new Object}function DocumentReviseScroll(){var e,t,n,a,i=this;function o(){e=WindowGetScrollPosition(window),t=DocumentGetDocumentSize(document)}function r(){var i={x:0,y:0},o=DocumentGetDocumentSize(document);if(n){var r=o.width-t.width;i.x=r,WindowSetScrollPositionX(window,e.x+r)}if(a){var l=o.height-t.height;i.y=l,WindowSetScrollPositionY(window,e.y+l)}page_expand_event_dispatcher.dispatchEvent("revise_scroll",i)}i.executeAttachElementBefore=function(e){o()},i.executeAttachElementAfter=function(e){var t=DomTreeGetBoundingClientRect(e);n=t.right<0,a=t.bottom<0,r()},i.executeRemoveElementBefore=function(e){var t=DomTreeGetBoundingClientRect(e);n=t.right<0,a=t.bottom<0,o()},i.executeRemoveElementAfter=function(e){r()},n=!1,a=!1,o()}function InputMouse(e){var t,n,a,i,o,r,l,s=this;function c(e){r=!0,l(e,!1)}function _(e){var t=DocumentGetClientSize(document);e.clientX<0&&(r=!1),e.clientY<0&&(r=!1),e.clientX>=t.width&&(r=!1),e.clientY>=t.height&&(r=!1),l(e,!1)}function u(e){l(e,!1)}function d(e){l(e,!0)}function p(e){!0!==e.defaultPrevented&&!1!==e.returnValue&&(a&=-3)}function m(e){a=0,i=!1,o=!1}s.release=function(){l&&(t.removeEventListener?(t.removeEventListener("mousemove",c,!0),t.removeEventListener("mouseout",_,!0),t.removeEventListener("mousedown",u,!0),t.removeEventListener("mouseup",d,!0),t.removeEventListener("dragstart",u,!0),t.removeEventListener("drag",c,!0),t.removeEventListener("dragend",d,!0),e.removeEventListener("contextmenu",p),e.removeEventListener("blur",m)):t.detachEvent&&(t.detachEvent("onmousemove",c),t.detachEvent("onmouseout",_,!0),t.detachEvent("onmousedown",u),t.detachEvent("onmouseup",d),t.detachEvent("ondragstart",u),t.detachEvent("ondrag",c),t.detachEvent("ondragend",d),e.detachEvent("oncontextmenu",p),e.detachEvent("onblur",m)),l=null)},s.setMouseEvent=function(e){l&&c(e)},s.setInputMouse=function(e){a=e.getButtons(),i=e.getKeyShift(),o=e.getKeyCtrl(),r=e.getEnableMouse()},s.setInputTouch=function(e){l&&(e.getEnableTouch()||(a=0),n=e.getPositionAverage())},s.getPositionClient=function(){return ObjectCopy(n)},s.getButtons=function(){return a},s.getButtonLeft=function(){return!!(1&a)},s.getButtonRight=function(){return!!(2&a)},s.getButtonCenter=function(){return!!(4&a)},s.getKeyShift=function(){return i},s.getKeyCtrl=function(){return o},s.getEnableMouse=function(){return r},function(){t=e.document,(n=new Object).x=-1,n.y=-1,a=0,i=!1,o=!1,r=!1;var s={mousedown:!0,dragstart:!0},g={mousemove:!0,drag:!0},f={mouseup:!0,dragend:!0};t.addEventListener?(t.addEventListener("mousemove",c,!0),t.addEventListener("mouseout",_,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("mouseup",d,!0),t.addEventListener("dragstart",u,!0),t.addEventListener("drag",c,!0),t.addEventListener("dragend",d,!0),e.addEventListener("contextmenu",p),e.addEventListener("blur",m),l=function(e,t){void 0!==e.buttons&&g[e.type]&&(a=e.buttons),s[e.type]?(0==e.button&&(a|=1),1==e.button&&(a|=4),2==e.button&&(a|=2)):f[e.type]&&(0==e.button&&(a&=-2),1==e.button&&(a&=-5),2==e.button&&(a&=-3)),(e.clientX||e.clientY)&&(n.x=e.clientX,n.y=e.clientY),i=e.shiftKey,o=e.ctrlKey}):t.attachEvent&&(t.attachEvent("onmousemove",c),t.attachEvent("onmouseout",_,!0),t.attachEvent("onmousedown",u),t.attachEvent("onmouseup",d),t.attachEvent("ondragstart",u),t.attachEvent("ondrag",c),t.attachEvent("ondragend",d),e.attachEvent("oncontextmenu",p),e.attachEvent("onblur",m),l=function(e,t){f[e.type]?a&=~e.button:a=e.button,(e.clientX||e.clientY)&&(n.x=e.clientX,n.y=e.clientY),i=e.shiftKey,o=e.ctrlKey})}()}function InputTouch(){var e,t,n,a,i=this;function o(n){var a,i=n.changedTouches,o=i.length;for(a=0;a<o;a++){var r=i[a];t[r.identifier]=r}var l=0,s=0,c=0;for(o=t.length,a=0;a<o;a++){(r=t[a])&&(l+=r.clientX,s+=r.clientY,c++)}c&&(e.x=l/c,e.y=s/c)}function r(e){n=!0,o(e),a.dispatchEvent("update",i)}function l(e){o(e);var r,l=e.changedTouches,s=l.length;for(r=0;r<s;r++){var c=l[r];t[c.identifier]=null}for(r=t.length-1;r>=0&&!t[r];)r--;t.length=r+1,t.length||(n=!1),a.dispatchEvent("update",i)}function s(e){n=!1,t.length,a.dispatchEvent("update",i)}i.release=function(){document.removeEventListener&&(document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchmove",r,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("touchcancel",l,!0),window.removeEventListener("blur",s)),a&&(a.release(),a=null)},i.setTouchEvent=function(e){r(e)},i.getPositionAverage=function(){return ObjectCopy(e)},i.getEnableTouch=function(){return n},i.getTouchList=function(){return t},i.createEventHandler=function(e){return a.createEventHandler(e)},t=new Array,(e=new Object).x=-1,e.y=-1,n=!1,a=new EventDispatcher,document.addEventListener&&(document.addEventListener("touchstart",r,!0),document.addEventListener("touchmove",r,!0),document.addEventListener("touchend",l,!0),document.addEventListener("touchcancel",l,!0),window.addEventListener("blur",s))}function VirtualMousePointer(e){var t,n,a=this;function i(){for(var a=e.elementFromPoint(n.x,n.y);a;){if(analyze_work_dictionary.getAnalyzeWork(a))break;a=a.parentNode}if(a!=t&&a){var i=e.createEvent("MouseEvent");i.initMouseEvent("mouseover",!1,!1,e.defaultView,0,0,0,n.x,n.y,!1,!1,!1,!1,0,a),a.dispatchEvent(i)}t=a}a.release=function(){t=null},a.setPosition=function(e){n=e,i()},a.addVector=function(e){var t={x:n.x+e.x,y:n.y+e.y},a=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.floor(a/1);a=1/a*1;var r,l=e.x*a,s=e.y*a;for(r=0;r<o;r++)n.x+=l,n.y+=s,i();n=t,i()},t=null,(n=new Object).x=-1,n.y=-1}function UrlCacheDictionary(){var e,t,n,a;this.getObject=function(i){if(i.length>260)return{};var o=e[i];if(o){var r=o.prev,l=o.next;return r.next=l,l.prev=r,(r=(r=t).next).next=o,l.prev=o,o.prev=r,o.next=l,o}(o=new Object).url=i;l=(r=t).next;if(r.next=o,l.prev=o,o.prev=r,o.next=l,n++,e[i]=o,n>=a){var s=t.prev;r=s.prev,l=s.next,r.next=l,l.prev=r,n--,delete e[s.url]}return o},this.setCacheMax=function(e){a=e},e=new Object,(t=new Object).prev=t,t.next=t,n=0,a=16}function ElementAnalyzeManager(e,t){var n,a,i,o=this;o.release=function(){n&&(i&&(i.release(),i=null),analyze_work_dictionary.removeAnalyzeWork(a),DomNodeRemove(n),n=null)},o.analyze=function(){AnalyzeWorkClearInvalid(a),execute_queue.attachLastForInsertDomNode(DomNodeAnalyzeRoot,n)},function(){n=e,e=null,(i=new DomNodeObserverRemoveFromDocument(n)).setFunction(o.release),(a=analyze_work_dictionary.getAnalyzeWork(n))||(a=AnalyzeWorkCreate(n));var r=new AnalyzeWorkDictionaryAttachOptions;t&&r.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(a,r),AnalyzeWorkSetInvalid(a)}()}function AnalyzeWorkCreate(e){return{node:e,modify:1}}function AnalyzeWorkGetDomNode(e){return e.node}function AnalyzeWorkClearAnchorElement(e){ObjectDeleteProperty(e,"anchor")}function AnalyzeWorkSetAnchorElement(e,t){e.anchor=t}function AnalyzeWorkGetAnchorElement(e){return e.anchor}function AnalyzeWorkClearInitializedObserverElement(e){ObjectDeleteProperty(e,"i_obs")}function AnalyzeWorkSetInitializedObserverElement(e){e.i_obs=!0}function AnalyzeWorkGetInitializedObserverElement(e){return Boolean(e.i_obs)}function AnalyzeWorkClearOverrodeAnchorElement(e){ObjectDeleteProperty(e,"o_anc")}function AnalyzeWorkSetOverrodeAnchorElement(e){e.o_anc=!0}function AnalyzeWorkGetOverrodeAnchorElement(e){return Boolean(e.o_anc)}function AnalyzeWorkClearOverrodeUrl(e){ObjectDeleteProperty(e,"o_url")}function AnalyzeWorkSetOverrodeUrl(e){e.o_anc=!0}function AnalyzeWorkGetOverrodeUrl(e){return Boolean(e.o_anc)}function AnalyzeWorkClearAnalyzedReplacementToElement(e){ObjectDeleteProperty(e,"a_rte")}function AnalyzeWorkSetAnalyzedReplacementToElement(e){e.a_rte=!0}function AnalyzeWorkGetAnalyzedReplacementToElement(e){return Boolean(e.a_rte)}function AnalyzeWorkClearAnalyzedReplacementToText(e){ObjectDeleteProperty(e,"a_rtt")}function AnalyzeWorkSetAnalyzedReplacementToText(e){e.a_rtt=!0}function AnalyzeWorkGetAnalyzedReplacementToText(e){return Boolean(e.a_rtt)}function AnalyzeWorkClearAnalyzedReplacementToAnchor(e){ObjectDeleteProperty(e,"a_rta")}function AnalyzeWorkSetAnalyzedReplacementToAnchor(e){e.a_rta=!0}function AnalyzeWorkGetAnalyzedReplacementToAnchor(e){return Boolean(e.a_rta)}function AnalyzeWorkClearAnalyzedReplacementToLink(e){ObjectDeleteProperty(e,"a_rtl")}function AnalyzeWorkSetAnalyzedReplacementToLink(e){e.a_rtl=!0}function AnalyzeWorkGetAnalyzedReplacementToLink(e){return Boolean(e.a_rtl)}function AnalyzeWorkClearExpandUrl(e){ObjectDeleteProperty(e,"expand_url")}function AnalyzeWorkSetExpandUrl(e,t){e.expand_url=t}function AnalyzeWorkGetExpandUrl(e){return e.expand_url}function AnalyzeWorkClearExpandContentType(e){ObjectDeleteProperty(e,"expand_content_type")}function AnalyzeWorkAddContentType(e,t){e.expand_content_type||(e.expand_content_type=new Array),e.expand_content_type.push(t)}function AnalyzeWorkGetContentType(e){return e.expand_content_type?e.expand_content_type:[]}function AnalyzeWorkClearAnalyzedMakeLinkToText(e){ObjectDeleteProperty(e,"a_mlt")}function AnalyzeWorkSetAnalyzedMakeLinkToText(e){e.a_mlt=!0}function AnalyzeWorkGetAnalyzedMakeLinkToText(e){return Boolean(e.a_mlt)}function AnalyzeWorkClearAnalyzedExpandShortUrl(e){ObjectDeleteProperty(e,"a_esu")}function AnalyzeWorkSetAnalyzedExpandShortUrl(e){e.a_esu=!0}function AnalyzeWorkGetAnalyzedExpandShortUrl(e){return Boolean(e.a_esu)}function AnalyzeWorkClearAnalyzedExpandInlineText(e){ObjectDeleteProperty(e,"a_eit")}function AnalyzeWorkSetAnalyzedExpandInlineText(e){e.a_eit=!0}function AnalyzeWorkGetAnalyzedExpandInlineText(e){return Boolean(e.a_eit)}function AnalyzeWorkClearAnalyzedExpandThumbnailImage(e){ObjectDeleteProperty(e,"a_eti")}function AnalyzeWorkSetAnalyzedExpandThumbnailImage(e){e.a_eti=!0}function AnalyzeWorkGetAnalyzedExpandThumbnailImage(e){return Boolean(e.a_eti)}function AnalyzeWorkClearAnalyzedExpandPopupImage(e){ObjectDeleteProperty(e,"a_epi")}function AnalyzeWorkSetAnalyzedExpandPopupImage(e){e.a_epi=!0}function AnalyzeWorkGetAnalyzedExpandPopupImage(e){return Boolean(e.a_epi)}function AnalyzeWorkClearPopupImage(e){ObjectDeleteProperty(e,"popup_image")}function AnalyzeWorkSetPopupImage(e,t){e.popup_image=t}function AnalyzeWorkGetPopupImage(e){return e.popup_image}function AnalyzeWorkClearAnalyzedExpandInlineSound(e){ObjectDeleteProperty(e,"a_eis")}function AnalyzeWorkSetAnalyzedExpandInlineSound(e){e.a_eis=!0}function AnalyzeWorkGetAnalyzedExpandInlineSound(e){return Boolean(e.a_eis)}function AnalyzeWorkClearAnalyzedExpandInlineVideo(e){ObjectDeleteProperty(e,"a_eiv")}function AnalyzeWorkSetAnalyzedExpandInlineVideo(e){e.a_eiv=!0}function AnalyzeWorkGetAnalyzedExpandInlineVideo(e){return Boolean(e.a_eiv)}function AnalyzeWorkClearAnalyzedExpandInlineIframe(e){ObjectDeleteProperty(e,"a_eif")}function AnalyzeWorkSetAnalyzedExpandInlineIframe(e){e.a_eif=!0}function AnalyzeWorkGetAnalyzedExpandInlineIframe(e){return Boolean(e.a_eif)}function AnalyzeWorkClearAnalyzedExpandIframeContent(e){ObjectDeleteProperty(e,"a_eic")}function AnalyzeWorkSetAnalyzedExpandIframeContent(e){e.a_eic=!0}function AnalyzeWorkGetAnalyzedExpandIframeContent(e){return Boolean(e.a_eic)}function AnalyzeWorkClearAnalyzedPopupReducedImage(e){ObjectDeleteProperty(e,"a_pri")}function AnalyzeWorkSetAnalyzedPopupReducedImage(e){e.a_pri=!0}function AnalyzeWorkGetAnalyzedPopupReducedImage(e){return Boolean(e.a_pri)}function AnalyzeWorkClearAnalyzedInlineMediaPlayer(e){ObjectDeleteProperty(e,"a_imp")}function AnalyzeWorkSetAnalyzedInlineMediaPlayer(e){e.a_imp=!0}function AnalyzeWorkGetAnalyzedInlineMediaPlayer(e){return Boolean(e.a_imp)}function AnalyzeWorkClearAnalyzedExpandBbs(e){ObjectDeleteProperty(e,"a_ebb")}function AnalyzeWorkSetAnalyzedExpandBbs(e){e.a_ebb=!0}function AnalyzeWorkGetAnalyzedExpandBbs(e){return Boolean(e.a_ebb)}function AnalyzeWorkClearInvalid(e){ObjectDeleteProperty(e,"a_inv")}function AnalyzeWorkSetInvalid(e){e.a_inv=!0}function AnalyzeWorkGetInvalid(e){return Boolean(e.a_inv)}function AnalyzeWorkInitializeModifyCount(e){e.modify=1}function AnalyzeWorkGetModifyCount(e){return e.modify}function AnalyzeWorkAddModifyCount(e){e.modify+=1}function AnalyzeWorkEqualModifyCount(e,t){return e.modify?t==e.modify:0==t}function AnalyzeWorkClearEventDispatcher(e){ObjectDeleteProperty(e,"event_dispatcher")}function AnalyzeWorkSetEventDispatcher(e,t){e.event_dispatcher=t}function AnalyzeWorkGetEventDispatcher(e){return e.event_dispatcher}function AnalyzeWorkClearObserverModifyAnchor(e){ObjectDeleteProperty(e,"observer_modify_anchor")}function AnalyzeWorkSetObserverModifyAnchor(e,t){e.observer_modify_anchor=t}function AnalyzeWorkGetObserverModifyAnchor(e){return e.observer_modify_anchor}function AnalyzeWorkClearBbsControl(e){ObjectDeleteProperty(e,"bbs_control")}function AnalyzeWorkSetBbsControl(e,t){e.bbs_control=t}function AnalyzeWorkGetBbsControl(e){return e.bbs_control}function AnalyzeWorkObserveElement(e){if(!AnalyzeWorkGetInitializedObserverElement(e)){var t=AnalyzeWorkGetDomNode(e);AnalyzeWorkSetInitializedObserverElement(e),analyze_work_dictionary.attachAnalyzeWork(e);var n=new EventDispatcher;AnalyzeWorkSetEventDispatcher(e,n);var a=new DomNodeObserverRemoveFromDocument(t);a.setFunction(o);var i=page_expand_event_dispatcher.createEventHandler("release");i.setFunction(o),n.createEventHandler("destructor").setFunction((function(){AnalyzeWorkAddModifyCount(e);var n=AnalyzeWorkGetEventDispatcher(e);n&&(n.dispatchEvent("release",null),n.release(),AnalyzeWorkClearEventDispatcher(e)),a&&(a.release(),a=null),i&&(i.release(),i=null),analyze_work_dictionary.removeAnalyzeWork(e),window.addEventListener||DomNodeClearInserted(t)}))}function o(){var t=AnalyzeWorkGetEventDispatcher(e);t&&(t.dispatchEvent("remove",null),t.dispatchEvent("destructor",null))}}function AnalyzeWorkDictionaryAttachOptions(){var e=this;e.SetOutsider=function(){e._flag|=ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_OUTSIDER},e.SetGuest=function(){e._flag|=ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_GUEST},e._flag=0}NotifyProgress.NOTIFY_TYPE_UNKNOWN=0,NotifyProgress.NOTIFY_TYPE_LOADING=1,NotifyProgress.NOTIFY_TYPE_COMPLETE=2,NotifyProgress.NOTIFY_TYPE_ERROR=3,NotifyProgress.NOTIFY_TYPE_RELEASE=4;var ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_OUTSIDER=1,ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_GUEST=2,ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_MAX=2;function AnalyzeWorkDictionary(){var e,t,n=this;n.release=function(){for(var e in t)n.removeAnalyzeWork(t[e]);t=null},n.attachAnalyzeWork=function(n,a){if(n.id)return!0;var i=AnalyzeWorkGetDomNode(n);if(i){var o=0;a&&(o=a._flag);var r=e<<ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_MAX|o;return t[r]=n,e+=1,n.id=r,i._pageexpand_=r,i.setAttribute&&i.setAttribute("_pageexpand_",r),!0}return!1},n.removeAnalyzeWork=function(e){var n=e.id;if(!n)return!1;try{ObjectDeleteProperty(t,n),ObjectDeleteProperty(e,"id")}catch(e){}},n.getAnalyzeWork=function(e){var n;if(n=e._pageexpand_){var a=t[parseInt(n)];if(a&&AnalyzeWorkGetDomNode(a)==e)return a}return null},n.verifyClone=function(e){var n;if(e.getAttribute&&((n=e.getAttribute("_pageexpand_"))&&(n=parseInt(n))&ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_OUTSIDER)){var a=t[n];if(!a)return!0;if(AnalyzeWorkGetDomNode(a)!=e)return!0}return!1},n.verifyRemoved=function(e){if(e.getAttribute&&(n=e.getAttribute("_pageexpand_"))){var n=parseInt(n),a=t[n];if(!a)return!0;if(AnalyzeWorkGetDomNode(a)!=e)return!0}return!1},n.verifyGuest=function(e){var t;if(e.getAttribute&&((t=e.getAttribute("_pageexpand_"))&&(t=parseInt(t))&ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_GUEST))return!0;return!1},e=1,t=new Array}function BbsDictionary(){var e,t,a,i=this;function o(e,t){var n=new Object;return n.release=function(){var e=n._follower_prev,t=n._follower_next;e._follower_next=t,t._follower_prev=e,n._follower_prev=n,n._follower_next=n;var a=n._following_prev,i=n._following_next;a._following_next=i,i._following_prev=a,n._following_prev=n,n._following_next=n;var o=n.getResponseFollowing();o&&o.addCountFollower(-1)},n.getResponseFollower=function(){return e},n.getResponseFollowing=function(){return t},n._follower_prev=n,n._follower_next=n,n._following_prev=n,n._following_next=n,n}function r(t){var n,i,r,c,_,u,d,p,m,g=new Object;function f(){h(),g.clearOriginalElements(),g.clearFollowing(),function(){for(var e in n)x(e)}(),m.dispatchEvent("release",null)}function h(){var e,t=c.length;for(e=0;e<t;e++)if(p[e]){c[e];p[e].release(),p[e]=null}}function x(e){var t=n[e];if(t)for(;t.ary_next!=t;)b(t.ary_next)}function b(e){l(e.container,-1);var t=e.dic_prev,n=e.dic_next;t.dic_next=n,n.dic_prev=t;var a=e.ary_prev,i=e.ary_next;a.ary_next=i,i.ary_prev=a}return g.release=function(n){if(!r){r=!0,f(),i=!1;for(var a=g._follow;;){var o=a._follower_next;if(a==o)break;o.release()}m&&(m.release(),m=null),delete e[t]}},g.erase=function(){g.onerase&&g.onerase(),f()},g.getNumber=function(){return t},g.getId=function(){return g.getDataList("id")[0]},g.setId=function(e){x("id"),g.attachData("id",e)},g.getName=function(){return g.getDataList("name")[0]},g.setName=function(e){x("name"),g.attachData("name",e)},g.getHost=function(){return g.getDataList("host")[0]},g.setHost=function(e){x("host"),g.attachData("host",e)},g.getDataList=function(e){var t=[],a=n[e];if(!a)return t;for(var i=a.ary_next;i!=a;)t.push(i.data),i=i.ary_next;return t},g.hasData=function(e,t){var a=n[e];if(!a)return!1;for(var i=a.ary_next;i!=a;){if(i.data===t)return!0;i=i.ary_next}return!1},g.attachData=function(e,t){!function(e,t){for(var a=s(e,t),i=a.list,o=i.dic_prev;o!=i&&!(g.getNumber()>=o.owner.getNumber());)o=o.dic_prev;if(!n[e]){var r=new Object;r.ary_prev=r,r.ary_next=r,n[e]=r}var c=Object();c.data=t,c.owner=g,c.container=a;var _=o,u=_.dic_next;_.dic_next=c,u.dic_prev=c,c.dic_prev=_,c.dic_next=u;var d=n[e].ary_prev,p=d.ary_next;d.ary_next=c,p.ary_prev=c,c.ary_prev=d,c.ary_next=p,l(a,1)}(e,t)},g.clearAnalyzed=function(){i=!1},g.getAnalyzed=function(){return i},g.setAnalyzed=function(){i=!0},g.clearOriginalElements=function(){var e;h();var t=_.length;for(e=0;e<t;e++)AnalyzeWorkClearAnalyzedExpandBbs(_[e]),analyze_work_dictionary.removeAnalyzeWork(_[e]);c.length=0,u.length=0,_.length=0},g.getOriginalElements=function(){return c},g.addOriginalElements=function(e,t){c.push({name:e,element:t});var n=analyze_work_dictionary.getAnalyzeWork(t);n||(n=AnalyzeWorkCreate(t)),_.push(n),analyze_work_dictionary.attachAnalyzeWork(n),AnalyzeWorkSetAnalyzedExpandBbs(n),u.push({name:e,element:ElementCloneNode(t,!0)}),function(){var e;h();var t=c.length;for(e=0;e<t;e++)if(!p[e]){var n=c[e];p[e]=new DomNodeObserverRemoveFromDocument(n.element),p[e].setFunction(g.release)}}()},g.getCloneElements=function(){var e,t=new Array,n=u.length;for(e=0;e<n;e++){var a=u[e];t.push({name:a.name,element:ElementCloneNode(a.element,!0)})}return t},g.clearFollowing=function(){for(var e=g._follow;;){var t=e._following_next;if(e==t)break;t.release()}},g.getCountFollower=function(){return d},g.addCountFollower=function(e){d+=e;var n=a[t];n&&n.dispatchEvent("update",d)},g.getFollower=function(){for(var e=new Array,t=g._follow._follower_next;t!=g._follow;)e.push(t.getResponseFollower()),t=t._follower_next;return e},g.addFollower=function(e){for(var t,n,a=o(e,g),i=g._follow._follower_prev;i!=g._follow&&!(e.getNumber()>=i.getResponseFollower().getNumber());)i=i._follower_prev;n=(t=i)._follower_next,t._follower_next=a,n._follower_prev=a,a._follower_prev=t,a._follower_next=n,n=(t=e._follow._following_prev)._following_next,t._following_next=a,n._following_prev=a,a._following_prev=t,a._following_next=n,g.addCountFollower(1)},g.getEventDispatcher=function(){return m},g.onerase=function(){},n=new Object,i=!1,r=!1,c=new Array,_=new Array,u=new Array,d=0,g._follow=o(null,null),p=new Array,m=new EventDispatcher,g}function l(e,t){e.count+=t,e.counter_event.dispatchEvent("update",e.count)}function s(e,n){var a=t[e];a||(a=t[e]=new Object);var i=a[n];if(!i){var o=new Object;o.dic_prev=o,o.dic_next=o;var r=new EventDispatcher;i=a[n]={count:0,counter_event:r,list:o}}return i}i.release=function(){for(n in e)e[n].release()},i.getExist=function(t){return!!e[t]},i.getResponse=function(t){var n=e[t];return n||(n=r(t),e[t]=n),n},i.getResponsesFromId=function(e){return i.getResponsesFromData("id",e)},i.getResponsesFromName=function(e){return i.getResponsesFromData("name",e)},i.getResponsesFromHost=function(e){return i.getResponsesFromData("host",e)},i.getResponsesFromData=function(e,t){for(var n=new Array,a=s(e,t).list,i=a.dic_next;i!=a;)n.push(i.owner),i=i.dic_next;return n},i.createEventHandlerForIdCounter=function(e){return i.createEventHandlerForDataCounter("id",e)},i.createEventHandlerForNameCounter=function(e){return i.createEventHandlerForDataCounter("name",e)},i.createEventHandlerForHostCounter=function(e){return i.createEventHandlerForDataCounter("host",e)},i.createEventHandlerForDataCounter=function(e,t){return s(e,t).counter_event.createEventHandler("update")},i.createEventHandlerForFollowerCounter=function(e){var t=a[e];return t||(t=new EventDispatcher,a[e]=t),t.createEventHandler("update")},i.getCountId=function(e){return i.getCountData("id",e)},i.getCountName=function(e){return i.getCountData("name",e)},i.getCountHost=function(e){return i.getCountData("host",e)},i.getCountData=function(e,t){return s(e,t).count},e=new Object,t=new Object,a=new Object}function BbsResponseDialog(){var e,t,n,a,i,o,r,l,s,c,_,u,d=this;function p(e){for(var t=new Array,n=(i=d._child)._next;n!=i;)t.push(n),n=n._next;for(;;){var a=t.shift();if(!a)break;var i;for(n=(i=a._child)._next;n!=i;)t.push(n),n=n._next;if(e(a))return}}function m(){t&&(t.removeEventListener?t.removeEventListener("mouseover",h,!1):t.detachEvent&&t.detachEvent("onmouseover",h))}function g(){t&&t.removeEventListener}function f(){c&&(c.release(),c=null)}function h(e){input_mouse.setMouseEvent(e),x()}function x(){if(!(i&&(i=!1,(new Date).getTime()-o<100))){if(e)if("fade_out"===e.getUserWork().type)e.setExecuteFunc(T),e.execute(4294967295);input_mouse.getKeyShift()||input_mouse.getButtonLeft()||e||((e=task_container.createTask()).setLevel(TASK_EXECUTE_LEVEL_POPUP),e.setDestructorFunc(R),e.setExecuteFunc(y),e.execute(4294967295))}}function b(){if(e){var n=e.getUserWork(),a=input_mouse.getPositionClient(),i=ElementHitTestPosition(t,a,!1);if(i||(i=Boolean(document.elementFromPoint(a.x,a.y)==t)),i||(i=d.hittestWindow(a)),i||p((function(e){return i=e.hittestWindow(a)})),i){var o=DocumentGetClientSize(document);a.x<1&&(i=!1),a.y<1&&(i=!1),o.width-2<a.x&&(i=!1),o.height-2<a.y&&(i=!1),input_mouse.getEnableMouse()||(i=!1)}if(project.getEnableAnimationPopupBbsResponse())if(i)switch(n.type){case"wait_before_close":e.setExecuteFunc(A),e.execute(4294967295);break;case"fade_out":e.setExecuteFunc(C),e.execute(4294967295)}else switch(n.type){case"wait_before_open":e.setExecuteFunc(T),e.execute(4294967295);break;case"fade_in":e.setExecuteFunc(D),e.execute(4294967295);break;case"show":e.setExecuteFunc(I),e.execute(4294967295)}else if(i){if("wait_before_close"===n.type)e.setExecuteFunc(A),e.execute(4294967295)}else switch(n.type){case"wait_before_open":e.setExecuteFunc(T),e.execute(4294967295);break;case"show":e.setExecuteFunc(I),e.execute(4294967295)}}}function v(t){if(e){var n=e.getUserWork().pos;n.x+=t.x,n.y+=t.y,N(e)}}function y(e){var t=e.getUserWork();t.type="initialize",t.anime_pos=0,t.anime_spd=0,e.setExecuteFunc(E),e.execute(4294967295)}function E(e){var t=e.getUserWork();t.type="wait_before_open",t.frame=project.getTimeWaitOpenPopupExpandBbsResponse()/1e3*60,e.setExecuteFunc(w),e.execute(4294967295)}function w(e){var t=e.getUserWork();if(b(),t.frame-=1,t.frame<0)return e.setExecuteFunc(S),void e.execute(4294967295)}function S(i){var o=i.getUserWork();o.type="open",o.anime_pos=0,o.anime_spd=0,a=DocumentCreateElement("div"),s=AnalyzeWorkCreate(a);var r=new AnalyzeWorkDictionaryAttachOptions;r.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(s,r),ElementSetStyle(a,project.getStyleSheetExpandBbsPopupResponse()),a.style.zIndex=2147483646,a.style.position=project.getStylePositionPopupBbsResponse();try{a.style.minWidth="0",a.style.minHeight="0",a.style.maxWidth="none",a.style.maxHeight="none"}catch(e){}a.style.left="0px",a.style.top="0px",a.style.width="0px",a.style.height="0px";var l=ElementCloneNode(a,!1);n?n.appendChild(l):document.body.appendChild(l);var c=ElementGetBoundingClientRect(l);o.style_w=c.right-c.left,o.style_h=c.bottom-c.top,DomNodeRemove(l);var u=!1;function p(r){if(i.getAlive()&&!u){if(u=!0,!r.result)return e.setExecuteFunc(T),void e.execute(4294967295);var l,s=DocumentGetClientSize(document),d=(WindowGetScrollPosition(window),project.getPercentPopupBbsResponse()),p=Math.floor(s.width*(d.x/100))-o.style_w-2,m=Math.floor(s.height*(d.y/100))-o.style_h-2;if(a.style.width=p+"px",a.style.height="auto",a.style.maxHeight=m+"px",n?n.appendChild(a):document.body.appendChild(a),t&&DomNodeGetAttachedDocument(t)&&(l=ElementGetBoundingClientRect(t)),!l){var g=ObjectCopy(input_mouse.getPositionClient());l={left:g.x,right:g.x,top:g.y,bottom:g.y}}l.left=Math.ceil(l.left),l.top=Math.ceil(l.top),l.right=Math.floor(l.right),l.bottom=Math.floor(l.bottom);var f,h,x=ElementGetBoundingClientRect(a),b=.5*(l.left+l.right),y=.5*(l.top+l.bottom);switch(project.getOriginPopupExpandBbsResponse()){default:case"adsorb_left_right":f=b/s.width<.5?l.right-x.left:l.left-x.right,h=y/s.height<.5?l.top-x.top:l.bottom-x.bottom;break;case"adsorb_top_bottom":f=b/s.width<.5?l.left-x.left:l.right-x.right,h=y/s.height<.5?l.bottom-x.top:l.top-x.bottom}x.left+=f,x.right+=f,x.top+=h,x.bottom+=h;var E={x:x.left,y:x.top};o.pos=E,s.width<x.right+1&&(E.x+=s.width-1-x.right),s.height<x.bottom+1&&(E.y+=s.height-1-x.bottom),E.x<1&&(E.x=1),E.y<1&&(E.y=1);var w=s.height-E.y-o.style_h-1;w<m&&(m=w,a.style.maxHeight=m+"px"),"absolute"==project.getStylePositionPopupBbsResponse()&&(E.x-=c.left,E.y-=c.top,(_=page_expand_event_dispatcher.createEventHandler("revise_scroll")).setFunction(v)),N(i),document.addEventListener||execute_queue.attachLastForInsertDomNode(DomNodeAnalyzeRoot,a),a.style.pointerEvents="auto",project.getEnableAnimationPopupBbsResponse()?i.setExecuteFunc(C):i.setExecuteFunc(A),i.execute(4294967295)}}e.setExecuteFunc(null);var m=d.oncreate(a,p);void 0!==m&&p({result:m})}function C(e){var t=e.getUserWork();t.type="fade_in",b();var n=1-t.anime_pos;(n*=.4)>0&&(t.anime_spd+=.05,t.anime_spd>.2&&(t.anime_spd=.2),t.anime_spd>n&&(t.anime_spd=n)),t.anime_pos+=t.anime_spd,t.anime_pos>.999&&(t.anime_spd=0,t.anime_pos=1,e.setExecuteFunc(A)),a.style.opacity=t.anime_pos}function A(e){var t=e.getUserWork();t.type="show",t.anime_pos=1,t.anime_spd=0,t.frame=project.getTimeWaitClosePopupExpandBbsResponse()/1e3*60,a.style.opacity=t.anime_pos,e.setExecuteFunc(k),e.execute(4294967295)}function k(e){e.getUserWork();b()}function I(e){var t=e.getUserWork();t.type="wait_before_close",b(),t.frame-=1,t.frame<0&&(project.getEnableAnimationPopupBbsResponse()?(a.style.pointerEvents="none",e.setExecuteFunc(D)):e.setExecuteFunc(T))}function D(e){var t=e.getUserWork();t.type="fade_out";var n=0-t.anime_pos;(n*=.4)<0&&(t.anime_spd-=.2,t.anime_spd<n&&(t.anime_spd=n)),t.anime_pos+=t.anime_spd,t.anime_pos<.001&&(t.anime_spd=0,t.anime_pos=0,e.setExecuteFunc(T)),a.style.opacity=t.anime_pos}function T(e){e.getUserWork();e.release()}function R(t){_&&(_.release(),_=null),s&&(analyze_work_dictionary.removeAnalyzeWork(s),s=null),a&&(DomNodeRemove(a),a=null),e=null,r&&d.release()}function N(e){var t=e.getUserWork().pos;a.style.left=t.x+"px",a.style.top=t.y+"px"}d.release=function(){l||(l=!0,u&&(u.release(),u=null),p((function(e){return e.release(),!1})),d.removeParent(),m(),g(),f(),e&&(e.release(),e=null))},d.suicide=function(){e?(d.setElementHitArea(null),r=!0):d.release()},d.setElementHitArea=function(e){m(),g(),f(),(t=e)&&(o=(new Date).getTime(),i=!0),function(){if(!t)return;m(),t.addEventListener?t.addEventListener("mouseover",h,!1):t.attachEvent&&t.attachEvent("onmouseover",h)}(),function(){if(!t)return;g(),t.addEventListener}(),function(){if(!t)return;f(),c||(c=new DomNodeObserverRemoveFromDocument(t)).setFunction(d.suicide)}()},d.setElementParent=function(e){n=e},d.hittestWindow=function(e){return!!a&&ElementHitTestPosition(a,e,!1)},d.attachChild=function(e){e.removeParent();var t=d._child,n=t._next;e._prev=t,e._next=n,t._next=e,n._prev=e,d._parent=e},d.removeParent=function(){var e=d._prev,t=d._next;e._next=t,t._prev=e,d._prev=d,d._next=d,d._parent=null},d.oncreate=function(e){},function(){e=null,a=null,i=!1,o=0,r=!1,l=!1,d._parent=null,d._prev=d,d._next=d;var t=new Object;t._prev=t,t._next=t,d._child=t,(u=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){d.release()}))}()}function BbsResponseDialogContains(e){for(;e;){var t=analyze_work_dictionary.getAnalyzeWork(e);if(t&&t.id&ANALYZE_WORK_DICTIONARY_ATTACH_OPTION_OUTSIDER)return!0;e=e.parentNode}return!1}function BbsControlResponseAnchor(e,t){var n,a,i,o,r,l,s,c,_=this;_.getType=function(e){return"res_a"},_.getResponseAnchorNumbers=function(){return n},_.setResponseAnchorNumbers=function(e){n=e},_.setResponse=function(e){if(!l){l=e;var t=e.getEventDispatcher();(s=t.createEventHandler("release")).setFunction(_.release)}},_.getElement=function(){return a},_.getTextNode=function(){return i},_.setTextNode=function(e){i=e},_.release=function(){n=null,_.onchange(0),s&&(s.release(),s=null),c&&(c.release(),c=null),r&&(r.release(),r=null),o&&(AnalyzeWorkClearBbsControl(o),analyze_work_dictionary.removeAnalyzeWork(o),o=null),a&&(t&&DomNodeRemove(a),a=null)},_.onchange=function(e){},function(){e?(a=e,e=null):a=DocumentCreateElement("a"),AnalyzeWorkSetBbsControl(o=AnalyzeWorkCreate(a),_),AnalyzeWorkSetInvalid(o);var n=new AnalyzeWorkDictionaryAttachOptions;t&&n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,n),(r=new DomNodeObserverRemoveFromDocument(a)).setFunction(_.release),(c=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){_.release()}))}()}function BbsControlResponseAnchorExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++){var i=analyze_work_dictionary.getAnalyzeWork(n[t]);if(i){var o=AnalyzeWorkGetBbsControl(i);if(o&&"res_a"==o.getType())return!0}}return!1}function BbsControlResponseAnchorSearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"res_a"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlQuote(e,t){var n,a,i,o,r,l,s,c,_=this;function u(e){_.release()}_.getType=function(e){return"res_q"},_.getResponseAnchorNumbers=function(){return n},_.setResponseAnchorNumbers=function(e){n=e},_.setResponse=function(e){if(!l){l=e;var t=e.getEventDispatcher();(s=t.createEventHandler("release")).setFunction(_.release)}},_.getElement=function(){return a},_.getTextNode=function(){return i},_.setTextNode=function(e){i=e},_.release=function(){n=null,_.onchange(0),s&&(s.release(),s=null),c&&(c.release(),c=null),r&&(r.release(),r=null),o&&(AnalyzeWorkClearBbsControl(o),analyze_work_dictionary.removeAnalyzeWork(o),o=null),a&&(a.removeEventListener&&a.removeEventListener("click",u),t&&DomNodeRemove(a),a=null)},_.onchange=function(e){},function(){e?(a=e,e=null):((a=DocumentCreateElement("span")).style.cursor="pointer",a.title="remove"),a.addEventListener&&a.addEventListener("click",u),AnalyzeWorkSetBbsControl(o=AnalyzeWorkCreate(a),_),AnalyzeWorkSetInvalid(o);var n=new AnalyzeWorkDictionaryAttachOptions;t&&n.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(o,n),(r=new DomNodeObserverRemoveFromDocument(a)).setFunction(_.release),(c=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){_.release()}))}()}function BbsControlQuoteExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++)if(BbsControlQuoteEqual(n[t]))return!0;return!1}function BbsControlQuoteEqual(e){var t=analyze_work_dictionary.getAnalyzeWork(e);if(t){var n=AnalyzeWorkGetBbsControl(t);if(n&&"res_q"==n.getType())return!0}return!1}function BbsControlQuoteSearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"res_q"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlId(e,t){var n,a,i,o,r,l,s,c,_,u=this;function d(e){p();var t=bbs_dictionary.getResponsesFromId(l),n=t.length-1;execute_queue.attachFirst((function e(){t[n].erase(),--n>=0?execute_queue.attachFirst(e,null):u.release()}),null)}function p(){n.removeEventListener?n.removeEventListener("click",d):n.detachEvent&&n.detachEvent("onclick",d)}u.getType=function(e){return"id"},u.getId=function(){return l},u.setId=function(e){l||(l=e,(s=bbs_dictionary.createEventHandlerForIdCounter(l)).setFunction((function(e){u.onchange(e)})))},u.setResponse=function(e){if(!r){r=e;var t=e.getEventDispatcher();(c=t.createEventHandler("release")).setFunction(u.release)}},u.getElement=function(){return n},u.getTextNode=function(){return a},u.setTextNode=function(e){a=e},u.update=function(){var e=bbs_dictionary.getCountId(l);u.onchange(e)},u.release=function(){u.onchange(0),s&&(s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(o.release(),o=null),i&&(AnalyzeWorkClearBbsControl(i),analyze_work_dictionary.removeAnalyzeWork(i),i=null),n&&(p(),t&&DomNodeRemove(n),n=null)},u.onchange=function(e){},function(){e?(n=e,e=null):((n=DocumentCreateElement("span")).style.cursor="pointer",n.title="remove"),n.addEventListener?n.addEventListener("click",d):n.attachEvent&&n.attachEvent("onclick",d),AnalyzeWorkSetBbsControl(i=AnalyzeWorkCreate(n),u),AnalyzeWorkSetInvalid(i);var a=new AnalyzeWorkDictionaryAttachOptions;t&&a.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(i,a),(o=new DomNodeObserverRemoveFromDocument(n)).setFunction(u.release),(_=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){u.release()}))}()}function BbsControlIdExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++){var i=analyze_work_dictionary.getAnalyzeWork(n[t]);if(i){var o=AnalyzeWorkGetBbsControl(i);if(o&&"id"==o.getType())return!0}}return!1}function BbsControlIdSearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"id"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlName(e,t){var n,a,i,o,r,l,s,c,_,u=this;function d(e){p();var t=bbs_dictionary.getResponsesFromName(l),n=t.length-1;execute_queue.attachFirst((function e(){t[n].erase(),--n>=0?execute_queue.attachFirst(e,null):u.release()}),null)}function p(){n.removeEventListener?n.removeEventListener("click",d):n.detachEvent&&n.detachEvent("onclick",d)}u.getType=function(e){return"name"},u.getName=function(){return l},u.setName=function(e){l||(l=e,(s=bbs_dictionary.createEventHandlerForNameCounter(l)).setFunction((function(e){u.onchange(e)})))},u.setResponse=function(e){if(!r){r=e;var t=e.getEventDispatcher();(c=t.createEventHandler("release")).setFunction(u.release)}},u.getElement=function(){return n},u.getTextNode=function(){return a},u.setTextNode=function(e){a=e},u.update=function(){var e=bbs_dictionary.getCountName(l);u.onchange(e)},u.release=function(){u.onchange(0),s&&(s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(o.release(),o=null),i&&(AnalyzeWorkClearBbsControl(i),analyze_work_dictionary.removeAnalyzeWork(i),i=null),n&&(p(),t&&DomNodeRemove(n),n=null)},u.onchange=function(e){},function(){e?(n=e,e=null):((n=DocumentCreateElement("span")).style.cursor="pointer",n.title="remove"),n.addEventListener?n.addEventListener("click",d):n.attachEvent&&n.attachEvent("onclick",d),AnalyzeWorkSetBbsControl(i=AnalyzeWorkCreate(n),u),AnalyzeWorkSetInvalid(i);var a=new AnalyzeWorkDictionaryAttachOptions;t&&a.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(i,a),(o=new DomNodeObserverRemoveFromDocument(n)).setFunction(u.release),(_=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){u.release()}))}()}function BbsControlNameExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++){var i=analyze_work_dictionary.getAnalyzeWork(n[t]);if(i){var o=AnalyzeWorkGetBbsControl(i);if(o&&"name"==o.getType())return!0}}return!1}function BbsControlNameSearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"name"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlHost(e,t){var n,a,i,o,r,l,s,c,_,u=this;function d(e){p();var t=bbs_dictionary.getResponsesFromHost(l),n=t.length-1;execute_queue.attachFirst((function e(){t[n].erase(),--n>=0?execute_queue.attachFirst(e,null):u.release()}),null)}function p(){n.removeEventListener?n.removeEventListener("click",d):n.detachEvent&&n.detachEvent("onclick",d)}u.getType=function(e){return"host"},u.getHost=function(){return l},u.setHost=function(e){l||(l=e,(s=bbs_dictionary.createEventHandlerForHostCounter(l)).setFunction((function(e){u.onchange(e)})))},u.setResponse=function(e){if(!r){r=e;var t=e.getEventDispatcher();(c=t.createEventHandler("release")).setFunction(u.release)}},u.getElement=function(){return n},u.getTextNode=function(){return a},u.setTextNode=function(e){a=e},u.update=function(){var e=bbs_dictionary.getCountHost(l);u.onchange(e)},u.release=function(){u.onchange(0),s&&(s.release(),s=null),c&&(c.release(),c=null),_&&(_.release(),_=null),o&&(o.release(),o=null),i&&(AnalyzeWorkClearBbsControl(i),analyze_work_dictionary.removeAnalyzeWork(i),i=null),n&&(p(),t&&DomNodeRemove(n),n=null)},u.onchange=function(e){},function(){e?(n=e,e=null):((n=DocumentCreateElement("span")).style.cursor="pointer",n.title="remove"),n.addEventListener?n.addEventListener("click",d):n.attachEvent&&n.attachEvent("onclick",d),AnalyzeWorkSetBbsControl(i=AnalyzeWorkCreate(n),u),AnalyzeWorkSetInvalid(i);var a=new AnalyzeWorkDictionaryAttachOptions;t&&a.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(i,a),(o=new DomNodeObserverRemoveFromDocument(n)).setFunction(u.release),(_=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){u.release()}))}()}function BbsControlHostExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++){var i=analyze_work_dictionary.getAnalyzeWork(n[t]);if(i){var o=AnalyzeWorkGetBbsControl(i);if(o&&"host"==o.getType())return!0}}return!1}function BbsControlHostSearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"host"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlFollower(e,t){var n,a,i,o,r,l,s,c,_=this;function u(e){d();var t=r.getFollower(),n=t.length-1;execute_queue.attachFirst((function e(){bbs_dictionary.getResponse(t[n].getNumber()).erase(),--n>=0?execute_queue.attachFirst(e,null):_.release()}),null)}function d(){n.removeEventListener?n.removeEventListener("click",u):n.detachEvent&&n.detachEvent("onclick",u)}_.getType=function(e){return"follower"},_.setResponse=function(e){if(!r){r=e,(l=bbs_dictionary.createEventHandlerForFollowerCounter(e.getNumber())).setFunction((function(e){_.onchange(e)}));var t=e.getEventDispatcher();(s=t.createEventHandler("release")).setFunction(_.release)}},_.getElement=function(){return n},_.getTextNode=function(){return a},_.setTextNode=function(e){a=e},_.update=function(){var e=r.getCountFollower();_.onchange(e)},_.release=function(){l&&(l.release(),l=null),s&&(s.release(),s=null),c&&(c.release(),c=null),o&&(o.release(),o=null),i&&(AnalyzeWorkClearBbsControl(i),analyze_work_dictionary.removeAnalyzeWork(i),i=null),n&&(d(),t&&DomNodeRemove(n),n=null)},_.onchange=function(e){},function(){e?(n=e,e=null):((n=DocumentCreateElement("span")).style.cursor="pointer",n.title="remove"),n.addEventListener?n.addEventListener("click",u):n.attachEvent&&n.attachEvent("onclick",u),AnalyzeWorkSetBbsControl(i=AnalyzeWorkCreate(n),_),AnalyzeWorkSetInvalid(i);var a=new AnalyzeWorkDictionaryAttachOptions;t&&a.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(i,a),(o=new DomNodeObserverRemoveFromDocument(n)).setFunction(_.release),(c=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){_.release()}))}()}function BbsControlFollowerExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++){var i=analyze_work_dictionary.getAnalyzeWork(n[t]);if(i){var o=AnalyzeWorkGetBbsControl(i);if(o&&"follower"==o.getType())return!0}}return!1}function BbsControlFollowerSearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"follower"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlReply(e,t){var n,a,i,o,r,l,s,c=this;function _(e){if(c.onclick&&c.onclick(e),!e.preventDefault)return!1;e.preventDefault()}c.getType=function(){return"reply"},c.setResponse=function(e){if(!r){r=e;var t=e.getEventDispatcher();(l=t.createEventHandler("release")).setFunction(c.release)}},c.getElement=function(){return n},c.getTextNode=function(){return a},c.setTextNode=function(e){a=e},c.release=function(){l&&(l.release(),l=null),s&&(s.release(),s=null),o&&(o.release(),o=null),i&&(AnalyzeWorkClearBbsControl(i),analyze_work_dictionary.removeAnalyzeWork(i),i=null),n&&(n.removeEventListener?n.removeEventListener("click",_):n.detachEvent&&n.detachEvent("onclick",_),t&&DomNodeRemove(n),n=null)},c.onclick=function(e){},function(){e?(n=e,e=null):((n=DocumentCreateElement("span")).style.cursor="pointer",n.title="reply"),n.addEventListener?n.addEventListener("click",_):n.attachEvent&&n.attachEvent("onclick",_),AnalyzeWorkSetBbsControl(i=AnalyzeWorkCreate(n),c),AnalyzeWorkSetInvalid(i);var a=new AnalyzeWorkDictionaryAttachOptions;t&&a.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(i,a),(o=new DomNodeObserverRemoveFromDocument(n)).setFunction(c.release),(s=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){c.release()}))}()}function BbsControlReplyExist(e){var t,n=ElementGetElementsByTagName(e,"*"),a=n.length;for(t=0;t<a;t++)if(BbsControlReplyEqual(n[t]))return!0;return!1}function BbsControlReplyEqual(e){var t=analyze_work_dictionary.getAnalyzeWork(e);if(t){var n=AnalyzeWorkGetBbsControl(t);if(n&&"reply"==n.getType())return!0}return!1}function BbsControlReplySearch(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*"),o=i.length;for(n=0;n<o;n++){var r=analyze_work_dictionary.getAnalyzeWork(i[n]);if(r){var l=AnalyzeWorkGetBbsControl(r);if(l&&"reply"==l.getType()&&(a=t(l)))return a}}return a}function BbsControlReadMoreButton(){var e,t,n,a,i,o,r,l,s,c,_,u,d,p,m,g,f=this;function h(e){if(input_mouse.setMouseEvent(e),4&MouseEventGetChangedButtons(e)){if(b(e),!e.preventDefault)return!1;e.preventDefault()}}function x(e){input_mouse.setMouseEvent(e),4&MouseEventGetChangedButtons(e)||b(e)}function b(i){f.onclick&&(t?s&&f.init():(i.ctrlKey||i.shiftKey||4&MouseEventGetChangedButtons(i)?(s=!0,e.style.color="#d00"):e.disabled=!0,t=task_container.createTask(),s?g()-n<o?t.setExecuteFunc(S):t.setExecuteFunc(A):g()-n<a?t.setExecuteFunc(E):t.setExecuteFunc(A)))}function v(){window.removeEventListener?window.removeEventListener("scroll",y):window.detachEvent&&window.detachEvent("onscroll",y)}function y(){v(),u=0,I()}function E(){t.setExecuteFunc(w),t.execute(4294967295)}function w(){var e=g()-n,i=Math.ceil((a-e)/1e3);i<0&&(i=0),k("wait ... "+i),e>a&&t.setExecuteFunc(A)}function S(){t.setExecuteFunc(C),t.execute(4294967295)}function C(){var e=g()-n,a=Math.ceil((o-e)/1e3);a<0&&(a=0),k("auto ... "+a),e>o&&t.setExecuteFunc(A)}function A(){k("loading..."),t.setExecuteFunc(null),f.onclick((function(e){if(s)if(e.result){if(e.add_count)o*=.5,u+=e.add_count,I(),v(),window.addEventListener?window.addEventListener("scroll",y):window.attachEvent&&window.attachEvent("onscroll",y);else{var a=.5*o;a<5e3&&(a=5e3),o+=a}(o=1e3*Math.ceil(o/1e3))>l&&(o=l),o<r&&(o=r),n=g(),t.setExecuteFunc(S)}else f.init();else f.init()}))}function k(t){t!=c&&(e.value=c=t)}function I(){try{var e=document.title,t=e.match(new RegExp("\\([0-9]+\\) (.*)","i"));t?_!=t[1]&&(_=t[1]):_=e,document.title=u?"("+u+") "+_:_}catch(e){}}f.getType=function(e){return"read_more"},f.release=function(){m&&(m.release(),m=null),p&&(p.release(),p=null),v(),d&&(AnalyzeWorkClearBbsControl(d),analyze_work_dictionary.removeAnalyzeWork(d),d=null),e&&(e.removeEventListener?(e.removeEventListener("mousedown",h),e.removeEventListener("click",x)):e.detachEvent&&(e.detachEvent("onmousedown",h),e.detachEvent("onclick",x)),DomNodeRemove(e),e=null)},f.getElement=function(){return e},f.setWaitTime=function(e){a=e},f.init=function(){s=!1,k("Read More"),e.style.color="#000",e.disabled=!1,n=g(),o=i,t&&(t.release(),t=null),y()},function(){f.onclick=null,n=0,a=5e3,i=1e4,r=5e3,l=6e4,c="",u=0,_="",(e=DocumentCreateElement("input")).type="button",ElementSetStyle(e,CSSTextGetInitialButtonElement()),ElementAddStyle(e,"width:100%; height:50px; margin:25px 0px; padding:0px;"),e.addEventListener?(e.addEventListener("mousedown",h),e.addEventListener("click",x)):e.attachEvent&&(e.attachEvent("onmousedown",h),e.attachEvent("onclick",x)),AnalyzeWorkSetBbsControl(d=AnalyzeWorkCreate(e),f),AnalyzeWorkSetInvalid(d);var t=new AnalyzeWorkDictionaryAttachOptions;t.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(d,t),(p=new DomNodeObserverRemoveFromDocument(e)).setFunction(f.release),(m=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){f.release()})),(g=Date.now)||(g=function(){return(new Date).getTime()}),f.init()}()}function BbsControlPopupIframe(e){var t,n,a,i,o,r,l,s,c,_,u,d,p=this;function m(){i.src="",window.removeEventListener?(window.removeEventListener("scroll",f),window.removeEventListener("resize",f)):window.detachEvent&&(window.detachEvent("onscroll",f),window.detachEvent("onresize",f)),l&&(l.release(),l=null),t.style.pointerEvents="none"}function g(){DomNodeRemove(t),r&&(r.release(),r=null),u&&(analyze_work_dictionary.removeAnalyzeWork(u),u=null),s&&(s.releaseChild(),s.release(),s=null)}function f(){var e=WindowGetScrollPosition(window),t=DocumentGetClientSize(document),n=ElementGetBoundingClientRect(a),i=n.right-n.left,o=n.bottom-n.top;a.style.left=t.width/2-i/2+e.x+"px",t.height>o?(a.style.top=t.height/2-o/2+e.y+"px",d=!1):d||(a.style.top=e.y+"px",d=!0)}p.release=function(){m(),g()},p.close=function(){m(),c&&(c.release(),c=null),(c=task_container.createTask()).setDestructorFunc((function(){c=null})),c.setExecuteFunc((function(){(_-=.2)<0&&(_=0,c.release(),g()),t.style.opacity=_})),c.execute(4294967295)},p.getIFrameElement=function(){return i},p.setWindowSize=function(e,t){a.style.width=e+"px",i.style.height=t+"px",f()},p.onclose=function(){},function(){ElementSetStyle(t=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementSetStyle(n=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(n,"position:fixed; top:0px; bottom:0px; left:0px; right:0px; opacity:0.5; background:#000; line-height:1.0; z-index:2147483646; pointer-events:inherit;"),t.appendChild(n),ElementSetStyle(a=DocumentCreateElement("div"),CSSTextGetInitialDivElement()),ElementAddStyle(a,"position:absolute; width:600px; padding:25px; background:#00F; background-color:#FFF; border-radius:5px; box-shadow:5px 5px 10px #444; z-index:2147483646; pointer-events:inherit;"),t.appendChild(a),(i=DocumentCreateElement("iframe")).name=e,ElementSetStyle(i,"width:100%; height:400px; margin-bottom:20px; padding:0px; background:#f8f8f8; pointer-events:inherit;"),a.appendChild(i),(o=DocumentCreateElement("input")).type="button",o.value="CANCEL",ElementSetStyle(o,CSSTextGetInitialButtonElement()),ElementAddStyle(o,"width:100%; height:50px; pointer-events:inherit;"),a.appendChild(o),o.onclick=function(){p.onclose&&p.onclose(),p.close()},AnalyzeWorkSetInvalid(u=AnalyzeWorkCreate(t));var d=new AnalyzeWorkDictionaryAttachOptions;d.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(u,d),document.body.appendChild(t),window.addEventListener?(window.addEventListener("scroll",f),window.addEventListener("resize",f)):window.attachEvent&&(window.attachEvent("onscroll",f),window.attachEvent("onresize",f)),p.setWindowSize(640,480),(r=new DomNodeObserverRemoveFromDocument(t)).setFunction(p.release),(l=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){p.release()})),(s=task_container.createTask()).setDestructorFunc((function(){s=null})),_=0,(c=task_container.createTask(s)).setDestructorFunc((function(){c=null})),c.setExecuteFunc((function(){(_+=.2)>1&&(_=1,c.release()),t.style.opacity=_})),c.execute(4294967295)}()}function BbsControlDockingForm(e,t){var n,a,i,o,r,l,s,c,_,u,d,p,m,g,f=this;function h(e){f.onreset&&f.onreset()}function x(e){var t=e.target||e.srcElement;if(!u[t.tagName]){input_mouse.setMouseEvent(e);var a=ElementGetBoundingClientRect(n);if(r={x:e.clientX-a.left,y:e.clientY-a.top},d&&(d.release(),d=null),(d=task_container.createTask()).setDestructorFunc((function(){d=null})),d.setExecuteFunc(y),d.execute(4294967295),4&MouseEventGetChangedButtons(e)&&(k("original"),h()),!e.preventDefault)return!1;e.preventDefault()}}function b(e){if(input_mouse.setMouseEvent(e),d&&(d.release(),d=null),(d=task_container.createTask()).setDestructorFunc((function(){d=null})),d.setExecuteFunc((function(){var e=0,t=input_mouse.getPositionClient(),n=DocumentGetClientSize(document);switch(l){case"left":e=t.x;break;case"top":e=t.y;break;case"right":e=n.width-t.x;break;case"bottom":e=n.height-t.y}I(e),input_mouse.getButtonLeft()||d.release()})),d.execute(4294967295),!e.preventDefault)return!1;e.preventDefault()}function v(e){var t=e.target||e.srcElement;if(!u[t.tagName])switch(input_mouse.setMouseEvent(e),l){case"original":var a=ElementGetBoundingClientRect(n);r={x:e.clientX-a.left,y:e.clientY-a.top},k("popup");var i=ObjectCopy(input_mouse.getPositionClient()),o=n.style,s=i.x-r.x,d=i.y-r.y;o.left=s+"px",o.top=d+"px";break;case"popup":k("original"),h();break;default:I(c?0:_)}}function y(e){e.getUserWork().exec=w,d.setExecuteFunc(E),d.execute(4294967295)}function E(e){var t=e.getUserWork();t.exec&&t.exec(e),input_mouse.getButtonLeft()||e.release()}function w(e){var t=e.getUserWork();t.mouse_pos_start=input_mouse.getPositionClient(),t.exec=S,t.exec(e)}function S(e){var t=e.getUserWork(),n=input_mouse.getPositionClient(),a=n.x-t.mouse_pos_start.x,i=n.y-t.mouse_pos_start.y;Math.sqrt(a*a+i*i)>5&&(t.exec=C)}function C(e){var t=e.getUserWork();t.exec=A,t.exec(e)}function A(e){e.getUserWork();var t=ObjectCopy(input_mouse.getPositionClient()),a=DocumentGetClientSize(document);if(t.x<10?k("left"):t.y<10?k("top"):t.x>a.width-10?k("right"):t.y>a.height-10?k("bottom"):k("popup"),"popup"==l){var i=n.style,o=t.x-r.x,s=t.y-r.y;i.left=o+"px",i.top=s+"px"}}function k(e){if(l!=e){var t=n.style,c=document.documentElement.style,_=a.style;switch(l){case"left":c.marginLeft="0px";break;case"top":c.marginTop="0px";break;case"right":c.marginRight="0px";break;case"bottom":c.paddingBottom="0px"}l=e,s=0,DomNodeRemove(a),t.cssText=i,t.position="fixed",t.left="0px",t.top="0px",t.right="auto",t.bottom="auto",t.width="auto",t.height="auto";var u=ElementGetBoundingClientRect(n);r.x<2&&(r.x=2),r.y<2&&(r.y=2),r.x>u.right-2&&(r.x=u.right-2),r.y>u.bottom-2&&(r.y=u.bottom-2);var d=DocumentGetClientSize(document),p=.5*d.width,m=.5*d.height,g=u.right-u.left,f=u.bottom-u.top;if(g>p&&(g=p),f>m&&(f=m),"original"===e)t.cssText=o;else if(t.cssText=i,t.position="fixed",t.zIndex=2147483645,t.width="auto",t.height="auto","popup"===e);else t.overflow="auto",_.cssText="position:fixed;",_.zIndex=2147483645,document.body.appendChild(a);switch(t.cursor="move",e){case"left":t.left="0px",_.left="0px";break;case"right":t.right="0px",_.right="0px";break;case"top":t.top="0px",_.top="0px";break;case"bottom":t.bottom="0px",_.bottom="0px"}switch(l){case"left":case"right":t.top="0px",t.bottom="0px",_.cursor="col-resize",_.top="0px",_.bottom="0px",_.width="6px",I(g);break;case"top":case"bottom":t.left="0px",t.right="0px",_.cursor="row-resize",_.left="0px",_.right="0px",_.height="6px",I(f)}}}function I(e){var t=n.style,i=document.documentElement.style,o=a.style,r=ComputedStyleGetSize(ElementGetComputedStyle(n,""));switch(l){case"left":case"right":(d=e-r.paddingLeft-r.paddingRight-r.borderLeft-r.borderRight)<0&&(d=0),t.width=d+"px";break;case"top":case"bottom":(p=e-r.paddingTop-r.paddingBottom-r.borderTop-r.borderBottom)<0&&(p=0),t.height=p+"px"}c=!0;var u=ElementGetBoundingClientRect(n);switch(l){case"left":case"right":var d;e<(d=u.right-u.left)&&(c=!1,e=d);break;case"top":case"bottom":var p;e<(p=u.bottom-u.top)&&(c=!1,e=p)}var m=e-3;switch(l){case"left":o.marginLeft=m+"px";break;case"top":o.marginTop=m+"px";break;case"right":o.marginRight=m+"px";break;case"bottom":o.marginBottom=m+"px"}m=e+10;var g=e-s,f=WindowGetScrollPosition(window);switch(l){case"left":i.marginLeft=m+"px";break;case"top":i.marginTop=m+"px";break;case"right":i.marginRight=m+"px",WindowSetScrollPositionX(window,f.x+g);break;case"bottom":i.paddingBottom=m+"px",WindowSetScrollPositionY(window,f.y+g)}s=e,c&&(_=e)}f.setStyle=function(e){i=e},f.getElement=function(){return n},f.onreset=function(e){},f.release=function(){k("original"),d&&(d.release(),d=null),g&&(g.release(),g=null),m&&(m.release(),m=null),p&&(AnalyzeWorkClearBbsControl(p),analyze_work_dictionary.removeAnalyzeWork(p),p=null),n&&(n.removeEventListener?(n.removeEventListener("mousedown",x),n.removeEventListener("dblclick",v),a.removeEventListener("mousedown",b)):n.detachEvent&&(n.detachEvent("onmousedown",x),n.detachEvent("ondblclick",v),a.detachEvent("onmousedown",b)),t&&DomNodeRemove(n),n=null),DomNodeRemove(a)},f.popupForReply=function(e){if("original"===l){k("popup");var t,a=DocumentGetClientSize(document);if(e&&DomNodeGetAttachedDocument(e)&&(t=ElementGetBoundingClientRect(e)),!t){var i=ObjectCopy(input_mouse.getPositionClient());t={left:i.x,right:i.x,top:i.y,bottom:i.y}}t.left=Math.ceil(t.left),t.top=Math.ceil(t.top),t.right=Math.floor(t.right),t.bottom=Math.floor(t.bottom);var o,r,s=ElementGetBoundingClientRect(n),c=.5*(t.left+t.right),_=.5*(t.top+t.bottom);o=c/a.width<.5?t.left-s.left:t.right-s.right,r=_/a.height<.5?t.bottom-s.top:t.top-s.bottom,s.left+=o,s.right+=o,s.top+=r,s.bottom+=r;var u={x:s.left,y:s.top};a.width<s.right+1&&(u.x+=a.width-1-s.right),a.height<s.bottom+1&&(u.y+=a.height-1-s.bottom),u.x<1&&(u.x=1),u.y<1&&(u.y=1);var d=n.style;d.left=u.x+"px",d.top=u.y+"px"}},function(){e?(n=e,e=null):n=DocumentCreateElement("div"),a=DocumentCreateElement("div"),o=n.style.cssText,r={x:0,y:0},l="",s=0,c=!1,_=0,u={INPUT:!0,BUTTON:!0,TEXTAREA:!0,SELECT:!0,FIELDSET:!0,KEYGEN:!0,OBJECT:!0,EMBED:!0,CANVAS:!0},n.addEventListener?(n.addEventListener("mousedown",x),n.addEventListener("dblclick",v),a.addEventListener("mousedown",b)):n.attachEvent&&(n.attachEvent("onmousedown",x),n.attachEvent("ondblclick",v),a.attachEvent("onmousedown",b)),AnalyzeWorkSetInvalid(p=AnalyzeWorkCreate(n));var i=new AnalyzeWorkDictionaryAttachOptions;t&&i.SetOutsider(),analyze_work_dictionary.attachAnalyzeWork(p,i),(m=new DomNodeObserverRemoveFromDocument(n)).setFunction(f.release),(g=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){f.release()})),k("original")}()}function BbsControlSearchTrash(e,t){var n,a=null,i=ElementGetElementsByTagName(e,"*");for(n=i.length-1;n>=0;n--)if(analyze_work_dictionary.verifyRemoved(i[n])&&(a=t(i[n])))return a;return a}function ResponseAnchorNumbers(){var e,t=this;t.addNumber=function(t){for(var n,a,i=e.n;i!=e&&!(i.num>=t);)i=i.n;if(i!=e&&i.num==t);else{var o={num:t,d:0};n=(a=i).p,o.p=n,o.n=a,n.n=o,a.p=o}},t.addNumbers=function(t,n){if(t>n){var a=n;n=t,t=a}for(var i,o,r=e.n;r!=e&&!(r.num>=t);)r=r.n;if(r!=e&&r.num==t)r.d+=1;else{var l={num:t,d:1};i=(o=r).p,l.p=i,l.n=o,i.n=l,o.p=l,r=l}for(;r!=e&&!(r.num>=n);)r=r.n;if(r!=e&&r.num==n)r.d-=1;else{var s={num:n,d:-1};i=(o=r).p,s.p=i,s.n=o,i.n=s,o.p=s}},t.getNumbers=function(t){for(var n=0,a=0,i=0,o=e.n;o!=e;){if(0==(n+=o.d))t(o.num);else if(n>0){for(a=o.num,o=o.n;o!=e;){if(0==(n+=o.d)){i=o.num+1;break}o=o.n}var r;for(r=a;r<i;r++)t(r)}o=o.n}},t.getNumberList=function(){for(var t=new Array,n=0,a=0,i=0,o=e.n;o!=e;){if(0==(n+=o.d))t.push(o.num);else if(n>0){for(a=o.num,o=o.n;o!=e;){if(0==(n+=o.d)){i=o.num+1;break}o=o.n}var r;for(r=a;r<i;r++)t.push(r)}o=o.n}return t},t.getCount=function(){for(var t=0,n=0,a=0,i=0,o=e.n;o!=e;){if(0==(n+=o.d))t+=1;else if(n>0){for(a=o.num,o=o.n;o!=e;){if(0==(n+=o.d)){i=o.num+1;break}o=o.n}t+=i-a}o=o.n}return t},(e=new Object).p=e,e.n=e}function UserAgentGetInternetExplorer(){return-1==window.navigator.userAgent.indexOf("Sleipnir")&&-1!=window.navigator.userAgent.indexOf("MSIE")}function UserAgentGetFirefox(){return-1!=window.navigator.userAgent.indexOf("Firefox")}function UserAgentGetGoogleChrome(){return-1!=window.navigator.userAgent.indexOf("Chrome")}function UserAgentGetOpera(){return-1!=window.navigator.userAgent.indexOf("Opera")}function UserAgentGetSafari(){return-1==window.navigator.userAgent.indexOf("Chrome")&&-1!=window.navigator.userAgent.indexOf("Safari")}function UserAgentGetSleipnir(){return-1!=window.navigator.userAgent.indexOf("Sleipnir")}function NavigatorGetBrowserLanguage(){try{return(window.navigator.browserLanguage||window.navigator.language||window.navigator.userLanguage).substr(0,2)}catch(e){return}}function ConsoleLog(e){try{console.log(e)}catch(e){}}function ConsoleError(e){try{console.error(e)}catch(e){}}function PromiseCreate(e){try{return new Promise(e)}catch(e){}var t,n,a,i,o,r=!1,l=new Object;l.then=function(e,t){n=e,a=t,s()};var s=function(){if(r)if(t){if(!n)return;n(i)}else{if(!a)return;a(o)}};return e((function(e){r=!0,t=!0,i=e,s()}),(function(e){r=!0,t=!1,o=e,s()})),l}function DOMParserCreateFromString(e){if(window.DOMParser)return(new DOMParser).parseFromString(e,"application/xml");try{var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}catch(e){}return null}function MutationObserverSupported(){try{if(window.MutationObserver||window.WebKitMutationObserver)return!0}catch(e){}return!1}function MutationObserverCreate(e){try{return new(window.MutationObserver||window.WebKitMutationObserver)(e)}catch(e){}return null}function JSONSupported(){try{if(JSON)return!0}catch(e){}return!1}function JsonStringify(e){return JSONSupported()?JSON.stringify(e):""}function JsonParse(str){return JSONSupported()?JSON.parse(str):eval("("+str+")")}function Base64_From_ArrayBuffer_Async(e,t,n){var a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i=[],o=new Uint8Array(e),r=o.length,l=0,s=0;"object"!=typeof n&&(n={});var c=n.increment||1024,_=n.onprogress||null,u=0,d=0;execute_queue.attachFirst((function e(){for(;u<r&&(s=o[u],i.push(a[s>>2]),l=(3&s)<<4,!(++u>=r))&&(s=o[u],i.push(a[l|s>>4]),l=(15&s)<<2,!(++u>=r));)if(s=o[u],i.push(a[l|s>>6]),i.push(a[63&s]),u++,(d+=3)>c)return d=0,_&&_({loaded:u,total:r}),void execute_queue.attachFirst(e,null);var n=r%3;n&&i.push(a[l]),1==n?i.push("=="):2==n&&i.push("="),t(i.join(""))}),null)}function Base64_From_XUserDefined_Async(e,t,n){var a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i=[],o=e.length,r=0,l=0;"object"!=typeof n&&(n={});var s=n.increment||1024,c=n.onprogress||null,_=0,u=0;execute_queue.attachFirst((function n(){for(;_<o&&(l=255&e.charCodeAt(_),i.push(a[l>>2]),r=(3&l)<<4,!(++_>=o))&&(l=255&e.charCodeAt(_),i.push(a[r|l>>4]),r=(15&l)<<2,!(++_>=o));)if(l=255&e.charCodeAt(_),i.push(a[r|l>>6]),i.push(a[63&l]),_++,(u+=3)>s)return u=0,c&&c({loaded:_,total:o}),void execute_queue.attachFirst(n,null);var d=o%3;d&&i.push(a[r]),1==d?i.push("=="):2==d&&i.push("="),t(i.join(""))}),null)}function Base64_To_ArrayBuffer(e){var t=new Object;t[65]=0,t[66]=1,t[67]=2,t[68]=3,t[69]=4,t[70]=5,t[71]=6,t[72]=7,t[73]=8,t[74]=9,t[75]=10,t[76]=11,t[77]=12,t[78]=13,t[79]=14,t[80]=15,t[81]=16,t[82]=17,t[83]=18,t[84]=19,t[85]=20,t[86]=21,t[87]=22,t[88]=23,t[89]=24,t[90]=25,t[97]=26,t[98]=27,t[99]=28,t[100]=29,t[101]=30,t[102]=31,t[103]=32,t[104]=33,t[105]=34,t[106]=35,t[107]=36,t[108]=37,t[109]=38,t[110]=39,t[111]=40,t[112]=41,t[113]=42,t[114]=43,t[115]=44,t[116]=45,t[117]=46,t[118]=47,t[119]=48,t[120]=49,t[121]=50,t[122]=51,t[48]=52,t[49]=53,t[50]=54,t[51]=55,t[52]=56,t[53]=57,t[54]=58,t[55]=59,t[56]=60,t[57]=61,t[43]=62,t[47]=63;var n,a=e.length,i=0,o=0;switch(n=3*Math.ceil(a/4),a%4){case 0:"="==e.charAt(a-1)&&(n-=1),"="==e.charAt(a-2)&&(n-=1);break;case 2:n-=2;break;case 3:n-=1;break;case 1:return null}for(var r=new ArrayBuffer(n),l=new Uint8Array(r),s=0,c=0;c<n;){if(void 0===(o=t[e.charCodeAt(s)]))return null;if(i=o<<2,s++,void 0===(o=t[e.charCodeAt(s)]))return null;if(l[c]=i|o>>4&3,i=(15&o)<<4,s++,++c>=n)break;if(void 0===(o=t[e.charCodeAt(s)]))return null;if(l[c]=i|o>>2&15,i=(3&o)<<6,s++,++c>=n)break;if(void 0===(o=t[e.charCodeAt(s)]))return null;l[c]=i|o,s++,c++}return r}function Base64_To_ArrayBuffer_Async(e,t,n){var a=new Object;a[65]=0,a[66]=1,a[67]=2,a[68]=3,a[69]=4,a[70]=5,a[71]=6,a[72]=7,a[73]=8,a[74]=9,a[75]=10,a[76]=11,a[77]=12,a[78]=13,a[79]=14,a[80]=15,a[81]=16,a[82]=17,a[83]=18,a[84]=19,a[85]=20,a[86]=21,a[87]=22,a[88]=23,a[89]=24,a[90]=25,a[97]=26,a[98]=27,a[99]=28,a[100]=29,a[101]=30,a[102]=31,a[103]=32,a[104]=33,a[105]=34,a[106]=35,a[107]=36,a[108]=37,a[109]=38,a[110]=39,a[111]=40,a[112]=41,a[113]=42,a[114]=43,a[115]=44,a[116]=45,a[117]=46,a[118]=47,a[119]=48,a[120]=49,a[121]=50,a[122]=51,a[48]=52,a[49]=53,a[50]=54,a[51]=55,a[52]=56,a[53]=57,a[54]=58,a[55]=59,a[56]=60,a[57]=61,a[43]=62,a[47]=63;var i,o=e.length,r=0,l=0;"object"!=typeof n&&(n={});var s=n.increment||1024;n.onprogress;switch(i=3*Math.ceil(o/4),o%4){case 0:"="==e.charAt(o-1)&&(i-=1),"="==e.charAt(o-2)&&(i-=1);break;case 2:i-=2;break;case 3:i-=1;break;case 1:return void t(null)}var c=new ArrayBuffer(i),_=new Uint8Array(c),u=0,d=0,p=0;execute_queue.attachFirst((function n(){for(;p<i;){if(void 0===(l=a[e.charCodeAt(u)]))return void t(null);if(r=l<<2,u++,void 0===(l=a[e.charCodeAt(u)]))return void t(null);if(_[p]=r|l>>4&3,r=(15&l)<<4,u++,++p>=i)break;if(void 0===(l=a[e.charCodeAt(u)]))return void t(null);if(_[p]=r|l>>2&15,r=(3&l)<<6,u++,++p>=i)break;if(void 0===(l=a[e.charCodeAt(u)]))return void t(null);if(_[p]=r|l,u++,p++,(d+=4)>s)return d=0,void execute_queue.attachFirst(n,null)}t(c)}),null)}function BlobURLCreate(e){var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):null}function BlobURLRevoke(e){var t=window.URL||window.webkitURL;if(t)return t.revokeObjectURL(e)}function CRC32(){var e,t;this.initialize=function(){e=4294967295,t=0},this.setPosition=function(e){t=e},this.getFromArrayBuffer=function(a,i){var o,r=new Uint8Array(a,t,i);for(o=0;o<i;o++)e=n[255&(e^r[o])]^e>>>8;return t+=i,(4294967295^e)>>>0},this.getFromStringOfBinaryData=function(a,i){for(i+=t;t<i;)e=n[255&(e^255&a.charCodeAt(t))]^e>>>8,t++;return(4294967295^e)>>>0},this.getFromString=function(a,i){for(i+=t;t<i;){var o=a.charCodeAt(t);e=n[255&(e^o>>>8&255)]^e>>>8,e=n[255&(e^o>>>0&255)]^e>>>8,t++}return(4294967295^e)>>>0};var n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];this.initialize()}var MIMEType_To_Ext=(dic={image:{png:"png",bmp:"bmp",gif:"gif",jpg:"jpg",jpeg:"jpeg","svg+xml":"svg",tiff:"tiff",webp:"webp","vnd.microsoft.icon":"ico"},audio:{aac:"aac",midi:"mid","x-midi":"mid",mpeg:"mp3",ogg:"oga",wav:"wav",webm:"weba"},video:{"x-msvideo":"avi",mpeg:"mpeg",ogg:"ogv",mp2t:"ts",webm:"webm",mp4:"mp4"},text:{css:"css",csv:"csv",html:"html",javascript:"js",plain:"txt"},application:{"octet-stream":"bin","x-bzip":"bz","x-bzip2":"bz2",gzip:"gz",json:"json","x-httpd-php":"php","vnd.rar":"rar",rtf:"rtf","x-tar":"tar",xml:"xml",zip:"zip","x-7z-compressed":"7z"}},function(e){var t,n,a=(e||"").match(/(.*)[/](.*)/);if(!a)return"";t=a[1].toLowerCase(),n=a[2].toLowerCase();var i=dic[t];return i&&i[n]||""}),dic,MIMEType_From_Ext=function(){var e={png:"image/png",bmp:"image/bmp",gif:"image/gif",jpg:"image/jpg",jpeg:"image/jpeg",svg:"image/svg+xml",tiff:"image/tiff",webp:"image/webp",ico:"image/vnd.microsoft.icon",aac:"audio/aac",mid:"audio/midi",mp3:"audio/mpeg",oga:"audio/ogg",wav:"audio/wav",weba:"audio/webm",avi:"video/x-msvideo",mpeg:"video/mpeg",ogv:"video/ogg",ts:"video/mp2t",webm:"video/webm",mp4:"video/mp4",css:"text/css",csv:"text/csv",html:"text/html",js:"text/javascript",txt:"text/plain",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",gz:"application/gzip",json:"application/json",php:"application/x-httpd-php",rar:"application/vnd.rar",rtf:"application/rtf",tar:"application/x-tar",xml:"application/xml",zip:"application/zip","7z":"application/x-7z-compressed"};return function(t){return e[(t||"").toLowerCase()]||""}}();function FileSignature_To_Ext_From_ArrayBuffer(e){var t=new DataView(e),n=e.byteLength;if(n<2)return"";switch(t.getUint16(0,!1)){case 16973:return"bmp";case 65496:return"jpg"}return n<4?"":t.getUint32(0,!1)>>>8==4671814?"gif":1380533830===t.getUint32(0,!1)?"webp":n<8?"":2303741511==t.getUint32(0,!1)&&218765834==t.getUint32(4,!1)?"png":""}function String_To_ArrayBuffer_As_UTF8(e){var t,n=new Array,a=0;for(t=0,s=e.length;t<s;){var i=e.charCodeAt(t);if(t+=1,55296==(64512&i)){var o=e.charCodeAt(t)||0;56320==(64512&o)&&(i=65536+(i-55296<<10|o-56320&1023),t+=1)}a+=i<128?1:i<2048?2:i<65536?3:i<2097152?4:i<67108864?5:6,n.push(i)}var r,l=new Uint8Array(a);t=0;var s=n.length;for(r=0;r<s;r++){var c=n[r];c<128?(l[t]=(127&c)>>>0,t+=1):c<2048?(l[t]=(1984&c)>>>6|192,l[t+=1]=(63&c)>>>0|128,t+=1):c<65536?(l[t]=(61440&c)>>>12|224,l[t+=1]=(4032&c)>>>6|128,l[t+=1]=(63&c)>>>0|128,t+=1):c<2097152?(l[t]=(1835008&c)>>>18|240,l[t+=1]=(258048&c)>>>12|128,l[t+=1]=(4032&c)>>>6|128,l[t+=1]=(63&c)>>>0|128,t+=1):c<67108864?(l[t]=(50331648&c)>>>24|248,l[t+=1]=(16515072&c)>>>18|128,l[t+=1]=(258048&c)>>>12|128,l[t+=1]=(4032&c)>>>6|128,l[t+=1]=(63&c)>>>0|128,t+=1):(l[t]=(1073741824&c)>>>30|252,l[t+=1]=(1056964608&c)>>>24|128,l[t+=1]=(16515072&c)>>>18|128,l[t+=1]=(258048&c)>>>12|128,l[t+=1]=(4032&c)>>>6|128,l[t+=1]=(63&c)>>>0|128,t+=1)}return l.buffer}function String_From_ArrayBuffer_As_UTF8(e){for(var t,n=new Array,a=new Uint8Array(e),i=a.byteLength,o=0;o<i;)if(128==(192&a[o+0]))o+=1;else if(128&a[o+0])if(192==(224&a[o+0]))t=(28&a[o+0])>>2<<8|(3&a[o+0])<<6|63&a[o+1],n.push(String.fromCharCode(t)),o+=2;else if(224==(240&a[o+0]))t=((15&a[o+0])<<4|(60&a[o+1])>>2)<<8|(3&a[o+1])<<6|63&a[o+2],n.push(String.fromCharCode(t)),o+=3;else if(240==(248&a[o+0]))t=((7&a[o+0])<<2|(48&a[o+1])>>4)<<16|((15&a[o+1])<<4|(60&a[o+2])>>2)<<8|(3&a[o+2])<<6|63&a[o+3],n.push(String.fromCharCode(55296+(t-65536>>>10),56320+(t-65536&1023))),o+=4;else if(248==(252&a[o+0]))t=(3&a[o+0])<<24|((63&a[o+1])<<2|(48&a[o+2])>>4)<<16|((15&a[o+2])<<4|(60&a[o+3])>>2)<<8|(3&a[o+3])<<6|63&a[o+4],n.push(String.fromCodePoint(t)),o+=5;else{if(252!=(254&a[o+0]))break;t=((1&a[o+0])<<6|63&a[o+1])<<24|((63&a[o+2])<<2|(48&a[o+3])>>4)<<16|((15&a[o+3])<<4|(60&a[o+4])>>2)<<8|(3&a[o+4])<<6|63&a[o+5],n.push(String.fromCodePoint(t)),o+=6}else t=127&a[o+0],n.push(String.fromCharCode(t)),o+=1;return n.join("")}function ResponseHeadersParser(e){var t=this,n=new Object;!function(){var a,i=e.replace(/\r\n?/g,"\n").split("\n"),o=0,r=i.length;for(a=0;a<r;a++){var l=i[a].match(new RegExp("^(.*):[ ](.*)$","i"));l&&(t[o]=l[1],t[l[1]]=l[2],n[l[1].toLowerCase()]=l[2],o+=1)}t.length=o}(),t.getResponseHeader=function(e){return n[e.toLowerCase()]||""}}function GM_downloadSupported(){try{if(GM_download)return!0}catch(e){}return!1}function GMW_openInTab(e,t){try{if(GM.openInTab)return void GM.openInTab(e,t)}catch(e){}try{if(GM_openInTab)return void GM_openInTab(e,t)}catch(e){}}function GMW_XMLHttpRequest(){var e,t,n=this;function a(e){if(n.readyState=e.readyState,n.status=e.status||0,e.responseHeaders&&(t||(n.responseHeaders=e.responseHeaders,t=new ResponseHeadersParser(e.responseHeaders))),4==e.readyState){try{n.responseText=e.responseText}catch(e){}try{n.response=e.response}catch(e){}n.responseURL=e.finalUrl}n.onreadystatechange&&n.onreadystatechange(n),4==n.readyState&&(n.onreadystatechange=null)}n.setRequestHeader=function(t,n){e.headers[t]=n},n.overrideMimeType=function(t){e.overrideMimeType=t},n.getResponseHeader=function(e){return t?t.getResponseHeader(e):""},n.getAllResponseHeaders=function(){return n.responseHeaders},n.open=function(t,n){e.method=t,e.url=n},n.send=function(t){e.data=t,e.onprogress=function(e){n.onprogress&&n.onprogress(e)},e.onreadystatechange=function(e){a(e)},e.onerror=function(e){a(e)},n.timeout&&(e.timeout=n.timeout),n.responseType&&(e.responseType=n.responseType);try{return void GM.xmlHttpRequest(e)}catch(e){}try{return void GM_xmlhttpRequest(e)}catch(e){}a({readyState:4,status:0})},n.onreadystatechange=function(){},n.onprogress=function(e){},(e=new Object).headers=new Object,n.readyState=0,n.status=0,n.responseHeaders=null,n.responseText="",n.responseType=""}function GMW_LocalStorage(){var e=this;e.setItem=function(e,t){try{if(GM.setValue)return GM.setValue(e,t)}catch(e){}try{if(GM_setValue)return PromiseCreate((function(n,a){GM_setValue(e,t),n()}))}catch(e){}return PromiseCreate((function(e,t){t()}))},e.getItem=function(e){try{if(GM.getValue)return GM.getValue(e)}catch(e){}try{if(GM_getValue)return PromiseCreate((function(t,n){t(GM_getValue(e))}))}catch(e){}return PromiseCreate((function(e,t){t()}))},e.removeItem=function(e){try{if(GM.deleteValue)return GM.deleteValue(e)}catch(e){}try{if(GM_deleteValue)return PromiseCreate((function(t,n){t(GM_deleteValue(e))}))}catch(e){}return PromiseCreate((function(e,t){t()}))}}function GMW_MenuCommand(){var e;this.release=function(){var t;for(t=e.length-1;t>=0;t--){e[t];delete e[t]}},this.addItem=function(t,n,a){var i=0;a&&(i=a.toLocaleUpperCase().charCodeAt(0)||0);var o={caption:t,callback:n,key_code:i};e.push(o);try{return void(o.id=GM.registerMenuCommand(t,n,a))}catch(e){}try{return void(o.id=GM_registerMenuCommand(t,n,a))}catch(e){}},e=new Array}function LocalStorageGetItem(e,t){GMW_LocalStorage.isSupported()?(new GMW_LocalStorage).getItem(e).then((function(e){t({result:!0,value:e})}),(function(e){t({result:!1,message:e})})):t({result:!1,message:"Do not support storage."})}function LocalStorageSetItem(e,t,n){var a=new Object;GMW_LocalStorage.isSupported()?(new GMW_LocalStorage).setItem(e,t).then((function(e){n({result:!0,value:e})}),(function(e){n({result:!1,message:e})})):(a.result=!1,a.message="Do not support storage.");n(a)}function LocalStorageRemoveItem(e,t){var n=new Object;GMW_LocalStorage.isSupported()?(new GMW_LocalStorage).removeItem(e).then((function(e){t({result:!0,value:e})}),(function(e){t({result:!1,message:e})})):(n.result=!1,n.message="Do not support storage.");t(n)}function SyncStorageGetItem(e,t){}function SyncStorageSetItem(e,t,n){}function SyncStorageRemoveItem(e,t){}function StringConvertFromAlphabeticFullToAlphabeticHalf(e){var t;return t=new RegExp("[ａ-ｚＡ-Ｚ]","g"),e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))}function StringConvertFromAlphabeticHalfToAlphabeticFull(e){var t;return t=new RegExp("[a-zA-Z-.]","g"),e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)+65248)}))}function StringConvertFromNumericFullToNumericHalf(e){var t;return t=new RegExp("[０-９－．]","g"),e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))}function StringConvertFromNumericHalfToNumericFull(e){var t;return t=new RegExp("[0-9]","g"),e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)+65248)}))}function StringConvertFromSignFullToSignHalf(e){e=(e=(e=e.replace(/”/g,'"')).replace(/’/g,"'")).replace(/￥/g,"\\");var t=new RegExp("[！-／：-＠［-｀｛-～]","g");return e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))}function StringConvertFromSignHalfToSignFull(e){e=(e=(e=e.replace(/\"/g,"”")).replace(/\'/g,"’")).replace(/\\/g,"￥");var t=new RegExp("[!-/:-@[-`{-~]","g");return e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)+65248)}))}function StringConvertFromSpaceFullToSpaceHalf(e){return e.replace(/　/g," ")}function StringConvertFromSpaceHalfToSpaceFull(e){return e.replace(/ /g,"　")}GMW_openInTab.isSupported=function(){try{if(GM.openInTab)return!0}catch(e){}try{if(GM_openInTab)return!0}catch(e){}return!1},GMW_XMLHttpRequest.isSupported=function(){try{if(GM.xmlHttpRequest)return!0}catch(e){}try{if(GM_xmlhttpRequest)return!0}catch(e){}return!1},GMW_LocalStorage.isSupported=function(){try{if(GM.getValue)return!0}catch(e){}try{if(GM_getValue)return!0}catch(e){}return!1},GMW_MenuCommand.isSupported=function(){try{if(GM.registerMenuCommand)return!0}catch(e){}try{if(GM_registerMenuCommand)return!0}catch(e){}return!1};var StringConvertFromKatakanaFullToKatakanaHalf=(data_g=["ガ","ギ","グ","ゲ","ゴ","ザ","ジ","ズ","ゼ","ゾ","ダ","ヂ","ヅ","デ","ド","バ","ビ","ブ","ベ","ボ"],re_g=new RegExp("ｶﾞ|ｷﾞ|ｸﾞ|ｹﾞ|ｺﾞ|ｻﾞ|ｼﾞ|ｽﾞ|ｾﾞ|ｿﾞ|ﾀﾞ|ﾁﾞ|ﾂﾞ|ﾃﾞ|ﾄﾞ|ﾊﾞ|ﾋﾞ|ﾌﾞ|ﾍﾞ|ﾎﾞ","g"),data_p=["パ","ピ","プ","ペ","ポ"],re_p=new RegExp("ﾊﾟ|ﾋﾟ|ﾌﾟ|ﾍﾟ|ﾎﾟ","g"),data_o=["。","「","」","、","・","ヲ","ァ","ィ","ゥ","ェ","ォ","ャ","ュ","ョ","ッ","ー","ア","イ","ウ","エ","オ","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ","タ","チ","ツ","テ","ト","ナ","ニ","ヌ","ネ","ノ","ハ","ヒ","フ","ヘ","ホ","マ","ミ","ム","メ","モ","ヤ","ユ","ヨ","ラ","リ","ル","レ","ロ","ワ","ン","゛","゜"],re_o=new RegExp("[｡-ﾟ]","g"),function(e){return e=(e=(e=e.replace(re_g,(function(e){var t=e.charCodeAt(0);return t<=65409?data_g[t-65398]:t>=65418?data_g[t-65418+15]:data_g[t-65410+12]}))).replace(re_p,(function(e){var t=e.charCodeAt(0);return data_p[t-65418]}))).replace(re_o,(function(e){return data_o[e.charCodeAt(0)-65377]}))}),data_g,re_g,data_p,re_p,data_o,re_o,StringConvertFromKatakanaHalfToKatakanaFull=function(){var e=new Object;e["。"]="｡",e["「"]="｢",e["」"]="｣",e["、"]="､",e["・"]="･",e["ヲ"]="ｦ",e["ァ"]="ｧ",e["ィ"]="ｨ",e["ゥ"]="ｩ",e["ェ"]="ｪ",e["ォ"]="ｫ",e["ャ"]="ｬ",e["ュ"]="ｭ",e["ョ"]="ｮ",e["ッ"]="ｯ",e["ー"]="ｰ",e["ア"]="ｱ",e["イ"]="ｲ",e["ウ"]="ｳ",e["エ"]="ｴ",e["オ"]="ｵ",e["カ"]="ｶ",e["キ"]="ｷ",e["ク"]="ｸ",e["ケ"]="ｹ",e["コ"]="ｺ",e["サ"]="ｻ",e["シ"]="ｼ",e["ス"]="ｽ",e["セ"]="ｾ",e["ソ"]="ｿ",e["タ"]="ﾀ",e["チ"]="ﾁ",e["ツ"]="ﾂ",e["テ"]="ﾃ",e["ト"]="ﾄ",e["ナ"]="ﾅ",e["ニ"]="ﾆ",e["ヌ"]="ﾇ",e["ネ"]="ﾈ",e["ノ"]="ﾉ",e["ハ"]="ﾊ",e["ヒ"]="ﾋ",e["フ"]="ﾌ",e["ヘ"]="ﾍ",e["ホ"]="ﾎ",e["マ"]="ﾏ",e["ミ"]="ﾐ",e["ム"]="ﾑ",e["メ"]="ﾒ",e["モ"]="ﾓ",e["ヤ"]="ﾔ",e["ユ"]="ﾕ",e["ヨ"]="ﾖ",e["ラ"]="ﾗ",e["リ"]="ﾘ",e["ル"]="ﾙ",e["レ"]="ﾚ",e["ロ"]="ﾛ",e["ワ"]="ﾜ",e["ン"]="ﾝ",e["゛"]="ﾞ",e["゜"]="ﾟ",e["ガ"]="ｶﾞ",e["ギ"]="ｷﾞ",e["グ"]="ｸﾞ",e["ゲ"]="ｹﾞ",e["ゴ"]="ｺﾞ",e["ザ"]="ｻﾞ",e["ジ"]="ｼﾞ",e["ズ"]="ｽﾞ",e["ゼ"]="ｾﾞ",e["ゾ"]="ｿﾞ",e["ダ"]="ﾀﾞ",e["ヂ"]="ﾁﾞ",e["ヅ"]="ﾂﾞ",e["デ"]="ﾃﾞ",e["ド"]="ﾄﾞ",e["バ"]="ﾊﾞ",e["ビ"]="ﾋﾞ",e["ブ"]="ﾌﾞ",e["ベ"]="ﾍﾞ",e["ボ"]="ﾎﾞ",e["パ"]="ﾊﾟ",e["ピ"]="ﾋﾟ",e["プ"]="ﾌﾟ",e["ペ"]="ﾍﾟ",e["ポ"]="ﾎﾟ";var t=new RegExp("[、。「」゛゜ァ-ロワヲン・ー]","g");return function(n){return n.replace(t,(function(t){return e[t]}))}}();function StringConvertFromHiraganaToKatakana(e){var t=new RegExp("[ぁ-ん]","g");return e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)+96)}))}function StringConvertFromKatakanaToHiragana(e){var t=new RegExp("[ァ-ン]","g");return e.replace(t,(function(e){return String.fromCharCode(e.charCodeAt(0)-96)}))}function StringConvert_From_CharacterReferences_To_Text(e){var t=document.createElement("span"),n=new RegExp("(&#[0-9]{1,};)|(&#x[0-9a-f]{1,};)|(&[0-9a-z]{2,};)","gi");return e.replace(n,(function(e){return t.innerHTML=e,ElementGetTextContent(t)}))}function StringEvalArrayFunction(src){try{var a=eval(src);if("function"==typeof a)return[a];var check=!1;if(a&&"object"==typeof a&&a.constructor==Array){var ary=new Array,i,num=a.length;for(i=0;i<num;i++)"function"==typeof a[i]&&ary.push(a[i]);return ary}}catch(e){}return[]}function StringGetQuery(e){var t=new Object,n=e.match(new RegExp("[?](.*?)(#|$)"));if(!n)return t;var a,i=n[1].split("&"),o=i.length;for(a=0;a<o;a++){var r=i[a].split("=");2==r.length&&(t[r[0]]=r[1])}return t}function StringMatchAsteriskWord(e,t){e.length;var n,a=t.length,i=0,o=0;if((n=t.indexOf("*"))<0)return e==t;if(n>0){var r=n-o;if(0!=(n=e.indexOf(t.substring(o,n),i)))return!1;i=n+r,o+=r}for(;;){for(;o++,(n=t.indexOf("*",o))==o;);if(n<0){if(o>=a)return!0;n=a}if(r=n-o,(n=e.indexOf(t.substring(o,n),i))<0)return!1;i=n+r,o+=r}return!1}function StringUrlMatchAsteriskWord(e,t){for(var n,a=new Array,i=new RegExp(":|/|[.]|[?]|#|[*]+","i");;){var o=t.match(i);if(!o){t&&a.push(t);break}RegExp.leftContext&&a.push(RegExp.leftContext),"*"==o[0].charAt(0)?a.push("*"):a.push(o[0]),t=RegExp.rightContext}for(var r=e.length,l=0;;){if(!(t=a.shift()))return l>=r;if("*"==t){if(!(t=a.shift()))return!0;if((n=e.indexOf(t,l))<0)return!1;l=n+t.length}else{if(e.indexOf(t,l)!=l)return!1;l+=t.length}}}function StringRegExpListFromAsteriskWord(e){for(var t="^",n=new Array,a=new RegExp(":|/|[.]|[?]|#|[*]+");;){var i=e.match(a);if(!i){if((i=e.match(new RegExp("(.*)$")))[0]||t.length>1){t+=i[0]+"$",n.push(new RegExp(t));break}break}"*"==i[0].charAt(0)?t+=RegExp.leftContext+".*?":(t+=RegExp.leftContext+"["+i[0]+"]",n.push(new RegExp(t)),t="^"),e=RegExp.rightContext}return n}function StringUrlMatchRegExpList(e,t){var n,a=t.length;for(n=0;n<a;n++){if(!e.match(t[n]))return!1;e=RegExp.rightContext}return""==e}function StringUrl_To_Absolute(e,t,n){if(e||(e=""),t||(t=""),n||(n=""),!(o=t.match(new RegExp("^.*/","i"))))return"";var a=o[0];if(!(o=t.match(new RegExp("^[^:]+://[^/]+/","i"))))return"";var i=o[0];if(!(o=t.match(new RegExp("^[^:]+:","i"))))return"";var o,r=o[0];return(o=n.match(new RegExp(".*/","i")))&&(n=o[0]),n=0==n.indexOf("//")?r+n:0==n.indexOf("/")?i+n.substr(1):a+n,0==e.indexOf("//")?r+e:0==e.indexOf("/")?i+e.substr(1):e.match(new RegExp("^[a-z]+:[^/]","i"))||e.match(new RegExp("://","i"))?e:n+e}function URL_Get_Origin(e){return URL_Parser(e).origin}function URL_Parser(e){var t,n="",a="",i="",o="",r="",l="",s="",c="",_="",u="",d="",p="",m="";try{var g,f=new URL(e);if((c=f.pathname).length<=2048)(g=c.match(/([^/]+)([/]*)$/))&&(_=g[1]),(g=_.match(/[.]([^.]*)$/))?(d=g[1],u=RegExp.leftContext):u=_,(g=d.match(/^([^":*?<>|~]+)/))&&(d=g[1]);return{protocol:f.protocol,username:f.username,password:f.password,port:f.port,host:f.host,hostname:f.hostname,origin:f.origin,pathname:c,filename:_,name:u,ext:d,search:f.search,hash:f.hash}}catch(e){}var h=e;return e.length<=2048&&((g=h.match(/([#].*)$/))&&(m=g[1],h=RegExp.leftContext),(g=h.match(/([?].*)/))&&(p=g[1],h=RegExp.leftContext),(g=h.match(/^([^:]+:)/))&&(n=g[1],h=RegExp.rightContext),g=n.match(/^(http|https|ftp|file|ws|wss):/),(t=Boolean(g))?((g=h.match(/^([/]*)/))&&(h=RegExp.rightContext),n.match(/^(file):/)&&(h="/"+h),(g=h.match(/^([^/]*)/))&&(c=RegExp.rightContext,h=g[1])):(c=h,h=""),(g=c.match(/([^/]+)([/]*)$/))&&(_=g[1]),(g=_.match(/[.]([^.]*)$/))?(d=g[1],u=RegExp.leftContext):u=_,(g=h.match(/([^@]*)@/))?(r=RegExp.rightContext,h=g[1]):(r=h,h=""),(g=r.match(/:([^:]*)$/))?(o=g[1],l=RegExp.leftContext):l=r,(g=h.match(/[:]([^:]*)$/))?(i=g[1],a=RegExp.leftContext):a=h,t&&(s=n+"//"+l,o&&(s+=":"+o))),{protocol:n,username:a,password:i,port:o,host:r,hostname:l,origin:s,pathname:c,filename:_,name:u,ext:d,search:p,hash:m}}function DataURL_Parser(e){var t,n="",a="",i=0;if(!(t=e.match(/^data:/i)))return null;if((i=e.indexOf(","))<0)return null;var o,r=e.slice(5,i).split(";");return(t=(o=r.shift()||"").match(/.+[/].+/))&&(n=t[0],o=r.shift()||""),(t=o.match(/^charset=(.*)/i))&&(a=t[1],o=r.shift()||""),{mimetype:n,charset:a,format:o.match(/^base64$/i)?"base64":"text",data_offset:i+=1,data_size:e.length-i}}function StringLiteral_To_String(e){var t,n;if(t||(n=e.match(/^"(.*)"$/))&&(t='"',e=n[1]),t||(n=e.match(/^'(.*)'$/))&&(t='"',e=n[1]),!t)return null;function a(e){var t,n=0,a=1;for(t=e.length-1;t>=0;t--){var i=e.charCodeAt(t);i>=97&&(i-=87),i>=65&&(i-=55),i>=48&&(i-=48),n+=a*i,a*=16}return String.fromCharCode(n)}e=(e=e.replace(new RegExp("\\\\u([0-9a-f]{4})","ig"),(function(e,t){return a(t)}))).replace(new RegExp("\\\\x([0-9a-f]{2})","ig"),(function(e,t){return a(t)}));var i={"\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v","'":"'",'"':'"',"/":"/"};return e=e.replace(new RegExp("\\\\(.)","g"),(function(e,t){return i[t]?i[t]:t}))}function Timestamp_ToString_JP(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes(),l=t.getSeconds(),s="";return n<1e3&&(s+="0"),n<100&&(s+="0"),n<10&&(s+="0"),s+=n,s+="/",a<10&&(s+="0"),s+=a,s+="/",i<10&&(s+="0"),s+=i,s+=" ",o<10&&(s+="0"),s+=o,s+=":",r<10&&(s+="0"),s+=r,s+=":",l<10&&(s+="0"),s+=l}function UNIXTIME_ToString_JP(e){return Timestamp_ToString_JP(1e3*e)}var DICTIONARY_ATTRIBUTE_HTML5={globals:{accesskey:!0,class:!0,contenteditable:!0,dir:!0,draggable:!0,dropzone:!0,hidden:!0,id:!0,lang:!0,spellcheck:!0,style:!0,tabindex:!0,title:!0,translate:!0},elements:{A:{allow:!0,attributes:{href:!0,target:!0,download:!0,rel:!0,hreflang:!0,type:!0}},ABBR:{allow:!0,attributes:{}},ADDRESS:{allow:!0,attributes:{}},AREA:{allow:!0,attributes:{alt:!0,coords:!0,shape:!0,href:!0,target:!0,download:!0,rel:!0,hreflang:!0,type:!0}},ARTICLE:{allow:!0,attributes:{}},ASIDE:{allow:!0,attributes:{}},AUDIO:{allow:!0,attributes:{src:!0,crossorigin:!0,preload:!0,autoplay:!0,mediagroup:!0,loop:!0,muted:!0,controls:!0}},B:{allow:!0,attributes:{}},BASE:{allow:!0,attributes:{href:!0,target:!0}},BDI:{allow:!0,attributes:{}},BDO:{allow:!0,attributes:{}},BLOCKQUOTE:{allow:!0,attributes:{cite:!0}},BODY:{allow:!1,attributes:{}},BR:{allow:!0,attributes:{}},BUTTON:{allow:!0,attributes:{autofocus:!0,disabled:!0,form:!0,formaction:!0,formenctype:!0,formmethod:!0,formnovalidate:!0,formtarget:!0,name:!0,type:!0,value:!0}},CANVAS:{allow:!0,attributes:{width:!0,height:!0}},CAPTION:{allow:!0,attributes:{}},CITE:{allow:!0,attributes:{}},CODE:{allow:!0,attributes:{}},COL:{allow:!0,attributes:{span:!0}},COLGROUP:{allow:!0,attributes:{span:!0}},DATA:{allow:!0,attributes:{value:!0}},DATALIST:{allow:!0,attributes:{}},DD:{allow:!0,attributes:{}},DEL:{allow:!0,attributes:{cite:!0,datetime:!0}},DETAILS:{allow:!0,attributes:{open:!0}},DFN:{allow:!0,attributes:{}},DIALOG:{allow:!0,attributes:{open:!0}},DIV:{allow:!0,attributes:{}},DL:{allow:!0,attributes:{}},DT:{allow:!0,attributes:{}},EM:{allow:!0,attributes:{}},EMBED:{allow:!1,attributes:{src:!0,type:!0,width:!0,height:!0,"any*":!0}},FIELDSET:{allow:!0,attributes:{disabled:!0,form:!0,name:!0}},FIGCAPTION:{allow:!0,attributes:{}},FIGURE:{allow:!0,attributes:{}},FOOTER:{allow:!0,attributes:{}},FORM:{allow:!0,attributes:{"accept-charset":!0,action:!0,autocomplete:!0,enctype:!0,method:!0,name:!0,novalidate:!0,target:!0}},H1:{allow:!0,attributes:{}},H2:{allow:!0,attributes:{}},H3:{allow:!0,attributes:{}},H4:{allow:!0,attributes:{}},H5:{allow:!0,attributes:{}},H6:{allow:!0,attributes:{}},HEAD:{allow:!1,attributes:{}},HEADER:{allow:!0,attributes:{}},HR:{allow:!0,attributes:{}},HTML:{allow:!1,attributes:{manifest:!0}},I:{allow:!0,attributes:{}},IFRAME:{allow:!1,attributes:{src:!0,srcdoc:!0,name:!0,sandbox:!0,seamless:!0,width:!0,height:!0}},IMG:{allow:!0,attributes:{alt:!0,src:!0,crossorigin:!0,usemap:!0,ismap:!0,width:!0,height:!0}},INPUT:{allow:!0,attributes:{accept:!0,alt:!0,autocomplete:!0,autofocus:!0,checked:!0,dirname:!0,disabled:!0,form:!0,formaction:!0,formenctype:!0,formmethod:!0,formnovalidate:!0,formtarget:!0,height:!0,list:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,name:!0,pattern:!0,placeholder:!0,readonly:!0,required:!0,size:!0,src:!0,step:!0,type:!0,value:!0,width:!0}},INS:{allow:!0,attributes:{cite:!0,datetime:!0}},KBD:{allow:!0,attributes:{}},KEYGEN:{allow:!0,attributes:{autofocus:!0,challenge:!0,disabled:!0,form:!0,keytype:!0,name:!0}},LABEL:{allow:!0,attributes:{form:!0,for:!0}},LEGEND:{allow:!0,attributes:{}},LI:{allow:!0,attributes:{"value*":!0}},LINK:{allow:!0,attributes:{href:!0,crossorigin:!0,rel:!0,media:!0,hreflang:!0,type:!0,sizes:!0}},MAIN:{allow:!0,attributes:{"":!0}},MAP:{allow:!0,attributes:{name:!0}},MARK:{allow:!0,attributes:{}},META:{allow:!0,attributes:{name:!0,"http-equiv":!0,content:!0,charset:!0}},METER:{allow:!0,attributes:{value:!0,min:!0,max:!0,low:!0,high:!0,optimum:!0}},NAV:{allow:!0,attributes:{}},NOSCRIPT:{allow:!0,attributes:{}},OBJECT:{allow:!0,attributes:{data:!0,type:!0,typemustmatch:!0,name:!0,usemap:!0,form:!0,width:!0,height:!0}},OL:{allow:!0,attributes:{reversed:!0,start:!0,type:!0}},OPTGROUP:{allow:!0,attributes:{disabled:!0,label:!0}},OPTION:{allow:!0,attributes:{disabled:!0,label:!0,selected:!0,value:!0}},OUTPUT:{allow:!0,attributes:{for:!0,form:!0,name:!0}},P:{allow:!0,attributes:{}},PARAM:{allow:!0,attributes:{name:!0,value:!0}},PRE:{allow:!0,attributes:{}},PROGRESS:{allow:!0,attributes:{value:!0,max:!0}},Q:{allow:!0,attributes:{cite:!0}},RB:{allow:!0,attributes:{}},RP:{allow:!0,attributes:{}},RT:{allow:!0,attributes:{}},RTC:{allow:!0,attributes:{}},RUBY:{allow:!0,attributes:{}},S:{allow:!0,attributes:{}},SAMP:{allow:!0,attributes:{}},SCRIPT:{allow:!1,attributes:{src:!0,type:!0,charset:!0,async:!0,defer:!0,crossorigin:!0}},SECTION:{allow:!0,attributes:{}},SELECT:{allow:!0,attributes:{autofocus:!0,disabled:!0,form:!0,multiple:!0,name:!0,required:!0,size:!0}},SMALL:{allow:!0,attributes:{}},SOURCE:{allow:!0,attributes:{src:!0,type:!0,media:!0}},SPAN:{allow:!0,attributes:{}},STRONG:{allow:!0,attributes:{}},STYLE:{allow:!1,attributes:{media:!0,type:!0,scoped:!0}},SUB:{allow:!0,attributes:{}},SUMMARY:{allow:!0,attributes:{}},SUP:{allow:!0,attributes:{}},TABLE:{allow:!0,attributes:{border:!0}},TBODY:{allow:!0,attributes:{}},TD:{allow:!0,attributes:{colspan:!0,rowspan:!0,headers:!0}},TEMPLATE:{allow:!0,attributes:{}},TEXTAREA:{allow:!0,attributes:{autofocus:!0,cols:!0,dirname:!0,disabled:!0,form:!0,maxlength:!0,minlength:!0,name:!0,placeholder:!0,readonly:!0,required:!0,rows:!0,wrap:!0}},TFOOT:{allow:!0,attributes:{}},TH:{allow:!0,attributes:{colspan:!0,rowspan:!0,headers:!0,scope:!0,abbr:!0}},THEAD:{allow:!0,attributes:{}},TIME:{allow:!0,attributes:{datetime:!0}},TITLE:{allow:!0,attributes:{}},TR:{allow:!0,attributes:{}},TRACK:{allow:!0,attributes:{default:!0,kind:!0,label:!0,src:!0,srclang:!0}},U:{allow:!0,attributes:{}},UL:{allow:!0,attributes:{}},VAR:{allow:!0,attributes:{}},VIDEO:{allow:!0,attributes:{src:!0,crossorigin:!0,poster:!0,preload:!0,autoplay:!0,mediagroup:!0,loop:!0,muted:!0,controls:!0,width:!0,height:!0}},WBR:{allow:!0,attributes:{}}}},DICTIONARY_ATTRIBUTE_HTML4={globals:{class:!0,dir:!0,id:!0,lang:!0,style:!0,title:!0},elements:{A:{allow:!0,attributes:{accesskey:!0,charset:!0,coords:!0,href:!0,hreflang:!0,name:!0,rel:!0,rev:!0,shape:!0,tabindex:!0,target:!0,type:!0}},ABBR:{allow:!0,attributes:{}},ACRONYM:{allow:!0,attributes:{}},ADDRESS:{allow:!0,attributes:{}},APPLET:{allow:!1,attributes:{align:!0,alt:!0,archive:!0,code:!0,codebase:!0,height:!0,hspace:!0,name:!0,object:!0,vspace:!0,width:!0}},AREA:{allow:!0,attributes:{accesskey:!0,alt:!0,coords:!0,href:!0,nohref:!0,shape:!0,tabindex:!0,target:!0}},B:{allow:!0,attributes:{}},BASE:{allow:!0,attributes:{href:!0,target:!0}},BASEFONT:{allow:!0,attributes:{color:!0,face:!0,size:!0}},BDO:{allow:!0,attributes:{dir:!0}},BIG:{allow:!0,attributes:{}},BLOCKQUOTE:{allow:!0,attributes:{cite:!0}},BODY:{allow:!1,attributes:{alink:!0,background:!0,bgcolor:!0,link:!0,text:!0,vlink:!0}},BR:{allow:!0,attributes:{clear:!0}},BUTTON:{allow:!0,attributes:{accesskey:!0,disabled:!0,name:!0,tabindex:!0,type:!0,value:!0}},CAPTION:{allow:!0,attributes:{align:!0}},CENTER:{allow:!0,attributes:{}},CITE:{allow:!0,attributes:{}},CODE:{allow:!0,attributes:{}},COL:{allow:!0,attributes:{align:!0,char:!0,charoff:!0,span:!0,valign:!0,width:!0}},COLGROUP:{allow:!0,attributes:{align:!0,char:!0,charoff:!0,span:!0,valign:!0,width:!0}},DD:{allow:!0,attributes:{}},DEL:{allow:!0,attributes:{cite:!0,datetime:!0}},DFN:{allow:!0,attributes:{}},DIR:{allow:!0,attributes:{compact:!0}},DIV:{allow:!0,attributes:{align:!0}},DL:{allow:!0,attributes:{compact:!0}},DT:{allow:!0,attributes:{}},EM:{allow:!0,attributes:{}},FIELDSET:{allow:!0,attributes:{}},FONT:{allow:!0,attributes:{color:!0,face:!0,size:!0}},FORM:{allow:!0,attributes:{"accept-charset":!0,accept:!0,action:!0,enctype:!0,method:!0,name:!0,target:!0}},FRAME:{allow:!1,attributes:{frameborder:!0,longdesc:!0,marginheight:!0,marginwidth:!0,name:!0,noresize:!0,scrolling:!0,src:!0}},FRAMESET:{allow:!1,attributes:{cols:!0,rows:!0}},H1:{allow:!0,attributes:{align:!0}},H2:{allow:!0,attributes:{align:!0}},H3:{allow:!0,attributes:{align:!0}},H4:{allow:!0,attributes:{align:!0}},H5:{allow:!0,attributes:{align:!0}},H6:{allow:!0,attributes:{align:!0}},HEAD:{allow:!1,attributes:{profile:!0}},HR:{allow:!0,attributes:{align:!0,noshade:!0,size:!0,width:!0}},HTML:{allow:!1,attributes:{version:!0}},I:{allow:!0,attributes:{}},IFRAME:{allow:!1,attributes:{align:!0,frameborder:!0,height:!0,longdesc:!0,marginheight:!0,marginwidth:!0,name:!0,scrolling:!0,src:!0,width:!0}},IMG:{allow:!0,attributes:{align:!0,alt:!0,border:!0,height:!0,hspace:!0,ismap:!0,longdesc:!0,name:!0,src:!0,usemap:!0,vspace:!0,width:!0}},INPUT:{allow:!0,attributes:{accept:!0,accesskey:!0,align:!0,alt:!0,checked:!0,disabled:!0,ismap:!0,maxlength:!0,name:!0,readonly:!0,size:!0,src:!0,tabindex:!0,type:!0,usemap:!0,value:!0}},INS:{allow:!0,attributes:{cite:!0,datetime:!0}},ISINDEX:{allow:!0,attributes:{prompt:!0}},KBD:{allow:!0,attributes:{}},LABEL:{allow:!0,attributes:{accesskey:!0,for:!0}},LEGEND:{allow:!0,attributes:{accesskey:!0,align:!0}},LI:{allow:!0,attributes:{type:!0,value:!0}},LINK:{allow:!0,attributes:{charset:!0,href:!0,hreflang:!0,media:!0,rel:!0,rev:!0,target:!0,type:!0}},MAP:{allow:!0,attributes:{name:!0}},MENU:{allow:!0,attributes:{compact:!0}},META:{allow:!0,attributes:{content:!0,"http-equiv":!0,name:!0,scheme:!0}},NOFRAMES:{allow:!0,attributes:{}},NOSCRIPT:{allow:!0,attributes:{}},OBJECT:{allow:!1,attributes:{align:!0,archive:!0,border:!0,classid:!0,codebase:!0,codetype:!0,data:!0,declare:!0,height:!0,hspace:!0,name:!0,standby:!0,tabindex:!0,type:!0,usemap:!0,vspace:!0,width:!0}},OL:{allow:!0,attributes:{compact:!0,start:!0,type:!0}},OPTGROUP:{allow:!0,attributes:{disabled:!0,label:!0}},OPTION:{allow:!0,attributes:{disabled:!0,label:!0,selected:!0,value:!0}},P:{allow:!0,attributes:{align:!0}},PARAM:{allow:!0,attributes:{name:!0,type:!0,value:!0,valuetype:!0}},PRE:{allow:!0,attributes:{width:!0}},Q:{allow:!0,attributes:{cite:!0}},S:{allow:!0,attributes:{}},SAMP:{allow:!0,attributes:{}},SCRIPT:{allow:!1,attributes:{charset:!0,defer:!0,language:!0,src:!0,type:!0}},SELECT:{allow:!0,attributes:{disabled:!0,multiple:!0,name:!0,size:!0,tabindex:!0}},SMALL:{allow:!0,attributes:{}},SPAN:{allow:!0,attributes:{}},STRIKE:{allow:!0,attributes:{}},STRONG:{allow:!0,attributes:{}},STYLE:{allow:!1,attributes:{media:!0,type:!0}},SUB:{allow:!0,attributes:{}},SUP:{allow:!0,attributes:{}},TABLE:{allow:!0,attributes:{align:!0,bgcolor:!0,border:!0,cellpadding:!0,cellspacing:!0,frame:!0,rules:!0,summary:!0,width:!0}},TBODY:{allow:!0,attributes:{align:!0,char:!0,charoff:!0,valign:!0}},TD:{allow:!0,attributes:{abbr:!0,align:!0,axis:!0,bgcolor:!0,char:!0,charoff:!0,colspan:!0,headers:!0,height:!0,nowrap:!0,rowspan:!0,scope:!0,valign:!0,width:!0}},TEXTAREA:{allow:!0,attributes:{accesskey:!0,cols:!0,disabled:!0,name:!0,readonly:!0,rows:!0,tabindex:!0}},TFOOT:{allow:!0,attributes:{align:!0,char:!0,charoff:!0,valign:!0}},TH:{allow:!0,attributes:{abbr:!0,align:!0,axis:!0,bgcolor:!0,char:!0,charoff:!0,colspan:!0,headers:!0,height:!0,nowrap:!0,rowspan:!0,scope:!0,valign:!0,width:!0}},THEAD:{allow:!0,attributes:{align:!0,char:!0,charoff:!0,valign:!0}},TITLE:{allow:!0,attributes:{}},TR:{allow:!0,attributes:{align:!0,bgcolor:!0,char:!0,charoff:!0,valign:!0}},TT:{allow:!0,attributes:{}},U:{allow:!0,attributes:{}},UL:{allow:!0,attributes:{compact:!0,type:!0}},VAR:{allow:!0,attributes:{}}}};function StringHtmlCreateDomNodesSafe(e){var t=new Object;t[" "]=t["　"]=t["\t"]=t["\r"]=t["\n"]=t[">"]=t["="]=!0;var n=new Object;n[" "]=n["　"]=n["\t"]=n["\r"]=n["\n"]=n[">"]=!0;var a=new Object;a[" "]=a["　"]=a["\t"]=a["\r"]=a["\n"]=!0;var i=new Object;i.AREA=i.BASE=i.BASEFONT=i.BR=i.COL=i.FRAME=i.HR=i.IMG=i.INPUT=i.ISINDEX=i.LINK=i.META=i.PARAM=i.WBR=!0;var o=new Object;o.BODY=o.COLGROUP=o.DD=o.DT=o.HEAD=o.HTML=o.LI=o.OPTION=o.P=o.TBODY=o.TD=o.TFOOT=o.TH=o.THEAD=o.TR=!0;var r,l,s,c=new Array,_=new Array,u=0,d=e.length,p={element:null,name:"",depth:0};_.push(p);try{for(;;){if("SCRIPT"==p.name||"STYLE"==p.name)for(;;){for(;d>u&&(r=e.charAt(u),u++,"<"!=r););if(u>=d)throw"end";for(;d>u&&(r=e.charAt(u),u++,a[r]););if(u>=d)throw"end";if("/"==r){for(;d>u&&a[r=e.charAt(u)];)u++;if(u>=d)throw"end";var m=p.name;if(e.substr(u,m.length).toUpperCase()==m){for(u+=m.length;d>u&&(r=e.charAt(u),u++,a[r]););if(u>=d)throw"end";if(">"==r&&"\\"!=e.charAt(u-2)){p.depth&&(_.pop(),p=_[_.length-1]);break}}}}for(l=u,s=-1;d>u;)if(r=e.charAt(u),u++,"<"==r){s=u-1;break}if(l<s){var g=e.substring(l,s);g=StringConvert_From_CharacterReferences_To_Text(g);var f=document.createTextNode(g);f&&(p.depth?p.element&&p.element.appendChild(f):c.push(f))}if(u>=d)throw"end";if("!--"!=e.substr(u,3)){for(;d>u;)if(r=e.charCodeAt(u),u++,65<=r&&r<=90||97<=r&&r<=122||47==r){l=u-1;break}if(u>=d)throw"end";if(47==r){for(;d>u;)if(r=e.charCodeAt(u),u++,65<=r&&r<=90||97<=r&&r<=122){l=u-1;break}if(u>=d)throw"end";for(;d>u;){if(!(65<=(r=e.charCodeAt(u))&&r<=90||97<=r&&r<=122||48<=r&&r<=57)){s=u;break}u++}if(u>=d)throw"end";for(m=e.substring(l,s).toUpperCase();d>u&&(r=e.charAt(u),u++,">"!=r););for(l=s=_.length,h=s-1;h>=0;h--)if(_[h].name==m){l=h;break}for(;l<s;l++)p.depth&&(_.pop(),p=_[_.length-1])}else{for(;d>u;){if(!(65<=(r=e.charCodeAt(u))&&r<=90||97<=r&&r<=122||48<=r&&r<=58)){s=u;break}u++}if(u>=d)throw"end";var h;if(o[m=e.substring(l,s).toUpperCase()]){for(l=s=_.length,h=s-1;h>=0;h--)if(o[_[h].name]){l=h;break}for(;l<s;l++)p.depth&&(_.pop(),p=_[_.length-1])}var x,b,v=p.element,y=!1,E=new Array,w=null;for((b=(x=DICTIONARY_ATTRIBUTE_HTML4).elements[m])&&b.allow&&(E.push(x.globals),E.push(b.attributes)),(b=(x=DICTIONARY_ATTRIBUTE_HTML5).elements[m])&&b.allow&&(E.push(x.globals),E.push(b.attributes)),E.length&&(w=document.createElement(m)),w&&(p.depth?v&&w&&v.appendChild(w):c.push(w)),i[m]&&(y=!0),p={element:w,name:m,depth:p.depth+1},_.push(p);;){for(;d>u;){if(!a[r=e.charAt(u)]){l=u;break}u++}if(u>=d)throw"end";if(">"==r){y&&p.depth&&(_.pop(),p=_[_.length-1]),u+=1;break}if("/"==r)y=!0,u+=1;else{for(;d>u;){if(t[r=e.charAt(u)]){s=u;break}u++}if(u>=d)throw"end";for(var S=e.substring(l,s),C=void 0;d>u&&a[r=e.charAt(u)];)u++;if(u>=d)throw"end";if("="==r){for(u++;d>u&&a[r=e.charAt(u)];)u++;if(u>=d)throw"end";var A="";for('"'!=r&&"'"!=r||(A=r,u++),l=u;d>u;){if(r=e.charAt(u),A){if(r==A&&"\\"!=e.charAt(u-1)){s=u,u++;break}}else if(n[r]){s=u;break}u++}if(u>=d)throw"end";C=e.substring(l,s)}if(p.element)for(var k in S=S.toLowerCase(),E)if(E[k][S]){void 0===C&&(C="");var I=document.createAttribute(S);I.value=C,p.element.setAttributeNode(I);break}}}}}else u+=3,(s=e.indexOf("--\x3e",u))>=0&&(u=s+3)}}catch(s){}return c}function ObjectCopy(e){if(null===e)return null;if("object"!=typeof e)return e;var t,n,a,i=new e.constructor,o=new Array;for(o.push({o:i,s:e});a=o.pop();)for(a in n=a.o,t=a.s)"object"==typeof t[a]&&t[a]?(n[a]=new t[a].constructor,o.push({o:n[a],s:t[a]})):n[a]=t[a];return i}function ObjectDeleteProperty(e,t){try{e[t]=null,delete e[t]}catch(e){}}function RegExpReplacementBackslashWord(e,t,n){if(!e)return t;var a=t.match(e);if(!a)return t;var i=a.length;return n.replace(new RegExp("\\\\\\\\|\\\\[0-9]","g"),(function(e,t,n){if("\\\\"==e)return"\\";var o=parseInt(e[1]);return o>0&&o<=i?a[o]:0==o?a[0]:""}))}function RegExpReplacementDollarWord(e,t,n){if(!e)return t;var a=t.match(e);if(!a)return t;var i=a.length;return n.replace(new RegExp("[$][$]|[$][0-9]","g"),(function(e,t,n){if("$$"==e)return"$";var o=parseInt(e[1]);return o>0&&o<=i?a[o]:0==o?a[0]:""}))}function ClipboardSetText(e){}function WindowManager(e){var t,n,a,i=this;i.release=function(){t=null,n=null,a=null},i.getWindowRoot=function(){return t},i.existWindowRoot=function(){return t!=n},i.getPositionFromRoot=function(){var e=0,t=0;try{var n,i,o,r,l,s=a.length;for(l=0;l<s&&(n=a[l].frameElement);l++)i=ElementGetComputedStyle(n,""),o=ComputedStyleGetSize(i),e+=(r=ElementGetBoundingClientRect(n)).left+o.paddingLeft+o.borderLeft,t+=r.top+o.paddingTop+o.borderTop}catch(e){}return{x:e,y:t}},function(){n=e,a=new Array;try{for(var i=e.top;e!=i;){var o=e.parent;o.location.href,o.document.URL,a.push(e),e=o}}catch(e){}t=e}()}function WindowGetScrollPosition(e){if(void 0===e.pageXOffset);else if(void 0!==e.pageYOffset)return{x:e.pageXOffset,y:e.pageYOffset};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft,y:t.documentElement.scrollTop||t.body.scrollTop}}function WindowSetScrollPosition(e,t){WindowSetScrollPositionX(e,t.x),WindowSetScrollPositionY(e,t.y)}function WindowSetScrollPositionX(e,t){var n=e.document;n.body&&(n.body.scrollLeft=t),n.documentElement&&(n.documentElement.scrollLeft=t)}function WindowSetScrollPositionY(e,t){var n=e.document;n.body&&(n.body.scrollTop=t),n.documentElement&&(n.documentElement.scrollTop=t)}function WindowGetRoot(e){try{for(var t=e.top;e!=t;){var n=e.parent;n.location.href,n.document.URL,e=n}}catch(e){}return e}function WindowIsChild(e){return e.top!=e.self}function WindowGetOwnerURL(e){var t="",n=new RegExp("^(blob|data|about):","i");try{t=e.document.URL;for(var a=e.top;e!=a&&t.match(n);)(e=e.parent).location.href,t=e.document.URL}catch(e){}return t}function DocumentGetHeadElement(e){if(e.head)return e.head;var t,n=e.documentElement.childNodes,a=n.length;for(t=0;t<a;t++)if("HEAD"==n[t].tagName)return n[t];return null}function DocumentGetClientSize(e){var t=e.body,n=e.documentElement,a=t.clientWidth;return a<n.clientWidth&&(a=n.clientWidth),{width:a,height:"BackCompat"==e.compatMode?t.clientHeight:n.clientHeight?n.clientHeight:t.clientHeight}}function DocumentGetScrollPos(){return{x:document.body.scrollLeft||document.documentElement.scrollLeft,y:document.body.scrollTop||document.documentElement.scrollTop}}function DocumentGetDocumentSize(e){var t,n=0,a=0;return(t=e.body)&&(n<t.clientWidth&&(n=t.clientWidth),n<t.scrollWidth&&(n=t.scrollWidth),a<t.clientHeight&&(a=t.clientHeight),a<t.scrollHeight&&(a=t.scrollHeight)),(t=e.documentElement)&&(n<t.clientWidth&&(n=t.clientWidth),n<t.scrollWidth&&(n=t.scrollWidth),a<t.clientHeight&&(a=t.clientHeight),a<t.scrollHeight&&(a=t.scrollHeight)),{width:n,height:a}}function DocumentGetLoadedDomContent(e,t){switch(e.readyState){case"interactive":case"complete":return void t()}e.addEventListener?e.addEventListener("DOMContentLoaded",(function n(a){e.removeEventListener("DOMContentLoaded",n),t()})):e.attachEvent&&e.attachEvent("onreadystatechange",(function n(a){switch(e.readyState){case"interactive":case"complete":e.detachEvent("onreadystatechange",n),t()}}))}function WindowGetDevicePixelRatio(e){return void 0===e.devicePixelRatio?1:e.devicePixelRatio}function DocumentCreateElement(e){return document.createElement(e)}function DocumentCreateText(e){return document.createTextNode(e)}function DocumentGetQuery(){return StringGetQuery(document.URL)}function DocumentObserverModifyProperty(){var e,t,n=this;n.release=function(){for(;e!=e.next;)e.next.release()},n.createElement=function(){var n,a=new Object;return a.setFunction=function(e){a.callback=e},a.setBaseValue=function(e){a.base=e},a.setElement=function(e,t){a.element=e,a.key=t,a.base=e[a.key],MutationObserverSupported()&&(n=MutationObserverCreate((function(e){var t,n=e.length;for(t=0;t<n;t++){var i=e[t].target;if(a.base!=i[a.key])return a.base=i[a.key],void a.callback()}}))).observe(e,{attributes:!0,attributeFilter:[t]})},a.release=function(){e==a&&(e=a.next);var i=a.next,o=a.prev;o.next=i,i.prev=o,a.prev=a,a.next=a,t--,n&&(n.disconnect(),n=null)},function(){a.callback=null,a.element=null,a.key=null,a.base=null;var n=e,i=n.prev;i.next=a,n.prev=a,a.prev=i,a.next=n,t++}(),a},n.execute=function(){var t=0,n=e;do{if(e.element&&e.base!=e.element[e.key]&&(e.base=e.element[e.key],e.callback()),e=e.next,5<=++t)break}while(n!=e)},n.getCount=function(){return t},(e=new Object).prev=e,e.next=e,t=0}function DocumentObserverRemoveDomNode(){var e,t,n,a,i,o,r,l=this;function s(e){var n,a,o,r=0,l=0,s=new Object,c=e.childNodes;function _(){l=0,execute_queue.attachFirstForRemoveDomNode(u,null)}function u(){for(;e;){if(c)for(;c[r];)if(n={node:c[r]},a=(o=s).p,n.p=a,n.n=o,a.n=n,o.p=n,r++,++l>100)return void _();var u;if((u=i?i.get(e):e._pageexpand_remove)&&!DomNodeGetAttachedDocument(e)){for(var d,p=new Array,m=t[u],g=m._next;g!=m;)p.push(g),g=g._next;var f=p.length;for(d=0;d<f;d++)p[d].callback()}if(n=s.n,a=n.p,o=n.n,a.n=o,o.p=a,(e=n.node)&&(r=0,c=e.childNodes),++l>100)return void _()}}s.p=s,s.n=s,u()}l.release=function(){if(e){for(var n in t)for(var a=t[n];a!=a._next;)a._next.release();e.disconnect(),e=null,i=null}else for(;t!=t._next;)t._next.release()},l.createElement=function(){var l,s=new Object;return s.setFunction=function(e){s.callback=e},s.setDomNode=function(n){if(s.node=n,e){if((l=i?i.get(n):n._pageexpand_remove)||(i?(l=r,i.set(n,l)):l=n._pageexpand_remove=r,r++),!t[l]){var a=new Object;a._prev=a,a._next=a,t[l]=a}var o=t[l],c=o._next;o._next=s,c._prev=s,s._prev=o,s._next=c}},s.release=function(){if(e){var r=s._prev,c=s._next;r._next=c,c._prev=r,s._prev=s,s._next=s,t[l]==t[l]._next&&(ObjectDeleteProperty(t,l),i&&i.delete(s.node))}else{a==s&&(a=s._prev),n==s&&(n=s._prev);r=s._prev,c=s._next;r._next=c,c._prev=r,s._prev=s,s._next=s}o-=1,s.node=null},function(){if(e)s._prev=s,s._next=s;else{var t=n,i=t._prev;s._prev=i,s._next=t,t._prev=s,i._next=s,a=s}s.callback=null,s.node=null,o+=1}(),s},l.getCount=function(){return o},l.execute=function(){a=n;var e;for(e=0;e<5;e++)if(n.node&&(DomNodeGetAttachedDocument(n.node)||n.callback()),(n=n._next)==a)return},o=0,MutationObserverSupported()&&(t=new Array,window.WeakMap&&(i=new WeakMap),r=1,(e=MutationObserverCreate((function(e){var t,n=e.length;for(t=0;t<n;t++){var a,i=e[t].removedNodes,o=i.length;for(a=0;a<o;a++)execute_queue.attachLastForRemoveDomNode(s,i[a])}}))).observe(document.documentElement,{childList:!0,subtree:!0})),e||((t=new Object)._prev=t,t._next=t,n=t,a=t)}function DocumentObserverScroll(){var e,t,n,a,i,o,r=this;function l(){e?i=a:((e=task_container.createTask()).setDestructorFunc((function(){e=null})),e.setExecuteFunc((function(){var t;for(t=0;t<10;t++)if(a.callback&&a.callback(),(a=a._next)==i)return void e.release()})),i=a=n,e.execute(4294967295))}function s(){window.removeEventListener?window.removeEventListener("scroll",l,!0):window.attachEvent&&window.detachEvent("onscroll",l)}r.release=function(){for(s();n!=n._next;)n._next.release();t&&(t.release(),t=null),e&&e.release()},r.createElement=function(){var e,n,r=new Object;return r.setFunction=function(e){r.callback=e},r.release=function(){i==r&&(i=r._prev),a==r&&(a=r._prev);var e=r._prev,t=r._next;e._next=t,t._prev=e,r._prev=r,r._next=r,(o-=1)||s()},n=(e=a)._prev,r._prev=n,r._next=e,e._prev=r,n._next=r,i=r,r.callback=null,o||(window.addEventListener?window.addEventListener("scroll",l,!0):window.attachEvent&&window.attachEvent("onscroll",l),t&&(t.release(),t=null),(t=new Timer(1,1)).oncomplete=function(){l()},t.start()),o+=1,r},r.getCount=function(){return o},o=0,(n=new Object)._prev=n,n._next=n,a=n,i=n}function QueueDictionary(){var e,t,n=this;n.release=function(){e=null},n.createElement=function(n){var a=new Object;return a.setData=function(e){a.data=e},a.getData=function(){return a.data},a.release=function(){var n=a.owner;if(n){a.owner=null;var i=a._prev,o=a._next;i._next=o,o._prev=i,n.count-=1,n.count||delete e[n.key],t-=1}},function(){var i=e[n];i||((i={key:n,count:0})._prev=i,i._next=i,e[n]=i);var o=i,r=o._prev;r._next=a,o._prev=a,a._prev=r,a._next=o,a.owner=i,i.count+=1,t+=1}(),a},n.get=function(t){var n=e[t];return n?n._next:null},n.getCount=function(){return t},t=0,e=new Object}function ElementGetElementsByTagName(e,t){if(e.getElementsByTagName)return e.getElementsByTagName(t);if(e.querySelectorAll)return e.querySelectorAll(t);t=t.toUpperCase();var n,a,i,o=new Array,r=new Object;for(i={p:r,n:r,node:e},r.p=i,r.n=i;r.n!=r;){if(n=(i=r.n).p,a=i.n,n.n=a,a.p=n,1===(e=i.node).nodeType){var l,s=e.childNodes,c=s.length;for(l=0;l<c;l++)i={p:n=(a=r).p,n:a,node:s[l]},n.n=i,a.p=i;e.tagName!=t&&"*"!=t||o.push(e)}}return o}function ElementGetElementsByName(e,t){var n,a,i,o=new Array,r=new Object;for(i={p:r,n:r,node:e},r.p=i,r.n=i;r.n!=r;){if(n=(i=r.n).p,a=i.n,n.n=a,a.p=n,1===(e=i.node).nodeType){var l,s=(o=e.childNodes).length;for(l=0;l<s;l++)i={p:n=(a=r).p,n:a,node:o[l]},n.n=i,a.p=i;e.getAttribute("name")==t&&o.push(e)}}return o}function ElementGetElementsByClassName(e,t){if(e.getElementsByClassName)return e.getElementsByClassName(t);var n=new Array;if(!t)return n;var a=new RegExp("[ \t\r\n]*([^ \t\r\n]+)[ \t\r\n]*","g"),i=new Object;t.replace(a,(function(e,t){i[t]=!0}));var o=function(e){if(1==e.nodeType){var t,r=new Object;for(var l in(void 0===e.className.baseVal?e.className:e.className.baseVal).replace(a,(function(e,t){r[t]=!0})),i)if(!(t=r[l]))break;t&&n.push(e);var s,c=e.childNodes,_=c.length;for(s=0;s<_;s++)o(c[s])}};e.documentElement&&(e=e.documentElement);var r,l=e.childNodes,s=l.length;for(r=0;r<s;r++)o(l[r]);return n}function ElementGetClassName(e){return void 0!==e.className.baseVal?e.className.baseVal:e.className}function ElementGetStyle(e){return e.style.cssText}function ElementAddStyle(e,t){e.style.cssText+=t}function ElementSetStyle(e,t){e.style.cssText=t}function ElementGetClientWidth(e){for(var t;e&&!(t=e.clientWidth);)e=e.parentNode;return e?t:0}function ElementGetBoundingClientRect(e){if(!e.getBoundingClientRect)return null;var t=e.getBoundingClientRect(),n={left:t.left,right:t.right,top:t.top,bottom:t.bottom};if(UserAgentGetInternetExplorer()||UserAgentGetSleipnir()){n.left-=2,n.right-=2,n.top-=2,n.bottom-=2}return n}var ElementGetContentClientRect=(re=new RegExp("^([-0-9.]+)px$","i"),list=[{style:"paddingLeft",key:"left",sign:1},{style:"paddingRight",key:"right",sign:-1},{style:"paddingTop",key:"top",sign:1},{style:"paddingBottom",key:"bottom",sign:-1},{style:"borderLeftWidth",key:"left",sign:1},{style:"borderRightWidth",key:"right",sign:-1},{style:"borderTopWidth",key:"top",sign:1},{style:"borderBottomWidth",key:"bottom",sign:-1}],function(e){var t=ElementGetBoundingClientRect(e),n=ElementGetComputedStyle(e,null);if(n){var a,i=list.length;for(a=0;a<i;a++){var o=list[a];if(n[o.style]){var r=n[o.style].match(re);r&&(t[o.key]+=parseFloat(r[0])*o.sign)}}}return t}),re,list;function ElementGetViewClientRect(e){for(var t=ElementGetBoundingClientRect(e),n={hidden:1},a={hidden:1},i={inline:1,none:1,"table-column":1,"table-column-group":1};e;){var o=ElementGetBoundingClientRect(e);if(!o)break;if("BODY"==e.tagName)break;var r=ElementGetComputedStyle(e,null);r&&(i[r.display]||(n[r.overflowX]&&(o.right<t.right&&(t.right=o.right),o.left>t.left&&(t.left=o.left)),a[r.overflowY]&&(o.bottom<t.bottom&&(t.bottom=o.bottom),o.top>t.top&&(t.top=o.top)))),e=e.parentNode}return t}function ElementClientRectsTree(e){var t=this;t.hitTestPosition=function(e,n){for(var a=t.parentNode;a;){if(!(c=a.boundingClientRect))break;if(c.bottom+1<e.y)return!1;if(c.top-1>e.y)return!1;if(c.right+1<e.x)return!1;if(c.left-1>e.x)return!1;a=a.parentNode}var i=new Array;for(i.push(t);;){if(!(a=i.pop()))break;var o=a.childNodes,r=o.length;for(l=0;l<r;l++)i.push(o[l]);var l,s=a.clientRects;r=s.length;for(l=0;l<r;l++){var c;if((c=s[l]).bottom+5<e.y);else if(c.top-5>e.y);else if(c.right+2<e.x);else if(!(c.left-2>e.x))return!0}if(!n)return!1}return!1},function(){for(var n={scroll:1,hidden:1,auto:1},a={inline:1,none:1,"table-column":1,"table-column-group":1},i={relative:1,absolute:1,fixed:1,sticky:1},o=!1,r=t,l=e;l;){var s=ElementGetBoundingClientRect(l);if(!s)break;if("BODY"==l.tagName)break;if(d=ElementGetComputedStyle(l,null)){if("fixed"==d.position)break;(o=o?!Boolean(i[d.position]):Boolean("absolute"==d.position))||a[d.display]||n[d.overflow]&&(r.parentNode={boundingClientRect:s},r=r.parentNode)}l=l.parentNode}t.childNodes=new Array,t.clientRects=new Array;var c=new Array;for(c.push({node:e,node_obj:t});;){var _=c.pop();if(!_)break;r=_.node_obj;var u=!0,d=null;if(1==(l=_.node).nodeType&&(d=ElementGetComputedStyle(l,null)),d&&(a[d.display]||n[d.overflow]&&(u=!1)),u){var p=l.childNodes,m=p.length;for(f=0;f<m;f++){var g={childNodes:new Array,clientRects:new Array};c.push({node:p[f],node_obj:g}),r.childNodes.push(g)}}if(l.getClientRects){var f,h=l.getClientRects();m=h.length;for(f=0;f<m;f++)r.clientRects.push(h[f])}}}()}function ElementHitTestPosition(e,t,n){if(!e)return!1;for(var a={scroll:1,hidden:1,auto:1},i={inline:1,none:1,"table-column":1,"table-column-group":1},o={relative:1,absolute:1,fixed:1,sticky:1},r=!1,l=e;l;){if(!(g=ElementGetBoundingClientRect(l)))break;if("BODY"==l.tagName)break;if(_=ElementGetComputedStyle(l,null)){if("fixed"==_.position)break;if(!(r=r?!Boolean(o[_.position]):Boolean("absolute"==_.position))&&!i[_.display]&&a[_.overflow]){if(g.bottom+1<t.y)return!1;if(g.top-1>t.y)return!1;if(g.right+1<t.x)return!1;if(g.left-1>t.x)return!1}}l=l.parentNode}var s=new Array;for(s.push(e);e=s.pop();){var c=!0,_=null;if(1==e.nodeType&&(_=ElementGetComputedStyle(e,null)),_&&(i[_.display]||a[_.overflow]&&(c=!1)),c){var u=e.childNodes,d=u.length;for(p=0;p<d;p++)s.push(u[p])}if(e.getClientRects){var p,m=e.getClientRects();d=m.length;for(p=0;p<d;p++){var g;if((g=m[p]).bottom+5<t.y);else if(g.top-5>t.y);else if(g.right+2<t.x);else if(!(g.left-2>t.x))return!0}}if(!n)return!1}return!1}function ElementHitTestMousePosition(e,t,n){var a=document.elementFromPoint(t.x,t.y);if(n){for(;a;){if(a==e)return!0;a=a.parentNode}return!1}return a==e}function ElementGetVisibility(e){for(var t={visible:1},n={none:1};e;){var a=ElementGetComputedStyle(e,null);if(a){if(!t[a.visibility])return!1;if(n[a.display])return!1}e=e.parentNode}return!0}function ElementGetComputedStyle(e,t){try{var n=e.ownerDocument;if(n){var a=n.defaultView;if(a&&void 0!==a.getComputedStyle)return a.getComputedStyle(e,t)}if(void 0!==e.currentStyle)return e.currentStyle}catch(e){}return null}var ComputedStyleGetSize=function(){var e=new RegExp("([-0-9.]+)px","i"),t=[{i:"width",o:"width"},{i:"height",o:"height"},{i:"paddingLeft",o:"paddingLeft"},{i:"paddingTop",o:"paddingTop"},{i:"paddingRight",o:"paddingRight"},{i:"paddingBottom",o:"paddingBottom"},{i:"borderLeftWidth",o:"borderLeft"},{i:"borderTopWidth",o:"borderTop"},{i:"borderRightWidth",o:"borderRight"},{i:"borderBottomWidth",o:"borderBottom"},{i:"marginLeft",o:"marginLeft"},{i:"marginTop",o:"marginTop"},{i:"marginRight",o:"marginRight"},{i:"marginBottom",o:"marginBottom"}];return function(n){var a,i=t.length,o=new Object;for(a=0;a<i;a++){var r=t[a],l=n[r.i].match(e);o[r.o]=l?parseFloat(l[1]):0}return o.clientWidth=o.width+o.paddingLeft+o.paddingRight,o.clientHeight=o.height+o.paddingTop+o.paddingBottom,o.offsetWidth=o.clientWidth+o.borderLeft+o.borderRight,o.offsetHeight=o.clientHeight+o.borderTop+o.borderBottom,o}}();function ComputedStyleGetPaddingWidth(e){var t,n=new RegExp("([-0-9.]+)px","i"),a=[{i:"paddingLeft",o:"left"},{i:"paddingTop",o:"top"},{i:"paddingRight",o:"right"},{i:"paddingBottom",o:"bottom"}],i=a.length,o=new Object;for(t=0;t<i;t++){var r=a[t],l=e[r.i].match(n);o[r.o]=l?parseFloat(l[1]):0}return o}var ComputedStyleGetBoaderWidth=function(){var e=new RegExp("([-0-9.]+)px","i"),t=[{i:"borderLeftWidth",o:"left"},{i:"borderRightWidth",o:"top"},{i:"borderTopWidth",o:"right"},{i:"borderBottomWidth",o:"bottom"}];return function(n){var a,i=t.length,o=new Object;for(a=0;a<i;a++){var r=t[a],l=n[r.i].match(e);o[r.o]=l?parseFloat(l[1]):0}return o}}();function StyleDeclarationSetTransform(e,t){var n,a=["transform","webkitTransform","MozTransform","msTransform","OTransform"],i=a.length;for(n=0;n<i;n++)if(void 0!==e[a[n]])return e[a[n]]=t,!0;return!1}function StyleDeclarationSetTransformOrigin(e,t){var n,a=["transformOrigin","webkitTransformOrigin","MozTransformOrigin","msTransformOrigin","OTransformOrigin"],i=a.length;for(n=0;n<i;n++)if(void 0!==e[a[n]])return e[a[n]]=t,!0;return!1}function Matrix32(e,t,n,a,i,o){this.a=void 0===e?1:e,this.b=void 0===t?0:t,this.c=void 0===n?0:n,this.d=void 0===a?1:a,this.tx=void 0===i?0:i,this.ty=void 0===o?0:o}function DomNodeGetPreviousElementSibling(e){for(e=e.previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;return e}function DomNodeGetNextElementSibling(e){for(e=e.nextSibling;e&&1!=e.nodeType;)e=e.nextSibling;return e}function DomNodeGetFirstElementChild(e){var t,n=e.childNodes,a=n.length;for(t=0;t<a;t++)if(1==n[t].nodeType)return n[t];return null}function DomNodeGetLastElementChild(e){var t,n=e.childNodes;for(t=n.length-1;t>=0;t--)if(1==n[t].nodeType)return n[t];return null}function DomNodeInsertBefore(e,t){var n=t.parentNode;return!!n&&n.insertBefore(e,t)==e}function DomNodeInsertAfter(e,t){var n=t.parentNode;return!!n&&n.insertBefore(e,t.nextSibling)==e}function DomNodeInsertFirstChild(e,t){try{var n=t.firstChild;return t.insertBefore(e,n)==e}catch(e){return!1}}function DomNodeInsertLastChild(e,t){try{return t.appendChild(e)==e}catch(e){return!1}}function DomNode_InsertBefore(e,t){var n=e.parentNode;return!!n&&n.insertBefore(t,e)==t}function DomNode_InsertAfter(e,t){var n=e.parentNode;return!!n&&n.insertBefore(t,e.nextSibling)==t}function DomNode_InsertFirstChild(e,t){try{var n=e.firstChild;return e.insertBefore(t,n)==t}catch(e){return!1}}function DomNode_InsertLastChild(e,t){try{return e.appendChild(t)==t}catch(e){return!1}}function DomNodeRemove(e){var t=e.parentNode;return!!t&&t.removeChild(e)==e}function DomNodeRemoveChildren(e){var t,n=e.childNodes;for(t=n.length-1;t>=0;t--)e.removeChild(n[t])}function DomNodeGetAttachedDocument(e){if(e.offsetParent)return!0;var t=ElementMatchesSelector(e,"html *");if(void 0===t)try{for(;e;){if(e==document)return!0;e=e.parentNode}}catch(e){}else if(t)return!0;return!1}function DomNodeFindAllDescendants(e,t){return function n(a){var i,o=a.childNodes,r=o.length,l=new Array;for(i=0;i<r;i++)l[i]=o[i];for(i=0;i<r;i++){if(e=t(l[i]))return e;if(e=n(l[i]))return e}return null}(e)}function DomNodeGetNodeValue(e){try{return e.nodeValue}catch(e){}return""}function DomNodeSetNodeValue(e,t){try{e.nodeValue=t}catch(e){}}function DomNodeObserverRemoveFromDocument(e){var t,n;function a(e){t&&t(e)}function i(e){execute_queue.attachLastForRemoveDomNode(a,e)}this.release=function(){n?(n.release(),n=null):e.removeEventListener&&e.removeEventListener("DOMNodeRemovedFromDocument",i)},this.setFunction=function(e){t=e},MutationObserverSupported()?((n=document_observer_remove_node.createElement()).setDomNode(e),n.setFunction(a)):e.addEventListener&&e.addEventListener("DOMNodeRemovedFromDocument",i)}function DomTreeGetBoundingClientRect(e){var t,n,a,i,o={inline:1};if(!e.getBoundingClientRect)return null;var r=e.getBoundingClientRect();return t=r.left,n=r.top,a=r.right,i=r.bottom,function e(r){if(r.getBoundingClientRect){var l=r.getBoundingClientRect();t>l.left&&(t=l.left),n>l.top&&(n=l.top),a<l.right&&(a=l.right),i<l.bottom&&(i=l.bottom)}var s=null;if(1==r.nodeType&&(s=ElementGetComputedStyle(r,null)),s&&o[s.display]){var c,_=r.childNodes,u=_.length;for(c=0;c<u;c++)e(_[c])}}(e),{left:t,top:n,right:a,bottom:i}}Matrix32.prototype={identity:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},translate:function(e,t){this.tx+=e,this.ty+=t},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),a=this.a,i=this.c,o=this.tx;this.a=a*t+this.b*-n,this.b=a*n+this.b*t,this.c=i*t+this.d*-n,this.d=i*n+this.d*t,this.tx=o*t+this.ty*-n,this.ty=o*n+this.ty*t},scale:function(e,t){this.a=this.a*e,this.b=this.b*t,this.c=this.c*e,this.d=this.d*t,this.tx=this.tx*e,this.ty=this.ty*t},multiply:function(e){var t=this.a,n=this.c,a=this.tx;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d,this.tx=a*e.a+this.ty*e.c+e.tx,this.ty=a*e.b+this.ty*e.d+e.ty},transformPosition:function(e){return{x:e.x*this.a+e.y*this.c+this.tx,y:e.x*this.b+e.y*this.d+this.ty}},transformVector:function(e){return{x:e.x*this.a+e.y*this.c,y:e.x*this.b+e.y*this.d}},invert:function(){var e=this.a,t=this.b,n=this.c,a=this.d,i=this.tx,o=this.ty;this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0;var r=t,l=a,s=o;e&&(this.a/=e,r/=e),l-=n*r,this.c-=n*this.a,s-=i*r,this.tx-=i*this.a,l&&(this.c/=l),this.tx-=s*this.c,this.a-=r*this.c,e&&(this.b/=e,t/=e),a-=n*t,this.d-=n*this.b,o-=i*t,this.ty-=i*this.b,a&&(this.d/=a),this.ty-=o*this.d,this.b-=t*this.d},clone:function(){return new Matrix32(this.a,this.b,this.c,this.d,this.tx,this.ty)},toString:function(){return"matrix("+this.a.toFixed(20)+","+this.b.toFixed(20)+","+this.c.toFixed(20)+","+this.d.toFixed(20)+","+this.tx.toFixed(20)+","+this.ty.toFixed(20)+")"}};var DomTreeGetContentClientRect=function(){var e=new RegExp("^([-0-9.]+)px$","i"),t=[{style:"paddingLeft",key:"left",sign:1},{style:"paddingRight",key:"right",sign:-1},{style:"paddingTop",key:"top",sign:1},{style:"paddingBottom",key:"bottom",sign:-1},{style:"borderLeftWidth",key:"left",sign:1},{style:"borderRightWidth",key:"right",sign:-1},{style:"borderTopWidth",key:"top",sign:1},{style:"borderBottomWidth",key:"bottom",sign:-1}];return function(n){var a=DomTreeGetBoundingClientRect(n),i=ElementGetComputedStyle(n,null);if(i){var o,r=t.length;for(o=0;o<r;o++){var l=t[o];if(i[l.style]){var s=i[l.style].match(e);s&&(a[l.key]+=parseFloat(s[0])*l.sign)}}}return a}}();function ElementCloneNode(e,t){return e.cloneNode(t)}function ElementGetTextContent(e){return void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:""}function ElementSetTextContent(e,t){void 0!==e.textContent&&(e.textContent=t),void 0!==e.innerText&&(e.innerText=t)}function ElementMatchesSelector(e,t){return e.matches?e.matches(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):e.oMatchesSelector?e.oMatchesSelector(t):e.msMatchesSelector?e.msMatchesSelector(t):void 0}function ElementRequestFullscreen(e){var t,n=["requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],a=n.length;for(t=0;t<a;t++)if(e[n[t]])return e[n[t]](),!0;return!1}function ElementGetStyleSheet(e){return void 0!==e.sheet?e.sheet:void 0!==e.styleSheet?e.styleSheet:null}function CSSStyleSheetInsertRule(e,t,n,a){return void 0!==e.insertRule?e.insertRule(t+"{"+n+"}",a):void 0!==e.addRule&&e.addRule(t,n,a),a}function CSSStyleSheetGetCSSRuleList(e){try{if(void 0!==e.cssRules)return e.cssRules;if(void 0!==e.rules)return e.rules}catch(e){}return null}function StyleDeclarationSetProperty(e,t,n){if(e.setProperty)e.setProperty(t,n);else try{e[t=t.replace(/[-]([a-z])/g,(function(e,t){return t.toUpperCase()}))]=n}catch(e){}}function StyleDeclarationGetPropertyValue(e,t){if(void 0!==e.getPropertyValue)return e.getPropertyValue(t);try{return e[t.replace(/([a-z]+)-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()}))]}catch(e){}return null}function StyleDeclarationRemoveProperty(e,t){if(e.removeProperty)e.removeProperty(t);else try{e[t=t.replace(/[-]([a-z])/g,(function(e,t){return t.toUpperCase()}))]="none",delete e[t]}catch(e){}}function CSSTextGetInitialDivElement(){return"background-attachment: scroll;background-blend-mode: normal;background-clip: border-box;background-color: rgba(0, 0, 0, 0);background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: repeat;background-size: auto;border-bottom-color: rgb(0, 0, 0);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;border-bottom-style: none;border-bottom-width: 0px;border-collapse: separate;border-image-outset: 0px;border-image-repeat: stretch;border-image-slice: 100%;border-image-source: none;border-image-width: 1;border-left-color: rgb(0, 0, 0);border-left-style: none;border-left-width: 0px;border-right-color: rgb(0, 0, 0);border-right-style: none;border-right-width: 0px;border-top-color: rgb(0, 0, 0);border-top-left-radius: 0px;border-top-right-radius: 0px;border-top-style: none;border-top-width: 0px;bottom: auto;box-shadow: none;box-sizing: content-box;caption-side: top;clear: none;clip: auto;color: rgb(0, 0, 0);cursor: auto;direction: ltr;display: block;empty-cells: show;float: none;font-family: 'MS PGothic';font-kerning: auto;font-size: 16px;font-style: normal;font-variant: normal;font-variant-ligatures: normal;font-weight: normal;height: auto;image-rendering: auto;left: auto;letter-spacing: normal;line-height: normal;list-style-image: none;list-style-position: outside;list-style-type: disc;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-height: none;max-width: none;min-height: 0px;min-width: 0px;object-fit: fill;object-position: 50% 50%;opacity: 1;orphans: auto;outline-color: rgb(0, 0, 0);outline-offset: 0px;outline-style: none;outline-width: 0px;overflow-wrap: normal;overflow: visible;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;page-break-after: auto;page-break-before: auto;page-break-inside: auto;pointer-events: auto;position: static;resize: none;right: auto;speak: normal;table-layout: auto;tab-size: 8;text-align: start;text-decoration: none solid rgb(0, 0, 0);text-indent: 0px;text-rendering: auto;text-shadow: none;text-overflow: clip;text-transform: none;top: auto;transition-delay: 0s;transition-duration: 0s;transition-property: all;transition-timing-function: ease;unicode-bidi: normal;vertical-align: baseline;visibility: visible;white-space: normal;widows: auto;width: auto;word-break: normal;word-spacing: 0px;word-wrap: normal;z-index: auto;zoom: 1;align-content: stretch;align-items: stretch;align-self: stretch;flex-basis: auto;flex-grow: 0;flex-shrink: 1;flex-direction: row;flex-wrap: nowrap;justify-content: flex-start;order: 0;buffered-rendering: auto;clip-path: none;clip-rule: nonzero;mask: none;filter: none;flood-color: rgb(0, 0, 0);flood-opacity: 1;lighting-color: rgb(255, 255, 255);stop-color: rgb(0, 0, 0);stop-opacity: 1;color-interpolation: srgb;color-interpolation-filters: linearrgb;color-rendering: auto;fill: rgb(0, 0, 0);fill-opacity: 1;fill-rule: nonzero;marker-end: none;marker-mid: none;marker-start: none;mask-type: luminance;shape-rendering: auto;stroke: none;stroke-dasharray: none;stroke-dashoffset: 0;stroke-linecap: butt;stroke-linejoin: miter;stroke-miterlimit: 4;stroke-opacity: 1;stroke-width: 1;alignment-baseline: auto;baseline-shift: baseline;dominant-baseline: auto;kerning: 0;text-anchor: start;writing-mode: lr-tb;glyph-orientation-horizontal: 0deg;glyph-orientation-vertical: auto;vector-effect: none;paint-order: fill stroke markers;"}function CSSTextGetInitialImageElement(){return"all:revert;"}function CSSTextGetInitialButtonElement(){return"all:revert;"}function MouseEventGetChangedButtons(e){try{if(e instanceof MouseEvent){var t=0;return 0==e.button&&(t|=1),1==e.button&&(t|=4),2==e.button&&(t|=2),t}}catch(e){}return e.button}function ImageClone(e){var t=document.createElement("img");return t.src=e.src,t}function ImageGetLoaded(e,t){var n,a,i,o,r=!1;function l(){r||(r=!0,n&&(n.release(),n=null),a&&(e.removeEventListener("load",a),a=null),i&&(e.removeEventListener("error",i),i=null),o&&(o.release(),o=null))}function s(){l(),t()}function c(){r||s()}function _(){r||s()}function u(){a=c,i=_,e.addEventListener("load",a),e.addEventListener("error",i)}(n=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){l()})),e.complete?0===e.naturalHeight?((o=new Timer(1e3,1)).oncomplete=function(){e.complete?s():u()},o.start()):s():u()}function ImageGetNaturalSize(e){if(void 0===e.naturalWidth);else if(void 0!==e.naturalHeight)return{width:e.naturalWidth,height:e.naturalHeight};if(UserAgentGetOpera()){var t=e.width,n=e.height;e.removeAttribute("width"),e.removeAttribute("height");var a={width:e.width,height:e.height};return e.width=t,e.height=n,a}return{width:(e=ElementCloneNode(e,!1)).width,height:e.height}}function WheelScrollFromElement(e,t,n){for(var a={result:!1,vector:{x:0,y:0},target:null},i={hidden:1},o={hidden:1};t&&t!=n;){if(n.compareDocumentPosition&&n.compareDocumentPosition(t)&document.DOCUMENT_POSITION_CONTAINS)break;var r=ElementGetComputedStyle(t,null);r||(r={});var l=t.scrollWidth-t.clientWidth,s=t.scrollLeft,c=s+e.x;e.x&&(i[r.overflowX]||e.x<0&&0>=s||e.x>0&&l<=s||(c<0&&(c=0),c>l&&(c=l),t.scrollLeft=c,t.scrollLeft!=s&&(a.result=!0,a.target=t,a.vector.x=c-s)));var _=t.scrollHeight-t.clientHeight,u=t.scrollTop,d=u+e.y;if(e.y&&(o[r.overflowY]||e.y<0&&0>=u||e.y>0&&_<=u||(d<0&&(d=0),d>_&&(d=_),t.scrollTop=d,t.scrollTop!=u&&(a.result=!0,a.target=t,a.vector.y=d-u))),a.result)break;t=t.parentElement}return a}if("UserScript"===page_expand_arguments.execute_type){if(page_expand_arguments.page_expand_parent);else if(WindowIsExecutedByPageExpand(window))return;PageExpandInitialize(),page_expand_project=new PageExpandProject,page_expand_project.loadLocalStorage((function(e){(project=new Project).importObject(ObjectCopy(page_expand_project.getProject(WindowGetOwnerURL(window))));var t=new InternationalMessage(page_expand_project.getLanguage());document.addEventListener&&document.addEventListener("beforeload",(function(e){project.checkAccessBlock(e.url)&&(e.preventDefault(),project.getEnableOutputLog()&&ConsoleLog({type:"AccessBlock",current_url:document.URL,url:e.url,call:"document.beforeload"}))}),!0);var n,a,i,o=new GMW_MenuCommand;(n=page_expand_event_dispatcher.createEventHandler("release")).setFunction((function(){o.release(),n.release(),o=null})),o&&(WindowIsChild(window)||page_expand_arguments.admin==page_expand_arguments.window&&(o.addItem(t.getMessage("context_menu_batch_download_image"),(function(){download_list_image.createArchive()}),"i"),o.addItem(t.getMessage("context_menu_batch_download_user"),(function(){download_list_user.createArchive()}),"u"),project.getEnableStartup()||o.addItem(t.getMessage("context_menu_pageexpand_start"),(function(){PageExpandStart()}),"s"),o.addItem(t.getMessage("context_menu_pageexpand_abort"),(function(){PageExpandRelease()}),"a"),o.addItem(t.getMessage("context_menu_pageexpand_execute_fastest"),(function(){PageExpandExecuteFastest()}),"q"),o.addItem(t.getMessage("context_menu_pageexpand_debug"),(function(){page_expand_debug.setVisible(!0)}),"d"),a=StringUrlMatchAsteriskWord(document.URL,"https://hakuhin.github.io/PageExpand/GreaseMonkey/bbs_board.html*"),i=function(){if(confirm(t.getMessage("context_menu_pageexpand_open_bbs_board_run_confirm"))){PageExpandConstructor(),PageExpandStart();var e=new PageExpandBbsBoard;e.initialize((function(t){t.result&&(e.enableCompactMode(!1),e.setURL(document.URL))}))}},o.addItem(t.getMessage("context_menu_pageexpand_open_bbs_board"),(function(){i()}),"b"),a&&i(),function(){var e="https://hakuhin.github.io/PageExpand/GreaseMonkey/options.html",n=StringUrlMatchAsteriskWord(document.URL,e+"*"),a=function(){if(confirm(t.getMessage("context_menu_pageexpand_config_auto_run_confirm"))){PageExpandConstructor(),PageExpandStart();var e=new PageExpandConfig;e.initialize((function(t){e.MenuItemSelect(PageExpandConfig.MENU_TYPE_SETTING_STANDARD)}))}};o.addItem(t.getMessage("context_menu_pageexpand_config"),(function(){n?a():confirm(t.getMessage("context_menu_pageexpand_config_current_page_confirm")+e)&&(GMW_openInTab.isSupported()?GMW_openInTab(e,{active:!0}):window.open(e,"_blank"))}),"c"),n&&a()}())),project.getEnable()&&(PageExpandConstructor(),(page_expand_arguments.page_expand_parent||project.getEnableStartup())&&PageExpandStart())}))}})({execute_type:"UserScript",admin:window,window:window});