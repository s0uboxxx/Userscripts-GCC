// ==UserScript==
// @name       Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ar    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:bg    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:cs    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:da    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:de    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:el    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:en    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:eo    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:es    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:fi    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:fr    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:fr-CA Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:he    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:hr    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:hu    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:id    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:it    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ja    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ka    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ko    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:nb    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:nl    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:pl    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:pt-BR Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ro    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ru    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:sk    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:sr    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:sv    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:th    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:tr    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:uk    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:ug    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @name:vi    Twitter(X)ᴾˡᵘˢ+++ ; Youtubeᴾˡᵘˢ+++
// @description       This script will provide enhancements to some websites. 🔥Twitter(X): Add time formatting display, HD picture display, picture and video downloading, etc. 🔥Youtube: Add video downloading, ad removal, etc. 🔥Tiktok: Provide HD watermark-free video downloading, etc. For more features, please check the description~
// @description:ar    سيوفر هذا البرنامج النصي تحسينات لبعض المواقع الإلكترونية. 🔥Twitter(X): إضافة عرض تنسيق الوقت، وعرض الصور عالية الدقة، وتنزيل الصور والفيديو، وما إلى ذلك. 🔥Youtube: إضافة تنزيل الفيديو، وإزالة الإعلانات، وما إلى ذلك. 🔥Tiktok: توفير تنزيل فيديو عالي الدقة بدون علامة مائية، وما إلى ذلك. لمزيد من الميزات، يرجى التحقق من الوصف~
// @description:bg    Този скрипт ще предостави подобрения на някои уебсайтове. 🔥Twitter(X): Добавяне на дисплей за форматиране на време, показване на HD картина, изтегляне на снимки и видео и т.н. 🔥Youtube: Добавяне на изтегляне на видео, премахване на реклами и т.н. 🔥Tiktok: Предоставяне на изтегляне на HD видео без воден знак и т.н. За повече функции , моля, проверете описанието~
// @description:cs    Tento skript poskytne vylepšení některých webových stránek. 🔥Twitter(X): Přidejte zobrazení formátování času, zobrazení obrázků HD, stahování obrázků a videí atd. 🔥Youtube: Přidejte stahování videa, odstraňování reklam atd. 🔥Tiktok: Poskytujte stahování videa HD bez vodoznaku atd. Další funkce , zkontrolujte prosím popis~
// @description:da    Dette script vil give forbedringer til nogle websteder. 🔥Twitter(X): Tilføj tidsformateringsvisning, HD-billedvisning, billed- og videodownload osv. 🔥Youtube: Tilføj videodownload, annoncefjernelse osv. 🔥Tiktok: Giver HD vandmærkefri videodownload osv. For flere funktioner , tjek venligst beskrivelsen~
// @description:de    Dieses Skript verbessert einige Websites. 🔥Twitter(X): Fügt Zeitformatanzeige, HD-Bildanzeige, Bild- und Video-Downloads usw. hinzu. 🔥Youtube: Fügt Video-Downloads, Anzeigenentfernung usw. hinzu. 🔥Tiktok: Bietet HD-Video-Downloads ohne Wasserzeichen usw. Weitere Funktionen finden Sie in der Beschreibung~
// @description:el    Αυτό το σενάριο θα παρέχει βελτιώσεις σε ορισμένους ιστότοπους. 🔥Twitter(X): Προσθήκη εμφάνισης μορφοποίησης ώρας, προβολής εικόνων HD, λήψης εικόνων και βίντεο κ.λπ. 🔥Youtube: Προσθήκη λήψης βίντεο, αφαίρεση διαφημίσεων κ.λπ. 🔥Tiktok: Παρέχετε λήψη βίντεο HD χωρίς υδατογράφημα κ.λπ. Για περισσότερες δυνατότητες , ελέγξτε την περιγραφή~
// @description:en    This script will provide enhancements to some websites. 🔥Twitter(X): Add time formatting display, HD picture display, picture and video downloading, etc. 🔥Youtube: Add video downloading, ad removal, etc. 🔥Tiktok: Provide HD watermark-free video downloading, etc. For more features, please check the description~
// @description:eo    Ĉi tiu skripto provizos plibonigojn al iuj retejoj. 🔥Twitter(X): Aldonu horformatan ekranon, HD-bildon, elŝuton de bildoj kaj filmetojn ktp. 🔥Youtube: Aldonu video-elŝutadon, forigon de reklamoj ktp. 🔥Tiktok: Provizu HD-senpagan video-elŝutadon, ktp. Por pliaj funkcioj , bonvolu kontroli la priskribon~
// @description:es    Este script proporcionará mejoras a algunos sitios web.🔥twitter (x): agregue la pantalla de formato de tiempo, visualización de imágenes HD, descarga de imágenes y videos, etc. 🔥Youtube: Agregue la descarga de video, eliminación de anuncios, etc. 🔥tiktok: proporcione descarga de video sin marca de agua HD, etc. para obtener más funciones, por favor verifique la descripción ~
// @description:fi    Tämä komentosarja tarjoaa parannuksia joihinkin verkkosivustoihin. 🔥Twitter(X): Lisää ajan muotoilun näyttö, HD-kuvanäyttö, kuvien ja videoiden lataus jne. 🔥Youtube: Lisää videoiden lataus, mainosten poisto jne. 🔥Tiktok: Tarjoa HD-vesileimatonta videoiden latausta jne. Lisää ominaisuuksia , tarkista kuvaus~
// @description:fr    Ce script apportera des améliorations à certains sites Web. 🔥Twitter(X) : Ajout de l'affichage du formatage de l'heure, de l'affichage d'images HD, du téléchargement d'images et de vidéos, etc. 🔥Youtube : Ajout du téléchargement de vidéos, de la suppression des publicités, etc. 🔥Tiktok : Fournit un téléchargement de vidéos HD sans filigrane, etc. Pour plus de fonctionnalités, veuillez consulter la description~
// @description:fr-CA Ce script apportera des améliorations à certains sites Web. 🔥Twitter(X) : Ajout de l'affichage du formatage de l'heure, de l'affichage d'images HD, du téléchargement d'images et de vidéos, etc. 🔥Youtube : Ajout du téléchargement de vidéos, de la suppression des publicités, etc. 🔥Tiktok : Fournit un téléchargement de vidéos HD sans filigrane, etc. Pour plus de fonctionnalités, veuillez consulter la description~
// @description:he    סקריפט זה יספק שיפורים לאתרים מסוימים. 🔥Twitter(X): הוסף תצוגת עיצוב זמן, תצוגת תמונות HD, הורדת תמונות ווידאו וכו'. 🔥YouTube: הוסף הורדת וידאו, הסרת מודעות וכו'. , אנא בדוק את התיאור~
// @description:hr    Ova skripta će poboljšati neke web stranice. 🔥Twitter(X): Dodajte prikaz formatiranja vremena, HD prikaz slike, preuzimanje slika i videa itd. 🔥Youtube: Dodajte preuzimanje videa, uklanjanje oglasa itd. 🔥Tiktok: Omogućite preuzimanje HD videa bez vodenog žiga itd. Za više značajki , provjerite opis~
// @description:hu    Ez a szkript fejlesztéseket biztosít bizonyos webhelyeken. 🔥Twitter(X): Időformázási megjelenítés hozzáadása, HD képmegjelenítés, kép- és videóletöltés stb. 🔥Youtube: Videó letöltése, hirdetések eltávolítása stb. , ellenőrizze a leírást~
// @description:id    Skrip ini akan memberikan peningkatan pada beberapa situs web. 🔥Twitter(X): Menambahkan tampilan format waktu, tampilan gambar HD, pengunduhan gambar dan video, dll. 🔥Youtube: Menambahkan pengunduhan video, penghapusan iklan, dll. 🔥Tiktok: Menyediakan pengunduhan video HD tanpa tanda air, dll. Untuk fitur lainnya, silakan periksa deskripsi~
// @description:it    Questo script migliorerà alcuni siti web. 🔥Twitter(X): aggiunge la visualizzazione della formattazione dell'ora, la visualizzazione delle immagini HD, il download di immagini e video, ecc. 🔥Youtube: aggiunge il download di video, la rimozione degli annunci, ecc. 🔥Tiktok: fornisce il download di video HD senza filigrana, ecc. Per altre funzionalità, controlla la descrizione~
// @description:ja    このスクリプトは、いくつかのウェブサイトの機能強化を提供します。🔥Twitter(X): 時間フォーマット表示、HD画像表示、画像とビデオのダウンロードなどを追加します。🔥Youtube: ビデオのダウンロード、広告の削除などを追加します。🔥Tiktok: HDウォーターマークのないビデオのダウンロードなどを提供します。その他の機能については、説明を確認してください~
// @description:ka    This script will provide enhancements to some websites. 🔥Twitter(X): Add time formatting display, HD picture display, picture and video downloading, etc. 🔥Youtube: Add video downloading, ad removal, etc. 🔥Tiktok: Provide HD watermark-free video downloading, etc. For more features, please check the description~
// @description:ko    이 스크립트는 일부 웹사이트에 개선 사항을 제공합니다. 🔥Twitter(X): 시간 형식 표시, HD 사진 표시, 사진 및 비디오 다운로드 등을 추가합니다. 🔥Youtube: 비디오 다운로드, 광고 제거 등을 추가합니다. 🔥Tiktok: HD 워터마크 없는 비디오 다운로드 등을 제공합니다. 자세한 내용은 설명을 확인하세요~
// @description:nb    Dette skriptet vil gi forbedringer til enkelte nettsteder. 🔥Twitter(X): Legg til tidsformateringsvisning, HD-bildevisning, bilde- og videonedlasting osv. 🔥Youtube: Legg til videonedlasting, annonsefjerning osv. 🔥Tiktok: Gi HD vannmerkefri videonedlasting osv. For flere funksjoner , sjekk beskrivelsen~
// @description:nl    Dit script zal verbeteringen aan sommige websites bieden. 🔥Twitter(X): Voeg weergave van tijdsopmaak, HD-afbeeldingsweergave, downloaden van afbeeldingen en video's, enz. toe. 🔥Youtube: Voeg videodownloads, advertentieverwijdering, enz. toe. 🔥Tiktok: Biedt HD-watermerkvrije videodownloads, enz. Voor meer functies, bekijk de beschrijving~
// @description:pl    Ten skrypt wprowadzi ulepszenia do niektórych witryn internetowych. 🔥Twitter(X): Dodaj wyświetlanie formatu czasu, wyświetlanie obrazów HD, pobieranie obrazów i filmów itp. 🔥Youtube: Dodaj pobieranie filmów, usuwanie reklam itp. 🔥Tiktok: Zapewnij pobieranie filmów HD bez znaku wodnego itp. Aby uzyskać więcej funkcji, sprawdź opis~
// @description:pt-BR Este script fornecerá melhorias para alguns sites. 🔥Twitter(X): Adicione exibição de formatação de hora, exibição de imagem em HD, download de imagem e vídeo, etc. 🔥Youtube: Adicione download de vídeo, remoção de anúncios, etc. 🔥Tiktok: Forneça download de vídeo em HD sem marca d'água, etc. Para mais recursos, verifique a descrição~
// @description:ro    Acest script va oferi îmbunătățiri unor site-uri web. 🔥Twitter(X): Adăugați afișaj de formatare a orei, afișare a imaginii HD, descărcare de imagini și videoclipuri etc. 🔥Youtube: Adăugați descărcare video, eliminare a reclamelor etc. 🔥Tiktok: Oferiți descărcare video HD fără filigran etc. Pentru mai multe funcții , vă rugăm să verificați descrierea~
// @description:ru    Этот скрипт улучшит работу некоторых веб-сайтов. 🔥Twitter(X): Добавить отображение форматирования времени, отображение HD-изображений, загрузку изображений и видео и т. д. 🔥Youtube: Добавить загрузку видео, удалить рекламу и т. д. 🔥TikTok: Обеспечить загрузку HD-видео без водяных знаков и т. д. Для получения дополнительных функций, пожалуйста, проверьте описание~
// @description:sk    Tento skript poskytne vylepšenia niektorých webových stránok. 🔥Twitter(X): Pridajte zobrazenie formátovania času, zobrazenie HD obrázkov, sťahovanie obrázkov a videí atď. 🔥Youtube: Pridajte sťahovanie videa, odstraňovanie reklám atď. 🔥Tiktok: Poskytnite sťahovanie videa HD bez vodoznaku atď. Ďalšie funkcie , prosím skontrolujte popis ~
// @description:sr    Ова скрипта ће пружити побољшања неким веб локацијама. 🔥Твиттер(Кс): Додајте приказ форматирања времена, приказ ХД слике, преузимање слика и видео записа итд. 🔥Иоутубе: Додајте преузимање видео записа, уклањање огласа итд. 🔥Тикток: Омогућите преузимање видео записа у ХД-у без воденог жига итд. За више функција , молимо проверите опис~
// @description:sv    Detta skript kommer att ge förbättringar till vissa webbplatser. 🔥Twitter(X): Lägg till tidsformateringsvisning, HD-bildvisning, bild- och videonedladdning, etc. 🔥Youtube: Lägg till videonedladdning, annonsborttagning etc. 🔥Tiktok: Tillhandahåller HD vattenstämpelfri videonedladdning, etc. För fler funktioner , kontrollera beskrivningen~
// @description:th    สคริปต์นี้จะให้การปรับปรุงแก่บางเว็บไซต์🔥twitter (x): เพิ่มการจัดรูปแบบการจัดรูปแบบการจัดรูปแบบการแสดงภาพ HD รูปภาพและวิดีโอการดาวน์โหลด ฯลฯ 🔥youtube: เพิ่มการดาวน์โหลดวิดีโอการลบโฆษณา ฯลฯ 🔥tiktok: ให้การดาวน์โหลดวิดีโอที่ปราศจากลายน้ำ HD ฯลฯ สำหรับคุณสมบัติเพิ่มเติมโปรดตรวจสอบคำอธิบาย ~
// @description:tr    Bu script bazı web sitelerine geliştirmeler sağlayacaktır. 🔥Twitter(X): Zaman biçimlendirme gösterimi, HD resim gösterimi, resim ve video indirme vb. ekleyin. 🔥Youtube: Video indirme, reklam kaldırma vb. ekleyin. 🔥Tiktok: HD filigransız video indirme vb. sağlayın. Daha fazla özellik için lütfen açıklamayı kontrol edin~
// @description:uk    Цей сценарій покращить роботу деяких веб-сайтів. 🔥Twitter(X): додайте відображення форматування часу, відображення HD-зображення, завантаження зображень і відео тощо. 🔥Youtube: додайте завантаження відео, видалення реклами тощо. 🔥Tiktok: забезпечте завантаження відео HD без водяних знаків тощо. Для додаткових функцій , будь ласка, перевірте опис~
// @description:ug    بۇ قوليازما بەزى تور بېكەتلەرنى ياخشىلاش بىلەن تەمىنلەيدۇ. 🔥Twitter (X): ۋاقىت فورماتلاش ئېكرانى ، HD رەسىم كۆرسىتىش ، رەسىم ۋە سىن چۈشۈرۈش قاتارلىقلارنى قوشۇڭ outYoutube: سىن چۈشۈرۈش ، ئېلان ئۆچۈرۈش قاتارلىقلارنى قوشۇڭ ikTiktok: HD سۇ ماركىسىسىز سىن چۈشۈرۈش قاتارلىقلار بىلەن تەمىنلەڭ. ، چۈشەندۈرۈشنى تەكشۈرۈپ بېقىڭ ~
// @description:vi    Tập lệnh này sẽ cung cấp các cải tiến cho một số trang web. 🔥Twitter(X): Thêm hiển thị định dạng thời gian, hiển thị hình ảnh HD, tải xuống hình ảnh và video, v.v. 🔥Youtube: Thêm tải xuống video, xóa quảng cáo, v.v. 🔥Tiktok: Cung cấp tải xuống video HD không có hình mờ, v.v. Để biết thêm các tính năng, vui lòng kiểm tra phần mô tả~
// @namespace   PeterParker_X_Y_NameScope
// @version     1.1.9
// @author      PeterParker
// @icon        data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABhxJREFUeF7lm09oHUUcx3/7nm0aWou2CtL2kFLbREXFRPBU+tJb8Gb1Yg8VhIhHb6U86HvwKKWCR8WAx3qRipfYW7rBk2Iq2EvTKkUspRhbJTRpm/p25TdvZ3d2dmb2N7vzNnnJQMhLdnZ2vp/5/dvdeR5s8eZtcf1QHYDmL40EdhB99o4BhPPpRaj50HnDr2ph+guAiQ7PRmIEAFR5YZv17Ey0qGfY9nMPIBEdCz56/xab19F70e/ob/zfD3sOxnM+d/i4Yf79geEOgCSciz5zcw74Z8rqIBD2s7f3O9vcgigPQCHcVrQOzLkXj4PeKtyAKAegudAC8JiP4yq7Ei4DyQVRIkYUB9C8egUAmJ+j+Ms/fkWx8FJ9pt76UOMW4ENnfLLI4PYAeiaP4lnDVT/z21yRaxc6x2wN3qRtCrUDIJj8eojnxFy6BB3ABhHvGgINgGT2Vfl8no8YYgIA0NyBCOBqKE7mweVm3twqO75rqqO/Vmc8V19uBxCi/Xr6vU4lFktoCZqWmx3MACS/x4tspNXnos2uELZN9xJ6AArxVac8FFifeBW6C9eMLpVjBcZ4YAXAZvV3fHk+nvSTmYtKEShu2/TJuN+jj07Hn/EYH+PJzNewNnPRCMFsBfpCSQ2g5OqLk8dZozDVKqJA7IsNj4sAxGN4fOXNt8sA0FpBJQB0k9/582wsygRAPqYike8GaivIAlCsvm3wM62sOHkRgGwl3D2ChWvQXfg1Nw7guMaUyC6crQ1IAGwLHwoAqpvYFBQ5cQCHyqRFBYB00VMk94srqwtg26dPwrbp92N9opvIwRGtIC8I4kDme4ToUlJxlAagMX+b9CevLAJAE5YbRn9dACxqHSQAkhv0HQDFhOUgJ1uHLovIYxMCYcYNJABZ88cz8GEH9bmenL4oAGQ3sU2B/Bp9A2DjAvLkdVUcN39VnWBKjyagNBdIZ4PEAqRbXvFCNgBcBMB0FZlfBfK5lgSQPOCUKVPTIDV4mdIkdQyVJWwKAEUDIDkNMnLJHaLgAnoLoFaC1OBlchPqGCoLyK8E+VkFAFAygYsKsGgAJGYATiCuCAULSJ7zq+hS4gBl8iYTVxVRlArQzvwLugDFDVAcb7obGBRZn3gt7icKLBMA6eZfAgDFDSiFj+s+9OhvjAHpNz66Sdo8FXItVDee3eprLYAGwKYoqgKA/eoXqARlIRvJFexXH3ecJO8L5Juh+I2vafUoGaGK1cdrrAsAvDAVQv1IgqJ+mI6lezPp272hP88eQPo9gWQBtDjAp8PjAYpEcTVBoCicLtvck4MIIjgIafiQ4dWYcjgTADyhqX4mgIcae3ubnBrP3YJj/HP025XIouO0b/Q2WPl/HwT/nmpvUTSy8ZFYD4AyDrRG5+Dskeo2QhQFgechjNaiasdZ9jUZc4Hwm7FGUOttd1lYHRmZXR4/JU+gse8u4M8gNP/OC4A/cnt5x+35d5/5iW3CrAXge+9d92MAYS3Z9qIS6e3eA7D72UHQD7D8D4TL941z9QJvMgaAPbuXxlpesqsze/LQMHjP79sUALh4FJPKAkYIAwQgXLoD8PihOgeA166fuB5vvc28GAkujaZ2g8SjbAYAHvi1dxZT2+kyADAgKuPBJgAgmj5fWOXbYaUrDBKA279nzF8lPhMD+Fk6K/AOHBqIIBgqANROLCoXW/nP4NvRKxD26gKxDTKAUAp+RhfQBUJbAGJJOh+Vp1iqqhqW13LDcpuX3zamp7IAVvworIAeBDFnalyAC21H5aexFrdRIvVFGByUtix//BBYGlQ0lRVk06DG/FnAwEJoaBi6q6vw5901+O6vV+CTpY9LSCp/6uzYZ/D68B+w/8DTvcHKANCmwGiej4KnYHnpX1hdWYOVB2vwRXgKPg8+KK+ixAgXhj6Fqf++h527trNRRl7ary2CVG6QsgAEQJ0L1tGg2VBBHcNNv94dHnXubN5Cy98qmzdLBoE5CP92WN4Zro77AF7b9vsB8sXLA+AjVgfCiXA+bXcA+g/CqfD+ARBtrJxVRL5a3sxNPufeAkxXY7tQ+Ndm4zUQvj5bSwJURV+frRaAq/DncJwtD+B/6XGfbp4XQ5oAAAAASUVORK5CYII=
// @include     https://x.com/*
// @include     https://twitter.com/*
// @include     https://mobile.x.com/*
// @include     https://www.youtube.com/**
// @include     https://music.youtube.com/watch**
// @include     https://www.tiktok.com/@*
// @include     https://cobalt.tools/**
// @include     /^https:\/\/((ko|fr|es|ja|pt|it|th|ar|tr|de|he|nl|pl|www|best)+\.)?aliexpress\.(ru|us|com)\/*/
// @include     /^https:\/\/(www\.)?lazada\.(co\.id|vn|com\.my|co\.th|sg|com\.ph)/.*/
// @include     /^https:\/\/([a-z]{2,3})\.banggood\.com/*/
// @include     *://www.ebay.*/*
// @include     *://www.bestbuy.com/*
// @exclude     *://accounts.youtube.com/*
// @exclude     *://www.youtube.com/live_chat_replay*
// @exclude     *://www.youtube.com/persist_identity*
// @exclude     *://x.com/i/flow/*
// @connect     tikdownloader.io
// @license     MIT
// @run-at      document-idle
// @antifeature referral-link
// @grant       GM_registerMenuCommand
// @grant       GM_openInTab
// @grant       GM.openInTab
// @grant       GM_addStyle
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_xmlhttpRequest
// @grant       GM_download
// @grant       GM_setClipboard
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/Twitter28X29E1B4BECBA1E1B598CBA22B2B2B203B20YoutubeE1B4BECBA1E1B598CBA22B2B2B.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/Twitter28X29E1B4BECBA1E1B598CBA22B2B2B203B20YoutubeE1B4BECBA1E1B598CBA22B2B2B.meta.js
// ==/UserScript==
!function(){"use strict";const e={zh:{dateFormat:{week:["日","一","二","三","四","五","六"]},download:{download:"下载",completed:"下载完成",tip:"点击下载视频",preparing:"正在准备下载（如果失败，请手动操作）"},menuCommand:{settings:"设置",titleDateFormat:"时间格式设置：",buttonClose:"关闭"}},en:{dateFormat:{week:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},download:{download:"Download",completed:"Download Completed",tip:"Click to download video",preparing:"Preparing to download (if failed, please do it manually)"},menuCommand:{settings:"Settings",titleDateFormat:"Time format settings:",buttonClose:"Close"}},ja:{dateFormat:{week:["日","月","火","水","木","金","土"]},download:{download:"ダウンロード",completed:"ダウンロード完了",tip:"クリックしてビデオをダウンロード",preparing:"ダウンロードの準備中（失敗する場合は手動で行ってください）"},menuCommand:{settings:"設定",titleDateFormat:"時刻形式の設定:",buttonClose:"閉鎖"}},fr:{dateFormat:{week:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},download:{download:"télécharger",completed:"éléchargement terminé",tip:"Cliquez pour télécharger la vidéo",preparing:"Préparation du téléchargement (en cas d'échec, veuillez le faire manuellement)"},menuCommand:{settings:"installation",titleDateFormat:"Paramètres du format de l'heure :",buttonClose:"fermeture"}},de:{dateFormat:{week:["Son","Mon","Die","Mit","Don","Fre","Sam"]},download:{download:"herunterladen",completed:"Download abgeschlossen",tip:"Klicken Sie hier, um das Video herunterzuladen",preparing:"Vorbereitung für den Download (falls der Download fehlschlägt, führen Sie ihn bitte manuell durch)"},menuCommand:{settings:"aufstellen",titleDateFormat:"Einstellungen für das Zeitformat:",buttonClose:"Schließung"}},it:{dateFormat:{week:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},download:{download:"scaricamento",completed:"Download completato",tip:"Fare clic per scaricare il video",preparing:"Preparazione per il download (se fallisce, eseguilo manualmente)"},menuCommand:{settings:"impostare",titleDateFormat:"Impostazioni del formato dell'ora:",buttonClose:"chiusura"}},ko:{dateFormat:{week:["일","월","화","수","목","금","토"]},download:{download:"다운로드",completed:"다운로드 완료",tip:"비디오를 다운로드하려면 클릭하세요",preparing:"다운로드 준비 중 (실패할 경우 수동으로 진행해주세요)"},menuCommand:{settings:"설정",titleDateFormat:"시간 형식 설정:",buttonClose:"폐쇄"}},ru:{dateFormat:{week:["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"]},download:{download:"скачать",completed:"Загрузка завершена",tip:"Нажмите, чтобы скачать видео",preparing:"Подготовка к загрузке (если не получается, сделайте это вручную)"},menuCommand:{settings:"настраивать",titleDateFormat:"Настройки формата времени:",buttonClose:"закрытие"}},pt:{dateFormat:{week:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},download:{download:"descargar",completed:"Descarga completa",tip:"Clique para baixar o vídeo",preparing:"Preparação para download (se falhar, faça-o manualmente)"},menuCommand:{settings:"configuración",titleDateFormat:"Configuración de formato de hora:",buttonClose:"cierre"}},es:{dateFormat:{week:["DOM","LUN","MAR","MIER","JUE","VIE","SÁB"]},download:{download:"descargar",completed:"Descarga completa",tip:"Haga clic para descargar el vídeo",preparing:"Preparándose para la descarga (si falla, hágalo manualmente)"},menuCommand:{settings:"configuración",titleDateFormat:"Configuración de formato de hora:",buttonClose:"cierre"}},th:{dateFormat:{week:["วันอาทิตย์","วันจันทร์","วันอังคาร","วันพุธ"," วันพฤหัสบดี","วันศุกร์ ","วันเสาร์ "]},download:{download:"ดาวน์โหลด",completed:"ดาวน์โหลดเสร็จสมบูรณ์",tip:"คลิกเพื่อดาวน์โหลดวิดีโอ",preparing:"กำลังเตรียมการดาวน์โหลด (หากล้มเหลว กรุณาดำเนินการด้วยตนเอง)"},menuCommand:{settings:"ตั้งค่า",titleDateFormat:"การตั้งค่ารูปแบบเวลา：",buttonClose:"ปิด"}},tr:{dateFormat:{week:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},download:{download:"indirmek",completed:"İndirme tamamlandı",tip:"Videoyu indirmek için tıklayın",preparing:"İndirmeye hazırlanıyor (başarısız olursa lütfen manuel olarak yapın)"},menuCommand:{settings:"kurmak",titleDateFormat:"Saat formatı ayarları：",buttonClose:"kapatma"}},nl:{dateFormat:{week:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},download:{download:"downloaden",completed:"Downloaden voltooid",tip:"Klik om video te downloaden",preparing:"Voorbereiden voor downloaden (als dit mislukt, doe dit dan handmatig)"},menuCommand:{settings:"opgezet",titleDateFormat:"Instellingen tijdformaat:",buttonClose:"sluiting"}}},t={zh:{operat:{copied:"Ohhhh！已复制！"},dialog:{title:"设置",contentPieceMax:"最大浏览记录数(最小: {min}，最大:{max}，改变的值自动保存)：",contentPieceClear:"清除所有浏览历史记录。注意：清除后历史记录不可恢复，请谨慎操作。",contentPieceClearBtn:"清除",clearConfirmContent:"是否要清除所有浏览记录？一旦被清除，将无法恢复~"},historyToolbar:{boxTitle:"浏览记录",expandTipText:"记录"},menuCommand:{settings:"设置",buttonClose:"关闭",goodsHistories:{clear:"清空所有商品浏览记录"}}},en:{operat:{copied:"Ohhhh, Copied!"},dialog:{title:"Ohhhh! I'm settings",contentPieceMax:"Maximum number of browsing histories(min:{min}, max:{max}, Changed values ​​are automatically saved)：",contentPieceClear:"Clear all browsing history. Note: The history cannot be restored after clearing. Please operate with caution.",contentPieceClearBtn:"Clear",clearConfirmContent:"Do you want to clear all browsing history? Once cleared, it cannot be restored"},historyToolbar:{boxTitle:"Browsing history",expandTipText:"History"},menuCommand:{settings:"Settings",buttonClose:"Close",goodsHistories:{clear:"Clear all product browsing history"}}},ja:{operat:{copied:"Ohhhh, コピーされました"},dialog:{title:"設定",contentPieceMax:"閲覧レコードの最大数（最小値：{min}、最大値：{max}、変更された値は自動的に保存されます）：",contentPieceClear:"すべての閲覧履歴を消去します。 ※クリア後の履歴は元に戻せませんので、慎重に操作してください。",contentPieceClearBtn:"クリア",clearConfirmContent:"すべての閲覧履歴を消去しますか?一度クリアすると元に戻せませんよ～"},historyToolbar:{boxTitle:"閲覧履歴",expandTipText:"記録"},menuCommand:{settings:"設定",buttonClose:"閉鎖",goodsHistories:{clear:"製品の閲覧履歴をすべて消去する"}}},fr:{operat:{copied:"Ohhhh, Copié!"},dialog:{title:"installation",contentPieceMax:"Nombre maximum d'enregistrements de navigation (minimum : {min}, maximum : {max}, les valeurs modifiées sont automatiquement enregistrées) :",contentPieceClear:"Effacez tout l’historique de navigation. Remarque : L'historique ne peut pas être récupéré après l'effacement, veuillez agir avec prudence.",contentPieceClearBtn:"Clair",clearConfirmContent:"Voulez-vous effacer tout l’historique de navigation ? Une fois effacé, il ne peut pas être restauré ~"},historyToolbar:{boxTitle:"Historique de navigation",expandTipText:"Enregistrer"},menuCommand:{settings:"installation",buttonClose:"fermeture",goodsHistories:{clear:"Effacer tout l'historique de navigation des produits"}}},de:{operat:{copied:"Ohhhh, Kopiert!"},dialog:{title:"aufstellen",contentPieceMax:"Maximale Anzahl an Browsing-Datensätzen (Minimum: {min}, Maximum: {max}, geänderte Werte werden automatisch gespeichert):",contentPieceClear:"Löschen Sie den gesamten Browserverlauf. Hinweis: Der Verlauf kann nach dem Löschen nicht wiederhergestellt werden. Bitte gehen Sie vorsichtig vor.",contentPieceClearBtn:"Klar",clearConfirmContent:"Möchten Sie den gesamten Browserverlauf löschen? Nach dem Löschen kann es nicht wiederhergestellt werden~"},historyToolbar:{boxTitle:"Browser-Verlauf",expandTipText:"Aufzeichnen"},menuCommand:{settings:"aufstellen",buttonClose:"Schließung",goodsHistories:{clear:"Löschen Sie den gesamten Browserverlauf des Produkts"}}},it:{operat:{copied:"Ohhhh, Copiato!"},dialog:{title:"impostare",contentPieceMax:"Numero massimo di record di navigazione (minimo: {min}, massimo: {max}, i valori modificati vengono salvati automaticamente):",contentPieceClear:"Cancella tutta la cronologia di navigazione. Nota: la cronologia non può essere recuperata dopo la cancellazione, si prega di operare con cautela.",contentPieceClearBtn:"Chiaro",clearConfirmContent:"Vuoi cancellare tutta la cronologia di navigazione? Una volta cancellato, non può essere ripristinato~"},historyToolbar:{boxTitle:"Cronologia di navigazione",expandTipText:"Documentazione"},menuCommand:{settings:"impostare",buttonClose:"chiusura",goodsHistories:{clear:"Cancella tutta la cronologia di navigazione del prodotto"}}},ko:{operat:{copied:"Ohhhh, 복사됨！"},dialog:{title:"설정",contentPieceMax:"최대 검색 기록 수(최소: {min}, 최대: {max}, 변경된 값은 자동으로 저장됩니다):",contentPieceClear:"모든 검색 기록을 지웁니다. 참고: 삭제 후에는 기록을 복구할 수 없으므로 주의해서 조작하시기 바랍니다.",contentPieceClearBtn:"분명한",clearConfirmContent:"모든 검색 기록을 삭제하시겠습니까? 한번 삭제하면 복원이 불가능해요~"},historyToolbar:{boxTitle:"검색 기록",expandTipText:"기록"},menuCommand:{settings:"설정",buttonClose:"폐쇄",goodsHistories:{clear:"모든 제품 검색 기록 지우기"}}},ru:{operat:{copied:"Ohhhh, Скопировано!"},dialog:{title:"настраивать",contentPieceMax:"Максимальное количество записей просмотра (минимум: {min}, максимум: {max}, измененные значения сохраняются автоматически):",contentPieceClear:"Очистить всю историю просмотров. Примечание. После очистки историю невозможно восстановить, действуйте осторожно.",contentPieceClearBtn:"Прозрачный",clearConfirmContent:"Хотите очистить всю историю просмотров? После очистки его невозможно восстановить~"},historyToolbar:{boxTitle:"История браузера",expandTipText:"Записывать"},menuCommand:{settings:"настраивать",buttonClose:"закрытие",goodsHistories:{clear:"Очистить всю историю просмотра товаров"}}},pt:{operat:{copied:"Ohhhh, Copiado!"},dialog:{title:"configurar",contentPieceMax:"Número máximo de registos de navegação (mínimo: {min}, máximo: {max}, os valores alterados são guardados automaticamente):",contentPieceClear:"Limpe todo o histórico de navegação. Nota: O histórico não pode ser recuperado após a limpeza, opere com cuidado.",contentPieceClearBtn:"Claro",clearConfirmContent:"Quer limpar todo o histórico de navegação? Uma vez limpo, não pode ser restaurado ~"},historyToolbar:{boxTitle:"Histórico de navegação",expandTipText:"Registo"},menuCommand:{settings:"configuración",buttonClose:"cierre",goodsHistories:{clear:"Quer limpar todo o histórico de navegação do produto? Uma vez limpo, não será recuperável"}}},es:{operat:{copied:"Ohhhh, Copiado!"},dialog:{title:"configuración",contentPieceMax:"Número máximo de registros de navegación (mínimo: {min}, máximo: {max}, los valores modificados se guardan automáticamente):",contentPieceClear:"Borrar todo el historial de navegación. Nota: El historial no se puede recuperar después de borrarlo; opere con precaución.",contentPieceClearBtn:"Claro",clearConfirmContent:"¿Quieres borrar todo el historial de navegación? Una vez borrado, no se puede restaurar ~"},historyToolbar:{boxTitle:"Historial de navegación",expandTipText:"Registro"},menuCommand:{settings:"configuración",buttonClose:"cierre",goodsHistories:{clear:"Borrar todo el historial de navegación de productos"}}},th:{operat:{copied:"Ohhhh！โอ้! คัดลอก！"},dialog:{title:"ตั้งค่า",contentPieceMax:"จำนวนบันทึกการสืบค้นสูงสุด (ขั้นต่ำ: {min}, สูงสุด: {max}, ค่าที่เปลี่ยนแปลงจะถูกบันทึกโดยอัตโนมัติ)：",contentPieceClear:"ล้างประวัติการเข้าชมทั้งหมด หมายเหตุ: ไม่สามารถกู้คืนประวัติได้หลังจากเคลียร์แล้ว โปรดดำเนินการด้วยความระมัดระวัง",contentPieceClearBtn:"ชัดเจน",clearConfirmContent:"คุณต้องการล้างประวัติการเข้าชมทั้งหมดหรือไม่? เมื่อเคลียร์แล้วจะไม่สามารถกู้คืนได้~"},historyToolbar:{boxTitle:"ประวัติการเรียกดู",expandTipText:"บันทึก"},menuCommand:{settings:"ตั้งค่า",buttonClose:"ปิด",goodsHistories:{clear:"ล้างประวัติการเรียกดูผลิตภัณฑ์ทั้งหมด"}}},tr:{operat:{copied:"Ohhhh，Kopyalandı！"},dialog:{title:"kurmak",contentPieceMax:"Maksimum tarama kaydı sayısı (minimum: {min}, maksimum: {max}, değiştirilen değerler otomatik olarak kaydedilir):",contentPieceClear:"Tüm tarama geçmişini temizleyin. Not: Geçmiş temizlendikten sonra kurtarılamaz, lütfen dikkatli çalışın.",contentPieceClearBtn:"Temizlemek",clearConfirmContent:"Tüm tarama geçmişini temizlemek istiyor musunuz? Bir kez temizlendiğinde geri yüklenemez~"},historyToolbar:{boxTitle:"Tarama geçmişi",expandTipText:"Kayıt"},menuCommand:{settings:"kurmak",buttonClose:"kapatma",goodsHistories:{clear:"Tüm ürün tarama geçmişini temizle"}}},nl:{operat:{copied:"Ohhhh, Gekopieerd！"},dialog:{title:"opgezet",contentPieceMax:"Maximaal aantal browserecords (minimaal: {min}, maximaal: {max}, gewijzigde waarden worden automatisch opgeslagen):",contentPieceClear:"Wis alle browsegeschiedenis. Opmerking: de geschiedenis kan na het wissen niet worden hersteld. Wees voorzichtig.",contentPieceClearBtn:"Duidelijk",clearConfirmContent:"Wilt u de hele browsegeschiedenis wissen? Eenmaal gewist, kan het niet meer worden hersteld~"},historyToolbar:{boxTitle:"Geschiedenis doorbladeren",expandTipText:"Dossier"},menuCommand:{settings:"opgezet",buttonClose:"sluiting",goodsHistories:{clear:"Wis de volledige browsegeschiedenis van producten"}}}};var n,o;const i=window.location.host,a=window.location.href,r=(-1!=navigator.language.indexOf("-")?navigator.language.split("-")[0]:navigator.language).toLocaleLowerCase(),s={lang:r,isDev:!1,isDebug:!1,currentHost:i,currentUrl:a},l=null!=(n=e[r])?n:e.en,d=null!=(o=t[r])?o:t.en;var c=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const u={decryptStr:function(e){return atob(e).split("").reverse().join("")},encryptStr:function(e){let t=e.split("").reverse().join("");return btoa(t)},platform:function(){let e="unknown";const t=window.location.host;return/twitter|x\.com$/.test(t)?e="x":/aliexpress/.test(t)?e="aliexpress":/youtube\.com$/.test(t)?e="youtube":/www\.amazon\.com$/.test(t)?e="amazon":/www\.ebay\./.test(t)?e="ebay":/www\.lazada\./.test(t)?e="lazada":/www\.tiktok\.com/.test(t)?e="tiktok":/cobalt\.tools/.test(t)?e="cobalt":/www\.bestbuy\./.test(t)?e="bestbuy":/banggood\.com/.test(t)?e="banggood":/wish\.com/.test(t)&&(e="wish"),e},removeAliexpressAnchors:function(e){const t=e.tagName;if(!t)return;if(["A","IMG","DIV","SPAN","LABEL","TABLE","TR","TD","CANVAS"].some((e=>e===t))){e.removeAttribute("data-spm-anchor-id");for(let t=0;t<e.childNodes.length;t++)this.removeAliexpressAnchors(e.childNodes[t])}},openInTab:function(e,t={active:!0,insert:!0,setParent:!0}){"function"==typeof GM_openInTab?GM_openInTab(e,t):GM.openInTab(e,t)},request:function(e,t,n,o={"Content-Type":"application/json;charset=UTF-8"}){return new Promise((function(i,a){GM_xmlhttpRequest({url:t,method:e,data:n,headers:o,onload:function(e){const t=e.status;if(200==t||"200"==t){var n=e.responseText;i({code:"success",result:n})}else i({code:"error",result:null})},onabort:function(){i({code:"error",result:null})},onerror:function(){i({code:"error",result:null})}})}))},crossRequest:function(e,t,n){if(e||(e="get"),!t)return new Promise((function(e,t){t({code:"error",result:null})}));n||(n={});let o={method:e=e.toUpperCase()};return"POST"===e&&(o.headers["Content-Type"]="application/json",o.body=JSON.stringify(n)),new Promise((function(e,n){fetch(t,o).then((e=>e.text())).then((t=>{e({code:"success",result:t})})).catch((e=>{n({code:"error",result:null})}))}))},getParamterBySuffix:function(e=window.location.href,t="html"){-1!=e.indexOf("?")&&(e=e.split("?")[0]),-1!=e.indexOf("#")&&(e=e.split("#")[0]);let n=new RegExp("\\/([^\\/]*?)\\."+t);/lazada/.test(e)?n=new RegExp("-i(\\d+)(?:-s(\\d+))?\\.html"):/www\.ebay/.test(e)&&(n=new RegExp("\\/itm\\/(\\d+)"));const o=e.match(n);return o?o[1]:null},getParamterBySearch:function(e=window.location.href,t){-1!=e.indexOf("?")&&(e=e.split("?")[1]);return new URLSearchParams(e).get(t)},waitForElementByInterval:function(e,t=document.body,n=!0,o=10,i=1e4){return new Promise(((a,r)=>{let s=0,l=t.querySelector(e),d=n?!!l:!!l&&!!l.innerHTML;d&&a(l);const c=setInterval((()=>{s>=i&&(clearInterval(c),a(null)),l=t.querySelector(e),d=n?!!l:!!l&&!!l.innerHTML,d?(clearInterval(c),a(l)):s+=o}),o)}))},randomNumber:function(){return Math.ceil(1e8*Math.random())},elementInContainer:function(e,t){return e.contains(t)},mustGetElement:function(e){return c(this,null,(function*(){const t=e=>c(this,null,(function*(){const t=[],n=e.split("@");for(let e=0;e<n.length;e++){const o=n[e];o&&("body"==o?t.push(new Promise(((e,t)=>{e(document.body)}))):"html"==o?t.push(new Promise(((e,t)=>{e(document.html)}))):t.push(this.waitForElementByInterval(o,document.body,!0,10,1500)))}return yield Promise.race(t)}));let n=yield t(e);return new Promise(((o,i)=>{if(n)return void o(n);const a=setInterval((()=>{if(n=t(e),n)return clearInterval(a),void o(n)}),2e3)}))}))},loopTask:function(e,t=1500){e(),setInterval((()=>{e()}),t)},distinguishRemoveAndTry:function(e,t){const n=e.map((e=>document.querySelector("*[name='"+e+"']")));n.some((e=>null==e))&&(n.reverse().forEach((e=>{e&&e.remove()})),t())}},m=function(){GM_addStyle("\n      @keyframes fadeIn {\n          0%    {opacity: 0}\n          100%  {opacity: 1}\n      }\n      @-webkit-keyframes fadeIn {\n          0%    {opacity: 0}\n          100%  {opacity: 1}\n      }\n      @-moz-keyframes fadeIn {\n          0%    {opacity: 0}\n          100%  {opacity: 1}\n      }\n      @-o-keyframes fadeIn {\n          0%    {opacity: 0}\n          100%  {opacity: 1}\n      }\n      @-ms-keyframes fadeIn {\n          0%    {opacity: 0}\n          100%  {opacity: 1}\n      }\n      @keyframes fadeOut {\n          0%    {opacity: 1}\n          100%  {opacity: 0}\n      }\n      @-webkit-keyframes fadeOut {\n          0%    {opacity: 1}\n          100%  {opacity: 0}\n      }\n      @-moz-keyframes fadeOut {\n          0%    {opacity: 1}\n          100%  {opacity: 0}\n      }\n      @-o-keyframes fadeOut {\n          0%    {opacity: 1}\n          100%  {opacity: 0}\n      }\n      @-ms-keyframes fadeOut {\n          0%    {opacity: 1}\n          100%  {opacity: 0}\n      }\n      .toast-style-kk998y{\n          position: fixed;\n          background: rgba(0, 0, 0, 0.7);\n          color: #fff;\n          font-size: 14px;\n          line-height: 1;\n          padding:10px;\n          border-radius: 3px;\n          left: 50%;\n          transform: translateX(-50%);\n          -webkit-transform: translateX(-50%);\n          -moz-transform: translateX(-50%);\n          -o-transform: translateX(-50%);\n          -ms-transform: translateX(-50%);\n          z-index: 999999999999999999999999999;\n          white-space: nowrap;\n      }\n      .fadeOut{\n          animation: fadeOut .5s;\n      }\n      .fadeIn{\n          animation:fadeIn .5s;\n      }\n    ")},p=function(e){let t=e.time,n=e.background,o=e.color,i=e.position;null!=t&&""!=t||(t=1500),null!=i&&""!=i||(i="center-bottom");const a=document.createElement("div");null!=n&&""!=n&&(a.style.backgroundColor=n),null!=o&&""!=o&&(a.style.color=o),a.setAttribute("class","toast-style-kk998y"),a.innerText=e.message,a.style.zIndex=999999999,"center-bottom"===i?a.style.bottom="50px":a.style.top="50px",document.body.appendChild(a),a.classList.add("fadeIn"),setTimeout((function(){a.classList.remove("fadeIn"),a.classList.add("fadeOut"),a.addEventListener("animationend",(function(){document.body.removeChild(a)})),a.addEventListener("webkitAnimationEnd",(function(){document.body.removeChild(a)}))}),t)};var h=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));let f=GM_getValue("fmt",7);const g={number:Math.ceil(1e8*Math.random()),formats:[{format:"Do nothing",example:"N/A"},{format:"dd.MM.yy HH:mm",example:"22.10.24 03:12"},{format:"dd.MM.yy HH:mm:ss",example:"22.10.24 03:12:56"},{format:"dd.MM.yy(W) HH:mm",example:"22.10.24(Mon) 03:12"},{format:"dd.MM.yy(W) HH:mm:ss",example:"22.10.24(Mon) 03:12:56"},{format:"yy/MM/dd HH:mm",example:"24/10/22 03:12"},{format:"yy/MM/dd HH:mm:ss",example:"24/10/22 03:12:56"},{format:"yy/MM/dd(W) HH:mm",example:"24/10/22(Mon) 03:12"},{format:"yy/MM/dd(W) HH:mm:ss [ye/mo/da(we) ho:mi:se]",example:"24/10/22(Mon) 03:12:56 [ye/mo/da(we) ho:mi:se]"},{format:"yy-MM/dd HH:mm",example:"24-10/22 03:12"},{format:"yy-MM/dd HH:mm'ss",example:"24-10/22 03:12'56"},{format:"yy-MM/dd(W) HH:mm",example:"24-10/22(Mon) 03:12"},{format:"yy-MM/dd(W) HH:mm'ss",example:"24-10/22(Mon) 03:12'56"},{format:"MM/dd/yy HH:mm",example:"10/22/24 03:12"},{format:"MM/dd/yy HH:mm:ss",example:"10/22/24 03:12:56"},{format:"W, MM/dd/yy HH:mm",example:"Mon, 10/22/24 03:12"},{format:"W, MM/dd/yy HH:mm:ss",example:"Mon, 10/22/24 03:12:56"},{format:"M59-MM-dd HH:mm",example:"M59-10-22 03:12"},{format:"M59-MM-dd HH:mm:ss",example:"M59-10-22 03:12:56"},{format:"M59-MM-dd(W) HH:mm",example:"M59-10-22(Mon) 03:12"},{format:"M59-MM-dd(W) HH:mm:ss",example:"M59-10-22(Mon) 03:12:56"}],make:function(){let e=document.createElement("div");e.className="dialog_u_"+this.number,e.style.all="initial",e.style.backgroundColor="rgb(255, 255, 255)",e.style.border="1px solid #ccc",e.style.borderRadius="2px",e.style.display="none",e.style.fontFamily="monospace",e.style.fontSize="12px",e.style.width="480px",e.style.paddingLeft="5px",e.style.paddingRight="5px",e.style.paddingTop="5px",e.style.paddingBottom="5px",e.style.position="fixed",e.style.right="8px",e.style.top="8px",e.style.zIndex="2147483647",e.style.overflow="auto";let t='<table style="width:100%;border: 1px solid #c0bfbf;border-collapse: collapse;">';for(var n=1;n<=this.formats.length;n++)n%2!=0&&(t+='<tr style="width:100%;border: 1px solid #c0bfbf;">'),t+='<td width="50" style="border: 1px solid #c0bfbf;padding: 5px 0px;" title="'+this.formats[n-1].example+'"><input type="radio" name="fmt" value="'+(n-1)+'" class="top_r" />【'+n+"】"+this.formats[n-1].format+"</td>",n%2==0&&(t+="</tr>");t+="</table>";let o='\n        <div style="font-size:15px;font-weight:bold;margin-bottom:5px;">'+l.menuCommand.titleDateFormat+"</div>\n        <div>"+t+'</div>\n        <div style="margin-top:15px;text-align:center;">\n          <button name="closex">'+l.menuCommand.buttonClose+"</button>\n        </div>\n      ";return e.innerHTML=o,e},addEvent:function(e){e.querySelector("button[name='closex']").addEventListener("click",(function(t){for(let t of e.querySelectorAll('input[name="fmt"]'))if(t.checked){f=t.value;break}GM_setValue("fmt",f),e.style.display="none"}),!1)},init:function(){let e=this.make();this.addEvent(e),document.body.appendChild(e),GM_registerMenuCommand(l.menuCommand.settings,(function(){"none"==e.style.display&&(e.querySelector('input[name="fmt"][value="'+f+'"]').checked=!0,e.style.display="block")}))}},y={df:function(e,t){var n;const o=l.dateFormat.week,i=e.getFullYear().toString().slice(-2),a=e.getFullYear()-1911,r=("0"+(e.getMonth()+1)).slice(-2),s=("0"+e.getDate()).slice(-2),d=o[e.getDay()],c=("0"+e.getHours()).slice(-2),u=("0"+e.getMinutes()).slice(-2),m=("0"+e.getSeconds()).slice(-2),p=[s+"."+r+"."+i+" "+c+":"+u,s+"."+r+"."+i+" "+c+":"+u+":"+m,s+"."+r+"."+i+"("+d+") "+c+":"+u,s+"."+r+"."+i+"("+d+") "+c+":"+u+":"+m,i+"/"+r+"/"+s+" "+c+":"+u,i+"/"+r+"/"+s+" "+c+":"+u+":"+m,i+"/"+r+"/"+s+"("+d+") "+c+":"+u,i+"/"+r+"/"+s+"("+d+") "+c+":"+u+":"+m,i+"-"+r+"/"+s+" "+c+":"+u,i+"-"+r+"/"+s+" "+c+":"+u+"'"+m,i+"-"+r+"/"+s+"("+d+") "+c+":"+u,i+"-"+r+"/"+s+"("+d+") "+c+":"+u+"'"+m,r+"/"+s+"/"+i+" "+c+":"+u,r+"/"+s+"/"+i+" "+c+":"+u+":"+m,d+", "+r+"/"+s+"/"+i+" "+c+":"+u,d+", "+r+"/"+s+"/"+i+" "+c+":"+u+":"+m,"M"+a+"-"+r+"-"+s+" "+c+":"+u,"M"+a+"-"+r+"-"+s+" "+c+":"+u+":"+m,"M"+a+"-"+r+"-"+s+"("+d+") "+c+":"+u,"M"+a+"-"+r+"-"+s+"("+d+") "+c+":"+u+":"+m];return null!=(n=p[t])?n:p[0]},repldatetime:function(){const e="peter_parker_x1190";document.querySelectorAll('main div[data-testid="primaryColumn"] section article time[datetime*=":"], div[aria-labelledby="modal-header"] div[data-testid^="User-Name"] time[datetime], div[aria-labelledby="modal-header"] div[aria-label] time[datetime], main section[aria-labelledby="detail-header"] article div[data-testid^="User-Name"] time[datetime], main section div[data-testid="conversation"] div[aria-label] time[datetime]').forEach((t=>{if(0!=f){const n="span.us-"+e;let o=t.getAttribute("datetime"),i=this.df(new Date(o),f-1),a=t.parentNode,r=a.querySelectorAll(n);if(r.length)r[0].getAttribute("local-datetime")!=i&&(r[0].setAttribute("local-datetime",i),r[0].textContent=i,r[0].style=t.style);else{let n=document.createElement("span");n.className="us-"+e,n.setAttribute("datetime",o),n.setAttribute("local-datetime",i),n.textContent=i,n.style=t.style,t.style.setProperty("display","none"),a.appendChild(n)}}}))}},w={XSettingsDialog:g,XDateFormat:y,XOrigimg:()=>{let e=document.querySelectorAll('div[style*="background-image:"], img');for(let t of e){let e=/^(.+pbs\.twimg\.com\/[^?]+\?format=\w+)(&|&amp;)(name=)(\w+)([")]*)$/;if(/div/i.test(t.tagName)){let n=e.exec(t.style.backgroundImage);if(n&&"orig"!=n[4]){t.style.backgroundImage=n[1]+n[2]+n[3]+"orig"+n[5];continue}continue}let n=e.exec(t.getAttribute("src"));n&&"orig"!=n[4]&&t.setAttribute("src",n[1]+n[2]+n[3]+"orig"+n[5])}},XHidepromo:()=>{var e,t;let n=document.querySelectorAll('path[d^="M19.498 3h-15c-1.381 0-2.5 1.12-2.5 2.5v13c0 1.38 1.119 2.5"]'),o=document.querySelectorAll('main div[data-testid="sidebarColumn"] section div[data-testid="trend"] div.r-14gqq1x span.css-1qaijid.r-bcqeeo.r-qvutc0'),i=document.querySelectorAll('main div[data-testid="primaryColumn"] section article span.css-1jxf684.r-bcqeeo.r-qvutc0.r-poiln3'),a=document.querySelectorAll('main div[data-testid="primaryColumn"] section span.css-901oao.css-16my406.r-bcqeeo.r-qvutc0');const r={ja:"によるプロモーション$",ko:" 님이 프로모션함$",zh:"^由 .+ 推广$",ru:"^Реклама от ",de:"^Gesponsert von ",it:"^Sponsorizzato da ",fr:"^Sponsorisé par ",pt:"^Promovido por ",en:"^Promoted by "},l=null!=(e=r[s.lang])?e:r.en,d={ja:"プロモポスト",ko:"Promoted Post",zh:"推广帖",ru:"Promoted Post",de:"Gesponserter Post",it:"Promoted Post",fr:"Promoted Post",pt:"Post promovido",en:"Promoted Post"},c=null!=(t=d[s.lang])?t:d.en;for(let e of n){let t=e.closest('div[data-testid="cellInnerDiv"]');t||(t=e.closest("div.css-175oi2r.r-1adg3ll.r-1ny4l3l")),t||(t=e.closest('div.css-175oi2r.r-1ny4l3l[data-testid="UserCell"]')),t&&t.style.setProperty("display","none")}for(let e of o){if(!new RegExp(l,"i").test(e.textContent))continue;e.closest("div.css-175oi2r.r-1adg3ll.r-1ny4l3l").style.setProperty("display","none")}for(let e of i){if("Ad"!=e.textContent)continue;e.closest('div[data-testid="cellInnerDiv"]').style.setProperty("display","none")}for(let e of a){if(e.textContent!=d.en&&e.textContent!=c)continue;e.closest('div[data-testid="cellInnerDiv"]').style.setProperty("display","none")}},XDownload:{history:[],show_sensitive:!0,filename:"twitter_{user-name}(@{user-id})_{date-time}_{status-id}_{file-type}",css:'\n    .tmd-down {margin-left: 12px; order: 99;}\n    .tmd-down:hover > div > div > div > div {color: rgba(29, 161, 242, 1.0);}\n    .tmd-down:hover > div > div > div > div > div {background-color: rgba(29, 161, 242, 0.1);}\n    .tmd-down:active > div > div > div > div > div {background-color: rgba(29, 161, 242, 0.2);}\n    .tmd-down:hover svg {color: rgba(29, 161, 242, 1.0);}\n    .tmd-down:hover div:first-child:not(:last-child) {background-color: rgba(29, 161, 242, 0.1);}\n    .tmd-down:active div:first-child:not(:last-child) {background-color: rgba(29, 161, 242, 0.2);}\n    .tmd-down.tmd-media {position: absolute; right: 0;}\n    .tmd-down.tmd-media > div {display: flex; border-radius: 99px; margin: 2px;}\n    .tmd-down.tmd-media > div > div {display: flex; margin: 6px; color: #fff;}\n    .tmd-down.tmd-media:hover > div {background-color: rgba(255,255,255, 0.6);}\n    .tmd-down.tmd-media:hover > div > div {color: rgba(29, 161, 242, 1.0);}\n    .tmd-down.tmd-media:not(:hover) > div > div {filter: drop-shadow(0 0 1px #000);}\n    .tmd-down g {display: none;}\n    .tmd-down.download g.download, .tmd-down.completed g.completed, .tmd-down.loading g.loading,.tmd-down.failed g.failed {display: unset;}\n    .tmd-down.loading svg {animation: spin 1s linear infinite;}\n    @keyframes spin {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}\n    .tmd-btn {display: inline-block; background-color: #1DA1F2; color: #FFFFFF; padding: 0 20px; border-radius: 99px;}\n    .tmd-tag {display: inline-block; background-color: #FFFFFF; color: #1DA1F2; padding: 0 10px; border-radius: 10px; border: 1px solid #1DA1F2;  font-weight: bold; margin: 5px;}\n    .tmd-btn:hover {background-color: rgba(29, 161, 242, 0.9);}\n    .tmd-tag:hover {background-color: rgba(29, 161, 242, 0.1);}\n    .tmd-notifier {display: none; position: fixed; left: 16px; bottom: 16px; color: #000; background: #fff; border: 1px solid #ccc; border-radius: 8px; padding: 4px;}\n    .tmd-notifier.running {display: flex; align-items: center;}\n    .tmd-notifier label {display: inline-flex; align-items: center; margin: 0 8px;}\n    .tmd-notifier label:before {content: " "; width: 32px; height: 16px; background-position: center; background-repeat: no-repeat;}\n    .tmd-notifier label:nth-child(1):before {background-image:url("data:image/svg+xml;charset=utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 24 24%22><path d=%22M3,14 v5 q0,2 2,2 h14 q2,0 2,-2 v-5 M7,10 l4,4 q1,1 2,0 l4,-4 M12,3 v11%22 fill=%22none%22 stroke=%22%23666%22 stroke-width=%222%22 stroke-linecap=%22round%22 /></svg>");}\n    .tmd-notifier label:nth-child(2):before {background-image:url("data:image/svg+xml;charset=utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 24 24%22><path d=%22M12,2 a1,1 0 0 1 0,20 a1,1 0 0 1 0,-20 M12,5 v7 h6%22 fill=%22none%22 stroke=%22%23999%22 stroke-width=%222%22 stroke-linejoin=%22round%22 stroke-linecap=%22round%22 /></svg>");}\n    .tmd-notifier label:nth-child(3):before {background-image:url("data:image/svg+xml;charset=utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 24 24%22><path d=%22M12,0 a2,2 0 0 0 0,24 a2,2 0 0 0 0,-24%22 fill=%22%23f66%22 stroke=%22none%22 /><path d=%22M14.5,5 a1,1 0 0 0 -5,0 l0.5,9 a1,1 0 0 0 4,0 z M12,17 a2,2 0 0 0 0,5 a2,2 0 0 0 0,-5%22 fill=%22%23fff%22 stroke=%22none%22 /></svg>");}\n    .tmd-down.tmd-img {position: absolute; right: 0; bottom: 0; display: none !important;}\n    .tmd-down.tmd-img > div {display: flex; border-radius: 99px; margin: 2px; background-color: rgba(255,255,255, 0.6);}\n    .tmd-down.tmd-img > div > div {display: flex; margin: 6px; color: #fff !important;}\n    .tmd-down.tmd-img:not(:hover) > div > div {filter: drop-shadow(0 0 1px #000);}\n    .tmd-down.tmd-img:hover > div > div {color: rgba(29, 161, 242, 1.0);}\n    :hover > .tmd-down.tmd-img, .tmd-img.loading, .tmd-img.completed, .tmd-img.failed {display: block !important;}\n    .tweet-detail-action-item {width: 20% !important;}\n    ',css_ss:'\n    /* show sensitive in media tab */\n    li[role="listitem"]>div>div>div>div:not(:last-child) {filter: none;}\n    li[role="listitem"]>div>div>div>div+div:last-child {display: none;}\n    ',svg:'\n    <g class="download"><path d="M3,14 v5 q0,2 2,2 h14 q2,0 2,-2 v-5 M7,10 l4,4 q1,1 2,0 l4,-4 M12,3 v11" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" /></g>\n    <g class="completed"><path d="M3,14 v5 q0,2 2,2 h14 q2,0 2,-2 v-5 M7,10 l3,4 q1,1 2,0 l8,-11" fill="none" stroke="#1DA1F2" stroke-width="2" stroke-linecap="round" /></g>\n    <g class="loading"><circle cx="12" cy="12" r="10" fill="none" stroke="#1DA1F2" stroke-width="4" opacity="0.4" /><path d="M12,2 a10,10 0 0 1 10,10" fill="none" stroke="#1DA1F2" stroke-width="4" stroke-linecap="round" /></g>\n    <g class="failed"><circle cx="12" cy="12" r="11" fill="#f33" stroke="currentColor" stroke-width="2" opacity="0.8" /><path d="M14,5 a1,1 0 0 0 -4,0 l0.5,9.5 a1.5,1.5 0 0 0 3,0 z M12,17 a2,2 0 0 0 0,4 a2,2 0 0 0 0,-4" fill="#fff" stroke="none" /></g>\n    ',isTweetdeck:function(){return s.currentHost.indexOf("tweetdeck")>=0},getCookie:function(){const e=document.cookie.split(";"),t={};for(const n of e){const[e,o]=n.split("=");t[e.trim()]=o.trim()}return t},formatDate:function(e,t,n){let o=new Date(e);n&&o.setMinutes(o.getMinutes()-o.getTimezoneOffset());let i={YYYY:o.getUTCFullYear().toString(),YY:o.getUTCFullYear().toString(),MM:o.getUTCMonth()+1,MMM:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][o.getUTCMonth()],DD:o.getUTCDate(),hh:o.getUTCHours(),mm:o.getUTCMinutes(),ss:o.getUTCSeconds(),h2:o.getUTCHours()%12,ap:o.getUTCHours()<12?"AM":"PM"};return t.replace(/(YY(YY)?|MMM?|DD|hh|mm|ss|h2|ap)/g,(e=>("0"+i[e]).substr(-e.length)))},detect:function(e){let t="ARTICLE"==e.tagName&&e||"DIV"==e.tagName&&(e.querySelector("article")||e.closest("article"));t&&this.addButtonTo(t);let n="LI"==e.tagName&&"listitem"==e.getAttribute("role")&&[e]||"DIV"==e.tagName&&e.querySelectorAll('li[role="listitem"]');n&&this.addButtonToMedia(n)},addButtonTo:function(e){if(e.dataset.detected)return;e.dataset.detected="true";if(e.querySelector(['a[href*="/photo/1"]','div[role="progressbar"]','button[data-testid="playButton"]','a[href="/settings/content_you_see"]',"div.media-image-container","div.media-preview-container",'div[aria-labelledby]>div:first-child>div[role="button"][tabindex="0"]'].join(","))){let t=e.querySelector('a[href*="/status/"]').href.split("/status/").pop().split("/").shift(),n=e.querySelector('div[role="group"]:last-of-type, ul.tweet-actions, ul.tweet-detail-actions'),o=Array.from(n.querySelectorAll(":scope>div>div, li.tweet-action-item>a, li.tweet-detail-action-item>a")).pop().parentNode,i=o.cloneNode(!0);i.querySelector("button").removeAttribute("disabled"),this.isTweetdeck()?(i.firstElementChild.innerHTML='<svg viewBox="0 0 24 24" style="width: 18px; height: 18px;">'+this.svg+"</svg>",i.firstElementChild.removeAttribute("rel"),i.classList.replace("pull-left","pull-right")):i.querySelector("svg").innerHTML=this.svg;let a=this.history.indexOf(t)>=0;if(this.status(i,"tmd-down"),this.status(i,a?"completed":"download",a?l.download.completed:l.download.download),n.insertBefore(i,o.nextSibling),i.onclick=()=>{this.click(i,t,a)},this.show_sensitive){let t=e.querySelector('div[aria-labelledby] div[role="button"][tabindex="0"]:not([data-testid]) > div[dir] > span > span');t&&t.click()}}const t=e.querySelectorAll('a[href*="/photo/"]');if(t.length>1){let n=e.querySelector('a[href*="/status/"]').href.split("/status/").pop().split("/").shift(),o=e.querySelector('div[role="group"]:last-of-type');Array.from(o.querySelectorAll(":scope>div>div")).pop().parentNode,t.forEach((e=>{let t=e.href.split("/status/").pop().split("/").pop(),o=this.history.indexOf(n)>=0,i=document.createElement("div");i.innerHTML='<div><div><svg viewBox="0 0 24 24" style="width: 18px; height: 18px;">'+this.svg+"</svg></div></div>",i.classList.add("tmd-down","tmd-img"),this.status(i,"download"),e.parentNode.appendChild(i),i.onclick=e=>{e.preventDefault(),this.click(i,n,o,t)}}))}},addButtonToMedia:function(e){e.forEach((e=>{if(e.dataset.detected)return;e.dataset.detected="true";let t=!1;try{let n=e.querySelector('a[href*="/status/"]').href.split("/status/").pop().split("/").shift();t=this.history.indexOf(n)>=0}catch(e){}let n=document.createElement("div");n.innerHTML='<div><div><svg viewBox="0 0 24 24" style="width: 18px; height: 18px;">'+this.svg+"</svg></div></div>",n.classList.add("tmd-down","tmd-media"),this.status(n,t?"completed":"download",t?l.download.completed:l.download.download),e.appendChild(n),n.onclick=()=>{this.click(n,status_id,t)}}))},status:function(e,t,n,o){t&&(e.classList.remove("download","completed","loading","failed"),e.classList.add(t)),n&&(e.title=n),o&&(e.style.cssText=o)},fetchJson:function(e){return h(this,null,(function*(){const t=`https://${s.currentHost}/i/api/graphql/NmCeCgkVlsRGS1cAwqtgmw/TweetDetail`,n={focalTweetId:e,with_rux_injections:!1,includePromotedContent:!0,withCommunity:!0,withQuickPromoteEligibilityTweetFields:!0,withBirdwatchNotes:!0,withVoice:!0,withV2Timeline:!0},o=encodeURI(`${t}?variables=${JSON.stringify(n)}&features=${JSON.stringify({rweb_lists_timeline_redesign_enabled:!0,responsive_web_graphql_exclude_directive_enabled:!0,verified_phone_label_enabled:!1,creator_subscriptions_tweet_preview_api_enabled:!0,responsive_web_graphql_timeline_navigation_enabled:!0,responsive_web_graphql_skip_user_profile_image_extensions_enabled:!1,tweetypie_unmention_optimization_enabled:!0,responsive_web_edit_tweet_api_enabled:!0,graphql_is_translatable_rweb_tweet_is_translatable_enabled:!0,view_counts_everywhere_api_enabled:!0,longform_notetweets_consumption_enabled:!0,responsive_web_twitter_article_tweet_consumption_enabled:!1,tweet_awards_web_tipping_enabled:!1,freedom_of_speech_not_reach_fetch_enabled:!0,standardized_nudges_misinfo:!0,tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled:!0,longform_notetweets_rich_text_read_enabled:!0,longform_notetweets_inline_media_enabled:!0,responsive_web_media_download_video_enabled:!1,responsive_web_enhance_cards_enabled:!1})}`),i=this.getCookie(),a={authorization:"Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA","x-twitter-active-user":"yes","x-twitter-client-language":i.lang,"x-csrf-token":i.ct0};32==i.ct0.length&&(a["x-guest-token"]=i.gt);let r=(yield fetch(o,{headers:a}).then((e=>e.json()))).data.threaded_conversation_with_injections_v2.instructions[0].entries.find((t=>t.entryId==`tweet-${e}`)).content.itemContent.tweet_results.result;return r.tweet||r}))},click:function(e,t,n,o){return h(this,null,(function*(){if(e.classList.contains("loading"))return;this.status(e,"loading");let i=yield GM_getValue("save_history",!0),a=yield this.fetchJson(t),r=a.legacy,s=a.core.user_results.result.legacy,d={"\\":"＼","/":"／","|":"｜","<":"＜",">":"＞",":":"：","*":"＊","?":"？",'"':"＂","​":"","‌":"","‍":"","⁠":"","\ufeff":"","🔞":""},c=this.filename.match(/{date-time(-local)?:[^{}]+}/)?this.filename.match(/{date-time(?:-local)?:([^{}]+)}/)[1].replace(/[\\/ | <>*?:"]/g,(e=>d[e])):"YYYYMMDD-hhmmss",u={};u["status-id"]=t,u["user-name"]=s.name.replace(/([\\/|*?:"] | [\u200b - \u200d\u2060\ufeff] | 🔞) /g,(e=>d[e])),u["user-id"]=s.screen_name,u["date-time"]=this.formatDate(r.created_at,c),u["date-time-local"]=this.formatDate(r.created_at,c,!0),u["full-text"]=r.full_text.split("\n").join(" ").replace(/\s*https:\/\/t\.co\/\w+/g,"").replace(/[\\/ | <>*?:"]|[\u200b-\u200d\u2060\ufeff]/g,(e=>d[e]));let m=r.extended_entities&&r.extended_entities.media;if(!m||0==m.length)try{m=JSON.parse(a.card.legacy.binding_values[0].value.string_value).media_entities,m=Object.values(m)}catch(e){}if(m&&0!=m.length)if(o&&(m=[m[o-1]]),m.length>0){let a=m.length,r=[];m.forEach(((s,d)=>{u.url="photo"==s.type?s.media_url_https+":orig":s.video_info.variants.filter((e=>"video/mp4"==e.content_type)).sort(((e,t)=>t.bitrate-e.bitrate))[0].url,u.file=u.url.split("/").pop().split(/[:?]/).shift(),u["file-name"]=u.file.split(".").shift(),u["file-ext"]=u.file.split(".").pop(),u["file-type"]=s.type.replace("animated_",""),u.out=(this.filename.replace(/\.?{file-ext}/,"")+((m.length>1||o)&&!this.filename.match("{file-name}")?"-"+(o?o-1:d):"")+".{file-ext}").replace(/{([^{}:]+)(:[^{}]+)?}/g,((e,t)=>u[t])),this.downloader.add({url:u.url,name:u.out,onload:()=>{a-=1,r.push((m.length>1||o?(o||d+1)+": ":"")+l.download.completed),this.status(e,null,r.sort().join("\n")),0===a&&(this.status(e,"completed",l.download.completed),i&&!n&&this.history.push(t))},onerror:t=>{a=-1,r.push((m.length>1?d+1+": ":"")+t.details.current),this.status(e,"failed",r.sort().join("\n"))}})}))}else this.status(e,"failed","MEDIA_NOT_FOUND");else this.status(e,"failed","MEDIA_NOT_FOUND")}))},downloader:function(){let e,t=[],n=0,o=2,i=0,a=0,r=!1;return{add:function(e){t.push(e),n<o?(n+=1,this.next()):this.update()},next:function(){return h(this,null,(function*(){let e=t.shift();yield this.start(e),t.length>0&&n<=o?this.next():n-=1,this.update()}))},start:function(e){return this.update(),new Promise((t=>{GM_download({url:e.url,name:e.name,onload:n=>{e.onload(),t()},onerror:n=>{this.retry(e,n),t()},ontimeout:n=>{this.retry(e,n),t()}})}))},retry:function(e,t){i+=1,3==i&&(o=1),e.retry&&e.retry>=2||t.details&&"USER_CANCELED"==t.details.current?(e.onerror(t),a+=1):(1==o&&(e.retry=(e.retry||0)+1),this.add(e))},update:function(){if(e||(e=document.createElement("div"),e.title="Twitter Media Downloader",e.classList.add("tmd-notifier"),e.innerHTML="<label>0</label>|<label>0</label>",document.body.appendChild(e)),a>0&&!r){r=!0,e.innerHTML+="|";let t=document.createElement("label");e.appendChild(t),t.onclick=()=>{e.innerHTML="<label>0</label>|<label>0</label>",a=0,r=!1,this.update()}}e.firstChild.innerText=n,e.firstChild.nextElementSibling.innerText=t.length,a>0&&(e.lastChild.innerText=a),n>0||t.length>0||a>0?e.classList.add("running"):e.classList.remove("running")}}}(),init:function(){document.head.insertAdjacentHTML("beforeend","<style>"+this.css+(this.show_sensitive?this.css_ss:"")+"</style>")}}};var v=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const b={extractHref:function(e){const t=/<a\s+(?:[^>]*?\s+)?href=(['"])(.*?)\1/gi,n=[];let o;for(;null!==(o=t.exec(e));)n.push(o[2]);return n.filter((e=>-1!=e.indexOf("snapcdn.app")))},download:function(e,t){return v(this,null,(function*(){p({message:l.download.preparing,background:"#000"}),t.classList.add("download-loadding");const n=yield u.request("POST","https://tikdownloader.io/api/ajaxSearch","q="+e+"&lang=en",{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});if("success"===n.code){const e=JSON.parse(n.result);if("ok"==e.status&&e.hasOwnProperty("data")){const t=e.data,n=this.extractHref(t);n.length>=2&&u.openInTab(n.at(-2))}}t.classList.remove("download-loadding")}))},start:function(){return v(this,null,(function*(){/www\.tiktok\.com/.test(window.location.host)&&(GM_addStyle("\n      @keyframes scriptspin {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}\n      .download-loadding{\n        animation: scriptspin 1s linear infinite;\n      }\n    "),setInterval((()=>{if(!document.querySelector("#tiktok-download-990i")){const e=document.querySelector("#main-content-video_detail")||document.body;if(!e)return;const t=e.querySelectorAll("div"),n=/-DivRightControlsWrapper|-DivMiniPlayerContainer/,o=Array.from(t).find((e=>e.classList.value.split(" ").some((e=>n.test(e)))));if(o){let e=null,t=1!=o.children.length;e=t?o.children[0].cloneNode(!0):o.cloneNode(!0),e.id="tiktok-download-990i",e.querySelector("div").innerHTML='<svg t="1724300009050" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5307" width="35" height="35"><path d="M298.666667 554.666667v85.333333H256v128h512v-128h-42.666667v-85.333333h128v213.333333a85.333333 85.333333 0 0 1-78.933333 85.077333L768 853.333333H256a85.333333 85.333333 0 0 1-85.12-78.933333L170.666667 768v-213.333333h128z" fill="#ffffff" p-id="5308"></path><path d="M512 627.498667l219.477333-219.477334h-120.704L512 506.88 413.141333 408.021333H292.522667L512 627.498667z" fill="#ffffff" p-id="5309"></path><path d="M554.666667 528V167.978667h-85.333334v360.021333h85.333334z" fill="#ffffff" p-id="5310"></path></svg>',t?o.insertBefore(e,o.children[0]):(e.style.right="166px",o.parentNode.insertBefore(e,o)),e.title=l.download.tip,e.addEventListener("click",(()=>{b.download(window.location.href,e)}))}}}),1500))}))}},x=function(){class e{constructor(){this.mask=document.createElement("div"),this.dialogStyle=document.createElement("style"),this.setStyle(this.mask,{width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, .6)",position:"fixed",left:"0px",top:"0px",bottom:"0px",right:"0px","z-index":"9999999999999"}),this.content=document.createElement("div"),this.setStyle(this.content,{"max-width":"450px",width:"100%","max-height":"600px",backgroundColor:"#fff",boxShadow:"0 0 2px #999",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",borderRadius:"5px"}),this.mask.appendChild(this.content)}middleBox(e){this.content.innerHTML="";let t="";"[object String]"==={}.toString.call(e)?t=e:"[object Object]"==={}.toString.call(e)&&(t=e.title),document.body.appendChild(this.mask),this.title=document.createElement("div"),this.setStyle(this.title,{width:"100%",height:"40px",lineHeight:"40px",boxSizing:"border-box","background-color":"#dedede",color:"#000","text-align":"center","font-weight":"700","font-size":"17px","border-radius":"4px 4px 0px 0px"}),this.title.innerText=t,this.content.appendChild(this.title),this.closeBtn=document.createElement("div"),this.closeBtn.innerText="×",this.setStyle(this.closeBtn,{textDecoration:"none",color:"#000",position:"absolute",right:"10px",top:"0px",fontSize:"25px",display:"inline-block",cursor:"pointer"}),this.title.appendChild(this.closeBtn),this.closeBtn.onclick=()=>this.close()}showMake(e){e.hasOwnProperty("styleSheet")&&(this.dialogStyle.textContent=e.styleSheet),document.querySelector("head").appendChild(this.dialogStyle),this.middleBox(e),this.dialogContent=document.createElement("div"),this.setStyle(this.dialogContent,{padding:"15px","max-height":"400px"}),this.dialogContent.innerHTML=e.content,this.content.appendChild(this.dialogContent),e.onContentReady(this)}close(){document.body.removeChild(this.mask),document.querySelector("head").removeChild(this.dialogStyle)}setStyle(e,t){for(let n in t)e.style[n]=t[n]}}let t=null;return t||(t=new e),t}(),_={storageKeys:{goodsHistory:"goooods_history_key",offset:"goooods_wrapper_key",maximumRecordsKey:"goooods_max_records_key"},defaultValue:{historyStorage:{aliexpress:[],amazon:[],shein:[],shopee:[],lazada:[],ebay:[],bestbuy:[],banggood:[],wish:[]},offsetWrapper:{right:10,bottom:0},records:{min:10,max:500,default:100},toolbarGoodsNum:4},push:function(e,t){var n;try{const o=GM_getValue(this.storageKeys.goodsHistory,this.defaultValue.historyStorage),i=GM_getValue(this.storageKeys.maximumRecordsKey,this.defaultValue.records.default),a=null!=(n=o[e])?n:[];a.length>=i&&a.splice(0,parseInt(i/5));const r=a.filter(((e,n)=>e.id!=t.id));r.push(t),o[e]=r,GM_setValue(this.storageKeys.goodsHistory,o)}catch(e){}},get:function(e,t=-1){var n;const o=null!=(n=GM_getValue(this.storageKeys.goodsHistory,this.defaultValue.historyStorage)[e])?n:[];if(t>0){const e=[];for(let n=o.length-1;n>=0&&!(e.length>=t);n--)e.push(o[n]);return e}return o},remove:function(e,t){const n=GM_getValue(this.storageKeys.goodsHistory,this.defaultValue.historyStorage);let o=n[e].filter(((e,n)=>e.id!=t));n[e]=o,GM_setValue(this.storageKeys.goodsHistory,n)},removeAll:function(){GM_setValue(this.storageKeys.goodsHistory,this.defaultValue.historyStorage),document.querySelector(".peter99032j-xyz-panel-aside-body .goods_____review").innerHTML="",document.querySelector(".peter99032j-xyz-panel-aside-main .panel-aside-main_____content").innerHTML=""},removeAllConfirm:function(){confirm(d.dialog.clearConfirmContent)&&this.removeAll()},registerMenuCommand:function(){GM_registerMenuCommand(d.menuCommand.settings,(()=>{this.showSettingDialog()}))},getGoodsByDateGroup:function(e){const t=this.get(e).reverse(),n=[],o=new Date,i=new Date(o),a="dd/MM";i.setDate(o.getDate()-1);const r=this.dateFormat(o,a),s=this.dateFormat(i,a),l=(e,t,n)=>n===e?"Today":n===t?"Yesterday":n;let d=[],c=null,u=null;for(let e=0;e<t.length;e++)o.setTime(t[e].date),u=this.dateFormat(o,a),c?c!=u&&(n.push({str:l(r,s,c),items:d}),d=[],c=u):c=u,d.push(t[e]);return 0!=d.length&&n.push({str:l(r,s,c),items:d}),n},dateFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var o in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},showSettingDialog:function(){const e="dialog_x_"+u.randomNumber(),t=this,{min:n,max:o}=this.defaultValue.records,i=GM_getValue(this.storageKeys.maximumRecordsKey,this.defaultValue.records.default),a="\n      #"+e+"{\n        padding:15px;\n      }\n      #"+e+" .d_____piece{\n        margin-bottom:15px;\n        font-size:15px;\n      }\n      #"+e+" .d_____input{\n        padding: 5px 10px !important;\n        background-color: #fafafa !important;\n        color: #000 !important;\n        border: 1px solid #ccc !important;\n        font-size: 14px !important;\n        border-radius: 4px !important;\n        width: 80px !important;\n        text-align: center !important;\n      }\n      #"+e+" .d_____btn{\n        padding: 3px 10px !important;\n        background-color: #edf2fa !important;\n        color: #000 !important;\n        border-radius: 4px!important;\n        font-size: 14px!important;\n      }\n      #"+e+" .d_____btn:hover{\n        background-color: #cdd1da !important;\n      }\n    ";var r=d.dialog.contentPieceMax;const s='\n      <div id="'+e+'">\n        <div class="d_____piece">\n          '+(r=(r=r.replace("{min}",n)).replace("{max}",o))+'<input class="d_____input" number="number" min="'+n+'" max="'+o+'" step="1"  value="'+i+'" name="maximum-records"/>\n        </div>\n        <div class="d_____piece">\n          <p>'+d.dialog.contentPieceClear+'</p>\n          <button class="d_____btn" name="clear">'+d.dialog.contentPieceClearBtn+"</button>\n        </div>\n      </div>\n    ";x.showMake({title:d.dialog.title,content:s,styleSheet:a,onContentReady:function(e){e.dialogContent.querySelector("button[name='clear']").addEventListener("click",(function(){t.removeAllConfirm()})),e.dialogContent.querySelector("input[name='maximum-records']").onchange=function(e){const i=this.value;i>=n&&i<=o&&GM_setValue(t.storageKeys.maximumRecordsKey,i)}}})},showOrHideHistoryBox:function(e){const t=this,n=this.getGoodsByDateGroup(e),o=document.querySelector(".peter99032j-xyz-panel-aside-main .panel-aside-main_____content");o.innerHTML="";let i="",a="",r="";for(let t=0;t<n.length;t++){i+='<div class="panel-aside-main_____item">',i+='<div class="item_____title"> —— '+n[t].str+" —— </div>",i+='<div class="item_____container">';for(let o=0;o<n[t].items.length;o++)a=this.pretreatmentJumpUrl(n[t].items[o].url,e),r=this.pretreatmentImageUrl(n[t].items[o].pic,e),i+='\n          <div class="histories-box-review_item">\n            <a title="'+n[t].items[o].title+'" jump-tag="true" href="javascript:void(0);" jump-url="'+a+'" target="_blank">\n              <div class="review___shadow">\n                <div class="delete_____btn" data-id="'+n[t].items[o].id+'">×</div>\n              </div>\n              <div class="review___img"><img src="'+r+'" /></div>\n              <div class="review___text">'+n[t].items[o].price+"</div>\n            </a>\n          </div>\n        ";i+="</div>",i+="</div>"}o.innerHTML=i,document.querySelectorAll(".peter99032j-xyz-panel-aside-main .delete_____btn").forEach((n=>{n.addEventListener("click",(function(n){n.stopPropagation(),n.preventDefault();const o=this.getAttribute("data-id");this.parentNode.parentNode.parentNode.remove(),t.remove(e,o)}))}));document.querySelectorAll(".peter99032j-xyz-panel-aside-main .histories-box-review_item > a").forEach((e=>{e.addEventListener("mouseover",(function(){this.querySelector(".review___shadow").style.display="block"})),e.addEventListener("mouseout",(function(){this.querySelector(".review___shadow").style.display="none"}))})),document.querySelectorAll(".peter99032j-xyz-panel-aside-main a[jump-tag='true']").forEach((e=>{e.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();const t=this.getAttribute("jump-url");u.openInTab(u.decryptStr(t))}))}))},pretreatmentJumpUrl:function(e,t){const n=encodeURIComponent(e);let o="https://page.mimixiaoke.com/api/product/redirect?url="+n;return"ebay"!=t&&"bestbuy"!=t||(o="https://www.jtm.pub/api/product/redirect?url="+n),u.encryptStr(o)},pretreatmentImageUrl:function(e,t){let n="";return n="aliexpress"==t?e.replace(/_\d+x\d+\./,"_150x150."):e,n},createHistoryBox:function(e){const t=GM_getValue(this.storageKeys.offset,this.defaultValue.offsetWrapper);let n="\n      .peter99032j-xyz-panel-wrapper{\n        position: fixed;\n        bottom: "+t.bottom+"px;\n        right: "+t.right+"px;\n        z-index: 999999999;\n        box-sizing: border-box;\n      }\n\n      .peter99032j-xyz-panel-wrapper svg.icon-svg path{\n        fill: #bfbfbf;\n      }\n\n      .peter99032j-xyz-panel-wrapper svg.icon-svg:hover path{\n        fill: #6a7a9b;\n      }\n\n      /*** 历史记录大box ***/\n      .peter99032j-xyz-panel-wrapper >.peter99032j-xyz-panel-aside-main{\n        width: 400px;\n        height: 400px;\n        position: absolute;\n        right: 0px;\n        bottom: 70px;\n        border-radius: 5px;\n        border: 1px solid #ebebeb;\n        background-color: #fafafa;\n        overflow-y: auto;\n        overflow-x: hidden;\n        background-color:#fafafa;\n        display:none;\n        -moz-box-shadow:2px 2px 5px #b6bdc5;\n        -webkit-box-shadow:2px 2px 5px #b6bdc5;\n        box-shadow:2px 2px 5px #b6bdc5;\n      }\n      .peter99032j-xyz-panel-wrapper >.peter99032j-xyz-panel-aside-main >.panel-aside-main_____inner{\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n      }\n\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____header{\n        display: flex;\n        align-items: center;\n        flex-direction: row;\n        height:40px;\n        background: #dedede;\n      }\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____header >.header_____title{\n        align-items: center;\n        display: flex;\n        flex: 1;\n        margin-left: 15px;\n        font-size: 15px;\n        font-weight: bold;\n      }\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____header >.header_____title >svg{\n        margin-right:5px;\n      }\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____header >.header_____close,\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____header >.header_____setting{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor:pointer;\n        width:35px;\n      }\n\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____content{\n        flex: 1;\n        overflow: auto;\n      }\n\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____item{\n        padding: 5px;\n        margin:5px 0px;\n      }\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____item .item_____title{\n        font-size: 13px;\n        font-weight: 500;\n        text-align: center;\n        color: #b6b6b6;\n        padding: 5px 0px;\n      }\n      .peter99032j-xyz-panel-aside-main .panel-aside-main_____item .item_____container{\n        display: flex;\n        flex-flow: wrap;\n        flex-direction: row;\n        justify-content: flex-start;\n      }\n\n      /**** 历史记录展示 ****/\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item{\n        width:33.3333%;\n        margin: 5px 0px;\n        overflow: hidden;\n      }\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item >a{\n        display: block !important;\n        position: relative !important;\n        margin: 0px auto !important;\n        background-color: #fff !important;\n        width: 110px !important;\n        border-radius: 5px !important;\n        border: 1px solid #ccc !important;\n        box-sizing: content-box !important;\n      }\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item > a >.review___shadow{\n        position:absolute;\n        left:0px;\n        right:0px;\n        top:0px;\n        bottom:0px;\n        z-index:99;\n        text-align: center;\n        border:2px solid red;\n        border-radius: 5px;\n        display:none;\n      }\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item > a >.review___shadow .delete_____btn{\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        width: 15px;\n        height: 15px;\n        text-align: center;\n        line-height: 10px;\n        background-color:red;\n        color:#FFF;\n        font-size:13px;\n        border-radius:3px;\n      }\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item > a >.review___img{\n        width:110px;\n        height: 110px;\n        border-radius: 5px 5px 0px 0px;\n        overflow: hidden;\n      }\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item > a >.review___img >img{\n        width:100%;\n      }\n      .peter99032j-xyz-panel-aside-main .histories-box-review_item > a >.review___text{\n        text-align: center!important;\n        font-size: 13px !important;\n        color: #000 !important;\n        text-decoration: underline !important;\n        padding: 5px!important;\n        white-space: nowrap!important;\n        overflow: hidden!important;\n        text-overflow: ellipsis!important;\n      }\n\n      /*** 横向小卡片 ***/\n      .peter99032j-xyz-panel-wrapper >.peter99032j-xyz-panel-aside-body{\n        display: flex;\n        border-radius:5px;\n        overflow: hidden;\n        background-color: #fafafa;\n        -moz-box-shadow:2px 2px 5px #b6bdc5;\n        -webkit-box-shadow:2px 2px 5px #b6bdc5;\n        box-shadow:2px 2px 5px #b6bdc5;\n        height:60px;\n      }\n      .peter99032j-xyz-panel-wrapper >.peter99032j-xyz-panel-aside-body >div{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n      .peter99032j-xyz-panel-aside-body .goods_____expand{\n        cursor: pointer;\n        width: 20px !important;\n      }\n\n      .peter99032j-xyz-panel-aside-body .goods_____expand svg{\n        transition: transform 0.3s;\n      }\n\n      /**** goods展示 ****/\n      .peter99032j-xyz-panel-aside-body .goods_____review{\n        flex-direction: row;\n        width:auto;\n        transition: all 0.5s ease-in-out;\n      }\n      .peter99032j-xyz-panel-aside-body .goods-review_____item{\n        width:45px;\n        height:45px;\n        line-height:45px;\n        margin:0px 5px;\n        position:relative;\n        border-radius: 4px;\n        overflow: hidden;\n        cursor:pointer;\n      }\n      .peter99032j-xyz-panel-aside-body .goods-review_____item >a{\n        display:block;\n        width: 100%;\n        height: 100%;\n      }\n      .peter99032j-xyz-panel-aside-body .goods-review_____item > a>.review___shadow{\n        position:absolute;\n        left:0px;\n        right:0px;\n        top:0px;\n        bottom:0px;\n        z-index:99;\n        text-align: center;\n        background-color:rgb(61 155 164 / 20%);\n        display:none;\n      }\n      .peter99032j-xyz-panel-aside-body .goods-review_____item > a>.review___shadow img{\n        width:15px;\n      }\n      .peter99032j-xyz-panel-aside-body .goods-review_____item img{\n        width:100%;\n      }\n\n      /** 展开历史记录BOX **/\n      .peter99032j-xyz-panel-aside-body .history-box_____expand{\n        flex-direction: column;\n        text-align: center;\n        margin:0px 10px;\n        cursor: pointer;\n      }\n      .peter99032j-xyz-panel-aside-body .history-box_____expand img{\n        width:26px;\n      }\n      .peter99032j-xyz-panel-aside-body .history-box_____expand label{\n        font-size:12px;\n        font-weight: bold;\n      }\n\n      .peter99032j-xyz-panel-aside-body .wrapper_____drag-handle{\n        width: 20px !important;\n        cursor: grab;\n        box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 3px -2px, rgba(0, 0, 0, 0.14) 0px 3px 4px 0px, rgba(0, 0, 0, 0.12) 0px 1px 8px 0px;\n      }\n    ";const o=this.get(e,this.defaultValue.toolbarGoodsNum),i='\n      <svg t="1722328287419" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14202" width="25" height="25"><path d="M757.9648 948.1216H271.6672c-107.264 0-194.2016-86.9376-194.2016-194.2016V267.6736c0-107.264 86.9376-194.2016 194.2016-194.2016h486.2464c107.264 0 194.2016 86.9376 194.2016 194.2016v486.2464c0.0512 107.264-86.8864 194.2016-194.1504 194.2016z" fill="#F6CC4F" p-id="14203"></path><path d="M823.3472 441.6512c-38.9632-171.5712-210.2784-279.4496-381.8496-240.5376-47.7696 10.8544-91.4944 32.0512-128.9216 62.1568l0.2048-44.3904a25.61024 25.61024 0 0 0-25.4976-25.7024h-0.1024c-14.08 0-25.5488 11.3664-25.6 25.4976l-0.512 111.8208c-0.0512 6.8096 2.6624 13.312 7.424 18.1248 4.7616 4.8128 11.3152 7.5264 18.0736 7.5776l119.296 0.3584h0.1024c14.08 0 25.5488-11.4176 25.6-25.4976a25.61024 25.61024 0 0 0-25.4976-25.7024l-63.7952-0.2048c31.9488-26.2656 69.5296-44.7488 110.6432-54.0672 144.0256-32.7168 287.8976 57.856 320.6144 201.9328 32.7168 144.0768-57.9072 287.8976-201.9328 320.6144-144.128 32.7168-287.8976-57.9072-320.6144-201.9328-4.9152-21.6576-7.168-43.8272-6.656-65.8432a25.6512 25.6512 0 0 0-24.9856-26.2144 25.61536 25.61536 0 0 0-26.2144 24.9856c-0.6144 26.2144 2.048 52.5824 7.8848 78.3872 33.5872 147.9168 165.4784 248.5248 311.1424 248.5248 23.3472 0 47.0016-2.56 70.7072-7.936 171.52-39.0656 279.4496-210.3296 240.4864-381.952z" fill="#F7F8F8" p-id="14204"></path><path d="M512.1536 382.3104c-14.1312 0-25.6 11.4688-25.6 25.6v106.7008c0 6.3488 2.3552 12.4416 6.6048 17.152l91.5968 101.6832c5.0688 5.632 12.032 8.448 19.0464 8.448 6.0928 0 12.2368-2.1504 17.1008-6.6048a25.58976 25.58976 0 0 0 1.8944-36.1472l-85.0432-94.3616V407.9104c0-14.1824-11.4688-25.6-25.6-25.6z" fill="#F7F8F8" p-id="14205"></path></svg>\n    ';let a="",r="";o.forEach((t=>{r=this.pretreatmentJumpUrl(t.url,e),a+='\n        <div class="goods-review_____item">\n          <a title="'+t.title+'" jump-tag="true" jump-url="'+r+'" target="_blank">\n            <div class="review___shadow">\n              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAVlJREFUWEftlsGRgzAMRS26wBQTUtluKltSDKYLlJUHMY6xZMGFi7lkCObr6cuWAHfzBTfHdw2gOdAcOOXAPM+/fGwB4OGcG7f7iX4R8d113dT3fby3XCYACgwAPxZBBiKYYRh2YOldFUAKjIivNNNlWUZEJEB2ZI9HazUQEUALLgluIH95thpEESCEQCKHbADgyfXNACcAeNEzpVyT9/6Zwx0ApOD/QFFAypKEvfdR74x7XwCaOGevANIpiPXWNm1eji8ATZyzCyGgdhos63gN6eQAorhFmMugOcml3PtJmo3FukpPqO6TdCMfHLBuIKkMiUvFU5RnXwSgP6W9kG6gbQ0tpya0NxvFftsx5JJIVucWWkp4uhHVIMhKajy0jptPtLMwLy634kJm6fSrzqVa4OIpqKlSfdd1HbdRHOufTj9+3zIFLwHUAK88N30PXBG2vtMAmgPNgQ/i7v8h6Um2jAAAAABJRU5ErkJggg==" />\n            </div>\n            <img src="'+t.pic+'" />\n          </a>\n        </div>\n      '}));let s='\n      <div class="peter99032j-xyz-panel-wrapper">\n        <div class="peter99032j-xyz-panel-aside-main">\n          <div class="panel-aside-main_____inner">\n            <div class="panel-aside-main_____header">\n              <div class="header_____title">\n                '+i+"\n                "+d.historyToolbar.boxTitle+'\n              </div>\n              <div class="header_____setting">\n                <svg class="icon-svg" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1770" width="30" height="30"><path d="M811.04 468.728a39.72 39.72 0 0 0-27.672-30.36l-10.2-2.28a100.872 100.872 0 0 1-68.856-120.24l3.12-9.552a41.592 41.592 0 0 0-11.424-40.368 281.64 281.64 0 0 0-36.816-24.336c-12.36-7.2-25.224-13.536-38.496-18.912a41.592 41.592 0 0 0-41.592 9.984l-7.08 7.488a100.248 100.248 0 0 1-69.264 27.456 100.464 100.464 0 0 1-68.64-27.672l-6.864-7.272a41.592 41.592 0 0 0-41.592-9.984 294.96 294.96 0 0 0-37.848 18.912c-12.696 7.152-24.792 15.288-36.192 24.336a41.592 41.592 0 0 0-10.824 40.368l2.904 9.552a101.088 101.088 0 0 1-10.8 74.064 96.72 96.72 0 0 1-57.408 45.552l-9.792 2.28a35.352 35.352 0 0 0-26.616 28.488c-1.872 14.352-2.64 28.8-2.28 43.272-0.408 14.736 0.36 29.472 2.28 44.088a39.936 39.936 0 0 0 25.8 31.2l9.552 2.304a99 99 0 0 1 57.624 46.992c12.984 22.392 16.848 48.912 10.8 74.064l-2.064 9.36a41.592 41.592 0 0 0 11.856 40.344c11.136 9.072 22.968 17.28 35.352 24.552 12.312 7.488 25.176 14.016 38.496 19.536 14.64 4.608 30.624 0.768 41.592-9.984l6.648-7.272a101.088 101.088 0 0 1 139.152 0l6.672 7.272a41.592 41.592 0 0 0 41.592 9.984 295.152 295.152 0 0 0 37.224-19.536 271.848 271.848 0 0 0 36.624-24.336c10.944-10.32 15.48-25.752 11.856-40.368l-2.928-9.768a100.872 100.872 0 0 1 69.48-120l9.576-2.304a39.72 39.72 0 0 0 27.648-30.36c1.68-14.376 2.232-28.824 1.68-43.272a291.192 291.192 0 0 0-2.304-43.272z m-307.44 190.944a147.672 147.672 0 1 1 0-295.344 147.672 147.672 0 0 1 0 295.344z" fill="#8a8a8a" p-id="1771"></path></svg>\n              </div>\n              <div class="header_____close">\n                <svg class="icon-svg" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1609" width="30" height="30"><path d="M673.5644448 281.66826667L512 447.82933333 351.16373333 281.71377813a44.6464 44.6464 0 0 0-63.6700448-0.50062293 46.1027552 46.1027552 0 0 0-0.50062186 64.6712896L447.82933333 512l-160.83626666 165.84248853c-17.52177813 18.06791147-17.29422187 46.8764448 0.50062186 64.6712896a44.69191147 44.69191147 0 0 0 63.71555627-0.45511146L512 576.17066667l161.5644448 165.93351146a44.78293333 44.78293333 0 0 0 63.7155552 0.4096 45.96622187 45.96622187 0 0 0 0.45511147-64.62577813L576.17066667 512l161.5644448-166.16106667a46.01173333 46.01173333 0 0 0-0.45511147-64.62577813 44.73742187 44.73742187 0 0 0-63.7155552 0.45511147z" fill="#5D6E7F" p-id="1610"></path></svg>\n              </div>\n            </div>\n            <div class="panel-aside-main_____content"></div>\n          </div>\n        </div>\n        <div class="peter99032j-xyz-panel-aside-body">\n          <div class="goods_____expand">\n            <svg focusable="false" class="icon-svg" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1365" width="20" height="20"><path d="M317.84959998 926.1056a46.08 46.08 0 0 1 10.8544-29.9008L643.68639998 521.216a13.312 13.312 0 0 0 0-18.432l-3.6864-3.072L328.70399998 127.7952a46.4896 46.4896 0 0 1 71.0656-59.8016l311.0912 370.68799999a105.8816 105.8816 0 0 1 0 146.63680002l-311.0912 370.68799999a46.2848 46.2848 0 0 1-81.92-29.9008z" fill="#bfbfbf" p-id="1366"></path></svg>\n          </div>\n          <div class="goods_____review">\n            '+a+'\n          </div>\n          <div class="history-box_____expand">\n            '+i+"\n            <label>"+d.historyToolbar.expandTipText+'</label>\n          </div>\n          <div class="wrapper_____drag-handle">\n            <svg focusable="false" class="icon-svg" viewBox="0 0 24 24" data-testid="DragIndicatorIcon"><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2" fill="#bfbfbf"></path></svg>\n          </div>\n        </div>\n      </div>\n    ';GM_addStyle(n),document.querySelector("body").insertAdjacentHTML("afterend",s),this.addEventListener(e)},addEventListener:function(e){const t=this;document.querySelectorAll(".goods_____review >.goods-review_____item >a").forEach((e=>{e.addEventListener("mouseover",(function(){this.querySelector(".review___shadow").style.display="block"})),e.addEventListener("mouseout",(function(){this.querySelector(".review___shadow").style.display="none"}))}));const n=document.querySelector(".peter99032j-xyz-panel-wrapper .goods_____expand");n&&n.addEventListener("click",(function(){const e=this.nextElementSibling,t=this.querySelector("svg");t.style.transition="transform 0.3s","0px"==e.style.width?(e.style.width="auto",t.style.transform="rotate(0deg)"):(e.style.width="0px",t.style.transform="rotate(180deg)")}));const o=[document.querySelector(".peter99032j-xyz-panel-wrapper .history-box_____expand"),document.querySelector(".peter99032j-xyz-panel-wrapper .header_____close")],i=document.querySelector(".peter99032j-xyz-panel-wrapper >.peter99032j-xyz-panel-aside-main");i&&o.forEach((n=>{n&&n.addEventListener("click",(function(){i.style.display&&"none"!==i.style.display?i.style.display="none":(t.showOrHideHistoryBox(e),i.style.display="block")}))})),document.body.addEventListener("click",(function(e){i.style.display&&"none"!==i.style.display&&(i.style.display="none")}));const a=document.querySelector(".peter99032j-xyz-panel-wrapper .header_____setting");a&&a.addEventListener("click",(()=>{t.showSettingDialog()})),document.querySelectorAll(".peter99032j-xyz-panel-aside-body a[jump-tag='true']").forEach((e=>{e.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();const t=this.getAttribute("jump-url");u.openInTab(u.decryptStr(t))}))}));const r=document.querySelector(".peter99032j-xyz-panel-wrapper .wrapper_____drag-handle"),s=document.querySelector(".peter99032j-xyz-panel-wrapper");let l,d;const{width:c,height:m}=s.getBoundingClientRect(),p=Object.assign({},this.defaultValue.offsetWrapper),h=e=>{const{innerWidth:t,innerHeight:n}=window;e.clientX;let o=n-(e.clientY-d)-m;o<0?o=0:o>n-m&&(o=n-m-0),s.style.bottom=o+"px",p.bottom=o,GM_setValue(this.storageKeys.offset,p)};r&&s&&(r.addEventListener("mousedown",(function(e){l=e.clientX-s.offsetLeft-10,d=e.clientY-s.offsetTop-10,r.style.cursor="grabbing",s.style.userSelect="none",document.addEventListener("mousemove",h)})),document.addEventListener("mouseup",(function(){r.style.cursor="grab",s.style.userSelect="default",document.removeEventListener("mousemove",h)})))},removeAnchor:function(){/aliexpress\./.test(window.location.host)&&setInterval((()=>{document.querySelectorAll("div[class='peter99032j-xyz-panel-wrapper']").forEach((e=>{u.removeAliexpressAnchors(e)}))}),1500)},start:function(e){try{this.createHistoryBox(e),this.registerMenuCommand(),this.removeAnchor()}catch(e){}}},A={visitUrl:window.location.href,searchAttribute:"loop-task-i9v---search",baseUrl:"https://oversea.mimixiaoke.com",cacheRequestMap:{},requestAndSaveSate:function(e,t,n){return new Promise(((o,i)=>{const a="key_"+(new Date).getTime(),r=new XMLHttpRequest;if(this.cacheRequestMap[a]=r,"GET"===e){let o="";if(n){o="?"+new URLSearchParams(n).toString()}r.open(e,t+o),r.send()}else{if("POST"!==e)return void o({code:"error",requestKey:a,result:null});r.open(e,t),r.setRequestHeader("Content - Type","application/json"),r.send(JSON.stringify(n))}r.onreadystatechange=function(){if(4===r.readyState)if(r.status>=200&&r.status<300)try{o({code:"success",requestKey:a,result:r.responseText})}catch(e){o({code:"error",requestKey:a,result:null})}else o({code:"error",requestKey:a,result:null})}}))},requestConf:function(){return new Promise(((e,t)=>{u.crossRequest("GET",this.baseUrl+"/api/load/conf",null).then((t=>{"success"==t.code&&t.result?e(t.result):e(null)}))}))},pickupGoodsItem:function(e,t){const n=window.location.href,o=new Array;let i=t;try{i=i.replace(/\\\\/g,"\\")}catch(e){}const a=JSON.parse(i)[e];for(let e=0;e<a.length;e++){const t=a[e];if(!t.hasOwnProperty("elements")||!t.hasOwnProperty("matches"))continue;const{elements:i,matches:r}=t;if(r.map((e=>new RegExp(e,"i").test(n))).some((e=>e)))for(let e=0;e<i.length;e++)o.push({element:i[e].element,findA:i[e].findA,page:i[e].page})}return o},getGoodsLinkByElement:function(e,t){let n=null;return"this"==t?n=e:/^child@/.test(t)&&(n=e.querySelector(t.replace(/^child@/,""))),n},getGoodsPriceByElement:function(e,t){const n=e.querySelector(t);let o=null==n?"":n.innerText;return o&&(o=o.replace(/\s|,/g,"")),o},getGoodsPrice:function(e){const t=(e=e.replace(/,/g,"")).match(/(?:₱|\$|฿|₫|Rp|RM|￥)\n?\d+(?:(?:\.\d{1,3})*)?/);let n=t?t[0]:"";return n&&-1!=n.indexOf("Rp")&&(n=n.replace(/\./g,"")),n=n.replace(/\n|,/g,""),n},isElementDisplayed:function(e){if(null!==e.offsetParent)return!0;return"none"!==window.getComputedStyle(e).display},getGoodsIdByUrl:function(e,t){if(!e)return null;e=-1==e.indexOf("http")?location.protocol+e:e;return u.getParamterBySuffix(e,t)},calcRequestGroup:function(e){const t=e.length;let n=[];for(let o=0;o<t;o++){const t=Math.floor(o/8);n[t]||(n[t]=[]),n[t].push(e[o])}return n},addGoodsHistory:function(e,t,n,o,i,a=window.location.href){i&&u.waitForElementByInterval(n).then((n=>{const r=document.querySelector(t),s=document.querySelector(o);if(s){var l="";"IMG"==s.tagName?l=s.getAttribute("data-src")||s.getAttribute("data-url")||s.getAttribute("src"):"SOURCE"==s.tagName&&(l=s.getAttribute("srcSet")||s.getAttribute("src"));const t=n?n.innerText:"Unknown",o=r?r.innerText:"--",d={id:e,url:a,pic:l,date:(new Date).getTime(),price:t,title:o};_.push(i,d)}})).catch((e=>{}))}};var k=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const C={languageStoageKey:"language-stoage-key",currencyStoageKey:"language-currency-key",baseUrl:"https://oversea.mimixiaoke.com",checkDomInsertRs:!0,getLang:function(){const e=window.location.host;let t="en";return/^(us|ko|uk|fr|de|it|ca|au|jp|ja|he|kr|ru|br|in|es|mx|pl|tr|ar|id|th|vn|sg|my|ph|be|nl|se|ch|no|dk|at|ie|fi|pt|gr|hu|cz|bg|ro|ua|il|sa|eg|ir|pk|iq|af|ly|et|gh|ke|ng|za|tz|mg|mw|zm|bw|sn|cm|ci|gh|ma|tn|mr|mu|om|kw|qa|bh|ae|lb|jo|sy|lb|il|ps|kr|cl|pe|uy|ec|ve|bo|gt|pa|hn|ni|cr|sv|gt|sl|lr|sd|er|dj|et|mw|mz|ao|tz|zm|zw|mw|na|bw|ls|mg|km)\.aliexpress\.com$/.test(e)?t=e.split(".")[0]:/^www\.aliexpress\.com$/.test(e)?t="en":/^aliexpress\.ru$/.test(e)&&(t="ru"),GM_setValue(this.languageStoageKey,t),t},getCurrency:function(){const e=window.location.host;return new Promise(((t,n)=>{if(-1!=e.indexOf("aliexpress.ru"))t("unknown");else{const e=document.querySelector("div[class^='ship-to--menuItem--']")||document.querySelector("div[class^='countryFlag--']");if(e){let n=e.textContent;n?(n=encodeURIComponent(n),GM_setValue(this.currencyStoageKey,n),t(n)):t("unknown")}else t("unknown")}}))},detail:function(){return k(this,null,(function*(){const e=window.location.href;if(![/\/item\/[^\/]*?\.html\?/,/\/item\/[^\/]*?\.html$/].map((t=>t.test(e))).some((e=>1==e)))return;const t=this.getLang(),n=yield this.getCurrency(),o=u.getParamterBySuffix(e,"html"),i=this.baseUrl+"/api/coupon/query?ids="+o+"&qu=&p=aliexpress&no=9&v=1.0.1&lang="+t+"&mul=false&currency="+n;try{const e=yield u.crossRequest("GET",i,null);if("success"==e.code&&e.result){const o=JSON.parse(e.result);yield this.detailAnalyze(o,t,n)}}catch(e){}A.addGoodsHistory(o,"h1[data-pl='product-title'], h1[class*='HazeProductDescription_HazeProductDescription__smallText_']","span.product-price-value, div[class*='currentPriceText'], div[class*='HazeProductPrice_SnowPrice__container']>div","div[class*='slider--img'] >img, div[class*='__previewItem__'] picture[class*='Picture__container']>source","aliexpress",e)}))},detailAnalyze:function(e,t,n){return k(this,null,(function*(){this.checkDomInsertRs=!1;try{if(!e)return;let i=null,a=null;if(e.data&&e.data.css&&e.data.html&&e.data.handler){const{handler:t,css:n,html:a,templateId:r,distinguish:s,hint:l}=e.data;var o=null;e.data.hasOwnProperty("mid")&&(o=e.data.mid),GM_addStyle(n);const d=yield u.mustGetElement(t);d&&(i={element:d,html:a,templateId:r,distinguish:s,hint:l,mid:o})}if(e.id&&e.mscan&&e.mscan.html&&e.mscan.mount){const{iden:o,html:i,mount:r,distinguish:s}=e.mscan,l=e.id,d=[],c=u.mustGetElement(r),m=this.baseUrl+"/api/coupon/change?id="+l+"&lang="+t+"&platform=aliexpress&currency="+n,p=u.crossRequest("GET",m,null);d.push(c,p);const h=yield Promise.all(d);let f=null,g=null;for(let e=0;e<h.length;e++)h[e]&&(h[e].hasOwnProperty("code")?g=h[e]:f=h[e]);f&&g&&(a={element:f,html:i,iden:o,qrcodeData:g,distinguish:s})}u.loopTask((()=>{i&&u.distinguishRemoveAndTry(i.distinguish,(()=>{this.detailCouponAnalyze(i)})),a&&u.distinguishRemoveAndTry(a.distinguish,(()=>{this.detailMscanAnalyze(a)}))}))}catch(e){}finally{this.checkDomInsertRs=!0}}))},detailCouponAnalyze:function(e){const{element:t,html:n,templateId:o,hint:i,mid:a}=e;t.insertAdjacentHTML("afterend",n);const r=document.querySelector("div[id='"+o+"']");if(r){const e=r.querySelector(".coupon-code"),t=u.decryptStr(e.getAttribute("data-encryptcode"));r.addEventListener("click",(()=>{GM_setClipboard(t,"txt",(()=>{if(p({message:i||d.operat.copied,background:"#D3031C"}),a&&a.hasOwnProperty("target")&&a.hasOwnProperty("link")&&a.hasOwnProperty("delay")){const{target:e,link:t,delay:n}=a,o=u.decryptStr(t);setTimeout((()=>{"_blank"===e?u.openInTab(o):"_self"===e?window.location.href=o:"_replace"===e&&window.location.replace(o)}),n)}}))}))}},detailMscanAnalyze:function(e){const{element:t,html:n,qrcodeData:o,iden:i}=e;if(t.insertAdjacentHTML("afterend",n),o&&"success"===o.code&&o.result){const e=JSON.parse(o.result).mscanImg;if(e){const t=document.getElementById("mscan"+i);if(t){var a=t.getContext("2d"),r=new Image;r.src=e,r.onload=function(){a.drawImage(r,0,0,r.width,r.height)}}}}},trade:function(){return k(this,null,(function*(){const e=window.location.href;if(![/\/trade\/confirm\.html/,/\/checkout\?/].map((t=>t.test(e))).some((e=>1==e)))return;const t=yield GM_getValue(this.languageStoageKey,navigator.language),n=yield GM_getValue(this.currencyStoageKey,"USD"),o=u.getParamterBySearch(window.location.search,"objectId")||u.getParamterBySearch(window.location.search,"availableProductShopcartIds")||u.getParamterBySearch(window.location.search,"itemId"),i=this.baseUrl+"/api/coupon/query?ids="+o+"&qu=&p=aliexpress&no=9&v=1.0.1&lang="+t+"&mul=true&currency="+n,a=yield u.crossRequest("GET",i,null);if("success"==a.code&&a.result){const e=JSON.parse(a.result);yield this.tradeAnalyze(e,t)}}))},tradeAnalyze:function(e,t){return k(this,null,(function*(){if(!(e&&e.handler&&e.css&&e.templateId))return;const{handler:t,css:n,html:o,templateId:i,distinguish:a}=e;GM_addStyle(n);let r=yield u.mustGetElement(t);u.loopTask((()=>{r&&u.distinguishRemoveAndTry(a,(()=>{r.insertAdjacentHTML("afterend",o);const e=document.querySelector("#"+i+">.item");if(e){const t=u.decryptStr(e.querySelector(".copy").getAttribute("data-encryptcode"));e.addEventListener("click",(()=>{GM_setClipboard(t,"txt",(()=>{p({message:d.operat.copied,background:"#D3031C"})}))}));const n=document.querySelector(".pl-summary__item-arrow-pc");n&&n.click()}}))}))}))},isRun:function(){return-1!=window.location.host.indexOf("aliexpress.")},removeAnchor:function(){u.loopTask((()=>{document.querySelectorAll("div[name^='ali-gogo-coupon-']").forEach((e=>u.removeAliexpressAnchors(e)))}),2500)},start:function(){return k(this,null,(function*(){this.isRun()&&(this.detail(),this.trade(),this.removeAnchor())}))}};var M=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const S={loopIsComplete:!0,currentPlatform:"aliexpress",isInbusinessPage:function(){return/inbusiness\.aliexpress\.com\/web\/search-products/.test(A.visitUrl)},isItemLink:function(e){return/aliexpress/.test(e)&&/\/item\/[^\/]*?\.html/.test(e)},pickUpWholesale:function(e,t,n){return M(this,null,(function*(){const o=[];try{e.forEach((e=>{if(e.element){const t=document.querySelectorAll(e.element+":not(["+A.searchAttribute+"='true'])");t.length;const n=e.findA;t.forEach((e=>{if(e&&A.isElementDisplayed(e)&&!e.getAttribute(A.searchAttribute)){const t=A.getGoodsLinkByElement(e,n);let i=null;this.isItemLink(t)&&(i=A.getGoodsIdByUrl(t.getAttribute("href"))),i&&o.push({id:i,platform:this.currentPlatform,handler:e,findA:n,from:"wholesale"})}}))}})),o.length>0&&(yield this.search(o,t,n))}catch(e){}}))},pickUpInbusiness:function(e,t){return M(this,null,(function*(){if(this.isInbusinessPage())try{const n=document.querySelector("#ice-container"),o=yield u.waitForElementByInterval("#loadMore",n);if(o){const n=new Array,i=o.previousElementSibling;if(i&&"DIV"===i.tagName){i.childNodes.forEach((e=>{if("A"===e.tagName&&A.isElementDisplayed(e)&&!e.getAttribute(A.searchAttribute)){const t=A.getGoodsIdByUrl(e.getAttribute("href"));t&&n.push({id:t,platform:this.currentPlatform,handler:e,from:"inbusiness"})}}))}yield this.search(n,e,t)}}catch(e){}}))},search:function(e,t,n){const o=A.calcRequestGroup(e),i=o.length;return new Promise(((e,a)=>{if(i<=0)return void e("complete");const r=[];for(let e=0;e<o.length;e++)r.push(this.createItemHtml(o[e],t,n));Promise.all(r).then((t=>{e("complete")}))}))},createItemHtml:function(e,t,n){return new Promise(((o,i)=>{try{if(Array.isArray(e)&&0===e.length)return void o("exception");let i="";const r=e[0].platform;for(var a=0;a<e.length;a++)e[a].handler.getAttribute(A.searchAttribute)||(i+=e[a].id+",");i.endsWith(",")&&(i=i.slice(0,-1));const s=A.baseUrl+"/api/coupon/exist?platform="+r+"&ids="+i+"&lang="+t+"&no=9&v=1.0.1&currency="+n;A.requestAndSaveSate("GET",s,null).then((t=>{if(delete A.cacheRequestMap[t.requestKey],"success"!=t.code||!t.result)return void o("exception");const n=JSON.parse(t.result);let i=!1;for(let t in n){const{encryptLink:o,tip:a}=n[t],r=e.find((e=>e.id===t));if(!r)continue;let s=null,l=null;if(r.hasOwnProperty("handler")&&r.hasOwnProperty("findA")&&(s=r.handler,l=r.findA),!s||!l)continue;let d=null;if(o)try{d=atob(o).split("").reverse().join("")}catch(e){}const c=A.getGoodsLinkByElement(s,l);if((c?A.getGoodsIdByUrl(c.getAttribute("href")):"")!=t){e.forEach((e=>{const t=e.handler;t.removeAttribute(A.searchAttribute);const n=t.querySelector("div[name^='ali-gogo-coupon-']");n&&n.remove()})),i=!0;break}s.getAttribute(A.searchAttribute)||(s.setAttribute(A.searchAttribute,"true"),a&&(s.style.position="relative",s.insertAdjacentHTML("beforeend",a)),d&&this.relativeJ(s,d))}o(i?"broken":"complete")}))}catch(e){o("exception")}}))},relativeJ:function(e,t){const n="tip-vjd1jd89fcv-i";let o=null;o="A"==e.tagName?[e]:e.querySelectorAll("a"),o.forEach((e=>{const o=e.getAttribute("href");if(this.isItemLink(o)){if(e.getAttribute(n))return;e.setAttribute(n,"true"),e.addEventListener("click",(function(e){let n=!0;const o=e.target;if("A"==o.tagName.toUpperCase()){const e=o.getAttribute("href");this.isItemLink(e)||(n=!1)}n&&Array.from(o.classList).forEach((e=>{["icon","-btn-"].map((t=>-1!=e.indexOf(t))).some((e=>e))&&(n=!1)})),n&&(e.preventDefault(),e.stopPropagation(),u.openInTab(t))}))}}))},isRun:function(){let e=!1;return-1!=window.location.host.indexOf("aliexpress.")&&(e=!/\/(item|trade|checkout)\//.test(window.location.pathname)),e},start:function(){return M(this,null,(function*(){if(!this.isRun())return;let e=!0;const t=C.getLang(),n=yield C.getCurrency(),o=yield A.requestConf();if(!o)return;const i=A.pickupGoodsItem(this.currentPlatform,o);if(setInterval((()=>M(this,null,(function*(){e&&this.loopIsComplete&&(this.loopIsComplete=!1,yield this.pickUpInbusiness(t,n),yield this.pickUpWholesale(i,t,n),this.loopIsComplete=!0)}))),1700),0!=i.length&&"/"!=window.location.pathname){let t=window.location.href;setInterval((()=>{t!=window.location.href&&e&&(e=!1,Object.keys(A.cacheRequestMap).forEach((e=>{A.cacheRequestMap[e].abort()})),A.cacheRequestMap={},document.querySelectorAll("*["+A.searchAttribute+"='true']").forEach((e=>{const t=e.querySelector("*[name^='ali-gogo-coupon-']");t&&t.remove()})),t=window.location.href),e=!0}),777);const n=[];i.forEach((e=>{n.push(u.waitForElementByInterval(e.element,document.body,!0,50,3e3))}));const o=yield Promise.race(n);if(o){new MutationObserver((t=>{if(1==t.length){const n=t[0];"attributes"===n.type&&"href"===n.attributeName&&e&&(e=!1,document.querySelectorAll("*["+A.searchAttribute+"='true']").forEach((e=>{e.removeAttribute(A.searchAttribute);const t=e.querySelector("*[name^='ali-gogo-coupon-']");t&&t.remove()})),e=!0)}})).observe(o,{attributes:!0})}}}))}};var P=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const T={baseUrl:"https://oversea.mimixiaoke.com",getGoodsId:function(e){const t=e.match(/https?:\/\/www\.ebay\.[a-z.]+\/itm\/(\d+)/);return t?t[1]:null},isDetail:function(){const e=window.location.href;return[/https?:\/\/www\.ebay\.[a-z.]+\/itm\/\d+/].map((t=>t.test(e))).some((e=>e))},getMarketplace:function(e){try{const t=new URL(e).hostname;if(t)return t.split(".").slice(-1)[0]}catch(e){}return null},detail:function(){return P(this,null,(function*(){if(!this.isDetail())return;const e=window.location.href,t=this.getGoodsId(e),n=u.getParamterBySearch(window.location.href,"var");if(!t)return;const o=this.getMarketplace(e);var i=t;n&&(i+="@"+n);const a=this.baseUrl+"/api/coupon/query?ids="+i+"&qu=&p=ebay&no=9&v=1.0.1&marketplace="+o+"&mul=false";try{const e=yield u.crossRequest("GET",a,null);if("success"==e.code&&e.result){const t=JSON.parse(e.result);yield this.detailAnalyze(t,o)}}catch(e){}A.addGoodsHistory(t,".x-item-title__mainTitle",".x-price-primary >span",".ux-image-grid-item >img, .ux-image-carousel-item >img","ebay",e)}))},detailAnalyze:function(e,t){return P(this,null,(function*(){let n=null,o=null;if(e.data&&e.data.css&&e.data.html&&e.data.handler){const{handler:t,css:o,html:a,templateId:r,distinguish:s,hint:l}=e.data;var i=null;e.data.hasOwnProperty("mid")&&(i=e.data.mid),GM_addStyle(o);const d=yield u.mustGetElement(t);d&&(n={element:d,html:a,templateId:r,distinguish:s,hint:l,mid:i})}if(e.id&&e.mscan&&e.mscan.html&&e.mscan.mount){const{iden:n,html:i,mount:a,distinguish:r}=e.mscan,s=e.id,l=[],d=u.mustGetElement(a),c=this.baseUrl+"/api/coupon/change?id="+s+"&marketplace="+t+"&platform=ebay",m=u.crossRequest("GET",c,null);l.push(d,m);const p=yield Promise.all(l);let h=null,f=null;for(let e=0;e<p.length;e++)p[e]&&(p[e].hasOwnProperty("code")?f=p[e]:h=p[e]);h&&f&&(o={element:h,html:i,iden:n,qrcodeData:f,distinguish:r})}u.loopTask((()=>{n&&u.distinguishRemoveAndTry(n.distinguish,(()=>{this.detailCouponAnalyze(n)})),o&&u.distinguishRemoveAndTry(o.distinguish,(()=>{this.detailMscanAnalyze(o)}))}))}))},detailCouponAnalyze:function(e){const{element:t,html:n,templateId:o,hint:i,mid:a}=e;t.insertAdjacentHTML("afterend",n);const r=document.querySelector("div[id='"+o+"']");if(r){const e=r.querySelector(".coupon-code"),t=u.decryptStr(e.getAttribute("data-encryptcode"));r.addEventListener("click",(()=>{GM_setClipboard(t,"txt",(()=>{if(p({message:i||d.operat.copied,background:"#D3031C"}),a&&a.hasOwnProperty("target")&&a.hasOwnProperty("link")&&a.hasOwnProperty("delay")){const{target:e,link:t,delay:n}=a,o=u.decryptStr(t);setTimeout((()=>{"_blank"===e?u.openInTab(o):"_self"===e?window.location.href=o:"_replace"===e&&window.location.replace(o)}),n)}}))}))}},detailMscanAnalyze:function(e){const{element:t,html:n,qrcodeData:o,iden:i}=e;if(t.insertAdjacentHTML("afterend",n),o&&"success"===o.code&&o.result){const e=JSON.parse(o.result).mscanImg;if(e){const t=document.getElementById("mscan"+i);if(t){var a=t.getContext("2d"),r=new Image;r.src=e,r.onload=function(){a.drawImage(r,0,0,r.width,r.height)}}}}},start:function(){return P(this,null,(function*(){this.detail()}))}};var E=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const z={loopIsComplete:!0,currentPlatform:"ebay",isRun:function(){let e=!1;return-1!=window.location.host.indexOf("ebay.")&&(e=!/\/(item|itm|trade|checkout|rxo)\//.test(window.location.pathname)),e},isItemLink:function(e){return/ebay/.test(e)&&/\/itm\/[^\/]*?/.test(e)},pickUpItems:function(e,t){return E(this,null,(function*(){const n=[];try{e.forEach((e=>{if(e.element){const t=document.querySelectorAll(e.element+":not(["+A.searchAttribute+"='true'])"),o=e.findA;t.forEach((e=>{if(e&&A.isElementDisplayed(e)&&!e.getAttribute(A.searchAttribute)){const t=A.getGoodsLinkByElement(e,o),i=["*[class*='detail'] >*[class*='price']","*[class*='merch-price'] >span"].join(","),a=A.getGoodsPriceByElement(e,i);let r=null,s=null;if(this.isItemLink(t)){const e=t.getAttribute("href");r=A.getGoodsIdByUrl(e),s=u.getParamterBySearch(e,"var")}r&&n.push({id:r,varG:s,price:a,platform:this.currentPlatform,handler:e,findA:o,from:"search"})}}))}})),n.length>0&&(yield this.search(n,t))}catch(e){}}))},search:function(e,t){return E(this,null,(function*(){const n=A.calcRequestGroup(e),o=n.length;return new Promise(((e,i)=>{if(o<=0)return void e("complete");const a=[];for(let e=0;e<n.length;e++)a.push(this.createItemHtml(n[e],t));Promise.all(a).then((t=>{e("complete")}))}))}))},createItemHtml:function(e,t){return new Promise(((n,o)=>{try{if(Array.isArray(e)&&0===e.length)return void n("exception");let o="";const a=e[0].platform;for(var i=0;i<e.length;i++)e[i].handler.getAttribute(A.searchAttribute)||(o+=e[i].id,e[i].varG&&(o+="@"+e[i].varG),o+=":"+e[i].price+",");o.endsWith(",")&&(o=o.slice(0,-1));const r=A.baseUrl+"/api/coupon/exist?platform="+a+"&ids="+o+"&marketplace="+t+"&no=9&v=1.0.1";A.requestAndSaveSate("GET",r,null).then((t=>{if(delete A.cacheRequestMap[t.requestKey],"success"!=t.code||!t.result)return void n("exception");const o=JSON.parse(t.result);for(let t in o){const{encryptLink:n,tip:i}=o[t],a=e.find((e=>e.id===t));if(!a)continue;let r=null,s=null;if(a.hasOwnProperty("handler")&&a.hasOwnProperty("findA")&&(r=a.handler,s=a.findA),!r||!s)continue;let l=null;if(n)try{l=atob(n).split("").reverse().join("")}catch(e){}A.getGoodsLinkByElement(r,s);r.getAttribute(A.searchAttribute)||(r.setAttribute(A.searchAttribute,"true"),i&&(r.style.position="relative",r.insertAdjacentHTML("beforeend",i)),l&&this.relativeJ(r,l))}n("complete")}))}catch(e){n("exception")}}))},relativeJ:function(e,t){const n="tip-vjd1jd89fcv-i",o=this;let i=null;i="A"==e.tagName?[e]:e.querySelectorAll("a"),i.forEach((e=>{const i=e.getAttribute("href");if(o.isItemLink(i)){if(e.getAttribute(n))return;e.setAttribute(n,"true"),e.addEventListener("click",(function(e){let n=!0;const i=e.target;if("A"==i.tagName.toUpperCase()){const e=i.getAttribute("href");o.isItemLink(e)||(n=!1)}n&&Array.from(i.classList).forEach((e=>{["btn","icon"].map((t=>-1!=e.indexOf(t))).some((e=>e))&&(n=!1)})),n&&(e.preventDefault(),e.stopPropagation(),u.openInTab(t))}))}}))},start:function(){return E(this,null,(function*(){if(!this.isRun())return;const e=T.getMarketplace(window.location.href),t=yield A.requestConf();if(!t)return;const n=A.pickupGoodsItem(this.currentPlatform,t);setInterval((()=>E(this,null,(function*(){this.loopIsComplete&&(this.loopIsComplete=!1,yield this.pickUpItems(n,e),this.loopIsComplete=!0)}))),1700)}))}};var I=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const q={baseUrl:"https://oversea.mimixiaoke.com",visitUrl:window.location.href,getMarketplace:function(e){try{const t=new URL(e).hostname.split(".");return t[t.length-1]}catch(e){console.log(e)}return null},isRun:function(){return/.*\.lazada\..*\/products\/.*-i\d+.*\.html/.test(this.visitUrl)},detailMyMscanAnalyze:function(e){return I(this,null,(function*(){const{id:t,iden:n,marketplace:o,platform:i,mount:a,html:r,cmd:s}=e;if(!a||!r)return;if(s&&s.do&&s.ele){const e=yield u.waitForElementByInterval(s.ele);e&&"empty"==s.do&&(e.innerHTML="")}const l=yield u.mustGetElement(a);if(!l)return;l.insertAdjacentHTML("beforeend",r);const d=this.baseUrl+"/api/coupon/change?id={id}&marketplace={marketplace}&platform={platform}".replace("{id}",t).replace("{marketplace}",o).replace("{platform}",i),c=yield u.crossRequest("GET",d,null);if(c&&"success"===c.code&&c.result){let e=JSON.parse(c.result).mscanImg;if(e){var m=document.getElementById("mscan"+n);if(m){var p=m.getContext("2d"),h=new Image;h.src=e,h.onload=function(){p.drawImage(h,0,0,h.width,h.height)}}}}}))},detail:function(){return I(this,null,(function*(){const e=this.getMarketplace(window.location.href),t="lazada",n=u.getParamterBySuffix(this.visitUrl);if(!n)return;const o=this.baseUrl+"/api/coupon/query?ids="+n+"&qu=&p="+t+"&no=9&v=1.0.1&marketplace="+e+"&mul=false";try{const n=yield u.crossRequest("GET",o,null);if(n&&"success"===n.code&&n.result){const o=JSON.parse(n.result);if(o&&o.mscan){const{distinguish:n,iden:i,html:a,cmd:r,mount:s}=o.mscan,l={id:o.id,iden:i,marketplace:e,platform:t,mount:s,html:a,cmd:r};u.loopTask((()=>{u.distinguishRemoveAndTry(n,(()=>{this.detailMyMscanAnalyze(l)}))}))}}}catch(e){}A.addGoodsHistory(n,".pdp-mod-product-badge-title",".pdp-product-price >span",".gallery-preview-panel__content >img:last-child","lazada",this.visitUrl)}))},start:function(){return I(this,null,(function*(){this.isRun()&&this.detail()}))}};var L=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const H={loopIsComplete:!0,currentPlatform:"lazada",isRun:function(){let e=!1;return-1!=window.location.host.indexOf("lazada.")&&(e=!this.isItemLink(window.location.href)&&!/\/(\/shipping\\?)\//.test(window.location.pathname)),e},isItemLink:function(e){return/.*\.lazada\..*\/products\/.*-i\d+.*\.html/.test(e)},pickUpItems:function(e,t){return L(this,null,(function*(){const n=[];try{e.forEach((e=>{if(e.element){const t=document.querySelectorAll(e.element+":not(["+A.searchAttribute+"='true'])"),o=e.findA;t.forEach((e=>{if(e&&A.isElementDisplayed(e)&&!e.getAttribute(A.searchAttribute)){const t=A.getGoodsLinkByElement(e,o),i=A.getGoodsPrice(e.innerText);let a=null;this.isItemLink(t)&&(a=A.getGoodsIdByUrl(t.getAttribute("href"))),a&&n.push({id:a,price:i,platform:this.currentPlatform,handler:e,findA:o,from:"search"})}}))}})),n.length>0&&(yield this.search(n,t))}catch(e){}}))},search:function(e,t){return L(this,null,(function*(){const n=A.calcRequestGroup(e),o=n.length;return new Promise(((e,i)=>{if(o<=0)return void e("complete");const a=[];for(let e=0;e<n.length;e++)a.push(this.createItemHtml(n[e],t));Promise.all(a).then((t=>{e("complete")}))}))}))},createItemHtml:function(e,t){return new Promise(((n,o)=>{try{if(Array.isArray(e)&&0===e.length)return void n("exception");let o="";const a=e[0].platform;for(var i=0;i<e.length;i++)e[i].handler.getAttribute(A.searchAttribute)||(o+=e[i].id+":"+e[i].price+",");o.endsWith(",")&&(o=o.slice(0,-1));const r=A.baseUrl+"/api/coupon/exist?platform="+a+"&ids="+o+"&marketplace="+t+"&no=9&v=1.0.1";A.requestAndSaveSate("GET",r,null).then((t=>{if(delete A.cacheRequestMap[t.requestKey],"success"!=t.code||!t.result)return void n("exception");const o=JSON.parse(t.result);for(let t in o){const{encryptLink:n,tip:i}=o[t],{handler:a,findA:r}=e.find((e=>e.id===t));let s=null;if(n)try{s=atob(n).split("").reverse().join("")}catch(e){}A.getGoodsLinkByElement(a,r);a.getAttribute(A.searchAttribute)||(a.setAttribute(A.searchAttribute,"true"),i&&(a.style.position="relative",a.insertAdjacentHTML("beforeend",i)),s&&this.relativeJ(a,s))}n("complete")}))}catch(e){n("exception")}}))},relativeJ:function(e,t){let n=null;n="A"==e.tagName?[e]:e.querySelectorAll("a"),n.forEach((e=>{this.isItemLink(e.getAttribute("href"))&&e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),u.openInTab(t)}))}))},start:function(){return L(this,null,(function*(){if(!this.isRun())return;const e=q.getMarketplace(window.location.href),t=yield A.requestConf();if(!t)return;const n=A.pickupGoodsItem(this.currentPlatform,t);setInterval((()=>L(this,null,(function*(){this.loopIsComplete&&(this.loopIsComplete=!1,yield this.pickUpItems(n,e),this.loopIsComplete=!0)}))),1700)}))}};var D=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const G={baseUrl:"https://oversea.mimixiaoke.com",currentPlatform:"bestbuy",isDetail:function(){const e=window.location.href;return[/www\.bestbuy\.com\/site\/.*\/\d+\.p/].map((t=>t.test(e))).some((e=>e))},getMarketplace:function(e){try{const t=new URL(e).hostname;if(t)return t.split(".").slice(-1)[0]}catch(e){}return null},detail:function(){return D(this,null,(function*(){if(!this.isDetail())return;const e=window.location.href,t=A.getGoodsIdByUrl(e,"p");if(!t)return;const n=this.getMarketplace(e),o=this.baseUrl+"/api/coupon/query?ids="+t+"&qu=&p="+this.currentPlatform+"&no=9&v=1.0.1&marketplace="+n+"&mul=false";try{const e=yield u.crossRequest("GET",o,null);if("success"==e.code&&e.result){const t=JSON.parse(e.result);yield this.detailAnalyze(t,n)}}catch(e){}A.addGoodsHistory(t,".sku-title",".priceView-customer-price >span",".thumbnail-list img",this.currentPlatform,e)}))},detailAnalyze:function(e,t){return D(this,null,(function*(){let n=null,o=null;if(e.data&&e.data.css&&e.data.html&&e.data.handler){const{handler:t,css:o,html:i,templateId:a,distinguish:r}=e.data;GM_addStyle(o);const s=yield u.mustGetElement(t);s&&(n={element:s,html:i,templateId:a,distinguish:r})}if(e.id&&e.mscan&&e.mscan.html&&e.mscan.mount){const{iden:n,html:i,mount:a,distinguish:r}=e.mscan,s=e.id,l=[],d=u.mustGetElement(a),c=this.baseUrl+"/api/coupon/change?id="+s+"&marketplace="+t+"&platform="+this.currentPlatform,m=u.crossRequest("GET",c,null);l.push(d,m);const p=yield Promise.all(l);let h=null,f=null;for(let e=0;e<p.length;e++)p[e]&&(p[e].hasOwnProperty("code")?f=p[e]:h=p[e]);h&&f&&(o={element:h,html:i,iden:n,qrcodeData:f,distinguish:r})}u.loopTask((()=>{n&&u.distinguishRemoveAndTry(n.distinguish,(()=>{this.detailCouponAnalyze(n)})),o&&u.distinguishRemoveAndTry(o.distinguish,(()=>{this.detailMscanAnalyze(o)}))}))}))},detailCouponAnalyze:function(e){const{element:t,html:n,templateId:o}=e;t.insertAdjacentHTML("afterend",n);const i=document.querySelector("div[id='"+o+"']");if(i){const e=i.querySelector(".coupon-code"),t=u.decryptStr(e.getAttribute("data-encryptcode"));i.addEventListener("click",(()=>{GM_setClipboard(t,"txt",(()=>{p({message:d.operat.copied,background:"#D3031C"})}))}))}},detailMscanAnalyze:function(e){const{element:t,html:n,qrcodeData:o,iden:i}=e;if(t.insertAdjacentHTML("afterend",n),o&&"success"===o.code&&o.result){const e=JSON.parse(o.result).mscanImg;if(e){const t=document.getElementById("mscan"+i);if(t){var a=t.getContext("2d"),r=new Image;r.src=e,r.onload=function(){a.drawImage(r,0,0,r.width,r.height)}}}}},start:function(){return D(this,null,(function*(){this.detail()}))}};var B=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const j={loopIsComplete:!0,currentPlatform:"bestbuy",isRun:function(){return/https:\/\/www\.bestbuy\.com\/site\/searchpage\.jsp/.test(window.location.href)},isItemLink:function(e){return/\/site\/.*\/\d+\.p/.test(e)},pickUpItems:function(e,t){return B(this,null,(function*(){const n=[];try{e.forEach((e=>{if(e.element){const t=document.querySelectorAll(e.element+":not(["+A.searchAttribute+"='true'])"),o=e.findA;t.forEach((e=>{if(e&&A.isElementDisplayed(e)&&!e.getAttribute(A.searchAttribute)){const t=A.getGoodsLinkByElement(e,o),i=["div[id*='pricing-price-']"].join(","),a=A.getGoodsPrice(A.getGoodsPriceByElement(e,i));let r=null;this.isItemLink(t)&&(r=A.getGoodsIdByUrl(t.getAttribute("href"),"p")),r&&n.push({id:r,price:a,platform:this.currentPlatform,handler:e,findA:o,from:"search"})}}))}})),n.length>0&&(yield this.search(n,t))}catch(e){}}))},search:function(e,t){return B(this,null,(function*(){const n=A.calcRequestGroup(e),o=n.length;return new Promise(((e,i)=>{if(o<=0)return void e("complete");const a=[];for(let e=0;e<n.length;e++)a.push(this.createItemHtml(n[e],t));Promise.all(a).then((t=>{e("complete")}))}))}))},createItemHtml:function(e,t){return new Promise(((n,o)=>{try{if(Array.isArray(e)&&0===e.length)return void n("exception");let o="";const a=e[0].platform;for(var i=0;i<e.length;i++)e[i].handler.getAttribute(A.searchAttribute)||(o+=e[i].id+":"+e[i].price+",");o.endsWith(",")&&(o=o.slice(0,-1));const r=A.baseUrl+"/api/coupon/exist?platform="+a+"&ids="+o+"&marketplace="+t+"&no=9&v=1.0.1";A.requestAndSaveSate("GET",r,null).then((t=>{if(delete A.cacheRequestMap[t.requestKey],"success"!=t.code||!t.result)return void n("exception");const o=JSON.parse(t.result);for(let t in o){const{encryptLink:n,tip:i}=o[t],a=e.find((e=>e.id===t));if(!a)continue;let r=null,s=null;if(a.hasOwnProperty("handler")&&a.hasOwnProperty("findA")&&(r=a.handler,s=a.findA),!r||!s)continue;let l=null;if(n)try{l=atob(n).split("").reverse().join("")}catch(e){}A.getGoodsLinkByElement(r,s);r.getAttribute(A.searchAttribute)||(r.setAttribute(A.searchAttribute,"true"),i&&(r.style.position="relative",r.insertAdjacentHTML("beforeend",i)),l&&this.relativeJ(r,l))}n("complete")}))}catch(e){n("exception")}}))},relativeJ:function(e,t){const n="tip-vjd1jd89fcv-i",o=this;let i=null;i="A"==e.tagName?[e]:e.querySelectorAll("a"),i.forEach((e=>{const i=e.getAttribute("href");if(o.isItemLink(i)){if(e.getAttribute(n))return;e.setAttribute(n,"true"),e.addEventListener("click",(function(e){let n=!0;const i=e.target;if("A"==i.tagName.toUpperCase()){const e=i.getAttribute("href");o.isItemLink(e)||(n=!1)}n&&Array.from(i.classList).forEach((e=>{["btn","icon"].map((t=>-1!=e.indexOf(t))).some((e=>e))&&(n=!1)})),n&&(e.preventDefault(),e.stopPropagation(),u.openInTab(t))}))}}))},start:function(){return B(this,null,(function*(){if(!this.isRun())return;const e=G.getMarketplace(window.location.href),t=yield A.requestConf();if(!t)return;const n=A.pickupGoodsItem(this.currentPlatform,t);setInterval((()=>B(this,null,(function*(){this.loopIsComplete&&(this.loopIsComplete=!1,yield this.pickUpItems(n,e),this.loopIsComplete=!0)}))),1700)}))}};var O=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const R={baseUrl:"https://oversea.mimixiaoke.com",currentPlatform:"banggood",getGoodsId:function(e){-1!=e.indexOf("?")&&(e=e.split("?")[0]),-1!=e.indexOf("#")&&(e=e.split("#")[0]);let t=new RegExp("-p-(\\d+)\\.html");const n=e.match(t);return n?n[1]:null},isDetail:function(e){return/.*\.banggood\.com\/.*-p-\d+\.html/.test(e)},getLang:function(){return document.querySelector("html").getAttribute("lang")||""},getCurrency:function(){const e=document.querySelector(".shipto-state");return e?encodeURIComponent(e.textContent):""},getMarketplace:function(e){const t=[/https?:\/\/www\.banggood\.com\/([a-z]{2,3})\//,/https?:\/\/([a-z]{2,3})\.banggood\.com/].map((t=>{var n=e.match(t);return n?n[1]:null})).find((e=>null!=e));return t||"com"},detail:function(){return O(this,null,(function*(){const e=window.location.href;if(!this.isDetail(e))return;const t=this.getGoodsId(e);if(!t)return;const n=this.getMarketplace(e),o=this.getCurrency(),i=this.getLang(),a=this.baseUrl+"/api/coupon/query?ids="+t+"&qu=&p="+this.currentPlatform+"&no=9&v=1.0.1&marketplace="+n+"&mul=false&currency="+o+"&lang="+i;try{const e=yield u.crossRequest("GET",a,null);if("success"==e.code&&e.result){const t=JSON.parse(e.result);yield this.detailAnalyze(t,n)}}catch(e){}A.addGoodsHistory(t,".product-title-text",".newbie-price","a.p-img >img",this.currentPlatform,e)}))},detailAnalyze:function(e,t){return O(this,null,(function*(){let n=null,o=null;if(e.data&&e.data.css&&e.data.html&&e.data.handler){const{handler:t,css:o,html:a,templateId:r,distinguish:s,hint:l}=e.data;var i=null;e.data.hasOwnProperty("mid")&&(i=e.data.mid),GM_addStyle(o);const d=yield u.mustGetElement(t);d&&(n={element:d,html:a,templateId:r,distinguish:s,hint:l,mid:i})}if(e.id&&e.mscan&&e.mscan.html&&e.mscan.mount){const{iden:n,html:i,mount:a,distinguish:r}=e.mscan,s=e.id,l=[],d=u.mustGetElement(a),c=this.baseUrl+"/api/coupon/change?id="+s+"&marketplace="+t+"&platform="+this.currentPlatform,m=u.crossRequest("GET",c,null);l.push(d,m);const p=yield Promise.all(l);let h=null,f=null;for(let e=0;e<p.length;e++)p[e]&&(p[e].hasOwnProperty("code")?f=p[e]:h=p[e]);h&&f&&(o={element:h,html:i,iden:n,qrcodeData:f,distinguish:r})}u.loopTask((()=>{n&&u.distinguishRemoveAndTry(n.distinguish,(()=>{this.detailCouponAnalyze(n)})),o&&u.distinguishRemoveAndTry(o.distinguish,(()=>{this.detailMscanAnalyze(o)}))}))}))},detailCouponAnalyze:function(e){const{element:t,html:n,templateId:o,hint:i,mid:a}=e;t.insertAdjacentHTML("afterend",n);const r=document.querySelector("div[id='"+o+"']");if(r){const e=r.querySelector(".coupon-code"),t=u.decryptStr(e.getAttribute("data-encryptcode"));r.addEventListener("click",(()=>{GM_setClipboard(t,"txt",(()=>{if(p({message:i||d.operat.copied,background:"#D3031C"}),a&&a.hasOwnProperty("target")&&a.hasOwnProperty("link")&&a.hasOwnProperty("delay")){const{target:e,link:t,delay:n}=a,o=u.decryptStr(t);setTimeout((()=>{"_blank"===e?u.openInTab(o):"_self"===e?window.location.href=o:"_replace"===e&&window.location.replace(o)}),n)}}))}))}},detailMscanAnalyze:function(e){const{element:t,html:n,qrcodeData:o,iden:i}=e;if(t.insertAdjacentHTML("afterend",n),o&&"success"===o.code&&o.result){const e=JSON.parse(o.result).mscanImg;if(e){const t=document.getElementById("mscan"+i);if(t){var a=t.getContext("2d"),r=new Image;r.src=e,r.onload=function(){a.drawImage(r,0,0,r.width,r.height)}}}}},start:function(){return O(this,null,(function*(){this.detail()}))}};var U=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const N={loopIsComplete:!0,currentPlatform:"banggood",isRun:function(){return!R.isDetail(window.location.href)},pickUpItems:function(e,t,n,o){return U(this,null,(function*(){const i=[];try{e.forEach((e=>{if(e.element){const t=document.querySelectorAll(e.element+":not(["+A.searchAttribute+"='true'])"),n=e.findA;t.forEach((e=>{if(e&&A.isElementDisplayed(e)&&!e.getAttribute(A.searchAttribute)){const t=A.getGoodsLinkByElement(e,n),o=["span.price"].join(","),a=A.getGoodsPriceByElement(e,o);let r=null;if(R.isDetail(t)){const e=t.getAttribute("href");r=R.getGoodsId(e)}r&&i.push({id:r,price:a,platform:this.currentPlatform,handler:e,findA:n,from:"search"})}}))}})),i.length>0&&(yield this.search(i,t,n,o))}catch(e){}}))},search:function(e,t,n,o){return U(this,null,(function*(){const i=A.calcRequestGroup(e),a=i.length;return new Promise(((e,r)=>{if(a<=0)return void e("complete");const s=[];for(let e=0;e<i.length;e++)s.push(this.createItemHtml(i[e],t,n,o));Promise.all(s).then((t=>{e("complete")}))}))}))},createItemHtml:function(e,t,n,o){return new Promise(((i,a)=>{try{if(Array.isArray(e)&&0===e.length)return void i("exception");let a="";const s=e[0].platform;for(var r=0;r<e.length;r++)e[r].handler.getAttribute(A.searchAttribute)||(a+=e[r].id+":"+e[r].price+",");a.endsWith(",")&&(a=a.slice(0,-1));const l=A.baseUrl+"/api/coupon/exist?platform="+s+"&ids="+a+"&marketplace="+t+"&no=9&v=1.0.1&currency="+o+"&lang="+n;A.requestAndSaveSate("GET",l,null).then((t=>{if(delete A.cacheRequestMap[t.requestKey],"success"!=t.code||!t.result)return void i("exception");const n=JSON.parse(t.result);for(let t in n){const{encryptLink:o,tip:i}=n[t],a=e.find((e=>e.id===t));if(!a)continue;let r=null,s=null;if(a.hasOwnProperty("handler")&&a.hasOwnProperty("findA")&&(r=a.handler,s=a.findA),!r||!s)continue;let l=null;if(o)try{l=atob(o).split("").reverse().join("")}catch(e){}A.getGoodsLinkByElement(r,s);r.getAttribute(A.searchAttribute)||(r.setAttribute(A.searchAttribute,"true"),i&&(r.style.position="relative",r.insertAdjacentHTML("beforeend",i)),l&&this.relativeJ(r,l))}i("complete")}))}catch(e){i("exception")}}))},relativeJ:function(e,t){const n="tip-vjd1jd89fcv-i";let o=null;o="A"==e.tagName?[e]:e.querySelectorAll("a"),o.forEach((e=>{const o=e.getAttribute("href");if(R.isDetail(o)){if(e.getAttribute(n))return;e.setAttribute(n,"true"),e.addEventListener("click",(function(e){let n=!0;const o=e.target;if("A"==o.tagName.toUpperCase()){const e=o.getAttribute("href");R.isDetail(e)||(n=!1)}n&&(e.preventDefault(),e.stopPropagation(),u.openInTab(t))}))}}))},start:function(){return U(this,null,(function*(){if(!this.isRun())return;const e=R.getMarketplace(window.location.href),t=R.getLang(),n=yield A.requestConf();if(!n)return;const o=A.pickupGoodsItem(this.currentPlatform,n);setInterval((()=>U(this,null,(function*(){if(this.loopIsComplete){this.loopIsComplete=!1;const n=R.getCurrency();yield this.pickUpItems(o,e,t,n),this.loopIsComplete=!0}}))),1700)}))}};var F=(e,t,n)=>new Promise(((o,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},r=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,t)).next())}));const J={markName:"script-download-----iux998htt",isComplete:!0,download:function(e){return F(this,null,(function*(){try{e.classList.add("download-loadding");const t=yield this.getDownloadUrl(window.location.href.replace("music.youtube.com","www.youtube.com"));window.open(t,"_blank")}catch(e){}finally{e.classList.remove("download-loadding")}}))},getDownloadUrl:function(e,t=!1){return new Promise(((t,n)=>{t("https://cobalt.tools/?url="+e)}))},elementInContainer:function(e,t){return e.contains(t)},detectYoutubeService:function(){return"www.youtube.com"===window.location.hostname&&window.location.pathname.startsWith("/shorts")?"shorts":"www.youtube.com"===window.location.hostname&&window.location.pathname.startsWith("/watch")?"watch":"music.youtube.com"===window.location.hostname?"music":"www.youtube.com"===window.location.hostname?"youtube":null},hookNavigationEvents:function(){return F(this,null,(function*(){["yt-navigate","yt-navigate-finish","yt-navigate-finish","yt-page-data-updated"].forEach((e=>{e&&document.addEventListener(e,(e=>{this.appendDownloadButton(e)}))}))}))},appendDownloadButton:function(e){return F(this,null,(function*(){try{this.isComplete=!1;const e="#movie_player > div.ytp-chrome-bottom > div.ytp-chrome-controls > div.ytp-right-controls",t="#layout > ytmusic-player-bar > div.middle-controls.style-scope.ytmusic-player-bar > div.middle-controls-buttons.style-scope.ytmusic-player-bar",n=document.createElement("img");n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAepJREFUaEPtmEFygzAMRQ3dsm2mx0kOkfO0OQ+HCL1Np91m29ARtgM0gPUluZ3MmE0miSH//S8Jk8o9+FE9uH5XAP47wZJASUDpQCkhpYHq00sCSxY27ct+/Py6d67u6P3l+DG8Wh5mCXjR369eXDUBuJN78jCfbxYgaoBR+KboJa0nCwgVgBd/PSudVIGIAZp2RyUQSkaJ4JwYQgRgLD7SiyCkAD3P8z5MHW5/1Ad0UsEAgPs3R5v2+ZyYTMGPvrscvw48c8K8QxYD4umyEwCkX7AUoAT+BgBLAQVg1v6QqzCB4SbH1sVeKJj5YgDn+GVkDEBTp3r3fVV3caIE+On2InH/yALAasTkLOf1URYA9rZhFYInft4/qSlpXELx5+4dBMRT+bFvaJkA5pMEHwAZAMhb/h2VVo/zvGl3yPjNM0ZxAA/B20LMKj05CKar2SXkAbYamcQ+DU9b6YMeM1e34vkAtlJA7p7+OotlBYmn60AJJFJg//jaREJNEAEE9yyfxmLFsQ0Q98D0RGyuJ7tCJF6cQJRjBCEWrwbQgfiphT5C/s4SbuK1Yghp0NcbO834jKwXHnWYAcz7I/61OP6tSN9r3V4yLwtAsmUNFxQAQzNFlyoJiGwzPKkkYGim6FIlAZFthic9fAI/mIfoMZ8JBO0AAAAASUVORK5CYII=",n.style.width="44px",n.style.height="44px";const o=this.markName;if(document.querySelector("."+o))return;trustedTypes.createPolicy("conardEscapePolicy",{createHTML:e=>e.replace(/\</g,"&lt;")});const i=document.createElement("button");switch(i.id="ytdl-download-button",i.classList.add("ytp-button",o),i.title=l.download.tip,i.style.borderRadius="50%",i.appendChild(n),this.detectYoutubeService()){case"watch":const o=yield u.waitForElementByInterval(e);if(this.elementInContainer(o,o.querySelector("#ytdl-download-button")))break;const a=i.cloneNode(!0);a.classList.add("YT"),a.addEventListener("click",(()=>{this.download(a)})),o.insertBefore(a,o.firstChild);break;case"shorts":if(!document.querySelector("#navigation-button-download-----iux998htt")){const e=document.querySelector("#navigation-button-down").cloneNode(!1);e.id="navigation-button-download-----iux998htt",e.style.textAlign="center",e.appendChild(n),document.querySelector(".navigation-container").appendChild(e),e.addEventListener("click",(()=>{this.download(n)}))}break;case"music":const r=yield u.waitForElementByInterval(t);if(this.elementInContainer(r,r.querySelector("#ytdl-download-button")))break;const s=i.cloneNode(!0);s.classList.add("YTM"),s.addEventListener("click",(()=>{this.download(s)})),r.insertBefore(s,r.firstChild);break;default:return}}catch(e){}finally{this.isComplete=!0}}))},initStyle:function(){GM_addStyle("\n      @keyframes scriptspin {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}\n      .download-loadding{\n        animation: scriptspin 1s linear infinite;\n      }\n    ")},asyncAppendDownloadButton:function(){let e=3e4;const t=setInterval((()=>{document.querySelector("."+this.markName)||e<=0?clearInterval(t):this.isComplete&&this.appendDownloadButton(),e-=250}),250)},start:function(){this.initStyle();let e=null;setInterval((()=>{const t=window.location.href;if(e!==window.location.href){e=window.location.href;const n=/www\.youtube\.com\/watch\?v=/.test(t),o=/www\.youtube\.com\/shorts\//.test(t),i=/music\.youtube\.com\/watch\?v=/.test(t);(n||o||i)&&(this.hookNavigationEvents(),this.asyncAppendDownloadButton())}}),500)}},V={CobaltDownloader:{start:function(){const e=new URLSearchParams(window.location.search).get("url");e&&GM_setClipboard(e,"txt",(()=>{p({message:l.download.preparing,background:"#000",time:3e3}),setTimeout((()=>{const t=document.querySelector("#button-paste");if(t){t.click(),document.querySelector("#link-area").value=e;const n=document.querySelector("#download-button");n&&setTimeout((()=>{n.click()}),2e3)}}),2e3)}))}},X:w,Youtube:{YoutubeDownload:J},Tiktok:b,GoodsHistroy:_,Aliexpress:{Aliexpress:C,AliexpressSearch:S},Ebay:{Ebay:T,EbaySearch:z},Lazada:{Lazada:q,LazadaSearch:H},Bestbuy:{Bestbuy:G,BestbuySearch:j},Banggood:{Banggood:R,BanggoodSearch:N}};({x:function(){V.X.XDownload.init(),V.X.XSettingsDialog.init();new MutationObserver((e=>e.forEach((e=>{e.addedNodes.forEach((e=>{V.X.XDownload.detect(e),V.X.XDateFormat.repldatetime(),V.X.XOrigimg(),V.X.XHidepromo()}))})))).observe(document.body,{childList:!0,subtree:!0})},aliexpress:function(){V.Aliexpress.Aliexpress.start(),V.Aliexpress.AliexpressSearch.start(),V.GoodsHistroy.start("aliexpress")},ebay:function(){V.Ebay.Ebay.start(),V.Ebay.EbaySearch.start(),V.GoodsHistroy.start("ebay")},lazada:function(){V.Lazada.Lazada.start(),V.Lazada.LazadaSearch.start(),V.GoodsHistroy.start("lazada")},bestbuy:function(){V.Bestbuy.Bestbuy.start(),V.Bestbuy.BestbuySearch.start(),V.GoodsHistroy.start("bestbuy")},banggood:function(){V.Banggood.Banggood.start(),V.Banggood.BanggoodSearch.start(),V.GoodsHistroy.start("banggood")},youtube:function(){V.Youtube.YoutubeDownload.start()},tiktok:function(){V.Tiktok.start()},cobalt:function(){V.CobaltDownloader.start()},unknown:function(){},start:function(){m();this[u.platform()]()}}).start()}();