// ==UserScript==
// @name         SearchJumper
// @name:zh-CN   搜索酱
// @name:zh-TW   搜尋醬
// @name:ja      SearchJumper
// @name:ru      SearchJumper
// @namespace    hoothin
// @version      1.9.32
// @description  Instantly search selected text across multiple search engines. Highlight keywords and boost your research efficiency.
// @description:zh-CN  一键即时搜索选定文本或在多个搜索引擎之间快速切换，支持关键词高亮、拖拽搜索、以图搜图、页内查找与自定义引擎。
// @description:zh-TW  一鍵即時搜尋選定文字或在多個搜尋引擎之間快速切換，支援關鍵字高亮、拖曳搜尋、以圖搜圖、頁內尋找與自訂引擎。
// @description:ja  選択したテキストをワンクリックで即座に検索したり、キーワードの強調表示、ドラッグアンドドロップ検索、画像検索、ページ内検索、カスタムエンジンをサポートする複数の検索エンジン間で素早く切り替えたりできます。
// @description:ru  Легко проводите поиск по выбранному тексту/изображению/ссылке. Быстро переходите к любому поисковому движку. Выделяйте искомый текст.
// @author       hoothin
// @license      MPL-2.0
// @match        *://*/*
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEUAAAD+/v7////+/v7+/v7////+/v79/f3////////+/v7////////////+/v79/f3////+/v7/rP8zMzP/2f/R0dHAwMD/zf+vr69ZWVlKSkry8vL/vv/+5/7r6+uRkZGcnJx8fHxwcHD+7/7f39+kpKTMxXKjAAAAEXRSTlMA4wrL9ICvkxk56nVVI9WgZNxdEUkAAAE2SURBVDjLfdPZloMgDAZgFtHR2uU3LnWrXd//FUfIHKRT7XfhUYIkhINYqPyoM0SZTnIlPu2PEbwo2f8LqwTvIvMW/9H4oH+WeCqxQu79/xKr5N8aSmOD5gkGm3YuQYRNkU3CG+ynCYH6VsEycwW8wJXoDK8narlOIXI4Z6IKi47ucNI5A6vCOC41mBEaX8VCAuVQFEXzQODRzENDaVsRoSwYAgUrIecJI38MCAw8NkLaFCibphyDMusKox0DoJci+6615fcA2q5fikz8b/QC0HWuKTX8NnM/wbWSyL86qW01u1D3xEQ04dLSE0z6w3ILz9rWPq/hefslUN3uL+B6v/kKMiVmO2w6CSfGhqNg6oBVWvlbxTO+XAy1kiVWInTK8EZyfQFlZBDeKbEiNfFBSh2bNBj8BZ8mNsZysMSsAAAAAElFTkSuQmCC
// @grant        GM.getValue
// @grant        GM_getValue
// @grant        GM.setValue
// @grant        GM_setValue
// @grant        GM_addStyle
// @grant        GM.addStyle
// @grant        GM.deleteValue
// @grant        GM_deleteValue
// @grant        GM.registerMenuCommand
// @grant        GM_registerMenuCommand
// @grant        GM.xmlHttpRequest
// @grant        GM_xmlhttpRequest
// @grant        GM.notification
// @grant        GM_notification
// @grant        GM.setClipboard
// @grant        GM_setClipboard
// @grant        GM.openInTab
// @grant        GM_openInTab
// @grant        GM.info
// @grant        GM_info
// @grant        unsafeWindow
// @compatible   edge tested with tm
// @compatible   Chrome tested with tm
// @compatible   Firefox tested with tm
// @compatible   Opera untested
// @compatible   Safari untested
// @compatible   ios tested with userscript
// @compatible   android tested with kiwi
// @supportURL   https://github.com/hoothin/SearchJumper/issues
// @homepage     https://github.com/hoothin/SearchJumper
// @require      https://update.greasyfork.org/scripts/484118/searchJumperDefaultConfig.js
// @connect      global.bing.com
// @connect      suggestqueries.google.com
// @connect      api.bing.com
// @connect      suggestion.baidu.com
// @connect      webdav.hoothin.com
// @connect      search.hoothin.com
// @connect      *
// @run-at       document-start
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/SearchJumper.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/SearchJumper.meta.js
// ==/UserScript==
!async function(){"use strict";const e=!1,t="undefined"==typeof unsafeWindow?window:unsafeWindow;if(t.searchJumperInited)return;t.searchJumperInited=!0;const n=navigator&&navigator.clipboard,r=window.top!==window.self;if(r)try{if(0===window.self.innerWidth&&0===window.self.innerHeight){if(await new Promise((e=>{window.addEventListener("load",(t=>{setTimeout((()=>{e(window.self.innerWidth<300||window.self.innerHeight<300)}),500)}))})))return}else if(window.self.innerWidth<300||window.self.innerHeight<300)return}catch(e){return}const i=/^https:\/\/github\.com\/hoothin\/SearchJumper(\/(issue|discussions)|\/?$|#|\?)|^https:\/\/greasyfork\.org\/.*\/scripts\/445274[\-\/].*\/discussions/i,s="Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1",a="https://search.hoothin.com/",o=a+"firstRun";let l=a+"config/",c=!1,p={};function h(){let h="Netscape"===navigator.appName?navigator.language:navigator.userLanguage,d={};function u(e,t){return d[e]?t?d[e].replace(/#t#/g,t).replace(/#t1#/g,t[0]).replace(/#t2#/g,t[1]):d[e]:e}const m="ontouchstart"in document.documentElement;var f,g,y,v,w,b,x,C,j,k=(e,t)=>{console.log(`%c【SearchJumper v.${C.script.version}】 ${t||"debug"}`,"color: orange;font-size: large;font-weight: bold;",e)},I=!1,T=!1;function S(e=""){return M?M.createHTML(e):e}if("undefined"!=typeof GM_xmlhttpRequest)g=GM_xmlhttpRequest,j=!0;else if("undefined"!=typeof GM&&void 0!==GM.xmlHttpRequest)g=GM.xmlHttpRequest,j=!0;else{let e;g=t=>{fetch(t.url,{method:t.method||"GET",body:t.data,headers:t.headers}).then((n=>(e=n,"blob"===t.responseType?n.blob():n.text()))).then((n=>{let r=document.implementation.createHTMLDocument("");r.documentElement.innerHTML=S(n),t.onload&&t.onload({status:e.status,response:n,responseXML:r})})).catch((e=>t.onerror&&t.onerror(e)))}}j=j?async(e,t)=>e?(f=e,new Promise(((n,r)=>{let i=t&&/^post$/i.test(t.method),s={method:t&&t.method||"GET",url:e,headers:t&&t.headers||{referer:e,origin:e,"Content-Type":i?"application/x-www-form-urlencoded":"","X-Requested-With":i?"XMLHttpRequest":""},onload:function(t){if(f!=e)return;let r=t.response;(t.status>=400||!r)&&(r="");n({text:()=>new Promise((e=>{e(r)})),json:()=>new Promise((e=>{try{e(JSON.parse(r))}catch(t){e(null)}})),finalUrl:t.finalUrl||e})},onerror:function(e){k(e),r(e)},ontimeout:function(e){k(e),r(e)}};t&&t.body&&(s.data=t.body),t&&"stream"===t.responseType&&(s.responseType="stream",delete s.onload,s.onloadstart=r=>{if(!r||!r.response||!r.response.getReader)return;let i,s=[];const a=r.response.getReader();let o=()=>{let e="";try{return i&&(e=i.trim(),/^data:/.test(e)?e="["+e.replace(/^data:\s+\[DONE\]\s*/m,"").trim().replace(/\n+/g,"\n").split("\n").map((e=>e.replace(/^data:/,""))).join(",")+"]":/^({.*} *\n)* *{.*}$/.test(e)?e=e.split("\n").pop():/^\[[\s\S]+[^\]]$/.test(e)&&(e+="]")),JSON.parse(e)}catch(e){return null}};a.read().then((function l({done:c,value:p}){if(f==e){if(!c){s="standalone"===t.streamMode?Array.from(p):s.concat(Array.from(p));try{i=new TextDecoder("utf-8").decode(new Uint8Array(s)),t.onstream({text:i,json:o,finalUrl:r.finalUrl||e})}catch(e){console.log(e)}return a.read().then(l)}n({text:i,json:o,finalUrl:r.finalUrl||e})}}))}),g(s)}))):null:fetch,y=r?(e,t)=>{}:"undefined"!=typeof GM_registerMenuCommand?GM_registerMenuCommand:"undefined"!=typeof GM&&void 0!==GM.registerMenuCommand?GM.registerMenuCommand:(e,t)=>{},b="undefined"!=typeof GM_openInTab?GM_openInTab:"undefined"!=typeof GM&&void 0!==GM.openInTab?GM.openInTab:(e,t)=>{window.open(e)},v="undefined"!=typeof GM_notification?e=>GM_notification({text:e,onclick:e=>b(l,{active:!0})}):"undefined"!=typeof GM&&void 0!==GM.notification?e=>GM.notification({text:e,onclick:e=>b(l,{active:!0})}):e=>{},w="undefined"!=typeof GM_setClipboard?GM_setClipboard:"undefined"!=typeof GM&&void 0!==GM.setClipboard?GM.setClipboard:(e,t)=>{try{n.writeText(e).then((()=>{console.log("Text copied to clipboard")})).catch((e=>{document.execCommand("copy"),console.error("Failed to copy text: ",e)}))}catch(e){document.execCommand("copy")}},x=e=>{if(e=e.replace(/\n\s*/g,""),"undefined"!=typeof GM_addStyle)return GM_addStyle(e);{let t=document.createElement("style");return t.innerHTML=S(e),document.head.appendChild(t),t}},C="undefined"!=typeof GM_info?GM_info:"undefined"!=typeof GM&&void 0!==GM.info?GM.info:{script:{name:"SearchJumper",version:0}},t.searchJumperAddons||(t.searchJumperAddons=[]);const E=document.referrer;let L=location.href.slice(0,500);var P,M,N={supportGM:"function"==typeof GM_getValue&&void 0!==GM_getValue("a","b"),supportGMPromise:"undefined"!=typeof GM&&"function"==typeof GM.getValue&&void 0!==GM.getValue("a","b"),supportCrossSave:function(){return this.supportGM||this.supportGMPromise},listItemCache:[],mxAppStorage:function(){try{return window.external.mxGetRuntime().storage}catch(e){}}(),operaUJSStorage:function(){try{return window.opera.scriptStorage}catch(e){}}(),setItem:function(e,t){this.supportGMPromise?(GM.setValue(e,t),""===t&&"undefined"!=typeof GM&&void 0!==GM.deleteValue&&GM.deleteValue(e)):this.supportGM?(GM_setValue(e,t),""===t&&"undefined"!=typeof GM_deleteValue&&GM_deleteValue(e)):this.operaUJSStorage?this.operaUJSStorage.setItem(e,t):this.mxAppStorage?this.mxAppStorage.setConfig(e,t):window.localStorage&&window.localStorage.setItem(e,t)},getItem:async function(e,t){var n;return this.supportGMPromise?n=await GM.getValue(e):this.supportGM?n=GM_getValue(e):this.operaUJSStorage?n=this.operaUJSStorage.getItem(e):this.mxAppStorage?n=this.mxAppStorage.getConfig(e):window.localStorage&&(n=window.localStorage.getItem(e)),t&&t(n),n},getListItem:async function(e,t){var n=this.listItemCache[e];if(void 0===n&&(n=await this.getItem(e),this.listItemCache[e]=n||null),!n)return null;for(var r=0;r<n.length;r++){let e=n[r];if(e.k==t)return e.v}return null},setListItem:async function(e,t,n){var r=this.listItemCache[e];void 0===r&&(r=await this.getItem(e)),r||(r=[]),r=r.filter((e=>e&&e.k!=t)),n&&(r.unshift({k:t,v:n}),r.length>50&&r.pop()),this.setItem(e,r),this.listItemCache[e]=r}};class B{constructor(e,t,n){this.webDAVUrl=e,this.username=t,this.password=n}init(){this.inited||(this.inited=!0,this.auth=btoa(`${this.username}:${this.password}`))}request(e,t,n,r,i,s){{this.init();let a=this.webDAVUrl+n,o={referer:a,origin:a,"Content-Type":"text/xml; charset=UTF-8",Authorization:`Basic ${this.auth}`};for(let e in s)o[e]=s[e];g({method:e,url:a,data:t,headers:o,onload:function(e){let t=e.response;if((e.status>=400||!t)&&(t=""),"xml"==r){var n=e.responseXML;n&&(t=n.firstChild.nextSibling?n.firstChild.nextSibling:n.firstChild)}i&&i(t)},onerror:function(e){k(e),i&&i(e)},ontimeout:function(e){k(e),i&&i(e)}})}}GET(e,t){return this.request("GET",null,e,"text",t,{})}PROPFIND(e,t){return this.request("PROPFIND",null,e,"xml",t,{Depth:"1"})}MKCOL(e,t){return this.request("MKCOL",null,e,"text",t,{})}DELETE(e,t){return this.request("DELETE",null,e,"text",t,{})}PUT(e,t,n){return this.request("PUT",t,e,"text",n,{})}async read(e){let t=this;return new Promise((n=>{t.GET(e,n)}))}async write(e,t){let n=this;return new Promise((r=>{n.PUT(e,t,r)}))}async rm(e){let t=this;return new Promise((n=>{t.DELETE(e,n)}))}}async function A(e,t){if(ot)return;let n=await N.getItem("searchData");if(n&&(p=n),!P)return e&&e();if(!t){let e=await P.read("lastModified");if(e&&(e=parseFloat(e)),e&&(!p.lastModified||e>p.lastModified)){p.lastModified=e,ve=p.lastModified;let t=await P.read("sitesConfig.json");if(t)try{t=JSON.parse(t),p.sitesConfig=t}catch(e){k(e)}let n=await P.read("inPageRule.json");if(n)try{n=JSON.parse(n),p.prefConfig.inPageRule=n}catch(e){k(e)}}}e&&e(),await P.write("lastModified",""+p.lastModified),await P.write("sitesConfig.json",JSON.stringify(p.sitesConfig)),await P.write("inPageRule.json",JSON.stringify(p.prefConfig.inPageRule))}t.trustedTypes&&t.trustedTypes.createPolicy&&(M=t.trustedTypes.createPolicy("searchjumper_default",{createHTML:(e,t)=>e}));const $=Object.getPrototypeOf((async function(){})).constructor;function W(e){return e.body||e.querySelector("body")}function J(e){return 0===e.type.indexOf("touch")?e.changedTouches?e.changedTouches[0].clientX:0:e.clientX}function D(e){return 0===e.type.indexOf("touch")?e.changedTouches?e.changedTouches[0].clientY:0:e.clientY}function z(e){return!!e&&/^\(*(descendant::|\.\/|\/\/|id\()/.test(e)}function O(e,t,n){t||(t=document);try{if(!z(e))return t.querySelectorAll(e)}catch(e){k(e,"Error selector")}return function(e,t,n){n=n||document,t=t||n;var r=[];try{for(var i=n.evaluate(e,t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=0;s<i.snapshotLength;s++){var a=i.snapshotItem(s);1===a.nodeType&&r.push(a)}}catch(t){k(`Invalid xpath: ${e}`)}return r}(e,n,t)}function H(e,t){t||(t=document);try{if(!z(e)){let n=e.split(" =>> ");if(2===n.length){let e=t.querySelector(n[0]);return e&&e.shadowRoot&&e.shadowRoot.querySelector(n[1])}return t.querySelector(e)}}catch(e){k(e)}return function(e,t,n){n=n||document,t=t||n;try{let r=(e,t,n)=>{let r=t.evaluate(e,n,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null);return r.singleNodeValue&&1===r.singleNodeValue.nodeType&&r.singleNodeValue},i=e.split(" =>> ");if(2!==i.length)return r(e,n,t);{let e=r(i[0],n,t);if(e&&e.shadowRoot)return r(i[1],e.shadowRoot,e.shadowRoot)}}catch(t){return k(`Invalid xpath: ${e}`),!1}}(e,t,t)}function R(e){const t=e.activeElement;return t?t.shadowRoot?R(t.shadowRoot):t:null}function F(e){if(e&&(/INPUT|TEXTAREA/i.test(e.nodeName)&&"true"!=e.getAttribute("aria-readonly")||"true"==e.contentEditable))return!0;for(;e&&e.nodeName;){if("true"==e.contentEditable)return!0;if("BODY"==e.nodeName.toUpperCase())break;e=e.parentNode}return!1}function K(e){return F(R(e))}"function"!=typeof String.prototype.replaceAll&&(String.prototype.replaceAll=function(e,t){return this.split(e).join(t)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e,t){return this.slice(t||0,e.length)===e});var U,q,G,Y,V,_,Z,X,Q,ee,te,ne,re,ie,se,ae,oe,le,ce,pe,he,de=[],ue=!1,me=!1,fe=[],ge=[],ye=!1,ve=0;const we=`<svg class="search-jumper-logoBtnSvg" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><title>${C.script.name}</title><path d="M.736 510.464c0-281.942 228.335-510.5 510-510.5 135.26 0 264.981 53.784 360.625 149.522 95.643 95.737 149.375 225.585 149.375 360.978 0 281.94-228.335 510.5-510 510.5-281.665 0-510-228.56-510-510.5zm510-510.5v1021m-510-510.5h1020" fill="#fefefe"/><path d="M237.44 346.624a48.64 48.64 0 1 0 97.28 0 48.64 48.64 0 1 0-97.28 0zM699.904 346.624a48.64 48.64 0 1 0 97.28 0 48.64 48.64 0 1 0-97.28 0zM423.296 759.296c-64 0-115.712-52.224-115.712-115.712 0-26.624 9.216-52.224 25.6-72.704 9.216-11.776 26.112-13.312 37.888-4.096s13.312 26.112 4.096 37.888c-9.216 11.264-13.824 24.576-13.824 38.912 0 34.304 27.648 61.952 61.952 61.952s61.952-27.648 61.952-61.952c0-4.096-.512-8.192-1.024-11.776-2.56-14.848 6.656-28.672 21.504-31.744 14.848-2.56 28.672 6.656 31.744 21.504 1.536 7.168 2.048 14.336 2.048 22.016-.512 63.488-52.224 115.712-116.224 115.712z" fill="#333"/><path d="M602.08 760.296c-64 0-115.712-52.224-115.712-115.712 0-14.848 12.288-27.136 27.136-27.136s27.136 12.288 27.136 27.136c0 34.304 27.648 61.952 61.952 61.952s61.952-27.648 61.952-61.952c0-15.36-5.632-30.208-15.872-41.472-9.728-11.264-9.216-28.16 2.048-37.888 11.264-9.728 28.16-9.216 37.888 2.048 19.456 21.504 29.696 48.64 29.696 77.824 0 62.976-52.224 115.2-116.224 115.2z" fill="#333"/><ellipse ry="58" rx="125" cy="506.284" cx="201.183" fill="#faf"/><ellipse ry="58" rx="125" cy="506.284" cx="823.183" fill="#faf"/></svg>`,be="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ic2VhcmNoLWp1bXBlci1sb2dvQnRuU3ZnIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0uNzM2IDUxMC40NjRjMC0yODEuOTQyIDIyOC4zMzUtNTEwLjUgNTEwLTUxMC41IDEzNS4yNiAwIDI2NC45ODEgNTMuNzg0IDM2MC42MjUgMTQ5LjUyMiA5NS42NDMgOTUuNzM3IDE0OS4zNzUgMjI1LjU4NSAxNDkuMzc1IDM2MC45NzggMCAyODEuOTQtMjI4LjMzNSA1MTAuNS01MTAgNTEwLjUtMjgxLjY2NSAwLTUxMC0yMjguNTYtNTEwLTUxMC41em01MTAtNTEwLjV2MTAyMW0tNTEwLTUxMC41aDEwMjAiIGZpbGw9IiNmZWZlZmUiLz48cGF0aCBkPSJNMjM3LjQ0IDM0Ni42MjRhNDguNjQgNDguNjQgMCAxIDAgOTcuMjggMCA0OC42NCA0OC42NCAwIDEgMC05Ny4yOCAwek02OTkuOTA0IDM0Ni42MjRhNDguNjQgNDguNjQgMCAxIDAgOTcuMjggMCA0OC42NCA0OC42NCAwIDEgMC05Ny4yOCAwek00MjMuMjk2IDc1OS4yOTZjLTY0IDAtMTE1LjcxMi01Mi4yMjQtMTE1LjcxMi0xMTUuNzEyIDAtMjYuNjI0IDkuMjE2LTUyLjIyNCAyNS42LTcyLjcwNCA5LjIxNi0xMS43NzYgMjYuMTEyLTEzLjMxMiAzNy44ODgtNC4wOTZzMTMuMzEyIDI2LjExMiA0LjA5NiAzNy44ODhjLTkuMjE2IDExLjI2NC0xMy44MjQgMjQuNTc2LTEzLjgyNCAzOC45MTIgMCAzNC4zMDQgMjcuNjQ4IDYxLjk1MiA2MS45NTIgNjEuOTUyczYxLjk1Mi0yNy42NDggNjEuOTUyLTYxLjk1MmMwLTQuMDk2LS41MTItOC4xOTItMS4wMjQtMTEuNzc2LTIuNTYtMTQuODQ4IDYuNjU2LTI4LjY3MiAyMS41MDQtMzEuNzQ0IDE0Ljg0OC0yLjU2IDI4LjY3MiA2LjY1NiAzMS43NDQgMjEuNTA0IDEuNTM2IDcuMTY4IDIuMDQ4IDE0LjMzNiAyLjA0OCAyMi4wMTYtLjUxMiA2My40ODgtNTIuMjI0IDExNS43MTItMTE2LjIyNCAxMTUuNzEyeiIgZmlsbD0iIzMzMyIvPjxwYXRoIGQ9Ik02MDIuMDggNzYwLjI5NmMtNjQgMC0xMTUuNzEyLTUyLjIyNC0xMTUuNzEyLTExNS43MTIgMC0xNC44NDggMTIuMjg4LTI3LjEzNiAyNy4xMzYtMjcuMTM2czI3LjEzNiAxMi4yODggMjcuMTM2IDI3LjEzNmMwIDM0LjMwNCAyNy42NDggNjEuOTUyIDYxLjk1MiA2MS45NTJzNjEuOTUyLTI3LjY0OCA2MS45NTItNjEuOTUyYzAtMTUuMzYtNS42MzItMzAuMjA4LTE1Ljg3Mi00MS40NzItOS43MjgtMTEuMjY0LTkuMjE2LTI4LjE2IDIuMDQ4LTM3Ljg4OCAxMS4yNjQtOS43MjggMjguMTYtOS4yMTYgMzcuODg4IDIuMDQ4IDE5LjQ1NiAyMS41MDQgMjkuNjk2IDQ4LjY0IDI5LjY5NiA3Ny44MjQgMCA2Mi45NzYtNTIuMjI0IDExNS4yLTExNi4yMjQgMTE1LjJ6IiBmaWxsPSIjMzMzIi8+PGVsbGlwc2Ugcnk9IjU4IiByeD0iMTI1IiBjeT0iNTA2LjI4NCIgY3g9IjIwMS4xODMiIGZpbGw9IiNmYWYiLz48ZWxsaXBzZSByeT0iNTgiIHJ4PSIxMjUiIGN5PSI1MDYuMjg0IiBjeD0iODIzLjE4MyIgZmlsbD0iI2ZhZiIvPjwvc3ZnPg==",xe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDI5LjAxMzMzMyA2NDBBMzIgMzIgMCAwIDEgMzg0IDU5NC45ODY2NjdsMzcuNzYtMzcuNzYtMjIuODI2NjY3LTIyLjYxMzMzNC0xMzUuNjggMTM1LjY4IDkwLjQ1MzMzNCA5MC40NTMzMzQgMTM1LjY4LTEzNS42OC0yMi42MTMzMzQtMjIuNjEzMzM0ek01MzQuNjEzMzMzIDM5OC45MzMzMzNsMjIuNjEzMzM0IDIyLjYxMzMzNEw1OTQuOTg2NjY3IDM4NEEzMiAzMiAwIDAgMSA2NDAgNDI5LjAxMzMzM2wtMzcuNzYgMzcuNzYgMjIuNjEzMzMzIDIyLjYxMzMzNCAxMzUuNjgtMTM1LjY4LTkwLjQ1MzMzMy05MC40NTMzMzR6IiBmaWxsPSIjNUU1QzVDIj48L3BhdGg+PHBhdGggZD0iTTUxMiAyMS4zMzMzMzNhNDkwLjY2NjY2NyA0OTAuNjY2NjY3IDAgMSAwIDQ5MC42NjY2NjcgNDkwLjY2NjY2N0E0OTAuNjY2NjY3IDQ5MC42NjY2NjcgMCAwIDAgNTEyIDIxLjMzMzMzM3ogbTMxNi44IDM1NC45ODY2NjdsLTE4MS4xMiAxODEuMTJhMzIgMzIgMCAwIDEtNDUuMjI2NjY3IDBMNTU3LjIyNjY2NyA1MTIgNTEyIDU1Ny4yMjY2NjdsNDUuMjI2NjY3IDQ1LjIyNjY2NmEzMiAzMiAwIDAgMSAwIDQ1LjIyNjY2N2wtMTgxLjEyIDE4MS4xMmEzMiAzMiAwIDAgMS00NS4yMjY2NjcgMGwtMTM1LjY4LTEzNS42OGEzMiAzMiAwIDAgMSAwLTQ1LjIyNjY2N2wxODEuMTItMTgxLjEyYTMyIDMyIDAgMCAxIDQ1LjIyNjY2NyAwTDQ2Ni43NzMzMzMgNTEyIDUxMiA0NjYuNzczMzMzbC00NS4yMjY2NjctNDUuMjI2NjY2YTMyIDMyIDAgMCAxIDAtNDUuMjI2NjY3bDE4MS4xMi0xODEuMTJhMzIgMzIgMCAwIDEgNDUuMjI2NjY3IDBsMTM1LjY4IDEzNS42OGEzMiAzMiAwIDAgMSAwIDQ1LjIyNjY2N3oiIGZpbGw9IiM1RTVDNUMiPjwvcGF0aD4KPC9zdmc+",Ce='<path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m165.4 618.2l-66-0.3L512 563.4l-99.3 118.4-66.1 0.3c-4.4 0-8-3.5-8-8 0-1.9 0.7-3.7 1.9-5.2l130.1-155L340.5 359c-1.2-1.5-1.9-3.3-1.9-5.2 0-4.4 3.6-8 8-8l66.1 0.3L512 464.6l99.3-118.4 66-0.3c4.4 0 8 3.5 8 8 0 1.9-0.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"></path>',je="%s[lurest]?\\b",ke=new RegExp(je);var Ie,Te,Se,Ee,Le=!1;function Pe(e,t,n){if(!e&&!t&&!n){let r=new Date;r.getFullYear(),r.getMonth(),r.getDate();e=r.getFullYear(),t=r.getMonth()+1,n=r.getDate()}let r=[51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],i="正二三四五六七八九十冬臘",s="一二三四五六七八九十初廿",a="甲乙丙丁戊己庚辛壬癸",o="子丑寅卯辰巳午未申酉戌亥",l="鼠牛虎兔龍蛇馬羊猴雞狗豬";function c(e){return!!(15&e)&&15&e}function p(e){return c(e)?983040&e?30:29:0}function h(e){let t=0;for(let n=32768;n>8;n>>=1){t+=e&n?30:29}return c(e)&&(t+=p(e)),t}function d(e){let t=[];for(let n=32768;n>8;n>>=1)t.push(e&n?30:29);return c(e)&&t.splice(c(e),0,p(e)),t}return function(e,t,n){t-=1;let p,u,m,f,g=(Date.UTC(e,t,n)-Date.UTC(2e3,1,5))/864e5+1;for(let e=0;e<r.length;e++)if(g-=h(r[e]),g<=0){p=2e3+e,f=r[e],g+=h(f);break}if(!f)return null;for(let e=0;e<d(f).length;e++)if(g-=d(f)[e],g<=0){u=c(f)&&c(f)<=e?c(f)<e?e:c(f)===e?"闰"+e:e+1:e+1,g+=d(f)[e];break}return m=g,u=c(f)&&"string"==typeof u&&u.indexOf("闰")>-1?`闰${i[/\d/.exec(u)-1]}`:i[u-1],p=function(e){let t=(e-3)%10;0===t&&(t=10);return a[t-1]}(p)+function(e){let t=(e-3)%12;0===t&&(t=12);return t--,o[t]+` (${l[t]}) `}(p),m<11?m=`${s[10]}${s[m-1]}`:m>10&&m<20?m=`${s[9]}${s[m-11]}`:20===m?m=`${s[1]}${s[9]}`:m>20&&m<30?m=`${s[11]}${s[m-21]}`:30===m&&(m=`${s[2]}${s[9]}`),{lunarYear:p,lunarMonth:u,lunarDay:m}}(e,t,n)}class Me{constructor(){let e=this;this.scale=p.prefConfig.customSize/100,this.tilesZoom=p.prefConfig.tilesZoom/100,this.tipsZoom=p.prefConfig.tipsZoom/100,Se=`\n                 #search-jumper {\n                     font-size: 16px;\n                 }\n                 #search-jumper-root {\n                     font-size: initial;\n                 }\n                 #search-jumper.search-jumper-showall {\n                     overflow-y: hidden;\n                     pointer-events: all;\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                     flex-direction: unset;\n                     max-width: unset;\n                     max-height: unset;\n                     text-align: center;\n                     top: 0;\n                     bottom: unset;\n                     height: 100%;\n                 }\n                 #search-jumper.search-jumper-showall>.search-jumper-searchBar {\n                     display: none;\n                 }\n                 #search-jumper>.search-jumper-searchBar.grabbing>.search-jumper-type {\n                     display: none!important;\n                 }\n                 #search-jumper.search-jumper-showall #filterSites {\n                     background-color: #f5f5f5e0;\n                     border: none;\n                     height: 40px;\n                     margin-bottom: 0;\n                     padding: 5px;\n                     margin: 0 10px;\n                     box-shadow: #ddd 0px 0px 3px;\n                     outline: none;\n                     box-sizing: border-box;\n                     cursor: default;\n                     user-select: none;\n                     -webkit-user-select: none;\n                     -moz-user-select: none;\n                     -khtml-user-select: none;\n                     -ms-user-select: none;\n                     position: fixed;\n                     width: 80%;\n                     left: calc(10% - 10px);\n                     top: 1%;\n                     border-radius: 20px;\n                     pointer-events: all;\n                 }\n                 #search-jumper.search-jumper-showall #filterSites>input,\n                 #search-jumper.search-jumper-showall #filterSites>textarea {\n                     background-color: white;\n                     color: black;\n                     border: none;\n                     outline: none;\n                     box-sizing: border-box;\n                     font-size: 20px;\n                     cursor: text;\n                 }\n                 #search-jumper.search-jumper-showall #filterSites>span {\n                     display: none;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist .sitelist {\n                     visibility: visible!important;\n                     opacity: 1!important;\n                     pointer-events: all;\n                     text-align: left;\n                     position: static;\n                     display: block!important;\n                     height: fit-content;\n                     max-height: calc(100vh - 130px);\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist .sitelist>.sitelistCon {\n                     opacity: 1;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist .sitelist>.sitelistCon>p {\n                     pointer-events: all;\n                     cursor: pointer;\n                     margin: 0 auto;\n                 }\n                 #search-jumper.search-jumper-showall.searching #search-jumper-alllist .sitelist>.sitelistCon a {\n                     display: flex!important;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist .sitelist:hover {\n                     z-index: 1;\n                 }\n                 #search-jumper.search-jumper-showall.search-jumper-searchBarCon {\n                     -ms-overflow-style: unset;\n                     scrollbar-width: unset;\n                     overflow: hidden;\n                 }\n                 #search-jumper-alllist {\n                     display: none;\n                     top: 101px;\n                     position: absolute;\n                     width: 100%;\n                     overflow-x: auto;\n                     overflow-y: hidden;\n                     height: calc(100% - 101px);\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                 }\n                 #search-jumper-alllist>.search-jumper-btn {\n                     position: fixed;\n                     top: 1%;\n                     right: 10%;\n                     filter: drop-shadow(1px 1px 3px #00000060);\n                     cursor: pointer;\n                     pointer-events: all;\n                     z-index: 1;\n                     width: 32px;\n                     height: 32px;\n                 }\n                 #search-jumper-alllist>.search-jumper-btn>svg {\n                     cursor: pointer;\n                     width: 32px;\n                     height: 32px;\n                 }\n                 .search-jumper-showallBg {\n                     display: none;\n                     position: fixed;\n                     left: 0;\n                     top: 0;\n                     width: 100%;\n                     height: 100%;\n                     z-index: -1;\n                     transform: translateZ(0);\n                     ${p.prefConfig.noAni?"background-color: rgba(0, 0, 0, 0.1);":"background-color: rgba(0, 0, 0, 0.1);transition:background-color .6s ease;"}\n                 }\n                 #search-jumper.search-jumper-showall>#search-jumper-alllist:hover~.search-jumper-showallBg {\n                     background-color: rgba(0, 0, 0, 0.8);\n                 }\n                 #search-jumper.search-jumper-showall>.search-jumper-showallBg {\n                     display: block;\n                 }\n                 #search-jumper>.groupTab {\n                     position: fixed;\n                     background: #ffffffee !important;\n                     left: 0;\n                     top: 0;\n                     overflow: hidden;\n                     height: 100%;\n                     overflow: auto;\n                     scrollbar-width: none;\n                     padding: 20px 0;\n                     box-sizing: border-box;\n                     display: none;\n                     z-index: 1;\n                 }\n                 #search-jumper.search-jumper-showall>#search-jumper-alllist.new-mode+.groupTab {\n                     display: block;\n                 }\n                 #search-jumper.search-jumper-showall>.groupTab::-webkit-scrollbar {\n                     width: 0 !important;\n                     height: 0 !important;\n                 }\n                 #search-jumper.search-jumper-showall>.groupTab>span {\n                     display: block;\n                     width: ${42*this.scale}px;\n                     transition: all 0.25s ease;\n                     cursor: pointer;\n                 }\n                 #search-jumper.search-jumper-showall>.groupTab>span>span.search-jumper-word {\n                     opacity: 0.8;\n                 }\n                 #search-jumper.search-jumper-showall>.groupTab:hover>span {\n                     width: ${42*this.scale+150}px;\n                 }\n                 #search-jumper.search-jumper-showall>.groupTab>span:hover{\n                     background: #f5f7fa !important;\n                 }\n                 #search-jumper.search-jumper-showall>.groupTab:hover>span::after {\n                     content: attr(data-type);\n                     color: #6b6e74;\n                     position: absolute;\n                     margin-top: -${21*this.scale+10}px;\n                     left: ${42*this.scale+5}px;\n                     white-space: nowrap;\n                     font-weight: bold;\n                 }\n                 .search-jumper-historylistcon {\n                     display: flex;\n                     position: fixed;\n                     width: 100%;\n                     max-width: 100%;\n                     overflow: auto;\n                     justify-content: center;\n                     left: 0;\n                     top: 60px;\n                     background: #ffffffee;\n                     border-bottom: 1px solid #ddd;\n                     pointer-events: all;\n                     min-height: 40px;\n                     -ms-overflow-style: unset;\n                     scrollbar-width: unset;\n                 }\n                 .search-jumper-historylistcon::-webkit-scrollbar {\n                     width: 0 !important;\n                     height: 0 !important;\n                 }\n                 .search-jumper-historylist {\n                     display: flex;\n                     max-width: 100%;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist {\n                     display: block;\n                 }\n                 #search-jumper-alllist>.sitelistBox {\n                     display: flex;\n                     min-width: 100%;\n                     justify-content: center;\n                     width: fit-content;\n                     min-height: 100%;\n                     position: initial;\n                     transition: all 0.3s ease;\n                 }\n                 #search-jumper-alllist>.timeInAll,\n                 #search-jumper-alllist>.dayInAll {\n                     position: fixed;\n                     bottom: 0;\n                     line-height: 1.5;\n                     color: white;\n                     opacity: 0.45;\n                     font-weight: bold;\n                     font-family: Arial,sans-serif,微软雅黑;\n                     overflow-wrap: normal;\n                     white-space: nowrap;\n                     margin: 20px;\n                     pointer-events: none;\n                     text-shadow: 0 0 5px black;\n                     background-image: initial;\n                 }\n                 #search-jumper-alllist>.dayInAll {\n                     left: 50px;\n                     font-size: ${0==h.indexOf("zh")?"1.5":"2"}vw;\n                 }\n                 #search-jumper-alllist>.timeInAll {\n                     right: 50px;\n                     font-size: 2vw;\n                 }\n                 #search-jumper-alllist>.modeSwitch {\n                     position: fixed;\n                     top: 5px;\n                     right: 5px;\n                     width: 45px;\n                     height: 45px;\n                     border-radius: 50%;\n                     box-shadow: 0px 0px 5px 0px #7a7a7a;\n                     cursor: pointer;\n                     transition: transform 0.25s ease;\n                 }\n                 #search-jumper-alllist>.modeSwitch>* {\n                     pointer-events: none;\n                 }\n                 #search-jumper-alllist>.modeSwitch:hover {\n                     transform: scale(1.1);\n                 }\n                 #search-jumper-alllist.new-mode {\n                     overflow-x: hidden;\n                     overflow-y: auto;\n                     scrollbar-width: none;\n                 }\n                 #search-jumper-alllist.new-mode>.sitelistBox {\n                     flex-wrap: wrap;\n                     flex-direction: column;\n                     align-items: center;\n                     justify-content: flex-start;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                     width: 78%;\n                     max-height: unset;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist>.sitelistCon {\n                     display: flex;\n                     flex-wrap: wrap;\n                     padding: 0;\n                 }\n                 #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist>.sitelistCon>p {\n                     text-align: left;\n                     font-size: large;\n                     padding: 10px 30px;\n                     display: table-caption;\n                     width: 100%;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist a {\n                     width: 240px;\n                     height: 100px;\n                     display: block!important;\n                     padding: 10px 8%;\n                     box-sizing: border-box;\n                 }\n                 #search-jumper.search-jumper-showall.searching #search-jumper-alllist.new-mode .sitelist>.sitelistCon a {\n                     display: block!important;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist>.sitelistCon>div {\n                     padding: 0 10px;\n                     border-radius: 5px;\n                     transition: transform 0.25s ease, box-shadow 0.25s ease;\n                     box-shadow: 0 0 #0000, 0 0 #0000, 0 1px 3px #9e9e9e1a, 0 1px 2px -1px #9e9e9e1a;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist>.sitelistCon>div:hover {\n                     transform: translateY(-6px);\n                     -webkit-transform: translateY(-6px);\n                     -moz-transform: translateY(-6px);\n                     box-shadow: 0 0 #0000, 0 0 #0000, 0 1px 3px #0000001a, 0 1px 2px -1px #0000001a;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist>.sitelistCon>div:before {\n                     content: attr(title);\n                     margin-left: 41px;\n                     color: #abb0bd;\n                     font-size: 12px;\n                     height: 3em;\n                     line-height: 1.5em;\n                     overflow: hidden;\n                     display: -webkit-box;\n                     -webkit-line-clamp: 2;\n                     -webkit-box-orient: vertical;\n                     margin-left: 62px;\n                     margin-top: 35px;\n                     width: 185px;\n                     position: absolute;\n                     pointer-events: none;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist a>img {\n                     width: 48px;\n                     height: 48px;\n                     float: left;\n                     margin-left: -20px;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist a>p {\n                     -webkit-line-clamp: 2;\n                     -webkit-box-orient: vertical;\n                     display: block;\n                     font-size: 16px;\n                     height: 21px;\n                     line-height: 21px;\n                     margin-bottom: 8px;\n                     margin-top: 0px;\n                     margin-left: 40px;\n                     overflow: hidden;\n                     text-overflow: ellipsis;\n                     white-space: nowrap;\n                 }\n                 #search-jumper .sitelist a+p {\n                     display: none;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist a+p {\n                     position: absolute;\n                     margin-top: -28px;\n                     color: white;\n                     width: 250px;\n                     max-width: calc(100% - 20px);\n                     display: flex;\n                     justify-content: space-evenly;\n                     overflow: hidden;\n                     opacity: 0;\n                     transition: .3s;\n                     border-top: 1px solid rgba(136,136,136,.2);\n                     padding-top: 3px;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist a+p>span {\n                     flex-shrink: 0;\n                     font-size: 14px;\n                     padding: 2px 6px;\n                     background: rgb(160 160 160 / 10%);\n                     color: #888;\n                     border-radius: 10px;\n                     transition: .3s;\n                     cursor: pointer;\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelist a+p>span:hover {\n                     color: white;\n                     background: rgb(160 160 160 / 30%);\n                 }\n                 #search-jumper #search-jumper-alllist.new-mode .sitelistCon>div:hover>p {\n                     opacity: 1;\n                 }\n                 #search-jumper #search-jumper-alllist.showbg>.inputGroup,\n                 #search-jumper #search-jumper-alllist.showbg>.search-jumper-btn,\n                 #search-jumper #search-jumper-alllist.showbg>.search-jumper-historylistcon,\n                 #search-jumper #search-jumper-alllist.showbg+.groupTab,\n                 #search-jumper #search-jumper-alllist.showbg>.sitelistBox {\n                     transition: .3s;\n                     opacity: 0;\n                 }\n                 #search-jumper.search-jumper-showall>#search-jumper-alllist.showbg:hover~.search-jumper-showallBg {\n                     background: unset;\n                 }\n                 .search-jumper-searchBarCon {\n                     all: unset;\n                     position: fixed;\n                     top: 0;\n                     left: 0;\n                     width: 100%;\n                     height: 100%;\n                     z-index: 2147483646;\n                     pointer-events: none;\n                     text-align: center;\n                     overflow: scroll;\n                     display: block;\n                     -ms-overflow-style: none;\n                     scrollbar-width: none;\n                     box-sizing: border-box;\n                     z-index: 2147483647;\n                     user-select: none;\n                 }\n                 .search-jumper-searchBar {\n                     z-index: 2147483647;\n                     overflow-wrap: break-word;\n                     background: #505050cc;\n                     border-radius: ${21*this.scale}px!important;\n                     border: 1px solid #b3b3b3;\n                     display: inline-flex;\n                     pointer-events: all;\n                     margin-top: -${25*this.scale}px;\n                     vertical-align: top;\n                     ${p.prefConfig.noAni?"":"opacity: 0.8;"}\n                     ${p.prefConfig.noAni?"":"transition:margin-top 1s ease, margin-left 1s, right 1s, opacity 1s, transform 1s;"}\n                     user-select: none;\n                     text-align: center;\n                     position: relative;\n                     box-sizing: border-box;\n                 }\n                 .hideAll>.search-jumper-searchBar {\n                     margin-top: -${40*this.scale}px;\n                 }\n                 .search-jumper-searchBarCon:not(.search-jumper-showall)::-webkit-scrollbar {\n                     width: 0 !important;\n                     height: 0 !important;\n                 }\n                 .search-jumper-searchBarCon.search-jumper-scroll {\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                 }\n                 .search-jumper-searchBarCon.search-jumper-scroll>.search-jumper-searchBar {\n                     pointer-events: all;\n                 }\n                 .search-jumper-scroll.search-jumper-bottom {\n                     overflow-y: hidden;\n                 }\n                 .search-jumper-scroll.search-jumper-right>.search-jumper-searchBar {\n                     position: absolute !important;\n                     top: 0;\n                 }\n                 .search-jumper-scroll.search-jumper-bottom>.search-jumper-searchBar {\n                     margin-top: 0px;\n                 }\n                 .search-jumper-scroll.search-jumper-bottom>.search-jumper-searchBar:hover,\n                 .search-jumper-scroll.search-jumper-bottom>.search-jumper-searchBar.initShow,\n                 .resizePage.search-jumper-scroll.search-jumper-bottom>.search-jumper-searchBar,\n                 .search-jumper-scroll.search-jumper-bottom.funcKeyCall>.search-jumper-searchBar,\n                 #search-jumper.in-input.search-jumper-scroll.search-jumper-bottom>.search-jumper-searchBar {\n                     margin-top: 0px;\n                 }\n                 .search-jumper-searchBar:hover {\n                     margin-top: 0;\n                     opacity: 1;\n                     ${p.prefConfig.noAni?"":"transition:margin-top 0.1s ease, margin-left 0.1s, right 0.1s, opacity 0.1s, transform 0.1s;"}\n                 }\n                 .search-jumper-searchBar.initShow,\n                 .resizePage>.search-jumper-searchBar {\n                     margin-top: 0;\n                     ${p.prefConfig.noAni?"":"transition:margin-top 0.25s ease, margin-left 0.25s, right 0.25s, opacity 0.25s, transform 0.25s;"}\n                 }\n                 .funcKeyCall>.search-jumper-searchBar.initShow {\n                     ${p.prefConfig.noAni?"":"transition:opacity 0.15s ease-out;"}\n                 }\n                 #search-jumper.funcKeyCall {\n                     overflow: visible;\n                     position: absolute;\n                     max-width: 100%;\n                     width: 100%;\n                     top: 0;\n                 }\n                 .funcKeyCall>.search-jumper-searchBar {\n                     position: absolute!important;\n                     background: none;\n                     border: none;\n                     max-width: unset!important;\n                     margin: unset;\n                     ${p.prefConfig.minPopup&&!p.prefConfig.noAni?"transition: transform 0.25s ease;":""}\n                     ${p.prefConfig.minPopup?"transform: scale(0.7);":""}\n                 }\n                 .funcKeyCall>.search-jumper-searchBar:hover {\n                     ${p.prefConfig.minPopup?"transform: scale(1);":""}\n                 }\n                 .in-input>.search-jumper-searchBar,\n                 .funcKeyCall>.search-jumper-searchBar {\n                     opacity: 1;\n                     display: inline-flex!important;\n                 }\n                 .in-input.in-find {\n                     pointer-events: none;\n                 }\n                 .in-input.in-find>.searchJumperNavBar,\n                 .in-input.in-find>.search-jumper-input {\n                     pointer-events: all;\n                 }\n                 .in-input.in-find>.search-jumper-searchBar, .in-input>.rectSelecting.search-jumper-searchBar {\n                     opacity: 0!important;\n                     pointer-events: none;\n                     transition: none;\n                 }\n                 .in-input.in-find>.search-jumper-searchBar:hover {\n                     opacity: 1!important;\n                 }\n                 .in-input.in-find>.search-jumper-input {\n                     opacity: 0.6;\n                     transition:opacity 0.25s ease;\n                 }\n                 .in-input.in-find>.search-jumper-input:hover,\n                 .in-input.in-find>.search-jumper-input.active {\n                     opacity: 1;\n                 }\n                 .funcKeyCall>.search-jumper-searchBar {\n                     flex-direction: column;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type {\n                     height: ${p.prefConfig.minPopup?24*this.tilesZoom+"px":"auto"}!important;\n                     max-width: ${p.prefConfig.minPopup?24*this.tilesZoom:40*(p.prefConfig.numPerLine||7)*this.tilesZoom}px!important;\n                     width: auto!important;\n                     width: max-content!important;\n                     max-height: ${108*this.tilesZoom+10}px;\n                     flex-wrap: wrap!important;\n                     flex-direction: row;\n                     padding: 5px;\n                     box-shadow: #000000 0px 0px 10px;\n                     overflow: auto;\n                     scrollbar-width: none;\n                     transition: none;\n                     background: #d0d0d0d0;\n                     box-sizing: content-box;\n                 }\n                 ${p.prefConfig.hideTileType?`\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type:before {\n                     content: attr(data-type);\n                     position: absolute;\n                     background: #ffffffd0;\n                     color: black;\n                     margin-top: -${22*this.tilesZoom}px;\n                     line-height: 1.2;\n                     font-size: ${13*this.tilesZoom}px;\n                     font-weight: bold;\n                     border-radius: ${20*this.tilesZoom}px;\n                     padding: 3px 6px;\n                     box-shadow: #000000 0px 0px 10px;\n                     opacity: 0;\n                     pointer-events: none;\n                     transition: all 0.5s ease;\n                     left: 50%;\n                     transform: translate(-50%, 0);\n                     z-index: 1;\n                     max-width: 100%;\n                     white-space: nowrap;\n                     overflow: hidden;\n                     text-overflow: ellipsis;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>span.search-jumper-btn:first-child {\n                     display: none;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-type.search-jumper-open.not-expand>a:nth-of-type(${(p.prefConfig.expandTypeLength||12)+1}) {\n                     display: grid!important;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type:hover:before {\n                     opacity: 1;\n                 }\n                 `:""}\n                 #search-jumper>.search-jumper-searchBar>.search-jumper-type.search-jumper-open {\n                     overflow: visible;\n                 }\n                 #search-jumper>.search-jumper-searchBar>.search-jumper-type.search-jumper-open.search-jumper-move:hover {\n                     width: fit-content!important;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type.search-jumper-open:not(.not-expand) {\n                     overflow: auto;\n                 }\n                 #search-jumper.search-jumper-left>.search-jumper-searchBar>.search-jumper-type.search-jumper-open.search-jumper-move:hover,\n                 #search-jumper.search-jumper-right>.search-jumper-searchBar>.search-jumper-type.search-jumper-open.search-jumper-move:hover {\n                     width: 100%!important;\n                     height: fit-content!important;\n                 }\n                 #search-jumper.search-jumper-bottom>.search-jumper-searchBar>.search-jumper-type.search-jumper-open.search-jumper-move:hover {\n                     align-items: flex-end;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type.search-jumper-open {\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                     overflow: auto;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.sitelist {\n                     border-radius: 10px;\n                     box-shadow: 0px 0px 10px 0px #7a7a7a;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.sitelist>.sitelistCon {\n                     margin: 0;\n                     padding: 5px;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.sitelist>.sitelistCon>div {\n                     display: none;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.sitelist>.sitelistCon>div:nth-of-type(${p.prefConfig.expandTypeLength||12})~div {\n                     display: block;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.sitelist>.sitelistCon>p {\n                     display: none;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.sitelist>.sitelistCon a>img {\n                     width: 20px;\n                     height: 20px;\n                 }\n                 ${p.prefConfig.minPopup&&!p.prefConfig.hideTileType?"\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>a.search-jumper-btn,\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>.searchJumperExpand {\n                     display: none;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type:hover>a.search-jumper-btn,\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type:hover>.searchJumperExpand {\n                     display: grid;\n                 }\n                 ":""}\n                 ${2==p.prefConfig.minPopup?`\n                 .funcKeyCall:not(.targetInput)>.search-jumper-searchBar {\n                     transform: scale(1);\n                 }\n                 #search-jumper.funcKeyCall:not(.targetInput)>.search-jumper-searchBar>.search-jumper-type {\n                     height: auto!important;\n                     width: auto!important;\n                     width: max-content!important;\n                     max-width: ${40*(p.prefConfig.numPerLine||7)*this.tilesZoom}px!important;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type>a.search-jumper-btn {\n                     display: grid;\n                 }\n                 #search-jumper.funcKeyCall.targetInput>.search-jumper-searchBar>.search-jumper-type>a.search-jumper-btn {\n                     display: none;\n                 }\n                 #search-jumper.funcKeyCall.targetInput>.search-jumper-searchBar>.search-jumper-type:hover>a.search-jumper-btn {\n                     display: grid;\n                 }\n                 `:""}\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type:hover {\n                     height: auto!important;\n                     width: auto!important;\n                     width: max-content!important;\n                     max-width: ${40*(p.prefConfig.numPerLine||7)*this.tilesZoom}px!important;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-type::-webkit-scrollbar {\n                     width: 0 !important;\n                     height: 0 !important;\n                 }\n                 .search-jumper-left,\n                 .search-jumper-left .search-jumper-type,\n                 .search-jumper-left>.search-jumper-searchBar,\n                 .search-jumper-right,\n                 .search-jumper-right .search-jumper-type,\n                 .search-jumper-right>.search-jumper-searchBar {\n                     flex-direction: column;\n                     max-width: ${42*this.scale}px;\n                     max-height: unset;\n                 }\n                 .search-jumper-left .search-jumper-type,\n                 .search-jumper-right .search-jumper-type {\n                     max-width: ${40*this.scale}px;\n                 }\n                 .search-jumper-left,\n                 .search-jumper-left>.search-jumper-searchBar,\n                 .search-jumper-right,\n                 .search-jumper-right>.search-jumper-searchBar {\n                     max-width: 100%;\n                 }\n                 .search-jumper-searchBar.grabbing {\n                     max-width: ${42*this.scale}px;\n                 }\n                 .search-jumper-right .search-jumper-type {\n                     align-items: flex-end;\n                 }\n                 .search-jumper-left {\n                     height: 100%;\n                     text-align: initial;\n                 }\n                 .search-jumper-left:not(.search-jumper-showall) {\n                     width: initial;\n                     width: -webkit-fill-available;\n                 }\n                 .search-jumper-right {\n                     left: unset;\n                     right: 0;\n                     height: 100%;\n                 }\n                 .searchJumperExpand {\n                     opacity: 0.8;\n                 }\n                 .searchJumperExpand:hover {\n                     opacity: 1;\n                 }\n                 .searchJumperExpand>svg {\n                     transform: rotate(-90deg);\n                     border-radius: 20px;\n                     filter: drop-shadow(0px 0px 2px black);\n                     width: unset;\n                     height: unset;\n                     color: black;\n                     fill: black;\n                 }\n                 .search-jumper-type.search-jumper-open>span.search-jumper-word,\n                 #search-jumper.funcKeyCall .search-jumper-type>span.search-jumper-word {\n                     filter: drop-shadow(0px 0px 2px black);\n                 }\n                 .search-jumper-left .searchJumperExpand>svg,\n                 .search-jumper-right .searchJumperExpand>svg {\n                     transform: unset;\n                 }\n                 .search-jumper-bottom {\n                     top: unset;\n                     bottom: 0;\n                     height: ${42*this.scale*2}px;\n                     max-height: ${43*this.scale*2}px;\n                     overflow-y: hidden;\n                 }\n                 .search-jumper-left>.search-jumper-searchBar {\n                     width: fit-content;\n                     margin-top: 0;\n                     margin-left: -${20*this.scale}px;\n                 }\n                 .hideAll.search-jumper-left>.search-jumper-searchBar {\n                     margin-left: -${40*this.scale}px;\n                 }\n                 .search-jumper-right>.search-jumper-searchBar {\n                     margin-top: 0;\n                     right: -${20*this.scale}px;\n                     position: fixed;\n                 }\n                 .hideAll.search-jumper-right>.search-jumper-searchBar {\n                     right: -${40*this.scale}px;\n                 }\n                 .search-jumper-left>.search-jumper-searchBar:hover,\n                 .search-jumper-left>.search-jumper-searchBar.initShow,\n                 .resizePage.search-jumper-left>.search-jumper-searchBar,\n                 .search-jumper-left.funcKeyCall>.search-jumper-searchBar,\n                 #search-jumper.in-input.search-jumper-left>.search-jumper-searchBar {\n                     margin-top: unset;\n                     margin-left: 0;\n                     opacity: 1;\n                 }\n                 .search-jumper-right>.search-jumper-searchBar:hover,\n                 .search-jumper-right>.search-jumper-searchBar.initShow,\n                 .resizePage.search-jumper-right>.search-jumper-searchBar,\n                 .search-jumper-right.funcKeyCall>.search-jumper-searchBar,\n                 #search-jumper.in-input.search-jumper-right>.search-jumper-searchBar {\n                     margin-top: unset;\n                     right: 0;\n                     opacity: 1;\n                 }\n                 .search-jumper-bottom>.search-jumper-searchBar {\n                     position: relative;\n                     margin-top: 0px;\n                     top: ${42*this.scale}px;\n                 }\n                 .hideAll.search-jumper-bottom>.search-jumper-searchBar {\n                     opacity: 0;\n                 }\n                 .search-jumper-bottom>.search-jumper-searchBar:hover,\n                 .search-jumper-bottom>.search-jumper-searchBar.initShow,\n                 .resizePage.search-jumper-bottom>.search-jumper-searchBar,\n                 .search-jumper-bottom.funcKeyCall>.search-jumper-searchBar,\n                 #search-jumper.in-input.search-jumper-bottom>.search-jumper-searchBar {\n                     margin-top: 0px;\n                     opacity: 1;\n                 }\n                 .search-jumper-btn {\n                     position: relative;\n                     display: grid;\n                     --scale: 1;\n                     padding: ${1*this.scale}px!important;\n                     margin: ${3*this.scale}px!important;\n                     cursor: pointer;\n                     box-sizing: content-box;\n                     ${p.prefConfig.noAni?"":"transition:margin-left 0.25s ease, width 0.25s, height 0.25s, transform 0.25s, background 0.25s;"}\n                     width: calc(${32*this.scale}px * var(--scale));\n                     height: calc(${32*this.scale}px * var(--scale));\n                     overflow: hidden;\n                     text-overflow: ellipsis;\n                     white-space: nowrap;\n                     text-decoration:none;\n                     min-width: ${32*this.scale}px;\n                     min-height: ${32*this.scale}px;\n                     text-align: center;\n                     background-image: initial;\n                     filter: drop-shadow(1px 1px 3px #00000030);\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-btn {\n                     padding: ${1*this.tilesZoom}px!important;\n                     margin: ${3*this.tilesZoom}px!important;\n                     width: ${32*this.tilesZoom}px;\n                     height: ${32*this.tilesZoom}px;\n                     min-width: ${32*this.tilesZoom}px;\n                     min-height: ${32*this.tilesZoom}px;\n                     border-radius: ${10*this.tilesZoom}px;\n                     filter: drop-shadow(1px 1px 3px #00000060);\n                 }\n                 #search-jumper.funcKeyCall a.search-jumper-btn {\n                     background: #f7f7f7a0;\n                 }\n                 a.search-jumper-btn:not(.search-jumper-word)>span {\n                     position: absolute;\n                     text-align: center;\n                     width: 100%;\n                     bottom: 0px;\n                     color: black!important;\n                     font-family: Arial, sans-serif;\n                     text-shadow: 0 1px white, 1px 0 white, -1px 0 white, 0 -1px white;\n                     font-size: ${12*this.scale}px;\n                     font-weight: normal;\n                     opacity: 0.8;\n                 }\n                 #search-jumper.funcKeyCall a.search-jumper-btn:not(.search-jumper-word)>span {\n                     font-size: ${12*this.tilesZoom}px;\n                 }\n                 .search-jumper-type>a.search-jumper-btn.historySite {\n                     box-shadow: 0px 0px 8px 0px #00000080;\n                 }\n                 .search-jumper-btn>img {\n                     width: ${32*this.scale}px;\n                     height: ${32*this.scale}px;\n                     border: unset;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-btn>img {\n                     width: ${32*this.tilesZoom}px;\n                     height: ${32*this.tilesZoom}px;\n                     border-radius: unset;\n                 }\n                 .search-jumper-btn>b {\n                     line-height: ${32*this.scale}px;\n                     font-size: ${14*this.scale}px;\n                     letter-spacing: 0;\n                     color: white;\n                     opacity: 0.9;\n                     text-shadow: 0 0 1px #d9d9d9cc;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-btn>b {\n                     line-height: ${32*this.tilesZoom}px;\n                     font-size: ${14*this.tilesZoom}px;\n                 }\n                 .search-jumper-btn:hover>b {\n                     opacity: 1;\n                 }\n                 .search-jumper-btn>div {\n                     position: absolute;\n                     width: 100%;\n                     height: 100%;\n                     line-height: ${32*this.scale}px;\n                     background: black;\n                     border-radius: ${20*this.scale}px;\n                     font-size: ${30*this.scale}px;\n                     color: wheat;\n                     display: none;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-btn>div {\n                     line-height: ${32*this.tilesZoom}px;\n                     border-radius: ${20*this.tilesZoom}px;\n                     font-size: ${30*this.tilesZoom}px;\n                 }\n                 .search-jumper-isInPage .search-jumper-btn>div,\n                 .search-jumper-isTargetImg .search-jumper-btn>div,\n                 .search-jumper-isTargetAudio .search-jumper-btn>div,\n                 .search-jumper-isTargetVideo .search-jumper-btn>div,\n                 .search-jumper-isTargetLink .search-jumper-btn>div,\n                 .search-jumper-isTargetPage .search-jumper-btn>div {\n                     animation-name: changeOpacity;\n                     animation-duration: 2s;\n                     animation-iteration-count: 3;\n                     animation-delay: 0.1s;\n                     display: block;\n                     opacity: 0;\n                 }\n                 @keyframes changeOpacity {\n                     0%   {opacity: 0;}\n                     10%  {opacity: 0;}\n                     50%  {opacity: 0.75;}\n                     80%  {opacity: 0;}\n                     100% {opacity: 0;}\n                 }\n                 @-webkit-keyframes loader-rotate {\n                   from {\n                     transform: rotate(0deg);\n                   }\n                   to {\n                     transform: rotate(360deg);\n                   }\n                 }\n                 @keyframes loader-rotate {\n                   from {\n                     transform: rotate(0deg);\n                   }\n                   to {\n                     transform: rotate(360deg);\n                   }\n                 }\n                 .search-jumper-tips>.loader {\n                     border-width: 5px;\n                     border-style: solid;\n                     border-color: gainsboro gainsboro dodgerblue gainsboro;\n                     border-radius: 50%;\n                     display: block;\n                     width: 25px;\n                     float: left;\n                     height: 25px;\n                     margin-right: 10px;\n                     margin-top: 5px;\n                     -webkit-animation: loader-rotate 1.5s linear infinite;\n                     animation: loader-rotate 1.5s linear infinite;\n                 }\n                 .search-jumper-tips>.loader+font {\n                     font-size: 25px;\n                     line-height: 40px;\n                 }\n                 .search-jumper-tips>div {\n                     font-size: initial;\n                     line-height: initial;\n                     font-weight: normal;\n                     padding: 5px;\n                     cursor: initial;\n                 }\n                 .search-jumper-tips>div [data-read],\n                 .search-jumper-tips>div [data-close],\n                 .search-jumper-tips>div [data-paste],\n                 .search-jumper-tips>div [data-copy] {\n                     cursor: pointer;\n                 }\n                 .search-jumper-tips>div [data-search] {\n                     cursor: help;\n                 }\n                 .search-jumper-tips>div [data-close] {\n                     position: absolute;\n                     top: 0px;\n                     right: 0px;\n                     width: 20px;\n                     height: 20px;\n                     color: white;\n                     transition:all 0.2s ease;\n                 }\n                 .search-jumper-tips>div [data-close]:hover {\n                     color: red;\n                 }\n                 .search-jumper-tips>div [data-read] {\n                     color: #f9690e;\n                 }\n                 .search-jumper-tips>div [data-drag] {\n                     cursor: grab;\n                 }\n                 .search-jumper-tips.draging {\n                     cursor: grabbing;\n                     transition: none;\n                 }\n                 .search-jumper-tips.draging * {\n                     pointer-events: none;\n                 }\n                 .search-jumper-logoBtnSvg {\n                     width: ${32*this.scale}px;\n                     height: ${32*this.scale}px;\n                     overflow: hidden;\n                     vertical-align: top;\n                     cursor: grab;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-logoBtnSvg {\n                     height: ${32*this.tilesZoom}px;\n                     width: ${32*this.tilesZoom}px;\n                 }\n                 .search-jumper-type.search-jumper-targetImg,\n                 .search-jumper-type.search-jumper-targetAudio,\n                 .search-jumper-type.search-jumper-targetVideo,\n                 .search-jumper-type.search-jumper-targetLink,\n                 .search-jumper-type.search-jumper-targetPage,\n                 .search-jumper-isTargetImg>.search-jumper-type,\n                 .search-jumper-isTargetAudio>.search-jumper-type,\n                 .search-jumper-isTargetVideo>.search-jumper-type,\n                 .search-jumper-isTargetLink>.search-jumper-type,\n                 .search-jumper-searchBar:hover>.search-jumper-type.search-jumper-targetImg,\n                 .search-jumper-searchBar:hover>.search-jumper-type.search-jumper-targetAudio,\n                 .search-jumper-searchBar:hover>.search-jumper-type.search-jumper-targetVideo,\n                 .search-jumper-searchBar:hover>.search-jumper-type.search-jumper-targetLink,\n                 .search-jumper-searchBar:hover>.search-jumper-type.search-jumper-targetPage,\n                 .search-jumper-searchBar.search-jumper-isTargetImg:hover>.search-jumper-type,\n                 .search-jumper-searchBar.search-jumper-isTargetAudio:hover>.search-jumper-type,\n                 .search-jumper-searchBar.search-jumper-isTargetVideo:hover>.search-jumper-type,\n                 .search-jumper-searchBar.search-jumper-isTargetLink:hover>.search-jumper-type {\n                     display: none;\n                 }\n                 #search-jumper.in-input .search-jumper-type.search-jumper-open {\n                     width: auto!important;\n                     height: auto!important;\n                 }\n                 #search-jumper.in-input .sitelistCon>div:not(.input-hide)>a {\n                     display: flex!important;\n                 }\n                 #search-jumper .input-hide,\n                 #search-jumper.search-jumper-showall #search-jumper-alllist .sitelist.input-hide {\n                     display: none!important;\n                 }\n                 #search-jumper.in-input .search-jumper-type:not(.input-hide) {\n                     display: inline-flex!important;\n                     flex-wrap: nowrap!important;\n                 }\n                 #search-jumper.in-input .search-jumper-btn:not(.input-hide) {\n                     display: grid!important;\n                 }\n                 #search-jumper>.search-jumper-searchBar>.search-jumper-logo {\n                     display: inline-flex;\n                     background: unset;\n                     padding: 0px;\n                 }\n                 #search-jumper.funcKeyCall>.search-jumper-searchBar>.search-jumper-logo {\n                     display: none;\n                 }\n                 .search-jumper-searchBar>.search-jumper-type.search-jumper-targetAll,\n                 .search-jumper-searchBar:hover>.search-jumper-type.search-jumper-targetAll {\n                     display: inline-flex;\n                 }\n                 .search-jumper-isInPage>.search-jumper-type.search-jumper-needInPage,\n                 .search-jumper-isTargetImg>.search-jumper-type.search-jumper-targetImg,\n                 .search-jumper-isTargetAudio>.search-jumper-type.search-jumper-targetAudio,\n                 .search-jumper-isTargetVideo>.search-jumper-type.search-jumper-targetVideo,\n                 .search-jumper-isTargetLink>.search-jumper-type.search-jumper-targetLink,\n                 .search-jumper-isTargetPage>.search-jumper-type,\n                 .search-jumper-searchBar.search-jumper-isInPage:hover>.search-jumper-type.search-jumper-needInPage,\n                 .search-jumper-searchBar.search-jumper-isTargetImg:hover>.search-jumper-type.search-jumper-targetImg,\n                 .search-jumper-searchBar.search-jumper-isTargetAudio:hover>.search-jumper-type.search-jumper-targetAudio,\n                 .search-jumper-searchBar.search-jumper-isTargetVideo:hover>.search-jumper-type.search-jumper-targetVideo,\n                 .search-jumper-searchBar.search-jumper-isTargetLink:hover>.search-jumper-type.search-jumper-targetLink,\n                 .search-jumper-searchBar.search-jumper-isTargetPage:hover>.search-jumper-type.search-jumper-targetPage,\n                 .search-jumper-searchBar.search-jumper-isTargetPage:hover>.search-jumper-type {\n                     display: inline-flex;\n                 }\n                 .search-jumper-type,\n                 .search-jumper-logo {\n                     display: inline-flex;\n                     box-sizing: border-box;\n                     background: #d0d0d0;\n                     border-radius: ${20*this.scale}px!important;\n                     overflow: hidden;\n                     padding: 0.2px;\n                     height: ${40*this.scale}px;\n                     width: ${40*this.scale}px;\n                     max-height: ${40*this.scale}px;\n                     min-height: ${40*this.scale}px;\n                     min-width: ${40*this.scale}px;\n                     ${p.prefConfig.noAni?"":`transition:width ${p.prefConfig.typeOpenTime}ms ease, height ${p.prefConfig.typeOpenTime}ms;`}\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-type,\n                 #search-jumper.funcKeyCall .search-jumper-logo {\n                     border-radius: ${20*this.tilesZoom}px!important;\n                     height: ${40*this.tilesZoom}px;\n                     width: ${40*this.tilesZoom}px;\n                     max-height: ${40*this.tilesZoom}px;\n                     min-height: ${40*this.tilesZoom}px;\n                     min-width: ${40*this.tilesZoom}px;\n                 }\n                 .search-jumper-right>.searchJumperNavBar {\n                     right: unset;\n                     left: 0;\n                 }\n                 .search-jumper-right>.searchJumperNavBar>#navMarks+div.navPointer {\n                     right: unset;\n                     left: 20px;\n                     transform: rotate(180deg);\n                 }\n                 .search-jumper-bottom>.search-jumper-input {\n                     bottom: unset;\n                     top: 80px;\n                 }\n                 #search-jumper .search-jumper-type.search-jumper-open.not-expand>a:nth-of-type(${p.prefConfig.expandTypeLength||12})~a {\n                     display: none!important;\n                 }\n                 #search-jumper .sitelist {\n                     position: fixed;\n                     text-align: left;\n                     background: #00000000;\n                     max-height: calc(100vh - ${42*this.scale}px);\n                     overflow: scroll;\n                     border: 0;\n                     pointer-events: none;\n                     opacity: 0;\n                     ${p.prefConfig.noAni?"":"transition:opacity 0.25s ease;"}\n                     scrollbar-width: none;\n                     box-sizing: content-box;\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                     z-index: 1;\n                 }\n                 #search-jumper .search-jumper-type:hover>.sitelist {\n                     pointer-events: all;\n                     opacity: 1;\n                 }\n                 #search-jumper .sitelist>.sitelistCon {\n                     margin: 10px;\n                     border-radius: 10px;\n                     box-shadow: 0px 0px 10px 0px #7a7a7a;\n                     padding: 0 0 10px 0;\n                     background: #ffffffee;\n                     opacity: 1;\n                     border: 0;\n                 }\n                 #search-jumper .sitelist>.sitelistCon:hover {\n                     opacity: 1;\n                 }\n                 #search-jumper .sitelist::-webkit-scrollbar {\n                     width: 0 !important;\n                     height: 0 !important;\n                 }\n                 #search-jumper .sitelist>.sitelistCon>div {\n                     padding: 0 10px;\n                 }\n                 #search-jumper .sitelist>.sitelistCon>div:hover {\n                     background: #f5f7fa;\n                 }\n                 #search-jumper .sitelist a {\n                     display: flex;\n                     align-items: center;\n                     text-decoration: none;\n                     cursor: pointer;\n                 }\n                 #search-jumper .sitelist a>img {\n                     width: 20px;\n                     height: 20px;\n                     margin-right: 10px;\n                     margin-top: unset;\n                     max-width: unset;\n                     -moz-transition: transform 0.3s ease;\n                     -webkit-transition: transform 0.3s ease;\n                     transition: transform 0.3s ease;\n                 }\n                 #search-jumper .sitelist a>p {\n                     display: inline-block;\n                     font-size: 15px;\n                     font-family: Arial, sans-serif;\n                     line-height: 25px;\n                     margin: 5px auto;\n                     color: #6b6e74;\n                     flex: 1;\n                     text-align: left;\n                     white-space: nowrap;\n                     transform-origin: left;\n                     -moz-transition: transform 0.3s ease;\n                     -webkit-transition: transform 0.3s ease;\n                     transition: transform 0.3s ease;\n                 }\n                 #search-jumper .sitelist a.dragTarget>img {\n                     -webkit-transform:scale(1.5);\n                     -moz-transform:scale(1.5);\n                     transform:scale(1.5);\n                 }\n                 #search-jumper .sitelist a.dragTarget>p {\n                     -webkit-transform:scale(1.2);\n                     -moz-transform:scale(1.2);\n                     transform: scale(1.2);\n                 }\n                 #search-jumper .sitelist a * {\n                     pointer-events: none;\n                 }\n                 #search-jumper .sitelist>.sitelistCon>p {\n                     color: #565656;\n                     text-align: center;\n                     font-size: 16px;\n                     font-family: Arial, sans-serif;\n                     font-weight: bold;\n                     background: #f6f6f6;\n                     border-radius: 10px 10px 0 0;\n                     overflow: hidden;\n                     white-space: nowrap;\n                     text-overflow: ellipsis;\n                     padding: 3px 10px;\n                     position: sticky;\n                     top: 0;\n                     pointer-events: none;\n                     margin: -1px 0 0 0;\n                 }\n                 .search-jumper-searchBar.disable-pointer>.search-jumper-type {\n                     pointer-events: none;\n                 }\n                 .search-jumper-word {\n                     background: black;\n                     color: #ffffff!important;\n                     font-family: Arial, sans-serif;\n                     font-weight: 500;\n                     font-size: ${13*this.scale}px;\n                     line-height: calc(${32*this.scale}px * var(--scale));\n                     min-width: ${32*this.scale}px;\n                     min-height: ${32*this.scale}px;\n                     letter-spacing: 0px;\n                     text-shadow: unset;\n                     text-decoration: none;\n                 }\n                 span.search-jumper-word {\n                     border-radius: ${20*this.scale}px!important;\n                 }\n                 a.search-jumper-word>span {\n                     border-radius: 50%!important;\n                     min-width: ${32*this.tilesZoom}px;\n                     min-height: ${32*this.tilesZoom}px;\n                     background: white;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-word {\n                     border-radius: ${10*this.tilesZoom}px!important;\n                     font-size: ${14*this.tilesZoom}px;\n                     line-height: ${32*this.tilesZoom}px;\n                     width: ${32*this.tilesZoom}px;\n                     height: ${32*this.tilesZoom}px;\n                     min-width: ${32*this.tilesZoom}px;\n                     min-height: ${32*this.tilesZoom}px;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-word>span {\n                     background: unset;\n                 }\n                 .search-jumper-word:hover {\n                     font-weight: bold;\n                     text-shadow: 0px 0px 5px #d0d0d0;\n                 }\n                 a.search-jumper-word {\n                     color: #111111!important;\n                     background: unset;\n                 }\n                 .funcKeyCall a.search-jumper-word {\n                     background: #f7f7f7a0;\n                 }\n                 a.search-jumper-word>span {\n                     color: #222!important;\n                     border-radius: 20px;\n                     line-height: unset;\n                     text-align: center;\n                     text-shadow: 0 0 0.7px #787878dd;\n                     background-image: initial;\n                 }\n                 .search-jumper-type img {\n                     width: 100%;\n                     height: 100%;\n                     margin-top: unset;\n                 }\n                 #search-jumper.funcKeyCall .search-jumper-type img {\n                     width: ${32*this.tilesZoom}px;\n                     height: ${32*this.tilesZoom}px;\n                 }\n                 .funcKeyCall>.search-jumper-tips {\n                     position: absolute;\n                 }\n                 .search-jumper-tips {\n                     z-index: 2147483647;\n                     pointer-events: none;\n                     position: fixed;\n                     font-size: ${35*this.tipsZoom}px;\n                     background: #f5f5f5f0;\n                     border-radius: ${10*this.tipsZoom}px!important;\n                     padding: 6px;\n                     box-shadow: 0px 0px 10px 0px #000;\n                     font-weight: bold;\n                     ${p.prefConfig.noAni?"":"transition: all 0.2s ease;"}\n                     color: black;\n                     white-space: normal;\n                     max-width: 640px;\n                     max-width: min(80vw,640px);\n                     width: max-content;\n                     line-height: ${35*this.tipsZoom}px;\n                     word-break: break-all;\n                     text-align: center;\n                     box-sizing: content-box;\n                     overflow: hidden;\n                     font-family: Roboto,arial,sans-serif;\n                     cursor: grab;\n                     max-height: 80vh;\n                     overscroll-behavior: contain;\n                     -ms-scroll-chaining: contain;\n                 }\n                 .search-jumper-tips:hover {\n                     overflow: auto;\n                 }\n                 .search-jumper-tips * {\n                     max-width: 640px;\n                     max-width: min(80vw,640px);\n                     margin: auto;\n                 }\n                 .search-jumper-tips .markdown {\n                     white-space: pre-wrap;\n                     line-height: 1.2;\n                     text-align: initial;\n                     margin: 10px;\n                     display: block;\n                     user-select: text;\n                     cursor: auto;\n                 }\n                 .search-jumper-tips iframe {\n                     border: unset;\n                     display: block;\n                 }\n                 .search-jumper-searchBar>.search-jumper-type {\n                     padding: 0px;\n                     ${p.prefConfig.disableTypeOpen?"background: unset;":""}\n                 }\n                 .search-jumper-searchBar>.search-jumper-type:not(.search-jumper-open) {\n                     background: unset;\n                     border-radius: unset!important;\n                 }\n                 .minSizeMode.search-jumper-searchBar>.search-jumper-type:not(.search-jumper-open),\n                 .minSizeMode.search-jumper-searchBar:hover>.search-jumper-type:not(.search-jumper-open) {\n                     display: none;\n                 }\n                 .minSizeModeClose.minSizeMode.search-jumper-searchBar:hover>.search-jumper-type:not(.search-jumper-targetImg,.search-jumper-targetLink,.search-jumper-targetPage,.search-jumper-targetVideo,.search-jumper-targetAudio) {\n                     display: inline-flex;\n                 }\n                 .funcKeyCall>.search-jumper-searchBar>.search-jumper-type:not(.search-jumper-open) {\n                     display: none;\n                     border-radius: ${20*this.tilesZoom}px!important;\n                 }\n                 span.search-jumper-word>img {\n                     width: ${20*this.scale}px;\n                     height: ${20*this.scale}px;\n                     margin: auto;\n                 }\n                 #search-jumper.funcKeyCall span.search-jumper-word>img {\n                     width: ${20*this.tilesZoom}px;\n                     height: ${20*this.tilesZoom}px;\n                 }\n                 .search-jumper-btn:hover {\n                     -webkit-transform:scale(1.1);\n                     -moz-transform:scale(1.1);\n                     transform:scale(1.1);\n                     color: white;\n                     text-decoration:none;\n                     filter: drop-shadow(1px 1px 3px #00000050);\n                 }\n                 .search-jumper-btn:active {\n                     -webkit-transform:scale(1.1);\n                     -moz-transform:scale(1.1);\n                     transform:scale(1.1);\n                     transition:unset;\n                     filter: drop-shadow(1px 1px 5px #000000a0);\n                 }\n                 .search-jumper-searchBar .search-jumper-btn.current {\n                     overflow: visible;\n                 }\n                 .search-jumper-searchBar .search-jumper-btn.current::before {\n                     content: '';\n                     position: absolute;\n                     right: -2px;\n                     top: -2px;\n                     border: 1px solid #00000099;\n                     display: inline-block;\n                     width: 10px;\n                     height: 10px;\n                     border-radius: 50%;\n                     background: white;\n                     box-shadow: 0px 0px 3px 0px rgb(0 0 0 / 80%);\n                     ${p.prefConfig.noAni?"":"opacity: 0.8;"}\n                 }\n                 .in-input .search-jumper-input {\n                     display: block;\n                     box-sizing: content-box;\n                 }\n                 .lock-input .search-jumper-lock-input {\n                     float: left;\n                     font-size: 20px;\n                     top: 14px;\n                     left: 25px;\n                     color: darkgrey;\n                     position: absolute;\n                     border-right: 2px solid #32373a;\n                     padding-right: 10px;\n                     display: block;\n                 }\n                 .search-jumper-input {\n                     width: 50%;\n                     min-width: 500px;\n                     bottom: 2%;\n                     left: 50%;\n                     margin: 0 0 0 -25%;\n                     margin-left: min(-25%, -250px);\n                     position: fixed;\n                     font-family: Arial, sans-serif;\n                     text-align: left;\n                     box-shadow: 0px 2px 10px rgb(0 0 0 / 80%);\n                     border: 1px solid rgb(179 179 179 / 10%);\n                     border-radius: 28px;\n                     background-color: rgb(51 56 59 / 90%);\n                     padding: 5px;\n                     display: none;\n                     z-index: 2139999999;\n                     font-size: 20px;\n                     height: 36px;\n                     touch-action: none;\n                 }\n                 .inputGroup {\n                     cursor: grab;\n                     display: flex;\n                 }\n                 .inputGroup * {\n                     cursor: default;\n                 }\n                 .search-jumper-input input,\n                 .search-jumper-input textarea {\n                     background-color: #212022;\n                     color: #adadad;\n                     border: none;\n                     font-size: 16px;\n                     height: 35px;\n                     margin-bottom: 0;\n                     padding: 5px;\n                     margin: 0 10px;\n                     border-radius: 3px;\n                     box-shadow: #333 0px 0px 2px;\n                     width: calc(100% - 20px);\n                     outline: none;\n                     box-sizing: border-box;\n                     cursor: text;\n                 }\n                 #searchJumperInput,\n                 #searchJumperInputKeyWords {\n                     width: calc(100% - 11px);\n                     float: left;\n                     transition: 0.25s width ease;\n                 }\n                 #searchJumperInput {\n                     margin: 0 5px 0 10px;\n                 }\n                 #searchJumperInputKeyWords {\n                     margin: 0 10px 0 1px;\n                 }\n                 #searchJumperInputKeyWords:disabled {\n                     opacity: 0.5;\n                     max-width: 20%;\n                     min-width: 20%;\n                 }\n                 #filterSites>input:focus,\n                 #filterSites>textarea:focus {\n                     width: calc(400% - 20px);\n                     color: white;\n                 }\n                 .search-jumper-input * {\n                     box-sizing: border-box;\n                 }\n                 .search-jumper-input input[type="radio"] {\n                     display: none;\n                 }\n                 .search-jumper-input input:checked + label {\n                     background: #3a444add;\n                     opacity: 0.9;\n                     color: white;\n                     font-size: 14px;\n                 }\n                 .search-jumper-input input#filterSitesTab:checked ~ .line {\n                     left: 27px;\n                 }\n                 .search-jumper-input input#filterSitesTab:checked ~ .content-container #filterSites {\n                     opacity: 1;\n                     pointer-events: all;\n                 }\n                 .search-jumper-input input#searchInPageTab:checked ~ .line {\n                     left: 233px;\n                 }\n                 .search-jumper-input input#searchInPageTab:checked ~ .content-container #searchInPage {\n                     opacity: 1;\n                     pointer-events: all;\n                 }\n                 .search-jumper-input label {\n                     display: inline-block;\n                     font-size: 12px;\n                     height: 32px;\n                     line-height: 32px;\n                     width: 200px;\n                     text-align: center;\n                     background: #2a343acc;\n                     color: #959595;\n                     position: relative;\n                     transition: 0.25s background ease, 0.25s opacity ease;\n                     cursor: pointer;\n                     position: relative;\n                     top: -38px;\n                     left: 22px;\n                     border-radius: 5px 5px 0 0;\n                     user-select: none;\n                     pointer-events: all;\n                     max-width: 40%;\n                     white-space: nowrap;\n                     overflow: hidden;\n                     text-overflow: ellipsis;\n                     opacity: 0.6;\n                 }\n                 .search-jumper-input input:checked + label:hover,\n                 .search-jumper-input label:hover {\n                     background: #3a444a;\n                     opacity: 1;\n                 }\n                 .search-jumper-input label::after {\n                     content: "";\n                     height: 1px;\n                     width: 100%;\n                     position: absolute;\n                     display: block;\n                     background: #ccc;\n                     bottom: 0;\n                     opacity: 0;\n                     left: 0;\n                     transition: 0.25s ease;\n                 }\n                 .search-jumper-input label:hover::after {\n                     opacity: 1;\n                 }\n                 .search-jumper-input .line {\n                     background: #1E88E5;\n                     width: 200px;\n                     height: 1px;\n                     top: -2px;\n                     left: 0;\n                     transition: 0.25s ease;\n                     position: absolute;\n                 }\n                 .inputGroup>.svgBtns {\n                     right: 16px;\n                     top: 5px;\n                     height: 35px;\n                     position: absolute;\n                     user-select: none;\n                     background: #212022;\n                     white-space: nowrap;\n                     overflow: hidden;\n                     display: flex;\n                     align-items: center;\n                 }\n                 .inputGroup>#addons {\n                     position: absolute;\n                     bottom: 41px;\n                     right: 110px;\n                     display: none;\n                     flex-direction: column;\n                     background: #212022;\n                     border-radius: 10px;\n                     opacity: 0;\n                     transition: 0.5s opacity ease;\n                 }\n                 .inputGroup>#addons>div {\n                     padding: 10px;\n                 }\n                 .inputGroup>#addons>div>input {\n                     float: left;\n                     width: 20px;\n                     height: 20px;\n                     margin: 0 10px 0 0;\n                     cursor: pointer;\n                 }\n                 .inputGroup:hover>#addons {\n                     display: flex;\n                 }\n                 .inputGroup>#addons:hover {\n                     opacity: 1;\n                 }\n                 .inputGroup>.svgBtns:hover+#addons {\n                     opacity: 1;\n                 }\n                 .inputGroup>#addons>div>label {\n                     color: white;\n                     display: inline;\n                     background: none;\n                     top: unset;\n                     left: unset;\n                     font-size: unset;\n                     line-height: 20px;\n                     max-width: unset;\n                 }\n                 .inputGroup>.svgBtns:hover {\n                     width: auto;\n                 }\n                 .inputGroup>.svgBtns>svg {\n                     margin: 0 2px;\n                 }\n                 .inputGroup svg.checked {\n                     fill: #1E88E5;\n                 }\n                 @media screen and (max-width: 2048px) {\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                         width: 1580px;\n                     }\n                 }\n                 @media screen and (max-width: 1920px) {\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                         width: 1320px;\n                     }\n                 }\n                 @media screen and (max-width: 1600px) {\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                         width: 1060px;\n                     }\n                 }\n                 @media screen and (max-width: 1300px) {\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                         width: 800px;\n                     }\n                 }\n                 @media screen and (max-width: 900px) {\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                         width: 540px;\n                     }\n                 }\n                 @media screen and (max-width: 600px) {\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist {\n                         width: 95vw;\n                     }\n                     #search-jumper.search-jumper-showall #search-jumper-alllist.new-mode .sitelist>.sitelistCon {\n                         width: calc(100% - 20px);\n                     }\n                     #search-jumper-alllist>.timeInAll, #search-jumper-alllist>.dayInAll {\n                         margin: 10px;\n                     }\n                     #search-jumper #search-jumper-alllist.new-mode .sitelist a {\n                         width: calc(50vw - 45px);\n                     }\n                     #search-jumper #search-jumper-alllist.new-mode .sitelist>.sitelistCon>div:before {\n                         width: 100px;\n                         margin-left: 68px;\n                     }\n                     #search-jumper #search-jumper-alllist.new-mode .sitelist a>img {\n                         margin-left: 0;\n                     }\n                 }\n                 @media screen and (max-width: 380px) {\n                     #search-jumper #search-jumper-alllist.new-mode .sitelist a {\n                         width: calc(100vw - 60px);\n                     }\n                     #search-jumper #search-jumper-alllist.new-mode .sitelist>.sitelistCon>div:before {\n                         width: calc(100vw - 150px);\n                         margin-left: 85px;\n                     }\n                     #search-jumper #search-jumper-alllist.new-mode .sitelist a+p {\n                         width: calc(100vw - 60px);\n                     }\n                 }\n                 @media screen and (max-width: 800px) {\n                     .search-jumper-input .line {\n                         display: none;\n                     }\n                     .search-jumper-input {\n                         min-width: 300px;\n                         margin-left: min(-25%, -150px);\n                     }\n                     .inputGroup>.svgBtns {\n                         width: 25px;\n                     }\n                     #search-jumper-alllist>.modeSwitch {\n                         width: 36px;\n                         height: 36px;\n                         right: 2px;\n                         top: 10px;\n                     }\n                 }\n                 @media screen and (max-width: 650px) {\n                     #search-jumper.search-jumper-showall>#search-jumper-alllist.new-mode+.groupTab {\n                         display: none;\n                     }\n                 }\n                 .search-jumper-input .content-container {\n                     background: #eee;\n                     position: static;\n                     font-size: 16px;\n                 }\n                 .search-jumper-input .content-container .inputGroup {\n                     position: absolute;\n                     padding: 5px;\n                     width: 100%;\n                     top: 0;\n                     left: 0;\n                     opacity: 0;\n                     pointer-events: none;\n                     transition: 0.25s ease;\n                     color: #333;\n                 }\n                 .search-jumper-input svg,\n                 .searchJumperNavBar svg {\n                     width: 25px;\n                     height: 25px;\n                     fill: white;\n                     cursor: pointer;\n                     opacity: 0.8;\n                     transition: 0.25s all ease;\n                     font-size: 0px;\n                 }\n                 .search-jumper-input .inputGroup:hover svg,\n                 .searchJumperNavBar.sjNavShow svg {\n                     pointer-events: all;\n                 }\n                 .search-jumper-input svg *,\n                 .searchJumperNavBar svg * {\n                     cursor: pointer;\n                 }\n                 .search-jumper-input svg:hover,\n                 .searchJumperNavBar svg:hover,\n                 .search-jumper-input>.closeBtn:hover,\n                 .searchJumperNavBar>div.minNavBtn:hover,\n                 .searchJumperNavBar>div.maxNavBtn:hover {\n                     -webkit-transform:scale(1.2);\n                     -moz-transform:scale(1.2);\n                     transform:scale(1.2);\n                     opacity: 1;\n                 }\n                 #search-jumper.selectedEle #filterSites>.svgBtns>svg {\n                     display: inline-block!important;\n                 }\n                 .search-jumper-input>.closeBtn {\n                     position: absolute;\n                     right: 0px;\n                     top: -35px;\n                     width: 30px;\n                     height: 30px;\n                     vertical-align: middle;\n                     overflow: hidden;\n                     background: rgb(51 56 59 / 90%);\n                     color: white;\n                     text-align: center;\n                     line-height: 30px;\n                     border-radius: 20px;\n                     pointer-events: all;\n                     transition: 0.25s all ease;\n                     opacity: 0.6;\n                     font-size: 26px;\n                     box-shadow: 0px 0px 2px rgb(0 0 0 / 80%);\n                     border: 1px solid rgb(179 179 179 / 20%);\n                     cursor: pointer;\n                     user-select: none;\n                 }\n                 #searchInPage>.lockWords {\n                     max-width: 50%;\n                     position: absolute;\n                     bottom: 4px;\n                     left: 16px;\n                     color: white;\n                     font-size: 18px;\n                     display: flex;\n                     flex-wrap: wrap-reverse;\n                     max-height: 38px;\n                     overflow: hidden;\n                 }\n                 #searchInPage>.lockWords:hover {\n                     overflow-y: auto;\n                     height: auto;\n                     max-height: 90vh;\n                 }\n                 #searchInPage>.lockWords>span {\n                     position: relative;\n                     padding: 5px;\n                     cursor: pointer;\n                     user-select: none;\n                     background: yellow;\n                     color: black;\n                     border: 1px solid;\n                     margin: 2px;\n                     display: flex;\n                     align-items: center;\n                     white-space: nowrap;\n                     max-width: 100%;\n                     line-height: initial;\n                 }\n                 #searchInPage>.lockWords>span>em {\n                     cursor: alias;\n                 }\n                 #searchInPage>.lockWords .lockWordTool {\n                     position: absolute;\n                     right: 0;\n                     top: 0;\n                     display: none;\n                     opacity: 0.3;\n                     height: 15px;\n                     width: 15px;\n                     text-align: center;\n                     line-height: 15px;\n                     border-radius: 50%;\n                     background: black;\n                     color: white;\n                 }\n                 #searchInPage>.lockWords .lockWordTool>span {\n                     cursor: pointer;\n                     font-size: 15px;\n                 }\n                 #searchInPage>.lockWords .modifyBtn {\n                     top: unset;\n                     bottom: 0;\n                 }\n                 #searchInPage>.lockWords .lockWordTool:hover {\n                     opacity: 1;\n                 }\n                 #searchInPage>.lockWords>span:hover .lockWordTool {\n                     display: block;\n                     pointer-events: all;\n                 }\n                 #searchInPage>.lockWords .lockWordTool>svg {\n                     width: 15px;\n                     height: 15px;\n                     fill: black;\n                     color: black;\n                     border: 1px solid white;\n                     border-radius: 10px;\n                     background: white;\n                 }\n                 #searchInPage>.lockWords>span>em {\n                     font-size: 12px;\n                     margin-right: 5px;\n                     color: unset;\n                 }\n                 .searchJumperNavBar {\n                     all: unset;\n                     top: 0px;\n                     bottom: 0px;\n                     right: 0px;\n                     position: fixed;\n                     width: 20px;\n                     z-index: 2147483647;\n                     background: #00000026;\n                     text-align: center;\n                     pointer-events: none;\n                     font-size: 0px;\n                     opacity: 0;\n                     transition: width 0.3s, background 0.3s;\n                 }\n                 .searchJumperNavBar:hover {\n                     width: 25px;\n                     background: #00000066;\n                 }\n                 .searchJumperNavBar.sjNavShow {\n                     pointer-events: all;\n                     opacity: 1;\n                 }\n                 .search-jumper-showall > .searchJumperNavBar.sjNavShow {\n                     opacity: 0;\n                 }\n                 .searchJumperNavBar>.closeNavBtn {\n                     width: 16px;\n                     height: 16px;\n                     fill: white;\n                     cursor: pointer;\n                     display: inline-block;\n                 }\n                 .searchJumperNavBar>.minNavBtn,\n                 .searchJumperNavBar>.maxNavBtn {\n                     font-size: 12px;\n                     font-weight: bold;\n                     font-family: system-ui;\n                     line-height: 16px;\n                     opacity: 0.1;\n                     background: white;\n                     color: black;\n                     border-radius: 10px;\n                     width: 16px;\n                     height: 16px;\n                     display: inline-block;\n                     cursor: pointer;\n                     transition: 0.25s opacity ease, 0.25s transform ease;\n                 }\n                 .searchJumperNavBar:hover>.minNavBtn,\n                 .searchJumperNavBar:hover>.maxNavBtn {\n                     opacity: 0.8;\n                 }\n                 #search-jumper>.searchJumperNavBar.minimize {\n                     background: transparent;\n                     pointer-events: none;\n                 }\n                 .searchJumperNavBar.minimize>.closeNavBtn,\n                 .searchJumperNavBar.minimize>.navPointer,\n                 .searchJumperNavBar.minimize>.maxNavBtn,\n                 .searchJumperNavBar.minimize>#navMarks {\n                     display: none;\n                 }\n                 .searchJumperNavBar.minimize>.minNavBtn {\n                     opacity: 1;\n                     box-shadow: 0px 0px 3px 1px #000;\n                     margin-left: -50px;\n                     margin-top: 5px;\n                     pointer-events: all;\n                 }\n                 .search-jumper-right>.searchJumperNavBar.minimize>.minNavBtn {\n                     margin-left: unset;\n                     margin-right: -50px;\n                 }\n                 #navMarks+.navPointer {\n                     pointer-events: none;\n                     position: absolute;\n                     right: 20px;\n                     text-shadow: #fff 1px 0 0, #fff 0 1px 0, #fff -1px 0 0, #fff 0 -1px 0;\n                     font-size: 30px;\n                     font-family: system-ui;\n                     line-height: 0px;\n                     border: 0;\n                     margin-top: 0;\n                     opacity: 0.8;\n                     color: black;\n                     transition: top 0.25s ease;\n                     animation-name: changeHor;\n                     animation-duration: 1s;\n                     animation-iteration-count: infinite;\n                     animation-timing-function: ease-in-out;\n                 }\n                 @keyframes changeHor {\n                     0%   {right: 20px;}\n                     10%  {right: 18px;}\n                     80%  {right: 25px;}\n                     100% {right: 20px;}\n                 }\n                 #navMarks {\n                     height: calc(100% - 50px);\n                     width: 100%;\n                     position: relative;\n                 }\n                 #navMarks>span {\n                     height: 0.5vh;\n                     width: 100%;\n                     position: absolute;\n                     border: 1px solid #cccccc;\n                     min-height: 5px;\n                     box-sizing: border-box;\n                     left: 0;\n                     border-radius: 0px!important;\n                     cursor: alias;\n                 }\n                 .searchJumperPosBar {\n                     background: rgba(29, 93, 163, 0.3);\n                     position: absolute;\n                     min-height: 10px;\n                     min-width: 10px;\n                     animation-duration: 2s;\n                     z-index: 2147483647;\n                     margin: 0;\n                     opacity: 0;\n                     pointer-events: none;\n                     transition: 0.25s all ease;\n                 }\n                 .searchJumperPosBar.searchJumperPosW {\n                     width: 100%;\n                     left: 0;\n                 }\n                 .searchJumperPosBar.searchJumperPosH {\n                     height: 100%;\n                     top: 0;\n                     position: fixed;\n                 }\n                 @keyframes fadeit {\n                     0% {opacity: 1;}\n                     50% {opacity: 0.8;}\n                     100% {opacity: 0;}\n                 }\n                 #rightSizeChange {\n                     top: 0;\n                     opacity: 0;\n                     height: 45px;\n                     width: 15px;\n                     position: absolute;\n                     cursor: e-resize;\n                     right: 0;\n                     pointer-events: all;\n                 }\n                 .searchJumper-hide {\n                     display: none!important;\n                 }\n                 .search-jumper-historylist>a.search-jumper-btn {\n                     filter: drop-shadow(0px 0px 3px #00000050);\n                     width: 32px;\n                     height: 32px;\n                     line-height: 32px;\n                     min-width: auto;\n                     min-height: auto;\n                     flex-shrink: 0;\n                 }\n                 .search-jumper-historylist>a.search-jumper-btn>img {\n                     width: 32px;\n                     height: 32px;\n                 }\n                 .search-jumper-historylist>a.search-jumper-btn:not(.search-jumper-word)>span {\n                     font-size: 12px;\n                     line-height: normal;\n                 }\n                 #search-jumper .listArrow {\n                     width: 0;\n                     height: 0;\n                     border: 10px solid transparent;\n                     pointer-events: none;\n                     border-bottom-color: white;\n                     position: fixed;\n                     opacity: 0;\n                     visibility: hidden;\n                     z-index: 2147483647;\n                     transition: opacity .3s ease, top .15s, bottom .15s, left .15s, right .15s;\n                 }\n                 #search-jumper.search-jumper-left .listArrow {\n                     border-bottom-color: transparent;\n                     border-right-color: white;\n                 }\n                 #search-jumper.search-jumper-right .listArrow {\n                     border-bottom-color: transparent;\n                     border-left-color: white;\n                 }\n                 #search-jumper.search-jumper-bottom .listArrow {\n                     border-bottom-color: transparent;\n                     border-top-color: white;\n                 }\n                 @media (prefers-color-scheme: dark) {\n                     /* 站点列表 */\n                     #search-jumper .sitelist > .sitelistCon > p {\n                         background-color: #252B32 !important;\n                     }\n                     #search-jumper.search-jumper-showall #filterSites {\n                         background-color: #2a282cc0;\n                     }\n                     #search-jumper.search-jumper-showall #filterSites>input,\n                     #search-jumper.search-jumper-showall #filterSites>textarea {\n                         background-color: #000000;\n                         color: white;\n                     }\n\n                     #search-jumper .sitelist > .sitelistCon {\n                         background-color: #1C2127ee !important;\n                     }\n\n                     #search-jumper .sitelist > .sitelistCon > div:hover {\n                         background-color: #283C57 !important;\n                     }\n\n                     #search-jumper .sitelist > .sitelistCon > p,\n                     #search-jumper .sitelist a > p {\n                         color: #DADADA !important;\n                     }\n                     #search-jumper .listArrow {\n                         border-bottom-color: #1C2127;\n                     }\n                     #search-jumper.search-jumper-left .listArrow {\n                         border-bottom-color: transparent;\n                         border-right-color: #1C2127;\n                     }\n                     #search-jumper.search-jumper-right .listArrow {\n                         border-bottom-color: transparent;\n                         border-left-color: #1C2127;\n                     }\n                     #search-jumper.search-jumper-bottom .listArrow {\n                         border-bottom-color: transparent;\n                         border-top-color: #1C2127;\n                     }\n\n                     /* 历史列表 */\n                     .search-jumper-historylistcon {\n                         background-color: #181C20e0 !important;\n                     }\n\n                     .search-jumper-historylist>a.search-jumper-btn {\n                         filter: drop-shadow(0px 0px 3px #ffffff50);\n                     }\n\n                     .search-jumper-showall a.search-jumper-word,\n                     .search-jumper-showall a.search-jumper-word > span {\n                         background-color: #292A2D !important;\n                         border-radius: 20px !important;\n                     }\n\n                     .search-jumper-tips {\n                         background-color: #3F4042f0;\n                         color: #DADADA;\n                     }\n                     .search-jumper-tips>*:not(font) {\n                         color: white;\n                     }\n\n                     .search-jumper-showall a.search-jumper-word > span {\n                         color: #DADADA !important;\n                     }\n\n                     .search-jumper-showall .search-jumper-word:hover {\n                         text-shadow: 0px 0px 5px #2374FF !important;\n                     }\n\n                     /* 类别 */\n                     .search-jumper-showall .search-jumper-type,\n                     .search-jumper-showall .search-jumper-logo {\n                         background-color: #181C20 !important;\n                     }\n\n                     #search-jumper.search-jumper-showall>.groupTab {\n                         background: #1C2127ee !important;\n                     }\n                     #search-jumper.search-jumper-showall>.groupTab>span:hover{\n                         background: #283C57 !important;\n                     }\n                     #search-jumper.search-jumper-showall>.groupTab:hover>span::after {\n                         color: white;\n                     }\n                 }\n                 `,this.inPageCss="\n                 mark.searchJumper,\n                 a.searchJumper {\n                     visibility: inherit;\n                     font-style: normal;\n                     box-shadow: rgba(0, 0, 0, 0.3) 1px 1px 3px;\n                     border-radius: 3px;\n                     text-decoration: none;\n                     padding: 1px 0;\n                     -webkit-text-fill-color: initial;\n                     text-shadow: initial;\n                     min-width: initial;\n                     display: inline;\n                 }\n                 mark.searchJumper:before,\n                 a.searchJumper:before,\n                 mark.searchJumper:after,\n                 a.searchJumper:after {\n                     all: unset;\n                     content: none!important;\n                 }\n                 mark.searchJumper[data-current=true],\n                 a.searchJumper[data-current=true] {\n                     border-bottom: 0.2em solid;\n                     border-bottom-left-radius: 0;\n                     border-bottom-right-radius: 0;\n                     animation: 0.5s linear 0s 5 normal none running currentMark;\n                 }\n                 @keyframes currentMark {\n                     from {border-color: unset}\n                     to {border-color: transparent;}\n                 }\n                ",p.prefConfig.cssText&&(Se+=p.prefConfig.cssText);let t=document.createElement("span");t.className="search-jumper-logo",(U=document.createElement("span")).innerHTML=S(we),U.className="search-jumper-btn",t.addEventListener("mouseenter",(e=>{this.preList&&(this.preList.style.visibility="hidden",this.listArrow.style.cssText="")})),t.appendChild(U);let n=document.createElement("span");n.className="search-jumper-searchBar",n.appendChild(t);let r=document.createElement("div");r.id="search-jumper",r.style.display="none",r.className="search-jumper-searchBarCon",r.appendChild(n),r.setAttribute("translate","no");let i=document.createElement("div");i.id="search-jumper-alllist",r.appendChild(i),this.alllist=i;let s=document.createElement("span");s.className="groupTab",r.appendChild(s),this.groupTab=s;let a=document.createElement("div");a.className="search-jumper-showallBg",r.appendChild(a);let o=document.createElement("div");o.className="sitelistBox",i.appendChild(o),this.sitelistBox=o;const c=/#[^\s#]+/g;o.addEventListener("mouseover",(t=>{if(!i.classList.contains("new-mode"))return;let n=t.target;n.parentNode&&n.parentNode.dataset.name&&(n=n.parentNode);let r=n.title;if(!n.dataset.name||!r||n.initedTag)return;let s=document.createElement("p"),a=r.match(c);a&&(a.forEach((t=>{let n=document.createElement("span");n.innerText=t.slice(1),n.addEventListener("click",(n=>{e.searchInput.value=t,e.searchInput.dispatchEvent(new CustomEvent("input"))})),s.appendChild(n)})),n.appendChild(s)),n.initedTag=!0}));let d=document.createElement("span");d.className="timeInAll",i.appendChild(d),this.timeInAll=d,this.modeSwitch=document.createElement("div"),this.modeSwitch.className="modeSwitch",this.modeSwitch.innerHTML=S('<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" version="1.1"><rect height="450" width="520" y="287" x="253" fill="#fff"></rect><path d="m511.8,64.2c-247.5,0 -448.2,200.7 -448.2,448.2s200.7,448.2 448.2,448.2s448.2,-200.6 448.2,-448.2s-200.7,-448.2 -448.2,-448.2zm-260.4,353.9c0,-7.8 6.3,-14.2 14.2,-14.2l315.6,0l0,-102.5c0,-12.3 14.7,-18.8 23.7,-10.4l165.1,151.7c9.5,8.7 3.3,24.6 -9.6,24.6l-495,0c-7.8,0 -14.2,-6.3 -14.2,-14.2l0,-35l0.2,0zm523.2,188.5c0,7.8 -6.3,14.2 -14.2,14.2l-315.5,0l0,102.6c0,12.3 -14.7,18.8 -23.7,10.4l-165.2,-151.8c-9.5,-8.7 -3.3,-24.6 9.6,-24.6l495,0c7.8,0 14.2,6.3 14.2,14.2l0,35l-0.2,0z"></path></svg>'),i.appendChild(this.modeSwitch),this.modeSwitch.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),i.classList.toggle("new-mode"),i.classList.remove("showbg"),N.setItem("allPageNewMode",i.classList.contains("new-mode"))})),this.modeSwitch.addEventListener("mouseenter",(e=>{he&&(e.preventDefault(),e.stopPropagation(),i.classList.add("showbg"))})),this.modeSwitch.addEventListener("mouseleave",(e=>{he&&(e.preventDefault(),e.stopPropagation(),i.classList.remove("showbg"))})),this.modeSwitch.addEventListener("contextmenu",(e=>{he&&(e.preventDefault(),e.stopPropagation(),i.classList.remove("showbg"),b(he,{active:!0,insert:!0}))})),ye&&i.classList.add("new-mode");let f=document.createElement("span");f.className="dayInAll",i.appendChild(f),this.dayInAll=f,i.addEventListener(Qe(),(t=>{if(e.tips.style.display="none",clearTimeout(e.requestShowTipsTimer),(t.target==i||t.target==a||t.target==o)&&!i.classList.contains("new-mode")){var n;if("wheel"!==t.type){var r=0,s=0;"number"==typeof t.axis?2==t.axis?s=t.detail:r=t.detail:void 0===t.wheelDeltaY||0!=t.wheelDeltaY?s=-t.wheelDelta/40:r=-t.wheelDelta/40,n=s}else t.deltaX,n=t.deltaY;t.preventDefault(),t.stopPropagation(),i.scrollLeft+=n}}),{passive:!1,capture:!1});let g=document.createElement("span");g.innerHTML=S(we),g.className="search-jumper-btn",g.addEventListener("click",(e=>{b(l,{active:!0,insert:!0})})),i.appendChild(g);let y=document.createElement("div");y.className="search-jumper-historylistcon",i.appendChild(y);let v=document.createElement("div");if(v.className="search-jumper-historylist",y.appendChild(v),this.historylist=v,n.addEventListener("mouseenter",(e=>{n.classList.contains("grabbing")||(this.hideTimeout&&clearTimeout(this.hideTimeout),this.checkScroll(!0),p.prefConfig.mouseLeaveToHide&&n.classList.remove("initShow"))}),!1),n.addEventListener("mouseleave",(t=>{if(p.prefConfig.mouseLeaveToHide){if(n.classList.contains("grabbing"))return;e.waitForHide()}e.preList&&(e.preList.style.visibility="hidden",e.listArrow.style.cssText="")}),!1),this.touched=!0,p.prefConfig.initShow?n.classList.add("initShow"):this.touched=!1,p.prefConfig.minSizeMode&&(n.classList.add("minSizeMode"),n.classList.add("minSizeModeClose")),m&&!p.prefConfig.resizePage){let e=e=>{this.touched=!1,n.classList.remove("initShow")},t=e=>{this.touched||this.funcKeyCall||(this.touched=!0,n.classList.add("disable-pointer"),e.stopPropagation(),setTimeout((()=>{n.classList.remove("disable-pointer")}),250))};W(document).addEventListener("touchstart",e,{passive:!0,capture:!1}),n.addEventListener("touchstart",t,{passive:!1,capture:!0})}this.bar=n,this.con=r;let x=document.createElement("span");x.className="search-jumper-tips",x.style.opacity=0,r.appendChild(x),x.addEventListener("mouseenter",(t=>{e.hideTimeout&&clearTimeout(e.hideTimeout)}),!1),x.addEventListener("click",(t=>{let n=t.target.dataset,r=t.target.innerText;if(n){if(void 0!==n.read){let e=new SpeechSynthesisUtterance("");e.volume=n.volume||1,e.rate=n.rate||1,e.pitch=n.pitch||1,e.lang=n.lang||"",e.text=n.read||r,window.speechSynthesis.speak(e)}void 0!==n.copy&&w(n.copy||r),n.search&&(tt=r,e.searchBySiteName(n.search)),void 0!==n.paste&&Ie&&(/INPUT|TEXTAREA/i.test(Ie.nodeName)&&"true"!=Ie.getAttribute("aria-readonly")||"true"==Ie.contentEditable)&&De(Ie,n.paste||r),void 0!==n.close&&(e.tips.style.opacity=0,e.tips.style.display="none",e.tips.innerHTML=S(""))}}),!1);let C,j,k=e=>{let t=J(e)-C.x,n=D(e)-C.y;Math.abs(t)+Math.abs(n)<5||(""===x.style.right?x.style.setProperty("left",j.left+t+"px","important"):x.style.setProperty("right",j.right-t+"px","important"),""===x.style.bottom?x.style.setProperty("top",j.top+n+"px","important"):x.style.setProperty("bottom",j.bottom-n+"px","important"),x.classList.add("draging"))},I=e=>{document.removeEventListener("mouseup",I,!1),document.removeEventListener("mousemove",k,!1),document.removeEventListener("touchend",I,!1),document.removeEventListener("touchmove",k,!1),x.classList.remove("draging")},T=(e,t)=>{if(!e.target)return;if(e.target!==x&&void 0===e.target.dataset.drag)return;e.preventDefault(),e.stopPropagation(),C={x:J(e),y:D(e)};let n=getComputedStyle(x);j={left:parseFloat(n.left),right:parseFloat(n.right),top:parseFloat(n.top),bottom:parseFloat(n.bottom)},t&&t()};x.addEventListener("mousedown",(e=>{T(e,(()=>{document.addEventListener("mouseup",I,!1),document.addEventListener("mousemove",k,!1)}))}),!1),x.addEventListener("touchstart",(e=>{T(e,(()=>{document.addEventListener("touchend",I,!1),document.addEventListener("touchmove",k,!1)}))}),{passive:!1,capture:!1}),this.tips=x;let E=document.createElement("div");E.className="searchJumperNavBar",E.style.display="none",E.innerHTML=S(`\n                  <svg class="closeNavBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>Close navigation</title>${Ce}</svg>\n                  <div class="minNavBtn" title="Minimize navigation">-</div>\n                  <div id="navMarks"></div>\n                  <div class="maxNavBtn" title="Restore input"><img src="${be}" /></div>\n                  <div class="navPointer">></div>\n                `),r.appendChild(E);let L=document.createElement("span");L.title=u("expand"),L.className="searchJumperExpand search-jumper-btn",L.innerHTML=S('\n                <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><rect height="450" width="600" y="300" x="200" fill="#fff"></rect><path d="M512 64C264.8 64 64 264.8 64 512s200.8 448 448 448 448-200.8 448-448S759.2 64 512 64z m0 640L240 432l45.6-45.6L512 613.6l226.4-226.4 45.6 45.6L512 704z"></path></svg>\n                '),this.searchJumperExpand=L,this.navMarks=E.querySelector("#navMarks"),this.closeNavBtn=E.querySelector(".closeNavBtn"),this.minNavBtn=E.querySelector(".minNavBtn"),this.maxNavBtn=E.querySelector(".maxNavBtn"),this.searchJumperNavBar=E,this.navPointer=E.querySelector(".navPointer"),this.navPointer.style.display="none";let P=document.createElement("div");P.className="search-jumper-input",P.innerHTML=S(`<span class="closeBtn">×</span>\n                <input type="radio" id="filterSitesTab" name="tab" ${p.prefConfig.defaultFindTab?"":'checked="checked"'} />\n                <label for="filterSitesTab">${u("filterSites")}</label>\n                <input type="radio" id="searchInPageTab" name="tab" ${p.prefConfig.defaultFindTab?'checked="checked"':""} />\n                <label for="searchInPageTab">${u("searchInPage")}</label>\n                <div class="line"></div>\n                <div class="content-container">\n                  <div class="inputGroup" id="filterSites">\n                    <input spellcheck="false" id="searchJumperInput" autocomplete="on" title="${u("inputTitle")}" placeholder="${u("inputPlaceholder")}" list="filterGlob" />\n                    <input spellcheck="false" id="searchJumperInputKeyWords" autocomplete="on" placeholder="${u("inputKeywords")}" list="suggest" />\n                    <datalist id="filterGlob">\n                    </datalist>\n                    <datalist id="suggest">\n                    </datalist>\n                    <span class="search-jumper-lock-input"></span>\n                    <span class="svgBtns">\n                      <svg id="copyEleBtn" style="display:none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("copyEleBtn")}</title><path d="M706.5 188.4H190.2c-29.8 0-54 24.2-54 54v662.9c0 29.8 24.2 54 54 54h516.3c29.8 0 54-24.2 54-54V242.4c0-29.8-24.2-54-54-54z m-18 698.9H208.2V260.4h480.3v626.9zM313.7 512.2h275.2c19.9 0 36-16.1 36-36s-16.1-36-36-36H313.7c-19.9 0-36 16.1-36 36s16.1 36 36 36zM313.7 715.2h201.6c19.9 0 36-16.1 36-36s-16.1-36-36-36H313.7c-19.9 0-36 16.1-36 36s16.1 36 36 36zM837.2 64.7H302.9c-19.9 0-36 16.1-36 36s16.1 36 36 36h516.3v662.9c0 19.9 16.1 36 36 36s36-16.1 36-36V118.7c0-29.8-24.2-54-54-54z"></path></svg>\n                      <svg id="openLinkBtn" style="display:none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("openLinkBtn")}</title><path d="M429.013333 640A32 32 0 0 1 384 594.986667l37.76-37.76-22.826667-22.613334-135.68 135.68 90.453334 90.453334 135.68-135.68-22.613334-22.613334zM534.613333 398.933333l22.613334 22.613334L594.986667 384A32 32 0 0 1 640 429.013333l-37.76 37.76 22.613333 22.613334 135.68-135.68-90.453333-90.453334z"/><path d="M512 21.333333a490.666667 490.666667 0 1 0 490.666667 490.666667A490.666667 490.666667 0 0 0 512 21.333333z m316.8 354.986667l-181.12 181.12a32 32 0 0 1-45.226667 0L557.226667 512 512 557.226667l45.226667 45.226666a32 32 0 0 1 0 45.226667l-181.12 181.12a32 32 0 0 1-45.226667 0l-135.68-135.68a32 32 0 0 1 0-45.226667l181.12-181.12a32 32 0 0 1 45.226667 0L466.773333 512 512 466.773333l-45.226667-45.226666a32 32 0 0 1 0-45.226667l181.12-181.12a32 32 0 0 1 45.226667 0l135.68 135.68a32 32 0 0 1 0 45.226667z"/></svg>\n                      <svg id="maxEleBtn" style="display:none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("maxEleBtn")}</title><path d="M192 832h160a32 32 0 0 1 0 64H160a32 32 0 0 1-32-32V672a32 32 0 0 1 64 0zM182.72 886.72a32 32 0 0 1-45.44-45.44l224-224a32 32 0 0 1 45.44 45.44zM832 832V672a32 32 0 0 1 64 0v192a32 32 0 0 1-32 32H672a32 32 0 0 1 0-64zM886.72 841.28a32 32 0 0 1-45.44 45.44l-224-224a32 32 0 0 1 45.44-45.44zM192 192v160a32 32 0 0 1-64 0V160a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64zM137.28 182.72a32 32 0 0 1 45.44-45.44l224 224a32 32 0 0 1-45.44 45.44zM832 192H672a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0zM841.28 137.28a32 32 0 1 1 45.44 45.44l-224 224a32 32 0 0 1-45.44-45.44z"></path></svg>\n                      <svg id="minEleBtn" style="display:none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("minEleBtn")}</title><path d="M672 352h160a32 32 0 0 1 0 64H640a32 32 0 0 1-32-32V192a32 32 0 0 1 64 0zM662.72 406.72a32 32 0 0 1-45.44-45.44l224-224a32 32 0 1 1 45.44 45.44zM352 352V192a32 32 0 0 1 64 0v192a32 32 0 0 1-32 32H192a32 32 0 0 1 0-64zM406.72 361.28a32 32 0 0 1-45.44 45.44l-224-224a32 32 0 0 1 45.44-45.44zM672 672v160a32 32 0 0 1-64 0V640a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64zM617.28 662.72a32 32 0 0 1 45.44-45.44l224 224a32 32 0 0 1-45.44 45.44zM192 672a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V672zM361.28 617.28a32 32 0 0 1 45.44 45.44l-224 224a32 32 0 0 1-45.44-45.44z"></path></svg>\n                      <svg id="pickerBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("multiPickerBtn")}</title><path d="M874.048 533.333333C863.424 716.629333 716.629333 863.424 533.333333 874.048V917.333333a21.333333 21.333333 0 0 1-42.666666 0v-43.285333C307.370667 863.424 160.576 716.629333 149.952 533.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666666h43.285333C160.576 307.370667 307.370667 160.576 490.666667 149.952V106.666667a21.333333 21.333333 0 0 1 42.666666 0v43.285333c183.296 10.624 330.090667 157.418667 340.714667 340.714667h42.816a21.333333 21.333333 0 1 1 0 42.666666H874.026667z m-42.752 0h-127.786667a21.333333 21.333333 0 0 1 0-42.666666h127.786667C820.778667 330.922667 693.056 203.221333 533.333333 192.704V320a21.333333 21.333333 0 0 1-42.666666 0V192.704C330.922667 203.221333 203.221333 330.944 192.704 490.666667H320a21.333333 21.333333 0 0 1 0 42.666666H192.704c10.517333 159.744 138.24 287.445333 297.962667 297.962667V704a21.333333 21.333333 0 0 1 42.666666 0v127.296c159.744-10.517333 287.445333-138.24 297.962667-297.962667zM512 554.666667a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z"></path></svg>\n                    </span>\n                  </div>\n                  <div class="inputGroup" id="searchInPage">\n                    <span class="lockWords"></span>\n                    <input spellcheck="false" id="searchJumperInPageInput" autocomplete="on" title="${u("inPageTips")}" placeholder="${u("inPagePlaceholder")}" />\n                    <span class="svgBtns">\n                      <svg id="editBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("editBtn")}</title><path d="M928 365.664a32 32 0 0 0-32 32V864a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h429.6a32 32 0 0 0 0-64H160a96 96 0 0 0-96 96v704a96 96 0 0 0 96 96h704a96 96 0 0 0 96-96V397.664a32 32 0 0 0-32-32z"></path><path d="M231.616 696.416a38.4 38.4 0 0 0 44.256 53.792l148-38.368L950.496 185.248 814.72 49.472 290.432 573.76l-58.816 122.656z m111.808-85.12L814.72 140l45.248 45.248-468.992 468.992-77.824 20.16 30.272-63.104z"></path></svg>\n                      <svg id="addWord" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("addWord")}</title><path d="M821.364 962h-618.75C123.864 962 62 900.114 62 821.364v-618.75c0-78.75 61.864-140.635 140.614-140.635h618.75c78.75 0 140.636 61.885 140.636 140.635v618.75C962 900.114 900.114 962 821.364 962z m79.265-756.814c0-46.586-35.25-81.815-81.815-81.815H205.186c-46.843-0.214-84.557 34.758-83.165 82.393-0.128 14.4 1.35 613.05 1.35 613.05 0 46.565 35.25 81.815 81.815 81.815h613.628c46.565 0 81.815-35.25 81.815-81.815V205.186z m-173.55 347.657H552.843v174.236c0 16.95-13.736 30.685-30.686 30.685h-0.236a30.686 30.686 0 0 1-30.685-30.685V552.843H296.92a30.686 30.686 0 0 1-30.685-30.686v-0.236c0-16.95 13.735-30.685 30.685-30.685h194.315V296.92c0-16.95 13.735-30.685 30.685-30.685h0.236c16.95 0 30.686 13.735 30.686 30.685v194.315h174.236c16.95 0 30.685 13.735 30.685 30.685v0.236c0 16.95-13.735 30.686-30.685 30.686z"></path></svg>\n                      <svg id="emptyBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("emptyBtn")}</title><path d="m159.45829,231.40004l-48.83334,0a36.625,34.1375 0 0 1 0,-68.275l805.75004,0a36.625,34.1375 0 0 1 0,68.275l-683.6667,0l0,603.09581a61.04167,56.89583 0 0 0 61.04167,56.89584l439.50002,0a61.04167,56.89583 0 0 0 61.04167,-56.89584l0,-500.68332a36.625,34.1375 0 0 1 73.25,0l0,500.68332c0,69.12844 -60.12604,125.17084 -134.29167,125.17084l-439.50002,0c-74.16563,0 -134.29167,-56.0424 -134.29167,-125.17084l0,-603.09581zm256.37501,-113.79167a36.625,34.1375 0 0 1 0,-68.275l195.33334,0a36.625,34.1375 0 0 1 0,68.275l-195.33334,0zm-36.625,307.23749a36.625,34.1375 0 0 1 73.25,0l0,273.09999a36.625,34.1375 0 0 1 -73.25,0l0,-273.09999zm195.33334,0a36.625,34.1375 0 0 1 73.25,0l0,273.09999a36.625,34.1375 0 0 1 -73.25,0l0,-273.09999z"/></svg>\n                      <svg id="copyInPageBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("copyInPageBtn")}</title><path d="M706.5 188.4H190.2c-29.8 0-54 24.2-54 54v662.9c0 29.8 24.2 54 54 54h516.3c29.8 0 54-24.2 54-54V242.4c0-29.8-24.2-54-54-54z m-18 698.9H208.2V260.4h480.3v626.9zM313.7 512.2h275.2c19.9 0 36-16.1 36-36s-16.1-36-36-36H313.7c-19.9 0-36 16.1-36 36s16.1 36 36 36zM313.7 715.2h201.6c19.9 0 36-16.1 36-36s-16.1-36-36-36H313.7c-19.9 0-36 16.1-36 36s16.1 36 36 36zM837.2 64.7H302.9c-19.9 0-36 16.1-36 36s16.1 36 36 36h516.3v662.9c0 19.9 16.1 36 36 36s36-16.1 36-36V118.7c0-29.8-24.2-54-54-54z"></path></svg>\n                      <svg id="wordModeBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("wordModeBtn")}</title><path d="M832 128c38.4 0 64 25.6 64 64v640c0 38.4-25.6 64-64 64H192c-38.4 0-64-25.6-64-64V192c0-38.4 25.6-64 64-64h640m0-64H192c-70.4 0-128 57.6-128 128v640c0 70.4 57.6 128 128 128h640c70.4 0 128-57.6 128-128V192c0-70.4-57.6-128-128-128z"></path><path d="M736 812.8h-448c-19.2 0-32-12.8-32-32s12.8-32 32-32h448c19.2 0 32 12.8 32 32 0 12.8-12.8 32-32 32zM320 704c-19.2-6.4-25.6-25.6-19.2-44.8l185.6-454.4c6.4-12.8 25.6-19.2 38.4-12.8 19.2 6.4 25.6 25.6 19.2 44.8l-185.6 454.4c-6.4 12.8-25.6 19.2-38.4 12.8z"></path><path d="M704 691.2c19.2-6.4 25.6-25.6 19.2-44.8L544 211.2c-6.4-19.2-25.6-25.6-38.4-19.2-19.2 6.4-25.6 25.6-19.2 38.4l179.2 441.6c6.4 19.2 25.6 25.6 38.4 19.2z"></path><path d="M371.2 492.8h256v64h-256z"></path></svg>\n                      <svg id="recoverBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("recoverBtn")}</title><path d="M502.26 289.06c-0.02 16.95 13.26 30.94 30.18 31.8 123.47 8.79 236.97 70.94 310.89 170.21 73.92 99.28 100.91 225.84 73.93 346.65-41.65-181.74-195.38-316.12-381.05-333.08-8.89-0.6-17.63 2.55-24.09 8.7a31.798 31.798 0 0 0-9.86 23.64v85.15a32.343 32.343 0 0 1-50.67 26.41L114.21 413.02a32.341 32.341 0 0 1-14.46-26.95c0-10.84 5.43-20.96 14.46-26.95L451.6 124.68a32.358 32.358 0 0 1 33.28-2.03 32.355 32.355 0 0 1 17.39 28.44v137.97h-0.01z"></path></svg>\n                      <svg id="saveRuleBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("saveRuleBtn")}</title><path d="M579.7 291.4c18.8 0 34.1-15.3 34.1-34.1v-34.1c0-18.8-15.4-34.1-34.1-34.1-18.8 0-34.1 15.3-34.1 34.1v34.1c0 18.7 15.4 34.1 34.1 34.1zM944.7 216.3L808.2 79.9c-6.8-6.8-15.3-10.2-23.9-10.2H170.4c-56.3 0-102.3 46-102.3 102.3v682.1c0 56.3 46 102.3 102.3 102.3H852.5c56.3 0 102.3-46 102.3-102.3V240.2c0.1-8.5-3.3-17-10.1-23.9zM358 137.9h307v182.5c0 11.9-10.2 22.2-22.2 22.2H380.2c-11.9 0-22.2-10.2-22.2-22.2V137.9z m358.1 750.3H306.9V652.9c0-20.5 17.1-37.5 37.5-37.5h334.2c20.5 0 37.5 17 37.5 37.5v235.3z m170.6-34.1c0 18.8-15.3 34.1-34.1 34.1h-66.5V652.9c0-58-47.7-105.7-105.7-105.7h-336c-58 0-105.7 47.7-105.7 105.7v235.3h-68.2c-18.8 0-34.1-15.3-34.1-34.1V172c0-18.8 15.3-34.1 34.1-34.1h119.4v182.5c0 49.5 40.9 90.4 90.4 90.4h262.6c49.5 0 90.4-40.9 90.4-90.4V137.9h37.5l116 116v600.2z"></path></svg>\n                      <svg id="pinBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("pinBtn")}</title><path d="m674.8822,92.83803a81.61801,81.04246 0 0 1 25.30158,17.09996l213.75757,212.46631a81.61801,81.04246 0 0 1 -24.70304,131.36982l-75.74151,33.30845l-142.09696,141.257l-11.26329,155.3854a81.61801,81.04246 0 0 1 -139.13151,51.46196l-137.98885,-137.15085l-235.14149,234.56388l-57.83996,-57.18896l235.27751,-234.69896l-142.7499,-141.85131a81.61801,81.04246 0 0 1 51.6642,-138.09635l160.95072,-11.94025l139.5668,-138.74469l32.78324,-75.09935a81.61801,81.04246 0 0 1 107.35489,-42.14208zm-32.45675,74.36997l-38.95901,89.22775l-171.94193,170.99958l-191.25821,14.1284l338.46989,336.3262l13.43977,-185.47917l174.33607,-173.32279l89.69819,-39.44067l-213.78477,-212.43929z"></path></svg>\n                      <svg id="locBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("locBtn")}</title><path d="M357.6 832l-255.2 56c-20 4.8-39.2-10.4-39.2-31.2V569.6c0-15.2 10.4-28 24.8-31.2L243.2 504l53.6 53.6L139.2 592c-7.2 1.6-12.8 8-12.8 16v188c0 10.4 9.6 17.6 19.2 16l192.8-42.4 12.8-3.2 12.8 2.4 306.4 60.8 210.4-47.2c7.2-1.6 12.8-8 12.8-16V580c0-10.4-9.6-17.6-19.2-16L688 606.4l-12 2.4L760 524.8l160.8-36c20-4.8 39.2 10.4 39.2 31.2v286.4c0 15.2-10.4 28-24.8 31.2L672.8 896M512 128c-115.2 0-206.4 101.6-190.4 220 5.6 41.6 26.4 80 56 109.6l0.8 0.8L512 591.2l133.6-132.8 0.8-0.8c29.6-29.6 49.6-68 56-109.6C719.2 229.6 627.2 128 512 128m0-64c141.6 0 256 114.4 256 256 0 70.4-28 133.6-74.4 180L512 681.6 330.4 500C284.8 453.6 256 390.4 256 320 256 178.4 371.2 64 512 64z m64.8 193.6c0-35.2-28.8-64-64-64s-64 28.8-64 64 28.8 64 64 64 64-28 64-64z"></path></svg>\n                    </span>\n                    <div id="addons"></div>\n                  </div>\n                </div>\n                <div id="rightSizeChange"></div>\n                `),r.appendChild(P),this.searchInputDiv=P,this.searchInput=P.querySelector("#searchJumperInput"),this.searchJumperInputKeyWords=P.querySelector("#searchJumperInputKeyWords"),this.searchLockInput=P.querySelector(".search-jumper-lock-input"),this.searchJumperInPageInput=P.querySelector("#searchJumperInPageInput"),this.pickerBtn=P.querySelector("#pickerBtn"),this.minEleBtn=P.querySelector("#minEleBtn"),this.maxEleBtn=P.querySelector("#maxEleBtn"),this.copyEleBtn=P.querySelector("#copyEleBtn"),this.openLinkBtn=P.querySelector("#openLinkBtn"),this.editBtn=P.querySelector("#editBtn"),this.addWord=P.querySelector("#addWord"),this.recoverBtn=P.querySelector("#recoverBtn"),this.wordModeBtn=P.querySelector("#wordModeBtn"),this.saveRuleBtn=P.querySelector("#saveRuleBtn"),this.pinBtn=P.querySelector("#pinBtn"),this.locBtn=P.querySelector("#locBtn"),this.emptyBtn=P.querySelector("#emptyBtn"),this.copyInPageBtn=P.querySelector("#copyInPageBtn"),this.closeBtn=P.querySelector(".closeBtn"),this.filterSites=P.querySelector("#filterSites"),this.filterSitesTab=P.querySelector("#filterSitesTab"),this.searchInPageTab=P.querySelector("#searchInPageTab"),this.searchInPageLockWords=P.querySelector("#searchInPage>.lockWords"),this.contentContainer=P.querySelector(".content-container"),this.rightSizeChange=P.querySelector("#rightSizeChange"),this.filterGlob=P.querySelector("#filterGlob"),this.suggestDatalist=P.querySelector("#suggest"),this.addonsList=P.querySelector("#addons"),this.fakeTextareas=new Map,this.addonCheckboxDict={}}showInPageSearch(){this.searchInPageTab.checked=!0,this.showSearchInput(),this.initSetInPageWords(),this.searchJumperInPageInput.value="",this.initShowSearchInput=!0}showFilterSearch(){this.filterSitesTab.checked=!0,this.showSearchInput()}initSetInPageWords(){if(this.searchInPageTab.checked&&!this.searchJumperInPageInput.value){let e=Ye()||this.searchJumperInputKeyWords.value.replace(/^\*/,"")||Ze();if(e)try{e=decodeURIComponent(e)}catch(e){}if(this.lockWords&&-1!==this.lockWords.indexOf(e))return;this.searchJumperInPageInput.value=e||se,this.lockWords||this.submitIgnoreSpace(this.searchJumperInPageInput.value)}}anylizeInPageWords(e,t){if(!e)return[];let n=this,r=[];if(this.lockWords||(0===e.indexOf("$c")&&e.length>2?e=e.substr(3).trim():0===e.indexOf("$o")&&(e=e.substr(2).trim())),this.splitSep){let i=this.wordModeBtn.classList.contains("checked")?new RegExp(`[\\${this.splitSep} ]`):this.splitSep;e.split(i).sort(((e,t)=>t.length-e.length)).forEach((e=>{let i=e;if(!(e=e.trim()))return;if(t){if(e.length<(p.prefConfig.limitInPageLen||1))return;if((p.prefConfig.ignoreWords||[]).includes(e.toLowerCase()))return}let s,a,o,l="",c="",h=!1,d=!1,u="",m=/\$t{(.*?)}($|\$)/,f=e.match(m),g=0;if(f)if(l=f[1],e=e.replace(m,"$2"),"\\$popup"==l)l="$popup";else if("\\@popup"==l)l="@popup";else{let e=l.match(/^[\$@]popup(\((.*)\))?$/);e&&(l="",h=!0,e[1]&&(g=e[2]||"1"))}let y=/\$p{(.*?)}($|\$)/,v=e.match(y);v&&(s=parseInt(v[1])||0,e=e.replace(y,"$2"));let w=/\$in{(.*?)}($|\$)/,b=e.match(w);b&&(o=b[1]||"",e=e.replace(w,"$2"));let x=/\$s{(.*?)}($|\$)/,C=e.match(x);if(C){let t=C[1],r="";C=C[1].match(/(.*?);(.*)/),C&&(t=C[1],r=C[2]),c=n.getHighlightStyle(n.curWordIndex,t,r),e=e.replace(x,"$2")}else c=n.getHighlightStyle(n.curWordIndex,"","");let j="";if(0===e.indexOf("@")){j=e;let t=p.prefConfig.inPageRule&&p.prefConfig.inPageRule[e];t&&(e=t)}else e=e.replace(/^\\@/,"@");let k=e.match(/^\/(.*)\/([il]*)($|\$)/);k&&(d=!0,e=k[1],u=-1!=k[2].indexOf("i")?"i":"",a=-1!=k[2].indexOf("l")),j||(j=e),n.highlightSpans[j]||(r.push({content:e,showWords:j,isRe:d,link:a,reCase:u,title:l,style:c,oriWord:i,hideParent:s,inRange:o,popup:h,showTips:g,init:t}),n.curWordIndex++)}))}else{this.curWordIndex=0;let i=(this.lockWords||"").replace(/^\$o/,"")+e;r=[{content:i,showWords:i,isRe:!1,reCase:"",title:"",style:n.getHighlightStyle(n.curWordIndex,"",""),init:t}]}return r}submitInPageWords(e){let t=this.searchJumperInPageInput.value,n=[];if(!t){if(this.lockWords){this.highlight("insert");for(let e in this.highlightSpans){let t=this.highlightSpans[e],n=this.marks[e];this.setHighlightSpan(t,0,n)}}else this.highlight("");return n}this.initHighlight=!!e,this.initHighlight&&setTimeout((()=>{this.initHighlight=!1}),500),this.lockWords||(0===t.indexOf("$c")&&t.length>2?this.splitSep=t.substr(2,1):0===t.indexOf("$o")?this.splitSep=null:this.splitSep="◎",this.curWordIndex=0),this.searchJumperInPageInput.value="";let r=this.anylizeInPageWords(t,this.initHighlight);return r&&0!=r.length?(this.lockWords?this.lockWords+=(this.lockWords.indexOf(this.splitSep)===this.lockWords.length-this.splitSep.length?"":this.splitSep)+t:this.lockWords=t,this.splitSep||(this.searchInPageLockWords.innerHTML=S(),this.highlight("")),this.highlight(r),r.forEach((e=>{if(!e)return;let t=document.createElement("span");t.innerHTML=S(e.showWords),t.title=e.title?JSON.parse('"'+e.title+'"'):e.showWords;let r=e.style.match(/background: *(#?\w+)/);r&&-1===r[1].indexOf("unset")&&(t.style.background=r[1]);let i=e.style.match(/color: *(#?\w+)/);i&&(t.style.color=i[1]),t.addEventListener("click",(e=>(e.stopPropagation(),e.preventDefault(),!1))),t.oncontextmenu=e=>{e.preventDefault()},t.addEventListener("dblclick",(n=>{n.stopPropagation(),n.preventDefault(),"EM"!==n.target.nodeName.toUpperCase()&&(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey||-1!==this.lockWords.indexOf(e.oriWord)&&this.showModifyWindow(e,t))}),!0),t.addEventListener("mousedown",(n=>{0===n.button?this.focusHighlightByText(e.showWords,!0,t):2===n.button&&this.focusHighlightByText(e.showWords,!1,t)}));let s=!1;t.addEventListener(Qe(),(n=>{if(n.preventDefault(),n.stopPropagation(),s)return;let r;if(s=!0,setTimeout((()=>{s=!1}),100),"wheel"!==n.type){let e=0;"number"==typeof n.axis?2==n.axis&&(e=n.detail):void 0!==n.wheelDeltaY&&0==n.wheelDeltaY||(e=-n.wheelDelta/40),r=e}else r=n.deltaY;this.focusHighlightByText(e.showWords,r>0,t)}),{passive:!1,capture:!1}),t.addEventListener("editword",(n=>{t.parentNode.removeChild(t),this.removeHighlightWord(e),this.searchJumperInPageInput.value=e.content}));let a=document.createElement("div");a.addEventListener("mousedown",(n=>{n.stopPropagation(),n.preventDefault(),t.parentNode.removeChild(t),this.removeHighlightWord(e)})),a.className="lockWordTool",a.innerHTML=S(`<span title="${u("removeBtn")}">×</span>`),t.appendChild(a);let o=document.createElement("div");o.addEventListener("mousedown",(n=>{n.stopPropagation(),n.preventDefault(),-1!==this.lockWords.indexOf(e.oriWord)&&this.showModifyWindow(e,t)})),o.className="lockWordTool modifyBtn",o.innerHTML=S("<span>+</span>"),t.appendChild(o);let l=this.marks[e.showWords];this.setHighlightSpan(t,-1,l),this.highlightSpans[e.showWords]=t,this.searchInPageLockWords.appendChild(t),n.push(t)})),this.searchInPageLockWords.scrollTop<=0&&(this.searchInPageLockWords.scrollTop=this.searchInPageLockWords.scrollHeight),this.searchJumperInPageInput.style.paddingLeft=this.searchInPageLockWords.clientWidth+3+"px",this.navMarks.innerHTML&&"none"===this.con.style.display&&(this.con.style.display=""),n):n}async showCustomInputWindow(e,t){return new Promise((n=>{this.customInputCallback=t;let r=()=>{let e=this.finalSearch.dataset.url;[].forEach.call(this.customGroup.children,(t=>{let n=t.value;if("select"==t.className)n=t.children[0].value;else if(/^DIV$/i.test(t.nodeName))return;e=e.replace("◎",n||"")})),this.finalSearch.value=e};if(!this.customInputFrame){let e=x('\n                         .customInputFrame-body {\n                             width: 300px;\n                             min-height: 200px;\n                             position: fixed;\n                             text-align: left;\n                             left: 50%;\n                             top: 50%;\n                             margin-top: -160px;\n                             margin-left: -150px;\n                             z-index: 2147483647;\n                             background-color: #ffffff;\n                             border: 1px solid #afb3b6;\n                             border-radius: 10px;\n                             opacity: 0.95;\n                             filter: alpha(opacity=95);\n                             box-shadow: 5px 5px 20px 0px #000;\n                             color: #6e7070;\n                             font-size: initial;\n                         }\n                         .customInputFrame-body #customGroup {\n                             max-height: 50vh;\n                             overflow: auto;\n                             scrollbar-width: none;\n                         }\n                         .customInputFrame-body #customGroup::-webkit-scrollbar {\n                             width: 0 !important;\n                             height: 0 !important;\n                         }\n                         .customInputFrame-title {\n                             background: #458bd1!important;\n                             display: flex!important;\n                             align-items: center!important;\n                             justify-content: center!important;\n                             color: white!important;\n                             font-weight: bold;\n                             font-size: 18px!important;\n                             border-radius: 10px 10px 0 0!important;\n                         }\n                         .customInputFrame-title>img {\n                             margin: 5px;\n                             height: 32px;\n                             width: 32px;\n                         }\n                         .customInputFrame-input-title {\n                             font-size: 9pt;\n                             font-family: Arial, sans-serif;\n                             display: inline-block;\n                             background-color: white;\n                             position: relative;\n                             left: 20px;\n                             padding: 0px 4px;\n                             text-align: left;\n                             color: #646464;\n                             word-break: break-all;\n                             max-width: 85%;\n                             z-index: 1;\n                         }\n                         .customInputFrame-body input[type=text],\n                         .customInputFrame-body input[type=number],\n                         .customInputFrame-body textarea,\n                         .customInputFrame-body .select {\n                             resize: both;\n                             font-size: 11pt;\n                             font-weight: normal;\n                             border-radius: 4px;\n                             border: 1px solid rgba(0, 0, 0, 0.23);\n                             margin: 4px;\n                             font-family: inherit;\n                             background-color: #FFF;\n                             width: calc(100% - 8px);\n                             color: #4A4A4A;\n                             margin-top: -8px;\n                             padding: 4px;\n                             padding-top: 8px;\n                             box-sizing: border-box;\n                         }\n                         .customInputFrame-buttons {\n                             text-align: center;\n                             margin-bottom: 5px;\n                             display: flex;\n                             justify-content: space-evenly;\n                         }\n                         .customInputFrame-buttons>button {\n                             width: 32%;\n                             font-size: 16px;\n                             cursor: pointer;\n                             border: 1px solid #1976d2;\n                             border-radius: 4px;\n                             transition: all .3s;\n                             color: #fff;\n                             background-color: #458bd1;\n                             line-height: 25px;\n                         }\n                         .customInputFrame-buttons>button:hover {\n                             color: #e3f2fd;\n                         }\n                         .customInputFrame-body .select {\n                             height: 30px;\n                             position: relative;\n                         }\n                         .customInputFrame-body .select>input[type=text] {\n                             top: 0px;\n                             left: -7px;\n                             position: relative;\n                             border: unset!important;\n                             width: calc(100% - 25px);\n                             padding-bottom: 3px;\n                             margin-bottom: -30px;\n                             float: left;\n                             background: unset;\n                             height: 28px;\n                         }\n                         .customInputFrame-body .select>p {\n                             padding: 0;\n                             margin: 0;\n                             position: absolute;\n                             pointer-events: none;\n                         }\n                         .customInputFrame-body .select>.options {\n                             position: absolute;\n                             visibility: hidden;\n                             opacity: 0;\n                             transition: opacity .1s;\n                             background-color: #FFF;\n                             color: #4A4A4A;\n                             border: 1px solid rgba(0, 0, 0, 0.23);\n                             border-radius: 4px;\n                             z-index: 10;\n                             width: auto;\n                             max-width: 35%;\n                             right: calc(50% - 147px);\n                             margin-top: -10px;\n                             position: fixed;\n                         }\n                         .customInputFrame-body .select>input:focus+p {\n                             display: none;\n                         }\n                         .customInputFrame-body .select:hover>.options {\n                             visibility: visible;\n                             opacity: 1;\n                         }\n                         .customInputFrame-body .select>.options>p {\n                             cursor: pointer;\n                             min-height: 20px;\n                             padding: 3px 0;\n                             margin: 0;\n                         }\n                         .customInputFrame-body .select>.options>p:hover {\n                             background: aliceblue;\n                         }\n                         .customInputFrame-body div.select:after {\n                             content: "▼";\n                             position: absolute;\n                             right: 6px;\n                             top: 8px;\n                             font-size: 9px;\n                         }\n                         @media (prefers-color-scheme: dark) {\n                           .customInputFrame-body,\n                           .customInputFrame-input-title,\n                           .customInputFrame-body input,\n                           .customInputFrame-body textarea,\n                           .customInputFrame-body .select {\n                             background-color: black!important;\n                             color: #d5d5d5!important;\n                           }\n                           .customInputFrame-body input:focus,\n                           .customInputFrame-body textarea:focus,\n                           .customInputFrame-body .select:focus {\n                             background-color: #1e1e1e!important;\n                           }\n                           .customInputFrame-body input,\n                           .customInputFrame-body textarea,\n                           .customInputFrame-body .select {\n                             border: 1px solid rgb(255 255 255 / 36%)!important;\n                             background-color: #0c0c0c!important;\n                           }\n                           .customInputFrame-title,\n                           .customInputFrame-buttons>button {\n                             background: #245d8f!important;\n                           }\n                           .customInputFrame-body .select>.options {\n                             border: 1px solid rgb(255 255 255 / 36%)!important;\n                             background-color: black;\n                             color: #d5d5d5;\n                           }\n                           .customInputFrame-body .select>.options>p:hover {\n                             background: #1e1e1e;\n                           }\n                         }\n                        '),t=document.createElement("div");this.customInputFrame=t,t.innerHTML=S(`\n                         <div class="customInputFrame-body">\n                             <a href="${l}" class="customInputFrame-title" target="_blank">\n                                 <img width="32px" height="32px" src="${be}" />${u("customInputFrame")}\n                             </a>\n                             <div id="customGroup">\n                             </div>\n                             <div class="customInputFrame-input-title">${u("finalSearch")}</div>\n                             <textarea name="finalSearch" type="text"></textarea>\n                             <div class="customInputFrame-buttons">\n                                 <button id="cancel" type="button">${u("cancel")}</button>\n                                 <button id="customSubmit" type="button">${u("customSubmit")}</button>\n                             </div>\n                         </div>\n                        `),I||t.appendChild(e),t.querySelector("#cancel").addEventListener("click",(e=>{t.parentNode&&t.parentNode.removeChild(t),n("")})),t.addEventListener("keydown",(e=>{13==e.keyCode&&a.click()}));let i=this.customInputFrame.querySelector("#customGroup");this.customGroup=i;let s=this.customInputFrame.querySelector("[name='finalSearch']");this.finalSearch=s,s.addEventListener("click",(e=>{r()}));let a=t.querySelector("#customSubmit");a.addEventListener("click",(e=>{r(),s.value&&this.customInputCallback&&this.customInputCallback(s.value),n(s.value),t.parentNode&&t.parentNode.removeChild(t)}))}this.customInputFrame.parentNode&&this.customInputFrame.parentNode.removeChild(this.customInputFrame),this.customGroup.innerHTML=S();let i=e,s=i.match(/%input{(.*?[^\\])}/);for(;s;){let e=s[1];if(e=/^".*","/.test(e)?e.substr(1,e.length-2).split('","'):e.replace(/\\,/g,"◎SJ").split(",").map((e=>e.replace(/◎SJ/g,","))),1===e.length){e=e[0].replace(/\\\|/g,"◎SJ").split("|").map((e=>e.replace(/◎SJ/g,"|")));let t=document.createElement("div");t.className="customInputFrame-input-title",t.innerText=e[0],this.customGroup.appendChild(t);let n=document.createElement("input");n.type="text",e.length>1&&(n.title=e[1]),this.customGroup.appendChild(n)}else if(e.length>=2){let t=e[0].replace(/\\}/g,"}");t=/^'.*'\/'/.test(t)?t.substr(1,t.length-2).split("'/'"):t.replace(/\\\//g,"◎SJ").split("/").map((e=>e.replace(/◎SJ/g,"/")));let n=e.slice(1).join(",");n=/^'.*'\/'/.test(n)?n.substr(1,n.length-2).split("'/'"):n.replace(/\\\//g,"◎SJ").split("/").map((e=>e.replace(/◎SJ/g,"/")));let i=t.length===n.length+1,s=document.createElement("div");s.className="customInputFrame-input-title",s.innerText=t[0],this.customGroup.appendChild(s);let a=document.createElement("input");a.type="text";let o=document.createElement("div");o.className="select",o.appendChild(a);let l=document.createElement("p");l.innerText="Select option",o.appendChild(l);let c=document.createElement("div");c.className="options",o.appendChild(c);let p=document.createElement("p");p.setAttribute("value",""),p.innerHTML=S("<b>Select option</b>"),c.appendChild(p),p.addEventListener("click",(e=>{c.style.visibility="hidden",setTimeout((()=>{c.style.visibility=""}),0),a.value="",l.innerText="Select option",r()}));for(let e=0;e<n.length;e++){let s=n[e],o=document.createElement("p");if(o.setAttribute("value",s),i){let n=t[e+1];n=n.replace(/\\\|/g,"◎SJ").split("|").map((e=>e.replace(/◎SJ/g,"|"))),o.innerText=n[0],n.length>1&&(o.title=n[1])}else o.innerText=s;o.addEventListener("click",(e=>{c.style.visibility="hidden",setTimeout((()=>{c.style.visibility=""}),0),a.value=o.getAttribute("value"),l.innerText="",r()})),c.appendChild(o)}a.addEventListener("change",(e=>{l.innerText=""})),o.addEventListener("mouseenter",(e=>{o.focus(),c.style.marginTop=20-this.customGroup.scrollTop+"px"})),this.customGroup.appendChild(o)}i=i.replace(s[0],"◎"),s=i.match(/%input{(.*?[^\\])}/)}this.finalSearch.dataset.url=i,this.finalSearch.value=i.replace(/◎/g,""),this.addToShadow(this.customInputFrame);let a=this.customInputFrame.children[0];a.style.marginTop=-a.offsetHeight/2+"px"}))}showModifyWindow(e,t){let n;if(this.modifyWord={},this.addNew=!e&&!t,!this.addNew){if(n=e.oriWord,!n)return;this.modifyWord=e,this.modifySpan=t}if(!this.modifyFrame){let e=x("\n                    .searchJumperModify-body {\n                        width: 300px;\n                        min-height: 200px;\n                        position: fixed;\n                        text-align: left;\n                        left: 50%;\n                        top: 50%;\n                        margin-top: -160px;\n                        margin-left: -150px;\n                        z-index: 100000;\n                        background-color: #ffffff;\n                        border: 1px solid #afb3b6;\n                        border-radius: 10px;\n                        opacity: 0.95;\n                        filter: alpha(opacity=95);\n                        box-shadow: 5px 5px 20px 0px #000;\n                        color: #6e7070;\n                    }\n                    .searchJumperModify-title {\n                        background: #458bd1!important;\n                        display: flex!important;\n                        align-items: center!important;\n                        justify-content: center!important;\n                        color: white!important;\n                        font-weight: bold;\n                        font-size: 18px!important;\n                        border-radius: 10px 10px 0 0!important;\n                    }\n                    .searchJumperModify-title>img {\n                        margin: 5px;\n                        height: 32px;\n                        width: 32px;\n                    }\n                    .searchJumperModify-input-title {\n                        font-size: 9pt;\n                        font-family: Arial, sans-serif;\n                        display: inline-block;\n                        background-color: white;\n                        position: relative;\n                        left: 20px;\n                        padding: 0px 4px;\n                        text-align: left;\n                        color: #646464;\n                    }\n                    .searchJumperModify-body>input[type=text],\n                    .searchJumperModify-body>input[type=number],\n                    .searchJumperModify-body>textarea {\n                        resize: both;\n                        font-size: 11pt;\n                        font-weight: normal;\n                        border-radius: 4px;\n                        border: 1px solid rgba(0, 0, 0, 0.23);\n                        margin: 4px;\n                        font-family: inherit;\n                        background-color: #FFF;\n                        width: calc(100% - 8px);\n                        color: #4A4A4A;\n                        margin-top: -8px;\n                        padding: 4px;\n                        padding-top: 8px;\n                        box-sizing: border-box;\n                    }\n                    .searchJumperModify-buttons {\n                        text-align: center;\n                        margin-bottom: 5px;\n                        display: flex;\n                        justify-content: space-evenly;\n                    }\n                    .searchJumperModify-buttons>button {\n                        width: 32%;\n                        font-size: 16px;\n                        cursor: pointer;\n                        border: 1px solid #1976d2;\n                        border-radius: 4px;\n                        transition: all .3s;\n                        color: #fff;\n                        background-color: #458bd1;\n                        line-height: 25px;\n                    }\n                    .searchJumperModify-buttons>button:hover {\n                        color: #e3f2fd;\n                    }\n                    #rangePickerBtn {\n                        width: 28px;\n                        float: right;\n                        margin-top: -33px;\n                        margin-right: 6px;\n                        position: sticky;\n                        display: block;\n                        cursor: pointer;\n                        background: rgb(255 255 255 / 80%);\n                    }\n                    .searchJumperModify-checkGroup {\n                        margin: 5px;\n                    }\n                    #searchJumperModify-re + label ~ * {\n                        display: none;\n                    }\n                    #searchJumperModify-re:checked + label ~ * {\n                        display: inline;\n                    }\n                    @media (prefers-color-scheme: dark) {\n                      .searchJumperModify-body,\n                      .searchJumperModify-input-title,\n                      .searchJumperModify-body>input[type=text],\n                      .searchJumperModify-body>input[type=number],\n                      .searchJumperModify-body>textarea,\n                      .searchJumperModify-body>select {\n                        background-color: black!important;\n                        color: #d5d5d5!important;\n                      }\n                      .searchJumperModify-body>input:focus,\n                      .searchJumperModify-body>textarea:focus,\n                      .searchJumperModify-body>select:focus {\n                        background-color: #1e1e1e!important;\n                      }\n                      .searchJumperModify-body>input[type=text],\n                      .searchJumperModify-body>input[type=number],\n                      .searchJumperModify-body>textarea {\n                        border: 1px solid rgb(255 255 255 / 36%)!important;\n                      }\n                      .searchJumperModify-title,\n                      .searchJumperModify-buttons>button {\n                        background: #245d8f!important;\n                      }\n                      #rangePickerBtn {\n                        background: rgb(0 0 0 / 80%);\n                        fill: white;\n                      }\n                    }\n                    "),t=document.createElement("div");this.modifyFrame=t,t.id="searchJumperModifyWord",t.innerHTML=S(`\n                     <div class="searchJumperModify-body">\n                         <a href="${l}" class="searchJumperModify-title" target="_blank">\n                             <img onerror="this.style.display='none'" width="32px" height="32px" src="${be}" />${u("modifyWord")}\n                         </a>\n                         <div class="searchJumperModify-input-title">${u("wordContent")}</div>\n                         <input id="searchJumperHighlightWord" name="wordContent" placeholder="words" type="text"/>\n                         <div class="searchJumperModify-checkGroup">\n                             <input id="searchJumperModify-re" type="checkbox"/>\n                             <label for="searchJumperModify-re">${u("re")}</label>\n                             <input id="searchJumperModify-case" type="checkbox"/>\n                             <label for="searchJumperModify-case">${u("ignoreCase")}</label>\n                             <input id="searchJumperModify-link" type="checkbox"/>\n                             <label for="searchJumperModify-link">${u("filterLink")}</label>\n                         </div>\n                         <div class="searchJumperModify-input-title">${u("wordHide")}</div>\n                         <input name="wordHide" min="0" placeholder="${u("wordHideTips")}" type="number" />\n                         <div class="searchJumperModify-input-title">${u("wordRange")}</div>\n                         <input name="wordRange" placeholder="#main" type="text" />\n                         <svg id="rangePickerBtn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("pickerBtn")}</title><path d="M874.048 533.333333C863.424 716.629333 716.629333 863.424 533.333333 874.048V917.333333a21.333333 21.333333 0 0 1-42.666666 0v-43.285333C307.370667 863.424 160.576 716.629333 149.952 533.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666666h43.285333C160.576 307.370667 307.370667 160.576 490.666667 149.952V106.666667a21.333333 21.333333 0 0 1 42.666666 0v43.285333c183.296 10.624 330.090667 157.418667 340.714667 340.714667h42.816a21.333333 21.333333 0 1 1 0 42.666666H874.026667z m-42.752 0h-127.786667a21.333333 21.333333 0 0 1 0-42.666666h127.786667C820.778667 330.922667 693.056 203.221333 533.333333 192.704V320a21.333333 21.333333 0 0 1-42.666666 0V192.704C330.922667 203.221333 203.221333 330.944 192.704 490.666667H320a21.333333 21.333333 0 0 1 0 42.666666H192.704c10.517333 159.744 138.24 287.445333 297.962667 297.962667V704a21.333333 21.333333 0 0 1 42.666666 0v127.296c159.744-10.517333 287.445333-138.24 297.962667-297.962667zM512 554.666667a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z"></path></svg>\n                         <div class="searchJumperModify-input-title">${u("wordStyle")}</div>\n                         <input name="wordStyle" placeholder="orange or #333333;color:red;" type="text" />\n                         <div class="searchJumperModify-input-title">${u("wordTitle")}</div>\n                         <textarea name="wordTitle" type="text" placeholder="Text comment, or @popup to popup, @popup(1) to popup 1st showTips, @popup(name) to popup showTips of target engine"></textarea>\n                         <div class="searchJumperModify-buttons">\n                             <button id="cancel" type="button">${u("cancel")}</button>\n                             <button id="modify" type="button">${u("modify")}</button>\n                         </div>\n                     </div>\n                    `),I||t.appendChild(e),t.querySelector("#cancel").addEventListener("click",(e=>{t.parentNode&&t.parentNode.removeChild(t)})),t.querySelector("#rangePickerBtn").addEventListener("click",(e=>{Ne.getSelector((e=>{a.value=e,t.style.display=""})),t.style.display="none"}));let n=t.querySelector("#modify");this.modifyBtn=n,n.addEventListener("click",(e=>{let n=r.value;if(this.splitSep&&(n=n.replaceAll(this.splitSep,"")),!n)return;let l=n!==this.modifyWord.showWords||p.checked!==this.modifyWord.isRe||h.checked!==this.modifyWord.link;c.checked&&0!==n.indexOf("@")&&(n=`/${n}/${p.checked?"i":""}${h.checked?"l":""}`);let d=o.value;d&&(this.splitSep&&(d=d.replaceAll(this.splitSep,"")),d=d>=0?d:0,n+=`$p{${d}}`);let u=i.value;u&&(this.splitSep&&(u=u.replaceAll(this.splitSep,"")),n+=`$s{${u}}`);let m=JSON.stringify(s.value).replace(/^"|"$/g,"");m&&(this.splitSep&&(m=m.replaceAll(this.splitSep,"")),n+=`$t{${m}}`);let f=a.value;f&&(this.splitSep&&(f=f.replaceAll(this.splitSep,"")),f!==this.modifyWord.inRange&&(l=!0),n+=`$in{${f}}`),this.addNew?(this.wordModeBtn.classList.contains("checked")&&(this.wordModeBtn.classList.remove("checked"),this.lockWords&&this.refreshPageWords(this.lockWords)),this.searchJumperInPageInput.value=n,this.submitInPageWords()):this.replaceWord(this.modifyWord,n,this.modifySpan,l),t.parentNode&&t.parentNode.removeChild(t)}))}let r=this.modifyFrame.querySelector("[name='wordContent']"),i=this.modifyFrame.querySelector("[name='wordStyle']"),s=this.modifyFrame.querySelector("[name='wordTitle']"),a=this.modifyFrame.querySelector("[name='wordRange']"),o=this.modifyFrame.querySelector("[name='wordHide']"),c=this.modifyFrame.querySelector("#searchJumperModify-re"),p=this.modifyFrame.querySelector("#searchJumperModify-case"),h=this.modifyFrame.querySelector("#searchJumperModify-link");if(this.addNew)r.value="",i.value="",a.value="",o.value="",s.value="",c.checked=!1,p.checked=!1,h.checked=!1,this.modifyBtn.innerText=u("add");else{this.modifyBtn.innerText=u("modify");let t="",l=/\$s{(.*?)}($|\$)/,d=n.match(l);d&&(t=d[1]),r.value=e.showWords||"",i.value=t||"",a.value=e.inRange||"",c.checked=!!e.isRe,p.checked=!!e.reCase,h.checked=!!e.link,void 0!==e.hideParent&&(o.value=e.hideParent);try{e.popup?(s.value="@popup",e.showTips&&(s.value=`@popup(${e.showTips})`)):s.value=e.title!==e.showWords?JSON.parse('"'+e.title+'"'):""}catch(e){k(e)}}this.addToShadow(this.modifyFrame)}replaceWord(e,t,n,r){if(r)n.parentNode&&n.parentNode.removeChild(n),this.removeHighlightWord(e),this.searchJumperInPageInput.value=t,this.submitInPageWords();else{let r="",i="",s=-1,a=/\$t{(.*?)}($|\$)/,o=t.match(a);o&&(r=o[1],r=JSON.parse('"'+r+'"')),e.title=r,n.title=r;let l=/\$s{(.*?)}($|\$)/,c=t.match(l);if(c){let t=c[1],r="";c=c[1].match(/(.*?);(.*)/),c&&(t=c[1],r=c[2]),i=this.getHighlightStyle(this.curWordIndex,t,r),e.style=i,n.style=i}let p=!1,h=/\$p{(.*?)}($|\$)/,d=t.match(h);d?(s=parseInt(d[1])||0,p=s!=e.hideParent):p=void 0!==e.hideParent,p&&[].forEach.call(document.querySelectorAll(".searchJumper-hide"),(t=>{t.dataset.content===e.showWords&&(t.classList.remove("searchJumper-hide"),t.style.display="",t.removeAttribute("data-content"))})),this.marks[e.showWords].forEach((t=>{if(t&&(t.title=r,i&&(t.style=i),p&&-1!=s)){let n=s,r=t.parentElement;for(;n-- >0&&r;)r=r.parentElement;r&&(r.dataset.content=e.showWords,r.classList.add("searchJumper-hide"),r.innerHTML=S(""))}})),-1==s?delete e.hideParent:e.hideParent=s,this.lockWords=this.lockWords.replace(e.oriWord,t),e.oriWord=t}}removeHighlightWord(e){if(!this.lockWords)return;if(this.splitSep||this.emptyInPageWords(),!e.oriWord)return;if(-1===this.lockWords.indexOf(e.oriWord))return;let t,n=this.lockWords.match(/^\$(c.|o)/),r=0;n=n?n[0]:"";let i=this.lockWords.replace(n,"").split(this.splitSep);if(t=i.indexOf(e.oriWord),this.wordModeBtn.classList.contains("checked")){-1!=t&&(i.splice(t,1),r=1);for(let n=0;n<i.length;n++){let s=i[n].split(/[ ]/);if(t=s.indexOf(e.oriWord),-1!=t){if(r++,1!=r)break;s.splice(t,1),i[n]=s.join(" ")}}this.lockWords=n+i.join(this.splitSep)}else{if(t<0)return;i.splice(t,1),r=-1!=i.indexOf(e.oriWord)?2:1,this.lockWords=n+i.join(this.splitSep)}if(delete this.highlightSpans[e.showWords],t=this.curHighlightWords.indexOf(e),t<0)return;if(this.curHighlightWords.splice(t,1),this.searchJumperInPageInput.style.paddingLeft=this.searchInPageLockWords.clientWidth+3+"px",r>1)return;this.marks[e.showWords].forEach((e=>{if(e.parentNode)if(e.dataset.block)e.parentNode&&e.parentNode.removeChild(e);else if(/^MARK$/i.test(e.nodeName)){let t=document.createTextNode(e.firstChild.data);e.parentNode.replaceChild(t,e),t.parentNode.normalize()}else e.classList.remove("searchJumper"),e.style.cssText=e.dataset.css||"",delete e.dataset.css})),delete this.marks[e.showWords];let s=[].slice.call(this.navMarks.children);[].forEach.call(s,(t=>{t.dataset.content==e.showWords&&t.parentNode.removeChild(t)}))}emptyInPageWords(){this.searchInPageLockWords.innerHTML=S(),this.highlight("")}focusHighlightByText(e,t,n){let r=this.marks[e];if(!r||0===r.length)return;e!=this.focusText?(this.focusIndex=0,this.focusText=e):t?this.focusIndex!=r.length-1?this.focusIndex=this.focusIndex+1:this.focusIndex=0:0!=this.focusIndex?this.focusIndex=this.focusIndex-1:this.focusIndex=r.length-1;let i=this.focusIndex;if(i>=r.length&&(i=0),t)for(;(!r[i].offsetParent||r[i].dataset.type)&&(i!=r.length-1?i+=1:i=0,i!=this.focusIndex););else for(;(!r[i].offsetParent||r[i].dataset.type)&&(0!=i?i-=1:i=r.length-1,i!=this.focusIndex););this.focusIndex=i,this.focusHighlight(r[this.focusIndex]),this.setHighlightSpan(n,this.focusIndex,r)}getRect(e){let t=e.getBoundingClientRect(),n={left:t.left,top:t.top,width:t.width,height:t.height},r=e.ownerDocument&&e.ownerDocument.defaultView,i=r&&r.frameElement;for(;i;){const e=i.getBoundingClientRect();n.left+=e.left,n.top+=e.top,r=r.parent,i=r.frameElement}return n}focusHighlight(e){if(!e)return;this.focusMark&&this.focusMark.removeAttribute("data-current"),this.focusMark=e,this.wPosBar||(this.wPosBar=document.createElement("div"),this.hPosBar=document.createElement("div"),this.wPosBar.className="searchJumperPosBar searchJumperPosW",this.hPosBar.className="searchJumperPosBar searchJumperPosH"),this.wPosBar.parentNode||(this.addToShadow(this.wPosBar),this.addToShadow(this.hPosBar));let t=this.getRect(e);this.wPosBar.style.top=t.top+document.documentElement.scrollTop+W(document).scrollTop+"px",this.wPosBar.style.height=t.height+"px",this.hPosBar.style.left=t.left+"px",this.hPosBar.style.width=t.width+"px",this.wPosBar.style.animationName="",this.hPosBar.style.animationName="";let n=this;setTimeout((async()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),e.dataset.current=!0,n.wPosBar.style.animationName="fadeit",n.hPosBar.style.animationName="fadeit",n.fixTimes=0;let t=window.innerHeight||document.documentElement.clientHeight;!function r(){if(n.focusMark!=e)return;let i=n.getRect(e);if(n.wPosBar.style.top=i.top+document.documentElement.scrollTop+W(document).scrollTop+"px",n.hPosBar.style.left=i.left+"px",!(i.top>t/3&&i.top<t/3*2)){if(5==++n.fixTimes)e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});else if(n.fixTimes>10)return e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),n.wPosBar.style.animationName="",void(n.hPosBar.style.animationName="");setTimeout((()=>{r()}),200)}}()}),0)}getHighlightSpanByText(e){return this.highlightSpans[e]}setHighlightSpan(e,t,n){if(!e)return;let r=e.querySelector("em");r||(r=document.createElement("em"),e.insertBefore(r,e.firstChild)),t++;let i=0;n&&n.length&&(i=0,n.forEach((e=>{e.dataset.type||i++}))),r.innerHTML=S("["+t+"/"+i+"]")}getHighlightStyle(e,t,n){if(!t&&!n){let t=p.prefConfig.inPageWordsStyles[e];if(t)return t}if(n=n||"",t||(t=p.prefConfig.firstFiveWordsColor[e]),!t)switch(e){case 0:t="#ffff00";break;case 1:t="#e91e63";break;case 2:t="#00bcd4";break;case 3:t="#008000";break;case 4:t="#800080";break;default:t=function(){let e,t,n;return e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),e=e.toString(16),1===e.length&&(e="0"+e),t=t.toString(16),1===t.length&&(t="0"+t),n=n.toString(16),1===n.length&&(n="0"+n),"#"+e+t+n}()}if(t){let e=function(e){if(0!==e.indexOf("#"))return"";if("#ffff00"===e)return"black";let t,n,r;e=e.substr(1),t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16);let i=.299*t+.587*n+.114*r;t=255-t,n=255-n,r=255-r;let s=.299*t+.587*n+.114*r;return Math.abs(s-i)<=128?i>158?"#000000":"#FFFFFF":(t=t.toString(16),1===t.length&&(t="0"+t),n=n.toString(16),1===n.length&&(n="0"+n),r=r.toString(16),1===r.length&&(r="0"+r),"#"+t+n+r)}(t);e&&(e="color:"+e+"!important;"),t=`background:${t}!important;${e}`}return`${t}${n}`}createNavMark(e,t,n,r,i){let s=this,a=document.createElement("span"),o=function(e,t){for(var n=e.offsetTop,r=e.offsetParent;r;)n+=r.offsetTop,r=r.offsetParent;if(t){for(r=t;r;)n+=r.offsetTop,r=r.offsetParent;try{let e=t.contentWindow.parent;for(t=e.frameElement;t;){for(r=t;r;)n+=r.offsetTop,r=r.offsetParent;e=e.parent,t=e.frameElement}}catch(e){}}return n}(e,s.targetIframe);a.title=t.title||t.showWords,a.dataset.top=o,a.dataset.content=t.showWords,a.style.top=o/i*100+"%",a.style.background=e.style.background||"yellow",a.addEventListener("click",(i=>(i.stopPropagation(),i.preventDefault(),s.focusIndex=n,s.focusHighlight(e),s.setHighlightSpan(s.getHighlightSpanByText(t.showWords),n,r),s.navPointer.style.display="",s.navPointer.style.top=a.offsetTop+33+"px",!1)),!0),s.navMarks.appendChild(a)}anylizeDomWithTextPos(e,t){return t||(t={text:"",data:{}}),e&&e.childNodes&&e.childNodes.length&&(1!=e.nodeType||e.offsetParent||e.offsetHeight)?(e.childNodes.forEach((e=>{if(e.classList&&e.classList.contains("searchJumper")||/^(img|svg|picture|br|hr|textarea)$/i.test(e.nodeName)){const n=t.text.length;t.text+="\n",t.data[n]={node:e,text:"\n"}}else if(e.offsetParent||e.offsetHeight)if(/^(div|h\d|p|form|ul|li|ol|dl|address|menu|table|fieldset|td)$/i.test(e.nodeName)){let n=t.text.length;t.text+="\n",t.data[n]={node:{},text:"\n"},n=(t=this.anylizeDomWithTextPos(e,t)).text.length,t.text+="\n",t.data[n]={node:{},text:"\n"}}else t=this.anylizeDomWithTextPos(e,t);else if(3===e.nodeType){let n;if(n=1==e.parentNode.nodeType&&1==e.parentNode.childNodes.length&&e.parentNode.innerText||e.data,!n||!n.trim())return;t.text.length;t.text+=n,t.data[t.text.length-1]={node:e,text:n}}})),t):t}highlightPopup(e,t){let n,r=this,i=t=>{n&&r.clingPos(e,r.tips)};e.addEventListener("mouseenter",(s=>{if(e.addEventListener("mousemove",i),Ie!=e||!r.funcKeyCall){if(n=null,Ie=e,t.showTips)if(/^\d+$/.test(t.showTips)){let e=r.autoGetFirstType().querySelectorAll("a.search-jumper-btn[data-show-tips]:not(.notmatch)"),i=parseInt(t.showTips)-1;n=e[i]}else n=r.getTargetSitesByName([t.showTips])[0];r.setFuncKeyCall(!0),n?(r.bar.style.setProperty("display","none","important"),n.dispatchEvent(new CustomEvent("showTips"))):r.showInPage(!0,s)}})),e.addEventListener("mouseleave",(t=>{e.removeEventListener("mousemove",i)}))}createHighlightMark(e,t,n){let r=this,i=document.createElement("mark");return i.className="searchJumper",e.title&&(i.title=JSON.parse('"'+e.title+'"')),e.popup&&this.highlightPopup(i,e),i.style.cssText=e.style,i.addEventListener("click",(e=>{if(e.altKey)return e.stopPropagation(),e.preventDefault(),!1})),i.dataset.content=e.showWords,i.addEventListener("mousedown",(i=>{if(!i.altKey)return;let s,a=t;for(;(!s||s.dataset.type)&&(0===i.button?a!=n.length-1?(a++,r.focusIndex=a):r.focusIndex=0:2===i.button&&(0!=a?(a--,r.focusIndex=a):r.focusIndex=n.length-1),s=n[r.focusIndex],a!=t););r.focusHighlight(s),r.setHighlightSpan(r.getHighlightSpanByText(e.showWords),r.focusIndex,n),r.focusText=e.showWords})),i}createAddonSpan(e,t){let n="addon_"+this.addonsList.children.length,r=this,i=document.createElement("div"),s=document.createElement("input");s.type="checkbox",s.id=n,s.checked=!t.disable,s.addEventListener("change",(i=>{p.prefConfig.disableAddon[e]=!s.checked,t.disable=!s.checked,s.checked&&r.findInpageAddons.forEach((e=>{if(e!=t&&e.sort==t.sort){e.disable=!0;let t=e.name||"addon"+n++;r.addonCheckboxDict[t].checked=!1,p.prefConfig.disableAddon[t]=!0}})),N.setItem("searchData",p),r.lockWords&&r.refreshPageWords(r.lockWords)})),i.appendChild(s),i.title=t.title||"";let a=document.createElement("label");a.setAttribute("for",n),a.innerText=e,i.appendChild(a),this.addonCheckboxDict[e]=s,this.addonsList.appendChild(i)}findAccentedWord(e,t,n){const r=t.length;let i=0,s=-1;for(let a=0;a<e.length;a++){const e=n[a];if(""!==e)if(e===t[i]){if(0===i&&(s=a),i++,i===r)return{pos:s,len:a-s+1}}else i=0,s=-1,e===t[0]&&(s=a,i=1)}return s=e.indexOf(t),{len:t.length,pos:s}}findPosInStr(e,t,n,r,i){if(!e)return{len:0,pos:-1};let s=0,a=-1,o=!1;if(this.findInpageAddons.length)for(let n=0;n<this.findInpageAddons.length;n++){let r=this.findInpageAddons[n];if(!r||!r.run||r.disable)continue;o=!0;let i=r.run(e,t);if(i&&i.matched){s=i.len,a=i.pos;break}}return-1!=a||o?{len:s,pos:a}:this.findAccentedWord(n,r,i)}highlight(e,t,n,r){if(!(e||this.curHighlightWords&&0!==this.curHighlightWords.length))return;if(!t)return void this.highlight(e,W(document),n);if([].forEach.call(t.getElementsByTagName("iframe"),(t=>{if(!t.offsetParent)return;if(t.offsetHeight<100||t.offsetWidth<100)return;let r;try{r=t.contentDocument||t.contentWindow.document}catch(e){return}r&&W(r)&&this.highlight(e,W(r),n,t)})),this.targetIframe=r||!1,"searchJumperModifyWord"==t.id)return;t=t||W(document);let i=this.wordModeBtn.classList.contains("checked"),s=[],a=!1,o=this;if(""===e)return this.highlightSpans={},Object.values(this.marks).forEach((async e=>{if(!e)return;let t=new Set;for(let n of e)if(n.parentNode)if(n.dataset.block)n.parentNode&&n.parentNode.removeChild(n);else if(/^MARK$/i.test(n.nodeName)){let e=document.createTextNode(n.firstChild.data);n.parentNode.replaceChild(e,n),t.add(e.parentNode)}else n.classList.remove("searchJumper"),n.style.cssText=n.dataset.css||"",delete n.dataset.css;t.forEach((e=>{e.normalize()}))})),[].forEach.call(t.querySelectorAll(".searchJumper-hide"),(e=>{e.classList.remove("searchJumper-hide"),e.style.display="",e.removeAttribute("data-content")})),this.navMarks.innerHTML=S(),this.marks={},void(this.curHighlightWords=[]);this.inPageStyle||(this.inPageStyle=x(this.inPageCss)),this.inPageStyle.parentNode||document.head.appendChild(this.inPageStyle);let l="insert"===e;l?(e=this.curHighlightWords,this.refreshNavMarks()):this.curHighlightWords=(this.curHighlightWords||[]).concat(e),this.fakeTextareas=new Map;let c=Math.max(document.documentElement.scrollHeight,W(document).scrollHeight);this.navMarks.style.display="none";let p=[];function h(e,r,d){let u,m,f,g,y=-1;m=0;e.parentNode;if(1==e.nodeType&&e.className&&e.className.indexOf&&-1!=e.className.indexOf("searchJumper"))return 0;if(d&&(1==e.nodeType||11==e.nodeType)){let b=o.anylizeDomWithTextPos(e),x=b.text,C=x.toUpperCase(),j=[];for(let N=0;N<C.length;N++){const B=C[N].normalize("NFD").replace(/[\u0300-\u036f]/g,"");j.push(B)}let I=r.content.toUpperCase(),T=(b.data,0),E=[],L=(r.init||i)&&/^[a-z]+$/i.test(r.content);function P(e,t,n){let r=Object.keys(b.data),i=t,s="",a="",o="";for(let t=0;t<r.length;t++){let l=parseInt(r[t]),c=b.data[l];if(e>l)continue;let p=e-(l-c.text.length)-1,h="full";if(p<0?h=c.text.length<i?"middle":"end":c.text.length-p<i&&(h="start"),"full"===h&&(n=""),L&&("full"==h?(s=0==p?"\n":c.text[p-1],a=p+i==c.text.length?"\n":c.text[p+i],"\n"!==a&&(o=p+i+1==c.text.length?"\n":c.text[p+i+1])):"start"!=h||s?"end"!=h&&"full"!=h||a||(a=p+i==c.text.length?"\n":c.text[p+i],"\n"!==a&&(o=p+i+1==c.text.length?"\n":c.text[p+i+1])):s=0==p?"\n":c.text[p-1],s&&a&&(/[a-z]/i.test(s)||/[a-rt-z]/i.test(a)||"s"==a.toLowerCase()&&/[a-z]/i.test(o))))break;p<0&&(p=0);let d,u=Math.min(i,c.text.length-p);if(i-=u,c.text.trim()){for(let e=0;e<E.length;e++)if(E[e].node==c.node){d=E[e];break}if(d?d.match.push({pos:p,len:u,type:h,matched:n}):E.push({node:c.node,text:c.text,match:[{pos:p,len:u,type:h,matched:n}]}),i<=0)break}else"start"===h&&(e+=c.text.length)}}function M(){if(y=-1,r.isRe){let e=x.match(new RegExp(r.content,r.reCase));if(e){let t=e[0];u=t.length,y=e.index}}else{let e=o.findPosInStr(x,r.content,C,I,j);u=e.len,y=e.pos}if(y>-1){let e=x.slice(y,y+u);x=x.slice(y+u),C=C.slice(y+u),j=j.slice(y+u),y+=T,T=y+u,P(y,u,e),M()}}M(),E.length&&E.forEach((e=>{if(void 0!==r.hideParent){let t=r.hideParent,n=e.node.parentElement;for(;t-- >0&&n;)n=n.parentElement;n&&n.classList&&!n.classList.contains("searchJumper-hide")&&(n.innerHTML=S(""),n.dataset.content=r.showWords,n.classList.add("searchJumper-hide"))}else{let t,n,i=o.marks[r.showWords],s=i.length,a="";if(1==e.node.parentNode.nodeType){a=getComputedStyle(e.node.parentNode).display}-1!=a.indexOf("flex")||-1!=a.indexOf("grid")||-1!=a.indexOf("layer")?(n=document.createElement("span"),n.style.all="unset"):n=document.createDocumentFragment();let l=document.createTextNode(e.text);n.appendChild(l);let h=e.match.reverse(),d=[];h.forEach((e=>{switch(t=o.createHighlightMark(r,s,i),e.type){case"start":t.style.borderTopRightRadius=0,t.style.borderBottomRightRadius=0;break;case"middle":t.style.borderRadius=0;break;case"end":t.style.borderTopLeftRadius=0,t.style.borderBottomLeftRadius=0}f=l.splitText(e.pos),"start"!=e.type&&"middle"!=e.type&&f.data.length&&f.splitText(e.len),g=f.cloneNode(!0),t.appendChild(g),"full"!=e.type&&"start"!=e.type&&(t.dataset.type=e.type),e.matched&&(t.dataset.matched=e.matched),n.replaceChild(t,f),d.unshift(t)})),e.node.parentNode.replaceChild(n,e.node),o.marks[r.showWords].push(...d),d.forEach((e=>{e.dataset.type||p.push([e,r,s,i,c])}))}}))}let v=!0;if(r.link){if(1==e.nodeType&&e.href&&e.href.match){if(v=!1,e.href.match(new RegExp(r.content,r.reCase)))if(void 0!==r.hideParent){let A=r.hideParent,$=e;for(;A-- >0&&$;)$=$.parentElement;if($)return $.innerHTML=S(""),$.dataset.content=r.showWords,$.classList.add("searchJumper-hide"),0}else{let W=o.marks[r.showWords],J=W.length;e.classList.add("searchJumper"),r.title&&(e.title=JSON.parse('"'+r.title+'"')),r.popup&&o.highlightPopup(e,r),e.dataset.css||(e.dataset.css=e.style.cssText),r.style&&(e.style.cssText+=r.style),e.addEventListener("click",(e=>{if(e.altKey)return e.stopPropagation(),e.preventDefault(),!1})),e.dataset.content=r.showWords,e.addEventListener("mousedown",(e=>{if(!e.altKey)return;let t;0===e.button?J!=W.length-1?o.focusIndex=J+1:o.focusIndex=0:2===e.button&&(o.focusIndex=0!=J?J-1:W.length-1),t=W[o.focusIndex],o.focusHighlight(t),o.setHighlightSpan(o.getHighlightSpanByText(r.showWords),o.focusIndex,W),o.focusText=r.showWords})),o.marks[r.showWords].push(e),p.push([e,r,J,W,c])}}}else{let D="";if(1==e.nodeType&&e.value&&(e.offsetParent||e.offsetHeight)&&!r.init&&/^(button|select|input|textarea)$/i.test(e.nodeName)&&!/^(hidden|file|password|radio|range|checkbox|image)$/i.test(e.type)&&(D=e.value),D){v=!1;let z=!1,O=0,H=o.fakeTextareas.get(e);if(l&&H)return 0;let R=getComputedStyle(e),F=e.offsetLeft,K=e.offsetTop,U=D.toUpperCase(),q=[];for(let V=0;V<U.length;V++){const _=U[V].normalize("NFD").replace(/[\u0300-\u036f]/g,"");q.push(_)}let G=r.content.toUpperCase();for(;;){if(r.isRe)z=D.match(new RegExp(r.content,r.reCase)),z&&(y=z.index,z=z[0]);else{let Z=o.findPosInStr(D,r.content,U,G,q);u=Z.len,y=Z.pos,(r.init||i)&&y>=0&&/^[a-z]+$/i.test(r.content)&&(0!==y&&/[a-z]/i.test(D[y-1])&&(y=-1),y+r.content.length!==D.length&&/[a-z]/i.test(D[y+u])&&(y=-1)),z=y>=0&&D.slice(y,y+u)}if(!z)break;Y(z,O+y),O+=y+z.length,D=D.slice(y+z.length),U=U.slice(y+z.length),q=q.slice(y+z.length)}function Y(t,n){if(t){if(!H){H=document.createElement("pre"),H.className="searchJumper";let t=document.createTextNode(D);H.appendChild(t);let n,r=/^(number|string)$/,i=[],s=e.style;for(n in s)if(!/^(content|outline|outlineWidth)$/.test(n)){let e=R[n];""!==e&&r.test(typeof e)&&(n=n.replace(/([A-Z])/g,"-$1").toLowerCase(),i.push(n),i.push(":"),i.push(e),i.push(";"))}i=i.join(""),H.style.cssText=i,H.style.position="fixed",H.style.left="0px",H.style.top="0px",H.style.margin="0",e.nodeName&&e.nodeName.toLowerCase&&"textarea"!==e.nodeName.toLowerCase()&&(H.style.display="inline-grid",H.style.lineHeight=H.style.height,"border-box"==H.style.boxSizing&&(H.style.paddingTop=0)),o.fakeTextareas.set(e,H)}document.body.appendChild(H);let i=document.createRange();i.setStart(H.firstChild,Math.min(H.firstChild.length,n)),i.setEnd(H.firstChild,Math.min(H.firstChild.length,n+1));let s=i.getBoundingClientRect();if(document.body.removeChild(H),void 0!==r.hideParent){let t=r.hideParent,n=e.parentElement;for(;t-- >0&&n;)n=n.parentElement;if(n)return n.innerHTML=S(""),n.dataset.content=r.showWords,n.classList.add("searchJumper-hide"),0}else{let n=o.marks[r.showWords],i=n.length,a=document.createElement("mark");a.className="searchJumper",a.dataset.block=!0,r.title&&(a.title=JSON.parse('"'+r.title+'"')),a.style.cssText=r.style,a.dataset.content=r.showWords,a.innerText=t,a.style.padding="0",a.style.position="absolute",a.style.fontSize=H.style.fontSize,a.style.fontFamily=H.style.fontFamily,a.style.lineHeight="1",a.style.pointerEvents="none",e.parentNode.appendChild(a);let l=s.left+F,h=s.top+K;if(a.style.left=l+"px",a.style.top=h+"px",o.marks[r.showWords].push(a),p.push([a,r,i,n,c]),e.nodeName&&e.nodeName.toLowerCase&&"textarea"==e.nodeName.toLowerCase()){let t=n=>{a.parentNode?(a.style.left=l-e.scrollLeft+"px",a.style.top=h-e.scrollTop+"px"):(a.parentNode.removeChild(a),e.removeEventListener("scroll",t))};e.addEventListener("scroll",t)}}}}}}if(v&&(!n||e===t)&&(1==e.nodeType||11==e.nodeType)&&e.childNodes&&!/^(SCRIPT|STYLE|MARK|SVG|TEXTAREA)$/i.test(e.nodeName)&&(!r.init||"true"!=e.ariaHidden&&"search"!=e.role&&(!e.hasAttribute||0==e.hasAttribute("jsname"))))if(!a&&/^(PRE|CODE)$/i.test(e.nodeName))s.push(e);else{for(var w=0;w<e.childNodes.length;++w)w+=h(e.childNodes[w],r);try{e.shadowRoot&&(w+=h(e.shadowRoot,r,!0))}catch(X){k(X)}}return 0}e.forEach((e=>{if(o.marks[e.showWords]||(o.marks[e.showWords]=[]),e.inRange){let n=t;t.parentNode&&(n=t.parentNode),[].forEach.call(n.querySelectorAll(e.inRange),(n=>{(n==t||t.contains(n))&&h(n,e,!0)}))}else h(t,e,!0)})),p.forEach((e=>{o.createNavMark(...e)})),this.navMarks.style.display="",setTimeout((()=>{o.navMarks.style.display="none",p=[],a=!0,e.forEach((e=>{o.marks[e.showWords]||(o.marks[e.showWords]=[]),s.forEach((t=>{h(t,e,!0)}))})),p.forEach((e=>{o.createNavMark(...e)})),o.navMarks.style.display=""}),1e3),""!=this.navMarks.innerHTML&&(this.searchJumperNavBar.classList.add("sjNavShow"),ae&&(this.appendBar(),this.con.style.display="",this.setNav(!0,!0)))}refreshPageWords(e){this.lockWords="",this.searchJumperInPageInput.value="",this.searchInPageLockWords.innerHTML=S(),this.searchJumperInPageInput.style.paddingLeft="",this.submitInPageWords();let t=e||se;t&&(this.searchJumperInPageInput.value=t,this.submitInPageWords(t==this.lastSearchEngineWords),this.appendBar())}refreshNav(){this.setNav(ae)}refreshNavMarks(){this.refreshNavMarksTimer&&clearTimeout(this.refreshNavMarksTimer),this.refreshNavMarksTimer=setTimeout((()=>{let e=Math.max(document.documentElement.scrollHeight,W(document).scrollHeight);this.navPointer.style.display="none",this.navMarks.style.display="none",[].forEach.call(this.navMarks.children,(t=>{t.style.top=t.dataset.top/e*100+"%"})),this.navMarks.style.display=""}),1e3)}checkCharacterData(e){setTimeout((()=>{this.highlight("insert",e,!0)}),0)}removeMark(e){let t=e.dataset.content,n=this.marks[t];if(!n)return;var r=n.indexOf(e);if(-1===r)return;n.splice(r,1),this.marks[t]=n;let i=this.navMarks.querySelectorAll(`span[data-content="${t}"]`)[r];i&&this.navMarks.removeChild(i)}submitIgnoreSpace(e){e&&(this.lockWords||0===e.indexOf("$c")||0===e.indexOf("$o")||-1===e.indexOf(" ")||(this.splitSep="◎"),this.searchJumperInPageInput.value=e,this.submitInPageWords())}siteBtnReturnHome(e){e.parentNode&&e.parentNode.removeChild(e)}closeShowAll(){if(this.con.classList.contains("search-jumper-showall")&&!c){if(this.clearInputHide(),clearInterval(this.showAllTimeTimer),document.removeEventListener("mousedown",self.showAllMouseHandler),document.removeEventListener("keydown",self.showAllKeydownHandler),this.con.classList.remove("search-jumper-showall"),document.documentElement.style.scrollbarWidth=this.preScrollbarWidth,this.searchJumperInputKeyWords.value="",this.historylist.innerHTML=S(),this.touched=!1,this.initPos(),this.funcKeyCall&&this.setFuncKeyCall(!1),!p.prefConfig.disableAutoOpen&&!p.prefConfig.disableTypeOpen){let e=this.bar.querySelector(".search-jumper-type:nth-child(1)>span");if(e&&!e.classList.contains("search-jumper-open"))if(e.onmousedown)e.onmousedown();else{let t=new PointerEvent("mousedown");e.dispatchEvent(t)}}this.bar.style.display=""}}toggleShowAll(){this.appendBar(),this.con&&this.con.parentNode&&(this.con.classList.contains("search-jumper-showall")?this.closeShowAll():this.showAllSites())}showAllSites(){if(!this.con||!this.con.parentNode||this.con.classList.contains("search-jumper-showall"))return;this.con.style.display="",this.clearInputHide(),this.alllist.appendChild(this.filterSites),this.filterGlob.innerHTML=S();let e=this;this.setFuncKeyCall(!1),this.hideSearchInput(),this.con.classList.add("search-jumper-showall"),this.preScrollbarWidth=document.documentElement.style.scrollbarWidth||"",document.documentElement.style.scrollbarWidth="none",clearInterval(this.showAllTimeTimer);window.innerWidth<1e3?(e.timeInAll.style.fontSize="15px",e.dayInAll.style.fontSize="15px"):(e.timeInAll.style.fontSize="",e.dayInAll.style.fontSize="");let t=new Date,n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),s=u(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()])+"<br/>"+n+"-"+(++r<10?"0"+r:r)+"-"+(i<10?"0"+i:i);if(0==h.indexOf("zh")){let e=Pe(n,r,i);if(e){s=s+"<br/>"+`${e.lunarYear}年${e.lunarMonth}月${e.lunarDay}`}}e.dayInAll.innerHTML=S(s);let a=()=>{let t=new Date,n=t.getHours(),r=t.getMinutes(),i=t.getSeconds();e.timeInAll.innerText=(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+(i<10?"0"+i:i)};this.showAllTimeTimer=setInterval(a,1e3),a(),de.forEach((t=>{if("none"!=t.style.display){let n=t.querySelector(".sitelist");n&&(e.sitelistBox.appendChild(n),e.initList(n))}})),this.historySiteBtns.slice(0,20).forEach((t=>{let n=t.querySelector("img");n&&n.dataset.src&&(n.src=n.dataset.src,delete n.dataset.src),e.historylist.appendChild(t)}));let o="";Ie&&("A"==Ie.nodeName.toUpperCase()||Ie.parentNode&&"A"==Ie.parentNode.nodeName.toUpperCase())&&(o=Ie.textContent.trim());let l=Ze()||o||G;this.searchJumperInputKeyWords.value=l,setTimeout((()=>{e.showAllMouseHandler||(e.showAllMouseHandler=t=>{0!=t.isTrusted&&"sitelistBox"!==t.target.className&&"search-jumper-showallBg"!==t.target.className||e.closeShowAll()}),e.con.addEventListener("mousedown",e.showAllMouseHandler),e.showAllKeydownHandler||(e.showAllKeydownHandler=t=>{27==t.keyCode&&e.closeShowAll()}),document.addEventListener("keydown",e.showAllKeydownHandler,!0),this.searchJumperInputKeyWords.value&&(this.searchJumperInputKeyWords.focus(),this.searchJumperInputKeyWords.select())}),0)}switchSite(e){if(!ue||"none"==this.bar.style.display)return;let t=this.con.querySelector(".search-jumper-btn.current");if(e)for(t=t.nextElementSibling;t&&(t.classList.contains("notmatch")||"none"==t.style.display||"true"==t.dataset.current||"true"!=t.dataset.isPage);)t=t.nextElementSibling;else for(t=t.previousElementSibling;t&&(t.classList.contains("notmatch")||"none"==t.style.display||"true"==t.dataset.current||"true"!=t.dataset.isPage);)t=t.previousElementSibling;t&&this.openSiteBtn(t,"_self")}clearInputHide(){de.forEach((e=>{e.classList.remove("input-hide")})),this.allSiteBtns.forEach((e=>{e[0].classList.remove("input-hide")})),this.allListBtns.forEach((e=>{e.classList.remove("input-hide")})),this.allLists.forEach((e=>{e.classList.remove("input-hide")}))}showSearchInput(){if(this.con&&this.con.classList.contains("search-jumper-showall"))return;this.recoveHistory(),this.con.classList.add("in-input"),this.searchInput.value="",this.contentContainer.appendChild(this.filterSites);let e=Ye();if(e&&(this.searchJumperInputKeyWords.value=e),this.filterSitesTab.checked){this.con.classList.remove("in-find"),p.prefConfig.defaultPicker&&this.togglePicker(),this.searchJumperInputKeyWords.value||(this.searchJumperInputKeyWords.value=Ze()||G);let e=this.bar.querySelector(".search-jumper-needInPage:not(.notmatch)>span");if(e&&!e.parentNode.classList.contains("search-jumper-open"))if(e.onmousedown)e.onmousedown();else{let t=new PointerEvent("mousedown");e.dispatchEvent(t)}Y&&(this.searchInput.value=Y,this.searchInput.dispatchEvent(new Event("input"))),this.searchJumperInputKeyWords.focus(),this.searchJumperInputKeyWords.select()}else this.searchInPageTab.checked&&(this.con.classList.add("in-find"),this.searchJumperInPageInput.focus(),setTimeout((()=>{e&&-1==this.lockWords.indexOf(e)?(this.searchJumperInPageInput.value="",this.navMarks.innerHTML?(this.searchJumperInPageInput.value=e,this.submitInPageWords()):this.submitIgnoreSpace(e)):this.searchJumperInPageInput.value?this.submitInPageWords():!this.initShowSearchInput&&G&&this.lockWords!==G&&(this.searchJumperInPageInput.value=G,this.initShowSearchInput=!0,this.searchJumperInPageInput.select())}),10));this.inInput=!0,this.clearInputHide(),this.lockWords?this.searchJumperInPageInput.style.paddingLeft=this.searchInPageLockWords.clientWidth+3+"px":this.searchJumperInPageInput.style.paddingLeft="",p.prefConfig.altToHighlight&&(document.removeEventListener("mouseup",this.checkSelHandler),document.addEventListener("mouseup",this.checkSelHandler))}togglePicker(){this.pickerBtn.classList.toggle("checked"),this.con.classList.toggle("in-pick"),this.searchJumperInputKeyWords.disabled=!this.searchJumperInputKeyWords.disabled,Ne.toggle(!0),this.searchJumperInputKeyWords.disabled&&(this.searchJumperInputKeyWords.value="")}hideSearchInput(){this.inInput=!1,this.clearInputHide(),this.con.classList.remove("in-find"),this.con.classList.remove("in-input"),this.con.classList.remove("lock-input"),this.bar.classList.remove("initShow"),this.searchInput.value="",this.searchJumperInputKeyWords.value="",this.pickerBtn.classList.remove("checked"),this.searchJumperInputKeyWords.disabled=!1,Ne.close(),document.removeEventListener("mouseup",this.checkSelHandler),this.setFuncKeyCall(!1),this.closeOpenType()}removeBar(){this.shadowContainer&&this.shadowContainer.parentNode&&this.shadowContainer.parentNode.removeChild(this.shadowContainer),this.con.parentNode&&this.con.parentNode.removeChild(this.con)}async testCSP(){let e=e=>{e.violatedDirective&&-1!=e.violatedDirective.indexOf("style-src")&&(I=!0)};window.addEventListener("securitypolicyviolation",e);let t=x("html {color: #000;}");this.addToShadow(t),await Dt(0),window.removeEventListener("securitypolicyviolation",e),t.parentNode&&t.parentNode.removeChild(t)}addToShadow(e){let t;if(this.shadowContainer||(this.shadowContainer=document.createElement("div")),this.shadowContainer.parentNode||(ot?document.body.appendChild(this.shadowContainer):document.documentElement.appendChild(this.shadowContainer)),I){if(/^style$/i.test(e.nodeName))return!0;t=this.shadowContainer}else if(this.shadowRoot)t=this.shadowRoot;else{this.shadowContainer.className="search-jumper-shadow";let e=x("\n                         .search-jumper-shadow {\n                          display: block !important;\n                          width: 0px !important;\n                          height: 0px !important;\n                          margin: 0px !important;\n                          padding: 0px !important;\n                          border-width: initial !important;\n                          border-style: none !important;\n                          border-color: initial !important;\n                          border-image: initial !important;\n                          outline: none !important;\n                          position: unset !important;\n                         }\n                        ");this.shadowContainer.appendChild(e);let n=this.shadowContainer.attachShadow({mode:"closed"});t=document.createElement("div"),t.id="search-jumper-root",t.style.display="none",t.setAttribute("contenteditable","false");let r=document.createElement("style");r.innerHTML=S("#search-jumper-root{display: block!important;}"),t.appendChild(r),n.appendChild(t),this.shadowRoot=t}return e.parentNode!=t&&t.appendChild(e),!0}contains(e){return e==this.shadowContainer||this.bar.contains(e)}appendBar(){if(Ee&&Ee.parentNode||(Ee=x(Se),I||this.addToShadow(Ee)),this.addToShadow(this.con)){let e=this,t=()=>{setTimeout((()=>{if(e.shadowContainer&&!e.shadowContainer.parentNode)return ot?document.body.appendChild(e.shadowContainer):document.documentElement.appendChild(e.shadowContainer),void t();!c&&e.con.parentNode&&"2147483647"!=getComputedStyle(e.con).zIndex&&(this.removeBar(),I?k(u("cspDisabled")):(I=!0,Ee=x(Se),e.shadowContainer.parentNode.removeChild(e.shadowContainer),e.shadowContainer=document.createElement("div"),e.shadowContainer.setAttribute("contenteditable","false"),document.documentElement.appendChild(e.shadowContainer),e.appendBar()))}),100)};t()}}async searchBySiteName(e,t,n){t||(t={}),t&&"drop"===t.type&&this.closeShowAll();for(let[r,i]of this.allSiteBtns)if(r.dataset.name==e){if(r.dataset.showTips)return void r.dispatchEvent(new CustomEvent("showTips"));await this.siteSetUrl(r,{button:t.button,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey});let e=/^(https?|ftp):/.test(r.href);return e&&r.setAttribute("target",n?"_self":"_blank"),r.click(),void(e&&r.setAttribute("target",1==r.dataset.target?"_blank":"_self"))}for(let t=de.length-1;t>=0;t--){let n=de[t];if(n.dataset.type==e)return void n.firstChild.onmousedown({button:2})}}async searcAllhByTypeName(e){for(let t=de.length-1;t>=0;t--){let n=de[t];if(n.dataset.type==e)return void n.firstChild.onmousedown({button:2})}}autoGetFirstType(){let e;switch(Ie||(Ie=W(document)),Ie.nodeName.toUpperCase()){case"IMG":e=this.bar.querySelector(".search-jumper-targetImg:not(.notmatch)");break;case"AUDIO":e=this.bar.querySelector(".search-jumper-targetAudio:not(.notmatch)");break;case"VIDEO":e=this.bar.querySelector(".search-jumper-targetVideo:not(.notmatch)");break;case"A":e=Ye()?this.bar.querySelector(".search-jumper-needInPage:not(.notmatch)"):this.bar.querySelector(".search-jumper-targetLink:not(.notmatch)");break;default:e=Ye()?this.bar.querySelector(".search-jumper-needInPage:not(.notmatch)"):"A"===Ie.parentNode.nodeName.toUpperCase()?this.bar.querySelector(".search-jumper-targetLink:not(.notmatch)"):this.bar.querySelector(".search-jumper-targetPage:not(.notmatch)")}if(e||(e=this.bar.querySelector(".search-jumper-targetAll:not(.notmatch)")||this.bar.querySelector(".search-jumper-type")),e){this.setFuncKeyCall(!1);let t=new PointerEvent("mousedown");e.classList.contains("search-jumper-open")&&(e.children[0].onmousedown?e.children[0].onmousedown():e.children[0].dispatchEvent(t)),e.children[0].onmousedown?e.children[0].onmousedown():e.children[0].dispatchEvent(t)}return e}searchAuto(e,t){e||(e=0);let n=this.autoGetFirstType();if(!n)return;let r=n.querySelectorAll("a.search-jumper-btn:not(.notmatch)");if(e<r.length){let n=r[e];this.searchBySiteName(n.dataset.name,t)}}setNav(e,t){t||ae==e||(N.setItem("navEnable",e||""),ae=e),e?(t||this.locBtn.classList.add("checked"),this.searchJumperNavBar.style.display=""):(t||this.locBtn.classList.remove("checked"),this.searchJumperNavBar.style.display="none",this.navPointer.style.display="none")}lockSearchInput(e){this.lockSiteKeywords=!0,this.searchLockInput.innerText=e,this.con.classList.add("lock-input"),this.searchInput.value="",this.searchInput.style.paddingLeft=`${15+this.searchLockInput.scrollWidth}px`,this.searchInput.placeholder=u("inputKeywords")}async initRun(){let e=this;this.siteIndex=1,this.customInput=!1,this.fontPool=[],this.allSiteBtns=[],this.allListBtns=[],this.allLists=[],this.dockerScaleBtns=[],this.bar.style.visibility="hidden";let n=0,i=[];this.checkSelHandler=e=>{e.altKey&&this.searchInPageTab.checked&&window.getSelection().toString()&&this.showSearchInput()},this.splitSep="◎",this.lockWords="",this.marks={},this.initInPageWords=[],this.highlightSpans={},this.curHighlightWords=[],this.curWordIndex=0;let s=()=>{this.searchJumperInPageInput.focus(),this.highlight("");let e=this.lockWords.trim();e?(this.searchJumperInPageInput.value&&(e+=this.splitSep+this.searchJumperInPageInput.value),this.lockWords="",this.searchJumperInPageInput.value=e,this.searchInPageLockWords.innerHTML=S(),this.searchJumperInPageInput.style.paddingLeft=""):this.submitInPageWords()};document.addEventListener("keydown",(e=>{27===e.keyCode&&(c?(this.searchInput.value="",this.searchInput.dispatchEvent(new CustomEvent("input"))):this.inInput?this.hideSearchInput():this.lockWords?(this.highlight(""),this.searchJumperInPageInput.value=this.lockWords,this.lockWords="",this.searchInPageLockWords.innerHTML=S(),this.setNav(!1,!0)):this.funcKeyCall&&this.removeBar())}),!0),this.searchJumperInPageInput.addEventListener("focus",(e=>{this.searchInputDiv.classList.add("active")})),this.searchJumperInPageInput.addEventListener("blur",(e=>{this.searchInputDiv.classList.remove("active")})),this.searchJumperInPageInput.addEventListener("keydown",(e=>{switch(e.stopPropagation(),e.keyCode){case 8:if(!this.searchJumperInPageInput.value){let t=this.searchInPageLockWords.lastChild;t&&(t.dispatchEvent(new CustomEvent("editword")),e.preventDefault())}break;case 9:e.preventDefault(),this.filterSitesTab.checked=!0,this.con.classList.remove("in-find"),this.searchInput.focus();break;case 13:{let t=this.searchJumperInPageInput.value?this.submitInPageWords():[];if(t&&t.length>0){let n=t.pop();this.currentSearchInPageLockWords&&(this.currentSearchInPageLockWords.firstChild.style.transform=""),this.currentSearchInPageLockWords=n;let r=new PointerEvent("mousedown",{button:e.shiftKey?2:0});n.dispatchEvent(r)}else if(this.lockWords){this.currentSearchInPageLockWords||(this.currentSearchInPageLockWords=this.searchInPageLockWords.lastChild,this.currentSearchInPageLockWords.firstChild.style.transform="scale(1.1)");let t=new PointerEvent("mousedown",{button:e.shiftKey?2:0});this.currentSearchInPageLockWords.dispatchEvent(t)}}break;case 37:""==this.searchJumperInPageInput.value&&this.lockWords&&(this.currentSearchInPageLockWords?this.currentSearchInPageLockWords.previousElementSibling&&(this.currentSearchInPageLockWords.firstChild.style.transform="",this.currentSearchInPageLockWords=this.currentSearchInPageLockWords.previousElementSibling,this.currentSearchInPageLockWords.firstChild.style.transform="scale(1.1)"):(this.currentSearchInPageLockWords=this.searchInPageLockWords.lastChild,this.currentSearchInPageLockWords.firstChild.style.transform="scale(1.1)"));break;case 39:""==this.searchJumperInPageInput.value&&this.lockWords&&(this.currentSearchInPageLockWords?this.currentSearchInPageLockWords.nextElementSibling&&(this.currentSearchInPageLockWords.firstChild.style.transform="",this.currentSearchInPageLockWords=this.currentSearchInPageLockWords.nextElementSibling,this.currentSearchInPageLockWords.firstChild.style.transform="scale(1.1)"):(this.currentSearchInPageLockWords=this.searchInPageLockWords.lastChild,this.currentSearchInPageLockWords.firstChild.style.transform="scale(1.1)"))}}),!0),this.editBtn.addEventListener("click",(e=>{s()})),this.addWord.addEventListener("click",(e=>{this.showModifyWindow()})),this.searchInPageTab.addEventListener("change",(e=>{this.initSetInPageWords(),this.searchJumperInPageInput.focus(),this.con.classList.add("in-find")})),this.filterSitesTab.addEventListener("change",(e=>{this.searchInput.focus(),this.con.classList.remove("in-find")})),se?(this.recoverBtn.addEventListener("click",(e=>{this.lockWords="",this.searchJumperInPageInput.value=se,this.searchInPageLockWords.innerHTML=S(),this.highlight(""),this.submitInPageWords(),this.searchJumperInPageInput.focus()})),this.pinBtn.classList.add("checked")):this.recoverBtn.style.display="none",this.pinBtn.addEventListener("click",(e=>{this.submitInPageWords(),this.pinBtn.classList.contains("checked")?(se="",this.pinBtn.classList.remove("checked")):this.lockWords&&(se=this.lockWords,this.pinBtn.classList.add("checked")),N.setItem("globalInPageWords",se)})),this.wordModeBtn.addEventListener("click",(e=>{this.wordModeBtn.classList.contains("checked")?this.wordModeBtn.classList.remove("checked"):this.wordModeBtn.classList.add("checked"),this.lockWords&&this.refreshPageWords(this.lockWords)})),this.saveRuleBtn.addEventListener("click",(e=>{this.lockWords&&(ot||A((()=>{let e=p.prefConfig.inPageRule||{};e[this.inPageRuleKey||L.replace(/([&\?]_i=|#).*/,"")]=this.lockWords,p.prefConfig.inPageRule=e,p.lastModified=(new Date).getTime(),ve=p.lastModified,N.setItem("searchData",p),v(u("save completed"))})))})),this.emptyBtn.addEventListener("click",(e=>{this.lockWords="",this.searchJumperInPageInput.value="",this.searchInPageLockWords.innerHTML=S(),this.searchJumperInPageInput.style.paddingLeft="",this.submitInPageWords(),this.searchJumperInPageInput.focus()})),this.copyInPageBtn.addEventListener("click",(e=>{this.lockWords&&(w(this.lockWords.replace(/◎/g,"\n")),v("Copied successfully!"))})),this.setNav(ae),this.locBtn.addEventListener("click",(e=>{this.setNav(!this.locBtn.classList.contains("checked"))})),this.closeNavBtn.addEventListener("click",(e=>{this.lockWords?(this.searchJumperInPageInput.value=this.lockWords||"",this.lockWords="",this.searchInPageLockWords.innerHTML=S(),this.searchJumperInPageInput.style.paddingLeft="",this.highlight(""),this.searchJumperInPageInput.focus(),this.setNav(!1,!0),N.setItem("disableHighlight",location.hostname),"none"===this.bar.style.display&&this.removeBar()):this.setNav(!1)})),this.minNavBtn.addEventListener("click",(e=>{if(this.searchJumperNavBar.classList.contains("minimize")){if(this.searchJumperNavBar.classList.remove("minimize"),this.lockWords.trim())return;this.submitInPageWords()}else{this.searchJumperNavBar.classList.add("minimize"),this.highlight("");let e=this.lockWords.trim();if(!e)return;this.searchJumperInPageInput.value&&(e+=this.splitSep+this.searchJumperInPageInput.value),this.lockWords="",this.searchJumperInPageInput.value=e,this.searchInPageLockWords.innerHTML=S(),this.searchJumperInPageInput.style.paddingLeft=""}})),this.maxNavBtn.addEventListener("click",(t=>{e.showInPage(),e.showInPageSearch()})),this.navMarks.addEventListener("click",(e=>{let t,n=e.offsetY/this.navMarks.clientHeight*100,r=[].slice.call(this.navMarks.querySelectorAll("span"));r.sort(((e,t)=>(e=parseFloat(e.style.top))>(t=parseFloat(t.style.top))?1:e<t?-1:0));for(let e=0;e<r.length;e++){t=r[e];let i=parseFloat(t.style.top);if(i>n){if(e>0){let s=r[e-1];i-n>n-parseFloat(s.style.top)&&(t=s)}break}}t&&t.click()})),this.bar.addEventListener("mousedown",(e=>{e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault()})),this.con.addEventListener("dblclick",(e=>{e.stopPropagation(),e.preventDefault()}));let a,l=t=>{t.stopPropagation(),t.preventDefault();let n=e.searchJumperExpand.parentNode;if(!n||!n.classList.contains("not-expand"))return;n.classList.remove("not-expand"),n.classList.remove("search-jumper-move");let r=e.con.classList.contains("search-jumper-left")||e.con.classList.contains("search-jumper-right");n.removeChild(e.searchJumperExpand);let i=Math.max(n.scrollWidth,n.scrollHeight)+5+"px";r?(n.style.height=i,n.style.width=""):(n.style.width=i,n.style.height=""),setTimeout((()=>{e.checkScroll(),n.classList.add("search-jumper-move")}),251)};this.searchJumperExpand.addEventListener("click",l,!0),this.searchJumperExpand.addEventListener("contextmenu",l,!0),this.searchJumperExpand.addEventListener("mouseenter",(e=>{p.prefConfig.overOpen&&(clearTimeout(a),a=setTimeout((()=>{l(e)}),500));let t=new CustomEvent("sitelist",{detail:{bind:e.currentTarget}});e.currentTarget.parentNode.dispatchEvent(t)}),!1),p.prefConfig.overOpen&&this.searchJumperExpand.addEventListener("mouseleave",(e=>{clearTimeout(a)}),!1),this.pickerBtn.addEventListener("click",(e=>{this.togglePicker()})),this.maxEleBtn.addEventListener("click",(e=>{Ne.expand()})),this.minEleBtn.addEventListener("click",(e=>{Ne.collapse()})),this.copyEleBtn.addEventListener("click",(e=>{Ne.copy()})),this.openLinkBtn.addEventListener("click",(e=>{Ne.openLinks()}));let h=document.createElement("div");h.className="listArrow",this.listArrow=h,this.con.appendChild(h);for(let e of p.sitesConfig){e.bookmark||e.sites.length>100||/^BM/.test(e.type)&&"bookmark"===e.icon?i.push(e):(await this.createType(e),n+=e.sites.length,n>100&&(await Dt(1),n=0))}this.initHistorySites(),this.initSort(),this.bar.style.visibility="",this.bar.style.display="none",this.searchInPageRule(),ue&&ke.test(ue.url)?this.inSearchEngine():!p.prefConfig.alwaysShow||r||T||(this.bar.style.display="",this.initPos(),this.appendBar()),Z&&(Ie=Z.target,this.batchOpen(Z.sites,{button:2})),Z=!1,X&&(this.submitAction(X),setTimeout((()=>{N.setListItem("inPagePostParams",location.hostname,"")}),1e4));let d,m=t=>{clearTimeout(d);let n,r="";ue&&!e.searchInput.value?(n=e.con.querySelector(".search-jumper-btn.current"),r="_self"):(n=e.con.querySelector(".search-jumper-type.search-jumper-open>a.search-jumper-btn:not(.input-hide)")||e.con.querySelector(".search-jumper-needInPage>a.search-jumper-btn:not(.input-hide)")||e.con.querySelector("a.search-jumper-btn:not(.input-hide)"),r="_blank"),n&&e.openSiteBtn(n,r,!t.ctrlKey)};this.inInput=!1;let f=()=>{Y!==e.searchInput.value&&(Y=e.searchInput.value,N.setItem("cacheFilter",Y))};this.searchInput.addEventListener("input",(t=>{clearTimeout(d),d=setTimeout((()=>{e.searchSiteBtns(e.searchInput.value)}),500)})),this.searchInput.addEventListener("click",(t=>{e.searchInput.select()})),this.searchInput.addEventListener("blur",(e=>{f()})),this.searchInput.addEventListener("keydown",(t=>{switch(t.stopPropagation(),t.keyCode){case 9:t.shiftKey&&(t.preventDefault(),this.searchInPageTab.checked=!0,this.con.classList.add("in-find"),this.searchJumperInPageInput.focus(),this.initSetInPageWords());break;case 13:if(this.searchJumperInputKeyWords.disabled){clearTimeout(d);let n,r="";ue&&!e.searchInput.value?(n=e.con.querySelector(".search-jumper-btn.current"),r="_self"):(n=e.con.querySelector(".search-jumper-type.search-jumper-open>a.search-jumper-btn:not(.input-hide)")||e.con.querySelector(".search-jumper-needInPage>a.search-jumper-btn:not(.input-hide)")||e.con.querySelector("a.search-jumper-btn:not(.input-hide)"),r="_blank"),n&&e.openSiteBtn(n,r,!t.ctrlKey)}else this.searchJumperInputKeyWords.value?m(t):this.searchJumperInputKeyWords.focus(),f()}})),this.searchJumperInputKeyWords.addEventListener("input",(t=>{clearTimeout(d),d=setTimeout((()=>{e.getSuggest(e.searchJumperInputKeyWords.value)}),200)})),this.searchJumperInputKeyWords.addEventListener("keydown",(e=>{switch(27!==e.keyCode&&e.stopPropagation(),e.keyCode){case 9:this.inInput?e.shiftKey||(e.preventDefault(),this.searchInPageTab.checked=!0,this.con.classList.add("in-find"),this.searchJumperInPageInput.focus(),this.initSetInPageWords()):(e.preventDefault(),this.searchInput.focus());break;case 13:m(e)}}),!0),this.closeBtn.addEventListener("mousedown",(t=>{e.hideSearchInput(),p.prefConfig.emptyAfterCloseInput&&(e.highlight(""),e.searchJumperInPageInput.value=e.lockWords||"",e.lockWords="",e.searchInPageLockWords.innerHTML=S(),e.setNav(!1,!0))}));let g,y,x,C,j,k,I=window.innerWidth/2,E=e=>0===e.type.indexOf("mouse")?e.clientX:e.changedTouches[0].clientX,P=e=>0===e.type.indexOf("mouse")?e.clientY:e.changedTouches[0].clientY,M=t=>{let n=.25*window.innerWidth,r=I+E(t)-x;if(e.searchInputDiv.style.top="unset",e.searchInputDiv.style.left=r+"px",e.searchInputDiv.style.bottom=g-(P(t)-C)+"px",r>window.innerWidth/2){let t=window.innerWidth-r+n-50;e.searchInputDiv.style.maxWidth=t+"px"}else{let t=r+n;r<n&&(r+=n-r,e.searchInputDiv.style.left=r+"px"),e.searchInputDiv.style.maxWidth=t+"px"}t.stopPropagation(),t.preventDefault()},B=e=>{document.removeEventListener("mouseup",B),document.removeEventListener("mousemove",M),document.removeEventListener("touchend",B),document.removeEventListener("touchmove",M),y.style.cursor="",I+=E(e)-x,g-=P(e)-C},$=()=>{g||(g=e.con.classList.contains("search-jumper-bottom")?.95*window.innerHeight-60:.03*window.innerHeight)},J=!1;this.searchInputDiv.addEventListener("touchstart",(e=>{J=!0,"inputGroup"!==e.target.className&&"LABEL"!==e.target.nodeName.toUpperCase()||($(),y=e.target,y.style.cursor="grabbing",x=E(e),C=P(e),document.addEventListener("touchend",B),document.addEventListener("touchmove",M))}),{passive:!0,capture:!1}),this.searchInputDiv.addEventListener("mousedown",(e=>{J?J=!1:"inputGroup"!==e.target.className&&"LABEL"!==e.target.nodeName.toUpperCase()||($(),y=e.target,y.style.cursor="grabbing",x=e.clientX,C=e.clientY,document.addEventListener("mouseup",B),document.addEventListener("mousemove",M),e.stopPropagation(),e.preventDefault())}));let D,z=e=>{let t=e.clientX-k+j+20;this.searchInputDiv.style.width=t+"px"},O=e=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",O)};this.rightSizeChange.addEventListener("mousedown",(e=>{k=e.clientX,j=2*this.searchInput.clientWidth+2,document.addEventListener("mousemove",z),document.addEventListener("mouseup",O),e.stopPropagation(),e.preventDefault()}));let H=e=>{if(!this.contains(e.target)){let e=/^(https?|ftp):/.test(D.href);e&&D.setAttribute("target","_blank"),e?b(D.href,{active:!1,insert:!0}):D.click(),e&&D.setAttribute("target",1==D.dataset.target?"_blank":"_self")}W(document).removeEventListener("dragover",R),document.removeEventListener("drop",H),document.removeEventListener("dragover",R)},R=e=>{e.preventDefault()},F=e=>{W(document).removeEventListener("dragover",R),document.removeEventListener("drop",H),document.removeEventListener("dragover",R)};this.bar.addEventListener("dragstart",(e=>{let t=e.target,n=t.parentNode;"IMG"!==t.nodeName.toUpperCase()&&"A"!==t.nodeName.toUpperCase()||(t.classList&&t.classList.contains("search-jumper-btn")?(D=t,W(document).addEventListener("dragover",R),document.addEventListener("drop",H),document.addEventListener("dragend",F)):n&&n.classList&&n.classList.contains("search-jumper-btn")&&(D=n,W(document).addEventListener("dragover",R),document.addEventListener("drop",H),document.addEventListener("dragend",F)))}),!0),n=0;let K=!1!==ue;for(let e of i)await this.createType(e),n+=e.sites.length,n>200&&(await Dt(1),n=0);if(!this.findInpageAddons){this.findInpageAddons=t.searchJumperAddons.filter((e=>"findInPage"==e.type)).sort(((e,t)=>(e.sort||0)-(t.sort||0)));let e=this,n=0,r={};this.findInpageAddons.forEach((t=>{let i=t.name||"addon"+n++;r[t.sort]||!0===p.prefConfig.disableAddon[i]?t.disable=!0:(p.prefConfig.disableAddon[i],t.disable=!1),r[t.sort]=!0,e.createAddonSpan(i,t)}))}if(this.fontPool.length>0||T){let e=document.createElement("link");e.rel="stylesheet",e.href=p.prefConfig.fontAwesomeCss||"https://lib.baomitu.com/font-awesome/6.1.2/css/all.css",document.documentElement.insertBefore(e,document.documentElement.children[0]),this.addToShadow(e.cloneNode()),async function(e){for(;document.hidden;)await Dt(500);var t=100,n=function(){var r,i;t-=1,(r=document.createElement("canvas")).width=20,r.height=20,(i=r.getContext("2d",{willReadFrequently:!0})).fillStyle="rgba(0,0,0,1.0)",i.fillRect(0,0,20,20),i.font="16pt FontAwesome",i.textAlign="center",i.fillStyle="rgba(255,255,255,1.0)",i.fillText("",10,18);var s=i.getImageData(2,10,1,1).data;0==s[0]&&0==s[1]&&0==s[2]?(i.font='16pt "Font Awesome 6 Free"',i.fillText("",10,18),0==(s=i.getImageData(2,10,1,1).data)[0]&&0==s[1]&&0==s[2]?t>0&&setTimeout(n,150):"function"==typeof e&&e()):"function"==typeof e&&e()};setTimeout(n,100)}((()=>{let e=!1;this.fontPool.forEach((t=>{t.innerText="",t.style.fontSize="",t.style.color="",e=!0,ge.unshift(t)})),e&&(T||L===o)&&setTimeout((()=>{Ge()}),3e3),this.buildAllPageGroupTab()}))}else this.buildAllPageGroupTab();if(c)return;le&&le!=location.hostname&&window.top==window.self&&N.setItem("disableHighlight",""),await this.testCSP();let U=ue&&ke.test(ue.url);!K&&U?this.inSearchEngine():ue||window.top!=window.self||this.checkSearchJump();let q=this.initInPageWords&&this.initInPageWords.length;!Le&&("none"!==this.bar.style.display||ae&&q)||this.removeBar()}buildAllPageGroupTab(){let e=this;this.groupTab.innerHTML=S(),de.forEach((t=>{if(t.classList.contains("notmatch"))return;let n=t.dataset.type,r=t.firstElementChild.cloneNode(!0),i=document.createElement("span");i.appendChild(r),i.dataset.type=n,i.addEventListener("click",(t=>{let r=e.sitelistBox.querySelector(`[data-type="${n}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"start",inline:"center"})})),e.groupTab.appendChild(i)}))}async refreshEngines(){if(p&&!this.refreshing){this.refreshing=!0,setTimeout((()=>{this.refreshing=!1}),500),ve=p.lastModified,this.removeBar(),de&&de.length&&de.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),de=[],this.allSiteBtns=[],this.allListBtns=[],this.allLists=[],this.historyTypeEle=null;for(let e of p.sitesConfig)await this.createType(e);this.initHistorySites(),this.initSort(),this.buildAllPageGroupTab(),c&&this.appendBar()}}waitForHide(e){let t=this;if(this.bar.classList.contains("grabbing"))return;this.touched=!1;var n=()=>{if(t.bar.classList.remove("search-jumper-isTargetImg"),t.bar.classList.remove("search-jumper-isTargetAudio"),t.bar.classList.remove("search-jumper-isTargetVideo"),t.bar.classList.remove("search-jumper-isTargetLink"),t.bar.classList.remove("initShow"),t.tips.style.opacity=0,t.tips.style.display="none",t.tips.innerHTML=S(""),t.funcKeyCall)if(t.setFuncKeyCall(!1),ue&&!ue.hideNotMatch&&!p.prefConfig.hideOnSearchEngine||t.con.classList.contains("resizePage")){t.initPos();let e=t.bar.querySelector(".search-jumper-type:nth-child(1)>span");if(e&&!e.classList.contains("search-jumper-open"))if(e.onmousedown)e.onmousedown();else{let t=new PointerEvent("mousedown");e.dispatchEvent(t)}}else t.bar.style.display="none";p.prefConfig.autoClose&&t.closeOpenType(),t.hideTimeout=null};this.hideTimeout&&clearTimeout(this.hideTimeout);let r=void 0===e?this.funcKeyCall?500:p.prefConfig.autoDelay||1e3:e;r?this.hideTimeout=setTimeout(n,r):n(),this.preList&&(this.preList.style.visibility="hidden",this.listArrow.style.cssText="")}searchEngineWords(e){return e=e.replace(/( |^)-\S+/g,""),/".+"/.test(e)&&(e=e.replace(/"(.+)"/g,((e,t,n,r)=>`◎${t}◎`)).replace(/^◎|◎$/g,"")),this.lastSearchEngineWords=e.replace(/['";]/g," "),this.lastSearchEngineWords}setInPageWords(e,t){this.initInPageWords.push(e),this.con.classList.add("in-find");let n=()=>{setTimeout((async()=>{if("none"===W(document).style.display&&(W(document).style.display=""),this.lockWords)this.initInPageWords=[];else{for(;document.hidden;)await Dt(1e3);N.setItem("lastHighlight",location.hostname);let e=this.initInPageWords.shift();for(;e;)this.searchJumperInPageInput.value=e,this.submitInPageWords(!0),e=this.initInPageWords.shift()}t&&t(),await Dt(100),N.setItem("lastHighlight","")}),300)};if("complete"!=document.readyState){let e=t=>{"complete"==document.readyState&&(document.removeEventListener("readystatechange",e),window.removeEventListener("load",e),n())};document.addEventListener("readystatechange",e),window.addEventListener("load",e)}else n()}searchInPageRule(){if(p.prefConfig.disableAutoHighlight){let e=p.prefConfig.disableAutoHighlight.trim().split("\n");for(let t=0;t<e.length;t++){let n=e[t],r=!1;if(0===n.indexOf("/")){let e=n.match(/^\/(.*)\/([igm]*)$/);e&&(r=new RegExp(e[1],e[2]).test(L))}else r=this.globMatch(n,L);if(r)return void(this.disableAutoHighlight=!0)}}if(ce===location.hostname&&(this.disableAutoHighlight=!0),p.prefConfig.inPageRule){let e=Object.keys(p.prefConfig.inPageRule);for(let t=0;t<e.length;t++){let n=e[t];if(!n)continue;let r=!1;if(0===n.indexOf("/")){let e=n.match(/^\/(.*)\/([igm]*)$/);e&&(r=new RegExp(e[1],e[2]).test(L))}else r=this.globMatch(n,L);if(r){let e=p.prefConfig.inPageRule[n];if(!e)continue;this.inPageRuleKey=n,this.disableAutoHighlight=!0,this.setInPageWords(e);break}}}}checkSearchJump(){if(this.inPageRuleKey||this.disableAutoHighlight)return;let e;if(p.prefConfig.showInSearchJumpPage&&oe&&!le&&-1!=E.indexOf(oe)){G&&this.wordModeBtn.classList.add("checked"),e=G;try{e=decodeURIComponent(e),e=this.searchEngineWords(e)}catch(e){}}if(e=e||se,e){this.appendBar();let t=this;this.setInPageWords(e,(()=>{t.navMarks.innerHTML||"none"!==t.bar.style.display||t.removeBar()}))}else if(!this.searchJumperInPageInput.value&&-1!=E.indexOf(oe)&&G){e=G,this.wordModeBtn.classList.add("checked");try{e=decodeURIComponent(e)}catch(e){}this.searchJumperInPageInput.value=e}}inSearchEngine(){if(!this.currentType||!ue||r||this.inPageRuleKey||this.disableAutoHighlight)return;if(!/sidesearch=(1|true)$/i.test(location.search)&&(!/#p{/.test(ue.url)||ue.keywords)){if(this.appendBar(),this.currentType.classList.contains("search-jumper-needInPage"))this.bar.classList.add("search-jumper-isTargetPage");else if(this.currentType.classList.contains("search-jumper-targetAll")||this.currentType.classList.contains("search-jumper-targetImg")||this.currentType.classList.contains("search-jumper-targetAudio")||this.currentType.classList.contains("search-jumper-targetVideo")||this.currentType.classList.contains("search-jumper-targetLink")||this.currentType.classList.contains("search-jumper-targetPage"))return;p.prefConfig.hideOnSearchEngine||(this.bar.style.display="",this.initPos())}this.insertHistory(this.currentType,!0),this.wordModeBtn.classList.add("checked");let e=p.prefConfig.showInSearchEngine?this.searchEngineWords(_):se;e&&this.setInPageWords(e)}getSuggest(e){let t=this.suggestDatalist;if(t.innerHTML=S(),!e)return;let n=(e,t,n)=>{g({method:"GET",url:e,responseType:n?"blob":"",headers:{referer:e,origin:e},onload:function(e){let r=e.response;if(!(e.status>=400)&&r)if(n){let e=new FileReader;e.onload=()=>{t(e.result)},e.readAsText(r,n)}else t(r)},onerror:function(e){k(e)},ontimeout:function(e){k(e)}})};switch(p.prefConfig.suggestType){case"google":n("https://suggestqueries.google.com/complete/search?client=youtube&q=%s&jsonp=window.google.ac.h".replace("%s",e),(e=>{if(e=e.match(/window.google.ac.h\((.*)\)$/,"$1")){e=JSON.parse(e[1])[1];for(let n in e){let r=document.createElement("option");r.value=e[n][0],t.appendChild(r)}}}));break;case"baidu":n("https://suggestion.baidu.com/su?wd=%s&cb=".replace("%s",e),(e=>{if(e=e.match(/.*,s:(.*)}\);$/,"$1")){e=JSON.parse(e[1]);for(let n in e){let r=document.createElement("option");r.value=e[n],t.appendChild(r)}}}),"GBK");break;case"bing":n("https://api.bing.com/qsonhs.aspx?type=json&q=%s".replace("%s",e),(e=>{if(e){e=JSON.parse(e).AS.Results;for(let n in e){let r=e[n].Suggests;for(let e in r){let n=document.createElement("option");n.value=r[e].Txt,t.appendChild(n)}}}}))}}searchSiteBtns(e){let t=e.indexOf("**"),n="",r=!1;t>0&&(n=e.slice(0,t),e=e.slice(t+2)),0===e.indexOf("^")?r=!0:(n=n.toLowerCase(),e=e.toLowerCase()),e?this.con.classList.add("searching"):this.con.classList.remove("searching");let i=!/[^\w\.\/\:\*\?\^\$]/.test(e);this.allListBtns.forEach((e=>{e.classList.add("input-hide")})),de.forEach((e=>{e.classList.add("input-hide")}));let s=0;this.filterGlob.innerHTML=S(),this.allSiteBtns.forEach((t=>{let a=t[0],o=t[1],l=a.parentNode,c=a.dataset.type,p=a.dataset.name,h=a.title;r||(c=c.toLowerCase(),p=p.toLowerCase(),h=h.toLowerCase());let d="";if(n){if(!this.globMatch(n,c))return;d=a.dataset.type+"**"}let u=!1;if(a.dataset.clone||(this.globMatch(e,p)?(u=!0,d+="^"+a.dataset.name+"$"):a.title&&this.globMatch(e,h)&&(u=!0,d+="^"+a.title+"$")),!u){if(i){if(!a.dataset.host){let e=/^https?:\/\/([^\/]*)\/[\s\S]*$/,t=o.url;a.dataset.host=e.test(t)?t.replace(e,"$1"):t,a.dataset.host&&(a.dataset.host=a.dataset.host.toLowerCase())}u=this.globMatch(e,a.dataset.host)}u?d+="^"+a.dataset.host+"$":a.classList.add("input-hide")}if(u){let t;a.classList.remove("input-hide"),l&&l.classList.remove("input-hide");for(let e=0;e<this.allListBtns.length;e++)if(this.allListBtns[e].id=="list"+a.dataset.id){t=this.allListBtns[e];break}if(t&&t.classList.remove("input-hide"),s<50&&e&&this.searchInput.value!==d){s++;let e=document.createElement("option");e.value=d,this.filterGlob.appendChild(e)}}})),de.forEach((e=>{let t;for(let n=0;n<this.allLists.length;n++)if(this.allLists[n].dataset.type==e.dataset.type){t=this.allLists[n];break}t&&(e.classList.contains("input-hide")?t.classList.add("input-hide"):t.classList.remove("input-hide"))}));let a=this.bar.querySelector(".search-jumper-type:not(.input-hide)");if(a){if(!a.classList.contains("search-jumper-open")){let e=a.querySelector("span.search-jumper-btn");if(e.onmousedown)e.onmousedown();else{let t=new PointerEvent("mousedown");e.dispatchEvent(t)}}if(this.searchJumperExpand.parentNode==a){let e=new PointerEvent("click");this.searchJumperExpand.dispatchEvent(e)}}}globMatch(e,t,n){if(t.length>500)return!1;try{if(0==e.length||"*"===e)return!0;if(1===e.length&&"$"===e[0])return!t||0===t.length;if(e.length>1&&"*"===e[0]&&(!t||0===t.length))return!1;if(!n)if(n=!0,e.length>1&&"^"===e[0]&&t&&0!==t.length){if((e=e.substring(1))[0]!==t[0])return!1}else"*"!==e[0]&&(e="*"+e);if(e.length>1&&"?"===e[0]||0!=e.length&&t&&0!==t.length&&e[0]===t[0])return this.globMatch(e.substring(1),t.substring(1),!!n);if(e.length>0&&"*"===e[0])return this.globMatch(e.substring(1),t,!!n)||this.globMatch(e,t&&t.substring(1),!!n)}catch(e){k(e)}return!1}setCurrentSite(e,t){ue=e,t.classList.add("current"),_="",!/#p{|^(showTips|find)/.test(e.url)&&ke.test(e.url)&&(this.updateCacheKeywords(),N.setItem("referrer",location.hostname))}updateCacheKeywords(){let e=Ze();e&&e!=G&&(G=e,N.setItem("cacheKeywords",e))}refresh(){this.refreshInPageTimer&&clearTimeout(this.refreshInPageTimer),this.refreshInPageTimer=setTimeout((()=>{let e=this.curHighlightWords;if(this.highlight(""),this.highlight(e),"none"==this.bar.style.display){let e;ue=null;for(let t in p.sitesConfig){if(ue)break;if(e=p.sitesConfig[t],!e)continue;let n=e.sites;for(let e in n){if(ue)break;let t,r=n[e];if(r&&r.url){if("0"===r.match);else if(r.match)new RegExp(r.match).test(L)&&(t=r);else if(-1!=r.url.indexOf(location.hostname))if(-1!=r.url.indexOf("site")){let e=r.url.match(/site(%3A|:)([\s\S]+?)[\s%]/);e&&-1!=L.indexOf(e[2])&&-1!=r.url.replace(e[0],"").indexOf(location.hostname)&&(t=r)}else if(!ue&&r.url.replace(/^https?:\/\//,"").replace(location.host,"").replace(/\/?[\?#][\s\S]*/,"")==location.pathname.replace(/\/$/,"")){let e=r.url.match(/[^\/\?&]+(?=%[stb])/g);e&&(e=e.join(".*"),new RegExp(e).test(L)&&(t=r))}if(t){let e=this.getTargetSitesByName([t.name])[0];this.currentType=e.parentNode,this.setCurrentSite(t,e)}}}}if(ue&&ke.test(ue.url)&&(!/#p{/.test(ue.url)||ue.keywords)&&!p.prefConfig.hideOnSearchEngine){if(this.currentType.classList.contains("search-jumper-targetAll")||this.currentType.classList.contains("search-jumper-targetImg")||this.currentType.classList.contains("search-jumper-targetAudio")||this.currentType.classList.contains("search-jumper-targetVideo")||this.currentType.classList.contains("search-jumper-targetLink")||this.currentType.classList.contains("search-jumper-targetPage"))return;this.appendBar(),this.bar.style.display="",this.initPos();let t=this.bar.querySelector(`.search-jumper-type[data-type="${e.type}"]>span`);if(t&&!t.classList.contains("search-jumper-open")&&(this.bar.insertBefore(t.parentNode,this.bar.children[0]),!p.prefConfig.disableAutoOpen&&!p.prefConfig.disableTypeOpen))if(t.onmousedown)t.onmousedown();else{let e=new PointerEvent("mousedown");t.dispatchEvent(e)}}}}),500)}initSort(){if(p.prefConfig.shiftLastUsedType&&this.historyTypeEle&&(ue?this.bar.insertBefore(this.historyTypeEle,this.bar.children[1]):this.bar.insertBefore(this.historyTypeEle,this.bar.children[0])),p.prefConfig.sortType){let e=this;de.sort(((e,t)=>{let n=ne[e.dataset.type]||0;return(ne[t.dataset.type]||0)-n}));let t=!1,n=!e.bar.children[0].classList.contains("search-jumper-open");for(let r=de.length-1;r>=0;r--){let i=de[r],s=ne[i.dataset.type]||0;if(r==de.length-1)s>0&&(t=!0,ne[i.dataset.type]=0);else{let e=ne[de[r+1].dataset.type]||0;s-e>10&&(t=!0,ne[i.dataset.type]=e+10)}e.bar.insertBefore(i,e.bar.children[n?0:1])}t&&N.setItem("sortTypeNames",ne)}}initHistorySites(){this.historySiteBtns=[],this.txtHistorySiteBtns=[],this.imgHistorySiteBtns=[],this.linkHistorySiteBtns=[],this.videoHistorySiteBtns=[],this.audioHistorySiteBtns=[];let e=this;ee.forEach((async t=>{for(let n of p.sitesConfig){let r=!1,i=n.bookmark||n.sites.length>100||/^BM/.test(n.type)&&"bookmark"===n.icon;for(let s=0;s<n.sites.length;s++){let a=n.sites[s];if(a.name==t){let t=await e.createSiteBtn(p.prefConfig.noIcons?"0":a.icon,a,!0,i,n,!0);t.classList.add("historySite"),e.historySiteBtns.push(t),n.selectImg||n.selectLink||n.selectPage||n.selectVideo||n.selectAudio||e.txtHistorySiteBtns.push(t),n.selectImg&&e.imgHistorySiteBtns.push(t),(n.selectLink||n.selectPage)&&e.linkHistorySiteBtns.push(t),n.selectVideo&&e.videoHistorySiteBtns.push(t),n.selectAudio&&e.audioHistorySiteBtns.push(t),r=!0;break}}if(r)break}}))}insertHistory(e,t){if(!p.prefConfig.historyLength)return;e.style.width="auto",e.style.height="auto";let n=this;this.historyInserted=!0;let r=0,i=!t&&p.prefConfig.historyInsertFirst,s=!1,a=0;i||(s=this.searchJumperExpand.parentNode==e&&!p.prefConfig.expandType,s&&(a=(p.prefConfig.numPerLine||7)-1,a=p.prefConfig.historyLength<a?a+a-p.prefConfig.historyLength:a,p.prefConfig.hideTileType&&a++));let o=this.historySiteBtns;e.classList.contains("search-jumper-needInPage")?o=this.txtHistorySiteBtns:e.classList.contains("search-jumper-targetImg")?o=this.imgHistorySiteBtns:e.classList.contains("search-jumper-targetAudio")?o=this.audioHistorySiteBtns:e.classList.contains("search-jumper-targetVideo")?o=this.videoHistorySiteBtns:(e.classList.contains("search-jumper-targetLink")||e.classList.contains("search-jumper-targetPage"))&&(o=this.linkHistorySiteBtns);for(let t=0;t<o.length;t++){let l=o[t];if("none"==l.style.display)continue;let c=l.querySelector("img");if(c&&c.dataset.src&&(c.src=c.dataset.src,delete c.dataset.src),l.parentNode!=e){let t=e.querySelectorAll("a.search-jumper-btn"),o=!1;for(let e=0;e<t.length;e++){let n=t[e];if((n.dataset.oriName||n.dataset.name)==(l.dataset.oriName||l.dataset.name)){o=!0;break}}if(o)continue;if(i)e.children.length>1?e.insertBefore(l,e.children[1]):e.appendChild(l);else if(s){let t=e.querySelectorAll("a.search-jumper-btn");t.length>a?e.insertBefore(l,t[a]):e.insertBefore(l,n.searchJumperExpand)}else e.appendChild(l);if(++r>=p.prefConfig.historyLength)break}else i&&(e.children.length>1?e.insertBefore(l,e.children[1]):e.appendChild(l))}e.style.width=e.scrollWidth+"px",e.style.height=e.scrollHeight+"px"}recoveHistory(){if(!p.prefConfig.historyLength)return;if(!this.historyInserted)return;this.historyInserted=!1;let e;for(let t=0;t<this.historySiteBtns.length;t++){let n=this.historySiteBtns[t];n.classList.contains("historySite")&&(e=n.parentNode,this.siteBtnReturnHome(n))}e&&e.classList.contains("search-jumper-open")&&(e.style.width="auto",e.style.height="auto",e.style.width=e.scrollWidth+"px",e.style.height=e.scrollHeight+"px")}bindSite(e,t){if(e.getAttribute("bind"))return;e.setAttribute("bind",!0);let n=this;t.href&&(e.href=t.href),e.style.display=t.style.display,e.addEventListener("mousedown",(async r=>{t.dataset.showTips?(n.con.classList.contains("search-jumper-showall")?Ie=e.parentNode:n.waitForHide(0),t.dispatchEvent(new CustomEvent("showTips"))):(await n.siteSetUrl(t,{button:r.button,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}),t.href&&(e.href=t.href),e.setAttribute("target",t.target)),e.onclick||(e.onclick=e=>(t.dataset.showTips||t.click(),e.stopPropagation(),e.preventDefault(),!1))}),!1),e.addEventListener("dragover",(e=>{e.preventDefault()}),!0),e.addEventListener("dragenter",(t=>{n.dragTarget&&n.dragTarget.classList.remove("dragTarget"),n.dragTarget=e,n.dragTarget.classList.add("dragTarget"),clearTimeout(n.dragTimer),n.dragTimer=setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),1e3)}),!0),e.addEventListener("dragleave",(t=>{e.classList.remove("dragTarget")}),!0),e.addEventListener("drop",(e=>{clearTimeout(n.dragTimer),n.dragTarget&&n.dragTarget.classList.remove("dragTarget"),n.searchBySiteName(t.dataset.name,e)}),!0)}async createList(e,t,n){let r=this,i=document.createElement("div");i.className="sitelist",i.style.visibility="hidden";let s=document.createElement("div");s.className="sitelistCon",i.appendChild(s),i.addEventListener("mouseenter",(e=>{r.listArrow.style.cssText=""}));let a=document.createElement("p");function o(e,t){let n=document.createElement("div");n.id="list"+t;let i=e.querySelector("img"),a=document.createElement("a");if(a.setAttribute("ref","noopener noreferrer"),r.bindSite(a,e),n.appendChild(a),r.allListBtns.push(n),i&&!p.prefConfig.noIcons){let e=i.src||i.dataset.src,t=document.createElement("img");a.appendChild(t),t.onload=e=>{t.style.width="",t.style.height="",t.style.display=""},t.onerror=e=>{t.src=xe},t.style.width="1px",t.style.height="1px",t.style.display="none",e?(/^data:/.test(e)||(t.οnerrοr=e=>{t.src=xe,t.onerror=null,t.style.width="",t.style.height="",t.style.display=""}),t.dataset.src=e):t.dataset.src=xe}let o=document.createElement("p");o.innerText=e.dataset.name,n.title=e.title,n.dataset.name=e.dataset.name,a.appendChild(o),s.appendChild(n)}a.innerText=t.dataset.title,a.title=u("batchOpen"),a.addEventListener("click",(e=>{r.batchOpen(n,{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,button:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?0:2})})),i.dataset.type=t.dataset.type,s.appendChild(a);try{for(let[t,n]of e.entries())o(n,n.dataset.id),t%50==49&&await Dt(1)}catch(t){for(let t=0;t<e.length;t++){let n=e[t];o(n,n.dataset.id)}}return this.allLists.push(i),i}async initList(e){e.dataset.inited||(e.style.display="none",e.dataset.inited=!0,[].forEach.call(e.querySelectorAll("div>a>img"),(e=>{e.dataset.src&&(e.src=e.dataset.src,delete e.dataset.src)})),await Dt(0))}async listPos(e,t){await this.initList(t),t.style="",this.preList=t;let n=e.clientWidth,r=e.clientHeight,i=e.offsetLeft+n/2-this.con.scrollLeft,s=e.offsetTop+r/2-this.con.scrollTop,a=e.offsetParent;for(;null!==a;)i+=a.offsetLeft,s+=a.offsetTop,a=a.offsetParent;let o=window.innerWidth||document.documentElement.clientWidth,l=window.innerHeight||document.documentElement.clientHeight,c=this.listArrow.style;if(c.visibility="visible",c.opacity=1,this.funcKeyCall){t.style.display="block",c.opacity=0;const a=e.getBoundingClientRect();i=a.x+n/2-this.con.scrollLeft,s=a.y+r/2-this.con.scrollTop,i-=t.clientWidth/2;let p=e.getBoundingClientRect().top;p>l/2?(p<t.clientHeight+10&&(t.style.height=p-20+"px"),s-=t.clientHeight+r/2+5):(s+=r/2+5,p+t.clientHeight+r+10>l&&(t.style.height=l-p-r-20+"px")),i<20&&(i=20);let h=o-t.clientWidth-30;i>h&&(i=h),t.style.left=i+"px",t.style.top=s+"px",t.style.display=""}else if(this.bar.clientWidth>this.bar.clientHeight){let e=i;i<30?e=30:i>o-40&&(e=o-40),c.left=e-10+"px",s-r/2<100?(t.style.top=this.bar.clientHeight+"px",c.top=this.bar.clientHeight-10+"px"):(t.style.bottom=this.bar.clientHeight+"px",c.bottom=this.bar.clientHeight-9+"px"),i-=t.scrollWidth/2,i>o-t.scrollWidth-10&&(i=o-t.scrollWidth-10),i<0&&(i=0),t.style.left=i+"px"}else{let e=s;s<30?e=30:s>l-30&&(e=l-30),c.top=e-10+"px",i-n/2<100?(t.style.left=this.bar.clientWidth+"px",c.left=this.bar.clientWidth-9+"px"):(t.style.right=this.bar.clientWidth+"px",c.right=this.bar.clientWidth-9+"px"),s-=t.scrollHeight/2,s>l-t.scrollHeight&&(s=l-t.scrollHeight),s<0&&(s=0),t.style.top=s+"px",t.style.maxHeight="100vh"}}clingPos(e,t,n){let r=e.clientWidth||e.offsetWidth,i=e.clientHeight||e.offsetHeight;const s=e.getBoundingClientRect();let a,o,l=this.con&&this.con.classList.contains("search-jumper-showall"),c=window.innerWidth||document.documentElement.clientWidth,p=window.innerHeight||document.documentElement.clientHeight;if(this.tips.style.position="",t.style.height="",!e||/^(body|html)$/i.test(e.nodeName))this.tips.style.transition="none",this.tips.style.position="fixed",t.style.right="",t.style.bottom="",t.style.left=(c-t.clientWidth)/2+"px",t.style.top="min(11%,110px)";else if(l)a=s.x+r/2,o=s.y+i/2,a-=t.clientWidth/2-this.con.scrollLeft,o+=this.con.scrollTop,o>p/2?o-=t.clientHeight+i/2+10:o+=i/2+10,t.style.right="",t.style.bottom="",t.style.left=a+"px",t.style.top=o+"px";else if(this.funcKeyCall){let n=window.pageYOffset||document.documentElement.scrollTop||W(document).scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft||W(document).scrollLeft;a=s.x+r/2-this.con.scrollLeft+l,o=s.y+i/2-this.con.scrollTop+n,a-=t.clientWidth/2;let h=e.getBoundingClientRect().top;h>p/2?(h<t.clientHeight+10&&(t.style.height=h-20+"px"),o-=t.clientHeight+i/2+5):(o+=i/2+5,h+t.clientHeight+i+10>p&&(t.style.height=p-h-i-20+"px")),a<20&&(a=20);let d=c+l-t.clientWidth-30;a>d&&(a=d),t.style.right="",t.style.bottom="",t.style.left=a+"px",t.style.top=o+"px"}else{a=e.offsetLeft+r/2-this.con.scrollLeft-e.parentNode.scrollLeft,o=e.offsetTop+i/2-this.con.scrollTop-e.parentNode.scrollTop;let s=e.offsetParent;for(;null!==s;)a+=s.offsetLeft,o+=s.offsetTop,s=s.offsetParent;o<i?(a-=t.clientWidth/2,o+=t.clientHeight/2,a<5?(a=5,t.style.left="5px",t.style.right="",t.style.bottom=""):a>c-t.clientWidth?(t.style.left="",t.style.right="5px",t.style.bottom=""):(t.style.left=a+"px",t.style.right="",t.style.bottom=""),t.style.top=(n?i:i+20)+"px"):o>p-i-10?(a-=t.clientWidth/2,a<5?(t.style.left="5px",t.style.right="",t.style.top=""):a>c-t.clientWidth?(t.style.left="",t.style.right="5px",t.style.top=""):(t.style.left=a+"px",t.style.right="",t.style.top=""),t.style.bottom=(n?i:i+20)+"px"):a>c-r-10?(t.style.left="",t.style.bottom="",o-=t.clientHeight/2,o<5&&(o=5),t.style.right=(n?r:r+20)+"px",t.style.top=o+"px"):a<r?(t.style.right="",t.style.bottom="",o-=t.clientHeight/2,o<5&&(o=5),t.style.left=(n?r:r+20)+"px",t.style.top=o+"px"):(t.style.right="",t.style.bottom="",t.style.left=a+"px",t.style.top=o+"px")}}tipsPos(e,t){this.tips.innerHTML=S(t),this.tips.style.pointerEvents="",this.tips.style.display="",this.tips.style.opacity=1,this.clingPos(e,this.tips),clearTimeout(this.hideTips),this.tips.style.transition&&setTimeout((()=>{this.tips.style.transition=""}),1);let n=this;[].forEach.call(this.tips.querySelectorAll("iframe"),(e=>{let t=e.innerHTML;if(t)if(e.innerHTML=S(),e.src)e.addEventListener("load",(n=>{try{if(!e||!e.parentNode)return;let n=e.contentDocument||e.contentWindow.document,r=n.createElement("div");n.body.appendChild(r),r.outerHTML=S(t)}catch(n){}}));else try{let n=e.contentDocument||e.contentWindow.document;n.open(),n.write(t),n.close()}catch(e){}})),[].forEach.call(this.tips.querySelectorAll("img,video"),(t=>{t.addEventListener("load",(t=>{n.clingPos(e,n.tips)}))})),window.markdownit&&(n.md||(n.md=window.markdownit()),[].forEach.call(this.tips.querySelectorAll(".markdown"),(e=>{e.innerHTML=S(n.md.render(e.innerHTML))})))}checkKwFilter(e,t){t.length>600&&(t=t.slice(0,500)+t.slice(t.length-10));let n=e.match(/^@{(.*?)}/);if(n){if(!Ie)return!1;let t=n[1];if(![].some.call(O(t,document),(e=>e===Ie)))return!1;e=e.replace(n[0],"")}let r,i=e.match(/^\/(.*)\/(\w*)$/);return r=i?new RegExp(i[1],i[2]):new RegExp(e,"i"),r.test(t||"")}async createType(e){let t=this,n=e.type,r=e.icon,i=e.selectTxt,s=e.selectImg,a=e.selectAudio,o=e.selectVideo,l=e.selectLink,c=e.selectPage,h=e.sites,d=!1,f=void 0===e.openInNewTab?p.prefConfig.openInNewTab:e.openInNewTab,g=[],y=document.createElement("span");y.className="search-jumper-type",!p.prefConfig.expandType&&h.length>10&&y.classList.add("not-expand"),"0"===e.match?(y.style.display="none",y.classList.add("notmatch")):e.match&&(0==new RegExp(e.match).test(L)?(y.style.display="none",y.classList.add("notmatch")):d=!0),void 0!==e.description?y.dataset.title=n+" - "+e.description:y.dataset.title=n,y.dataset.type=n;let v=document.createElement("span"),w=document.createElement("img"),b=document.createElement("b");n.length>=3?(b.innerText=n.trim().substr(0,4),/^[\w \-]+$/.test(b.innerText.substr(0,3))||(b.innerText=b.innerText.substr(0,2))):b.innerText=n,v.appendChild(b),w.style.display="none",y.appendChild(v),v.classList.add("search-jumper-word"),v.classList.add("search-jumper-btn"),v.classList.add("noIcon");let x=/^BM/.test(n)&&"bookmark"===e.icon;if(r){v.classList.remove("noIcon");let e=/^[a-z\- ]+$/.test(r);if(w.onload=t=>{w.style.display="",b.innerText="",b.style.display="none",e||v.classList.remove("search-jumper-word")},e){let e=Q[r.trim().replace(/ /g,"_")];"fail"!==e&&e?(w.src=e,w.style.width="100%",w.style.height="100%",v.appendChild(w)):(b.className=0===r.indexOf("fa")?r:"fa fa-"+r,this.fontPool.push(b))}else{if(/^data:/.test(r))w.src=r;else{let e=p.prefConfig.cacheSwitch&&Q[r];"fail"===e||(e?w.src=e:(w.src=r,Q[r]||x||fe.push(w)))}v.appendChild(w)}}y.addEventListener("mouseleave",(e=>{t.listArrow.style.cssText="",t.dockerScaleBtns.forEach((e=>{e.style.setProperty("--scale",1)}))}));let C=[],j=e=>{switch(p.prefConfig.batchOpenConfirm){case 1:window.confirm(u("batchOpenConfirm"))&&t.batchOpen(C,e);break;case 2:t.batchOpen(C,e);break;default:(y.classList.contains("search-jumper-open")||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||window.confirm(u("batchOpenConfirm")))&&t.batchOpen(C,e)}};if(p.prefConfig.shortcut&&e.shortcut&&!y.classList.contains("notmatch")){let t=e.shortcut.replace("Key","").replace("Digit","").toUpperCase();1==t.length&&(y.dataset.title+=` (${t})`),document.addEventListener("keydown",(t=>{if("searchJumperInput"!==t.target.id&&!e.ctrl!=t.ctrlKey&&!e.alt!=t.altKey&&!e.shift!=t.shiftKey&&!e.meta!=t.metaKey&&(p.prefConfig.enableInInput||e.ctrl||e.alt||e.shift||e.meta||!K(document))){var n=(t.key||String.fromCharCode(t.keyCode)).toLowerCase();e.shortcut!=t.code&&e.shortcut!=n||(j(t),t.stopPropagation())}}))}let k,I,T,S,E=0,P=40*this.scale,M=(e,n)=>{n?(e.style.display="",y.children.length>2&&y.insertBefore(e,y.children[2])):(e.style.display="none",t.searchJumperExpand.parentNode==y?y.insertBefore(e,t.searchJumperExpand):y.appendChild(e))},B=e=>{if(e){if(2===e.button)return j(e),!1;if(0===e.button&&(e.shiftKey||e.altKey||e.ctrlKey))return!1}if(t.funcKeyCall)return t.showAllSites(),!1;let n=t.con.classList.contains("search-jumper-left")||t.con.classList.contains("search-jumper-right");if(t.preList&&(t.preList.style.visibility="hidden",t.listArrow.style.cssText=""),y.classList.remove("search-jumper-move"),y.classList.contains("search-jumper-open"))p.prefConfig.minSizeMode&&t.bar.classList.add("minSizeModeClose"),y.classList.remove("search-jumper-open"),n?(y.style.height=P+"px",y.style.width=""):(y.style.height="",y.style.width=P+"px"),y.style.flexWrap="",p.prefConfig.disableTypeOpen&&(S.style.visibility="hidden");else{t.recoveHistory(),y.classList.add("search-jumper-open"),p.prefConfig.minSizeMode&&t.bar.classList.remove("minSizeModeClose");let r=!1;Ie&&(r=F(Ie));let i=Ie&&(Ie.href||Ie.src),s=Ze();E=0,g.forEach(((e,n)=>{let a=h[n],o=!0;if(a.kwFilter){let n;n=e.dataset.link?i||s:e.dataset.txt?s||Ie&&Ie.innerText||"":i||s||location.href,o=t.checkKwFilter(a.kwFilter,n)}o&&e.dataset.paste?(o=r,M(e,o)):a.kwFilter&&M(e,o);let l=e.querySelector("img");"none"!=e.style.display&&E++,l&&!l.src&&l.dataset.src&&(l.src=l.dataset.src,delete l.dataset.src)})),E>(p.prefConfig.expandTypeLength||12)&&!p.prefConfig.expandType&&(y.classList.add("not-expand"),y.appendChild(t.searchJumperExpand));let a=Math.max(y.scrollWidth,y.scrollHeight)+5+"px";p.prefConfig.disableTypeOpen&&(a=P+"px",e&&t.listPos(y.children[0],S)),n?(y.style.height=a,y.style.width=""):(y.style.width=a,y.style.height=""),setTimeout((()=>{y.classList.contains("search-jumper-open")&&(y.style.flexWrap="nowrap",y.classList.add("search-jumper-move"))}),p.prefConfig.typeOpenTime),de.forEach((e=>{y!=e&&(e.classList.remove("search-jumper-open"),e.style.width=P+"px",e.style.height=P+"px",e.style.flexWrap="")}))}p.prefConfig.disableTypeOpen||setTimeout((()=>{t.checkScroll()}),p.prefConfig.typeOpenTime)},A=!1,$=e=>{document.removeEventListener("mouseup",$),document.removeEventListener("mousemove",W),A||B(e),A=!1},W=e=>{A?(t.bar.style.left=I.x+e.clientX-k.x+"px",t.bar.style.top=I.y+e.clientY-k.y+"px"):(t.tips.style.opacity=0,A=!0,k={x:e.clientX,y:e.clientY},I={x:parseInt(t.bar.style.left),y:parseInt(t.bar.style.top)})};v.onmousedown=function(e){if(e&&t.funcKeyCall&&0===e.button&&!(e.shiftKey||e.altKey||e.ctrlKey))return A=!1,e.preventDefault&&e.preventDefault(),document.addEventListener("mouseup",$),void document.addEventListener("mousemove",W);B(e)},v.oncontextmenu=function(e){e.preventDefault()},v.addEventListener("click",(e=>(t.batchOpen(C,e),!1)),!1),v.addEventListener("dblclick",(e=>{e.stopPropagation(),e.preventDefault()}),!0);let J=window.screen.availWidth||window.innerWidth||document.documentElement.clientWidth,D=window.screen.availHeight||window.innerHeight||document.documentElement.clientHeight,z=!m||J>600&&D>600;y.addEventListener("sitelist",(async e=>{y.appendChild(S),await t.listPos(e.detail.bind,S),S.style.display="block"}),!1),v.addEventListener("mouseenter",(e=>{if(!A&&(t.funcKeyCall||!p.prefConfig.showSiteLists||!p.prefConfig.alwaysShowSiteLists&&y.classList.contains("search-jumper-open")?z&&t.tipsPos(v,y.dataset.title):(y.appendChild(S),t.listPos(y.children[0],S)),p.prefConfig.overOpen)){if(y.classList.contains("search-jumper-open"))return;clearTimeout(T),T=setTimeout((()=>{B(e)}),500)}}),!1),v.addEventListener("mouseleave",(e=>{t.tips.style.opacity=0,p.prefConfig.overOpen&&clearTimeout(T)}),!1);let O=!1,H=h&&h.length>200;async function R(r,i){if(!r.name)return;let s=await t.createSiteBtn(H||p.prefConfig.noIcons?"0":r.icon,r,f,x,e);s&&(s.classList.contains("notmatch")||E++,s.dataset.type=n,s.dataset.id=t.siteIndex,t.siteIndex++,t.allSiteBtns.push([s,r]),y.appendChild(s),g.push(s),r.nobatch||"0"===r.match||C.push(r.name),O||ue||!s.dataset.current&&!d||y.classList.contains("notmatch")||(O=!0,s.dataset.current&&(p.prefConfig.showCurrent||(s.style.display="none"),t.setCurrentSite(r,s)),t.currentType=y))}y.dataset.id=t.siteIndex,t.stopInput=!1;try{for(let[e,t]of h.entries())await R(t),e%100==99&&await Dt(1)}catch(e){for(let e=0;e<h.length;e++)R(h[e]);await Dt(1)}if(p.prefConfig.sortSite&&y.children.length>1){g.sort(((e,t)=>{let n=re[e.dataset.name]||0;return(re[t.dataset.name]||0)-n}));let e=!1;for(let t=g.length-1;t>=0;t--){let n=g[t],r=re[n.dataset.name]||0;if(t==g.length-1)r>0&&(e=!0,re[n.dataset.name]=0);else{let i=re[g[t+1].dataset.name]||0;r-i>10&&(e=!0,re[n.dataset.name]=i+10)}y.insertBefore(n,y.children[1])}e&&N.setItem("sortSiteNames",re)}if(g.forEach((e=>{e.classList.contains("notmatch")&&y.appendChild(e)})),S=await t.createList(g,y,C),O){if(p.prefConfig.currentTypeFirst?t.bar.insertBefore(y,t.bar.children[0]):t.bar.insertBefore(y,t.bar.children[t.bar.children.length-1]),!p.prefConfig.disableAutoOpen&&!p.prefConfig.disableTypeOpen){y.classList.add("search-jumper-open"),y.classList.add("search-jumper-move"),E>(p.prefConfig.expandTypeLength||12)&&!p.prefConfig.expandType&&(y.classList.add("not-expand"),y.appendChild(t.searchJumperExpand));let e=-1,n=[];if("complete"!==document.readyState){e=3;let t=e=>{"complete"===document.readyState&&(document.removeEventListener("readystatechange",t),window.removeEventListener("load",t),n.forEach((e=>{e&&!e.src&&e.dataset.src&&(e.src=e.dataset.src,delete e.dataset.src)})),n=[])};document.addEventListener("readystatechange",t),window.addEventListener("load",t)}g.forEach(((r,i)=>{let s=r.querySelector("img"),a=h[i];if(a&&_&&a.kwFilter){t.checkKwFilter(a.kwFilter,_)?r.style.display="":(r.style.display="none",t.searchJumperExpand.parentNode==y?y.insertBefore(r,t.searchJumperExpand):y.appendChild(r))}if("none"!=r.style.display&&s&&!s.src&&s.dataset.src){if(e>=0&&!/^data/.test(s.dataset.src)){if(0===e)return void n.push(s);e--}s.src=s.dataset.src,delete s.dataset.src}}))}}else t.historyTypeEle||te==n&&(t.historyTypeEle=y),t.bar.insertBefore(y,t.bar.children[t.bar.children.length-1]);return y.style.width=y.scrollHeight+"px",y.style.height=y.scrollHeight+"px",S.style.display="none",y.appendChild(S),i&&s&&a&&o&&l&&c?y.classList.add("search-jumper-targetAll"):(i&&y.classList.add("search-jumper-needInPage"),s&&y.classList.add("search-jumper-targetImg"),a&&y.classList.add("search-jumper-targetAudio"),o&&y.classList.add("search-jumper-targetVideo"),l&&y.classList.add("search-jumper-targetLink"),c&&y.classList.add("search-jumper-targetPage")),de.push(y),y}async openSiteBtn(e,t,n=!1){await this.siteSetUrl(e);let r=e.dataset.isPage;t||(t="_blank"),r&&e.setAttribute("target",t),r&&"_blank"==t&&e.href?b(e.href,{active:n,insert:!0}):e.click(),e.setAttribute("target",1==e.dataset.target?"_blank":"_self")}async batchOpen(e,t,n){let r=this;if(r.batchOpening=!0,r.customInput=!1,t.altKey&&t.shiftKey){let t=r.getTargetSitesByName(e),n=window.innerWidth||document.documentElement.clientWidth,i="<title>SearchJumper Multi</title><style>body{background: black; margin: 0;}iframe{box-sizing: border-box;padding: 5px}</style>",s=window.open("","_blank"),a=1;for(let e of t)if(e.dataset.isPage){if(await r.siteSetUrl(e),r.stopInput)return;if(!e.href)continue;let o=document.createElement("iframe");o.width=t.length<=2||n<=1280?"50%":"33%",o.height="100%",o.frameBorder="0",o.sandbox="allow-same-origin allow-scripts allow-popups allow-forms",o.id="searchJumper"+a++,o.style.display="none",i+=o.outerHTML,g({method:"GET",url:e.href,headers:{referer:e.href,origin:e.href,"User-Agent":navigator.userAgent},onload:function(t){let n=s.document.querySelector("iframe#"+o.id),r=()=>{let i=n.contentDocument||n.contentWindow&&n.contentWindow.document;if(i)try{n.style.display="",n.src=e.href;let r=`<base href="${e.href.replace(/[^\/]*$/,"")}" />`,s=-1!==t.response.indexOf("<head")?t.response.replace(/(\<head.*?\>)/,"$1"+r):r+t.response;i.write(s)}catch(e){}else setTimeout((()=>{r()}),500)};n&&r()},onerror:function(e){k(e)},ontimeout:function(e){k(e)}})}s.document.write(i),s.document.close()}else if((t.ctrlKey||t.metaKey)&&t.shiftKey){let t=r.getTargetSitesByName(e);for(let n of t){if(await r.siteSetUrl(n),r.stopInput)return;if(n.dataset.isPage&&n.href){let t={};Ie&&(t={src:Ie.src||Ie.href||"",title:Ie.title||Ie.alt}),e=e.filter((e=>e!==n.dataset.name)),N.setItem("lastSign",{target:t,sites:e}),setTimeout((()=>{b(n.href,{incognito:!0})}),300),setTimeout((()=>{N.setItem("lastSign",!1)}),2e3);break}}}else if(t.altKey){let t=r.getTargetSitesByName(e),n=[];for(let e of t)if(e.dataset.isPage){if(await r.siteSetUrl(e),r.stopInput)return;if(!e.href)continue;n.push(e.href)}let i=window.screen.availWidth||window.innerWidth||document.documentElement.clientWidth,s=window.screen.availHeight||window.innerHeight||document.documentElement.clientHeight,a=parseInt(i/800);a>n.length&&(a=n.length);let o=parseInt(i/a),l=s/(parseInt((n.length-1)/a)+1)-65;for(let e=0;e<n.length;e++){let t=e%a*o,r=parseInt(e/a)*(l+70);window.open(n[e]+"#searchJumperMin","_blank",`width=${o-10}, height=${l}, location=0, resizable=1, status=0, toolbar=0, menubar=0, scrollbars=0, left=${t}, top=${r}`)}}else if(t.shiftKey){let t=r.getTargetSitesByName(e);for(let n of t){if(await r.siteSetUrl(n),r.stopInput)return;if(n.dataset.isPage&&n.href){let t={};Ie&&(t={src:Ie.src||Ie.href||"",title:Ie.title||Ie.alt}),e=e.filter((e=>e!==n.dataset.name)),N.setItem("lastSign",{target:t,sites:e}),window.open(n.href,"_blank"),setTimeout((()=>{N.setItem("lastSign",!1)}),2e3);break}}}else if(t.ctrlKey||t.metaKey){let t=r.getTargetSitesByName(e).reverse();for(let e of t){if(await r.siteSetUrl(e),e.dataset.isPage&&e.href)b(e.href,{active:!1,insert:!0});else{if(r.stopInput)return;e.click()}}}else if(2===t.button){r.getTargetSitesByName(e).reverse().forEach((e=>{e.dataset.current||r.openSiteBtn(e,"_blank",!!n)}))}r.batchOpening=!1}async siteSetUrl(e,t){return new Promise((n=>{let r=t=>{e.removeEventListener("actionOver",r),n(!0)};e.addEventListener("actionOver",r);let i=new PointerEvent("mousedown",t);e.dispatchEvent(i)}))}getTargetSitesByName(e,t){let n=this,r=[];return e.forEach((e=>{for(let i=0;i<n.allSiteBtns.length;i++){let s=n.allSiteBtns[i][0];if(s.dataset.name==e){if(!t&&s.dataset.pointer){if(s.dataset.oriName){let e=n.getTargetSitesByName([s.dataset.oriName],!0);if(e.length){r.push(...e);break}}}else r.push(s);break}}})),r}async submitAction(e){if(e=e.slice(),"complete"!==document.readyState&&"interactive"!==document.readyState)return await Dt(300),void this.submitAction(e);let n,r,i=!1,s=this,a=!1,o=0,l=[],c=!1,p=[],h=await N.getItem("copyStore");h&&(p=JSON.parse(h));let d=async(e,n)=>{let a=!0;if("sleep"===e[0]||"@sleep"===e[0])await Dt(e[1]),k(`sleep ${e[1]}`);else if("@click"===e[0]){i=!0,await Je(e[1],n)||(a=!1)}else if("@dblclick"===e[0]){i=!0;let r=await async function(e,n=-1){let r=await We(e,n);if(!0===r)return!0;Ie=r;let i={isTrusted:!0,altKey:!1,azimuthAngle:0,bubbles:!0,button:0,buttons:0,clientX:1,clientY:1,cancelBubble:!1,cancelable:!0,composed:!0,ctrlKey:!1,defaultPrevented:!1,detail:2,eventPhase:2,fromElement:null,height:1,isPrimary:!1,metaKey:!1,pointerId:1,pointerType:"mouse",pressure:0,relatedTarget:null,returnValue:!0,shiftKey:!1,toElement:null,twist:0,which:1};r.focus();var s=new PointerEvent("mouseover",i);return r.dispatchEvent(s),s=new PointerEvent("pointerover",i),r.dispatchEvent(s),s=new PointerEvent("mousedown",i),r.dispatchEvent(s),s=new PointerEvent("pointerdown",i),r.dispatchEvent(s),s=new PointerEvent("mouseup",i),r.dispatchEvent(s),s=new PointerEvent("pointerup",i),r.dispatchEvent(s),r.click(),r.click(),s=new MouseEvent("dblclick",{...i,view:t}),r.dispatchEvent(s),k(r,`dblclick ${e}`),Ae}(e[1],n);r||(a=!1)}else if("@rclick"===e[0]){i=!0;let t=await async function(e,t=-1){let n=await We(e,t);if(!0===n)return!0;Ie=n;let r={isTrusted:!0,altKey:!1,azimuthAngle:0,bubbles:!0,button:2,buttons:0,clientX:1,clientY:1,cancelBubble:!1,cancelable:!0,composed:!0,ctrlKey:!1,defaultPrevented:!1,detail:0,eventPhase:2,fromElement:null,height:1,isPrimary:!1,metaKey:!1,pointerId:1,pointerType:"mouse",pressure:0,relatedTarget:null,returnValue:!0,shiftKey:!1,toElement:null,twist:0,which:3};n.focus();var i=new PointerEvent("mouseover",r);return n.dispatchEvent(i),i=new PointerEvent("pointerover",r),n.dispatchEvent(i),i=new PointerEvent("mousedown",r),n.dispatchEvent(i),i=new PointerEvent("pointerdown",r),n.dispatchEvent(i),i=new PointerEvent("mouseup",r),n.dispatchEvent(i),i=new PointerEvent("pointerup",r),n.dispatchEvent(i),i=new PointerEvent("contextmenu",r),n.dispatchEvent(i),k(n,`rclick ${e}`),Ae}(e[1],n);t||(a=!1)}else if("click"===e[1]&&0===e[0].indexOf("@")){i=!0,await Je(e[0].substr(1),n)||(a=!1)}else if("@copy"===e[0]){let t=await We(e[1],n);t&&!0!==t&&(p.push(t.innerText),Ae||(a=!1))}else if("@call"===e[0]){let t=s.getTargetSitesByName([e[1]])[0];if(t)tt=tt||Ze()||G,await s.siteSetUrl(t),t.click();else{let t=window[e[1]]||new $('"use strict";'+e[1]);t&&await t()}}else if("@open"===e[0]){let t=await Be(e[1]);c?b(t.href):(c=!0,setTimeout((()=>{location.href=t.href}),50))}else if("@reload"===e[0]);else if("@wait"===e[0])0===e[1].indexOf("!")?await async function(e){return e?new Promise((t=>{let n=setInterval((()=>{H(e)||(clearInterval(n),t(null))}),100)})):null}(e[1].slice(1)):await Be(e[1]);else{let t=e[1];if(_||(_=t),-1!==t.indexOf("%input{")){let e=await s.showCustomInputWindow(t);if(!e)return N.setListItem("inPagePostParams",location.hostname,""),!0;t=e}let i=await async function(e,t,n=-1){let r=await We(e,n);return!0===r||(await $e(r,t),Ae)}(e[0],t,n);i||(a=!1),"@"!==e[0]&&(r=H(e[0]))}return a};for(let t of e){if("@loopStart"===t[0])a=!0,l=[],o=parseInt(t[1])||1;else if("@loopEnd"===t[0])for(a=!1;o-- >0;){let e=!1,t=0;for(;!e;){e=!0;for(let n of l){await d(n,t)||(e=!1)}t++}}else a?l.push(t):await d(t);if(X&&(X.shift(),X&&X.length?(N.setListItem("inPagePostParams",location.hostname,X),N.setItem("copyStore",JSON.stringify(p))):(w(p.join("\n")),N.setListItem("inPagePostParams",location.hostname,""),N.setItem("copyStore","")),"@reload"===t[0]))return void location.reload(!!t[1])}if(a)for(a=!1;o-- >0;){let e=!1,t=0;for(;!e;){e=!0;for(let n of l){await d(n,t)||(e=!1)}t++}}if(!i&&r){for(n=r.parentNode;"FORM"!=n.nodeName.toUpperCase()&&(n=n.parentNode,n););if(n){let e=n.querySelector("[type=submit]");e?e.click():n.submit()}else!function(e){if(!Ie)return;let t=e||{key:"Enter",keyCode:13,bubbles:!0},n=new KeyboardEvent("keydown",t);Ie.dispatchEvent(n),n=new KeyboardEvent("keyup",t),Ie.dispatchEvent(n),n=new KeyboardEvent("keypress",t),Ie.dispatchEvent(n),k(Ie,`press ${e||"Enter"}`)}()}}getCloneData(e){for(let t=0;t<p.sitesConfig.length;t++){let n=p.sitesConfig[t];for(let t=0;t<n.sites.length;t++){let r=n.sites[t];if(!/^\[/.test(r.url)&&r.name==e)return r}}return null}async createSiteBtn(n,r,i,s,a,o){let l=this,c=document.createElement("a");c.setAttribute("ref","noopener noreferrer"),c.setAttribute("referrerPolicy","no-referrer");let h,d=r.name,f=r.match,y=!1,x=!s&&/^\[/.test(r.url),C=r.description,j=r.shortcut;if(void 0!==r.openInNewTab&&(i=r.openInNewTab),x){c.dataset.pointer=!0;let e=JSON.parse(r.url);if(1===e.length){c.dataset.clone=!0;let t=this.getCloneData(e[0]);t&&(c.dataset.oriName=t.name,(r=t).icon&&"0"!==n&&(n=r.icon),r.description&&(C=r.description))}}/^d:/.test(r.url)?(c.setAttribute("download",""),r.url=r.url.replace(/^d:/,"")):/^showTips:/.test(r.url)&&(y=!0,c.dataset.showTips=!0),/^paste:/.test(r.url)&&(c.dataset.paste=!0);let I=/^(https?|ftp):/.test(r.url);I&&(c.dataset.isPage=I),c.className="search-jumper-btn",void 0!==C&&(c.title=C),c.dataset.name=d,c.classList.add("search-jumper-word"),c.dataset.inPagePost=-1!=r.url.indexOf("#p{")?"t":"f";let T="t"===c.dataset.inPagePost;if("0"===f)c.style.display="none",c.classList.add("notmatch");else if(!s&&(!ue||r.hideNotMatch)&&window.top==window.self){if(f){let e,t=f.match(/^\/(.*)\/(\w*)$/);e=t?new RegExp(t[1],t[2]):new RegExp(f,"i"),e.test(L)&&(c.dataset.current=!0)}else if(!x&&location.hostname&&-1!=r.url.indexOf(location.hostname)){this.inSiteMatch||(this.inSiteMatch=/site(%3A|:)(.+?)[\s%]/);let e=r.url.match(this.inSiteMatch);if(e)-1!=L.indexOf(e[2])&&-1!=r.url.replace(e[0],"").indexOf(location.hostname)&&(c.dataset.current=!0);else if(this.pathMatch||(this.pathMatch=new RegExp("^https?://"+location.host+location.pathname+"?([\\?#].*|[%:#]p{|$)")),this.pathMatch.test(r.url))if(this.postMatch||(this.postMatch=/[#:%]p{/),this.postMatch.test(r.url))c.dataset.current=!0;else{this.paramMatch||(this.paramMatch=/[^\/\?&]+(?=%[stb])/g);let e=r.url.match(this.paramMatch);e?(e=e.join(".*"),new RegExp(e).test(L)&&(c.dataset.current=!0)):c.dataset.current=!0}else 0===r.url.indexOf("http")&&-1===r.url.indexOf("?")&&(this.keywordMatch||(this.keywordMatch=/%[stb][a-z]?\b/g),new RegExp(r.url.replace(/^https?/,"").replace(/[#%]\w+{.*/,"").replace(/\./g,"\\.").replace(this.keywordMatch,".*")).test(L)&&(c.dataset.current=!0))}c.dataset.current||r.hideNotMatch&&(c.style.display="none",c.classList.add("notmatch"))}let E=document.createElement("span");!s&&d.length>=3?(E.innerText=d.substr(0,4),/^[\w \-]+$/.test(E.innerText.substr(0,3))||(E.innerText=E.innerText.substr(0,2))):E.innerText=d,c.appendChild(E);let P,M=document.createElement("img");if(M.style.display="none",c.appendChild(M),!o&&p.prefConfig.shortcut&&j&&!c.dataset.clone&&!c.classList.contains("notmatch")){let e=document.createElement("div"),t=j.replace("Key","").replace("Digit","").toUpperCase();1==t.length&&(e.innerText=t,c.appendChild(e)),document.addEventListener("keydown",(async e=>{if("searchJumperInput"!==e.target.id&&(l.hideTimeout||!r.ctrl!=e.ctrlKey&&!r.alt!=e.altKey&&!r.shift!=e.shiftKey&&!r.meta!=e.metaKey)&&l.bar.contains(c)&&(p.prefConfig.enableInInput||r.ctrl||r.alt||r.shift||r.meta||!K(document))){var t=(e.key||String.fromCharCode(e.keyCode)).toLowerCase();j!=e.code&&j!=t||(e.stopPropagation(),Te&&(Ie=Te),y?c.dispatchEvent(new CustomEvent("showTips")):!1===await Y()||l.customInput||c.click())}}))}if("0"==n||(n?P=n:!s&&I?P=r.url.replace(/\?.*/,"").replace(/^(https?:\/\/[^\/]*\/)[\s\S]*$/,"$1favicon.ico"):/^showTips:https?:\/\//.test(r.url)&&(P=r.url.replace(/\?.*/,"").replace(/^showTips:(https?:\/\/[^\/]*\/)[\s\S]*$/,"$1favicon.ico"))),P){if(M.onload=e=>{c.classList.remove("search-jumper-word"),E.parentNode&&!p.prefConfig.showEngineWords&&E.parentNode.removeChild(E),M.style.display=""},/^data:/.test(P))M.dataset.src=P;else{let e=p.prefConfig.cacheSwitch&&Q[P];"fail"===e?c.dataset.current&&-1!=P.indexOf(location.host)&&(M.dataset.src=P,Q[P]="",s||setTimeout((()=>{Ke(M)}),0)):e?M.dataset.src=e:(M.dataset.src=P,s||Q[P]||fe.push(M))}}I&&(i?(c.setAttribute("target","_blank"),c.dataset.target=1):c.setAttribute("target","_self"));let B,A=r.url,J=ke.test(A);J&&(c.dataset.txt=!0),/%[tb]\b/i.test(A)&&(c.dataset.link=!0);let D,z,O,R,F,U=async e=>{l.customInput=!1,A=r.url,B="";let n,s=e||l.searchJumperInputKeyWords.value||Ye();s||et||l.bar.classList.contains("search-jumper-isTargetLink")||(s=Ze()),s&&!e&&(s!=G&&(l.keywordIndex=0,I&&(G=s,N.setItem("cacheKeywords",s))),B=s),(T||/^c(opy)?:|^paste:/.test(A))&&(-1!==A.indexOf("%input{")&&(A=await new Promise((e=>{l.showCustomInputWindow(A,(t=>{e(t)}))})),c.dataset.url=""),n=A.match(/#p{([\s\S]*[^\\])}/));let o=location.host,h=location.href,d=(e,t,n,r)=>{if(-1!==e.indexOf(t+"[")){let r,i=e.match(Ve(t,"","\\[(.*?)(\\|(.+))?\\]"));if(i){switch(i[3]?r=n.split(i[3]):(r=n.split(/[\n\r]/),1===r.length&&(r=n.split(" "))),l.keywordIndex||(l.keywordIndex=0),i[1]){case"all":B=r.join("\n");break;case"":n=r[l.keywordIndex],++l.keywordIndex>=r.length&&(l.keywordIndex=0);break;case"-1":--l.keywordIndex<0&&(l.keywordIndex=r.length-1),n=r[l.keywordIndex];break;default:n=r[parseInt(i[1])||0]}e=e.replace(i[0],t)}}return _e(e,t,n,r)},f=!/^showTips:h/i.test(A)&&/^c(opy)?:|[#:%]P{|^javascript:|^showTips:/i.test(A),g="",v="",w="",b="",x="",C=e=>{let t=e;if(t=d(t,"%su",g),t=d(t,"%sl",v),t=d(t,"%sr",w),t=d(t,"%S",G||w),t=d(t,"%ss",b),t=d(t,"%st",x),t=d(t,"%se",escape?escape(w):w),t=d(t,"%s",w,(e=>f?e:encodeURIComponent(e))),/%bd\b/.test(t))try{let e=atob(w);t=d(t,"%bd",e)}catch(e){console.log(e)}if(/%be\b/.test(t))try{let e=btoa(w);t=d(t,"%be",e)}catch(e){console.log(e)}return t};if(!c.dataset.url){let e=A;T&&(e=e.replace(n[0],"")),c.dataset.url=e.replace(/%e\b/g,document.characterSet).replace(/%c\b/g,m?"mobile":"pc")}let j="",k="",E=B||document.title,L="",P=(e=>{let t=e.match(/%element{(.*?)}(\.prop\((.*?)\))?/),n=0;for(;t&&!(n++>100);){let n=t[1],r=t[3],i="";if(n){let e=H(n);e&&(i=r?e.getAttribute(r)||e[r]:e.innerText)}else try{let e=window.getSelection(),t=document.createElement("div");for(let n=0,r=e.rangeCount;n<r;++n)t.appendChild(e.getRangeAt(n).cloneContents());if([].forEach.call(t.querySelectorAll("style,script,svg,canvas"),(e=>{let t=document.createTextNode("");e.parentNode.replaceChild(t,e)})),document.body.appendChild(t),r)for(let e=0;e<t.childNodes.length;e++){let n=t.childNodes[e];3==n.nodeType?(i+=n.nodeValue,i+="\n"):1==n.nodeType&&(i+=n.getAttribute(r)||n[r]||"",i+="\n")}else[].forEach.call(t.querySelectorAll("img"),(e=>{if(!e.src)return;let t=document.createTextNode(` ![${(e.alt||"").replace(/[\n\r]/g," ").trim()}](${e.src||""}) `);e.parentNode.replaceChild(t,e)})),[].forEach.call(t.querySelectorAll("a"),(e=>{if(!e.href)return;let t,n=(e.innerText||"").replace(/[\n\r]+/g,"\n").trim();n&&(n=` [${n}](${e.href||""}) `,-1==n.indexOf("\n")?t=document.createTextNode(n):(t=document.createElement("pre"),t.innerHTML=S(n)),e.parentNode.replaceChild(t,e))})),i=t.innerText;i&&(i=i.replace(/[\n\r]\s*/g,"\n")),document.body.removeChild(t)}catch(e){console.error(e)}t=(e=d(e,t[0],f?i:encodeURIComponent(i))).match(/%element{(.*?)}(\.prop\((.*?)\))?/)}t=e.match(/%date({(.*?)})?/),n=0;let r=(new Date).getTime();for(;t&&!(n++>100);){let n=t[2],i=r;if(n){n=n.replace(/\s/g,"");let e=n.match(/(\D*)?(\d+)/);for(;e;){switch(e[1]){case"-":i-=parseInt(e[2]);break;case"*":i*=parseInt(e[2]);break;case"/":e[2]&&"0"!=e[2]&&(i=parseInt(i/parseInt(e[2])));break;default:i+=parseInt(e[2])}n=n.replace(e[0],""),e=n.match(/(\D*)?(\d+)/)}}else i=r;t=(e=e.replace(t[0],i)).match(/%date({(.*?)})?/)}return e})(c.dataset.url);if(Ie&&Ie.nodeName){if(j=Ie.href||Ie.parentNode&&Ie.parentNode.href||"",k=j||Ie.parentNode&&Ie.parentNode.parentNode&&Ie.parentNode.parentNode.href||"",(a.selectImg||a.selectAudio||a.selectVideo)&&Ie.src&&(j=Ie.src),"VIDEO"==Ie.nodeName.toUpperCase()||"AUDIO"==Ie.nodeName.toUpperCase()){if(!j){let e=Ie.querySelector("source");e&&(j=e.src)}j&&(j=j.replace(/^blob:/,""))}E=Ie.title||Ie.alt||document.title,"IMG"==Ie.nodeName.toUpperCase()&&/%i\b/.test(A)?Ie.src&&(/^data/.test(Ie.src)?L=Ie.src:(l.tipsPos(c,"<span class='loader'></span><font>Loading...</font>"),L=await He(Ie)),P=P.replace(/%i\b/g,L)):("A"==Ie.nodeName.toUpperCase()||Ie.parentNode&&"A"==Ie.parentNode.nodeName.toUpperCase())&&J&&!s&&Ie.textContent.trim()&&(s=Ie.textContent.trim())}for(;-1!==P.indexOf("%template{");){let e=P.match(/%template{(.*?[^\\])}/);if(!e)return!1;let t=e[1];p.prefConfig.templateData||(p.prefConfig.templateData={});let n=p.prefConfig.templateData[t];if(!n){if(l.stopInput)return!1;if(n=window.prompt(u("template",t))||"",!n)return!1;p.prefConfig.templateData[t]=n,N.setItem("searchData",p)}P=P.replace(e[0],n)}for(;-1!==P.indexOf("%input{");){let e=P.match(/%input{(.*?[^\\])}/);if(!e)return!1;if(l.customInput=!0,l.stopInput)return!1;if(!l.batchOpening)break;{let t;if(t=0===e[1].indexOf('"')&&-1!==e[1].indexOf('","')?e[1].substr(1,e[1].length-2).split('","'):e[1].split(","),t=2===t.length?window.prompt(t[0],t[1]):window.prompt(e[1]),null===t)return!1;P=P.replace(e[0],t)}}j&&(j=j.replace(/%(\w{2})/g,((e,t)=>`%${t.toUpperCase()}`))),k&&(k=k.replace(/%(\w{2})/g,((e,t)=>`%${t.toUpperCase()}`)));let M=j.replace(/^https?:\/\//i,"");s||(s=ue&&G);try{if(void 0!==navigator.clipboard.readText&&(!s&&J&&(s=await navigator.clipboard.readText(),s&&!e&&(B=s)),!L&&/%i\b/.test(A))){if("denied"!==(await navigator.permissions.query({name:"clipboard-read"})).state){const e=await navigator.clipboard.read();for(const t of e)if(t.types.includes("image/png")){const e=await t.getType("image/png");L=await new Promise((t=>{const n=new FileReader;n.onload=function(e){t(e.target&&e.target.result)},n.readAsDataURL(e)})),L&&(P=P.replace(/%i\b/g,L))}}if(!L){l.customInput=!0;let e=window.prompt(u("targetUrl"),"https://www.google.com/favicon.ico");if(!e)return!1;l.tipsPos(c,"<span class='loader'></span><font>Loading...</font>"),L=await Re(e)}}}catch(e){console.error(e.message)}if(!s&&J){if(l.customInput=!0,l.con.classList.contains("search-jumper-showall"))return!1;if(l.inInput||y)return!1;if(l.stopInput)return!1;let e=window.prompt(u("keywords"));if(null===e)return!1;_=e,setTimeout((()=>{_=""}),1),s=e,w=s,g=w.toUpperCase(),v=w.toLowerCase(),b=t.tc2sc?t.tc2sc(w):w,x=t.sc2tc?t.sc2tc(w):w,f||(s=encodeURIComponent(s)),P=C(P)}else!s||g||v||w||(w=s,g=w.toUpperCase(),v=w.toLowerCase(),b=t.tc2sc?t.tc2sc(w):w,x=t.sc2tc?t.sc2tc(w):w,f||(s=encodeURIComponent(s)));if(""===j){let e=Ye()||l.searchJumperInputKeyWords.value;if(!J&&e&&/^(http|ftp)/i.test(e))j=e,j=j.replace(/%(\w{2})/g,((e,t)=>`%${t.toUpperCase()}`));else{let e=!1,t=()=>!l.stopInput&&!y&&(!1===e&&(e=window.prompt(u("targetUrl"),"https://www.google.com/favicon.ico"),e&&(e=e.replace(/%(\w{2})/g,((e,t)=>`%${t.toUpperCase()}`)),Ie={src:e})),null!==e);if(/%t\b/.test(P)){if(l.customInput=!0,!1===t())return!1;P=d(P,"%t",e)}if(/%T\b/.test(P)){if(l.customInput=!0,!1===t())return!1;P=P.replace(/%T\b/g,encodeURIComponent(e))}if(/%τ\b/.test(P)){if(l.customInput=!0,!1===t())return!1;P=P.replace(/%τ\b/g,encodeURIComponent(encodeURIComponent(e)))}if(/%b\b/.test(P)){if(l.customInput=!0,!1===t())return!1;P=P.replace(/%b\b/g,e.replace(/^https?:\/\//i,""))}if(/%B\b/.test(P)){if(l.customInput=!0,!1===t())return!1;P=P.replace(/%B\b/g,encodeURIComponent(e.replace(/^https?:\/\//i,"")))}if(/%β\b/.test(P)){if(l.customInput=!0,!1===t())return!1;P=P.replace(/%β\b/g,encodeURIComponent(encodeURIComponent(e.replace(/^https?:\/\//i,""))))}}}let $=o;if(!k&&!j||c.dataset.link||(h=k||j,$=h.replace(/^\w+:\/\/([^\/]+).*/,"$1")),T){let e=[],t=!1;if(n[1].replace(/([^\\])&/g,"$1SJ^PARAM").split("SJ^PARAM").forEach((n=>{if(n=n.trim(),/^loopStart\(\d+\)$/.test(n)){let t=n.match(/loopStart\((.*)\)/);e.push(["@loopStart",t[1]])}else if("loopEnd"==n)e.push(["@loopEnd",""]);else if(n.startsWith("click(")&&n.endsWith(")")){let t=n.slice(6,n.length-1);t&&e.push(["@click",t.replace(/\\([\=&])/g,"$1").trim()])}else if(n.startsWith("dblclick(")&&n.endsWith(")")){let t=n.slice(9,n.length-1);t&&e.push(["@dblclick",t.replace(/\\([\=&])/g,"$1").trim()])}else if(n.startsWith("rclick(")&&n.endsWith(")")){let t=n.slice(7,n.length-1);t&&e.push(["@rclick",t.replace(/\\([\=&])/g,"$1").trim()])}else if(n.startsWith("copy(")&&n.endsWith(")")){let t=n.slice(5,n.length-1);t&&e.push(["@copy",t.replace(/\\([\=&])/g,"$1").trim()])}else if(n.startsWith("call(")&&n.endsWith(")")){let r=n.slice(5,n.length-1);r&&(e.push(["@call",r.replace(/\\([\=&])/g,"$1").trim()]),t=!0)}else if(n.startsWith("reload(")&&n.endsWith(")")){let t=n.slice(7,n.length-1);e.push(["@reload",t.trim()])}else if(n.startsWith("wait(")&&n.endsWith(")")){let t=n.slice(5,n.length-1);e.push(["@wait",t.replace(/\\([\=&])/g,"$1").trim()])}else if(n.startsWith("open(")&&n.endsWith(")")){let t=n.slice(5,n.length-1);t&&e.push(["@open",t.replace(/\\([\=&])/g,"$1").trim()])}else if(/^sleep\(\d+\)$/.test(n)){let t=n.match(/sleep\((.*)\)/);t&&e.push(["@sleep",t[1]])}else{let t=(n=n.replace(/([^\\])\=/g,"$1SJ^PARAM").replace(/\\([\=&])/g,"$1")).split("SJ^PARAM");if(2===t.length){let n=t[0],r=C(t[1].replace(/\\([\=&])/g,"$1").replace(/%e\b/g,document.characterSet).replace(/%i\b/g,L).replace(/%c\b/g,m?"mobile":"pc").replace(/%U\b/g,encodeURIComponent(h)).replace(/%υ\b/g,encodeURIComponent(encodeURIComponent(h))).replace(/%h\b/g,$).replace(/%T\b/g,encodeURIComponent(j)).replace(/%τ\b/g,encodeURIComponent(encodeURIComponent(j))).replace(/%b\b/g,M).replace(/%B\b/g,encodeURIComponent(M)).replace(/%β\b/g,encodeURIComponent(encodeURIComponent(M))).replace(/%n\b/g,E));r=d(r,"%t",j),r=d(r,"%u",h),e.push([n,r])}else(n.endsWith(".click()")||n.endsWith(".click"))&&e.push(["@"+n.replace(/\.click(\(\))?$/,""),"click"])}})),t&&l.updateCacheKeywords(),""===P||P===location.href)return X=e,this.submitAction(e),!1;N.setListItem("inPagePostParams",P.replace(/^https?:\/\/([^\/:]+).*/,"$1"),e)}return P=d(P,"%h",$),P=d(P,"%t",j),P=d(P,"%u",h),P=C(P.replace(/%U\b/g,encodeURIComponent(h)).replace(/%υ\b/g,encodeURIComponent(encodeURIComponent(h))).replace(/%T\b/g,encodeURIComponent(j)).replace(/%τ\b/g,encodeURIComponent(encodeURIComponent(j))).replace(/%b\b/g,M).replace(/%B\b/g,encodeURIComponent(M)).replace(/%β\b/g,encodeURIComponent(encodeURIComponent(M))).replace(/%n\b/g,E)),i&&/^(https?|ftp):/.test(P)?(c.setAttribute("target","_blank"),c.dataset.target=1):c.dataset.target=0,P},q=!1,Y=async e=>{if(delete c.href,e||(e={}),z=e.altKey,O=e.ctrlKey,R=e.metaKey,F=e.shiftKey,z||O||R||F||(1==e.button||2==e.button?(z=!1,O=!0,R=!1,F=!1):2===i?(z=!1,O=!0,R=!1,F=!0):3===i?(z=!0,O=!1,R=!1,F=!1):4===i&&(z=!1,O=!0,R=!1,F=!1)),y)return c.removeAttribute("target"),h&&(/^(https?|ftp):/.test(h)?(D=h,c.href=D,i?c.setAttribute("target","_blank"):c.setAttribute("target","_self")):(/^copy:/.test(h)&&(h=h.replace(/^copy:/,"")),w(h))),void c.dispatchEvent(new Event("actionOver"));if(q=!1,D="",D=await U(),/^(https?|ftp):/.test(D)&&e.stopPropagation&&e.stopPropagation(),/^c(opy)?:|^paste:/.test(r.url)||/^javascript:/.test(r.url)||/^\[/.test(r.url)||/[:%]P{/.test(r.url)||r.charset&&"utf-8"!=r.charset||/[:%]p{/.test(r.url))1!=e.button&&2!=e.button||(q=!0);else{if(!D)return void(l.stopInput||(l.stopInput=!0,setTimeout((()=>{l.stopInput=!1}),1)));c.href=D}l.customInput&&D&&(q=!0),c.dispatchEvent(new Event("actionOver")),q&&(e.preventDefault&&e.preventDefault(),c.click())},V=()=>{let e=Math.max(p.prefConfig.historyLength,20),t=c.dataset.current;if(r.hideNotMatch||r.kwFilter||c.dataset.clone||c.dataset.paste||"0"===f||!e||t||N.getItem("historySites",(t=>{(ee=(ee=t||[]).filter((e=>e&&e!=d))).unshift(d),ee.length>e&&(ee=ee.slice(0,e)),N.setItem("historySites",ee)})),p.prefConfig.shiftLastUsedType&&!t){let e=c.parentNode;e&&(e.classList.contains("search-jumper-targetAll")||e.classList.contains("search-jumper-targetImg")||e.classList.contains("search-jumper-targetAudio")||e.classList.contains("search-jumper-targetVideo")||e.classList.contains("search-jumper-targetLink")||e.classList.contains("search-jumper-targetPage")||e.classList.contains("search-jumper-needInPage"))||te==c.dataset.type||(te=c.dataset.type,N.setItem("historyType",te))}p.prefConfig.sortType&&N.getItem("sortTypeNames",(e=>{(ne=e||{})[c.dataset.type]?ne[c.dataset.type]=ne[c.dataset.type]+1:ne[c.dataset.type]=1,N.setItem("sortTypeNames",ne)})),p.prefConfig.sortSite&&N.getItem("sortSiteNames",(e=>{(re=e||{})[c.dataset.name]?re[c.dataset.name]=re[c.dataset.name]+1:re[c.dataset.name]=1,N.setItem("sortSiteNames",re)}))},Z=(e,t)=>{w(t);let n=c;e||(l.appendBar(),l.closeOpenType(),l.con.style.display="",l.setFuncKeyCall(!0),n=window.getSelection().toString()?Ie||c:W(document)),l.tipsPos(n,u("copyOver")),clearTimeout(l.hideTips),l.hideTips=setTimeout((()=>{"1"==l.tips.style.opacity&&(l.tips.style.opacity=0)}),1500)};c.addEventListener("mousedown",Y,!0),c.addEventListener("mouseup",(e=>{e.stopPropagation&&e.stopPropagation()}),!0),c.addEventListener("click",(n=>{if(n&&n.stopPropagation&&n.stopPropagation(),Ie&&Ie.focus&&Ie.focus(),l.waitForShowTips)return le(c,0),n&&n.preventDefault&&n.preventDefault(),!1;if(q=!0,!D)return n&&n.preventDefault&&n.preventDefault(),!1;n||(n={});let a=/^(https?|ftp):/.test(D);if(l.batchOpening||s||V(),(1==p.prefConfig.multiline||2==p.prefConfig.multiline)&&B&&ke.test(c.dataset.url)&&-1!==B.indexOf("\n")&&!/^(c|show)/.test(c.dataset.url)&&(1==p.prefConfig.multiline||confirm(u("multiline")))){let e=B.split("\n");if(e.length>10&&!confirm(u("multilineTooMuch")))return;let t=0,r=c.target;c.target="_blank";let i=async()=>{D=await U(e[t++]),c.href=D,c.click(),t<e.length?setTimeout((()=>{i()}),p.prefConfig.multilineGap||1e3):c.target=r};return i(),c.href="",n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!1}if(-1!==D.indexOf("%input{"))return l.showCustomInputWindow(D,(e=>{D=e,c.href=e,c.click()})),n.preventDefault&&n.preventDefault(),void(n.stopPropagation&&n.stopPropagation());let o=D.match(/^find(\.addto\((.*?)\))?:(.*)/);if(o){n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation();let e=o[2],t=o[3];return!!t&&(e&&p.prefConfig.inPageRule&&0!==e.indexOf("@")&&(e="@"+e),-1!==t.indexOf("%input{")?l.showCustomInputWindow(t,(t=>{e?l.addToHighlightGroup(t,e):(l.searchJumperInPageInput.value=t,l.submitInPageWords(),l.waitForHide(0))})):e?l.addToHighlightGroup(t,e):(l.searchJumperInPageInput.value=t,l.submitInPageWords(),l.waitForHide(0)),!1)}if(/^javascript:/.test(r.url)){e,n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),t.targetElement=Ie,t.keywords=Ze(),D=D.replace(/^javascript:/,"");try{D=decodeURIComponent(D)}catch(n){}let r=/^[_a-zA-Z0-9]+$/.test(D)&&t[D]||new $(D);return r&&r(),!1}if(/^c(opy)?:/.test(r.url))return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!!D&&(-1!==D.indexOf("%input{")?l.showCustomInputWindow(D,(e=>{Z(!0,e.replace(/^c(opy)?:/,""))})):Z(n.isTrusted,D.replace(/^c(opy)?:/,"")),!1);if(/^paste:/.test(r.url)){let e=!1;if(Ie&&/INPUT|TEXTAREA/i.test(Ie.nodeName)&&"true"!=Ie.getAttribute("aria-readonly"))e=!0;else{let t=Ie;for(;t&&(e="true"==t.contentEditable,!e&&"BODY"!=t.nodeName.toUpperCase());)t=t.parentNode}if(e){if(!D)return!1;D=D.replace(/^paste:/,""),-1!==D.indexOf("%input{")?l.showCustomInputWindow(D,(e=>{De(Ie,e)})):D?De(Ie,D):void 0!==navigator.clipboard.readText&&navigator.clipboard.readText().then((e=>{De(Ie,e)}))}}else{if(/^\[/.test(r.url)){n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation();let e=JSON.parse(r.url);return l.batchOpen(e,{button:2,altKey:z||n.altKey,ctrlKey:O||n.ctrlKey,shiftKey:F||n.shiftKey,metaKey:R||n.metaKey},1===i),!1}if(/[:%]P{/.test(r.url)){if(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!1===D)return!1;let e=e=>{let t=e.match(/[:%]P{(.*)}/),n="";if(t)if(e=e.replace(t[0],""),t=t[1],'"'===t.charAt(0)&&'"'===t.charAt(t.length-1))n=t.substring(1,t.length-1);else{t=new URLSearchParams(t);let e={};t.forEach(((t,n)=>{e[n]=t})),n=JSON.stringify(e)}g({method:"POST",url:e,data:n,onload:e=>{k(e)},onerror:e=>{v(u("postError")+(e.statusText||e.error))},ontimeout:e=>{v(u("postError")+(e.statusText||e.error))}})};return-1!==D.indexOf("%input{")?l.showCustomInputWindow(D,(t=>{e(t)})):e(D),!1}if(r.charset&&"utf-8"!=r.charset||/[:%]p{/.test(r.url)){if(!1===D)return!1;let e=r.url.match(/#(j(umpFrom|f)?|from){(.*?)}/),t=t=>(e?(N.setItem("postUrl",[t,r.charset]),e=e[3],0!==e.indexOf("http")&&(e=t.replace(/(:\/\/.*?\/)[\s\S]*/,"$1"+e)),t=e):(N.setItem("postUrl",[t,r.charset]),t=t.replace(/(:\/\/.*?)\/[\s\S]*/,"$1").replace(/[:%]p{[\s\S]*/,"")),t);if(-1!==D.indexOf("%input{"))return l.showCustomInputWindow(D,(e=>{(e=t(e))&&(c.href=e,"_blank"===c.target?b(c.href,{active:!0,insert:!0}):location.href=c.href)})),n.preventDefault&&n.preventDefault(),void(n.stopPropagation&&n.stopPropagation());if(D=t(D),!D)return;c.href=D}}if(!F||O||R||z||!n.isTrusted){if(/^(chrome|edge|about|extension|moz-extension)/.test(D))return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),b(D,O?{active:!1,insert:!0}:{active:!0,insert:!0,close:!0}),!1;if((z||O||R||F)&&a){if((O||R)&&F)b(D,{incognito:!0});else if(O||R)b(D,{active:!1,insert:!0});else if(z){if(r.match){let e=r.match.replace(/\\/g,""),t=e.match(/\((www)\|([^\)\|]+)/);for(;t;)D=D.replace(t[1],t[2]),e=e.replace(t[0],""),t=e.match(/\(([^\)\|]+)\|([^\)\|]+)/)}let e=window.screen.availWidth||window.innerWidth||document.documentElement.clientWidth,t=window.screen.availHeight||window.innerHeight||document.documentElement.clientHeight,n=p.prefConfig.popupWidth,i=p.prefConfig.popupHeight,s=p.prefConfig.popupLeft,a=p.prefConfig.popupTop;i?(i=parseFloat(i),i*=t/100):i=Math.max(t/3*2,t-250),n?(n=parseFloat(n),n*=e/100):n=Math.min(e,650),s?(s=parseFloat(s),s=e/100*s-n/2):s=e-n-30,a?(a=parseFloat(a),a=t/100*a-i/2):a=(t-i)/2,l.closePopupWindow(),l.popupWindow=window.open(D+"#searchJumperMin"+(/#p{/.test(r.url)?"Post":""),"_blank",`width=${n}, height=${i}, location=0, resizable=1, status=0, toolbar=0, menubar=0, scrollbars=0, left=${s}, top=${a}`)}else F&&b(D,{active:!0,insert:!0});return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!1}return a&&"_blank"===c.getAttribute("target")&&!(z||O||R||F)&&0===n.button?(b(D,{active:!0,insert:!0}),n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!1):void 0}}),!0),c.addEventListener("auxclick",(e=>{if(q&&e.preventDefault)return e.preventDefault(),!1}),!0),c.addEventListener("contextmenu",(e=>{if(q&&e.preventDefault)return e.preventDefault(),!1}),!0);let ie=c.dataset.name;j&&(ie+=` (${r.ctrl?"Ctrl + ":""}${r.shift?"Shift + ":""}${r.alt?"Alt + ":""}${r.meta?"Meta + ":""}${j.replace("Key","")})`);let se=!1,ae=!1,oe=async(e,t,n)=>{if(l.tipsPos(e,'<span class="loader"></span><font>Loading...</font>'),ae=!1,t)try{t=t.replace(/^showTips:/,""),se=!0;let n=await l.anylizeShowTips(t,c.dataset.name,e);if(se=!1,0==l.tips.style.opacity||0!==l.tips.innerHTML.indexOf('<span class="loader">'))return void(ae=!0);Array&&Array.isArray&&Array.isArray(n)&&(h=n[1],n=n[0]),n&&("null"!=n&&"No result"!=n&&(n=`<div>${n}</div>`,ae=!0),l.tipsPos(e,n),V(),setTimeout((()=>{l.tips.style.pointerEvents="all"}),100))}catch(e){k(e)}},le=async(e,t=1e3)=>{if(e&&1===e.nodeType&&(l.preList&&(l.preList.style.visibility="hidden",l.listArrow.style.cssText=""),h=null,clearTimeout(l.requestShowTipsTimer),l.waitForShowTips=!1,l.tipsPos(e,ie),y)){l.stopInput=!0;let n=await U();l.stopInput=!1,n&&l.lastUrl===n?se?l.tipsPos(e,"<span class='loader'></span><font>Loading...</font>"):oe(e,n):(l.waitForShowTips=!0,l.requestShowTipsTimer=setTimeout((async()=>{n=n||await U(),n&&(-1===n.indexOf("%input{")?(l.lastUrl=n,oe(e,n),l.waitForShowTips=!1):l.showCustomInputWindow(n,(t=>{n=t,oe(e,n)})))}),t))}},ce=!1;c.addEventListener("touchend",(e=>{e.stopPropagation&&e.stopPropagation(),y&&(ce=!0,l.waitForShowTips=!0)}),!1);return c.addEventListener("mouseenter",(e=>{if(e.stopPropagation&&e.stopPropagation(),!ae||l.lastTips!==c||1!=l.tips.style.opacity){if(l.lastTips=c,y){if(ce)return void(ce=!1);if(J){if(!(l.searchJumperInputKeyWords.value||Ze()))return l.waitForShowTips=!0,void l.tipsPos(c,ie)}}le(c)}}),!0),c.addEventListener("mousemove",(e=>{(e=>{if(l.funcKeyCall||p.prefConfig.noAni)return;let t=l.con.classList.contains("search-jumper-left")||l.con.classList.contains("search-jumper-right"),n=[],r=c.getBoundingClientRect(),i=t?Math.abs(e.clientY-r.top)/r.height:Math.abs(e.clientX-r.left)/r.width,s=.1;c.style.setProperty("--scale",1.1+s),n.push(c);let a=c.previousElementSibling;if(a&&/^A$/i.test(a.nodeName)){a.style.setProperty("--scale",1.1+.1*(1-i)),n.push(a);let e=a.previousElementSibling;e&&/^A$/i.test(e.nodeName)&&(e.style.setProperty("--scale",1+s*(1-i)),n.push(e))}let o=c.nextElementSibling;if(o&&/^A$/i.test(o.nodeName)){o.style.setProperty("--scale",1.1+.1*i),n.push(o);let e=o.nextElementSibling;e&&/^A$/i.test(e.nodeName)&&(e.style.setProperty("--scale",1+s*i),n.push(e))}l.dockerScaleBtns.forEach((e=>{-1===n.indexOf(e)&&e.style.setProperty("--scale",1)})),l.dockerScaleBtns=n})(e),l.clingPos(c,l.tips)}),!1),c.addEventListener("showTips",(e=>{l.appendBar(),l.closeOpenType(),l.con.style.display="",l.setFuncKeyCall(!0),le(Ie,0)}),!1),c.addEventListener("mouseleave",(e=>{ae||(l.tips.style.opacity=0,clearTimeout(l.requestShowTipsTimer))}),!1),c.addEventListener("drop",(e=>{l.searchBySiteName(d,e)}),!1),c.addEventListener("dragover",(e=>{e.preventDefault()}),!1),c}closePopupWindow(){p.prefConfig.closePopupWhenClick&&this.popupWindow&&(this.popupWindow.close(),this.popupWindow=null)}closeOpenType(){let e=this.bar.querySelector(".search-jumper-type.search-jumper-open>span");if(e)if(this.funcKeyCall=!1,e.onmousedown)e.onmousedown();else{let t=new PointerEvent("mousedown");e.dispatchEvent(t)}}addToHighlightGroup(e,t){let n=p.prefConfig.inPageRule[t];if(n){let t=n.match(/^\/(.*)\/([il]*)$/);n=t?`/${t[1]}|${e}/${t[2]||""}`:`/${n}|${e}/`}else n=`/${e}/`;p.prefConfig.inPageRule[t]=n,N.setItem("searchData",p),this.refreshPageWords(this.lockWords)}streamUpdate(e){this.streamUpdateCallBack&&this.streamUpdateCallBack(e)}async anylizeShowTips(e,t,n){let r,i=this;try{const s=/([^\\]|^)([\+\-*/])([\d\.]+)$/,a=/\|cache\=(\d+)$/,o=/%p(\{+)/,l=/#headers({.*?})/,c=/#stream({(.*?)})?/,p=/.then{(.*?)}/;if(e=e.replace(/^showTips:/,"").replace(/{name}/g,t).trim(),/^https?:/.test(e)){let t=e.split("\n");1==t.length&&(t=e.split(" ")),t=t[0],e=e.replace(t,"").trim().replace(/\\{/g,"showTipsLeftBrace").replace(/\\}/g,"showTipsRightBrace").replace(/{url}/g,"【SEARCHJUMPERURL】");let h=t.match(a);h?(h=parseInt(h[1]),t=t.replace(a,"")):h=7200;let d=Date.now()/1e3,u=V.filter((e=>d<e.time&&(r||e.url!=t||(r=e.data),!0)));u.length!=V.length&&(V=u,N.setItem("tipsStorage",V));let m=[],f=(t,n)=>{let r=e,i=!0;for(;n;){let e=n[1].replace(/\\\|/g,"【searchJumperJsonSplit】").split("|"),a=e[0].replace(/【searchJumperJsonSplit】/g,"|").replace(/\[(\d+)\]/g,".$1").replace(/\[all\]/g,".all").split("."),o=t,l=null;if(a.shift(),a.forEach((e=>{if(l){let t=[];for(let n=0;n<l.length;n++){let r=l[n];r&&(r=Array.isArray(r)&&r.at?r.at(e):r[e]),t.push(r)}l=t}else if(o&&(Array.isArray(o)?"all"===e?l=o:o=o.at?o.at(e):o[e]:o=o[e]),!o)return null})),l&&(o=l.join("")),1!=e.length){let t=e[1],n=t.match(s);if(n){let e=[];for(;n;)t=t.replace(s,"$1"),e.unshift([n[2],n[3]]),n=t.match(s);e.forEach((e=>{let t=parseFloat(e[1]);switch(e[0]){case"+":o+=t;break;case"-":o-=t;break;case"*":o*=t;break;case"/":o/=t}})),o=o.toFixed(2)}else{let e=t.match(/^\/(.*)\/(\w?)$/),n=e?new RegExp(e[1],e[2]):new RegExp(t),r=o.match(n);r&&(o=r[1])}}o?i=!1:o="",m.push(o),r=r.replace(n[0],o),n=r.match(/{(.*?)}/)}return i&&console.log("Error:",t),r=r.replace(/showTipsLeftBrace/g,"{").replace(/showTipsRightBrace/g,"}"),r},g=e.match(/{(.*?)}/);if(r)g&&0===g[1].indexOf("json")&&(e=e.replace(/【SEARCHJUMPERURL】/g,t),r=f(r,g),r=[r,"\n"+m.join(",")]);else{let s,a=t.match(o),d={},u=t;if(a){let e=a[1].length;if(a=t.match(new RegExp(`%p{+(.*?)}{${e}}`)),a){let e=a[1];if(0===e.indexOf("%"))try{e=decodeURIComponent(e)}catch(e){}d.body=e,d.method="POST",u=u.replace(a[0],"")}}let m=t.match(l);if(m){let e=m[1];if(0===e.indexOf("%")||1===e.indexOf("%"))try{e=decodeURIComponent(e)}catch(e){}d.headers=JSON.parse(e),u=u.replace(m[0],"")}let y,v=!1,w=g&&0===g[1].indexOf("json"),b=t.match(c);if(b)d.responseType="stream",d.streamMode=b[2]||"concat",u=u.replace(b[0],""),r=await new Promise((t=>{d.onstream=e=>{let r;if(w){if(r=e.json(),!r)return;r=f(r,g)}else r=e.text;i.tipsPos(n,r),i.tips.style.pointerEvents="all",t&&t(r)},y=j(u,d).then((t=>(e=e.replace(/【SEARCHJUMPERURL】/g,t.finalUrl),w?t.json():t.text))),y.then((e=>{let r=w?e&&f(e,g):e;r&&(i.tipsPos(n,r),t&&t(r))}))})),r||(r="No result",v=!0);else if(w){let t=[];y=j(u,d).then((t=>(e=e.replace(/【SEARCHJUMPERURL】/g,t.finalUrl),t.json()))),r=await y.then((e=>{if(!e)return null;return s=e,f(e,g)})),r||(r="No result",v=!0),r=[r,"\n"+t.join(",")]}else{let n,i=!1,a=u.match(p),o=[];for(;a;){let e=a[1];o.push(e),u=u.replace(a[0],""),a=u.match(p)}for(y=j(u,d).then((t=>(-1!=e.indexOf("【SEARCHJUMPERURL】")&&(e=e.replace(/【SEARCHJUMPERURL】/g,t.finalUrl),i=!0),t.text())));o.length;){let e=o.shift(),t=await y.then((t=>{let n=document.implementation.createHTMLDocument("");n.documentElement.innerHTML=S(t);let r=H(e,n);if(!r)return null;let i=n.querySelector("base");return rt(r.getAttribute("href"),i?i.href:u)}));if(!t)return"No result";y=j(t).then((e=>e.text()))}r=await y.then((t=>{if(!e)return t;let r=document.implementation.createHTMLDocument("");r.documentElement.innerHTML=S(t),n=r.title;let s=e;for(;g;){let e="";if("title"==g[1])e=r.title;else{let t=g[1].split("|"),n=O(t[0],r);if(n&&n.length)if(i=!0,1==t.length)e=n[0].innerText;else{let r=t[1],i=r.match(/\(.*?\)/g);i?[].forEach.call(n,(n=>{let s=t[1];i.forEach((e=>{"()"===e?s=s.replace(e,n.innerText):(r=e.match(/\((.*)\)/)[1],s=s.replace(e,n.getAttribute(r)||n[r]))})),e+=s})):e=n[0].getAttribute(r)||n[0][r]}}s=s.replace(g[0],e),g=s.match(/{(.*?)}/)}return i?(s=s.replace(/showTipsLeftBrace/g,"{").replace(/showTipsRightBrace/g,"}"),s):null})),r?this.insertHistoryUrl(t,n):(r="No result",v=!0),r=[r,t],s=r}v||(r=this.calcResult(r),V.push({url:t,data:s,time:Date.now()/1e3+h}),V.length>50&&V.shift(),N.setItem("tipsStorage",V))}}else if(r=/\breturn\b/.test(e)?await new $("fetch","storage","name",'"use strict";'+e)(j,N,t):e,r=this.calcResult(r),Ie&&Ie.href){let e=Ie.title||Ie.alt||Ie.innerText;this.insertHistoryUrl(Ie.href,e)}}catch(e){k(e)}return r}calcResult(e){let t="string"==typeof e,n=t?e:e[0];const r=/([\+\-*/])([\d\.]+)/;let i=n.match(/{([\d\.]+)(([\+\-*/][\d\.]+)+)}/);if(i){let e=[],t=i[0],s=parseFloat(i[1]),a=i[2];for(i=a.match(r);i;)a=a.replace(i[0],""),e.push([i[1],i[2]]),i=a.match(r);e.forEach((e=>{let t=parseFloat(e[1]);switch(e[0]){case"+":s+=t;break;case"-":s-=t;break;case"*":s*=t;break;case"/":s/=t}})),s=s.toFixed(2),n=n.replace(t,s)}return t?e=n:e[0]=n,e}insertHistoryUrl(e,n){if(-1===e.indexOf(location.host))return;let r=location.href,i=document.title;t.history.pushState("",n,e),document.title=n,t.history.replaceState("",i,r),document.title=i}checkScroll(e,t){if(this.funcKeyCall||"none"==this.bar.style.display)return;let n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;if(this.bar.scrollWidth>n||this.bar.scrollHeight>r?this.con.classList.contains("search-jumper-scroll")||(this.bar.style.cssText="",this.con.classList.add("search-jumper-scroll"),this.con.style.display=""):this.con.classList.contains("search-jumper-scroll")&&(this.bar.style.cssText="",this.con.classList.remove("search-jumper-scroll")),e)return;let i=this.bar.querySelector(".search-jumper-type.search-jumper-open");i&&("0px"===i.style.width&&(i.style.width="auto"),"0px"===i.style.height&&(i.style.height="auto"),i!=this.bar.firstElementChild&&setTimeout((()=>{i.scrollIntoView(t?{}:{behavior:"smooth"})}),0))}reopenType(e){let t=new PointerEvent("mousedown");e.parentNode.classList.contains("search-jumper-open")&&(e.onmousedown?e.onmousedown():e.dispatchEvent(t)),e.onmousedown?e.onmousedown():e.dispatchEvent(t)}showInPage(e,t){if(this.contains(Ie)||this.inInput&&Ee||!e&&this.funcKeyCall)return;Ee&&Ee.parentNode||(Ee=x(Se),I||this.addToShadow(Ee));let n=Ye();if(e&&n&&n.length<(p.prefConfig.limitPopupLen||1))return;if(this.con&&this.con.classList.contains("search-jumper-showall"))return;if(p.prefConfig.hidePopup&&(e=!1),Ie){if(!(n||Ie==W(document)||"searchJumper"==Ie.className&&/^MARK$/i.test(Ie.nodeName))){let e,t=Ie;for(;t&&t.nodeName&&!/^(img|audio|video|a)$/i.test(t.nodeName);){if(t.parentNode){if(/^(img|audio|video|a)$/i.test(t.parentNode.nodeName)){t=t.parentNode;break}if(e=t.parentNode.querySelectorAll("audio,video"),e&&1!==e.length&&(e=t.parentNode.querySelectorAll("img")),e&&1!==e.length&&(e=t.parentNode.querySelectorAll("a")),e&&1===e.length){e[0].scrollHeight&&t.scrollHeight/e[0].scrollHeight<2&&(t=e[0]);break}}t=t.parentNode}t&&(Ie=t)}}else Ie=W(document);this.appendBar();let r=this;this.hideTimeout&&clearTimeout(this.hideTimeout);var i=p.prefConfig.autoDelay||1e3;p.prefConfig.autoHide&&(this.hideTimeout=setTimeout((()=>{r.bar.classList.remove("search-jumper-isInPage"),r.bar.classList.remove("search-jumper-isTargetImg"),r.bar.classList.remove("search-jumper-isTargetAudio"),r.bar.classList.remove("search-jumper-isTargetVideo"),r.bar.classList.remove("search-jumper-isTargetLink"),r.bar.classList.remove("search-jumper-isTargetPage"),r.bar.classList.remove("initShow"),r.hideTimeout=null}),i)),this.bar.classList.remove("search-jumper-isInPage"),this.bar.classList.remove("search-jumper-isTargetImg"),this.bar.classList.remove("search-jumper-isTargetAudio"),this.bar.classList.remove("search-jumper-isTargetVideo"),this.bar.classList.remove("search-jumper-isTargetLink"),this.bar.classList.remove("search-jumper-isTargetPage"),this.bar.classList.remove("initShow"),this.tips.style.opacity=0,this.tips.style.display="none",this.tips.style.transition="none",this.tips.innerHTML=S(""),setTimeout((()=>{this.bar.classList.add("initShow")}),10);let s,a,o="",l="";if(n)if(this.bar.classList.add("search-jumper-isInPage"),"none"==this.bar.style.display||e)o="needInPage";else{let e=this.bar.querySelector(".search-jumper-type.search-jumper-open");(!e||e.classList.contains("notmatch")||e.classList.contains("search-jumper-targetPage")||e.classList.contains("search-jumper-targetImg")||e.classList.contains("search-jumper-targetAudio")||e.classList.contains("search-jumper-targetVideo")||e.classList.contains("search-jumper-targetLink"))&&(o="needInPage")}else{switch(1==Ie.children.length&&"A"===Ie.children[0].nodeName.toUpperCase()&&(Ie=Ie.children[0]),Ie.nodeName.toUpperCase()){case"IMG":this.bar.classList.add("search-jumper-isTargetImg"),o="targetImg";break;case"AUDIO":this.bar.classList.add("search-jumper-isTargetAudio"),o="targetAudio";break;case"VIDEO":this.bar.classList.add("search-jumper-isTargetVideo"),o="targetVideo";break;case"A":this.bar.classList.add("search-jumper-isTargetLink"),o="targetLink"}let e=Ie.parentNode;e&&"A"===e.nodeName.toUpperCase()&&(this.bar.classList.add("search-jumper-isTargetLink"),o?l="targetLink":o="targetLink"),o||(this.bar.classList.add("search-jumper-isTargetPage"),o="targetPage"),o||(o="targetAll")}if("none"==this.bar.style.display&&(this.bar.style.display=""),o&&(s=this.bar.querySelector(`.search-jumper-${o}:not(.notmatch)>span`),a=this.bar.querySelectorAll(`.search-jumper-${o}:not(.notmatch)>a>img`)),r.setFuncKeyCall(!1),s&&(!p.prefConfig.disableAutoOpen&&!p.prefConfig.disableTypeOpen||e)){let e=this.bar.querySelectorAll(`.search-jumper-${o}:not(.notmatch)>span:first-child`);[].forEach.call(e,(e=>{e!==s&&r.reopenType(e)})),r.reopenType(s),r.insertHistory(s.parentNode),l&&(e=this.bar.querySelectorAll(`.search-jumper-${l}:not(.notmatch)>span:first-child`),[].forEach.call(e,(e=>{e!==s&&r.reopenType(e)})),r.reopenType(s))}if(e||!p.prefConfig.disableAutoOpen&&!p.prefConfig.disableTypeOpen||this.closeOpenType(),r.setFuncKeyCall(e),e){a&&[].forEach.call(a,(e=>{"none"!=e.parentNode.style.display&&e.dataset.src&&(e.src=e.dataset.src,delete e.dataset.src)})),r.con.classList.remove("search-jumper-scroll"),r.bar.style.cssText="",r.con.style.cssText="";let e=window.innerWidth||document.documentElement.clientWidth,n=document.documentElement.scrollLeft||document.body.scrollLeft,i=window.innerHeight||document.documentElement.clientHeight,s=p.prefConfig.tileOffset||0,o=function(e){return 0===e.type.indexOf("touch")?e.changedTouches?e.changedTouches[0].pageX:0:e.pageX}(t)-r.bar.clientWidth/2-("static"!==getComputedStyle(document.documentElement).position?document.documentElement.offsetLeft:0);o<0?o=5:o+r.bar.clientWidth>e+n&&(o=e+n-r.bar.clientWidth-20);let l=function(e){return 0===e.type.indexOf("touch")?e.changedTouches?e.changedTouches[0].pageY:0:e.pageY}(t);D(t)>i/5?l-=r.bar.clientHeight+20+s:l+=20+s,J(t)<e/2?(r.bar.style.left=o+n+"px",r.bar.style.transformOrigin="0 0"):(r.bar.style.right=e-o-r.bar.clientWidth-15+"px",r.bar.style.transformOrigin="100% 0"),r.bar.style.top=l+"px",r.removeBar(),r.bar.style.opacity=0,setTimeout((()=>{r.appendBar(),setTimeout((()=>{r.bar.style.opacity=1,setTimeout((()=>{let e=document.querySelector("#saladict-saladbowl-root>.saladict-external");if(e){let n=e.shadowRoot.querySelector(".saladbowl");n.style.transform=n.style.transform.replace(/\d+px\)/,t.clientY-15+"px)")}}),100)}),1)}),1)}else r.bar.style.display="",r.initPos()}setFuncKeyCall(e){this.funcKeyCall=e,this.con.classList.contains("search-jumper-showall")||(e?this.con.classList.add("funcKeyCall"):this.con.classList.remove("funcKeyCall"))}initPos(e,t,n,r){this.preList&&(this.preList.style.visibility="hidden",this.preList.style.opacity=0,this.listArrow.style.cssText=""),void 0===e&&(e=p.prefConfig.position.x),void 0===t&&(t=p.prefConfig.position.y),void 0===n&&(n=p.prefConfig.offset.x),void 0===r&&(r=p.prefConfig.offset.y);let i=this,s=e=>{if(i.bar.style.cssText="",i.con.style.cssText="",i.con.className="search-jumper-searchBarCon "+e,p.prefConfig.resizePage)switch(void 0===i.initBodyStyle?i.initBodyStyle=W(document).style.cssText:W(document).style.cssText=i.initBodyStyle,i.con.classList.add("resizePage"),W(document).style.position="absolute",e){case"search-jumper-left":W(document).style.width=`calc(100% - ${42*i.scale}px)`,W(document).style.right="0px";break;case"search-jumper-right":W(document).style.width=`calc(100% - ${42*i.scale}px)`,W(document).style.left="0px";break;case"search-jumper-bottom":W(document).style.width="100%",W(document).style.height=`calc(100% - ${42*i.scale}px)`,W(document).style.top="0px",W(document).style.overflow="auto";break;default:W(document).style.width="100%",W(document).style.height=`calc(100% - ${42*i.scale}px)`,W(document).style.bottom="0px",W(document).style.overflow="auto"}else p.prefConfig.autoHideAll&&i.con.classList.add("hideAll");let t=40*i.scale;setTimeout((()=>{let e=i.con.classList.contains("search-jumper-left")||i.con.classList.contains("search-jumper-right");de.forEach((n=>{if(n.classList.contains("search-jumper-open")){let t=Math.max(n.scrollWidth,n.scrollHeight);t&&(t+="px",e?(n.style.width="",n.style.height=t):(n.style.width=t,n.style.height=""))}else e?(n.style.width="",n.style.height=t+"px"):(n.style.width=t+"px",n.style.height="")}))}),1)};n<0&&(n=0),r<0&&(r=0),"center"==e&&"top"==t?(s(""),i.bar.style.position="relative"):"left"==e&&"top"==t?n>r?(s(""),i.bar.style.position="fixed",i.bar.style.left=n+"px"):(s("search-jumper-left"),i.bar.style.position="fixed",i.bar.style.top=r+"px"):"right"==e&&"top"==t?n>r?(s(""),i.bar.style.position="fixed",i.bar.style.right=n+"px"):(s("search-jumper-right"),i.bar.style.position="fixed",i.bar.style.top=r+"px"):"center"==e&&"bottom"==t?(s("search-jumper-bottom"),i.bar.style.position="relative"):"left"==e&&"bottom"==t?n>r?(s("search-jumper-bottom"),i.bar.style.position="fixed",i.bar.style.left=n+"px",i.bar.style.bottom="0px",i.bar.style.top="unset"):(s("search-jumper-left"),i.bar.style.position="fixed",i.bar.style.bottom=r+"px"):"right"==e&&"bottom"==t?n>r?(s("search-jumper-bottom"),i.bar.style.position="fixed",i.bar.style.right=n+"px",i.bar.style.bottom="0px",i.bar.style.top="unset"):(s("search-jumper-right"),i.bar.style.position="fixed",i.bar.style.bottom=r+"px"):"left"==e&&"center"==t?(s("search-jumper-left"),i.bar.style.position="relative",i.bar.style.marginTop=r+"px",i.con.style.display="flex",i.con.style.justifyContent="center"):"right"==e&&"center"==t&&(s("search-jumper-right"),i.bar.style.position="absolute",i.bar.style.marginTop=r+"px",i.con.style.display="flex",i.con.style.justifyContent="center",i.con.style.alignItems="flex-end"),p.prefConfig.position.x=e,p.prefConfig.position.y=t,p.prefConfig.offset.x=n,p.prefConfig.offset.y=r,p.prefConfig.disableAutoOpen||p.prefConfig.disableTypeOpen?i.checkScroll(!1,!0):setTimeout((()=>{let e=i.bar.querySelector(".search-jumper-type.search-jumper-open");e&&(e.style.transition="none",e.style.width="auto",e.style.height="auto",setTimeout((()=>{e.style.width=e.scrollWidth+"px",e.style.height=e.scrollHeight+"px",setTimeout((()=>{e.style.transition=""}),1),i.checkScroll(!1,!0)}),0))}),251)}}const Ne=new class{constructor(){this.clickedIndex=0,this.signList=[],this.clickedEles={},this.exact=!0,this.accu=0,this.wheelScrolling=!1}getSelector(e,t=!0){this.exact=t,this.close(),this.toggle(),this.callback=e}init(){if(this.inited)return;this.inited=!0;let e=this;x("\n                 body.searchJumper-picker,\n                 body.searchJumper-picker *:hover,\n                 body.searchJumper-picker a:hover {\n                   cursor: crosshair !important;\n                 }\n                 .select-rect {\n                   position: fixed;\n                   z-index: 2147483647;\n                   background: none;\n                   border: 1px dashed rgba(120, 170, 210, 0.8);\n                 }\n                 .select-rect>.dot {\n                   width: 10px;\n                   height: 10px;\n                   border: 2px solid #000;\n                   border-radius: 50%;\n                   background-color: white;\n                   position: absolute;\n                 }\n                 .select-rect>.top-left {\n                   top: -5px;\n                   left: -5px;\n                 }\n                 .select-rect>.top-right {\n                   top: -5px;\n                   right: -5px;\n                 }\n                 .select-rect>.bottom-left {\n                   bottom: -5px;\n                   left: -5px;\n                 }\n                 .select-rect>.bottom-right {\n                   bottom: -5px;\n                   right: -5px;\n                 }\n                 .select-rect>.top {\n                   top: -5px;\n                   left: calc(50% - 5px);\n                 }\n                 .select-rect>.right {\n                   top: calc(50% - 5px);\n                   right: -5px;\n                 }\n                 .select-rect>.left {\n                   top: calc(50% - 5px);\n                   left: -5px;\n                 }\n                 .select-rect>.bottom {\n                   bottom: -5px;\n                   left: calc(50% - 5px);\n                 }\n                ");let t,n=t=>{if(!t)return;if(e.callback){if(t){let n=e.geneSelector(t,e.exact);e.callback(n),e.close()}return}let n=e.createSignDiv();e.clickedEles[e.clickedIndex]=t,e.appendSign(n,t,e.clickedIndex),e.clickedIndex++,q.con.classList.add("selectedEle")};this.initSelectRect(),this.mainSignDiv=this.createSignDiv(),this.setImportant(this.mainSignDiv,"pointer-events","none"),this.setImportant(this.mainSignDiv,"background","rgba(120, 170, 210, 0.3)"),this.moveHandler=r=>{if(r.target!==document)if(e.inPicker&&r.preventDefault(),e.rectSelecting)e.mainSignDiv.parentNode&&e.mainSignDiv.parentNode.removeChild(e.mainSignDiv),e.selectRect.parentNode||W(document).appendChild(e.selectRect),e.createSelectRect({x:r.clientX,y:r.clientY});else{if(e.creatingRect)return;{let i=e.getTarget(r.target);e.mainSignDiv.parentNode!==i.parentNode&&i.parentNode.appendChild(e.mainSignDiv),e.adjustSignDiv(e.mainSignDiv,i),(r.ctrlKey||r.metaKey)&&(clearTimeout(t),t=setTimeout((()=>{let t=e.cleanTarget(r.target);n(t)}),5))}}},this.leaveHandler=t=>{e.mainSignDiv.parentNode&&e.mainSignDiv.parentNode.removeChild(e.mainSignDiv)},this.clickHandler=t=>{if(e.inPicker&&(t.stopPropagation(),t.preventDefault()),e.creatingRect)return;if(e.rectSelecting)return e.selectRect.parentNode&&e.selectRect.parentNode.removeChild(e.selectRect),e.rectSelecting=!1,void q.bar.classList.remove("rectSelecting");let r=e.getTarget(t.target);n(r)},this.mouseDownHandler=t=>{e.rectSelecting=!0,q.bar.classList.add("rectSelecting"),e.rectInitPos={x:t.clientX,y:t.clientY},t.stopPropagation(),t.preventDefault()},this.mouseUpHandler=t=>{e.rectSelecting=!1,q.bar.classList.remove("rectSelecting"),e.creatingRect||e.selectRect.parentNode&&(e.selectRect.parentNode.removeChild(e.selectRect),e.finishSelectRect(),t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault())},this.wheelHandler=t=>{if(t.preventDefault(),t.stopPropagation(),e.wheelScrolling)return;let n;if(e.wheelScrolling=!0,setTimeout((()=>{e.wheelScrolling=!1}),100),"wheel"!==t.type){let e=0;"number"==typeof t.axis?2==t.axis&&(e=t.detail):void 0!==t.wheelDeltaY&&0==t.wheelDeltaY||(e=-t.wheelDelta/40),n=e}else n=t.deltaY;n>0?e.accu--:e.accu++,e.accu<0?e.accu=0:e.accu>8&&(e.accu=8);let r=e.getTarget(t.target);e.mainSignDiv.parentNode!==r.parentNode&&r.parentNode.appendChild(e.mainSignDiv),e.adjustSignDiv(e.mainSignDiv,r)}}initSelectRect(){this.waitToRemoveSigns=[],this.waitToAddSigns=[];let e=document.createElement("div");e.innerHTML=S('\n                  <div class="dot top-left"></div>\n                  <div class="dot top-right"></div>\n                  <div class="dot bottom-left"></div>\n                  <div class="dot bottom-right"></div>\n                  <div class="dot top"></div>\n                  <div class="dot right"></div>\n                  <div class="dot left"></div>\n                  <div class="dot bottom"></div>\n                '),e.className="select-rect",this.selectRect=e}createSelectRect(e){this.rectToPos=e,this.creatingRect||(this.creatingRect=!0,setTimeout((()=>{this.creatingRect=!1,this.selectRect.style.left=Math.min(this.rectToPos.x,this.rectInitPos.x)+"px",this.selectRect.style.top=Math.min(this.rectToPos.y,this.rectInitPos.y)+"px",this.selectRect.style.width=Math.abs(this.rectToPos.x-this.rectInitPos.x)+"px",this.selectRect.style.height=Math.abs(this.rectToPos.y-this.rectInitPos.y)+"px",this.checkRectAndSign(),this.rectSelecting||this.mouseUpHandler()}),100))}finishSelectRect(){let e=this;this.waitToRemoveSigns.forEach((t=>{e.removeSign(t)})),this.waitToAddSigns.forEach((e=>{delete e.dataset.recttemp})),this.waitToRemoveSigns=[],this.waitToAddSigns=[],this.signList.length?q.con.classList.add("selectedEle"):q.con.classList.remove("selectedEle")}checkRectAndSign(){if(!this.domInfo)return;let e=this;this.waitToRemoveSigns.forEach((e=>{e.style.opacity=""})),this.waitToRemoveSigns=[],this.signList.forEach((t=>{let n=t[0];if(n.dataset.recttemp)return;let r=n.getBoundingClientRect(),i=e.selectRect.getBoundingClientRect();e.compareRect(r,i)?(n.style.opacity="0",e.waitToRemoveSigns.push(n)):n.style.opacity=""})),this.waitToAddSigns.forEach((t=>{e.removeSign(t)})),this.waitToAddSigns=[],0===this.waitToRemoveSigns.length&&(this.curRectInfo={},this.rectInitPos.x<this.rectToPos.x?(this.curRectInfo.left=this.rectInitPos.x,this.curRectInfo.right=this.rectToPos.x):(this.curRectInfo.left=this.rectToPos.x,this.curRectInfo.right=this.rectInitPos.x),this.rectInitPos.y<this.rectToPos.y?(this.curRectInfo.top=this.rectInitPos.y,this.curRectInfo.bottom=this.rectToPos.y):(this.curRectInfo.top=this.rectToPos.y,this.curRectInfo.bottom=this.rectInitPos.y),this.compareDomWithRect(this.domInfo),this.signDomWithRect(this.domInfo))}compareDomWithRect(e){if(e.children&&e.children.length>0){let t=0;for(let n=0;n<e.children.length;n++){let r=e.children[n];this.compareDomWithRect(r)&&t++}if(t===e.children.length){let t=e.target.getBoundingClientRect();if(t.width&&t.height)return e.sign=!0,!0}}else if(this.compareRect(this.curRectInfo,e.target.getBoundingClientRect()))return e.sign=!0,!0;return e.sign=!1,!1}signDomWithRect(e){if(e.sign){let t=this.createSignDiv();t.dataset.recttemp=1,e.target.parentNode.appendChild(t),this.adjustSignDiv(t,e.target),this.signList.push([t,e.target]),this.waitToAddSigns.push(t)}else if(e.children&&e.children.length>0)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.signDomWithRect(n)}}compareRect(e,t){return t.width&&t.height&&e.left<=t.right&&e.right>=t.left&&e.top<=t.bottom&&e.bottom>=t.top}cleanTarget(e){if(!e||"searchJumperSign"==e.className)return null;if(!(e=this.getTarget(e)))return null;for(let t in this.clickedEles){let n=this.clickedEles[t];try{if(n==e||n.contains(e)||e.contains(n))return null}catch(e){return null}}return e}appendSign(e,t,n){t.dataset&&(t.dataset.signNum=parseInt(t.dataset.signNum||0)+1),e.dataset.target=n,t.parentNode.appendChild(e),this.adjustSignDiv(e,t),this.signList.push([e,t])}removeSign(e){e.parentNode&&e.parentNode.removeChild(e);for(let t=0;t<this.signList.length;t++){if(this.signList[t][0]===e){this.signList.splice(t,1);break}}let t=e.dataset.target,n=this.clickedEles[t];if(!n)return;let r=parseInt(n.dataset.signNum||0)-1;n.dataset.signNum=r,r<=0&&delete this.clickedEles[t]}getTarget(e){let t=this.accu;for(;e&&t;){let n=e.parentNode;if(!n)break;e=n,t--}for(;e.parentNode&&(0===e.offsetWidth||0===e.offsetHeight);)e=e.parentNode;return e}close(){this.mainSignDiv&&(this.rectSelecting&&(this.selectRect.parentNode&&this.selectRect.parentNode.removeChild(this.selectRect),this.finishSelectRect(),this.rectSelecting=!1),this.callback=null,this.domInfo=null,this.clearSigns(),this.clickedEles={},this.mainSignDiv.parentNode&&this.mainSignDiv.parentNode.removeChild(this.mainSignDiv),W(document).classList.remove("searchJumper-picker"),q.con.classList.remove("selectedEle"),q.con.removeEventListener("mouseenter",this.leaveHandler,!0),W(document).removeEventListener("mousemove",this.moveHandler,!0),W(document).removeEventListener("click",this.clickHandler,!0),W(document).removeEventListener("mousedown",this.mouseDownHandler,!0),W(document).removeEventListener("mouseup",this.mouseUpHandler,!0),W(document).removeEventListener(Qe(),this.wheelHandler,{passive:!1,capture:!0}),this.inPicker=!1)}setImportant(e,t,n){e.style.setProperty(t,n,"important")}createSignDiv(){let e=document.createElement("div");return this.setImportant(e,"position","absolute"),this.setImportant(e,"z-index","2147483647"),this.setImportant(e,"background","rgba(120, 170, 210, 0.6)"),this.setImportant(e,"transition","all 0.15s ease-out"),this.setImportant(e,"box-shadow","rgb(0 0 0) 0px 0px 3px 0px"),this.setImportant(e,"cursor","pointer"),e.className="searchJumperSign",e.addEventListener("mouseenter",(e=>{this.mainSignDiv.parentNode&&this.mainSignDiv.parentNode.removeChild(this.mainSignDiv)}),!0),e.addEventListener("mousedown",(t=>{t.stopPropagation(),t.preventDefault(),this.removeSign(e)}),!0),e}adjustSignDiv(e,t){this.setImportant(e,"width",t.offsetWidth+"px"),this.setImportant(e,"height",t.offsetHeight+"px");let n=t.offsetLeft,r=t.offsetTop;if(t.offsetParent&&e.offsetParent&&t.offsetParent!==e.offsetParent){let i=e.offsetParent.getBoundingClientRect(),s=t.offsetParent.getBoundingClientRect();n+=s.left-i.left,r+=s.top-i.top}this.setImportant(e,"left",n+"px"),this.setImportant(e,"top",r+"px")}geneSelector(e,t){let n=e.nodeName.toLowerCase();if("html"!==n&&"body"!==n)if(t&&e.id&&/^[a-z\-_][\w\-_]+$/i.test(e.id))n="#"+e.id;else{if(e.className){let t=e.classList.length;n+=[].map.call(e.classList,(e=>/^[a-z][\w]+$/i.test(e)||t<3&&/^[a-z\-_][\w\-_]+$/i.test(e)?"."+e:"")).join("")}let r=e.parentElement;if(r&&(n=this.geneSelector(r,!!t)+" > "+n,t&&r.children.length>1&&!/^HTML$/i.test(r.nodeName))){let t,i=0,s=0;for(t=0;t<r.children.length&&!(r.children[t].nodeName==e.nodeName&&(s++,r.children[t]==e&&(i=s),i>0&&s>1));t++);n+=1==s?"":`:nth-of-type(${i})`}}return n}copy(){let e="",t="";this.signList.forEach((n=>{t+="\n"+n[1].innerText,e+=n[1].outerHTML})),t=t.trim();const n=new Blob([e],{type:"text/html"}),r=new Blob([t],{type:"text/plain"});try{const e=new ClipboardItem({"text/html":n,"text/plain":r});navigator.clipboard.write([e]).then((()=>{v("Copied successfully!")}),(e=>{w(t),console.log(e)}))}catch(e){w(t)}}openLinks(){if(!window.confirm(u("batchOpenConfirm")))return;let e=[];this.signList.forEach((t=>{let n=t[1];n.href?/^(http|ftp)/i.test(n.href)&&-1===e.indexOf(n.href)&&e.push(n.href):n.parentNode&&n.parentNode.href?/^(http|ftp)/i.test(n.parentNode.href)&&-1===e.indexOf(n.parentNode.href)&&e.push(n.parentNode.href):n.querySelectorAll&&[].forEach.call(n.querySelectorAll("a[href]"),(t=>{/^(http|ftp)/i.test(t.href)&&-1===e.indexOf(t.href)&&e.push(t.href)}))})),e.forEach((e=>{b(e,{active:!1,insert:!0})}))}getPickerStr(){if(!this.inPicker)return"";let e="";return this.signList.forEach((t=>{e+="\n"+t[1].innerText})),e.trim()}expand(){let e=this;this.clearSigns(),Object.keys(this.clickedEles).forEach((t=>{let n=e.clickedEles[t],r=e.geneSelector(n);n.dataset.signNum=0,[].forEach.call(document.querySelectorAll(r),(n=>{let r=e.createSignDiv();W(document).appendChild(r),e.appendSign(r,n,t)}))}))}collapse(){let e=this;this.clearSigns(),Object.keys(this.clickedEles).forEach((t=>{let n=e.clickedEles[t];n.dataset.signNum=0;let r=e.createSignDiv();W(document).appendChild(r),e.appendSign(r,n,t)}))}clearSigns(){this.signList.forEach((e=>{(e=e[0]).parentNode&&e.parentNode.removeChild(e)})),this.signList=[]}processNode(e,t){const n={};if(n.target=e,n.children=[],e.nodeType===Node.ELEMENT_NODE){const t=window.getComputedStyle(e);if("none"===t.display&&"hidden"===t.visibility)return null;if(""===e.innerHTML.trim())return null}else if(e.nodeType!==Node.TEXT_NODE||""===e.textContent.trim())return null;const r=e.childNodes;if(r.length>0){n.target=e,t.children.push(n);for(const e of r)e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.TEXT_NODE||this.processNode(e,n)}else if(e.nodeType===Node.TEXT_NODE){const n=e.textContent.split("\n"),r=document.createRange();r.selectNodeContents(e);let i=0,s=e.parentNode,a=s.getBoundingClientRect();for(const o of n){if(""===o.trim()){i+=o.length+1;continue}r.setStart(e,i),i+=o.length,r.setEnd(e,i),i++;const n=r.getBoundingClientRect();let l=n.left-a.left,c=n.top-a.top,p=n.width,h=n.height,d={target:{innerText:o,outerHTML:o,parentNode:s,offsetLeft:l+s.offsetLeft,offsetTop:c+s.offsetTop,offsetWidth:p,offsetHeight:h,getBoundingClientRect:()=>{let e=s.getBoundingClientRect();return{left:e.left+l,top:e.top+c,right:e.left+l+p,bottom:e.top+c+h,width:p,height:h}}}};t.children.push(d)}}else e.nodeType===Node.ELEMENT_NODE&&(n.target=e,t.children.push(n));return n}toggle(e){this.init(),this.inPicker?this.close():(this.rectSel=!!e,e?(this.domInfo=this.processNode(W(document),{children:[]}),W(document).addEventListener("mousedown",this.mouseDownHandler,!0),W(document).addEventListener("mouseup",this.mouseUpHandler,!0)):W(document).addEventListener(Qe(),this.wheelHandler,{passive:!1,capture:!0}),this.accu=0,this.inPicker=!0,W(document).classList.add("searchJumper-picker"),q.con.addEventListener("mouseenter",this.leaveHandler,!0),W(document).addEventListener("mousemove",this.moveHandler,!0),W(document).addEventListener("click",this.clickHandler,!0))}};async function Be(e){return new Promise((t=>{let n=setInterval((()=>{let r=null;if(r=e?"@"===e?Ie:H(e):"complete"===document.readyState,!1===r)return null;r&&(clearInterval(n),t(r))}),100)}))}let Ae=!1;async function $e(e,t){if(!e)return!0;Ie=e;let n=new FocusEvent("focusin",{bubbles:!0});e.dispatchEvent(n),n=new Event("focus",{bubbles:!0}),e.dispatchEvent(n);const r=window.getSelection(),i=r.rangeCount?r.getRangeAt(0):new Range;i.selectNode(e),r.removeAllRanges(),r.addRange(i),await Dt(1),"file"!==e.type&&e.click&&e.click();let s=e.value;if("file"==e.type){let n=t;if(0==n.indexOf("data:"))n=Oe(n);else{let e=new Blob([n],{type:"text/plain"});n=new File([e],"noname.txt",{type:e.type})}let r=new DataTransfer;r.items.add(n),e.files=r.files,t="c:/fakepath/fakefile"}else if(/INPUT/i.test(e.nodeName)){Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(e,t)}else if(/SELECT/i.test(e.nodeName)){Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set.call(e,t)}else if("TEXTAREA"==e.nodeName.toUpperCase()){Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(e,t)}else{let n=e;for(;n&&"true"!==n.contentEditable;)n=n.parentNode;if(n)n.dispatchEvent(new InputEvent("beforeinput",{inputType:"insertText",data:t})),await Dt(1),e.innerText!==t&&(e.innerHTML=S(t));else{let n=t;if(0==n.indexOf("data:"))n=Oe(n);else{let e=new Blob([n],{type:"text/plain"});n=new File([e],"noname.txt",{type:e.type})}var a=new ClipboardEvent("paste",{target:document.body,clipboardData:new DataTransfer});a.clipboardData.items.add(n),e.dispatchEvent(a)}}n=new Event("input",{bubbles:!0});let o=e._valueTracker;o&&o.setValue(s),e.dispatchEvent(n),n=new Event("change",{bubbles:!0}),e.dispatchEvent(n),k(e,"input")}async function We(e,t=-1){let n;if(Ae=!1,t>=0){0===t&&await Be(e);let r=O(e);if(0===r.length)return!0;if(1===r.length)n=r[0],Ae=!0;else{if(r.length<=t)return!0;n=r[t],r.length===t+1&&(Ae=!0)}}else if(n=await Be(e),!n)return!0;return n}async function Je(e,t=-1){let n=await We(e,t);if(!0===n)return!0;if(Ie=n,!PointerEvent)return n.click();let r={isTrusted:!0,altKey:!1,azimuthAngle:0,bubbles:!0,button:0,buttons:0,clientX:1,clientY:1,cancelBubble:!1,cancelable:!0,composed:!0,ctrlKey:!1,defaultPrevented:!1,detail:1,eventPhase:2,fromElement:null,height:1,isPrimary:!1,metaKey:!1,pointerId:1,pointerType:"mouse",pressure:0,relatedTarget:null,returnValue:!0,shiftKey:!1,toElement:null,twist:0,which:1};n.focus();var i=new PointerEvent("mouseover",r);n.dispatchEvent(i),i=new PointerEvent("pointerover",r),n.dispatchEvent(i),i=new PointerEvent("mousedown",r),n.dispatchEvent(i),i=new PointerEvent("pointerdown",r),n.dispatchEvent(i),i=new PointerEvent("mouseup",r),n.dispatchEvent(i),i=new PointerEvent("pointerup",r),n.dispatchEvent(i);let s=(e,t)=>{let r;try{r=document.createEvent("TouchEvent"),r.initTouchEvent(t,!0,!0)}catch(e){try{r=document.createEvent("UIEvent"),r.initUIEvent(t,!0,!0)}catch(e){r=document.createEvent("Event"),r.initEvent(t,!0,!0)}}try{r.targetTouches=[{pageX:1,pageY:1,clientX:1,clientY:1,target:n}],r.touches=[{pageX:1,pageY:1,clientX:1,clientY:1,target:n}],r.changedTouches=[{pageX:1,pageY:1,clientX:1,clientY:1,target:n}]}catch(e){}e.dispatchEvent(r)};return s(n,"touchstart"),s(n,"touchend"),n.click(),k(n,`click ${e}`),Ae}async function De(e,t){if(Ie)if(Ie.focus(),void 0!==e.value){const n=e.selectionStart,r=e.selectionEnd;let i=e.value.substring(0,n)+t+e.value.substring(r,e.value.length);await $e(e,i),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else{const n=window.getSelection(),r=n.getRangeAt(0);n.toString()||r.selectNode(1===e.childNodes.length?e.firstChild:e),r.deleteContents(),r.insertNode(document.createTextNode(t)),n.removeAllRanges(),n.addRange(r)}}function ze(e,t,n){if(t=t.replace(/#(j(umpFrom|f)?|from){(.*?)}/,""),ie={charset:e,url:t,target:n},-1!==t.indexOf("#submitBySearchJumper"))return ie={charset:e,url:t.replace("#submitBySearchJumper",""),target:n},void at();const r="searchJumper_form";var i,s=document.getElementById(r);s||((s=document.createElement("form")).id=r,s.style.display="none",document.documentElement.appendChild(s));let a=t.match(/[:%]p{(.*?)}/),o=t;return a?(o=t.replace(a[0],""),a=a[1],s.method="post",i=new URLSearchParams(a)):(s.method="get",i=new URLSearchParams(new URL(o).search)),e&&(s.acceptCharset=e),s.innerHTML=S(),s.target=n,s.action=o,i.forEach(((e,t)=>{let n=document.createElement("input");n.name=t,n.value=e,s.appendChild(n)})),s.submit()}function Oe(e){try{for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,s=new Uint8Array(i);i--;)s[i]=r.charCodeAt(i)}catch(e){k(e)}let a=n.split("/");return a=a.length>1?a[1]:a[0],new File([s],"image."+a,{type:n})}async function He(e){if(!e)return null;if(e.dataset.src&&(e.src=e.dataset.src),!e.src)return null;if(e.src.split("/")[2]!=document.domain)return await Re(e.src);{let r=getComputedStyle(e);var t=document.createElement("canvas"),n=t.getContext("2d");if(!e.complete)return await new Promise((i=>{e.addEventListener("load",(async s=>{t.width=e.naturalWidth||e.width||parseInt(r.width),t.height=e.naturalHeight||e.height||parseInt(r.height),n.drawImage(e,0,0);try{i(t.toDataURL("image/png"))}catch(s){i(await Re(e.src))}}))}));t.width=e.naturalWidth||e.width||parseInt(r.width),t.height=e.naturalHeight||e.height||parseInt(r.height),n.drawImage(e,0,0);try{return t.toDataURL("image/png")}catch(t){return await Re(e.src)}}}async function Re(e){let t=e.split("/");return new Promise((n=>{g({method:"GET",url:e,responseType:"blob",headers:{origin:t[0]+"//"+t[2],referer:e,accept:"*/*"},onload:function(e){try{var t=e.response,r=new FileReader;r.readAsDataURL(t),r.onload=function(e){n(e.target.result)}}catch(e){n(null)}},onerror:function(){n(null)},ontimeout:function(){n(null)}})}))}function Fe(e){let t=e.className.trim().replace("fa fa-","").replace(/ /g,"_");if(Q[t])return;let n=function(e){let t=getComputedStyle(e),n=getComputedStyle(e,":before").content.replace(/"/g,"");if(!n)return!1;var r=document.createElement("canvas");r.width=e.clientWidth||parseInt(t.lineHeight),r.height=e.clientHeight||parseInt(t.lineHeight);var i=r.getContext("2d");i.font=t.font,i.strokeStyle=t.color||"black",i.fillStyle=t.color||"black",i.textBaseline="top";let s=i.measureText(n);return i.fillText(n,(r.width-s.width)/2,(r.height-parseInt(t.fontSize))/2),r.toDataURL("image/png")}(e);"data:,"!=n&&n&&(Q[t]=n,N.setItem("cacheIcon",Q))}async function Ke(e){if("IMG"==e.nodeName.toUpperCase()){let t=e.src||e.dataset.src;if(t){if(Q[t])return;let n=await He(e);"data:,"!=n&&n||(n="fail"),Q[t]=n,N.setItem("cacheIcon",Q),k(t+" cached, left "+fe.length+" icons")}}else Fe(e);await new Promise((e=>{setTimeout((()=>{e(!0)}),1)}))}async function Ue(){for(;fe.length>0;)await Ke(fe.shift())}async function qe(e){if(p.prefConfig.cacheSwitch){let t=fe.length>0;await Promise.all([Ue(),Ue(),Ue(),Ue(),Ue()]),t&&(e&&v(u("cacheOver")),k(u("cacheOver")))}}async function Ge(e){if(!c){q.con.classList.add("in-input"),q.con.style.visibility="hidden",q.con.style.display="",q.appendBar();let e=ge.length>0;for(;ge.length>0;)await Ke(ge.shift());if(e){k("All font icons cached!")}}}function Ye(){let e=tt||Ne.getPickerStr()||window.getSelection().toString();if(setTimeout((()=>{tt=""}),1),!e){let t=R(document);if(t&&/^(TEXTAREA|INPUT)$/i.test(t.nodeName)){let n=t.selectionStart,r=t.selectionEnd;(n||r)&&(e=t.value.substring(n,r))}}if(e){if(e=e.trim(),e)return e}else if(Ie&&"searchJumper"===Ie.className&&/^MARK$/i.test(Ie.nodeName))return Ie.dataset.matched||Ie.innerText;return""}function Ve(e,t,n){return n||(n=/\w$/.test(e)?"(\\b|$)":""),new RegExp(e.replace(/([\*\.\?\+\$\^\[\]\(\)\{\}\|\\\/])/g,"\\$1")+n,t)}function _e(e,t,n,r){if(-1!==e.indexOf(t+".replace(/")){let i=e.match(Ve(t,"","\\.replace\\(/(.*?[^\\\\])/([gimsuyx]*),\\s*[\"'](.*?[^\\\\])??[\"']\\)"));return i?(n=n.replace(new RegExp(i[1],i[2]),i[3]||""),_e(e=e.replace(i[0],t),t,n,r)):e.replace(Ve(t,"g"),r?r(n):n)}return e.replace(Ve(t,"g"),r?r(n.replace(/\$/g,"$$$$")):n.replace(/\$/g,"$$$$"))}function Ze(){let e=Ye();if(e)return e;if(!ue)return _||"";let t,n="",r=!ue.charset||"UTF-8"==ue.charset;try{if(ue.keywords){let e=ue.keywords.split("\n");for(let i=0;i<e.length;i++){let s=e[i];if(!s||!s.trim())continue;let a=e[i].match(/^(.*?)\.replace\(\//);if(a&&(s=a[1]),r)if(/^\w[\w\|]*$/.test(s)){let e=s.split("|"),t=new URLSearchParams(location.search);for(let r=0;r<e.length&&(n=t.get(e[r]),!n);r++);}else if(/\(.+\)/.test(s)&&0!==s.indexOf("@"))try{t=L.match(new RegExp(s)),t&&(n=t[1]),n&&(n=decodeURIComponent(n))}catch(e){n=""}if(!n&&W(document))try{let e=H(s);e&&(n=e.value||e.innerText)}catch(e){n=""}if(n&&a&&(n=_e(e[i],s,n)),n)break}}else if(r&&ke.test(ue.url)&&!/[#:%]p{/.test(ue.url)&&(-1!=L.indexOf("?")&&(t=ue.url.match(new RegExp(`[\\?&]([^&]*?)=${je}.*`)),t&&(n=new URLSearchParams(location.search).get(t[1]))),!n&&(t=ue.url.match(new RegExp(`https?://[^/]*/(.*)${je}`)),t&&(t=L.match(new RegExp((t[1].replace(/\?/g,"\\?")||location.host.replace(/\./g,"\\.")+"/")+"(.*?)(/|$)")),t&&(n=t[1]),n))))try{n=decodeURIComponent(n)}catch(e){n=""}if(""==n&&W(document)){let e=W(document).querySelector("input[type=text]:not([readonly]),input:not([type])");e&&(n=e.value)}n&&(_=n)}catch(e){k(e)}return _||""}function Xe(e,t){var n,r=(e="on"+e)in(t=t||document.createElement("div"));r||(t.setAttribute||(t=document.createElement("div")),t.hasAttribute(e)||(n=!0,t.setAttribute(e,"return;")),r="function"==typeof t[e],n&&t.removeAttribute(e));return r}function Qe(){var e="DOMMouseScroll";return Xe("wheel")?e="wheel":Xe("mousewheel")&&(e="mousewheel"),e}let et=!1,tt="";function nt(){y(u("settings"),(()=>{b(l,{active:!0,insert:!0})})),y(u("searchInPage"),(()=>{q.showInPage(),q.showInPageSearch()})),y(u("search"),(()=>{q.searchAuto(0,{})})),y(u("addSearchEngine"),(()=>{let e=document.head.querySelector('[rel="search"]');if(e)Wt(e.href,((e,t)=>{if("load"!=e){t&&k(t.statusText||t.error||t.response||t),it(W(document).querySelector("input[type=text]:not([readonly]),input[type=search]:not([readonly]),input:not([type])")||W(document).querySelector("textarea"))}}));else{it(W(document).querySelector("input[type=text]:not([readonly]),input[type=search]:not([readonly]),input:not([type])")||W(document).querySelector("textarea"))}})),document.addEventListener("searchJumper",(e=>{switch(e.detail.action){case"search":e.detail.name?q.searchBySiteName(e.detail.name,e.detail.key||{}):q.searchAuto(e.detail.index,e.detail.key||{});break;case"show":q.setFuncKeyCall(!1),q.showInPage(),p.prefConfig.disableInputOnWords&&!q.inInput&&Ye()||q.showSearchInput();break;case"showAll":q.appendBar(),q.showAllSites()}})),Ie=W(document);let e,t,n=U.children[0],r=0,i=!1,s=t=>{if(clearTimeout(e),q.bar.classList.remove("grabbing"),document.removeEventListener("mouseup",s,!1),document.removeEventListener("mousemove",o,!1),document.removeEventListener("touchend",s,!1),document.removeEventListener("touchmove",o,!1),q.bar.style.marginLeft="",q.bar.style.marginTop="",q.bar.style.transform="",1===r)return r=0,void q.showAllSites();r=0;let i,a,l,c,h=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,u=h/3,m=J(t),f=D(t);m<u?(i="left",l=parseInt(q.bar.style.left)>0?parseInt(q.bar.style.left):0):m<2*u?(i="center",l=parseInt(q.bar.style.left)-h/2):(i="right",l=h-parseInt(q.bar.style.left)-q.bar.scrollWidth),f<d/2?(a="top",c=parseInt(q.bar.style.top)):(a="bottom",c=d-parseInt(q.bar.style.top)-q.bar.scrollHeight,c<0&&(c=0)),n.style.cursor="",q.closeOpenType(),q.initPos(i,a,l,c),N.setItem("searchData",p)},a={x:0,y:0},o=t=>{let i=J(t),s=D(t);Math.abs(a.x-i)+Math.abs(a.y-s)<50||(1===r&&(clearTimeout(e),n.style.cursor="grabbing",q.bar.style.position="fixed",q.bar.style.marginLeft="0",q.bar.style.marginTop="0",q.bar.style.right="",q.bar.style.bottom="",q.bar.style.transform="unset",q.con.classList.remove("search-jumper-scroll"),q.bar.className="search-jumper-searchBar grabbing"),r=2,q.bar.style.left=i-q.bar.scrollWidth+20+"px",q.bar.style.top=s-q.bar.scrollHeight+20+"px")};if(U.oncontextmenu=function(e){q.bar.style.display="none",e.preventDefault()},U.addEventListener("mousedown",(t=>{if(i)i=!1;else{if(2===t.button)return p.prefConfig.resizePage&&(void 0!==q.initBodyStyle&&(W(document).style.cssText=q.initBodyStyle),q.con.classList.remove("resizePage")),document.removeEventListener("mouseup",s,!1),document.removeEventListener("mousemove",o,!1),document.removeEventListener("touchend",s,!1),void document.removeEventListener("touchmove",o,!1);t.preventDefault(),t.stopPropagation(),q.inInput||1===t.button||t.altKey||t.ctrlKey||t.shiftKey||t.metaKey?b(l,{active:!0,insert:!0}):(r=1,a={x:J(t),y:D(t)},document.addEventListener("mouseup",s,!1),setTimeout((()=>{1===r&&document.addEventListener("mousemove",o,!1)}),100),e=setTimeout((()=>{q.bar.style.display="none",document.removeEventListener("mouseup",s,!1),document.removeEventListener("mousemove",o,!1)}),2e3))}}),!1),U.addEventListener("touchstart",(t=>{t.preventDefault(),t.stopPropagation(),i=!0,r=1,a={x:J(t),y:D(t)},document.addEventListener("touchend",s,!1),setTimeout((()=>{1===r&&document.addEventListener("touchmove",o,!1)}),100),e=setTimeout((()=>{q.bar.style.display="none",p.prefConfig.resizePage&&(void 0!==q.initBodyStyle&&(W(document).style.cssText=q.initBodyStyle),q.con.classList.remove("resizePage")),document.removeEventListener("touchend",s,!1),document.removeEventListener("touchmove",o,!1)}),1500)}),{passive:!1,capture:!1}),q.bar.addEventListener(Qe(),(e=>{if(e.target.parentNode&&("sitelistCon"==e.target.parentNode.className||e.target.parentNode.parentNode&&"sitelistCon"==e.target.parentNode.parentNode.className))return;let t=q.con.classList;if(t.contains("search-jumper-scroll")&&!t.contains("search-jumper-left")&&!t.contains("search-jumper-right")){var n;if("wheel"!==e.type){var r=0,i=0;"number"==typeof e.axis?2==e.axis?i=e.detail:r=e.detail:void 0===e.wheelDeltaY||0!=e.wheelDeltaY?i=-e.wheelDelta/40:r=-e.wheelDelta/40,n=i}else e.deltaX,n=e.deltaY;e.preventDefault(),e.stopPropagation(),q.con.scrollLeft+=n}}),{passive:!1,capture:!1}),p.prefConfig.shortcut&&(p.prefConfig.switchSitesPreKey||p.prefConfig.switchSitesNextKey||p.prefConfig.shortcutKey||p.prefConfig.showAllShortcutKey)){let v=-1,w=!1,C=(e,t,n,r,i,s)=>!(t&&!e.altKey||n&&!e.ctrlKey||r&&!e.shiftKey||i&&!e.metaKey)&&(w||(w=(e.key||String.fromCharCode(e.keyCode)).toLowerCase()),(s==w||s==e.code)&&(!!(p.prefConfig.enableInInput||-1!=v||(v=1,n||t||r||i||!K(document)))&&(v=0,e.preventDefault(),e.stopPropagation(),!0)));document.addEventListener("mouseenter",(e=>{e.target&&!q.contains(e.target)&&(Te=e.target)}),!0),document.addEventListener("keydown",(e=>{if("searchJumperInput"!==e.target.id&&(v=-1,w=!1,p.prefConfig.shortcutKey&&C(e,p.prefConfig.callBarAlt,p.prefConfig.callBarCtrl,p.prefConfig.callBarShift,p.prefConfig.callBarMeta,p.prefConfig.shortcutKey)&&(q.setFuncKeyCall(!1),q.showInPage(),p.prefConfig.disableInputOnWords&&!q.inInput&&Ye()||q.showSearchInput()),1!=v&&(p.prefConfig.showAllShortcutKey&&C(e,p.prefConfig.showAllAlt,p.prefConfig.showAllCtrl,p.prefConfig.showAllShift,p.prefConfig.showAllMeta,p.prefConfig.showAllShortcutKey)&&(q.appendBar(),q.showAllSites()),ue&&"none"!==q.bar.style.display))){if(p.prefConfig.switchSitesPreKey&&C(e,p.prefConfig.switchSitesAlt,p.prefConfig.switchSitesCtrl,p.prefConfig.switchSitesShift,p.prefConfig.switchSitesMeta,p.prefConfig.switchSitesPreKey))return void q.switchSite();p.prefConfig.switchSitesNextKey&&C(e,p.prefConfig.switchSitesAlt,p.prefConfig.switchSitesCtrl,p.prefConfig.switchSitesShift,p.prefConfig.switchSitesMeta,p.prefConfig.switchSitesNextKey)&&q.switchSite(!0)}}),!0)}if(p.prefConfig.enableInPage){let j,E,P=!1;document.addEventListener("selectionchange",(e=>{if(p.prefConfig.leftMouse||p.prefConfig.middleMouse)if(window.getSelection().toString()){const e=window.getSelection().getRangeAt(0);E=e.getBoundingClientRect()}else E=null}));let M=!1;function B(e){let t=!1;if(K(document))t=!0;else{let n=!1,r=e;for(;r&&(n="true"==r.contentEditable,!n&&"BODY"!=r.nodeName.toUpperCase());)r=r.parentNode;n&&(t=!0)}return t}t=e=>{P&&e.preventDefault(),P=!1,document.removeEventListener("click",t,!0)};let A=e=>{if(M&&"mousedown"===e.type&&0===e.button||e.target.classList&&e.target.classList.contains("search-jumper-btn")||q.contains(e.target))return;if(q.bar.classList.contains("grabbing"))return;let n=B(e.target),r=!p.prefConfig.enableInInput&&n;if(r&&"dblclick"===e.type)return;if(2==p.prefConfig.minPopup&&(n?q.con.classList.add("targetInput"):q.con.classList.remove("targetInput")),"touchstart"===e.type)return void(p.prefConfig.selectToShow&&setTimeout((()=>{Ye()?q.showInPage(!0,e):q.waitForHide(0)}),0));M=!0,setTimeout((()=>{M=!1}),500),P=!1,Ie=e.target,q.closePopupWindow();let i=!1;if((p.prefConfig.altKey||p.prefConfig.ctrlKey||p.prefConfig.shiftKey||p.prefConfig.metaKey)&&!(p.prefConfig.altKey&&!e.altKey||p.prefConfig.ctrlKey&&!e.ctrlKey||p.prefConfig.shiftKey&&!e.shiftKey||p.prefConfig.metaKey&&!e.metaKey)&&(i=!0),!p.prefConfig.selectToShow&&(0===e.button&&!p.prefConfig.leftMouse||1===e.button&&!p.prefConfig.middleMouse))return void q.waitForHide(0);let s=e.clientX,a=e.clientY,o=!1,l=e=>{Math.abs(s-e.clientX)+Math.abs(a-e.clientY)>2&&(clearTimeout(j),document.removeEventListener("mousemove",l,!0),e.target.removeEventListener("scroll",c),o=!0)},c=e=>{clearTimeout(j),document.removeEventListener("mousemove",l,!0),e.target.removeEventListener("scroll",c)},h=e=>{et=!1,q.contains(e.target)||P?e.preventDefault():setTimeout((()=>{P||(n=B(e.target),r=!p.prefConfig.enableInInput&&n,!r&&(i&&2===e.button||o&&0===e.button&&p.prefConfig.selectToShow&&Ye())?q.showInPage(!0,e):(M=!1,q.waitForHide(0)))}),0),clearTimeout(j),document.removeEventListener("mouseup",h,!0),document.removeEventListener("mousemove",l,!0),e.target.removeEventListener("scroll",c)};if("dblclick"===e.type)return void(""!==Ye()&&(P=!0,et=!1,document.removeEventListener("mouseup",h,!0),document.removeEventListener("mousemove",l,!0),e.target.removeEventListener("scroll",c),clearTimeout(j),setTimeout((()=>{q.showInPage(!0,e)}),200)));j&&clearTimeout(j),j=setTimeout((()=>{et||Ie==e.target&&(1!==e.button||p.prefConfig.middleMouse)&&(2!==e.button||p.prefConfig.rightMouse)&&(0!==e.button||p.prefConfig.leftMouse)&&(p.prefConfig.longPressTile?q.showInPage(!0,e):(q.setFuncKeyCall(!1),q.showInPage()),P=!0)}),parseInt(p.prefConfig.longPressTime));let d=!1;if(2===e.button?i&&(d=!0):(0===e.button?p.prefConfig.leftMouse&&(d=!0):1===e.button&&p.prefConfig.middleMouse&&(d=!0),d&&(r?d=!1:E?(e.clientX<E.left||e.clientX>E.left+E.width||e.clientY<E.top||e.clientY>E.top+E.height)&&(d=!1):d=!1)),d)return setTimeout((()=>{et||q.showInPage(!0,e),document.removeEventListener("mousemove",l,!0),e.target.removeEventListener("scroll",c)}),200),P=!0,document.addEventListener("mouseup",h,!0),document.addEventListener("click",t,!0),!1;document.addEventListener("mousemove",l,!0),document.addEventListener("mouseup",h,!0),e.target.addEventListener("scroll",c)};if(document.addEventListener("mousedown",A),document.addEventListener("dblclick",A),p.prefConfig.selectToShow){let $,z,O=e=>{clearTimeout($),$=setTimeout((()=>{window.getSelection().toString()&&(A(z),document.removeEventListener("selectionchange",O))}),300)};document.addEventListener("touchstart",(e=>{!1!==e.isTrusted&&(z=e,document.addEventListener("selectionchange",O))}))}document.addEventListener("contextmenu",(e=>{P&&e.preventDefault(),P=!1}))}p.prefConfig.dragToSearch&&!T&&W(document).addEventListener("dragstart",(e=>{!e.isTrusted||p.prefConfig.dragAlt&&!e.altKey||p.prefConfig.dragCtrl&&!e.ctrlKey||p.prefConfig.dragShift&&!e.shiftKey||p.prefConfig.dragMeta&&!e.metaKey||(p.prefConfig.enableInInput||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||!K(document))&&(1!==(Ie=e.target).nodeType&&(Ie=Ie.parentNode),Ie.shadowRoot&&(Ie=Ie.shadowRoot.activeElement||Ie),Ie.getAttribute&&"true"==Ie.getAttribute("draggable")||Ie.parentNode&&Ie.parentNode.getAttribute&&"true"==Ie.parentNode.getAttribute("draggable")||(q.waitForHide(0),setTimeout((()=>{!function(e,t){if(!q||!q.bar)return;let n=q.bar.querySelector(".search-jumper-type.search-jumper-open"),r=()=>{if(document.removeEventListener("dragend",mt,!0),document.removeEventListener("dragenter",ft,!0),ht.parentNode&&(ht.parentNode.removeChild(ht),pt.style.opacity="",pt.style.transform=""),et=!1,clearTimeout(gt),ue&&!ue.hideNotMatch&&!p.prefConfig.hideOnSearchEngine||q.con.classList.contains("resizePage")){if(n&&!n.classList.contains("search-jumper-open"))if(n.children[0].onmousedown)n.children[0].onmousedown();else{let e=new PointerEvent("mousedown");n.children[0].dispatchEvent(e)}}else q.bar.style.display="none"};yt||vt||(wt=(p.prefConfig.zoomDrag||100)/100,yt=190*wt,vt=190*wt);if(!pt){let e=`\n                    #dragCon {\n                      position: fixed;\n                      top: 0;\n                      left: 0;\n                      transform: scale(${wt});\n                      z-index: 2147483647;\n                      -moz-transition:left 0.3s ease, top 0.3s;\n                      -webkit-transition:left 0.3s ease, top 0.3s;\n                      transition:left 0.3s ease, top 0.3s;\n                    }\n                    #searchJumperWrapper * {\n                      margin: 0;\n                      padding: 0;\n                      border: none;\n                      outline: none;\n                      user-select: none;\n                      box-sizing: content-box;\n                      font-size: 12px;\n                      line-height: normal;\n                      overflow: visible;\n                      background-image: initial;\n                      float: initial;\n                    }\n                    #searchJumperWrapper {\n                      position: fixed;\n                      height: 300px;\n                      width: 300px;\n                      padding: 20px;\n                      margin: 20px;\n                      background-color: #000000${p.prefConfig.hideDragHistory?"10":"9e"};\n                      box-shadow: #000000 0px 0px 10px;\n                      border-radius: 50%;\n                      z-index: 2147483647;\n                      box-sizing: content-box;\n                      opacity: 0;\n                      transform: scale(.5);\n                      -moz-transition:opacity 0.3s ease, transform 0.15s;\n                      -webkit-transition:opacity 0.3s ease, transform 0.15s;\n                      transition:opacity 0.3s ease, transform 0.15s;\n                    }\n                    #searchJumperWrapper>.panel {\n                      position: relative;\n                    }\n                    #searchJumperWrapper .sector:nth-child(2n+1) .sector-inner {\n                      background: #454545;\n                      color: white;\n                    }\n                    #searchJumperWrapper .sector:nth-child(2n) .sector-inner {\n                      background: #ffffff;\n                      color: black;\n                    }\n                    #searchJumperWrapper .sector.out:nth-child(2n+1) .sector-inner {\n                      background: #353535;\n                    }\n                    #searchJumperWrapper .sector.out:nth-child(2n) .sector-inner {\n                      background: #eeeeee;\n                    }\n                    #searchJumperWrapper .sector {\n                      position: absolute;\n                      left: 150px;\n                      top: 50px;\n                      width: 100px;\n                      height: 200px;\n                      font-size: 14px;\n                      border-radius: 0px 100px 100px 0;\n                      overflow: hidden;\n                      transform-origin: left center;\n                      z-index: 1;\n                      -moz-transition:transform 0.3s ease;\n                      -webkit-transition:transform 0.3s ease;\n                      transition:transform 0.3s ease;\n                      pointer-events: none;\n                    }\n                    #searchJumperWrapper .sector.out {\n                      left: 150px;\n                      top: 0px;\n                      width: 150px;\n                      height: 300px;\n                      font-size: 14px;\n                      border-radius: 0px 150px 150px 0;\n                      overflow: hidden;\n                      transform-origin: left center;\n                      z-index: 0;\n                      ${p.prefConfig.hideDragHistory?"display: none;":""}\n                    }\n                    #searchJumperWrapper .sector-inner {\n                      text-align: center;\n                      display: block;\n                      width: 40px;\n                      padding: 5px 3px 0 57px;\n                      height: 195px;\n                      transform: translateX(-100px) rotate(60deg);\n                      transform-origin: right center;\n                      border-radius: 100px 0 0 100px;\n                    }\n                    #searchJumperWrapper .sector.out>.sector-inner {\n                      text-align: center;\n                      display: block;\n                      width: 90px;\n                      height: 295px;\n                      transform: translateX(-150px) rotate(36deg);\n                      transform-origin: right center;\n                      border-radius: 150px 0 0 150px;\n                    }\n                    #searchJumperWrapper .sector-inner span {\n                      transform-origin: center;\n                      padding: 20px 0;\n                      pointer-events: all;\n                      opacity: 0.8;\n                      word-break: break-word;\n                      height: 55px;\n                      font-size: 12px;\n                      font-weight: bold;\n                      font-family: Arial, sans-serif;\n                      display: flex;\n                      flex-direction: column;\n                      align-items: center;\n                      justify-content: space-evenly;\n                    }\n                    #searchJumperWrapper .sector-inner span {\n                      width: 70px;\n                      margin-left: -15px;\n                    }\n                    #searchJumperWrapper .sector-inner span>p {\n                      max-width: 58px;\n                    }\n                    #searchJumperWrapper .sector.out>.sector-inner span {\n                      width: unset;\n                      margin-left: unset;\n                    }\n                    #searchJumperWrapper .over>.sector-inner span {\n                      opacity: 1;\n                    }\n                    #searchJumperWrapper .sector-inner span>img {\n                      width: 25px;\n                      height: 25px;\n                    }\n                    #searchJumperWrapper .sector-inner span:hover {\n                      opacity: 1;\n                    }\n                    #searchJumperWrapper .dragLogo {\n                      position: absolute;\n                      left: 150px;\n                      top: 150px;\n                      border-radius: 50%;\n                      box-shadow: #000000 0px 0px 10px;\n                      z-index: 10;\n                      font-size: 0;\n                      -moz-transition:transform 0.3s ease;\n                      -webkit-transition:transform 0.3s ease;\n                      transition:transform 0.3s ease;\n                    }\n                    .dragLogo>svg {\n                      width: 40px;\n                      height: 40px;\n                      pointer-events: none;\n                    }\n                `,t=x(e);dt=[],ut=[],(pt=document.createElement("div")).id="searchJumperWrapper",pt.innerHTML=S(`\n                <div class="panel"></div>\n                <div class="dragLogo">${we}</div>\n                `),I||pt.appendChild(t);const n=6,i=10;let s,a,o=pt.querySelector(".panel"),l=360/n,c=360/i,h=-l/2,d=-c/2,u=pt.querySelector(".dragLogo");u.addEventListener("dragover",(e=>{e.preventDefault()}),!0),u.addEventListener("dragenter",(e=>{clearTimeout(a),s&&(s.style.transform=`rotate(${s.dataset.deg}deg) ${p.prefConfig.hideDragHistory?"scale(1.2)":""}`,s.classList.remove("over")),s=null,u.style.transform="scale(1.35)",e.preventDefault(),clearTimeout(gt),gt=setTimeout((()=>{r(),q.appendBar(),q.showAllSites()}),1e3)}),!0);let m=(e,t,n)=>{let r=document.createElement("div");r.className=e;let i=document.createElement("div");i.className="sector-inner";let l=document.createElement("span");i.appendChild(l),r.appendChild(i);let c=`rotate(${t}deg)`;return l.style.transform=n,r.style.transform=c+(p.prefConfig.hideDragHistory?"scale(1.2)":""),r.dataset.deg=t,o.appendChild(r),l.addEventListener("dragover",(e=>{e.clientX<50?ht.style.left="0px":e.clientX>document.documentElement.clientWidth-50&&(ht.style.left=document.documentElement.clientWidth-(yt<<1)+"px"),e.clientY<50?ht.style.top="0px":e.clientY>document.documentElement.clientHeight-50&&(ht.style.top=document.documentElement.clientHeight-(vt<<1)+"px"),e.preventDefault()}),!0),l.addEventListener("dragenter",(e=>{clearTimeout(a),l.innerText&&(s&&(s.style.transform=`rotate(${s.dataset.deg}deg) ${p.prefConfig.hideDragHistory?"scale(1.2)":""}`,s.classList.remove("over")),u.style.transform="",r.style.transform=`scale(${p.prefConfig.hideDragHistory?"1.6":"1.25"}) ${c}`,r.classList.add("over"),s=r,clearTimeout(gt))}),!0),l};for(let e=0;e<n;e++){let t=m("sector",h+l*e,`translateX(-10px) translateY(-10px) rotate(${h-l*e}deg)`);dt.push(t)}for(let e=0;e<i;e++){let t=m("sector out",d+c*e,`translateX(12px) translateY(-15px) rotate(${d-c*e}deg)`);ut.push(t)}mt=e=>{r()},pt.addEventListener("click",(e=>{r()})),pt.addEventListener("drop",(e=>{e.target===u?(q.setFuncKeyCall(!1),q.showInPage()):s&&(r(),q.searchBySiteName(s.children[0].dataset.name,e),s.style.transform=`rotate(${s.dataset.deg}deg)`,s.classList.remove("over"),s=null),e.preventDefault()})),ft=e=>{clearTimeout(a),pt.contains(e.target)||(a=setTimeout((()=>{r()}),300))},(ht=document.createElement("div")).id="dragCon",ht.appendChild(pt)}q.recoveHistory();let i=q.autoGetFirstType(),s=i.querySelectorAll("a.search-jumper-btn:not(.notmatch)"),a=0,o=()=>{let e=null;for(let t=a;t<s.length;t++){let n=s[t];if("none"!==n.style.display){e=n,a=t+1;break}}return e};const l=(e,t)=>{e.parentNode.dataset.name=t.dataset.name;let n=document.createElement("p");if(n.innerText=t.dataset.name.substr(0,10).trim(),!/^\w+$/.test(n.innerText)){let e="",t=0;for(let r of n.innerText)if(e+=r,/^\w+$/.test(r)?t++:t+=2,t>10){e+="...";break}n.innerText=e}let r=document.createElement("img");r.style.display="none",e.appendChild(r),e.appendChild(n),r.onload=e=>{r.style.display=""};let i=t.querySelector("img");if(i){let e=i.src||i.dataset.src;e&&(r.src=e)}};dt.forEach(((e,t)=>{e.innerHTML=S();let n=o();n?(e.parentNode.parentNode.style.filter="",l(e,n)):e.parentNode.parentNode.style.filter="contrast(0.5)"}));let c,h=0;i.classList.contains("search-jumper-needInPage")?c=q.txtHistorySiteBtns:i.classList.contains("search-jumper-targetImg")?c=q.imgHistorySiteBtns:i.classList.contains("search-jumper-targetAudio")?c=q.audioHistorySiteBtns:i.classList.contains("search-jumper-targetVideo")?c=q.videoHistorySiteBtns:(i.classList.contains("search-jumper-targetLink")||i.classList.contains("search-jumper-targetPage"))&&(c=q.linkHistorySiteBtns);c?(c=c.concat(q.historySiteBtns),c=c.filter(((e,t,n)=>n.indexOf(e)===t))):c=q.historySiteBtns;let d=()=>{if(p.prefConfig.reuseDragHistory)return o();if(p.prefConfig.hideDragHistory)return!1;let e=null;for(let t=h;t<c.length;t++){let n=c[t];if("none"!==n.style.display){e=n,h=t+1;break}}return e};ut.forEach(((e,t)=>{let n=new DragEvent("dragleave");e.dispatchEvent(n),e.innerHTML=S(),e.parentNode.parentNode.style.opacity=.6;let r=d();if(!r)return;let i=r.querySelector("img");i&&i.dataset.src&&(i.src=i.dataset.src,delete i.dataset.src),e.parentNode.parentNode.style.opacity=1,l(e,r)})),ht.style.left=e-yt+"px",ht.style.top=t-vt+"px",pt.style.opacity="",pt.style.transform="",setTimeout((()=>{document.addEventListener("dragend",mt,!0),q.addToShadow(ht),setTimeout((()=>{pt.style.opacity=1,pt.style.transform="scale(1)"}),10),setTimeout((()=>{"2147483647"!=getComputedStyle(pt).zIndex?r():document.addEventListener("dragenter",ft,!0)}),100)}),0)}(e.clientX,e.clientY)}),2),t&&document.removeEventListener("click",t,!0),et=!0))})),p.prefConfig.quickAddRule&&document.addEventListener("click",(e=>{((e.ctrlKey||e.metaKey)&&e.shiftKey||(e.ctrlKey||e.metaKey)&&e.altKey||e.altKey&&e.shiftKey)&&/^(INPUT|TEXTAREA)$/i.test(e.target.nodeName)&&(/^INPUT$/i.test(e.target.nodeName)&&e.target.type&&"text"!=e.target.type&&"search"!=e.target.type||it(e.target))}),!0);let c=e=>{setTimeout((()=>{q.refresh()}),100)};document.addEventListener("fullscreenchange",(e=>{document.fullscreenElement&&(q.bar.style.display="none")}));let h=!1,d=e=>{if(h)return;h=!0,setTimeout((()=>{h=!1}),300);let t=e.target;if(ue&&t)if(t.nodeName&&t.nodeName.toLowerCase&&"a"==t.nodeName.toLowerCase())q.updateCacheKeywords();else{let e=t.parentNode;e&&e.nodeName&&e.nodeName.toLowerCase&&"a"==e.nodeName.toLowerCase()&&q.updateCacheKeywords()}};W(document).addEventListener("auxclick",d,!0),W(document).addEventListener("click",d,!0);let m=function(e){var t=history[e];return function(){var n=t.apply(this,arguments);let r=location.href.slice(0,500);if(L!=r){L=r;var i=new Event("sj_"+e);i.arguments=arguments,window.dispatchEvent(i)}return n}};history.pushState=m("pushState"),history.replaceState=m("replaceState"),window.addEventListener("sj_pushState",c),window.addEventListener("sj_replaceState",c),window.addEventListener("yt-navigate-finish",c),window.addEventListener("securitypolicyviolation",(e=>{"form-action"===e.violatedDirective&&at()}));let f=e=>q.removeMark(e),g=0;new MutationObserver(((e,t)=>{if(q.lockWords){if(q.initHighlight&&g>100)return;for(let t of e){if("characterData"===t.type){let e=t.target.parentNode;if(!e||t.target.previousElementSibling&&"searchJumper"===t.target.previousElementSibling.className||t.target.nextElementSibling&&"searchJumper"===t.target.nextElementSibling.className)return;q.checkCharacterData(e),q.initHighlight&&g++}if(t.removedNodes.length&&[].forEach.call(t.removedNodes,(e=>{1===e.nodeType&&(e.classList&&e.classList.contains("searchJumper")?f(e):e.children.length&&[].forEach.call(e.querySelectorAll("mark.searchJumper,a.searchJumper,input.searchJumper,textarea.searchJumper"),(e=>{f(e)})))})),t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let n,r=t.addedNodes[e];if(1===r.nodeType){if(/^searchJumper$/.test(r.className))continue;n=r}else{if(r.previousElementSibling&&/^searchJumper$/.test(r.previousElementSibling.className))continue;if(r.nextElementSibling&&/^searchJumper$/.test(r.nextElementSibling.className))continue;n=r.parentNode}n&&(setTimeout((()=>{var e,t;e="insert",t=n,q.highlight(e,t)}),0),q.initHighlight&&g++)}}q.appendBar()}})).observe(W(document),{childList:!0,characterData:!0,subtree:!0})}function rt(e,t){if(!e)return"";let n,r;if(t)n=t.replace(/(^https?:\/\/.+)\/[^\/]*$/,"$1"),r=t;else{if("#"==e.charAt(0))return location.href+e;if("?"==e.charAt(0))return location.href.replace(/^([^\?#]+).*/,"$1"+e);n=location.protocol+"//"+location.host;let t=document.querySelector("base");r=t?t.href:location.href}let i=r||n;i=i.replace(/(\?|#).*/,""),/https?:\/\/[^\/]+$/.test(i)&&(i+="/"),0!==i.indexOf("http")&&(i=n+i);for(var s=/^[^\?#]*\//.exec(i)[0],a=/^\w+\:\/\/\/?[^\/]+/.exec(s)[0];0===e.indexOf("../");)e=e.substr(3),s=s.replace(/\/[^\/]+\/$/,"/");return e=e.replace(/\.\//,""),/^\/\/\/?/.test(e)&&(e=location.protocol+e),/^\w+\:\/\//.test(e)?e:("/"==e.charAt(0)?a:s)+e}function it(e){if(ot)return;let t,n=location.href;if(e&&e.name)for(t=e.parentNode;t;){if("FORM"===t.nodeName.toUpperCase()){let e=t.target;if(e&&"string"==typeof e&&"_blank"!=e&&"_self"!=e&&"_parent"!=e&&"_top"!=e){if(!W(document).querySelector(e)){t=null;break}}break}t=t.parentNode}let r=()=>!window.confirm(u("noValidItemAsk"));if(t){n=rt(t.getAttribute("action")||n);let r=[],i=new FormData(t);for(let[t,n]of i)n=e.name===t?"%s":encodeURIComponent(n),r.push(t+"="+n);if("post"==t.method.toLowerCase())n+="%p{"+r.join("&")+"}",0==t.action.indexOf(location.origin)&&location.pathname&&"/"!==location.pathname&&(n+=`#from{${location.pathname.slice(1)}}`);else{let t=n.match(/\?(.*)/);t&&(n=n.replace(t[0],""),t[1].split("&").forEach((t=>{let n=t.split("="),i=n[0];if(-1!==r.findIndex((e=>0===e.indexOf(i+"="))))return;let s=n[1];s==e.value&&(s="%s"),r.push(i+"="+s)}))),n+="?"+r.join("&")}}else if(e&&e.value)if(-1!==location.href.indexOf(e.value))n=location.href.replace(e.value,"%s");else{let t=encodeURIComponent(e.value);if(-1!==location.pathname.indexOf(t)||-1!==location.search.indexOf(t))n=location.origin+location.pathname.replace(t,"%s")+location.search.replace(t,"%s");else if(t=escape&&escape(e.value),t&&-1!==location.pathname.indexOf(t)||-1!==location.search.indexOf(t))n=location.origin+location.pathname.replace(t,"%se")+location.search.replace(t,"%se");else if(r())return}else if(r())return;let i=[];[].forEach.call(document.querySelectorAll("link[rel='shortcut icon'],link[rel='icon'],link[rel='fluid-icon'],link[rel='apple-touch-icon']"),(e=>{i.indexOf&&-1!==i.indexOf(e.href)||i.push(e.href)})),$t(document.title.replace(e?e.value:"","").replace(/^\s*[-_]\s*/,""),"",n,i,document.characterSet)}const st="https://hoothin.github.io/SearchJumper/jump.html";function at(){let e=`${st}#jump{url=${encodeURIComponent(ie.url)}&charset=${ie.charset}}`;"_self"==ie.target?location.href=e:b(e,{active:!0,insert:!0})}var ot;async function lt(){if(T=await async function(){if(0===L.indexOf(l)||("SearchJumper"===document.title||document.querySelector('[name="from"][content="SearchJumper"]'))&&document.querySelector('[name="author"][content="Hoothin"]')){ot=document.querySelector('[name="engines"]');let e=document.getElementById("spotlight");if(ot)try{if(0===(ot=ot.getAttribute("content")).indexOf("http")){if(e){const t=u("loadingCollection");e.innerText=t,e.setAttribute("spotlight",t)}let t=await new Promise((e=>{g({method:"GET",url:ot,onload:function(t){var n=null;try{n=JSON.parse(t.responseText),e(n)}catch(t){console.log(t),e(!1)}},onerror:function(t){console.log(t),e(!1)},ontimeout:function(t){console.log(t),e(!1)}})}));t?(p.sitesConfig=t,ot=!0):ot=!1}else p.sitesConfig=JSON.parse(decodeURI(ot)),ot=!0}catch(e){ot=!1}let t=0===L.indexOf(l.replace(/\/config.*/,""))||0===L.indexOf(a)||0===L.indexOf("https://hoothin.github.io/SearchJumper")||"localhost"===location.hostname;return t&&(c=!!ot||/all(\.html)?$/.test(location.pathname)),e?e.style.display="none":setTimeout((()=>{e=document.getElementById("spotlight"),e&&(e.style.display="none")}),500),t}return!1}(),!T&&p.webdavConfig&&(P=new B(p.webdavConfig.host+"/SearchJumper"+(p.webdavConfig.path||"").replace(/^\/*/,"/").replace(/\/*$/,"/"),p.webdavConfig.username,p.webdavConfig.password)),T&&!c){let e,n=!1,r=()=>{e=setTimeout((()=>{n||r()}),50),window.postMessage({searchData:p,cacheIcon:Q,version:C.script.version||0,command:"loadConfig"},"*")},i=setTimeout((()=>{n||location.reload()}),3e3);document.addEventListener("received",(t=>{n=!0,clearTimeout(e),clearTimeout(i),fe.length>0&&p.prefConfig.cacheSwitch&&(k(`Start cache ${fe.length} icons!`),qe())})),document.addEventListener("downloadCache",(e=>{!function(){let e=document.createElement("a");e.download="searchJumperCache.json",e.target="_blank";let t=[JSON.stringify({sortTypeNames:ne,cacheIcon:Q,sortSiteNames:re},null,4)],n=new Blob(t,{type:"application/json"});e.href=window.URL.createObjectURL(n),e.click()}()})),document.addEventListener("importCache",(e=>{!function(e){e.cacheIcon&&(Q=e.cacheIcon,N.setItem("cacheIcon",Q),fe=[],p.prefConfig.cacheSwitch=!0,N.setItem("searchData",p));e.sortTypeNames&&(ne=e.sortTypeNames,N.setItem("sortTypeNames",ne));e.sortSiteNames&&(re=e.sortSiteNames,N.setItem("sortSiteNames",re))}(e.detail?e.detail.cacheData:e.cacheData),v("Cache imported successfully!")})),document.addEventListener("showSiteAdd",(e=>{let t=e.detail?e.detail.site:e.site;t&&(t.url?$t(t.name,t.description,t.url,t.icon?[t.icon]:[],t.charset,t.kwFilter,t.match,t.hideNotMatch):ct.open(t))})),r(),document.addEventListener("dataChanged",(e=>{r()}));let s=(e,t,n,r)=>{window.postMessage({url:e,name:t,status:n,finalUrl:r,command:"verifyResult"},"*")};document.addEventListener("verifyUrl",(e=>{let t=e.detail?e.detail.url:e.url,n=e.detail?e.detail.name:e.name;g({method:"GET",url:t,headers:{referer:t,"User-Agent":navigator.userAgent},onload:function(e){s(t,n,e&&e.status,e&&e.finalUrl)},onerror:function(e){s(t,n,"error","")},ontimeout:function(e){s(t,n,"timeout","")}})}));let a=p.prefConfig.cacheSwitch;document.addEventListener("saveConfig",(e=>{p=(e.detail?e.detail.searchData:e.searchData)||t.searchData,N.setItem("searchData",p);let n={},r=Q?Object.keys(Q).length:0;a==p.prefConfig.cacheSwitch?(p.sitesConfig.forEach((e=>{if(/^[a-z\- ]+$/.test(e.icon||"")||/^http/.test(e.icon)){let t=e.icon.trim().replace(/ /g,"_"),r=Q[t];r&&(n[t]=r)}e.sites.forEach((e=>{let t=e.icon;if(t||(t=e.url.replace(/^showTips:/,"").replace(/\?.*/,"").replace(/^(https?:\/\/[^\/]*\/)[\s\S]*$/,"$1favicon.ico")),/^http/.test(t)){let e=Q[t];e&&(n[t]=e)}}))})),r!==Object.keys(n).length&&(Q=n,N.setItem("cacheIcon",n))):(p.sitesConfig.forEach((e=>{if(/^http/.test(e.icon)){let t=Q[e.icon];if(t)if("fail"===t){let t=document.createElement("img");t.src=e.icon,fe.push(t)}else n[e.icon]=t}e.sites.forEach((e=>{let t=e.icon;if(t||(t=e.url.replace(/^showTips:/,"").replace(/\?.*/,"").replace(/^(https?:\/\/[^\/]*\/)[\s\S]*$/,"$1favicon.ico")),/^http/.test(t)){let e=Q[t];if(e)if("fail"===e){let e=document.createElement("img");e.src=t,fe.push(e)}else n[t]=e}}))})),N.setItem("cacheIcon",n),p.prefConfig.cacheSwitch&&(fe.length>0&&(v(u("startCache")),qe(!0)),Ge())),a=p.prefConfig.cacheSwitch,(e.notification||e.detail&&e.detail.notification)&&v("Configuration imported successfully!")})),document.addEventListener("copyConfig",(e=>{let t=p.sitesConfig.filter((e=>e&&!(/^BM/.test(e.type)&&"bookmark"===e.icon)));w(JSON.stringify(t,null,2)),v("Configuration copied successfully!")}))}else if(i.test(L)){let e,t=x("\n                    #import-btns-con {\n                        position: absolute;\n                        display: block;\n                        font-size: 20px;\n                        left: 0px;\n                        top: 0px;\n                        width: 100%;\n                        height: 100%;\n                    }\n                    #import-btns-con.hide {\n                        pointer-events: none;\n                    }\n                    #import-btns-con>button {\n                        opacity: 0.5;\n                    }\n                    #import-btns-con>button:hover {\n                        opacity: 0.9;\n                    }\n                    #import-btn {\n                        position: absolute;\n                        display: block;\n                        font-size: 20px;\n                        right: 45px;\n                        top: 45px;\n                        pointer-events: all;\n                    }\n                    #filter-btn {\n                        position: absolute;\n                        display: none;\n                        font-size: 20px;\n                        left: 45px;\n                        top: 45px;\n                        pointer-events: all;\n                    }\n                    .filter>#filter-btn {\n                        display: block;\n                    }\n                    #import-btns-con>h3 {\n                        float: left;\n                        margin-left: 20px;\n                    }\n                    #import-btns-con.hide>h3 {\n                        display: none;\n                    }\n                "),n=0,r=document.createElement("button");r.id="import-btn",r.className="btn Button--secondary Button";let s=document.createElement("button");s.id="filter-btn",s.className="btn Button--secondary Button";let a=document.createElement("h3"),o=document.createElement("div");o.id="import-btns-con",o.appendChild(t),o.appendChild(r),o.appendChild(s),o.appendChild(a),o.addEventListener("click",(t=>{e&&(e.style.filter=""),o.classList.add("hide")})),r.innerText=u("import"),r.addEventListener("click",(t=>{if(ot)return;if(!e)return;let r,i=e.innerText.trim();if(i){try{r=JSON.parse(i)}catch(t){return void v(t.toString())}switch(n){case 0:window.confirm(u("importOrNot"))&&(o.parentNode&&o.parentNode.removeChild(o),A((()=>{p.sitesConfig=r,p.lastModified=(new Date).getTime(),N.setItem("searchData",p),v(u("siteAddOver")),q.refreshEngines()}),!0));break;case 1:$t(r.name,"",r.url,r.icon?[r.icon]:[],r.charset,r.kwFilter,r.match,r.hideNotMatch);break;case 2:p.prefConfig.inPageRule||(p.prefConfig.inPageRule={}),Object.keys(r).forEach((e=>{let t=r[e];if(!t)return;if(0===e.indexOf("@"))return void(p.prefConfig.inPageRule[e]=t);if(!t.words||0===t.words.length)return;let n="",i=t.sep||"";if(i)n="$c"+i;else if(i=" ",1===t.words.length){-1!==t.words[0].indexOf(" ")&&(i="",n="$o")}p.prefConfig.inPageRule[e]=n+t.words.join(i)})),N.setItem("searchData",p),v("Over!")}}})),s.innerText=u("filter"),s.addEventListener("click",(t=>{if(e){o.parentNode&&o.parentNode.removeChild(o);let n,r=e.innerText.trim();if(!r||0!==r.indexOf("["))return;try{n=JSON.parse(r),ct.open(n)}catch(t){v(t.toString())}}}));let l=t=>{if(t==e&&o.parentNode)return;let r=t.offsetTop+"px",i=t.innerText.trim();if(i){if(a.innerText="",/^\[/.test(i))n=0,o.style.top=r,o.classList.add("filter");else if(/^\{\s*"name"/.test(i))n=1,o.style.top=r,o.classList.remove("filter"),a.innerText=i.match(/"name":\s*"(.*)"/)[1];else{if(!/^\{/.test(i))return;n=2,o.style.top=r,o.classList.remove("filter")}e&&(e.style.filter=""),t.parentNode.appendChild(o),t.style.filter="blur(5px)",e=t,o.classList.remove("hide")}};window.addEventListener("load",(t=>{if(!e){let e=document.querySelector(".highlight>pre");e&&l(e)}})),document.addEventListener("mouseover",(e=>{if(i.test(L))if("PRE"===e.target.nodeName)l(e.target);else{let t=e.target.children[0];t&&"PRE"===t.nodeName&&l(t)}}))}}const ct=new class{constructor(){this.inited=!1}init(){if(this.inited)return;this.inited=!0;let e=this;this.openList=[],this.filterCss="\n                    #searchJumperFilter {\n                        width: 100%;\n                        height: 100%;\n                        position: fixed;\n                        top: 0;\n                        left: 0;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        z-index: 100000;\n                        background-color: rgba(255, 255, 255, 0.1);\n                        backdrop-filter: blur(10px);\n                        -webkit-backdrop-filter: blur(5px);\n                        transform: translateZ(0);\n                    }\n                    .searchJumperFrame-body {\n                        width: 350px;\n                        text-align: left;\n                        background-color: #ffffff;\n                        border: 1px solid #afb3b6;\n                        border-radius: 10px;\n                        opacity: 0.95;\n                        filter: alpha(opacity=95);\n                        box-shadow: 5px 5px 20px 0px #000;\n                        color: #6e7070;\n                        transition: all 0.25s ease;\n                        border: 0;\n                        font-size: initial;\n                    }\n                    .searchJumperFrame-title {\n                        background: #458bd1!important;\n                        display: flex!important;\n                        align-items: center!important;\n                        justify-content: center!important;\n                        color: white!important;\n                        font-weight: bold;\n                        font-size: 18px!important;\n                        border-radius: 10px 10px 0 0!important;\n                    }\n                    .searchJumperFrame-title>img {\n                        margin: 5px;\n                        height: 32px;\n                        width: 32px;\n                    }\n                    .searchJumperFrame-buttons {\n                        text-align: center;\n                        margin: 5px;\n                        display: flex;\n                        justify-content: space-evenly;\n                    }\n                    .searchJumperFrame-buttons>button {\n                        width: 32%;\n                        font-size: 16px;\n                        cursor: pointer;\n                        border: 1px solid #1976d2;\n                        border-radius: 4px;\n                        transition: all .3s;\n                        color: #fff;\n                        background-color: #458bd1;\n                        line-height: 25px;\n                        padding: 3px;\n                    }\n                    .searchJumperFrame-buttons>button:hover {\n                        color: #e3f2fd;\n                    }\n                    .searchJumperFrame-body>.sitesCon {\n                        max-height: 70vh;\n                        overflow: auto;\n                        width: 100%;\n                        border-top: 1px solid rgba(0, 0, 0, 0.23);\n                        border-bottom: 1px solid rgba(0, 0, 0, 0.23);\n                        padding: 5px;\n                        user-select: none;\n                        white-space: nowrap;\n                    }\n                    .searchJumperFrame-body>.sitesCon>details>summary>span,\n                    .searchJumperFrame-body>.sitesCon>details>div>span {\n                        line-height: 25px;\n                        overflow: hidden;\n                        text-overflow: ellipsis;\n                        max-width: 180px;\n                        display: inline-block;\n                        vertical-align: middle;\n                    }\n                    .searchJumperFrame-body>.sitesCon>details>summary>button {\n                        display: none;\n                        position: absolute;\n                    }\n                    .searchJumperFrame-body>.sitesCon>details>summary:hover>button {\n                        display: inline-block;\n                    }\n                    .searchJumperFrame-body>.sitesCon input {\n                        margin: 2px 5px;\n                        width: 20px;\n                        height: 20px;\n                        vertical-align: sub;\n                    }\n                    .searchJumperFrame-body>.sitesCon div {\n                        margin-left: 32px;\n                    }\n                    .searchJumperFrame-body>.sitesCon div.exist {\n                        text-decoration:line-through;\n                    }\n                    @media (prefers-color-scheme: dark) {\n                      .searchJumperFrame-body,\n                      .searchJumperFrame-input-title,\n                      .searchJumperFrame-inputs>input,\n                      .searchJumperFrame-inputs>textarea,\n                      .searchJumperFrame-inputs>select,\n                      .searchJumperFrame-body select {\n                        background-color: black;\n                        color: #d5d5d5;\n                      }\n                      .searchJumperFrame-title,\n                      .searchJumperFrame-buttons>button {\n                        background: #245d8f!important;\n                      }\n                    }\n                ",this.filterCssEle=x(this.filterCss),this.filterFrame=document.createElement("div"),this.filterFrame.id="searchJumperFilter",this.filterFrame.innerHTML=S(`\n                <div class="searchJumperFrame-body">\n                    <a href="${l}" class="searchJumperFrame-title" target="_blank">\n                        <img onerror="this.style.display='none'" width="32px" height="32px" src="${be}" />${u("addSearchEngine")}\n                    </a>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="expandAll" type="button">${u("expandAll")}</button>\n                        <button id="collapseAll" type="button">${u("collapseAll")}</button>\n                    </div>\n                    <div class="sitesCon"></div>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="cancel" type="button">${u("siteCancel")}</button>\n                        <button id="selectAll" type="button">${u("selectAll")}</button>\n                        <button id="add" type="button">${u("import")}</button>\n                    </div>\n                </div>\n                `),this.sitesCon=this.filterFrame.querySelector(".sitesCon");let t=this.filterFrame.querySelector("#add"),n=this.filterFrame.querySelector("#selectAll"),r=this.filterFrame.querySelector("#expandAll"),i=this.filterFrame.querySelector("#collapseAll"),s=!1;r.addEventListener("click",(e=>{[].forEach.call(this.filterFrame.querySelectorAll("details"),(e=>{e.setAttribute("open","open")}))})),i.addEventListener("click",(e=>{[].forEach.call(this.filterFrame.querySelectorAll("details"),(e=>{e.removeAttribute("open")}))})),n.addEventListener("click",(e=>{s=!s,[].forEach.call(this.filterFrame.querySelectorAll("input[type=checkbox]"),(e=>{e.checked=s}))})),t.addEventListener("click",(t=>{ot||A((()=>{let t=!1;[].forEach.call(this.filterFrame.querySelectorAll("details"),(n=>{let r=n.children[0].children[0],i=e.typeDict[r.title];if(i.type=r.innerText.trim(),i.sites=[],[].forEach.call(n.querySelectorAll('div>[type="checkbox"]'),(n=>{if(n.checked){t=!0;let r=e.siteDict[n.parentNode.title],s=n.nextElementSibling;if(!r||!s)return;if("0"===s.value)i.sites.push(r);else{let t=e.searchType(s.value);p.sitesConfig[t].sites.push(r)}}})),i.sites.length){let t=e.searchType(i.type);!1===t?p.sitesConfig.push(i):p.sitesConfig[t].sites=p.sitesConfig[t].sites.concat(i.sites)}})),t&&(p.lastModified=(new Date).getTime(),N.setItem("searchData",p),v(u("siteAddOver")),q.refreshEngines(),this.close())}))})),this.filterFrame.addEventListener("click",(e=>{"searchJumperFilter"!=e.target.id&&"cancel"!=e.target.id||this.close()}))}searchType(e){for(let t=0;t<p.sitesConfig.length;t++){if(p.sitesConfig[t].type==e)return t}return!1}searchUrl(e){for(let t=0;t<p.sitesConfig.length;t++){let n=p.sitesConfig[t].sites;for(let t=0;t<n.length;t++)if(n[t].url.replace(/^https?/,"")==e.replace(/^https?/,""))return!0}return!1}searchName(e){for(let t=0;t<p.sitesConfig.length;t++){let n=p.sitesConfig[t].sites;for(let t=0;t<n.length;t++)if(n[t].name==e){let t=e+"_1";return this.searchName(t)}}return e}anylizeType(e){let t=this,n=document.createElement("details"),r=document.createElement("summary"),i=document.createElement("span");i.title=e.type,i.innerText=e.type,r.appendChild(i);let s=document.createElement("input");s.type="checkbox",r.appendChild(s);let a=document.createElement("button");a.innerText=u("rename"),a.addEventListener("click",(e=>{let t=window.prompt(u("rename"),i.innerText);t&&(i.innerText=t)})),r.appendChild(a),n.appendChild(r);for(let t=0;t<this.openList.length;t++)if(this.openList[t]==e.type){n.setAttribute("open","open");break}let o=[];this.typeDict[e.type]=e,e.sites&&e.sites.forEach((r=>{let i=document.createElement("div"),a=document.createElement("span");if(a.innerText=r.name,r.name=t.searchName(r.name),i.appendChild(a),i.title=r.url,n.appendChild(i),t.searchUrl(r.url))return void i.classList.add("exist");let l=document.createElement("input");l.type="checkbox",l.onclick=e=>{if(l.checked){let e=!0;for(let t=0;t<o.length;t++)if(!o[t].checked){e=!1;break}e&&(s.checked=!0)}else s.checked=!1},i.appendChild(l),i.addEventListener("click",(e=>{"SPAN"==e.target.nodeName.toUpperCase()&&l.click()}));let c=document.createElement("select"),h=document.createElement("option");h.value=0,h.innerText=u("currentType"),c.appendChild(h);for(let t=0;t<p.sitesConfig.length;t++){let n=p.sitesConfig[t];if(n.type!=e.type){let e=document.createElement("option");e.value=n.type,e.innerText=n.type,c.appendChild(e)}}i.appendChild(c),t.siteDict[r.url]=r,o.push(l)})),0==o.length&&(s.style.display="none",a.style.display="none"),s.addEventListener("click",(e=>{o.forEach((e=>{e.checked=s.checked}))})),this.sitesCon.appendChild(n)}close(){this.openList=[],[].forEach.call(this.sitesCon.querySelectorAll("details"),(e=>{e.hasAttribute("open")&&this.openList.push(e.querySelector("summary").innerText)})),this.filterFrame.parentNode&&this.filterFrame.parentNode.removeChild(this.filterFrame)}open(e){this.init();let t=this;this.siteDict={},this.typeDict={},this.filterCssEle&&this.filterCssEle.parentNode||(this.filterCssEle=x(this.filterCss)),document.documentElement.appendChild(this.filterFrame),this.sitesCon.innerHTML=S(""),e.forEach((e=>{t.anylizeType(e)}))}};var pt,ht,dt,ut,mt,ft,gt,yt,vt,wt,bt,xt,Ct,jt,kt,It,Tt,St,Et,Lt,Pt,Mt,Nt,Bt,At;function $t(e,t,n,r,i,s,a,o){if(self.kwFilter=s,self.charset=i,self.hideNotMatch=o,self.match=a,!bt){let e=x("\n                    .searchJumperFrame-body,\n                    .searchJumperFrame-crawlBody {\n                        width: 300px;\n                        min-height: 300px;\n                        position: fixed;\n                        text-align: left;\n                        left: 50%;\n                        top: 45%;\n                        margin-top: -250px;\n                        margin-left: -150px;\n                        z-index: 100000;\n                        background-color: #ffffff;\n                        border: 1px solid #afb3b6;\n                        border-radius: 10px;\n                        opacity: 0.95;\n                        filter: alpha(opacity=95);\n                        box-shadow: 5px 5px 20px 0px #000;\n                        color: #6e7070;\n                        transition: all 0.25s ease;\n                        border: 0;\n                        font-size: initial;\n                    }\n                    .searchJumperFrame-title {\n                        background: #458bd1!important;\n                        display: flex!important;\n                        align-items: center!important;\n                        justify-content: center!important;\n                        color: white!important;\n                        font-weight: bold;\n                        font-size: 18px!important;\n                        border-radius: 10px 10px 0 0!important;\n                    }\n                    .draging .searchJumperFrame-body,\n                    .draging .searchJumperFrame-crawlBody {\n                        transition: none;\n                        pointer-events: none;\n                    }\n                    .searchJumperFrame-title>img {\n                        margin: 5px;\n                        height: 32px;\n                        width: 32px;\n                    }\n                    .searchJumperFrame-input-title {\n                        font-size: 9pt;\n                        font-family: Arial, sans-serif;\n                        display: inline-block;\n                        background-color: white;\n                        position: relative;\n                        left: 20px;\n                        padding: 0px 4px;\n                        text-align: left;\n                        color: #646464;\n                    }\n                    .searchJumperFrame-inputs>input,\n                    .searchJumperFrame-inputs>textarea,\n                    .searchJumperFrame-inputs>select,\n                    .searchJumperFrame-body select {\n                        resize: both;\n                        font-size: 11pt;\n                        font-weight: normal;\n                        border-radius: 4px;\n                        border: 1px solid rgba(0, 0, 0, 0.23);\n                        margin: 4px;\n                        font-family: inherit;\n                        background-color: #FFF;\n                        width: calc(100% - 8px);\n                        min-width: calc(100% - 8px);\n                        max-width: calc(100% - 8px);\n                        color: #4A4A4A;\n                        margin-top: -8px;\n                        padding: 4px;\n                        padding-top: 8px;\n                        box-sizing: border-box;\n                        height: 36px;\n                        word-break: break-all;\n                    }\n                    .searchJumperFrame-inputs>input:focus,\n                    .searchJumperFrame-inputs>textarea:focus,\n                    .searchJumperFrame-inputs>select:focus,\n                    .searchJumperFrame-body select:focus {\n                        background-color: #FFF;\n                    }\n                    .searchJumperFrame-buttons {\n                        text-align: center;\n                        margin-bottom: 5px;\n                        display: flex;\n                        justify-content: space-evenly;\n                    }\n                    .searchJumperFrame-buttons>button {\n                        width: 32%;\n                        font-size: 16px;\n                        cursor: pointer;\n                        border: 1px solid #1976d2;\n                        border-radius: 4px;\n                        transition: all .3s;\n                        color: #fff;\n                        background-color: #458bd1;\n                        line-height: 25px;\n                        padding: 3px;\n                    }\n                    .searchJumperFrame-buttons>button:hover {\n                        color: #e3f2fd;\n                    }\n                    .searchJumperFrame-inputs>.sideIcon {\n                        float: right;\n                        margin-top: -38px;\n                        position: relative;\n                        right: 20px;\n                        opacity: 0.8;\n                        background: rgb(0 0 0 / 50%);\n                        border-radius: 5px;\n                        pointer-events: none;\n                        width: 27px;\n                        height: 27px;\n                    }\n                    .searchJumperFrame-inputs>svg.sideIcon {\n                        fill: white;\n                        pointer-events: all;\n                        cursor: pointer;\n                        transition: transform 0.25s ease;\n                    }\n                    .searchJumperFrame-inputs>svg.sideIcon:hover {\n                        transform: scale(1.2);\n                        opacity: 1;\n                        background: rgb(0 0 0);\n                    }\n                    .searchJumperFrame-body>.iconsCon {\n                        max-height: 150px;\n                        overflow: auto;\n                        width: 100%;\n                        border-top: 1px solid rgba(0, 0, 0, 0.23);\n                        border-bottom: 1px solid rgba(0, 0, 0, 0.23);\n                    }\n                    .searchJumperFrame-body>.iconsCon>img {\n                        margin: 5px;\n                        cursor: pointer;\n                        max-width: 120px;\n                        border: 2px solid #ffffff;\n                        box-sizing: border-box;\n                        background: #80808030;\n                        transition: background 0.25s ease;\n                    }\n                    .searchJumperFrame-body>.iconsCon>img:hover {\n                        border: 2px solid #4e91d3;\n                        background: gray;\n                    }\n                    .maxContent .searchJumperFrame-inputs {\n                        width: 50%;\n                        float: left;\n                    }\n                    .searchJumperFrame-body>.moreItem {\n                        display: none;\n                    }\n                    .maxContent>.searchJumperFrame-body>.moreItem {\n                        display: block;\n                    }\n                    .maxContent>.searchJumperFrame-body {\n                        width: 600px;\n                        margin-left: -300px;\n                    }\n                    .searchJumperFrame-maxBtn,\n                    .searchJumperFrame-closeBtn {\n                        position: absolute;\n                        right: 5px;\n                        top: 5px;\n                        color: white;\n                        width: 25px;\n                        cursor: pointer;\n                        transition:transform 0.25s ease;\n                    }\n                    .searchJumperFrame-maxBtn:hover,\n                    .searchJumperFrame-closeBtn:hover {\n                        transform: scale(1.2);\n                    }\n                    .searchJumperFrame-maxBtn>#maxBtn {\n                        display: block;\n                    }\n                    .searchJumperFrame-maxBtn>#minBtn {\n                        display: none;\n                    }\n                    .maxContent .searchJumperFrame-maxBtn>#maxBtn {\n                        display: none;\n                    }\n                    .maxContent .searchJumperFrame-maxBtn>#minBtn {\n                        display: block;\n                    }\n                    .crawling>.searchJumperFrame-body {\n                        display: none;\n                    }\n                    .searchJumperFrame-crawlBody {\n                        display: none;\n                    }\n                    .crawling>.searchJumperFrame-crawlBody {\n                        display: block;\n                    }\n                    .searchJumperFrame-buttons>button#submitCrawl,\n                    .searchJumperFrame-buttons>button#record,\n                    .searchJumperFrame-buttons>button#copy,\n                    .searchJumperFrame-buttons>button#loop {\n                        width: 100%;\n                        margin: 0 3px;\n                    }\n                    .searchJumperFrame-crawlBody>.actionCon {\n                        height: 200px;\n                        background: gray;\n                        border-radius: 10px;\n                        margin: 10px;\n                        padding: 0 10px 10px 10px;\n                        resize: auto;\n                        box-sizing: border-box;\n                        overflow: auto;\n                    }\n                    .searchJumperFrame-crawlBody>.actionCon>div {\n                        width: 100%;\n                        font-size: 16px;\n                        background: #000000cc;\n                        border-radius: 8px;\n                        color: white;\n                        margin: 3px 0;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        cursor: pointer;\n                        white-space: nowrap;\n                    }\n                    .searchJumperFrame-crawlBody>.actionCon>div>span {\n                        background: #275f90;\n                        border-radius: 5px;\n                        max-width: 40px;\n                        text-overflow: ellipsis;\n                        overflow: hidden;\n                        display: inline-block;\n                        margin: 0 3px;\n                        white-space: nowrap;\n                    }\n                    @media (prefers-color-scheme: dark) {\n                      .searchJumperFrame-body,\n                      .searchJumperFrame-crawlBody,\n                      .searchJumperFrame-input-title,\n                      .searchJumperFrame-inputs>input,\n                      .searchJumperFrame-inputs>textarea,\n                      .searchJumperFrame-inputs>select,\n                      .searchJumperFrame-body select {\n                        background-color: black!important;\n                        color: #d5d5d5!important;\n                      }\n                      .searchJumperFrame-inputs>input:focus,\n                      .searchJumperFrame-inputs>textarea:focus,\n                      .searchJumperFrame-inputs>select:focus,\n                      .searchJumperFrame-body select:focus {\n                        background-color: #1e1e1e!important;\n                      }\n                      .searchJumperFrame-inputs>input,\n                      .searchJumperFrame-inputs>textarea,\n                      .searchJumperFrame-inputs>select,\n                      .searchJumperFrame-body select {\n                        border: 1px solid rgb(255 255 255 / 36%);\n                      }\n                      .searchJumperFrame-title,\n                      .searchJumperFrame-buttons>button {\n                        background: #245d8f!important;\n                      }\n                      .searchJumperFrame-body>.iconsCon>img {\n                        border: 2px solid #000000;\n                      }\n                    }\n                    @media screen and (max-height: 600px) {\n                      .searchJumperFrame-body,\n                      .searchJumperFrame-crawlBody {\n                        top: 10px;\n                        margin-top: 0px;\n                      }\n                    }\n                ");(bt=document.createElement("div")).innerHTML=S(`\n                <div class="searchJumperFrame-body">\n                    <a href="${l}" class="searchJumperFrame-title" target="_blank" draggable="false">\n                        <img width="32px" height="32px" src="${be}" />${u("addSearchEngine")}\n                    </a>\n                    <div class="searchJumperFrame-maxBtn">\n                        <svg id="maxBtn" fill="white" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("maxAddSiteBtn")}</title><path d="M192 832h160a32 32 0 0 1 0 64H160a32 32 0 0 1-32-32V672a32 32 0 0 1 64 0zM182.72 886.72a32 32 0 0 1-45.44-45.44l224-224a32 32 0 0 1 45.44 45.44zM832 832V672a32 32 0 0 1 64 0v192a32 32 0 0 1-32 32H672a32 32 0 0 1 0-64zM886.72 841.28a32 32 0 0 1-45.44 45.44l-224-224a32 32 0 0 1 45.44-45.44zM192 192v160a32 32 0 0 1-64 0V160a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64zM137.28 182.72a32 32 0 0 1 45.44-45.44l224 224a32 32 0 0 1-45.44 45.44zM832 192H672a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0zM841.28 137.28a32 32 0 1 1 45.44 45.44l-224 224a32 32 0 0 1-45.44-45.44z"></path></svg>\n                        <svg id="minBtn" fill="white" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("minAddSiteBtn")}</title><path d="M672 352h160a32 32 0 0 1 0 64H640a32 32 0 0 1-32-32V192a32 32 0 0 1 64 0zM662.72 406.72a32 32 0 0 1-45.44-45.44l224-224a32 32 0 1 1 45.44 45.44zM352 352V192a32 32 0 0 1 64 0v192a32 32 0 0 1-32 32H192a32 32 0 0 1 0-64zM406.72 361.28a32 32 0 0 1-45.44 45.44l-224-224a32 32 0 0 1 45.44-45.44zM672 672v160a32 32 0 0 1-64 0V640a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64zM617.28 662.72a32 32 0 0 1 45.44-45.44l224 224a32 32 0 0 1-45.44 45.44zM192 672a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V672zM361.28 617.28a32 32 0 0 1 45.44 45.44l-224 224a32 32 0 0 1-45.44-45.44z"></path></svg>\n                    </div>\n                    <div class="searchJumperFrame-inputs">\n                        <div class="searchJumperFrame-input-title">${u("siteName")}</div>\n                        <input name="siteName" type="text" />\n                        <div class="searchJumperFrame-input-title">${u("siteUrl")}</div>\n                        <textarea name="url" type="text"></textarea>\n                        <svg id="crawlBtn" class="sideIcon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>${u("crawlInfo")}</title><path d="M385 926.3c-11 0-21.4-4.3-29.2-12l-0.6-0.6c-0.7-0.7-65.6-70.4-108.4-112.7-42.8-42.3-118.6-111.4-119.3-112.1l-0.6-0.5c-15.9-15.7-24.6-36.6-24.5-58.8s9-43.1 25-58.6c28.6-27.7 72.2-31 104.6-8.2l90.5 44-83.1-290.1c-4.9-17.1-4.2-34.9 2.1-51.6 6.3-16.6 17.5-30.5 32.5-40.1 22-14.1 47.7-17.7 70.3-10 22.6 7.7 40.7 26.3 49.5 50.9L431 369.8V176.9c0-43.4 35.3-78.7 78.7-78.7 20.7 0 40.2 7.9 55 22.4 14.8 14.4 23.2 33.8 23.7 54.4v0.2l2.4 165.5L625 229.1l0.1-0.4c8.2-23.2 26.2-41.1 49.4-49.3 23.2-8.2 48.5-5.5 69.4 7.3 15.6 9.6 27.7 24.3 33.9 41.6s6.4 36.3 0.6 53.7L736 409.5l42.9-48.6 0.3-0.3c15.7-16.2 34.4-25.7 54.1-27.3 19.8-1.6 39.1 4.7 56 18.1 33 26.4 40.8 60.1 22.7 97.5l-0.5 1.1-0.6 1c-41.8 65.2-107.1 171.9-115.8 199-12.4 38.6-41 140.7-41.3 141.7l-0.2 0.7-34.5 107.2-0.6 1.2c-6.8 14.3-21.5 23.7-37.4 23.8l-295.9 1.6c0 0.1-0.1 0.1-0.2 0.1z"></path></svg>\n                        <div class="searchJumperFrame-input-title">${u("siteDesc")}</div>\n                        <textarea name="description" type="text"></textarea>\n                        <div class="searchJumperFrame-input-title">${u("siteIcon")}</div>\n                        <textarea name="icon" type="text"></textarea>\n                        <img class="sideIcon" width="27px" height="27px" />\n                    </div>\n                    <div class="searchJumperFrame-inputs moreItem">\n                        <div class="searchJumperFrame-input-title">${u("siteKeywords")}</div>\n                        <input name="siteKeywords" placeholder="kw|key" type="text" />\n                        <div class="searchJumperFrame-input-title">${u("siteMatch")}</div>\n                        <input name="siteMatch" placeholder="(www|m)\\.google\\.com" type="text" />\n                        <div class="searchJumperFrame-input-title">${u("openSelect")}</div>\n                        <select name="openSelect">\n                            <option value="-1">${u("openInDefault")}</option>\n                            <option value="true">${u("openInNewTab")}</option>\n                            <option value="false">${u("openInCurrent")}</option>\n                        </select>\n                    </div>\n                    <div class="iconsCon"></div>\n                    <div class="searchJumperFrame-input-title">${u("siteType")}</div>\n                    <select name="typeSelect">\n                    </select>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="test" type="button">${u("siteTest")}</button>\n                        <button id="cancel" type="button">${u("siteCancel")}</button>\n                        <button id="add" type="button">${u("siteAdd")}</button>\n                    </div>\n                </div>\n                <div class="searchJumperFrame-crawlBody searchJumperFrame-hide">\n                    <a href="${l}" class="searchJumperFrame-title" target="_blank">\n                        <img width="32px" height="32px" src="${be}" />${u("addAction")}\n                    </a>\n                    <svg class="searchJumperFrame-closeBtn" fill="white" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>Close crawl</title>${Ce}</svg>\n                    <div class="actionCon"></div>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="input" type="button" title="${u("emuInputTips")}">${u("inputAction")}</button>\n                        <button id="click" type="button" title="${u("emuClickTips")}">${u("clickAction")}</button>\n                        <button id="sleep" type="button" title="${u("emuWaitTips")}">${u("sleepAction")}</button>\n                    </div>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="copy" type="button" title="${u("emuCopyTips")}">${u("copyAction")}</button>\n                    </div>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="record" type="button" title="${u("emuRecordTips")}">${u("recordAction")}</button>\n                    </div>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="loop" type="button" title="${u("emuLoopTips")}">${u("loopAction")}</button>\n                    </div>\n                    <div class="searchJumperFrame-buttons">\n                        <button id="submitCrawl" type="button" title="${u("emuStopTips")}">${u("submitCrawl")}</button>\n                    </div>\n                </div>\n                `),I||bt.appendChild(e);let t=bt.children[0];xt=bt.querySelector("[name='siteName']"),Ct=bt.querySelector("[name='description']"),jt=bt.querySelector("[name='url']"),kt=bt.querySelector("[name='icon']"),It=bt.querySelector(".searchJumperFrame-inputs>img"),Tt=bt.querySelector(".iconsCon"),Et=bt.querySelector("#test"),Lt=bt.querySelector("#cancel"),Pt=bt.querySelector("#add"),St=bt.querySelector("select[name='typeSelect']"),Mt=bt.querySelector("[name='siteKeywords']"),Nt=bt.querySelector("[name='siteMatch']"),Bt=bt.querySelector("select[name='openSelect']");let n,r,s=bt.querySelector(".searchJumperFrame-title"),a=!1,o=e=>{a||(bt.classList.add("draging"),a=!0);let i=e.clientX-n.x+r.x,s=e.clientY-n.y+r.y;t.style.marginLeft=i+"px",t.style.marginTop=s+"px"},c=e=>{e.preventDefault(),e.stopPropagation(),bt.classList.remove("draging"),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)};s.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),a=!1,n={x:e.clientX,y:e.clientY};let i=getComputedStyle(t);r={x:parseInt(i.marginLeft||0),y:parseInt(i.marginTop||0)},document.addEventListener("mousemove",o),document.addEventListener("mouseup",c)})),It.onload=e=>{It.style.display=""},bt.querySelector("#maxBtn").addEventListener("click",(e=>{bt.classList.add("maxContent")})),bt.querySelector("#minBtn").addEventListener("click",(e=>{bt.classList.remove("maxContent")}));for(let e=0;e<p.sitesConfig.length;e++){let t=p.sitesConfig[e],n=document.createElement("option");n.value=e,""!==pe&&pe==e&&(n.selected="selected"),n.innerText=t.type,St.appendChild(n)}Et.addEventListener("click",(e=>{if(/#p{/.test(jt.value)){let e=jt.value.match(/#p{(.*)}/);if(!e)return;let t=[];e[1].replace(/([^\\])&/g,"$1SJ^PARAM").split("SJ^PARAM").forEach((e=>{if(e=e.trim(),/^loopStart\(\d+\)$/.test(e)){let n=e.match(/loopStart\((.*)\)/);t.push(["@loopStart",n[1]])}else if("loopEnd"==e)t.push(["@loopEnd",""]);else if(e.startsWith("click(")&&e.endsWith(")")){let n=e.slice(6,e.length-1);n&&t.push(["@click",n.replace(/\\([\=&])/g,"$1").trim()])}else if(e.startsWith("dblclick(")&&e.endsWith(")")){let n=e.slice(9,e.length-1);n&&t.push(["@dblclick",n.replace(/\\([\=&])/g,"$1").trim()])}else if(e.startsWith("rclick(")&&e.endsWith(")")){let n=e.slice(7,e.length-1);n&&t.push(["@rclick",n.replace(/\\([\=&])/g,"$1").trim()])}else if(e.startsWith("copy(")&&e.endsWith(")")){let n=e.slice(5,e.length-1);n&&t.push(["@copy",n.replace(/\\([\=&])/g,"$1").trim()])}else if(e.startsWith("call(")&&e.endsWith(")")){let n=e.slice(5,e.length-1);n&&t.push(["@call",n.replace(/\\([\=&])/g,"$1").trim()])}else if(e.startsWith("wait(")&&e.endsWith(")")){let n=e.slice(5,e.length-1);t.push(["@wait",n.replace(/\\([\=&])/g,"$1").trim()])}else if(/^sleep\(\d+\)$/.test(e)){let n=e.match(/sleep\((.*)\)/);n&&t.push(["@sleep",n[1]])}else if(/^reload\(\d?\)$/.test(e)){let n=e.match(/reload\((.*)\)/);t.push(["@reload",n[1]])}else{let n=(e=e.replace(/([^\\])\=/g,"$1SJ^PARAM").replace(/\\([\=&])/g,"$1")).split("SJ^PARAM");if(2===n.length){let e=n[0],r=n[1].replace(/\\([\=&])/g,"$1");t.push([e,r])}else(e.endsWith(".click()")||e.endsWith(".click"))&&t.push(["@"+e.replace(/\.click(\(\))?$/,""),"click"])}})),X=t,q.submitAction(t)}else/[:%]p{/.test(jt.value)||i&&"utf-8"!=i.toLowerCase()?ze(i,jt.value.replace(/%se?\b/g,"searchJumper"),"_blank"):b(jt.value.replace(/%se?\b/g,"searchJumper"),{active:!0,insert:!0})})),Lt.addEventListener("click",(e=>{bt.parentNode&&bt.parentNode.removeChild(bt)})),Pt.addEventListener("click",(e=>{ot||A((()=>{let e=null;for(let t=0;t<p.sitesConfig.length;t++){let n=p.sitesConfig[t];for(let r=0;r<n.sites.length;r++){let i=n.sites[r];if(i.url==jt.value){if(t==parseInt(St.value))return void alert("Already added!");if(!window.confirm(u("siteExist")))return;e={name:i.name+" - "+n.type,url:`["${i.name}"]`}}}}null==e&&(e={name:xt.value,url:jt.value},kt.value&&kt.value!=jt.value.replace(/\?.*/,"").replace(/^(https?:\/\/[^\/]*\/)[\s\S]*$/,"$1favicon.ico")&&(e.icon=kt.value),Ct.value&&Ct.value!=xt.value&&(e.description=Ct.value),Mt.value&&(e.keywords=Mt.value),Nt.value&&(e.match=Nt.value),Bt.value&&"-1"!=Bt.value&&(e.openInNewTab="true"===Bt.value),self.charset&&"utf-8"!=i.toLowerCase()&&(e.charset=self.charset),self.kwFilter&&(e.kwFilter=self.kwFilter),self.match&&(e.match=self.match),self.hideNotMatch&&(e.hideNotMatch=self.hideNotMatch)),p.sitesConfig[St.value].sites.push(e),p.lastModified=(new Date).getTime(),N.setItem("lastAddType",St.value),N.setItem("searchData",p),v(u("siteAddOver")),bt.parentNode&&bt.parentNode.removeChild(bt),window.postMessage({searchData:p,version:C.script.version||0,command:"loadConfig"},"*"),q.refreshEngines()}))})),At=bt.querySelector("#crawlBtn");let h,d,m=bt.querySelector(".searchJumperFrame-closeBtn"),f=bt.querySelector(".actionCon"),g=bt.querySelector("#input"),y=bt.querySelector("#click"),w=bt.querySelector("#sleep"),j=bt.querySelector("#copy"),k=bt.querySelector("#submitCrawl"),T=bt.querySelector("#record"),E=bt.querySelector("#loop"),L=(e,t="",n="")=>{let r=document.createElement("div"),i=e;switch(e){case"input":i=u("inputOutput",[t,n]);break;case"click":i=u("clickOutput",t);break;case"dblclick":i=u("dblclickOutput",t);break;case"rclick":i=u("rclickOutput",t);break;case"copy":i=u("copyOutput",t);break;case"loopStart":i=u("loopStart",n);break;case"loopEnd":i=u("loopEnd");break;case"sleep":i=u("sleepOutput",n)}i&&(r.innerHTML=S(i),r.dataset.type=e,r.dataset.sel=t,r.dataset.val=n,r.draggable="true",r.ondragover=e=>{e.preventDefault()},r.ondragstart=e=>{h=r},r.ondrop=e=>{f.insertBefore(h,r)},r.onclick=e=>{let t=e.target;if("SPAN"==t.nodeName.toUpperCase())if("element"==t.className)Ne.getSelector((e=>{t.innerText=e,t.title=e,bt.style.display="",r.dataset.sel=e})),bt.style.display="none";else{let e=prompt(u("inputNewValue"),t.innerText);e&&(t.innerText=e,t.title=e,r.dataset.val=e)}else confirm(u("deleteConfirm"))&&f.removeChild(r)},r.oncontextmenu=e=>{let t=e.target;if("SPAN"==t.nodeName.toUpperCase())if(e.preventDefault(),"element"==t.className){let e=prompt("Selector",t.innerText);e&&(t.innerText=e,t.title=e,r.dataset.sel=e)}else{let e=prompt(u("inputNewValue"),t.innerText);e&&(t.innerText=e,t.title=e,r.dataset.val=e)}},f.appendChild(r))},P=()=>{f.innerHTML=S();let e=jt.value.match(/#p{(.*)}/);e&&e[1].replace(/([^\\])&/g,"$1SJ^PARAM").split("SJ^PARAM").forEach((e=>{if(e=e.trim(),/^loopStart\(\d+\)$/.test(e)){let t=e.match(/loopStart\((.*)\)/);L("loopStart","",t[1])}else if("loopEnd"==e)L("loopEnd");else if(e.startsWith("click(")&&e.endsWith(")")){let t=e.slice(6,e.length-1);t&&L("click",t.replace(/\\([\=&])/g,"$1").trim())}else if(e.startsWith("dblclick(")&&e.endsWith(")")){let t=e.slice(9,e.length-1);t&&L("dblclick",t.replace(/\\([\=&])/g,"$1").trim())}else if(e.startsWith("rclick(")&&e.endsWith(")")){let t=e.slice(7,e.length-1);t&&L("rclick",t.replace(/\\([\=&])/g,"$1").trim())}else if(e.startsWith("copy(")&&e.endsWith(")")){let t=e.slice(5,e.length-1);t&&L("copy",t.replace(/\\([\=&])/g,"$1").trim())}else if(e.startsWith("call(")&&e.endsWith(")")){let t=e.slice(5,e.length-1);t&&L("call","",t.replace(/\\([\=&])/g,"$1").trim())}else if(e.startsWith("wait(")&&e.endsWith(")")){let t=e.slice(5,e.length-1);t&&L("wait","",t.replace(/\\([\=&])/g,"$1").trim())}else if(e.startsWith("open(")&&e.endsWith(")")){let t=e.slice(5,e.length-1);t&&L("open","",t.replace(/\\([\=&])/g,"$1").trim())}else if(/^sleep\(\d+\)$/.test(e)){let t=e.match(/sleep\((.*)\)/);t&&L("sleep","",t[1])}else if(/^reload\(\d?\)$/.test(e)){let t=e.match(/reload\((.*)\)/);L("reload","",t[1])}else{let t=(e=e.replace(/([^\\])\=/g,"$1SJ^PARAM").replace(/\\([\=&])/g,"$1")).split("SJ^PARAM");2===t.length?L("input",t[0],t[1].replace(/\\([\=&])/g,"$1")):(e.endsWith(".click()")||e.endsWith(".click"))&&L("click",e.replace(/\.click(\(\))?$/,""))}}))},M=()=>{let e=[];return[].forEach.call(f.children,(t=>{if(!t)return;let n=t.dataset.sel,r=t.dataset.val||"";switch(t.dataset.type){case"click":e.push(`click(${n.replace(/([=&])/g,"\\$1")})`);break;case"dblclick":e.push(`dblclick(${n.replace(/([=&])/g,"\\$1")})`);break;case"rclick":e.push(`rclick(${n.replace(/([=&])/g,"\\$1")})`);break;case"copy":e.push(`copy(${n.replace(/([=&])/g,"\\$1")})`);break;case"input":e.push(`${n.replace(/([=&])/g,"\\$1")}=${r}`);break;case"sleep":e.push(`sleep(${r})`);break;case"loopEnd":e.push("loopEnd");break;default:e.push(`${t.dataset.type}(${r.replace(/([=&])/g,"\\$1")})`)}})),e.join("&")};At.addEventListener("click",(e=>{P(),bt.classList.add("crawling")})),m.addEventListener("click",(e=>{bt.classList.remove("crawling")}));let B=e=>{""!==bt.style.display&&(/INPUT|TEXTAREA|SELECT|OPTION/i.test(e.target.nodeName)||(clearTimeout(d),d=setTimeout((()=>{L("click",Ne.geneSelector(e.target,!0))}),300)))},$=e=>{""!==bt.style.display&&(/INPUT|TEXTAREA|SELECT|OPTION/i.test(e.target.nodeName)||(clearTimeout(d),L("dblclick",Ne.geneSelector(e.target,!0))))},W=e=>{""!==bt.style.display&&(/INPUT|TEXTAREA|SELECT|OPTION/i.test(e.target.nodeName)||(e.preventDefault(),clearTimeout(d),L("rclick",Ne.geneSelector(e.target,!0))))},J=e=>{""!==bt.style.display&&L("input",Ne.geneSelector(e.target,!0),e.target.value)},D=e=>{if(""===bt.style.display)return;let t=!1;27==e.keyCode?t=!0:13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.target&&e.target.blur&&e.target.blur(),t=!0),t&&(bt.style.display="",document.removeEventListener("keydown",D,!0),document.removeEventListener("click",B),document.removeEventListener("dblclick",$),document.removeEventListener("contextmenu",W),document.removeEventListener("change",J))};T.addEventListener("click",(e=>{alert(u("startRecord")),bt.style.display="none",setTimeout((()=>{document.addEventListener("keydown",D,!0),document.addEventListener("click",B),document.addEventListener("dblclick",$),document.addEventListener("contextmenu",W),document.addEventListener("change",J)}),100)}));let z=!1;E.addEventListener("click",(e=>{if(z)L("loopEnd"),E.innerText=u("loopAction");else{let e=prompt(u("loopTimes"),1);if(!e)return;L("loopStart","",e||"1"),E.innerText=u("loopActionEnd")}z=!z})),g.addEventListener("click",(e=>{Ne.getSelector((e=>{L("input",e,"%s"),bt.style.display=""}),!z),bt.style.display="none"})),j.addEventListener("click",(e=>{Ne.getSelector((e=>{L("copy",e,"%s"),bt.style.display=""}),!z),bt.style.display="none"})),y.addEventListener("dblclick",(e=>{clearTimeout(d),e.preventDefault(),e.stopPropagation(),Ne.getSelector((e=>{L("dblclick",e),bt.style.display=""}),!z),bt.style.display="none"})),y.addEventListener("contextmenu",(e=>{clearTimeout(d),e.preventDefault(),e.stopPropagation(),Ne.getSelector((e=>{L("rclick",e),bt.style.display=""}),!z),bt.style.display="none"})),y.addEventListener("click",(e=>{clearTimeout(d),d=setTimeout((()=>{Ne.getSelector((e=>{L("click",e),bt.style.display=""}),!z),bt.style.display="none"}),250)})),w.addEventListener("click",(e=>{let t=prompt(u("sleepPrompt"),1e3);t=t&&parseInt(t),t&&L("sleep","",t)})),k.addEventListener("click",(e=>{let t=M();t&&(jt.value=location.href+"#p{"+t+"}"),bt.classList.remove("crawling")}))}q.addToShadow(bt),Mt.value="",Nt.value="",xt.value=e||"",Ct.value=t||"",jt.value=n||"",r&&r[0]?(It.style.display="",0===n.indexOf(location.origin)?(It.onerror=e=>{It.onerror=null,kt.value=r[0],It.src=r[0]},It.src=location.origin+"/favicon.ico"):(kt.value=r[0],It.src=r[0])):(It.style.display="none",It.src=(/^(showTips:)?https?:/.test(n)?n.split("\n")[0].replace(/\?.*/,"").replace(/^(showTips:)?(https?:\/\/[^\/]+).*/,"$2"):location.origin)+"/favicon.ico"),Tt.innerHTML=S(),r&&r.length>1?(Tt.style.opacity="",r.forEach((e=>{let t=document.createElement("img");t.src=e,t.addEventListener("click",(t=>{kt.value=e,It.src=e})),t.onload=n=>{t.title=t.naturalWidth+" x "+t.naturalHeight+"\n"+e.replace(/.*\/([^\/]+)/,"$1")},Tt.appendChild(t)}))):Tt.style.opacity=0}function Wt(e,t){g({method:"GET",url:e,headers:{referer:e,origin:e},onload:e=>{let n=e&&e.responseXML&&e.responseXML.querySelector('Url[type="text/html"]');if(!n)return void t("error",e);let r=e.responseXML.querySelector("ShortName"),i=e.responseXML.querySelector("Description"),s=e.responseXML.querySelector("Image"),a=e.responseXML.querySelector("InputEncoding"),o=n.querySelectorAll("Param"),l=r&&r.textContent,c=i&&i.textContent,p=n.getAttribute("template"),h=s&&s.textContent,d=a&&a.textContent;if(o.length>0){let e=[];[].forEach.call(o,(t=>{e.push(`${t.getAttribute("name")}=${t.getAttribute("value")}`)})),p+=`%p{${e.join("&")}}`}$t(l,c,p.replace(/{searchTerms\??}/g,"%s").replace(/{startPage\??}/g,"1").replace(/{count\??}/g,"10").replace(/{startIndex\??}/g,"1").replace(/{startPage\??}/g,"1").replace(/{language\??}/g,"*").replace(/{inputEncoding\??}/g,"UTF-8").replace(/{outputEncoding\??}/g,"UTF-8"),[h],d),t("load",e)},onerror:e=>{t("error",e)},ontimeout:e=>{t("error",e)}})}async function Jt(){await q.initRun(),nt(),function(){if(c){if(q.appendBar(),q.showAllSites(),setTimeout((()=>{q.con.style.zIndex=0}),5),location.hash){let e=location.hash.slice(1);try{e=decodeURIComponent(e)}catch(e){}q.searchJumperInputKeyWords.value=e}else if(location.search){let e,t,n;location.search.slice(1).split("&").forEach((r=>{let i=r.split("="),s=i[0],a=i[1];try{a=decodeURIComponent(a)}catch(e){}switch(s){case"kw":e=a;break;case"engine":t=a;break;case"self":n=a}})),e&&(q.searchJumperInputKeyWords.value=e||""),t&&q.searchBySiteName(t,{},!!n)}W(document).style.cssText="\n                    zoom: 1;\n                    margin: 0;\n                    padding: 0;\n                    width: 100vw;\n                    height: 100vh;\n                    background-position: center 0;\n                    background-repeat: no-repeat;\n                    background-size: cover;\n                    -webkit-background-size: cover;\n                    -o-background-size: cover;\n                    overflow: hidden;\n                ",p.prefConfig.bgUrl&&(he=p.prefConfig.bgUrl).length?W(document).style.backgroundImage=`url("${he}")`:N.getItem("allPageBg",(e=>{e?(he=e.url,W(document).style.backgroundImage=`url("${e.base64||he}")`):e={url:""},g({method:"GET",url:"https://global.bing.com/HPImageArchive.aspx?format=js&idx=0&pid=hp&video=1&n=1",onload:function(t){try{var n=JSON.parse(t.responseText).images[0].url;if(/^https?:\/\//.test(n)||(n="https://global.bing.com"+n),he=n,n==e.url)return;g({method:"GET",url:n,responseType:"blob",onload:function(t){var r=t.response,i=new FileReader;i.readAsDataURL(r),i.onload=function(t){var r=t.target.result;e={url:n,base64:r},N.setItem("allPageBg",e)}}}),e.base64||(W(document).style.backgroundImage=`url("${n}")`)}catch(e){console.log(e)}}})}))}}()}async function Dt(e){await new Promise((t=>{setTimeout((()=>{t()}),e)}))}async function zt(){let e=await new Promise((e=>{N.getItem("searchData",(t=>{e(t)}))}));G=await new Promise((e=>{N.getItem("cacheKeywords",(t=>{e(t||"")}))})),Y=await new Promise((e=>{N.getItem("cacheFilter",(t=>{e(t||"")}))})),me=await new Promise((e=>{N.getItem("disableState",(t=>{e(t||!1)}))})),V=await new Promise((e=>{N.getItem("tipsStorage",(t=>{e(t||[])}))})),Z=await new Promise((e=>{N.getItem("lastSign",(t=>{e(t||!1)}))})),N.setItem("lastSign",!1),X=await N.getListItem("inPagePostParams",location.hostname),Q=await new Promise((e=>{N.getItem("cacheIcon",(t=>{e(t||{})}))})),ee=await new Promise((e=>{N.getItem("historySites",(t=>{e(t||[])}))})),te=await new Promise((e=>{N.getItem("historyType",(t=>{e(t||"")}))})),ne=await new Promise((e=>{N.getItem("sortTypeNames",(t=>{e(t||{})}))})),re=await new Promise((e=>{N.getItem("sortSiteNames",(t=>{e(t||{})}))})),se=await new Promise((e=>{N.getItem("globalInPageWords",(t=>{e(t||"")}))})),ae=await new Promise((e=>{N.getItem("navEnable",(t=>{e(void 0===t||t)}))})),oe=await new Promise((e=>{N.getItem("referrer",(t=>{e(t||"")}))})),le=await new Promise((e=>{N.getItem("disableHighlight",(t=>{e(t||"")}))})),ce=await new Promise((e=>{N.getItem("lastHighlight",(t=>{e(t||"")}))})),ye=await new Promise((e=>{N.getItem("allPageNewMode",(t=>{e(t||!1)}))})),pe=await new Promise((e=>{N.getItem("lastAddType",(t=>{e(t||"")}))})),e&&(p=e,ve=p.lastModified),p.lastModified||(p.sitesConfig=sitesConfig),p.prefConfig.lang&&"0"!=p.prefConfig.lang&&(h=p.prefConfig.lang),function(){switch(h){case"zh-CN":case"zh-SG":d={import:"导入",filter:"筛选",selectAll:"全选",importOrNot:"是否导入配置？",settings:"配置脚本",batchOpen:"批量打开",batchOpenConfirm:"确定要批量打开吗？",postOver:"发送成功：",postError:"发送失败：",copyOver:"复制成功",keywords:"请输入搜索词",targetUrl:"请输入搜索URL",siteName:"站名",siteDesc:"描述",siteUrl:"地址",siteIcon:"图标",siteTest:"测试",siteCancel:"取消",siteAdd:"添加",siteType:"分类",siteExist:"已存在相同规则，是否添加为克隆项？",siteAddOver:"站点添加成功",multiline:"是否以换行符分隔多行搜索？",multilineTooMuch:"行数超过10行，是否继续搜索？",inputPlaceholder:"筛选引擎",inputTitle:"筛选引擎，支持 * ? 通配符，$代表末尾，^代表开头，分组**站点 可筛选指定分组，例如 图片**baidu，tab 下一项",inputKeywords:"输入搜索关键词",inPageTips:"自定义分隔符：$c 加分隔符，例如 $c| search | jumper，默认空格作为分隔符\n原始文本不分隔：$o 加文本，例如$oopai liked by hero\n正则表达式：/re/，例如 $c, /google/i , /aPPle/\n添加提示文本：搜索文本$t{提示文本}，例如 linux$t{linux is not unix}\n添加自定义样式：搜索文本$s{背景;其他}，例如 google$s{#333333;color:red;}\n左键点击关键词跳转至下一个，右键点击关键词跳转至上一个",inPagePlaceholder:"输入文字，按下回车进行页内查找",pickerBtn:"抓取元素",multiPickerBtn:"抓取元素，按住 Ctrl 或 Command 连续抓取",editBtn:"编辑查找文字",emptyBtn:"清空查找文字",copyInPageBtn:"复制查找文字",wordModeBtn:"单词模式",copyEleBtn:"复制选中元素",openLinkBtn:"打开选中链接",maxEleBtn:"展开选中元素",minEleBtn:"收起选中元素",expandAll:"全部展开",collapseAll:"全部合起",rename:"重命名",recoverBtn:"恢复查找文字",pinBtn:"固定查找文字，在所有标签页中搜索",locBtn:"定位侧边栏",filterSites:"筛选搜索引擎",searchInPage:"页内查找",removeBtn:"移除搜索词",saveRuleBtn:"保存当前站点的搜索词",wordContent:"搜索词内容",wordHide:"隐藏父级元素",wordHideTips:"元素深度，0为当前父级",wordStyle:"搜索词样式",wordTitle:"搜索词注释",re:"正则",ignoreCase:"不区分大小写",filterLink:"筛选链接",modify:"修改",cancel:"取消",modifyWord:"修改页内搜索词",addSearchEngine:"添加搜索引擎",noValidItemAsk:"未找到有效元素，是否手动编辑规则并添加？",expand:"展开剩余站点",add:"添加",addWord:"添加新词语",wordRange:"生效范围",customInputFrame:"自定义搜索参数",customSubmit:"提交搜索",finalSearch:"目标搜索字串",search:"搜索此项",siteKeywords:"关键词(多个关键词以|分隔)",siteMatch:"站点 URL 匹配正则",openSelect:"打开选项",openInDefault:"默认",openInNewTab:"新标签页打开",openInCurrent:"当前页打开",currentType:"当前分类",maxAddSiteBtn:"最大化",minAddSiteBtn:"还原",addAction:"添加操作",crawlInfo:"模拟输入搜索",inputAction:"输入",clickAction:"点击",sleepAction:"等待",copyAction:"📄复制元素",submitCrawl:"☑️完成操作",inputOutput:'在元素<span title="#t1#" class="element">#t1#</span>内输入<span title="#t2#">#t2#</span>',clickOutput:'点击元素<span title="#t#" class="element">#t#</span>',dblclickOutput:'双击元素<span title="#t#" class="element">#t#</span>',rclickOutput:'右击元素<span title="#t#" class="element">#t#</span>',copyOutput:'复制元素<span title="#t#" class="element">#t#</span>',sleepOutput:'休眠<span title="#t#">#t#</span>毫秒',inputNewValue:"请输入新值",deleteConfirm:"确定要删除此项吗？",sleepPrompt:"等待时间（毫秒）",startCache:"开始缓存，请耐心等待缓存完毕，勿关闭配置页！",cacheOver:"所有图标都已缓存完毕！",cspDisabled:"脚本样式被当前站点的 CSP 阻止，因此无法显示，请尝试安装 Allow CSP: Content-Security-Policy 扩展获取权限",Sunday:"星期日 (日)",Monday:"星期一 (月)",Tuesday:"星期二 (火)",Wednesday:"星期三 (水)",Thursday:"星期四 (木)",Friday:"星期五 (金)",Saturday:"星期六 (土)",template:"请设置【#t#】的值",recordAction:"⏺️录制操作",startRecord:"开始录制操作，按回车键结束录制",loopAction:"🔁开始循环",loopActionEnd:"⏹️循环结束",loopStart:'开始循环，循环次数为<span title="#t#">#t#</span>',loopEnd:"结束循环",loopTimes:"循环次数，将遍历所有匹配元素并顺序执行",loadingCollection:"正在加载合集，请稍候……",emuInputTips:"在指定页面元素（例如输入框）内输入搜索词",emuClickTips:"单击指定页面元素（例如按钮）",emuWaitTips:"等待一段时间后继续执行，当某个操作需要一段时间才能完成时很有用",emuCopyTips:"复制指定元素的文本到剪贴板",emuRecordTips:"录制接下来的点击和输入操作",emuLoopTips:"开始循环，接下来的操作将遍历所有找到的元素并且重复指定次数",emuStopTips:"结束操作并生成规则"};break;case"zh":case"zh-TW":case"zh-HK":d={import:"導入",filter:"篩選",selectAll:"全選",importOrNot:"是否導入配置？",settings:"配置脚本",batchOpen:"批量打開",batchOpenConfirm:"確定要批量打開嗎？",postOver:"發送成功：",postError:"發送失敗：",copyOver:"複製成功",keywords:"請輸入搜尋詞",targetUrl:"請輸入搜尋URL",siteName:"站名",siteDesc:"描述",siteUrl:"地址",siteIcon:"圖標",siteTest:"測試",siteCancel:"取消",siteAdd:"添加",siteType:"分類",siteExist:"已存在相同規則，是否添加為克隆項？",siteAddOver:"站點添加成功",multiline:"是否以換行符分隔多行搜尋？",multilineTooMuch:"行數超過10行，是否繼續搜尋？",inputPlaceholder:"篩選引擎",inputTitle:"篩選引擎，支援 * ? 通配符，$代表末尾，^代表開頭，分組**站點 可篩選指定分組，例如 圖片**google，tab 下一項",inputKeywords:"輸入搜尋關鍵詞",inPageTips:"自定義分隔符：$c 加分隔符，例如 $c| search | jumper，默認空格作為分隔符\n原始文本不分隔：$o 加文本，例如$oopai liked by hero\n正則表達式：/re/，例如 $c, /google/i , /aPPle/\n添加提示文本：搜尋文本$t{提示文本}，例如 linux$t{linux is not unix}\n添加自定義樣式：搜尋文本$s{背景;其他}，例如 google$s{#333333;color:red;}\n左鍵點擊關鍵詞跳轉至下一個，右鍵點擊關鍵詞跳轉至上一個",inPagePlaceholder:"輸入文字，按下回車進行頁內查找",pickerBtn:"抓取元素",multiPickerBtn:"抓取元素，按住 Ctrl 或 Command 連續抓取",editBtn:"編輯查找文字",emptyBtn:"清空查找文字",copyInPageBtn:"複製查找文字",wordModeBtn:"單詞模式",copyEleBtn:"複製選中元素",openLinkBtn:"打開選中連結",maxEleBtn:"展開選中元素",minEleBtn:"收起選中元素",expandAll:"全部展開",collapseAll:"全部合起",rename:"重命名",recoverBtn:"恢復查找文字",pinBtn:"固定查找文字，在所有標籤頁中搜尋",locBtn:"定位側邊欄",filterSites:"篩選搜尋引擎",searchInPage:"頁內查找",removeBtn:"移除搜尋詞",saveRuleBtn:"保存當前站點的搜尋詞",wordContent:"搜尋詞內容",wordHide:"隱藏父級元素",wordHideTips:"元素深度，0為當前父級",wordStyle:"搜尋詞樣式",wordTitle:"搜尋詞注釋",re:"正則",ignoreCase:"不區分大小寫",filterLink:"篩選鏈接",modify:"修改",cancel:"取消",modifyWord:"修改頁內搜尋詞",addSearchEngine:"添加搜尋引擎",noValidItemAsk:"未找到有效元素，是否手動編輯規則並添加？",expand:"展開剩餘站點",add:"添加",addWord:"添加新詞語",wordRange:"生效範圍",customInputFrame:"自定義搜尋參數",customSubmit:"提交搜尋",finalSearch:"目標搜尋字串",search:"搜尋此項",siteKeywords:"關鍵詞(多個關鍵詞以|分隔)",siteMatch:"站點 URL 匹配正則",openSelect:"打開選項",openInDefault:"默認",openInNewTab:"新標籤頁打開",openInCurrent:"當前頁打開",currentType:"當前分類",maxAddSiteBtn:"最大化",minAddSiteBtn:"還原",addAction:"添加操作",crawlInfo:"模擬輸入搜尋",inputAction:"輸入",clickAction:"點擊",sleepAction:"等待",copyAction:"📄複製元素",submitCrawl:"☑️完成操作",inputOutput:'在元素<span title="#t1#" class="element">#t1#</span>內輸入<span title="#t2#">#t2#</span>',clickOutput:'點擊元素<span title="#t#" class="element">#t#</span>',dblclickOutput:'雙擊元素<span title="#t#" class="element">#t#</span>',rclickOutput:'右擊元素<span title="#t#" class="element">#t#</span>',copyOutput:'複製元素<span title="#t#" class="element">#t#</span>',sleepOutput:'休眠<span title="#t#">#t#</span>毫秒',inputNewValue:"請輸入新值",deleteConfirm:"確定要刪除此項嗎？ ",sleepPrompt:"等待時間（毫秒）",startCache:"開始緩存，請耐心等待緩存完畢，勿關閉配置頁！",cacheOver:"所有圖標都已緩存完畢！",cspDisabled:"腳本樣式被當前站點的 CSP 阻止，因此無法顯示，請嘗試安裝 Allow CSP: Content-Security-Policy 擴展獲取權限",Sunday:"星期日 (日)",Monday:"星期一 (月)",Tuesday:"星期二 (火)",Wednesday:"星期三 (水)",Thursday:"星期四 (木)",Friday:"星期五 (金)",Saturday:"星期六 (土)",template:"請設置【#t#】的值",recordAction:"⏺️錄製動作",startRecord:"開始錄製操作，按下回車鍵結束錄製",loopAction:"🔁開始循環",loopActionEnd:"⏹️循環結束",loopStart:'開始循環，循環次數為<span title="#t#">#t#</span>',loopEnd:"結束循環",loopTimes:"循環次數，將遍歷所有匹配元素並順序執行",loadingCollection:"正在載入合集，請稍候……",emuInputTips:"在指定頁面元素（例如輸入框）內輸入搜尋字詞",emuClickTips:"點擊指定頁面元素（例如按鈕）",emuWaitTips:"等待一段時間後繼續執行，當某個操作需要一段時間才能完成時很有用",emuCopyTips:"複製指定元素的文字到剪貼簿",emuRecordTips:"錄製接下來的點擊和輸入操作",emuLoopTips:"開始循環，接下來的操作將遍歷所有找到的元素並且重複指定次數",emuStopTips:"結束操作並產生規則"};break;case"ja":d={import:"インポート",filter:"フィルター",selectAll:"すべて選択",importOrNot:"設定をインポートしますか? ",settings:"構成スクリプト",batchOpen:"バッチオープン",batchOpenConfirm:"バッチオープンしてもよろしいですか? ",postOver:"正常に送信されました:",postError:"送信に失敗しました:",copyOver:"コピーに成功しました",keywords:"検索語を入力してください",targetUrl:"検索 URL を入力してください",siteName:"サイト名",siteDesc:"説明",siteUrl:"アドレス",siteIcon:"アイコン",siteTest:"テスト",siteCancel:"キャンセル",siteAdd:"追加",siteType:"カテゴリ",siteExist:"同じルールがすでに存在します。クローンとして追加しますか? ",siteAddOver:"サイトは正常に追加されました",multiline:"複数行の検索は改行で区切るべきですか? ",multilineTooMuch:"行数が 10 行を超えています。検索を続けますか? ",inputPlaceholder:"フィルタリング エンジン",inputTitle:"フィルタリング エンジン、*? ワイルドカードをサポート、$ は終わりを表し、^ は始まりを表します、グループ ** サイトは写真などの指定されたグループをフィルターできます ** Google、次の項目をタブします",inputKeywords:"検索キーワードを入力してください",inPageTips:"カスタム区切り文字: $c と区切り文字 ($c| 検索 | ジャンパーなど)、デフォルトのスペースを区切り文字として使用\n元のテキストは分離されていません: $o と文字 (ヒーローが好んだ $oopai など)\n正規表現 ：/re/ 、$c、/google/i、/aPPle/ など\nプロンプト テキストの追加: 検索テキスト $t{プロンプト テキスト}、たとえば linux$t{Linux は Unix ではありません}\nカスタム スタイルの追加: 検索テキスト $s{背景;other}、例: google$s{#333333;color:red;}\nキーワードを左クリックすると次のキーワードにジャンプし、キーワードを右クリックすると前のキーワードにジャンプします",inPagePlaceholder:"ページ内を検索するには、テキストを入力して Enter キーを押してください",pickerBtn:"要素の取得",multiPickerBtn:"要素を取得するには、Ctrl または Command を押したまま継続的に取得します",editBtn:"検索テキストを編集",emptyBtn:"空の検索テキスト",copyInPageBtn:"検索テキストをコピー",wordModeBtn:"ワードモード",copyEleBtn:"選択した要素をコピー",openLinkBtn:"選択したリンクを開く",maxEleBtn:"選択した要素を展開",minEleBtn:"選択した要素を折りたたむ",expandAll:"すべて展開",collapseAll:"すべて折り",rename:"名前を変更",reverseBtn:"検索テキストを復元",pinBtn:"検索テキストを修正、すべてのタブで検索",locBtn:"サイドバーを検索",filterSites:"検索エンジンをフィルタリング",searchInPage:"ページ内を検索",removeBtn:"検索語を削除",saveRuleBtn:"現在のサイトの検索語を保存",wordContent:"単語の内容を検索",wordHide:"親要素を非表示",wordHideTips:"要素の深さ、0 が現在の親",wordStyle:"検索ワードスタイル",wordTitle:"検索単語の注釈",re:"RegExp",ignoreCase:"大文字と小文字は区別されません",filterLink:"フィルターリンク",modify:"変更",cancel:"キャンセル",modifyWord:"ページ上の検索ワードを変更します",addSearchEngine:"検索エンジンを追加",noValidItemAsk:"有効な要素が見つかりません。ルールを手動で編集して追加しますか? ",expand:"残りのサイトを展開します",add:"追加",addWord:"新しい単語を追加",wordRange:"有効範囲",customInputFrame:"カスタム検索パラメータ",customSubmit:"検索を送信",finalSearch:"対象の検索文字列",search:"このアイテムを検索",siteKeywords:"キーワード (| で区切られた複数のキーワード)",siteMatch:"通常のサイト URL と一致",openSelect:"オプションを開く",openInDefault:"デフォルト",openInNewTab:"新しいタブが開きます",openInCurrent:"現在のページが開いています",currentType:"現在のカテゴリ",maxAddSiteBtn:"最大化",minAddSiteBtn:"復元",addAction:"アクションを追加",rollInfo:"入力検索をシミュレート",inputAction:"入力",clickAction:"クリック",sleepAction:"待機",copyAction:"📄要素のコピー",submitCrawl:"☑️操作を完了",inputOutput:'要素 <span title="#t1#" class="element">#t1#</span> 内に <span title="#t2#">#t2#</span> を入力します',clickOutput:'クリック<span title="#t#" class="element">#t#</span>',dblclickOutput:'ダブルクリック<span title="#t#" class="element">#t#</span>',rclickOutput:'右クリック<span title="#t#" class="element">#t#</span>',copyOutput:'コピー要素<span title="#t#" class="element">#t#</span>',sleepOutput:'スリープ<span title="#t#">#t#</span> ミリ秒',inputNewValue:"新しい値を入力してください",deleteconfirm:"この項目を削除してもよろしいですか? ",sleepPrompt:"待機時間 (ミリ秒)",startCache:"キャッシュを開始します。キャッシュが完了するまで辛抱強く待ってください。設定ページは閉じないでください。 ",cacheOver:"すべてのアイコンがキャッシュされました! ",cspDisabled:"スクリプト スタイルは現在のサイトの CSP によってブロックされているため、表示できません。許可を取得するには、Allow CSP: Content-Security-Policy 拡張機能をインストールしてみてください",Sunday:"日曜日",Monday:"月曜日",Tuesday:"火曜日",Wednesday:"水曜日",Thursday:"木曜日",Friday:"金曜日",Saturday:"土曜日",template:"[#t#]の値を設定してください",recordAction:"⏺️記録操作",startRecord:"記録操作を開始します。記録を終了するには Enter キーを押してください",loopAction:"🔁ループの開始",loopActionEnd:"⏹️ループの終了",loopStart:'ループを開始。ループ数は <span title="#t#">#t#</span> です',loopEnd:"ループの終了",loopTimes:"ループの数。一致するすべての要素が走査され、順番に実行されます",loadingCollection:"コレクションを読み込み中...",emuInputTips:"指定されたページ要素 (入力ボックスなど) に検索語を入力します",emuClickTips:"指定されたページ要素 (ボタンなど) をクリックします",emuWaitTips:"続行する前にしばらく待ってください。操作が完了するまでに時間がかかる場合に便利です",emuCopyTips:"指定された要素のテキストをクリップボードにコピーします",emuRecordTips:"次のクリックと入力操作を記録します",emuLoopTips:"ループを開始します。次の操作は見つかったすべての要素を走査し、指定された回数だけ繰り返します",emuStopTips:"操作を終了してルールを生成"};break;case"ru":d={import:"Импортировать",filter:"Фильтровать",selectAll:"Выбрать всё",importOrNot:"Импортировать эту конфигурацию?",settings:"Настройки",batchOpen:"Групповой поиск",batchOpenConfirm:"Искать с помощью всех движков группы?",postOver:"Post over: ",postError:"Post fail: ",copyOver:"Скопировано успешно",keywords:"Input keywords",targetUrl:"Input URL",siteName:"Название",siteDesc:"Описание",siteUrl:"URL",siteIcon:"Иконка",siteTest:"Тест",siteCancel:"Отменить",siteAdd:"Добавить",siteType:"Группа",siteExist:"Движок уже существует. Добавить его как клон?",siteAddOver:"Движок успешно добавлен",multiline:"Использовать многострочный поиск?",multilineTooMuch:"Количество строк превышает 10. Продолжить поиск?",inputPlaceholder:"Фильтры",inputTitle:'Filter engines, support * ? wildcards, $ means end, ^ means start, type name**site name to filter type like "image**google", tab to next. ',inputKeywords:"Ввести ключевые слова поиска",inPageTips:"Custom delimiter: $c + delimiter, such as $c| search | jumper, space as delimiter by default\nOriginal text without delimited: $o + text, such as $oopai liked by hero\nRegular expression: /re/, such as $c, /google/i , /aPPle/\nTips text: search text$t{tips text}, such as linux$t{linux is not unix}\nCustom style: Search text$s{background;other}, such as google$s{#333333;color:red;}\nLeft-click keyword to jump to the next, right-click keyword to jump to the previous",inPagePlaceholder:"Для поиска введите текст и нажмите Enter",pickerBtn:"Выбрать область",multiPickerBtn:"Выбрать элемент или выбрать несколько элементов с помощью Ctrl или Command",editBtn:"Редактировать текст поиска",emptyBtn:"Очистить поле ввода",copyInPageBtn:"Скопировать текст поика",wordModeBtn:"Режим поиска по словам. В поле ввода можно ввести целое предложение, после чего на странице будут искаться все слова по отдельности из которого состоит предложение",copyEleBtn:"Скопировать выбранные элементы",openLinkBtn:"Открыть выбранные ссылки",maxEleBtn:"Расширить выбранные элементы",minEleBtn:"Сжать выбранные элементы",expandAll:"Развернуть всё",collapseAll:"Свернуть всё",rename:"Rename",recoverBtn:"Recover find text",pinBtn:"Выделить цветом текущие ключевые слова поиска по странице во всех открытых вкладках",locBtn:"Отображать совпадения справа на панели",filterSites:"Фильтровать движки",searchInPage:"Искать на странице",removeBtn:"Удалить правило поиска",saveRuleBtn:"Сохранить правило поиска текущего сайта",wordContent:"Слово или фраза для поиска",wordHide:"Hide parent element",wordHideTips:"Глубина элемента, 0 - это текущее значение",wordStyle:"Стиль выделения слова",wordTitle:"Аннотация к искомому слову",re:"RegExp",ignoreCase:"Игнорировать регистр",filterLink:"Фильтровать ссылку",modify:"Готово",cancel:"Отменить",modifyWord:"Изменить параметры",addSearchEngine:"Добавить движок",noValidItemAsk:"Не найден подходящий элемент. Хотите вручную добавить сайт?",expand:"Развернуть другие сайты",add:"Добавить",addWord:"Добавить новое слово",wordRange:"Выделить область поиска",customInputFrame:"Пользовательские параметры поиска",customSubmit:"Принять",finalSearch:"Целевая строка поиска",search:"Искать это",siteKeywords:"Ключевые слова (разделитель |)",siteMatch:"Regexp для соответствия URL сайта",openSelect:"Открыть в",openInDefault:"По умолчанию",openInNewTab:"Открыть в новой вкладке",openInCurrent:"Открыть в текущей вкладке",currentType:"Current",maxAddSiteBtn:"Развернуть",minAddSiteBtn:"Свернуть",addAction:"Добавить действия",crawlInfo:"Симуляция действий на сайте",inputAction:"Ввод",clickAction:"Клик мыши",sleepAction:"Ожидание",copyAction:"📄Копировать элемент",submitCrawl:"☑️Завешить действие",inputOutput:'Ввод <span title="#t2#">#t2#</span> в элемент <span title="#t1#" class="element">#t1#</span>',clickOutput:'Клик по элементу <span title="#t#" class="element">#t#</span>',dblclickOutput:'Двойной клик <span title="#t#" class="element">#t#</span>',rclickOutput:'щелкните ПКМ <span title="#t#" class="element">#t#</span>',copyOutput:'Копировать элемент <span title="#t#" class="element">#t#</span>',sleepOutput:'Ждать <span title="#t#">#t#</span> миллисекунд',inputNewValue:"Введите новое значение",deleteConfirm:"Хотите удалить этот элемент? ",sleepPrompt:"Время ожидания (в миллисекундах)",startCache:"Началось кширование закрывайте страницу!",cacheOver:"Все иконки кэшированы!",cspDisabled:"The style of SearchJumper is blocked by the CSP of current site, please try to install the Allow CSP: Content-Security-Policy extension to obtain permission",template:'Установите значение "#t#"',recordAction:"⏺️Записать действие",startRecord:"Сейчас начнется запись действия. После завершения нажмите Enter, чтобы вернуться в окно редактирования.",loopAction:"🔁Начать цикл",loopActionEnd:"⏹️Остановить цикл",loopStart:'Начать цикл <span title="#t#">#t#</span> раз',loopEnd:"Остановить цикл",loopTimes:"Количество циклов, все совпадающие элементы будут пройдены и выполнены последовательно",loadingCollection:"Preparing collection for SearchJumper...",emuInputTips:"Ввести поисковые запросы в указанные элементы страницы (например, в поля ввода).",emuClickTips:"Кликнуть по указанному элементу страницы (например, по кнопке)",emuWaitTips:"Подождите некоторое время, прежде чем продолжить. Полезно, когда операция требует некоторого времени для завершения",emuCopyTips:"Копирование текста указанного элемента в буфер обмена",emuRecordTips:"Записать следующие нажатия и операции ввода",emuLoopTips:"Запустить цикл, следующая операция будет обходить все найденные элементы и повторяться указанное количество раз",emuStopTips:"Завершить операцию и создать правило"};break;default:d={import:"Import",filter:"Filter",selectAll:"SelectAll",importOrNot:"Do you want to import this config?",settings:"Settings",batchOpen:"Batch open",batchOpenConfirm:"Batch open urls?",postOver:"Post over: ",postError:"Post fail: ",copyOver:"Copied successfully",keywords:"Input keywords",targetUrl:"Input URL",siteName:"Site Name",siteDesc:"Description",siteUrl:"Site Url",siteIcon:"Site Icon",siteTest:"Test",siteCancel:"Cancel",siteAdd:"Add",siteType:"Category",siteExist:"Site is already exist, add it as clone?",siteAddOver:"Site added successfully",multiline:"Search as multilines?",multilineTooMuch:"The number of lines exceeds 10, do you want to continue searching?",inputPlaceholder:"Filter engines",inputTitle:'Filter engines, support * ? wildcards, $ means end, ^ means start, type name**site name to filter type like "image**google", tab to next. ',inputKeywords:"Enter search keywords",inPageTips:"Custom delimiter: $c + delimiter, such as $c| search | jumper, space as delimiter by default\nOriginal text without delimited: $o + text, such as $oopai liked by hero\nRegular expression: /re/, such as $c, /google/i , /aPPle/\nTips text: search text$t{tips text}, such as linux$t{linux is not unix}\nCustom style: Search text$s{background;other}, such as google$s{#333333;color:red;}\nLeft-click keyword to jump to the next, right-click keyword to jump to the previous",inPagePlaceholder:"Input text, press Enter to find in the page",pickerBtn:"Pick a element",multiPickerBtn:"Pick a element, pick multi elements with Ctrl or Command",editBtn:"Edit search text",emptyBtn:"Empty search text",copyInPageBtn:"Copy search text",wordModeBtn:"Word mode",copyEleBtn:"Copy selected elements",openLinkBtn:"Open selected links",maxEleBtn:"Expand selected elements",minEleBtn:"Collapse selected elements",expandAll:"Expand All",collapseAll:"Collapse All",rename:"Rename",recoverBtn:"Recover find text",pinBtn:"Pin search text to search in all tabs",locBtn:"Sidebar to locate",filterSites:"Filter search engines",searchInPage:"Find in page",removeBtn:"Remove search term",saveRuleBtn:"Save the search term of the current site",wordContent:"Search word content",wordHide:"Hide parent element",wordHideTips:"Element depth, 0 means the current",wordStyle:"Search word style",wordTitle:"Search word annotation",re:"RegExp",ignoreCase:"Ignore case",filterLink:"Filter link",modify:"Modify",cancel:"Cancel",modifyWord:"Modify search word",addSearchEngine:"Add search engine",noValidItemAsk:"No valid element found, do you want to manually edit the rule and add it?",expand:"Expand other sites",add:"Add",addWord:"Add new word",wordRange:"Effective range",customInputFrame:"Custom search parameters",customSubmit:"Submit",finalSearch:"Target search string",search:"Search this",siteKeywords:"Keywords(split by |)",siteMatch:"Regexp to match site URL",openSelect:"Open option",openInDefault:"Default",openInNewTab:"Open a new tab",openInCurrent:"Open in current",currentType:"Current",maxAddSiteBtn:"Maximize",minAddSiteBtn:"Restore",addAction:"Add Actions",crawlInfo:"Analog input search",inputAction:"Input",clickAction:"Click",sleepAction:"Wait",copyAction:"📄Copy element",submitCrawl:"☑️Complete operation",inputOutput:'Input <span title="#t2#">#t2#</span> in the element <span title="#t1#" class="element">#t1#</span>',clickOutput:'Click on element <span title="#t#" class="element">#t#</span>',dblclickOutput:'Double click <span title="#t#" class="element">#t#</span>',rclickOutput:'Right click <span title="#t#" class="element">#t#</span>',copyOutput:'Copy element <span title="#t#" class="element">#t#</span>',sleepOutput:'Sleep for <span title="#t#">#t#</span> milliseconds',inputNewValue:"Please enter a new value",deleteConfirm:"Are you sure you want to delete this item? ",sleepPrompt:"Wait time (milliseconds)",startCache:"Start cache icons of engines, do not close this page!",cacheOver:"All icons cached!",cspDisabled:"The style of SearchJumper is blocked by the CSP of current site, please try to install the Allow CSP: Content-Security-Policy extension to obtain permission",template:'Please set the value of "#t#"',recordAction:"⏺️Record operation",startRecord:"Start to record operation, press Enter to end",loopAction:"🔁Start loop",loopActionEnd:"⏹️Stop loop",loopStart:'Start loop <span title="#t#">#t#</span> times',loopEnd:"Stop loop",loopTimes:"Number of loops, all matching elements will be traversed and executed sequentially",loadingCollection:"Preparing collection for SearchJumper...",emuInputTips:"Enter search terms in specified page elements (such as input boxes)",emuClickTips:"Click on a specified page element (such as a button)",emuWaitTips:"Wait for a while before continuing, useful when an operation takes a while to complete",emuCopyTips:"Copy the text of the specified element to the clipboard",emuRecordTips:"Record the next clicks and input operations",emuLoopTips:"Start the loop, the next operation will traverse all found elements and repeat the specified number of times",emuStopTips:"End the operation and generate rules"}}}(),p.prefConfig.firstRun&&N.supportCrossSave()&&(p.prefConfig.firstRun=!1,N.setItem("searchData",p),setTimeout((()=>{N.getItem("searchData",(e=>{!1===e.prefConfig.firstRun&&b(o,{active:!0,insert:!0})}))}),100)),void 0===p.prefConfig.customSize&&(p.prefConfig.customSize=100),void 0===p.prefConfig.tilesZoom&&(p.prefConfig.tilesZoom=100),void 0===p.prefConfig.tipsZoom&&(p.prefConfig.tipsZoom=100),void 0===p.prefConfig.typeOpenTime&&(p.prefConfig.typeOpenTime=250),void 0===p.prefConfig.longPressTime&&(p.prefConfig.longPressTime=500),void 0===p.prefConfig.cacheSwitch&&(p.prefConfig.cacheSwitch=!1),void 0===p.prefConfig.noIcons&&(p.prefConfig.noIcons=!1),void 0===p.prefConfig.noAni&&(p.prefConfig.noAni=!1),void 0===p.prefConfig.quickAddRule&&(p.prefConfig.quickAddRule=!0),void 0===p.prefConfig.multiline&&(p.prefConfig.multiline=2),void 0===p.prefConfig.multilineGap&&(p.prefConfig.multilineGap=1e3),void 0===p.prefConfig.historyLength&&(p.prefConfig.historyLength=0),void 0===p.prefConfig.dragToSearch&&(p.prefConfig.dragToSearch=!0),void 0===p.prefConfig.firstFiveWordsColor&&(p.prefConfig.firstFiveWordsColor=[]),void 0===p.prefConfig.inPageWordsStyles&&(p.prefConfig.inPageWordsStyles=[]),void 0===p.prefConfig.rightMouse&&(p.prefConfig.rightMouse=!0),void 0===p.prefConfig.mouseLeaveToHide&&(p.prefConfig.mouseLeaveToHide=!0),void 0===p.prefConfig.currentTypeFirst&&(p.prefConfig.currentTypeFirst=!0),void 0===p.prefConfig.disableAddon&&(p.prefConfig.disableAddon={}),void 0===p.prefConfig.suggestType&&(p.prefConfig.suggestType="zh-CN"===h?"baidu":"google"),void 0===p.prefConfig.syncBuild&&(p.prefConfig.syncBuild=!0),p.prefConfig.minSizeMode&&(p.prefConfig.disableAutoOpen=!1,p.prefConfig.disableTypeOpen=!1),p.prefConfig.configPage?l=p.prefConfig.configPage:p.prefConfig.configPage=l}function Ot(e,t){return"*"===e||(0==e.length&&0==t.length||!(e.length>1&&"*"==e[0]&&0==t.length)&&(e.length>1&&"?"==e[0]||0!=e.length&&0!=t.length&&e[0]==t[0]?Ot(e.substring(1),t.substring(1)):e.length>0&&"*"==e[0]&&(Ot(e.substring(1),t)||Ot(e,t.substring(1)))))}if(-1!=L.indexOf("#searchJumperMin"))if(Le=!0,-1!=L.indexOf("#searchJumperMinPost"))window.history.replaceState(null,"",L.replace(/#searchJumperMin(Post)?/,""));else{if(-1!=L.indexOf("#searchJumperMinMobile"))return Object.defineProperty(Object.getPrototypeOf(navigator),"userAgent",{get:function(){return s}}),void g({method:"GET",url:location.href,headers:{referer:location.href,"User-Agent":s},onload:function(e){document.open(),document.write(e.response),document.close()},onerror:function(){},ontimeout:function(){}});window.history.replaceState(null,"",location.href.replace(/#searchJumperMin(Mobile)?/,""))}if("SearchJumper Multi"!=document.title){var Ht,Rt,Ft,Kt=!1,Ut=!1;N.getItem("postUrl",(e=>{if(e&&-1!=e[0].indexOf(location.hostname.replace(/.*\.(\w+\.\w+)/,"$1")))N.setItem("postUrl",""),ze(e[1],e[0],"_self");else{if(document.head&&W(document))qt();else{let e=()=>{document.head&&W(document)?qt():setTimeout((()=>{e()}),10)};e()}document.addEventListener("visibilitychange",Gt)}}))}async function qt(e){if(Kt)e&&e();else if(Kt=!0,function(){if(-1!=L.indexOf(st)){let e=L.match(/#jump{url=(.*)&charset=(.*)}/);e&&ze(e[2],decodeURIComponent(e[1]),"_self")}}(),await zt(),!me){if(p.prefConfig.blacklist&&p.prefConfig.blacklist.length>0){let e=!1;for(let t=0;t<p.prefConfig.blacklist.length;t++){let n=p.prefConfig.blacklist[t];if(n&&0!=n.indexOf("//"))if(e)/\*\/$/.test(n)&&(e=!1);else if(0!=n.indexOf("/*")){if(0==n.indexOf("/")){let e=n.match(/^\/(.*)\/(\w*)$/);if(e&&new RegExp(e[1],e[2]).test(L))return}else if(Ot(n,L))return}else e=!0}}q=new Me,await lt(),function(){if("mycroftproject.com"!==location.hostname)return;x("\n                 .searchJumper-loading {\n                     animation-name: changeScale;\n                     animation-duration: 2.5s;\n                     animation-iteration-count: infinite;\n                 }\n                 @keyframes changeScale {\n                     0% {\n                         -webkit-transform:rotate(0deg) scale(1);\n                         -moz-transform:rotate(0deg) scale(1);\n                         transform:rotate(0deg) scale(1);\n                     }\n                     50% {\n                         -webkit-transform:rotate(180deg) scale(1.5);\n                         -moz-transform:rotate(180deg) scale(1.5);\n                         transform:rotate(180deg) scale(1.5);\n                     }\n                     100% {\n                         -webkit-transform:rotate(360deg) scale(1);\n                         -moz-transform:rotate(360deg) scale(1);\n                         transform:rotate(360deg) scale(1);\n                     }\n                 }\n            ");let e=()=>{let e=document.querySelectorAll("img.icon~a[href^='/install']");if(e.length<=0)return;let t=!1;[].forEach.call(e,(e=>{if(e.previousElementSibling&&e.previousElementSibling.classList.contains("searchJumperIcon"))return;if(e.previousElementSibling&&e.previousElementSibling.previousElementSibling&&e.previousElementSibling.previousElementSibling.classList.contains("searchJumperIcon"))return;let n=e.href.match(/\?id=(\d+)&basename=(.+?)&/);if(null===n)return;let r=document.createElement("img");r.className="icon searchJumperIcon",r.style.cssText="border: 1px solid #4c4c4c; border-radius: 9px; box-sizing: border-box; margin-right: 4px; cursor: pointer;",r.title="Add to SearchJumper",r.src=be,e.parentNode.insertBefore(r,e),r.onclick=e=>{t||(t=!0,r.classList.add("searchJumper-loading"),Wt(`https://mycroftproject.com/installos.php/${n[1]}/${n[2]}.xml`,((e,n)=>{t=!1,r.classList.remove("searchJumper-loading"),"load"!=e&&v(n.statusText||n.error)})))}}))};e();let t=setInterval((()=>{e()}),1e3);window.addEventListener("load",(n=>{clearInterval(t),e()}))}(),Jt(),e&&e(),Ft=document.title}}function Gt(){document.head&&W(document)&&!r&&!me&&(p.prefConfig.globalSearchNow&&(clearInterval(Ht),clearInterval(Rt),document.hidden?Ft=document.title:Ft&&(document.title=Ft)),Ut||(Ut=!0,setTimeout((()=>{!function(){if(document.hidden){if(!q)return;if(q.closeShowAll(),!p.prefConfig.globalSearchNow)return;Ht=setInterval((async()=>{(se||"")!=((se=await N.getItem("globalInPageWords"))||"")&&(q.refreshPageWords(),q.navMarks.innerHTML&&(clearInterval(Ht),clearInterval(Rt),Ft=document.title,Rt=setInterval((()=>{document.title=document.title==Ft?"🚩":Ft}),500)))}),parseInt(500+500*Math.random()))}else qt((async()=>{(T||p.prefConfig.syncBuild)&&(p=await N.getItem("searchData"),q&&p.lastModified&&ve!=p.lastModified&&(q.refreshEngines(),document.dispatchEvent(new Event("dataChanged"))));let e=se||"";N.getItem("globalInPageWords",(t=>{e!=(se=t||"")&&q&&q.refreshPageWords()}));let t=ae||!1;N.getItem("navEnable",(e=>{t!=(ae=void 0===e||e)&&q&&q.refreshNav()}))}))}(),Ut=!1}),500)))}}if(p.sitesConfig=sitesConfig,p.prefConfig={position:{x:"left",y:"top"},offset:{x:"0",y:"0"},firstRun:!0,openInNewTab:!1,enableInPage:!0,altKey:!1,ctrlKey:!0,shiftKey:!1,metaKey:!1,autoClose:!1,autoDelay:1e3,shortcut:!0,initShow:!1,alwaysShow:!1,customSize:100,tilesZoom:100,tipsZoom:100,typeOpenTime:250,longPressTime:500,noIcons:!1,showSiteLists:!0,alwaysShowSiteLists:!1,cacheSwitch:!1,noAni:!1,quickAddRule:!0,multiline:2,multilineGap:1e3,historyLength:0,dragToSearch:!0,hideDragHistory:!1,sortType:!1,sortSite:!1,autoHide:!1,autoHideAll:!1,showCurrent:!0,shortcutKey:"Backquote",showInSearchEngine:!1,showInSearchJumpPage:!0,limitInPageLen:1,limitPopupLen:1,ignoreWords:["a","in","into","the","to","on","among","between","and","an","of","by","with","about","under","or","at","as"],inPageRule:{},firstFiveWordsColor:[],inPageWordsStyles:[],altToHighlight:!0,defaultPicker:!1,disableInputOnWords:!1,disableTypeOpen:!1,callBarAlt:!1,callBarCtrl:!1,callBarShift:!1,callBarMeta:!1,defaultFindTab:!1,disableAutoOpen:!1,hideOnSearchEngine:!1,minSizeMode:!1,hidePopup:!1,minPopup:0,selectToShow:e,expandType:!1,rightMouse:!0,shiftLastUsedType:!0,mouseLeaveToHide:!0,currentTypeFirst:!0,switchSitesPreKey:"ArrowLeft",switchSitesNextKey:"ArrowRight",switchSitesCtrl:!0,switchSitesAlt:!1,switchSitesShift:!0,switchSitesMeta:!1},document&&document.documentElement)h();else{let e=()=>{document&&document.documentElement?h():setTimeout((()=>{e()}),10)};e()}}();