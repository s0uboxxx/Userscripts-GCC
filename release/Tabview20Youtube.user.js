// ==UserScript==
// @name                  Tabview Youtube
// @name:en               Tabview Youtube
// @description           Make comments and lists into tabs for YouTube Videos
// @description:en        Make comments and lists into tabs for YouTube Videos
// @name:ja               Tabview Youtube
// @description:ja        YouTube動画のコメントやリストなどをタブに作成します
// @name:ko          Tabview Youtube
// @description:ko        YouTube 동영상의 댓글 및 목록을 탭으로 만듭니다
// @name:zh-TW            Tabview Youtube
// @name:zh-HK            Tabview Youtube
// @name:zh-CN            Tabview Youtube
// @description:zh-TW     把Youtube Videos中的評論及影片清單製作成Tabs
// @description:zh-HK     把Youtube Videos中的評論及影片清單製作成Tabs
// @description:zh-CN     把Youtube Videos中的评论及视频列表制作成Tabs
// @name:ru               Tabview Youtube
// @description:ru        Сделайте описание, комментарии и список видео в виде вкладок для видео на YouTube

// @name:af          Tabview Youtube
// @name:az          Tabview Youtube
// @name:id          Tabview Youtube
// @name:ms          Tabview Youtube
// @name:bs          Tabview Youtube
// @name:ca          Tabview Youtube
// @name:cs          Tabview Youtube
// @name:da          Tabview Youtube
// @name:de          Tabview Youtube
// @name:et          Tabview Youtube
// @name:es          Tabview Youtube
// @name:eu          Tabview Youtube
// @name:fr          Tabview Youtube
// @name:gl          Tabview Youtube
// @name:hr          Tabview Youtube
// @name:zu          Tabview Youtube
// @name:is          Tabview Youtube
// @name:it          Tabview Youtube
// @name:sw          Tabview Youtube
// @name:lv          Tabview Youtube
// @name:lt          Tabview Youtube
// @name:hu          Tabview Youtube
// @name:nl          Tabview Youtube
// @name:uz          Tabview Youtube
// @name:pl          Tabview Youtube
// @name:pt          Tabview Youtube
// @name:pt-BR          Tabview Youtube
// @name:ro          Tabview Youtube
// @name:sq          Tabview Youtube
// @name:sk          Tabview Youtube
// @name:sl          Tabview Youtube
// @name:sr          Tabview Youtube
// @name:fi          Tabview Youtube
// @name:sv          Tabview Youtube
// @name:vi          Tabview Youtube
// @name:tr          Tabview Youtube
// @name:be          Tabview Youtube
// @name:bg          Tabview Youtube
// @name:ky          Tabview Youtube
// @name:kk          Tabview Youtube
// @name:mk          Tabview Youtube
// @name:mn          Tabview Youtube
// @name:uk          Tabview Youtube
// @name:el          Tabview Youtube
// @name:hy          Tabview Youtube
// @name:ur          Tabview Youtube
// @name:ar          Tabview Youtube
// @name:fa          Tabview Youtube
// @name:ne          Tabview Youtube
// @name:mr          Tabview Youtube
// @name:hi          Tabview Youtube
// @name:as          Tabview Youtube
// @name:bn          Tabview Youtube
// @name:pa          Tabview Youtube
// @name:gu          Tabview Youtube
// @name:or          Tabview Youtube
// @name:ta          Tabview Youtube
// @name:te          Tabview Youtube
// @name:kn          Tabview Youtube
// @name:ml          Tabview Youtube
// @name:si          Tabview Youtube
// @name:th          Tabview Youtube
// @name:lo          Tabview Youtube
// @name:my          Tabview Youtube
// @name:ka          Tabview Youtube
// @name:am          Tabview Youtube
// @name:km          Tabview Youtube


// @description:af        Maak kommentaar en lyste as oortjies vir YouTube-video's
// @description:az        YouTube Videoları üçün şərhləri və siyahıları tablara çevirin
// @description:id        Ubah komentar dan daftar menjadi tab untuk Video YouTube
// @description:ms        Ubah komen dan senarai menjadi tab untuk Video YouTube
// @description:bs        Pretvorite komentare i liste u kartice za YouTube videozapise
// @description:ca        Converteix comentaris i llistes en pestanyes per a Vídeos de YouTube
// @description:cs        Převeďte komentáře a seznamy na karty pro YouTube videa
// @description:da        Lav kommentarer og lister til faner for YouTube-videoer
// @description:de        Machen Sie Kommentare und Listen zu Tabs für YouTube-Videos
// @description:et        Muutke kommentaarid ja loendid YouTube'i videote jaoks kaartideks
// @description:es        Convierte los comentarios y listas en pestañas para los Videos de YouTube
// @description:eu        Egin iruzkinak eta zerrendak YouTube Bideoetarako fitxetan
// @description:fr        Transformez les commentaires et les listes en onglets pour les vidéos YouTube
// @description:gl        Converte comentarios e listas en lapelas para Vídeos de YouTube
// @description:hr        Pretvorite komentare i popise u kartice za YouTube videe
// @description:zu        Yenza ukubhala phansi kanye nemingcele ukuba yiithebhu kuVidiyo ze-YouTube
// @description:is        Breyttu athugasemdum og listum í flipa fyrir YouTube myndbönd
// @description:it        Trasforma commenti e liste in schede per i Video di YouTube
// @description:sw        Geuza maoni na orodha kuwa vichupo kwa Video za YouTube
// @description:lv        Pārveidojiet komentārus un sarakstus cilnēs YouTube video
// @description:lt        Paverčia komentarus ir sąrašus skirtukais YouTube vaizdo įrašams
// @description:hu        Alakítsa át a megjegyzéseket és listákat fülekké a YouTube videókhoz
// @description:nl        Maak van reacties en lijsten tabs voor YouTube-video's
// @description:uz        YouTube videolar uchun sharhlar va ro'yxatlarni ichki oynalar qiling
// @description:pl        Przekształć komentarze i listy w karty dla filmów na YouTube
// @description:pt        Transforme comentários e listas em abas para Vídeos do YouTube
// @description:pt-BR     Transforme comentários e listas em abas para Vídeos do YouTube
// @description:ro        Transformă comentariile și listele în file pentru Videoclipuri YouTube
// @description:sq        Kthe komentet dhe listat në skeda për Videot në YouTube
// @description:sk        Premente komentáre a zoznamy na karty pre YouTube videá
// @description:sl        Pretvori komentarje in sezname v zavihke za YouTube videe
// @description:sr        Pretvorite komentare i liste u kartice za YouTube videe
// @description:fi        Muuta kommentit ja luettelot välilehdiksi YouTube-videoille
// @description:sv        Gör kommentarer och listor till flikar för YouTube-videor
// @description:vi        Chuyển đổi bình luận và danh sách thành tab cho Video YouTube
// @description:tr        Yorumları ve listeleri YouTube Videoları için sekmelere dönüştürün
// @description:be        Пераўтварыце каментарыі і спісы ў закладкі для відэа на YouTube
// @description:bg        Превърнете коментарите и списъците в раздели за видеоклипове в YouTube
// @description:ky        YouTube видеолору үчүн эскертүүлөрдү жана тизмелерди табдыктарга айлантырыңыз
// @description:kk        Пікірлер мен тізімдерді YouTube видеолары үшін қоймақтарға айналдырыңыз
// @description:mk        Претворете ги коментарите и листите во јазичиња за Видеа на YouTube
// @description:mn        YouTube видео дэх сэтгэгдлүүд болон жагсаалтыг табчууд болгоно уу
// @description:uk        Зробіть коментарі та списки у вкладки для відео на YouTube
// @description:el        Μετατρέψτε τα σχόλια και τις λίστες σε καρτέλες για τα βίντεο του YouTube
// @description:hy        Վերածեք մեկնաբանությունները և ցուցակները YouTube տեսանյութերի ներդիրների
// @description:ur        YouTube ویڈیوز کے لئے تبصرے اور فہرستوں کو ٹیب میں تبدیل کریں
// @description:ar        قم بتحويل التعليقات والقوائم إلى علامات تبويب لفيديوهات YouTube
// @description:fa        نظرات و فهرست ها را به زبانه ها برای ویدیوهای YouTube تبدیل کنید
// @description:ne        YouTube भिडियोहरूका लागि प्रतिक्रिया र सूचीहरूलाई ट्याबहरूमा परिवर्तन गर्नुहोस्
// @description:mr        YouTube व्हिडिओसाठी टिप्पण्या आणि यादीतबांमध्ये करा
// @description:hi        YouTube वीडियो के लिए टिप्पणियाँ और सूचियों को टैब में बदलें
// @description:as        YouTube ভিডিঅ'ৰ বাবে মন্তব্য আৰু তালিকাসমূহ টেবলত পৰিণত কৰক
// @description:bn        YouTube ভিডিওর জন্য মন্তব্য এবং তালিকা ট্যাবে পরিণত করুন
// @description:pa        ਯੂਟਿਊਬ ਵੀਡੀਓਜ਼ ਲਈ ਟਿੱਪਣੀਆਂ ਅਤੇ ਸੂਚੀਆਂ ਨੂੰ ਟੈਬਾਂ ਵਿੱਚ ਬਦਲੋ
// @description:gu        YouTube વિડિઓ માટે ટિપ્પણીઓ અને યાદીઓ ટૅબમાં બદલો
// @description:or        YouTube ଭିଡିଓ ପାଇଁ ମନ୍ତବ୍ୟ ଏବଂ ତାଲିକାଗୁଡ଼ିକ ଟ୍ୟାବମାନେ ପରିବର୍ତ୍ତନ କରନ୍ତୁ
// @description:ta        YouTube வீடியோக்கான கருத்துக்கள் மற்றும் பட்டியல்களை தாவல்களாக மாற்றவும்
// @description:te        YouTube వీడియోల కోసం వ్యాఖ్యలు మరియు జాబితాలను ట్యాబ్లలుగా మార్చండి
// @description:kn        YouTube ವೀಡಿಯೊಗಳಿಗಾಗಿ ಟಿಪ್ಪಣಿಗಳನ್ನು ಮತ್ತು ಪಟ್ಟಿಗಳನ್ನು ಟ್ಯಾಬ್‌ಗಳಾಗಿ ಮಾಡಿ
// @description:ml        YouTube വീഡിയോകൾക്കായി അഭിപ്രായങ്ങളും പട്ടികകളും ടാബുകളായി മാറ്റുക
// @description:si        YouTube වීඩියෝ සඳහා අදහස් සහ ලැයිස්තු ටැබ් කරන්න
// @description:th        ทำให้ความคิดเห็นและรายการเป็นแท็บสำหรับวิดีโอ YouTube
// @description:lo        ປ່ຽນຄວາມເຫັນຂອງຄົນເບິ່ງແລະລາຍການເປັນແຖບສໍາລັບວິດີໂອ YouTube
// @description:my        YouTube ဗီဒီယိုများအတွက် မှတ်ချက်များနှင့် စာရင်းများကို Tabs အဖြစ် ပြောင်းပါ
// @description:ka        გადაიყვანეთ კომენტარები და სიები ჩანართებში YouTube ვიდეოებისთვის
// @description:am        አስተያየቶችን እና ዝርዝሮችን YouTube ቪዲዮዎች ለትርጓሜዎች ውስጥ ያስተካክሉ
// @description:km        បង្កើតមតិយោបល់និងបញ្ជីទៅជាផ្ទាំងសម្រាប់វីដេអូ YouTube

// @version               4.73.31
// @resource              contentCSS        https://raw.githubusercontent.com/cyfung1031/Tabview-Youtube/7b72ca35e9a6d8fdaa5b2fe73a43b4de4730ad38/css/style_content.css
// @resource              chatCSS           https://raw.githubusercontent.com/cyfung1031/Tabview-Youtube/7b72ca35e9a6d8fdaa5b2fe73a43b4de4730ad38/css/style_chat.css
// @resource              controlCSS        https://raw.githubusercontent.com/cyfung1031/Tabview-Youtube/7b72ca35e9a6d8fdaa5b2fe73a43b4de4730ad38/css/style_control.css
// @resource              injectionJS1      https://raw.githubusercontent.com/cyfung1031/Tabview-Youtube/7b72ca35e9a6d8fdaa5b2fe73a43b4de4730ad38/js/injection_script_1.js
// @require               https://greasyfork.org/scripts/465421-vanilla-js-dialog/code/Vanilla%20JS%20Dialog.js?version=1188332

// @namespace             http://tampermonkey.net/
// @author                CY Fung
// @license               MIT
// @supportURL            https://github.com/cyfung1031/Tabview-Youtube
// @run-at                document-start
// @match                 https://www.youtube.com/*
// @exclude               /^https?://\w+\.youtube\.com\/live_chat.*$/
// @exclude               /^https?://\S+\.(txt|png|jpg|jpeg|gif|xml|svg|manifest|log|ini)[^\/]*$/
// @icon                  https://raw.githubusercontent.com/cyfung1031/Tabview-Youtube/main/images/icon128p.png

// @compatible            edge Edge [Blink] >= 79;                      Tampermonkey (Beta) / Violentmonkey
// @compatible            chrome Chrome >= 54;                          Tampermonkey (Beta) / Violentmonkey
// @compatible            firefox FireFox / Waterfox (Classic) >= 55;   Tampermonkey / Violentmonkey
// @compatible            opera Opera >= 41;                            Tampermonkey (Beta) / Violentmonkey
// @compatible            safari Safari >= 12.1

// @grant                 GM_getResourceText
// @grant                 GM.getResourceText
// @grant                 GM_registerMenuCommand
// @noframes
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/Tabview20Youtube.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/Tabview20Youtube.meta.js
// ==/UserScript==
function main(){"use strict";function t(t){return"undefined"!=typeof TTP&&"function"==typeof TTP.createHTML?TTP.createHTML(t):t}!window.TTP&&(()=>{const t="TTP";var e,n=function(t,e){return t},o="passthrough",l={createHTML:n,createScript:n,createScriptURL:n};function r(...e){e=[t+":",...e],"undefined"!=typeof debugging&&debugging&&(e=[...e,(new Error).stack.replace(/^\s*(Error|Stack trace):?\n/gi,"").replace(/^([^\n]*\n)/,"\n")]),console.log(...e)}!function(){try{void 0!==window.isSecureContext&&window.isSecureContext&&window.trustedTypes&&window.trustedTypes.createPolicy&&(trustedTypes.defaultPolicy?(r("TT Default Policy exists"),l=window.trustedTypes.createPolicy(o,l),e=trustedTypes.defaultPolicy,r("Created custom passthrough policy, in case the default policy is too restrictive: Use Policy '"+o+"' in var 'TTP':",l)):e=l=window.trustedTypes.createPolicy("default",l),r("Trusted-Type Policies: TTP:",l,"TTP_default:",e))}catch(t){r(t)}}(),window.TTP=l})();let e=null;try{document.createElement("div").innerHTML=t("1")}catch(n){e=n}if(e&&(console.log("trustHTMLErr",e),e()),"object"==typeof window){function o(){(()=>{let t="undefined"!=typeof unsafeWindow?unsafeWindow:this instanceof Window?this:window;if(!t._ytConfigHacks){let e=4;class n extends Set{add(t){if(e<=0)return console.warn("yt.config_ is already applied on the page.");"function"==typeof t&&super.add(t)}}let o=(async()=>{})().constructor,l=t._ytConfigHacks=new n,r=()=>{let e=t.ytcsi.originalYtcsi;e&&(t.ytcsi=e,r=null)},i=null,a=()=>{if(e>=1){let n=(t.yt||0).config_||(t.ytcfg||0).data_||0;if("string"==typeof n.INNERTUBE_API_KEY&&"object"==typeof n.EXPERIMENT_FLAGS)for(let t of(--e<=0&&r&&r(),i=!0,l))t(n)}},c=1,s=e=>{if(e=e||t.ytcsi)return t.ytcsi=new Proxy(e,{get:(t,e,n)=>"originalYtcsi"===e?t:(a(),i&&--c<=0&&r&&r(),t[e])}),!0};s()||Object.defineProperty(t,"ytcsi",{get(){},set:e=>(e&&(delete t.ytcsi,s(e)),!0),enumerable:!1,configurable:!0});let{addEventListener:d,removeEventListener:u}=Document.prototype;function y(e){a(),e&&t.removeEventListener("DOMContentLoaded",y,!1)}new o((t=>{if("undefined"!=typeof AbortSignal)d.call(document,"yt-page-data-fetched",t,{once:!0}),d.call(document,"yt-navigate-finish",t,{once:!0}),d.call(document,"spfdone",t,{once:!0});else{let e=()=>{t(),u.call(document,"yt-page-data-fetched",e,!1),u.call(document,"yt-navigate-finish",e,!1),u.call(document,"spfdone",e,!1)};d.call(document,"yt-page-data-fetched",e,!1),d.call(document,"yt-navigate-finish",e,!1),d.call(document,"spfdone",e,!1)}})).then(a),new o((t=>{if("undefined"!=typeof AbortSignal)d.call(document,"yt-action",t,{once:!0,capture:!0});else{let e=()=>{t(),u.call(document,"yt-action",e,!0)};d.call(document,"yt-action",e,!0)}})).then(a),o.resolve().then((()=>{"loading"!==document.readyState?y():t.addEventListener("DOMContentLoaded",y,!1)}))}})();let t=!1;window._ytConfigHacks.add((e=>{if(t)return;t=!0;const n=e.EXPERIMENT_FLAGS||0,o=e.EXPERIMENTS_FORCED_FLAGS||0;for(const t of[n,o])t&&(t.kevlar_watch_metadata_refresh_no_old_secondary_data=!1,t.live_chat_overflow_hide_chat=!1,t.web_watch_chat_hide_button_killswitch=!1,t.web_watch_theater_chat=!1,t.suppress_error_204_logging=!0,t.kevlar_watch_grid=!1,t.enable_shadydom_free_scoped_node_methods=!1,t.enable_shadydom_free_scoped_query_methods=!1,t.enable_shadydom_free_scoped_readonly_properties_batch_one=!1,t.enable_shadydom_free_parent_node=!1,t.enable_shadydom_free_children=!1,t.enable_shadydom_free_last_child=!1)}));new Promise((t=>{document.addEventListener("yt-action",t,{once:!0,capture:!0})})).then((()=>{"function"!=typeof EventTarget.prototype.addEventListener52178&&"function"==typeof EventTarget.prototype.addEventListener&&(EventTarget.prototype.addEventListener52178=EventTarget.prototype.addEventListener,EventTarget.prototype.addEventListener=function(t,e,n=void 0){if("wheel"===t&&!n&&"function"==typeof e&&void 0===this.overscrollConfigDisable)try{this.overscrollConfigDisable=!0,delete this.overscrollConfig,Object.defineProperty(this,"overscrollConfig",{get(){},set:t=>!0,configurable:!0,enumerable:!1});const t=(o=this)?o.polymerController||o.inst||o||0:o||0;t!==this&&(delete t.overscrollConfig,Object.defineProperty(t,"overscrollConfig",{get(){},set:t=>!0,configurable:!0,enumerable:!1}))}catch(t){}var o;return this.addEventListener52178(t,e,n)})}))}let l=document.createElement("button");l.setAttribute("onclick",`(${o})()`),l.click()}!function(e){let n;try{n=(async()=>{})().constructor}catch(dl){throw"Please update your browser to use Tabview Youtube."}const o=(t,e)=>{let n=null;try{n=Object.getOwnPropertyDescriptor(t,e).get}catch(t){}return"function"==typeof n?t=>n.call(t):t=>t[e]},l=o(Node.prototype,"parentNode"),r=o(Node.prototype,"firstChild"),i=o(Node.prototype,"nextSibling"),a=o(Node.prototype,"previousSibling"),c=o(Element.prototype,"nextElementSibling"),s=Document.prototype.createDocumentFragment,d=DocumentFragment.prototype.append,u=n,{requestAnimationFrame:y,cancelAnimationFrame:f}=e;let h=null;const m=()=>h||(h=new u((t=>{y((e=>{h=null,t(e)}))})));if(function(){try{return window.self!==window.top}catch(t){return!0}}())return;if(document.documentElement&&document.documentElement.hasAttribute("plugin-tabview-youtube"))return void console.warn("Multiple instances of Tabview Youtube is attached. [0x7F01]");const p=(()=>{let t=u.resolve();return e=>new u(((n,o)=>{t=t.then((async()=>{let t;try{t=await e()}catch(t){console.log("error_F1",t),o(t)}n(t)})).catch(console.warn)}))})(),b=()=>"undefined"==typeof GM&&"function"==typeof(((window||0).chrome||0).runtime||0).getURL,v='<path d="M80 27H12A12 12 90 0 0 0 39v42a12 12 90 0 0 12 12h12v20a2 2 90 0 0 3.4 2L47 93h33a12 \n  12 90 0 0 12-12V39a12 12 90 0 0-12-12zM20 47h26a2 2 90 1 1 0 4H20a2 2 90 1 1 0-4zm52 28H20a2 2 90 1 1 0-4h52a2 2 90 \n  1 1 0 4zm0-12H20a2 2 90 1 1 0-4h52a2 2 90 1 1 0 4zm36-58H40a12 12 90 0 0-12 12v6h52c9 0 16 7 16 16v42h0v4l7 7a2 2 90 \n  0 0 3-1V71h2a12 12 90 0 0 12-12V17a12 12 90 0 0-12-12z"/>'.trim(),g='<path d="M89 10c0-4-3-7-7-7H7c-4 0-7 3-7 7v70c0 4 3 7 7 7h75c4 0 7-3 7-7V10zm-62 2h13v10H27V12zm-9 \n  66H9V68h9v10zm0-56H9V12h9v10zm22 56H27V68h13v10zm-3-25V36c0-2 2-3 4-2l12 8c2 1 2 4 0 5l-12 8c-2 1-4 0-4-2zm25 \n  25H49V68h13v10zm0-56H49V12h13v10zm18 56h-9V68h9v10zm0-56h-9V12h9v10z"/>'.trim(),w='<path d="M30 0C13.3 0 0 13.3 0 30s13.3 30 30 30 30-13.3 30-30S46.7 0 30 0zm6.2 46.6c-1.5.5-2.6 \n  1-3.6 1.3a10.9 10.9 0 0 1-3.3.5c-1.7 0-3.3-.5-4.3-1.4a4.68 4.68 0 0 1-1.6-3.6c0-.4.2-1 .2-1.5a20.9 20.9 90 0 1 \n  .3-2l2-6.8c.1-.7.3-1.3.4-1.9a8.2 8.2 90 0 0 .3-1.6c0-.8-.3-1.4-.7-1.8s-1-.5-2-.5a4.53 4.53 0 0 0-1.6.3c-.5.2-1 \n  .2-1.3.4l.6-2.1c1.2-.5 2.4-1 3.5-1.3s2.3-.6 3.3-.6c1.9 0 3.3.6 4.3 1.3s1.5 2.1 1.5 3.5c0 .3 0 .9-.1 1.6a10.4 10.4 \n  90 0 1-.4 2.2l-1.9 6.7c-.2.5-.2 1.1-.4 1.8s-.2 1.3-.2 1.6c0 .9.2 1.6.6 1.9s1.1.5 2.1.5a6.1 6.1 90 0 0 1.5-.3 9 9 90 \n  0 0 1.4-.4l-.6 2.2zm-3.8-35.2a1 1 0 010 8.6 1 1 0 010-8.6z"/>'.trim(),x='<path d="M0 3h12v2H0zm0 4h12v2H0zm0 4h8v2H0zm16 0V7h-2v4h-4v2h4v4h2v-4h4v-2z"/>'.trim();Math.floor(982451653*Math.random()+982451653).toString(36),Date.now().toString(36);const E=16,S=32,A=64,T=128,L=256,k=512,_=function(){};let C=!1,q=0,D=0;const M=Date.now()-152e6;let $=0,P=!1,N=null,F=null,I=null,H=null,R=null,O=null,B=null,j=!1,z=10,V="",W=null,Y=null;const G={},U="#tab-videos",X={defaultTab:U},K="userscript-tabview-settings",J="my-default-tab";let Z=0,Q=0,tt=null,et=!1,nt={base:null,new:null,fetched:!1,count:null},ot="en";const lt={en:{info:"Info",videos:"Videos",playlist:"Playlist"},jp:{info:"情報",videos:"動画",playlist:"再生リスト"},tw:{info:"資訊",videos:"影片",playlist:"播放清單"},cn:{info:"资讯",videos:"视频",playlist:"播放列表"},du:{info:"Info",videos:"Videos",playlist:"Playlist"},fr:{info:"Info",videos:"Vidéos",playlist:"Playlist"},kr:{info:"정보",videos:"동영상",playlist:"재생목록"},ru:{info:"Описание",videos:"Видео",playlist:"Плейлист"}},rt=()=>{let t=new Date("2023-01-01T00:00:00Z");return 1===t.getDate()?`+${t.getHours()}`:"-"+(24-t.getHours())};function it(t){const{hrs:e,mins:n,seconds:o}=t;let l=[];return l.push("Length:"),e>0&&l.push(`${e} ${1===e?"hour":"hours"}`),n>0&&l.push(`${n} ${1===n?"minute":"minutes"}`),null!==o&&l.push(`${o} ${1===o?"second":"seconds"}`),l.join(" ")}function at(t){const{hrs:e,mins:n,seconds:o}=t;let l=[];return l.push("長さ："),e>0&&l.push(`${e}時間`),n>0&&l.push(`${n}分`),null!==o&&l.push(`${o}秒`),l.join("")}function ct(t,e){const{bd1:n,bd2:o,durationInfo:l,formatDates:r}=e;switch(t){case 512:return[`The livestream was in ${n.lokStringDateEN()} from ${n.lokStringTime()} to ${o.lokStringTime()}. [GMT${rt()}]`,it(l)].join("\n");case 528:return[`The livestream was from ${n.lokStringDateEN()} ${n.lokStringTime()} to ${o.lokStringDateEN()} ${o.lokStringTime()}. [GMT${rt()}]`,it(l)].join("\n");case 768:return`The livestream started at ${n.lokStringTime()} [GMT${rt()}] in ${n.lokStringDateEN()}.`;case 1536:return`The video was uploaded in ${r.uploadDate} and published in ${r.publishDate}.`;case 1552:return`The video was uploaded in ${r.uploadDate}.`;case 1792:return`The video was published in ${r.publishDate}.`}return""}function st(t,e){const{bd1:n,bd2:o,durationInfo:l,formatDates:r}=e;switch(t){case 512:return[`ライブ配信は${n.lokStringDateJP()}の${n.lokStringTime()}から開始し、${o.lokStringTime()}まで続きました。[GMT${rt()}]`,at(l)].join("\n");case 528:return[`ライブ配信は${n.lokStringDateJP()}の${n.lokStringTime()}から${o.lokStringDateJP()}の${o.lokStringTime()}まで行われました。[GMT${rt()}]`,at(l)].join("\n");case 768:return`ライブ配信は${n.lokStringDateJP()}の${n.lokStringTime()}から開始しました。[GMT${rt()}]`;case 1536:return`この動画は${r.uploadDate}にアップロードされ、${r.publishDate}に公開されました。`;case 1552:return`この動画は${r.uploadDate}にアップロードされました。`;case 1792:return`この動画は${r.publishDate}に公開されました。`}return""}let dt=[],ut={},yt=0,ft=!1,ht=!1,mt=0,pt=!1,bt=!1,vt=203,gt=0,wt=new WeakMap;const xt={get ytdFlexy(){return Ot(Y)},get storeLastPanel(){return Ot(O)}},Et=new Proxy(console,{get(t,e,n){return"log"===e?_:Reflect.get(...arguments)}});const St="function"==typeof IntersectionObserver,At=!!St&&{capture:!1,passive:!0},Tt=!St||{capture:!0,passive:!0},Lt=HTMLElement.prototype.__shady_native_querySelector||HTMLElement.prototype.querySelector,kt=HTMLElement.prototype.__shady_native_querySelectorAll||HTMLElement.prototype.querySelectorAll,_t=HTMLElement.prototype.closest,Ct=function(t,e){return t instanceof HTMLElement&&Lt.call(t,e)||null},qt=function(t,e){return t instanceof HTMLElement&&_t.call(t,e)||null},{elementAppend:Dt,_setAttribute:Mt,_insertBefore:$t}=(()=>{let t=HTMLElement.prototype.appendChild;try{t=ShadyDOM.nativeMethods.appendChild||t}catch(t){}let e=Element.prototype.setAttribute;try{e=ShadyDOM.nativeMethods.setAttribute||e}catch(t){}let n=Node.prototype.insertBefore;try{n=ShadyDOM.nativeMethods.insertBefore||n}catch(t){}return{elementAppend:t,_setAttribute:e,_insertBefore:n}})(),Pt=()=>{let t=document.getElementById("d-m");t||(t=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.id="d-m",$t.call(document.documentElement,t,document.documentElement.firstChild));const e=t;e._setAttribute=Mt;let n,o=0;for(;e.hasAttribute(n=`dm-${Math.floor(314159265359*Math.random()+314159265359).toString(36)}`););const l=n;let r=null;return new MutationObserver((()=>{null!==r&&(o>8&&(o=0),r(),r=null)})).observe(document,{childList:!0,subtree:!0,attributes:!0}),t=>(r||e._setAttribute(l,++o),r=t)},Nt=Pt();let Ft=null;const It=()=>Ft||(Ft=new u(Nt).then((()=>{Ft=null}))),Ht=function(t,e,n){return(t&(e|n))===e},Rt="function"==typeof WeakRef?t=>t?new WeakRef(t):null:t=>t||null,Ot=t=>t&&t.deref?t.deref():t;class Bt{constructor(){this.q=0}set(t){this.q=t}valueOf(){return this.q}inc(){return++this.q>1e9&&(this.q=9),this.q}}const jt=()=>new Bt,zt=jt();zt.auto=!1;const Vt=((t,e)=>{const n=(n,o)=>{t=n,e=o};return class extends u{constructor(o=n){super(o),o===n&&(this.resolve=t,this.reject=e)}}})(),Wt=new Vt;let Yt={allowChatControl:!0};class Gt{constructor(){this.reset()}debounce(t,e){let n=t;if(e){const o=!1===e.auto?e.valueOf():e.inc();n=()=>o===e.valueOf()?t():0}return this.promise.then().then(n).catch(console.warn)}d(){return this.promise.then().catch(console.warn)}reset(){this.resolved=!1,this.promise=new Vt}resolve(){return!1===this.resolved&&(this.resolved=!0,this.promise.resolve(...arguments),!0)}}class Ut{constructor(){this.p=u.resolve()}lockWith(t){this.p=this.p.then((()=>new u(t).catch(console.warn)))}}const Xt=Symbol(),Kt=(t,e)=>{if(t.constructor!==e){const n=e[Xt]||(e[Xt]=Object.keys(Object.getOwnPropertyDescriptors(e.prototype)));for(const o of n)t[o]=e.prototype[o]}};class Jt extends MutationObserver{constructor(t){super(((t,e)=>{for(const e of t)"attributes"===e.type&&this.checker(e.target,e.attributeName)})),this.flist=t,this.res={},Kt(this,Jt)}takeRecords(){super.takeRecords()}disconnect(){this._target=null,super.disconnect()}observe(t){if(this._target)return;this._target=Rt(t);const e={attributes:!0,attributeFilter:Object.keys(this.flist),attributeOldValue:!0};super.observe(t,e)}checker(t,e){let n=t.getAttribute(e);if(this.res[e]!==n){this.res[e]=n;let t=this.flist[e];t&&t(e,n)}}check(t=0){setTimeout((()=>{let t=Ot(this._target);if(null!==t)for(const e of Object.keys(this.flist))this.checker(t,e);else console.log("target is null");t=null}),t)}}class Zt extends Date{constructor(...t){super(...t),this.dayBack=!1}browserSupported(){}lokStringDateEN(){const t=this;let e=t.getFullYear(),n=t.getMonth()+1,o=t.getDate();return`${e<1e3?`0000${e}`.slice(-4):""+e}.${n<10?"0"+n:""+n}.${o<10?"0"+o:""+o}`}lokStringDateJP(){const t=this;let e=t.getFullYear(),n=t.getMonth()+1,o=t.getDate();return`${e<1e3?`0000${e}`.slice(-4):""+e}/${n<10?"0"+n:""+n}/${o<10?"0"+o:""+o}`}lokStringTime(){let t=this.getHours(),e=this.getMinutes();return this.dayBack&&(t+=24),`${t<10?"0"+t:""+t}:${e<10?"0"+e:""+e}`}}if(console.assert("browserSupported"in new Zt,{error:"0x87FF",errorMsg:"Your userscript manager is not supported. FireMonkey is not recommended."}),!("browserSupported"in new Zt))return;let Qt=null;try{const ul=[{id:"tabview-css-content",path:"css/style_content.css"},{id:"tabview-css-chat",path:"css/style_chat.css"},{id:"tabview-css-control",path:"css/style_control.css"}];for(const yl of ul)yl.url=chrome.runtime.getURL(yl.path)||"";Qt=ul}catch(fl){}if(Qt){const hl=document.head||document.documentElement;for(const{path:ml,url:pl,id:bl}of Qt)if(pl&&"string"==typeof pl&&pl.length>4){const vl=document.createElement("link");vl.id=bl,vl.rel="stylesheet",vl.type="text/css",vl.href=pl,hl.appendChild(vl)}Qt=null}function te(){document.querySelector("ytd-watch-flexy[is-two-columns_][theater] ytd-live-chat-frame#chat:not([collapsed])")&&un()}function ee(){if(Yt.ytlstmTheaterMode&&(document.fullscreenElement||document.querySelector("ytd-watch-flexy[fullscreen]")))return Yt.allowChatControl=!0,void(Yt.ytlstmTheaterMode=!1);Yt.allowChatControl?document.body.hasAttribute("data-ytlstm-theater-mode")&&(Yt.allowChatControl=!1,Yt.ytlstmTheaterMode=!0):document.body.hasAttribute("data-ytlstm-theater-mode")||(Yt.allowChatControl=!0,Yt.ytlstmTheaterMode=!1)}!function(){function t(t,e,n,o){return new u((l=>{t||(t=document.createElement("link")),t.rel=e,o&&t.setAttribute("as",o),t.onload=function(){l({link:this,success:!0}),this.remove()},t.onerror=function(){l({link:this,success:!1}),this.remove()},t.href=n,(document.head||document.documentElement).appendChild(t),t=null}))}new u((t=>{if(document.documentElement)t();else{let e=new MutationObserver((()=>{null!==e&&document.documentElement&&(e.takeRecords(),e.disconnect(),e=null,t())}));e.observe(document,{childList:!0,subtree:!1})}})).then((()=>{const e=["https://i.ytimg.com","https://www.youtube.com","https://rr2---sn-5n5ip-ioqd.googlevideo.com","https://googlevideo.com","https://accounts.youtube.com","https://jnn-pa.googleapis.com","https://googleapis.com","https://fonts.gstatic.com","https://www.gstatic.com","https://yt3.ggpht.com","https://yt4.ggpht.com"];for(const n of e)t(null,"preconnect",n)}))}();const ne=new Gt;ne.resolve();const oe=function(t){!C&&ne.resolved||ne.debounce(t,zt)};let le=new Ut,re=new Ut;const ie=new Gt;let ae=0,ce=jt();ce.auto=!1;const se=new Gt;const de=function(t,e,n){let o={script_id:t,inject:function(){let t=this,e=this.script_id;document.querySelector(`script#${e}`)||(t.runtime_url?(function(t){const e=document.createElement("script");e.type="text/javascript",e.src=t;try{document.documentElement.appendChild(e)}catch(t){console.log("addScriptByURL Error",t)}return e}(t.runtime_url)).id=e:(function(t){const e=document.createElement("script");e.type="text/javascript",e.textContent=t;try{document.documentElement.appendChild(e)}catch(t){console.log("addScript Error",t)}return e}(`${t.injection_script}`)).id=e)}};return o.script_id=t,b()?o.runtime_url=window.chrome.runtime.getURL(e):o.injection_script=GM_getResourceText(n),o}("userscript-tabview-injection-1","js/injection_script_1.js","injectionJS1");let ue=!1;se.debounce((()=>{ue=!0}));const ye=new Map;async function fe(t,e,...n){if(!ue){const t=(ye.get(e)||0)+1;ye.set(e,t),await se.d();if(t!==ye.get(e))return}t.dispatchEvent(new CustomEvent("tabview-page-script",{detail:{id:e,args:n.length?n:null}}))}function he(t){const e=new Array(t),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length;for(let l=0;l<t;l++){let t=null;do{t=n.charAt(Math.floor(Math.random()*o))}while(0===l&&10-t>0);e[l]=t}return e.join("")}const me=new Map;class pe{constructor(t){let e=null;const n=pe.uidStore;do{e=he(5)}while(n[e]);n[e]=!0,this.uid=e,this.observerCreator=t,this.observer=null,this.bindCount=0,Kt(this,pe)}bindElement(t,...e){return!t.hasAttribute(`o3r-${this.uid}`)&&(t.setAttribute(`o3r-${this.uid}`,""),this.bindCount++,null===this.observer&&(this.observer=this.observerCreator()),this.observer.observe(t,...e),!0)}clear(t){if(null!==this.observer){!0===t&&(this.observer.takeRecords(),this.observer.disconnect()),this.observer=null,this.bindCount=0;for(const t of document.querySelectorAll(`[o3r-${this.uid}]`))t.removeAttribute(`o3r-${this.uid}`)}}}pe.uidStore={};const be=new pe((()=>new IntersectionObserver($o,{root:null,rootMargin:"0px"}))),ve=new pe((()=>new MutationObserver(Fo))),ge=new pe((()=>new MutationObserver(Io))),we=new pe((()=>new MutationObserver(Mn.mtf_attrEngagementPanel))),xe=new pe((()=>new Jt({hidden:Mn.mtf_attrPlaylist}))),Ee=xe.uid,Se=new pe((()=>new Jt({hidden:Mn.mtf_attrComments}))),Ae=Se.uid,Te=new pe((()=>new Jt({collapsed:Mn.mtf_attrChatroom})));function Le(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}async function ke(){if("watch"!==F)return;const t=xt.ytdFlexy;t&&"#tab-comments"===t.getAttribute("tyt-tab")&&fe(document,"tabview-resize-comments-rows")}function _e(t,e){return new u((n=>{t&&"function"==typeof t.requestPictureInPicture&&"function"==typeof document.exitPictureInPicture?!function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>t.HAVE_CURRENT_DATA}(t)||null!==document.pictureInPictureElement?n(!1):t.requestPictureInPicture().then((t=>{n(!0)})).catch((t=>{void 0===e?console.warn(t):"function"==typeof e&&e(t),n(!1)})):n(null)}))}function Ce(){null!==document.pictureInPictureElement&&"function"==typeof document.exitPictureInPicture&&document.exitPictureInPicture().then((t=>{})).catch(console.warn)}function qe(){if(I&&"string"==typeof I.txt_expand&&"string"==typeof I.txt_collapse){let t=document.querySelector("ytd-live-chat-frame#chat");if(!t)return;let e=Lt.call(t,'span.yt-core-attributed-string[role="text"]'),n=(e||0).textContent;"string"==typeof n&&n.length>2&&(t.hasAttribute("collapsed")?n!==I.txt_expand&&(e.textContent=I.txt_expand):n!==I.txt_collapse&&(e.textContent=I.txt_collapse))}else if(I&&"string"==typeof I.txt_expand){let t=document.querySelector("ytd-live-chat-frame#chat");if(!t)return;let e=Lt.call(t,'span.yt-core-attributed-string[role="text"]'),n=(e||0).textContent;"string"==typeof n&&n.length>2&&t.hasAttribute("collapsed")&&n!==I.txt_expand&&(e.textContent=I.txt_expand)}}function De(){se.debounce((()=>{!async function(){let t=document.querySelector("#secondary.ytd-watch-flexy");if(t){if(t.classList.contains("tabview-hover-slider-enable"))t.dispatchEvent(new CustomEvent("tabview-hover-slider-restore"));else{let e=Lt.call(t,"#secondary-inner.ytd-watch-flexy");if(e){t.classList.contains("tabview-hover-slider")||e.style.setProperty("--tabview-slider-right",`${Ne()}px`);let n=await async function(){let t=document.documentElement.clientHeight,e=(document.querySelector("#right-tabs")||0).clientHeight;if(await u.resolve(0),t>300&&e>300)return e/t;return 0}();if(n>0&&n<=1){e.style.setProperty("--ytd-watch-flexy-sidebar-width-d",Math.round(100*n*10)/10+"vw"),t.classList.add("tabview-hover-slider"),t.classList.add("tabview-hover-slider-enable"),_e(document.querySelector("#player video"))}}}ke()}}()}))}let Me=null;function $e(t,e){if(!t||!e)return;let n=`o4r-${function(t){let e=me.get(t);if(!e){const n=pe.uidStore;do{e=he(5)}while(n[e]);me.set(t,e)}return e}("tabview-hover-slider-restore")}`;if(t.hasAttribute(n))return;t.setAttribute(n,"");let o=document.querySelector("tabview-view-secondary-xpander");o||(o=document.createElement("tabview-view-secondary-xpander"),gn(o,t));let l=document.querySelector("tabview-view-columns-endpos");l&&l.remove(),l=document.createElement("tabview-view-columns-endpos");let r=new IntersectionObserver((t=>{let e=null,n=j;for(const n of t){if(null===n.rootBounds)continue;let t=n.boundingClientRect,o=n.rootBounds;e=!n.isIntersecting&&t.left>o.right&&o.left<=0}let o=document.querySelector("#columns.style-scope.ytd-watch-flexy");o&&o.classList.toggle("tyt-column-overflow",e),n!==e&&null!==e&&(j=e)}));Dt.call(e,l),2&~Ve.layoutStatus||r.observe(l),Me=r,t.addEventListener("tabview-hover-slider-restore",(function(t){let e=t.target;if(!e.classList.contains("tabview-hover-slider-enable"))return;let n=Lt.call(e,"#secondary-inner.ytd-watch-flexy");if(n){if(e.classList.contains("tabview-hover-slider-hover"))u.resolve(0).then((()=>{n.style.removeProperty("--ytd-watch-flexy-sidebar-width-d")})).then((()=>{e.classList.remove("tabview-hover-slider-enable"),Ce()}));else{let e=t.target;e.classList.remove("tabview-hover-slider"),e.classList.remove("tabview-hover-slider-enable"),n.style.removeProperty("--ytd-watch-flexy-sidebar-width-d"),n.style.removeProperty("--tabview-slider-right"),Ce()}It().then((()=>{Ie()}))}}),!1)}function Pe(e){if(!e)return null;let n=e.id;if(!n||"string"!=typeof n)return null;if(Lt.call(e,`#${n} > tabview-view-tab-expander`))return!1;let o=document.createElement("tabview-view-tab-expander");return gn(o,e),o.innerHTML=t(`<div>${We(16,16,12,12,'<svg stroke="currentColor" fill="none"><path d="M8 2h2v2M7 5l3-3m-6 8H2V8m0 2l3-3"/></svg>',"svg-expand")}${We(16,16,12,12,'<svg stroke="currentColor" fill="none"><path d="M7 3v2h2M7 5l3-3M5 9V7H3m-1 3l3-3"/></svg>',"svg-collapse")}</div>`),o.addEventListener("click",De,!1),!0}function Ne(){let t=document.querySelector("#secondary.style-scope.ytd-watch-flexy + tabview-view-columns-endpos"),e=document.querySelector("#secondary.style-scope.ytd-watch-flexy > tabview-view-secondary-xpander");if(t&&e){return t.getBoundingClientRect().x-e.getBoundingClientRect().right}return null}const Fe=t=>{let e=document.querySelector("#secondary.style-scope.ytd-watch-flexy + tabview-view-columns-endpos"),n=document.querySelector("#secondary.style-scope.ytd-watch-flexy > tabview-view-secondary-xpander");if(e&&n){let e=function(){let t=document.documentElement.getBoundingClientRect().width,e=document.querySelector("#secondary.style-scope.ytd-watch-flexy + tabview-view-columns-endpos");if(e)return e.getBoundingClientRect().x-t;return null}(),o=1;o=e>=125||e>=75?1:e>=25?.25:0,t.style.setProperty("--tabview-slider-offset-k2",`${o}`),t.style.setProperty("--tabview-slider-offset",`${e}px`);let l=n.getBoundingClientRect().width;t.style.setProperty("--tabview-slider-ow",`${l}px`);let r="var(--ytd-watch-flexy-sidebar-width-d)",i="var(--tabview-slider-ow)",a=`${e}px`;t.style.setProperty("--tabview-slider-offset-actual",`calc(${r} - ${i} + ${a})`)}};function Ie(){let t=document.querySelector("ytd-watch-flexy[flexy][is-two-columns_] #secondary-inner.ytd-watch-flexy");if(!t)return;let e=l(t);if(!e)return;if(e.classList.contains("tabview-hover-slider-enable"))return;let n=document.documentElement.clientWidth;re.lockWith((e=>{let o=document.documentElement.clientWidth;n===o&&t.matches("body ytd-watch-flexy[flexy][is-two-columns_] #secondary-inner.ytd-watch-flexy")?async function(t){await It();let e=l(t);if(!e)return;if(e.classList.contains("tabview-hover-slider-enable"))return;if(!e.matches("#columns.ytd-watch-flexy #primary.ytd-watch-flexy ~ #secondary.ytd-watch-flexy"))return;const n=!0===j,o=!0===e.classList.contains("tabview-hover-slider-hover");(n||o)&&(await u.resolve(0),e.classList.add("tabview-hover-final"),o&&!n?(t.style.removeProperty("--tabview-slider-right"),t.style.removeProperty("--tabview-slider-offset")):(o||t.style.setProperty("--tabview-slider-right",`${Ne()}px`),Fe(t)),n^o&&(e.classList.toggle("tabview-hover-slider",n),e.classList.toggle("tabview-hover-slider-hover",n)),await u.resolve(0),setTimeout((()=>{e.classList.remove("tabview-hover-final")}),350))}(t).then(e):e()}))}const He=(()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","defs");let e=0;try{t.scrollIntoView({get behavior(){e++},get block(){e++}})}catch(t){}return 2===e})(),Re=He?()=>{const t=document.querySelector("ytd-app[scrolling]");if(!(t&&Ke()&&Ze()&&(Je()||function(){const t=xt.ytdFlexy;return t&&"#"===(t.getAttribute("tyt-tab")||"").charAt(0)}()||Qe()||tn())))return;const e=document.querySelector("#right-tabs"),n=e.getBoundingClientRect().top-t.getBoundingClientRect().top;if(e&&n>0){const t=e.closest("#secondary-inner");t&&t.getBoundingClientRect().height<document.documentElement.clientHeight&&document.documentElement.clientHeight>80&&(async(t,e)=>{const n=t=>`${t.height}|${t.width}|${t.left}|${t.top}`;let o=0;for(;o++<4;){const o=n(t.getBoundingClientRect()),l=new u((t=>{document.addEventListener("scroll",t,{capture:!0,passive:!0,once:!0})}));if(t.scrollIntoView(e),await l,await new u((e=>{let n=new IntersectionObserver((()=>{e(),n.disconnect(),n=null}));n.observe(t)})),o===n(t.getBoundingClientRect()))break}})(t,{behavior:"instant",block:"end",inline:"nearest"})}}:null;function Oe(t){if(Xe()&&Ze())return;const e=document.querySelector(`a[tyt-tab-content="${H}"]:not(.tab-btn-hidden)`)||document.querySelector(`a[tyt-tab-content="${t||X.defaultTab}"]:not(.tab-btn-hidden)`)||document.querySelector(`a[tyt-tab-content="${U}"]:not(.tab-btn-hidden)`)||document.querySelector("a[tyt-tab-content]:not(.tab-btn-hidden)")||null;return Bo(e),!!e}let Be=!1;function je(t,e){2&e||async function(){if(bt)return;bt=!0,await u.resolve(0);const[t,e,n]=await u.all([u.resolve().then((()=>document.querySelector("#right-tabs header"))),u.resolve().then((()=>document.querySelector("#right-tabs tabview-view-pos-thead"))),u.resolve().then((()=>document.querySelector("#masthead-container, #masthead")))]);let o=0;new IntersectionObserver((t=>{let e=null,n=null,l=null;for(const o of t)o.boundingClientRect&&o.rootBounds&&(!o.isIntersecting&&o.boundingClientRect.y<=o.rootBounds.top&&o.boundingClientRect.y<o.rootBounds.bottom?(e=2,n=o.boundingClientRect,l=o.rootBounds):o.isIntersecting&&o.boundingClientRect.y>=o.rootBounds.top&&o.boundingClientRect.y<o.rootBounds.bottom&&(e=1,n=o.boundingClientRect,l=o.rootBounds));let r=Ve.layoutStatus;null!==e&&(2===e&&!0===ft||1===e&&!1===ft||Jo(e,n.width,{left:n.left,right:l.width-n.right}));let i=Date.now();o=i,setTimeout((()=>{o===i&&r!==Ve.layoutStatus&&Ko()}),300)}),{rootMargin:"0px 0px 0px 0px",threshold:[0]}).observe(e)}();const n=xt.ytdFlexy;if(!n)return;let o=!!(e&L),l=!!(e&A),r=!!(8&e),i=!!(e&T),a=!!(e&k);function c(){le.lockWith((t=>{"#chatroom"==R.lastPanel?(l&&Bo(null),o||dn()):R.lastPanel&&0==R.lastPanel.indexOf("#engagement-panel-")?(l&&Bo(null),i||function(t){"string"==typeof t&&(t=t.replace("#engagement-panel-",""),t=parseInt(t));if(!(t>=0))return!1;let e=on(),n=[];for(const{ePanel:o,k:l,visible:r}of e.list)(t&l)===l?r||n.push({panelId:o.getAttribute("target-id"),toShow:!0}):r&&n.push({panelId:o.getAttribute("target-id"),toHide:!0});if(n.length>0){const t=n;se.debounce((()=>{document.dispatchEvent(new CustomEvent("tyt-engagement-panel-visibility-change",{detail:t}))}))}n=null}(R.lastPanel)):"#donation-shelf"==R.lastPanel?(l&&Bo(null),a||function(){if(!tn()){let t=document.querySelector("#tyt-donation-shelf-toggle-btn");if(t)return t.click(),!0}}()):(o&&un(),l||Oe()),It().then(t)}))}const s=!!(960&e),d=!s;let y=1&t?t^e:0,f=!!(y&S),h=!!(4&y),m=!!(2&y),b=!!(8&y),v=!!(y&T),g=!!(y&k),w=960&y,x=w,E=!!(e&w),_=!!(~e&w);const C=l+o+i+a>1;let q=null,D=()=>null===q?q=n.classList.contains("tyt-chat-popup"):q;!!(y&L)&&o&&async function(){const t=document.getElementById("chatframe");if(!(t instanceof HTMLIFrameElement))return;if((ho.get(t)||0)%2==1)return;if(await p((()=>{})),(ho.get(t)||0)%2==1)return;let e;try{e=t.contentDocument.location}catch(t){}e&&e.href.includes("youtube.com")&&await p((async()=>{(ho.get(t)||0)%2!=1&&(await uo.then(),!0===t.isConnected&&t.matches("body iframe.style-scope.ytd-live-chat-frame#chatframe")&&await mo(t))}))}();const M=()=>{!C||2&~e||le.lockWith((t=>{if(l&&null===R.lastPanel)o&&un(),i&&rn(),a&&an();else if(R.lastPanel){let t=R.lastPanel||"";"string"!=typeof t&&(t=""),o&&"#chatroom"!==t&&un(),i&&t.indexOf("#engagement-panel-")<0&&rn(),a&&"#donation-shelf"!==t&&an(),Bo(null)}It().then(t)}))};let $=u.resolve();if(r?(x==L&&82==(114&e)&&s&&!m&&Bo(null),x&L&&o&&He&&$.then((async()=>{await It(),document.querySelector("ytd-app[scrolling]")&&document.querySelector("ytd-live-chat-frame#chat")&&Je()&&Re()})),x&T&&i&&$.then((async()=>{if(await It(),!document.querySelector("ytd-app[scrolling]"))return;let t=document.querySelector('ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility][visibility="ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"]:not([hidden])');if(t){let e=50,n=setInterval((()=>{--e?t.scrollIntoView(!0):clearInterval(n)}),17)}}))):b?(!r&&d&&Ze()&&!Xe()?c():!r&&s&&Ze()&&Xe()&&(D()||sn()),!r&&s&&Ze()&&u.resolve().then(M)):146!=(246&e)||m||x!=L&&x!=T?530!=(630&e)||m||x!=L&&x!=k?!x&&m&&2==(6&e)&&C?c():x==L&&82==(118&e)&&s&&!m?Bo(null):!E||6&~e||!s||6&y?6&~e||!s?_&&2==(6&e)&&d&&!m?x==T||x==k||x==L?(R.lastPanel=null,r||c()):r||cn():!x&&6&y&&2==(6&e)&&d?c():2==(974&e)&&le.lockWith((t=>{Oe(),It().then(t)})):D()||le.lockWith((t=>{l&&Bo(null),o&&un(),i&&rn(),a&&an(),It().then(t)})):sn():g?le.lockWith((t=>{un(),It().then(t)})):f&&le.lockWith((t=>{an(),Pt().then(t)})):v?le.lockWith((t=>{un(),It().then(t)})):f&&le.lockWith((t=>{rn(),It().then(t)})),h){let t=Date.now();mt=t,setTimeout((()=>{mt===t&&Ie()}),130)}let P=null;if((P=document.querySelector(".tabview-hover-slider-enable"))&&se.debounce((()=>{P.isConnected&&P.dispatchEvent(new CustomEvent("tabview-hover-slider-restore"))})),b&&(pt=!0,It().then(Jn)),m&&u.resolve(0).then((()=>{if(M(),jn(),null!==Me)if(2&~e)Me.disconnect();else{let t=document.querySelector("tabview-view-columns-endpos");null!==t&&Me.observe(t)}It().then((()=>{Ko(!0)}))})),!0===Be){Ht(e,6,0)&&o&&D()||(Be=!1,fe(document,"tyt-close-popup"))}}function ze(t){return!(t&S)&&t&E?t|L:-257&t}const Ve=new Proxy({layoutStatus:void 0},{get:function(t,e){return t[e]},set:function(t,e,n){if("layoutStatus"==e){if(0===n)return t[e]=n,!0;if(t[e]===n)return!0;if(!t.layoutStatus_pending){t.layoutStatus_pending=!0;const o=t[e];return t[e]=n,le.lockWith((n=>{t.layoutStatus_pending=!1;let l=t[e];o!==l?(je(o,l),It().then(n)):n()})),!0}}return t[e]=n,!0},has:function(t,e){return e in t}}),We=(t,e,n,o,l,r)=>`<svg${r?` class=${r}`:""} width="${t}" height="${e}" viewBox="0 0 ${n} ${o}" preserveAspectRatio="xMidYMid meet">${l}</svg>`;function Ye(t,e,n){t&&(!0===n?t.setAttribute(e,""):!1===n?t.removeAttribute(e):null===n||"string"==typeof n&&t.setAttribute(e,n))}function Ge(t,e){let n=!1;"#tab-comments"===t.getAttribute("tyt-tab-content")?(et=!e,2&~Z&&(n=!0)):n=!0,n&&(e?t.classList.remove("tab-btn-hidden"):t.classList.add("tab-btn-hidden"))}function Ue(t){let e=t.classList.contains("active");Ge(t,!1),e&&Oe()}function Xe(){const t=xt.ytdFlexy;return t&&t.hasAttribute("theater")}function Ke(){const t=xt.ytdFlexy;return t&&t.hasAttribute("fullscreen")}function Je(){const t=xt.ytdFlexy;return t&&"+"===(t.getAttribute("tyt-chat")||"").charAt(0)}function Ze(){const t=xt.ytdFlexy;return t&&t.hasAttribute("is-two-columns_")}function Qe(){const t=xt.ytdFlexy;return t&&+t.getAttribute("tyt-ep-visible")>0}function tn(){const t=xt.ytdFlexy;return t&&t.hasAttribute("tyt-donation-shelf")}const en=new Map;let nn=1;function on(){let t=[],e=0;for(const n of document.querySelectorAll("ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility]:not([hidden])")){let o=n.getAttribute("target-id");if("string"!=typeof o)continue;let l=en.get(o);l||(en.set(o,l=nn),nn===1<<62?(nn=1,console.warn("engagementId reached 1 << 62")):nn<<=1);let r=l;if("ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"===n.getAttribute("visibility"))e|=r,t.push({ePanel:n,k:r,visible:!0});else t.push({ePanel:n,k:r,visible:!1})}return{list:t,value:e}}function ln(t){let e=t.getAttribute("target-id");se.debounce((()=>{document.dispatchEvent(new CustomEvent("tyt-engagement-panel-visibility-change",{detail:{panelId:e,toHide:!0}}))}))}function rn(){if(Qe())for(const t of document.querySelectorAll("ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility]:not([hidden])"))"ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"==t.getAttribute("visibility")&&ln(t)}function an(){if(tn()){let t=document.querySelector("#tyt-donation-shelf-toggle-btn");if(t)return t.click(),!0}return!1}function cn(){if(!Xe()){const t=document.querySelector("ytd-watch-flexy #ytd-player button.ytp-size-button");t&&t.click()}}function sn(){if(Xe()){const t=document.querySelector("ytd-watch-flexy #ytd-player button.ytp-size-button");t&&t.click()}}function dn(){let t=document.querySelector("ytd-live-chat-frame#chat[collapsed] > .ytd-live-chat-frame#show-hide-button");t&&(t=Lt.call(t,"div.yt-spec-touch-feedback-shape")||Lt.call(t,"ytd-toggle-button-renderer"),t&&t.click())}function un(){let t=document.querySelector("ytd-live-chat-frame#chat:not([collapsed]) > .ytd-live-chat-frame#show-hide-button");t&&(t=Lt.call(t,"div.yt-spec-touch-feedback-shape")||Lt.call(t,"ytd-toggle-button-renderer"),t&&t.click())}async function yn(){let t=document.querySelector("ytd-watch-flexy #tab-videos [placeholder-videos]");if(!t)return null;await u.resolve(0);let e=document.querySelector("tabview-view-videos-endpos");e&&e.remove(),e=document.createElement("tabview-view-videos-endpos"),vn(e,t),await u.resolve(0),W?(W.disconnect(),W.observe(e)):(W=new IntersectionObserver((t=>{if(!(2&~Ve.layoutStatus))return;if(1!==t.length)return;if(!0!==t[0].isIntersecting)return;let e=(t[0]||0).target||0;e&&(e=null,t=null,new u((t=>{document.querySelector("#related.style-scope.ytd-watch-flexy ytd-watch-next-secondary-results-renderer.style-scope.ytd-watch-flexy ytd-compact-video-renderer.yt-search-generated.style-scope.ytd-item-section-renderer ~ ytd-continuation-item-renderer.style-scope.ytd-item-section-renderer[hidden]")||!!document.querySelector('ytd-watch-next-secondary-results-renderer.style-scope.ytd-watch-flexy yt-chip-cloud-renderer.style-scope.yt-related-chip-cloud-renderer yt-chip-cloud-chip-renderer.style-scope.yt-chip-cloud-renderer[aria-selected="false"] ~ [aria-selected="true"]')||It().then(t)})).then((()=>{let t=function(t,e){let n="[placeholder-videos] ytd-watch-next-secondary-results-renderer.style-scope.ytd-watch-flexy",o="[placeholder-videos] tp-yt-paper-spinner#spinner.style-scope.ytd-continuation-item-renderer",l="[placeholder-videos] div#button.style-scope.ytd-continuation-item-renderer",r={};1&t&&(r.m1=document.querySelector(n),r.m1&&Ye(r.m1,"is-two-columns",!!e&&""));2&t&&(r.m2=document.querySelector(o),r.m2&&Ye(r.m2,"hidden",!e&&""));4&t&&(r.m3=document.querySelector(l),r.m3&&Ye(r.m3,"hidden",!!e&&""));return r}(6,!0);if(t.m2&&t.m3){const e=_t.call(t.m2,"ytd-continuation-item-renderer");if(e){const t=Lt.call(e,"ytd-button-renderer.style-scope.ytd-continuation-item-renderer, yt-button-renderer.style-scope.ytd-continuation-item-renderer"),n=Ct(t,"button.yt-spec-button-shape-next--call-to-action");n?n.click():t?t.click():e.dispatchEvent(new Event("yt-service-request-sent-button-renderer"))}}t=null})))}),{rootMargin:"0px",threshold:[0]}),W.observe(e))}function fn(){se.debounce((()=>{if(!C)return;let t=document.querySelector("*:not(#tab-videos) > #related.ytd-watch-flexy > ytd-watch-next-secondary-results-renderer");if(!!t){let e=_t.call(t,"#related.ytd-watch-flexy"),n=document.querySelector("#right-tabs"),o=Ct(n,"#tab-videos");if(null!==o){let t=document.querySelector("ytd-watch-flexy:not([is-two-columns_]) #primary-inner.ytd-watch-flexy, ytd-watch-flexy[is-two-columns_] #secondary-inner.ytd-watch-flexy");t&&Dt.call(t,n),Dt.call(o,e),e.setAttribute("placeholder-for-youtube-play-next-queue",""),e.setAttribute("placeholder-videos",""),yn()}}if(ee(),!Yt.allowChatControl)return;let e=null;if(e=document.querySelector("ytd-live-chat-frame#chat")){const t="chat-container"===e.parentNode.id?e.parentNode:e;let n=document.querySelector('tabview-view-pholder[data-positioner="before|#chat"]');if(!n||n.nextElementSibling!==t){if(n&&n.remove(),document.querySelector(".YouTubeLiveFilledUpView"));else{let e=document.querySelector("#right-tabs");if(e&&e.previousSibling!==t){const n=e.parentNode;let o=!0;if(n===t.parentNode&&n instanceof HTMLElement&&"function"==typeof s&&"function"==typeof d){const l=[],r=[];let i=0;for(let o=n.firstChild;o instanceof Node;o=o.nextSibling)if(o===e)i|=1;else if(o===t)i|=2;else{if(o instanceof HTMLIFrameElement||o instanceof Element&&o.querySelector("iframe")){i|=4;break}1&i?r.push(o):l.push(o)}if(3===i&&l.length+r.length<8e3){if(l.length>0){const t=s.call(document);d.call(t,...l),n.insertBefore(t,n.firstChild)}const t=s.call(document);d.call(t,e,...r),n.appendChild(t),o=!1}}o&&bn(t,e)}}n||(n=document.createElement("tabview-view-pholder"),n.setAttribute("data-positioner","before|#chat")),bn(n,t)}}}))}async function hn(){await async function(){return null!==document.fullscreenElement}()||(gt++,gt>=88e6&&gt%88e6==0&&(gt=0),(gt+vt)%11==0&&(vt>208&&(vt=200,gt=gt%8+1),document.head.dataset.viTime=`${vt+1}`,await u.resolve(0),vt=+document.head.dataset.viTime||0))}function mn(){if(document.querySelector("autocomplete-holder"))return;let t,e;t=this,this.removeEventListener("tyt-autocomplete-sc-exist",mn,!1);let n=this.getAttribute("data-autocomplete-results-id");if(e=document.querySelector(`[data-autocomplete-input-id="${n}"]`),!n||!t)return;let o=a(t);o&&"tabview-view-autocomplete-pos"===o.nodeName.toLowerCase()||(o=function(){let t=document.createElement("tabview-view-autocomplete-pos"),e=document.querySelector("tabview-view-autocomplete-pos");return e&&e.remove(),t}(),bn(o,t)),gn(e,o),async function(t,e){let n=t.offsetHeight+"px";e.style.setProperty("--tyt-swwv-searchbox-h",n),pn()}(t,o)}function pn(){const t=xt.ytdFlexy;if(!C||!t)return;const e=Lt.call(t,"[placeholder-for-youtube-play-next-queue] #suggestions-search-container tabview-view-autocomplete-pos > .autocomplete-suggestions[data-autocomplete-input-id]:not([position-fixed-by-tabview-youtube])");if(e){const n=document.querySelector("[placeholder-for-youtube-play-next-queue] input#suggestions-search");if(n){const o=Rt(e);function r(t,e){t.style.display=e?"block":"none"}function i(t,e){return(t.value||"").length>0&&(e.textContent||"").length>0}if(l(e).setAttribute("position-fixed-by-tabview-youtube",""),e.setAttribute("position-fixed-by-tabview-youtube",""),e.setAttribute("userscript-scrollbar-render",""),!n.hasAttribute("is-set-click-to-toggle")){n.setAttribute("is-set-click-to-toggle",""),n.addEventListener("click",(function(){u.resolve(0).then((()=>{const t=Ot(o);if(!t)return;if(i(this,t)){r(t,!Le(t))}}))}),At);let a=null,c=0;n.addEventListener("keydown",(function(t){switch(t.code){case"ArrowUp":case"ArrowDown":let t=Date.now();0===c&&(m().then((()=>{if(c=0,Date.now()-t>300)return;const e=Ot(o);if(!e)return;let n=Lt.call(e,".autocomplete-suggestion.selected"),l=n&&n!==a;if(a=n,l)try{n.scrollIntoView({block:"nearest",inline:"nearest"})}catch(t){}})),c=1)}}),At),n.addEventListener("tyt-autocomplete-suggestions-change",(function(t){t.target===document.activeElement&&It().then((()=>{const t=document.querySelector(`.autocomplete-suggestions[data-autocomplete-input-id="${this.getAttribute("data-autocomplete-results-id")}"]`);if(!t)return;i(this,t)&&r(t,!0)}))}),At)}}}}const bn=HTMLElement.prototype.before?(t,e)=>e&&t?(HTMLElement.prototype.before.call(e,t),!0):null:(t,e)=>{if(!e||!t)return null;try{return HTMLElement.prototype.insertBefore.call(l(e),t,e),!0}catch(t){console.log("element insert failed in old browser CE")}return!1},vn=HTMLElement.prototype.after?(t,e)=>e&&t?(HTMLElement.prototype.after.call(e,t),!0):null:(t,e)=>{if(!e||!t)return null;try{return HTMLElement.prototype.insertBefore.call(l(e),t,i(e)),!0}catch(t){console.log("element insert failed in old browser CE")}return!1},gn=HTMLElement.prototype.prepend?(t,e)=>e&&t?(HTMLElement.prototype.prepend.call(e,t),!0):null:(t,e)=>{if(!e||!t)return null;try{return HTMLElement.prototype.insertBefore.call(e,t,r(e)),!0}catch(t){console.log("element insert failed in old browser CE")}return!1};HTMLElement.prototype.append;function wn(t){if(null===t&&!(t=document.querySelector("ytd-watch-flexy[playlist] *:not(#tabview-playlist-wrapper) > ytd-playlist-panel-renderer.style-scope.ytd-watch-flexy#playlist:not(.ytd-miniplayer)")))return;const e=xt.ytdFlexy;if(!C||!e)return;if(null!==Lt.call(t,"*:not(#tabview-playlist-wrapper) > ytd-playlist-panel-renderer#playlist:not(.ytd-miniplayer) #items.ytd-playlist-panel-renderer:not(:empty)")&&"YTD-PLAYLIST-PANEL-RENDERER"===t.nodeName.toUpperCase()){let e=document.querySelector("#tab-list");if(!e)return;let n=function(t){let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t),e}("tabview-playlist-wrapper"),o=new DocumentFragment;o.appendChild(n),Dt.call(n,t),Dt.call(e,o),o=null,n=null}}function xn(t){return`${N||0}...${t.textContent}`}const En=[function(){let t=Ot(this.elm);if(!t)return;let e=document.querySelector("span#tyt-cm-count");if(e){let t=_t.call(e,'.tab-btn[tyt-tab-content="#tab-comments"]');t&&t.setAttribute("loaded-comment","normal"),fe(document,"tyt-update-cm-count")}return _o(1),V=xn(t),!0},function(){let t=Ot(this.elm);if(!t)return;let e=document.querySelector("span#tyt-cm-count");if(e){let t=_t.call(e,'.tab-btn[tyt-tab-content="#tab-comments"]');t&&t.setAttribute("loaded-comment","message"),e.textContent="​"}return _o(1),V=xn(t),!0}];let Sn=null;function An(t){const e=xt.ytdFlexy;if(!C||!e)return;if("watch"!==F)return;const n=document.querySelector("ytd-comments#comments");if(!n)return;const o=kt.call(n,"#count.ytd-comments-header-renderer, ytd-item-section-renderer.ytd-comments#sections #header ~ #contents > ytd-message-renderer.ytd-item-section-renderer"),l=+(Date.now()-M+"00");let r=new Array(o.length);r.newFound=!1;let i=0,a=-1,c=D;D=l;for(const t of o){let e=0;if("count"===t.id?e=1:(t.textContent||"").trim()&&(e=2),e>0){let n=c-(wt.get(t)||0),o=n>4||n<-4;o?(wt.set(t,l+1),r.newFound=!0,a=i):wt.set(t,l),r[i]={elm:Rt(t),isNew:o,isLatest:!1,f:En[e-1]},i++}}if(r.length>i&&(r.length=i),a>=0){r[a].isLatest=!0;let t=Ot(r[a].elm);t&&(Sn=t.textContent)}else if(1===r.length){let t=Ot(r[0].elm);if(t){let e=t.textContent;e!==Sn&&(wt.set(t,l+1),r.newFound=!0,r[0].isNew=!0,a=0,r[a].isLatest=!0),Sn=e}}return t&&Cn(r),r}function Tn(){if(2===$)return;const e=xt.ytdFlexy;if(!e)return;if((e.getAttribute("tyt-comments")||"").indexOf("K")>=0)return;if(!Lt.call(e,"ytd-comments#comments:not([hidden])"))return;e.setAttribute("tyt-comments","Kz");const n=document.querySelector('[tyt-tab-content="#tab-comments"]');let o=Lt.call(n,"span#tyt-cm-count");n.removeAttribute("loaded-comment"),o.innerHTML=t(""),n&&Ge(n,!0)}function Ln(){ie.resolved&&0===G.comments_section_loaded&&nt.new&&!nt.fetched&&(nt.new.f(),nt.fetched=!0,ko())}function kn(t){let e=!1;t&&2!==$&&document.querySelector("ytd-comments#comments:not([hidden])")&&(_o(0),Ln(),e=!0),_n(e)}function _n(t){2!==$&&(document.querySelector("ytd-comments#comments").hasAttribute("hidden")?qo():0===G.comments_section_loaded&&(!t&&3&~q||Xn()))}const Cn=t=>{if(!t)return;if(nt.count=t.length,nt.new)return;if(t.newFound){if(1===t.length)return nt.new=t[0],!0;if(t.length>1)for(const e of t)if(!0===e.isLatest&&e.isNew)return nt.new=e,!0}else if(1===t.length)return nt.base=t[0],!1},qn=()=>{let t=document.querySelector(`ytd-comments#comments:not([o3r-${Ae}])`);if(!t)return;const e=xt.ytdFlexy;C&&e&&Se.bindElement(t)&&Se.observer.check(9)},Dn=()=>{fe(document,"tabview-fix-live-chat-toggle-btn")},Mn={mtf_attrPlaylist:(t,e)=>{if(!C)return;if("watch"!==F)return;if(!xt.ytdFlexy)return;let n=document.querySelector("#tab-list ytd-playlist-panel-renderer#playlist"),o=n&&!n.hasAttribute("hidden");const l=document.querySelector('[tyt-tab-content="#tab-list"]');if(l){let t=l.classList.contains("tab-btn-hidden");t&&o?l.classList.remove("tab-btn-hidden"):t||o||Ue(l)}},mtf_attrComments:(t,e)=>{if(ie.resolved&&An(!0),"watch"!==F)return;let n=document.querySelector("ytd-comments#comments");const o=document.querySelector('[tyt-tab-content="#tab-comments"]');if(!n||!o)return;let l=n.hasAttribute("hidden");const r=xt.ytdFlexy;C&&r&&(2===$||(l?l&&(r.setAttribute("tyt-comments","Kh"),"watch"===F&&1===G.comments_section_loaded&&Co()):(r.setAttribute("tyt-comments","Kv"),nt.fetched||Co(),Ge(o,!0))))},mtf_attrChatroom:()=>{const t=xt.ytdFlexy;C&&t&&"watch"===F&&(qe(),le.lockWith((t=>{const e=document.querySelector("ytd-live-chat-frame#chat"),n=xt.ytdFlexy;if(!e||!n)return void t();if("watch"!==F)return void t();let o="",l=!!e.hasAttribute("collapsed"),r=n.getAttribute("tyt-chat");if(null!==r){r.charCodeAt(0)<46&&(o=r.substring(1))}if(l&&(o=`-${o}`),l||(o=`+${o}`),Ye(n,"tyt-chat",o),"string"!=typeof o||l||(R.lastPanel="#chatroom"),l||null===document.querySelector("#right-tabs .tab-btn.active")||!Ze()||Xe()?t():(Bo(null),It().then(t)),l){e.classList.remove("tyt-chat-frame-ready");let t=document.querySelector("tyt-iframe-popup-btn");t&&t.remove()}else{const t=Lt.call(e,"body iframe.style-scope.ytd-live-chat-frame#chatframe");t&&u.resolve(t).then(po)}Dn()})))},mtf_attrEngagementPanel:(t,e)=>{const n=xt.ytdFlexy;if(!C||!n)return;let o=null;if(9!==t)return void(document.querySelector('ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility="ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"]:not([hidden])')||(we.clear(!0),O=null,Ye(n,"tyt-ep-visible",!1)));o=e;let l=on().value,r=+n.getAttribute("tyt-ep-visible")||0;0!==l&&r!==l&&(n.setAttribute("tyt-ep-visible",l),R.lastPanel=`#engagement-panel-${l}`,O=Rt(o),oe((()=>{xt.storeLastPanel===o&&le.lockWith((t=>{xt.storeLastPanel===o&&function(){const t=Ve.layoutStatus;if(2==(6&t)){if(t&A)return Bo(null),!0;if(t&L)return un(),!0}return!1}()?It().then(t):t()}))})))}};function $n(){R={lastTab:null,lastPanel:null,last:null},C=!1,Y=null,Ve.layoutStatus=0,xe.clear(!0),Se.clear(!0),Te.clear(!0),ve.clear(!0),ge.clear(!0),B=null}function Pn(t){if(!(t instanceof HTMLElement))return null;let e=t.textContent;if(0===e.trim().length)return null;let n=t.nodeName,o=t.id;return o&&(n+="#"+o),n+"\n"+e}async function Nn(){let t=document.querySelector("#primary.ytd-watch-flexy #above-the-fold.ytd-watch-metadata"),e=document.querySelector("#tab-info ytd-expander > #content");if(t&&e){const n=new Set;for(let t=c(e);t instanceof HTMLElement;t=c(t)){let e=Pn(t);null!==e&&n.add(e)}for(let e=c(t);e instanceof HTMLElement;e=c(e)){let t=Pn(e);null!==t&&n.has(t)?e.classList.add("tyt-hidden-duplicated-meta"):e.classList.remove("tyt-hidden-duplicated-meta")}n.clear()}}const Fn=new WeakMap,In=()=>1===document.querySelectorAll("[tyt-info-expander-placeholder]").length&&1===document.querySelectorAll("[tyt-info-expander-content]").length;let Hn=new Vt;async function Rn(){if(!document.querySelector("#tab-info"))return;const t=document.querySelectorAll("[tyt-info-expander-placeholder]");if(1===t.length){const e=t[0],n=Fn.get(e);if(!n)return;for(const t of document.querySelectorAll("[tyt-info-expander-content]"))n!==t&&t.remove();!1===n.isConnected&&document.querySelector("#tab-info").appendChild(n),In()&&Hn.resolve()}}function On(t){return lt[ot][t]||lt.en[t]||""}function Bn(){let t="en";switch(((document||0).documentElement||0).lang||""){case"en":case"en-GB":default:t="en";break;case"de":case"de-DE":t="du";break;case"fr":case"fr-CA":case"fr-FR":t="fr";break;case"zh-Hant":case"zh-Hant-HK":case"zh-Hant-TW":t="tw";break;case"zh-Hans":case"zh-Hans-CN":t="cn";break;case"ja":case"ja-JP":t="jp";break;case"ko":case"ko-KR":t="kr";break;case"ru":case"ru-RU":t="ru"}return t}function jn(){const t=xt.ytdFlexy;if(!C||!t)return;const e=document.documentElement;e.setAttribute("sxmq8","1"===e.getAttribute("sxmq8")?"0":"1"),console.log("sxmq8 r1",document.documentElement.getAttribute("sxmq8"));let n=Lt.call(t,"#primary.ytd-watch-flexy ytd-watch-metadata ~ ytd-comments#comments");if(n){let t=document.querySelector("#tab-comments");t&&Dt.call(t,n)}wn(null),fn(),pn()}function zn(t,e){if(!e)return;const n=(ut[t]||0)+1;ut[t]=n;const o=dt[n-1]||(dt[n-1]=Symbol());document.addEventListener(t,(function(t){t[o]||(t[o]=!0,u.resolve().then((()=>{e(t)})))}),Tt)}function Vn(){let t=document.querySelector("#below h1.ytd-watch-metadata yt-formatted-string");if(t){let e="";try{if(nl&&Object.keys(nl).length>0){function n(t,e){let n=e-t,o=Math.floor(n/36e5);n-=36e5*o;let l=Math.round(n/6e4),r=null;return l<10&&0===o&&(l=Math.floor(n/6e4),n-=6e4*l,r=Math.round(n/1e3),0===r&&(r=null)),{hrs:o,mins:l,seconds:r}}const o="jp"===Bn()?st:ct;if(nl.broadcastBeginAt&&!1===nl.isLiveNow){let l=new Zt(nl.broadcastBeginAt),r=nl.broadcastEndAt?new Zt(nl.broadcastEndAt):null,i=0;r&&l.toLocaleDateString()===r.toLocaleDateString()?i=1:r&&+r>+l&&r-l<864e5&&l.getHours()>=6&&r.getHours()<6&&(i=2);let a=n(l,r);i>0?(r.dayBack=2===i,e=o(512,{bd1:l,bd2:r,isSameDay:i,durationInfo:a,formatDates:nl})):r&&0===i&&(e=o(528,{bd1:l,bd2:r,isSameDay:i,durationInfo:a,formatDates:nl}))}else if(nl.broadcastBeginAt&&!0===nl.isLiveNow){e=o(768,{bd1:new Zt(nl.broadcastBeginAt),formatDates:nl})}else nl.uploadDate?e=nl.publishDate&&nl.publishDate!==nl.uploadDate?o(1536,{formatDates:nl}):o(1552,{formatDates:nl}):!nl.uploadDate&&nl.publishDate&&(e=o(1792,{formatDates:nl}))}}catch(c){e=""}e?t.setAttribute("data-title-details",e):t.removeAttribute("data-title-details")}}const Wn=jt();function Yn(){let t=document.querySelector(`#tab-list ytd-playlist-panel-renderer#playlist:not([o3r-${Ee}])`);const e=xt.ytdFlexy;if(C&&e){if(t){xe.bindElement(t)&&xe.observer.check(9);let e=Rt(t);se.debounce((()=>{let t=Ot(e);e=null,t&&!0===t.isConnected&&fe(t,"tabview-yt-data-reassign"),t=null}),Wn),t=null}}else;Mn.mtf_attrPlaylist(),u.resolve(0).then((()=>{const t=xt.ytdFlexy;C&&t&&(H||0!==(t.getAttribute("tyt-tab")+"").indexOf("#tab-")||"/watch"!==location.pathname||(/[\?\&]list=[\w\-\_]+/.test(location.search)?Oe("#tab-list")&&(H="#tab-list"):/[\?\&]lc=[\w\-\_]+/.test(location.search)&&Oe("#tab-comments")&&(H="#tab-comments")))})),u.resolve(0).then((()=>{!function(){let t=document.querySelector("#tab-list ytd-playlist-panel-renderer#playlist");if(t&&t.matches("[collapsed], [collapsible]")){const e=t;t=null;const n=_t.call(e,"ytd-watch-flexy #tab-list");if(!n||1!==n.nodeType)return;e.hasAttribute("collapsed")&&Ye(e,"collapsed",!1),e.hasAttribute("collapsible")&&Ye(e,"collapsible",!1)}}()}))}const Gn=function(){zt.inc(),nt={base:null,new:null,fetched:!1,count:null},N=null,I=null},Un=function(){const t=document.documentElement;if(t.setAttribute("sxmq8","1"===t.getAttribute("sxmq8")?"0":"1"),t.removeAttribute("pnzgu"),console.log("sxmq8 r2",document.documentElement.getAttribute("sxmq8")),no=0,ce.inc(),ie.reset(),se.resolved||2&~z){if(2===ae){ae=0;let t=document.querySelector("tabview-view-ploader");t&&t.remove()}}else z-=2,de.inject();ne.resolved&&(q=1,ne.reset(),8&z||(An(!1),Gn()))};function Xn(){q=0;let t=0;function e(){if(!ie.resolved)return;if(0!==G.comments_section_loaded)return;if(nt.fetched)return;let e=An(!0);if(!nt.new||nt.fetched){if(t++,nt.base&&!nt.new&&!nt.fetched&&1===nt.count){let e=Ot(nt.base.elm),n=e?xn(e):null;(t>7||n===V)&&nt.base.f()&&(nt.fetched=!0,ko())}if(!nt.fetched){if(t>7){let t=1===e.length?Ot(e[0].elm):null,n=t?xn(t):null;return void(t&&n!==V&&(nt.base=null,nt.new=e[0],nt.new.f(),nt.fetched=!0,ko()))}return!0}}else nt.new.f()&&(nt.fetched=!0,ko())}let n=ce.valueOf();ie.debounce((()=>{n===ce.valueOf()&&(32&Qo||(Qo|=32,async function(t){for(let n=9;--n>0&&ce.valueOf()===t&&!0===e();)await new u((t=>setTimeout(t,420)))}(n)))}))}const{removeDuplicateInfoFn:Kn,setHiddenStateForDesc:Jn}=(()=>{let t=0;function e(){let t=xt.ytdFlexy;if(!t)return;let e,n=!document.fullscreenElement&&t.classList.contains("tabview-info-duplicated");e=document.querySelector(".tabview-info-duplicated-checked[flexy] ytd-text-inline-expander#description-inline-expander.ytd-watch-metadata #plain-snippet-text"),e&&Ye(e,"hidden",n),e=document.querySelector(".tabview-info-duplicated-checked[flexy] ytd-text-inline-expander#description-inline-expander.ytd-watch-metadata #formatted-snippet-text"),e&&Ye(e,"hidden",n)}function n(){const t=xt.ytdFlexy;if(!t)return;let n=!1,o=!1;t.matches(".tabview-info-duplicated[flexy]")&&(n=!!Lt.call(t,"#description.style-scope.ytd-watch-metadata > #description-inner:only-child"),o=!!Lt.call(t,"#tab-info ytd-expander #description.ytd-video-secondary-info-renderer")),e(),t.setAttribute("tyt-has",`${n?"A":"a"}${o?"B":"b"}`)}async function o(t,e,n){const o=t,l=e;if(o.hasAttribute("tyt-du744")||l.hasAttribute("tyt-du744"))return!0;if(!o||!l)return!1;if(o.hasAttribute("hidden")||l.hasAttribute("hidden"))return!1;const a="object"==typeof crypto&&"function"==typeof crypto.randomUUID?`${crypto.randomUUID()}`:"",c="function"==typeof String.prototype.replaceAll,s=a&&c;let d=s&&sessionStorage.getItem("js-yt-usernames")||"";{const t=document.querySelectorAll("#owner a.yt-simple-endpoint[href]");let e=null,n=null;for(const o of t){let t;null===n&&null===o.firstElementChild&&(o.textContent||"").length>0&&(n=o.textContent),null===e&&(t=/\/(\@[-_a-zA-Z0-9.]{3,30})(\/|$)/.exec(o.getAttribute("href")))&&(e=t[1])}null!==e&&null!==n&&d.indexOf(`\n${e}\t`)<0&&`${d}\n`.indexOf(`\t${n}\n`)<0&&(d=`\n${e}\t${n}\n${d}`.trim())}const y=[];let f;if(d){do{f=crypto.randomUUID()}while(d.includes(f));let t=0;const e=new Map;for(const n of d.split("\n")){if(n.length<4)continue;const o=n.split("\t"),l=o[1].replaceAll(" ","");let r=e.get(l);r||(r=++t,e.set(l,r)),y.push([o[0],r]),y.push([l,r])}e.clear(),y.length>1&&y.sort(((t,e)=>e[0].length-t[0].length))}const h=s&&f&&y.length>0?t=>{if("string"==typeof t){t=t.replaceAll(" ","");for(const e of y){const n=`[[${f}::${e[1]}]]`;t=t.replaceAll(e[0],n)}}return t}:t=>t,m=new Map,p=(t,e)=>{t instanceof HTMLElement&&(t=>{for(const e of kt.call(t,"[hidden]")){const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);let n;for(;n=t.nextNode();){const t=n.nodeValue;t&&!t.startsWith("")&&(m.set(n,t),n.nodeValue=`${t.replace(/[\uF204\uF205]/g,"")}`)}}})(t);let n=t.textContent.trim(),o=n.length>0;if(o&&n.includes("")&&(n=n.replace(/\uF204[^\uF204\uF205]+\uF205/g,""),n=n.replace(/[\uF204\uF205]/g,""),o=n.length>0),o){n=n.replace(/\n[\n\x20]+\n/g,"\n\n"),n=n.replace(/[\u0020\u00A0\u16A0\u180E\u2000-\u200A\u202F\u205F\u3000]/g," "),n=n.replace(/[\u200b\uFEFF]/g,"");let t=64;for(;t-- >0;){const e=n;n=n.replace(/([\u1000-\uDF77])\x20([\x21-\x7E])/g,"$1$2"),n=n.replace(/([\x21-\x7E])\x20([\u1000-\uDF77])/g,"$1$2"),e===n&&(t=0)}n=h(n),n=n.replace(/[,，.。、]/g," "),n=n.replace(/[#＃]/g,"#"),n=n.replace(/[*＊]/g,"*"),n=n.replace(/[「」『』”’＜＞"'<>\[\]\{\}]/g,'"'),n=n.replace(/[:：]/g,":"),n=n.replace(/\s+/g," "),n=n.trim(),n&&e.push(n)}},b=t=>{if(t.nodeType===Node.ELEMENT_NODE){if("STYLE"===t.nodeName)return!1;if("button"===t.getAttribute("role"))return!1;if(t.hasAttribute("hidden"))return!1;if("snippet"===t.id){let e=!0;for(let n=r(t);n;n=i(n))if(!1!==b(n)&&0!==n.textContent.trim().length){e=!1;break}if(e)return!1}}else if(t.nodeType!==Node.TEXT_NODE)return!1;return!0},v=async(t,e=[])=>{try{await u.resolve();for(let n=r(t);n;n=i(n))!1!==b(n)&&(n instanceof HTMLElement&&n.firstElementChild&&!n.nodeName.includes("-")?await v(n,e):p(n,e),await u.resolve())}catch(t){console.log(t)}return e};m.clear();const[g,w]=await u.all([v(o),v(l)]);if(m.forEach(((t,e)=>{(e.nodeValue||"")===`${t.replace(/[\uF204\uF205]/g,"")}`&&(e.nodeValue=t)})),m.clear(),"undefined"==typeof GM&&(console.log(7191,g),console.log(7192,w),g.length===w.length)){let t=g.length;const e=[];for(let n=0;n<t;n++){let t=g[n],o=w[n],l=t.split(/([\w\-]+)/),r=o.split(/([\w\-]+)/),i=Math.min(l.length,r.length),a=-1;for(let t=0;t<i&&l[t]===r[t];t++)a=t;a>=0&&(t=l.slice(a+1).join(""),o=r.slice(a+1).join("")),e.push([t,o])}console.log(7194,e)}const x=function(t,e){const n=new Set(e),o=t.every((t=>n.has(t)));return n.clear(),o}(g,w);return x&&async function(t,e){t&&e&&(t.setAttribute("tyt-du744",""),e.setAttribute("tyt-du744",""))}(o,l),x}async function l(){const e=xt.ytdFlexy;if(!e)return;const n=[...document.querySelectorAll("ytd-text-inline-expander#description-inline-expander:not([hidden])")].filter((t=>!_t.call(t,"[hidden]")));if(1!==n.length)return;const l=n[0];let r=Date.now();t=r,e.classList.toggle("tabview-info-duplicated",!0);let i=!1;try{if(await It(),t!==r)return;let e=!1,n=null;await u.all([...kt.call(l,'#expand[role="button"]:not([hidden])')].map((t=>u.resolve().then((()=>{n=n||new u((t=>{let e=new MutationObserver((()=>{e.disconnect(),e=null,t()}));e.observe(l,{subtree:!0,childList:!0})})),t.click(),e=!0}))))),n&&await n.then(),"undefined"!=typeof IntersectionObserver&&await new u((t=>{let e=new IntersectionObserver((()=>{e.disconnect(),e=null,t()}));e.observe(l)})),await u.resolve(0),i=await async function(t){const e=t||document.querySelector("ytd-text-inline-expander#description-inline-expander"),n=document.querySelector("#tab-info ytd-expander #description");return!(!e||!n)&&await o(e,n.closest("ytd-expander")||n)}(l),!1===i&&e&&await u.all([...kt.call(l,'#collapse[role="button"]:not([hidden])')].map((t=>u.resolve().then((()=>{t.click()})))))}catch(t){e.classList.toggle("tabview-info-duplicated",!1)}return console.debug("[tyt] Have any details with duplicated information been found?",i?"Yes":"No"),t===r?{ok:1,infoDuplicated:i}:void 0}return{removeDuplicateInfoFn:t=>{let e=ce.valueOf();ie.debounce((()=>{if(e===ce.valueOf()&&!document.fullscreenElement){if(!t){if(1&Qo)return;Qo|=1}!async function(t){let e=null;const o='#collapse[role="button"]:not([hidden]), #expand[role="button"]:not([hidden])',r=qt(document.querySelector("ytd-watch-metadata ytd-text-inline-expander#description-inline-expander"),"ytd-watch-metadata"),i=Ct(r,"ytd-text-inline-expander#description-inline-expander.style-scope.ytd-watch-metadata"),a=Ct(i,o);a&&(r.hasAttribute("description-collapsed")&&"expand"===a.id?e=!1:r.hasAttribute("description-collapsed")||"collapse"!==a.id||(e=!0)),r&&r.classList.add("tyt-tmp-hide-metainfo");try{for(let e=2;e-- >0&&(await m().then(),ce.valueOf()===t);){const t=await l();if(t&&t.ok){const o=t.infoDuplicated;if(o||0===e){const t=xt.ytdFlexy;t&&(t.classList.toggle("tabview-info-duplicated",o),t.classList.toggle("tabview-info-duplicated-checked",!0),n(),fe(document,"tabview-fix-info-box-tooltip"));break}}await new u((t=>setTimeout(t,270)))}await u.resolve(0);const a="boolean"==typeof e?Ct(i,o):null;if(a){const t=r.hasAttribute("description-collapsed"),n=a.id;(e?t&&"expand"===n:!t&&"collapse"===n)&&a.click()}}catch(t){console.warn(t)}if(r){r.classList.remove("tyt-tmp-hide-metainfo"),await u.resolve(0);const t=Lt.call(r,"#info-container.style-scope.ytd-watch-metadata")||Lt.call(r,"#ytd-watch-info-text.style-scope.ytd-watch-metadata")||null;t&&u.resolve(t).then((t=>{t&&be.bindElement(t)}))}}(e)}}))},setHiddenStateForDesc:e}})();let Zn=0;async function Qn(t){Zn=0,await se.d(),Nn(),Hn=new Vt,In()?Hn.resolve():await Hn.then(),await Rn(),Kn(t),Zn=1}function to(t){const e=t||document.querySelector("ytd-live-chat-frame#chat");e&&(!function(t){if(!(t instanceof Element))return;const e=xt.ytdFlexy;C&&e&&Te.bindElement(t)&&Te.observer.check(9)}(e),I&&(qe(),null!==t?m().then(qe):le.lockWith((t=>{document.fullscreenElement||te(),It().then(t)}))))}function eo(t){let e=(t||0).target||0,n=document.activeElement||0;1===e.nodeType&&1===n.nodeType&&u.resolve().then((()=>{e.contains(n)&&n.blur()}))}zn("yt-player-updated",(t=>{const e=(t||0).target||0;if(1!==e.nodeType)return;"YTD-PLAYER"===e.nodeName.toUpperCase()&&(!async function(t){const e="gM7Cp";let n=Lt.call(t,`#movie_player video[src]:not([${e}])`);n=n||Lt.call(t,`#movie_player audio.video-stream.html5-main-video[src]:not([${e}])`),n&&(n.setAttribute(e,""),n.addEventListener("timeupdate",(t=>{hn()}),At),n.addEventListener("ended",(t=>{if("watch"===F){let e=t.target;u.resolve(e).then((t=>{if("watch"===F){let e=_t.call(t,"#player")||_t.call(t,"#ytd-player")||t;e.scrollIntoView(!1),e=null}t=null}))}}),At))}(e),oe((()=>{C&&(Ln(),jn(),qn(),to(null))})))}));let no=0;const oo=()=>{console.log("d945",no),2&Qo||(Qo|=2,console.log("d946",no),document.documentElement.removeAttribute("pnzgu"),(()=>{console.log("d950");const t=`${ce.valueOf()}`,e=document.querySelectorAll(`[bsptu="${t}"]`);if(console.log("d951",e.length),e.length)for(const t of e){const e=t.nodeName.toLowerCase();let n="yt-dummy-532"===e?t:null,o=n?Fn.get(n):null;if(o&&_t.call(o,"#tab-info"))continue;console.log("d952",t);const l=o||("ytd-expander"===e?t:null);if(l){let t=0;const e=document.querySelector("#tab-info");if(e){if(t=1,!l.hasAttribute("tyt-info-expander-content")){t=2,l.setAttribute("tyt-info-expander-content","");const e=document.createElement("yt-dummy-532");e.setAttribute("tyt-info-expander-placeholder",""),l.replaceWith(e),Fn.set(l,e),Fn.set(e,l);const n=_t.call(e,"[hidden]");n&&(t=3,io.observe(n.parentNode,{subtree:!0,childList:!0}))}Dt.call(e,l)}Rn(),console.log("d953",t)}}})(),Nn(),async function(){if(!C)return 0;await se.d(),await u.all([u.resolve().then((()=>{let t=document.querySelector("ytd-watch-flexy #tab-info ytd-expander tp-yt-paper-button#less.ytd-expander:not([hidden]), #tab-info ytd-expander tp-yt-paper-button#more.ytd-expander:not([hidden])");if(t){const e=t;t=null;const n=_t.call(e,"ytd-watch-flexy #tab-info ytd-expander");if(!n||1!==n.nodeType)return;n.style.getPropertyValue("--ytd-expander-collapsed-height")&&n.style.setProperty("--ytd-expander-collapsed-height",""),fe(n,"tabview-expander-config")}})),u.resolve().then((()=>{let t=document.querySelector("ytd-watch-flexy #tab-info ytd-structured-description-content-renderer.style-scope.ytd-video-secondary-info-renderer");if(t){const e=_t.call(t,"[hidden]");if(e){t.hasAttribute("hidden")&&t.removeAttribute("hidden");const e=_t.call(t,"ytd-expander.style-scope.ytd-video-secondary-info-renderer #description.style-scope.ytd-video-secondary-info-renderer");e&&e.hasAttribute("hidden")&&e.removeAttribute("hidden")}e&&setTimeout((()=>{let e=_t.call(t,"ytd-watch-flexy #tab-info ytd-expander");if(!e)return;let n=kt.call(e,'#tab-info .more-button.style-scope.ytd-video-secondary-info-renderer[role="button"]');if(1===n.length){let t=l(n[0]);"TP-YT-PAPER-BUTTON"===t.nodeName.toUpperCase()&&t.click()}}),300)}})),u.resolve().then((()=>{let t=document.querySelector("#primary.ytd-watch-flexy #below ytd-watch-metadata #owner #owner-sub-count");if(t){if(!t.hasAttribute("title")){let e=_t.call(t,"body #primary.ytd-watch-flexy #below ytd-watch-metadata:not([tabview-uploader-hover])");if(e){e.setAttribute("tabview-uploader-hover","");let t=0;e.addEventListener("transitionend",(function(e){let n="background-position-y"===e.propertyName?1:"background-position-x"===e.propertyName?2:0;if(n&&e.target){let t=this;if(t.classList.contains("tabview-uploader-hover")){if("owner"!==e.target.id)return;t.classList.toggle("tabview-uploader-hover",!1)}}if(1===n){let n=e.elapsedTime<.03;n?n&&(t=0):(t>0&&this.classList.toggle("tabview-uploader-hover",!1),t=0)}else if(2===n){e.elapsedTime<.03?t++:t--;let n=this;t<=0?(n.classList.toggle("tabview-uploader-hover",!1),t=0):1===t&&n.classList.toggle("tabview-uploader-hover",!0)}}),Tt)}}t.setAttribute("title",t.textContent)}}))])}().then((()=>{se.d().then((()=>{const t=document.querySelector("#primary.ytd-watch-flexy #below ytd-watch-metadata #info-container.ytd-watch-metadata:first-child")||document.querySelector("#primary.ytd-watch-flexy #below ytd-watch-metadata #ytd-watch-info-text.ytd-watch-metadata:first-child")||null;t&&!t.hasAttribute("tyt-info-toggler")&&(t.setAttribute("tyt-info-toggler",""),fe(t,"tyt-info-toggler"))})),ie.debounce((()=>{8&Qo||(Qo|=8,setTimeout((()=>{!async function(){window.dispatchEvent(new Event("resize"))}(),il()}),420))}),ce);let t=document.querySelector("#columns.ytd-watch-flexy #secondary.ytd-watch-flexy");$e(t,qt(t,"#columns.ytd-watch-flexy")),Pe(document.querySelector("#tab-info")),Pe(document.querySelector("#tab-comments")),document.documentElement.setAttribute("pnzgu","")})).catch(console.warn))};let lo=new Map;function ro(t,e){if(0===lo.size)document.addEventListener("animationstart",(t=>{const e=t.animationName;if(!e)return;let n=lo.get(e);if(n)n(t);else{let t=e.indexOf("Controller-");if(t>0){let n=t+10;!function(t,e){if((e=+e)>-1&&e>=0)if("tabviewTabsHideController"===t){let t;Z=e,t=document.querySelector('[tyt-tab-content="#tab-info"]'),t&&t.classList.toggle("tab-btn-hidden",!(1&~Z)),t=document.querySelector('[tyt-tab-content="#tab-comments"]'),t&&(2&~Z?t.classList.toggle("tab-btn-hidden",et):t.classList.toggle("tab-btn-hidden",!0)),t=document.querySelector('[tyt-tab-content="#tab-videos"]'),t&&t.classList.toggle("tab-btn-hidden",!(4&~Z)),document.querySelector('[tyt-tab-content^="#"].active.tab-btn-hidden')&&Oe()}else"tabviewDefaultTabController"===t&&(Q=e,tt&&tt())}(e.substring(0,n),e.substring(n+1))}}}),Tt);else if(lo.has(t))return;lo.set(t,e)}const io=new MutationObserver((()=>{Rn()}));function ao(){ro("videosDOMAppended",(function(t){vo.resolve()})),ro("liveChatFrameDOMAppended",(t=>{let e=t.target;e&&to(e)}));const e=jt();ro("pageLoaderAnimation",(t=>{ae=2,ie.resolve(),console.debug("[tyt] pageRendered"),se.debounce((()=>{It().then((()=>{document.dispatchEvent(new CustomEvent("yt-watch-comments-ready"))}))}),e)}));const n=()=>{console.log("d943",no),Vn();let t=ce.valueOf();se.debounce((()=>{console.log("d944",no),t===ce.valueOf()&&oo()}))},o=jt(),r=t=>{ie.debounce((()=>{no|=1,setTimeout((()=>{3===no&&(no|=4,u.resolve().then(n))}),8)}),o)};ro("watchMetaFrameReady1",r),ro("watchMetaFrameReady2",r);const i=jt(),a=t=>{const e=t.target;ie.debounce((()=>{no|=2,e.isConnected&&e.setAttribute("bsptu",ce.valueOf()),setTimeout((()=>{3===no&&(no|=4,u.resolve().then(n))}),8)}),i)};ro("watchMetaContentReady1",a),ro("watchMetaContentReady2",a),ro("fixInvisibleInfoBug",(t=>t.target.removeAttribute("hidden"))),ro("commentsHeaderAppended1",kn),ro("commentsHeaderAppended2",kn),ro("fixPlaylistLocation1",(t=>{const e=t.target;_t.call(e,"#tab-list")||(wn(e),Yn())}));const c=t=>{const e=t.target;if(!e||1!==e.nodeType)return;const n=xt.ytdFlexy;C&&n&&gn(e,l(e))};ro("chatFrameToggleBtnAppended1",c),ro("chatFrameToggleBtnAppended2",c),ro("epDOMAppended",(async t=>{try{let e=t.target,n=document.querySelectorAll('ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility="ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"]:not([hidden])');if(n&&n.length>0){if(n.length>1){let t=0;for(const o of n)o!==e&&(ln(o),t++);t>0&&await u.resolve(0)}Mn.mtf_attrEngagementPanel(9,e),u.resolve().then((()=>{we.bindElement(e,{attributes:!0,attributeFilter:["visibility"],attributeOldValue:!0}),e.removeEventListener("mouseleave",eo,!1),e.addEventListener("mouseleave",eo,!1)}))}}catch(t){}})),ro("playlistRowDOMSelected",(t=>{if(!t)return;let e=t.target;if(!e)return;let n=l(e);if(!n||"items"!==n.id)return;let o=/\/watch\?v=[^\&]+\&/.exec(location.href||"");if(!o)return;let r=o[0]+"";if(!r||r.length<=10)return;let i=Lt.call(n,`ytd-playlist-panel-video-renderer a[href*="${r}"]`);if(!i||e.contains(i))return;let a=_t.call(i,"ytd-playlist-panel-video-renderer");a&&(e.removeAttribute("selected"),a.setAttribute("selected",""))}));let s=!1;function d(t){const{newPageType:e,oldPageType:n}=t;if(e&&n){let t=!1;"ytd-watch-flexy"==e?(t=!0,F="watch"):"ytd-browse"==e&&(F="browse"),document.documentElement.classList.toggle("tabview-normal-player",t)}}ro("tabviewSiderAnimation",(t=>{s||(s=!0,ke())})),ro("tabviewSiderAnimationNone",(t=>{s&&(s=!1,ke())})),ro("SearchWhileWatchAutocomplete",(t=>{let e=t.target;if(e.hasAttribute("tyt-found"))return;e.setAttribute("tyt-found","");let n=document.createElement("div");n.id="suggestions-search-container",e.replaceWith(n),n.appendChild(e),e.addEventListener("tyt-autocomplete-sc-exist",mn,!1),se.debounce((()=>{e.isConnected&&fe(e,"tabview-fix-autocomplete"),e=null}))})),ro("rydTooltipAppear",(t=>{document.documentElement.classList.add("return-youtube-dislike")})),ro("oldYtIconPinAppeared",(e=>{let n=e.target,o=document.createElement("template");o.innerHTML=t('<svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope yt-icon" style="pointer-events: none; display: block; width: 100%; height: 100%;"><g class="style-scope yt-icon"><path d="M8,2V1H3v1h1v3.8L3,7h2v2.5L5.5,10L6,9.5V7h2L7,5.8V2H8z M6,6H5V2h1V6z" class="style-scope yt-icon"></path></g></svg>'),n.replaceWith(o.content.firstChild)})),zn("yt-rendererstamper-finished",(t=>{if(!C&&ne.resolved)return;if(!t||!t.target||1!==t.target.nodeType)return;let e=t.target;const n=e.nodeName.toUpperCase();"YTD-PLAYLIST-PANEL-RENDERER"!==n&&"YTD-COMMENTS-HEADER-RENDERER"!==n||oe((()=>{const t=e;e=null,"YTD-PLAYLIST-PANEL-RENDERER"===n?(wn(t),Yn()):"YTD-COMMENTS-HEADER-RENDERER"===n&&(3&~q||Xn())}))})),ro("deferredDuplicatedMetaChecker",(()=>{Qn()})),zn("yt-page-data-updated",(t=>{Zn&&"/watch"===location.pathname&&Qn(1),t&&t.target&&1===t.target.nodeType&&oe((()=>{C&&(Ln(),jn(),to(null),Yn())}))})),zn("yt-watch-comments-ready",(t=>{if(!C&&ne.resolved)return;if(!t||!t.target||1!==t.target.nodeType)return;const e=t.target.nodeName.toUpperCase();q|=2,async function(t){await Wt.then(),await se.d(),Ln(),t&&(qn(),_n())}("YTD-WATCH-FLEXY"===e)})),window.addEventListener("message",(t=>{if((C||!ne.resolved)&&t.origin===location.origin){const e=t.data.tabviewData||0;"yt-page-type-changed"===e.eventType&&u.resolve(e.eventDetail||{}).then(d)}}),At);let y=!1;zn("data-changed",(t=>{if(!C&&ne.resolved)return;"YTD-THUMBNAIL-OVERLAY-TOGGLE-BUTTON-RENDERER"===(((t||0).target||0).nodeName||"").toUpperCase()&&(y||(y=!0,fe(document,"tabview-fix-popup-refit")))}))}function co(t){let e=function(){let t=document.querySelector("ytd-live-chat-frame iframe#chatframe");if(!t)return null;let e=null;try{e=t.contentDocument}catch(t){}return e?"complete"!=e.readyState?null:e:null}();if(!e)return null;let n=null;try{n=e.querySelector(t)}catch(t){console.log("iframe error",t)}return n}const so=jt();let uo=new Vt;const yo=function(t){const e=(t||0).target,n=e instanceof HTMLIFrameElement?e:null;n&&"chatframe"===n.id&&p((async()=>{await uo.then(),n.matches("body iframe.style-scope.ytd-live-chat-frame#chatframe")&&await mo(n)}))};document.addEventListener("load",yo,Tt);let fo=0;const ho=new WeakMap,mo=async function(t){const e=t;fo>1e9&&(fo=9);const n=++fo;if(ho.set(e,2*n),await se.d(),await Wt.then(),n!==fo)return;if(await m().then(),n!==fo)return;if(await ie.d(),n!==fo)return;if(!0!==e.isConnected)return;const o=_t.call(e,"ytd-live-chat-frame#chat");if(!o)return;if(o.hasAttribute("collapsed"))return;const l=so.inc(),r=await new u((t=>{let n=250,r=0;const i=()=>{let i;i=l!==so.valueOf()||--n<0||!(!0===o.isConnected&&!0===e.isConnected&&!o.hasAttribute("collapsed"));let a=null;if(!i){if(HTMLElement.prototype.closest.call(e,"[hidden]"))return;if(!HTMLElement.prototype.closest.call(e,"#columns.style-scope.ytd-watch-flexy"))return;try{a=e.contentDocument}catch(t){}if(!a)return;if(!a.body)return}t&&t(a),t=null,r&&clearInterval(r),r=0};i(),null!==t&&(r=setInterval(i,17))})).catch(console.warn);if(n!==fo)return;if(l!==so.valueOf()||!r)return;if(o.hasAttribute("collapsed")||!0!==e.isConnected)return;if(!r||"loading"!==r.readyState&&(r.body||0).firstElementChild||await new u((t=>setTimeout(t,50))),o.hasAttribute("collapsed")||!0!==e.isConnected)return;if(n!==fo)return;const i=(r.body||0).firstElementChild;if(i){if(!C||!Je())return;if(!(e instanceof HTMLIFrameElement)||!0!==e.isConnected)return;let t=!1;try{t=e.contentDocument===r}catch(t){}if(t){let t=_t.call(e,"ytd-live-chat-frame#chat");t&&(fe(t,"tabview-chatroom-ready"),ho.set(e,2*n+1))}}else i||setTimeout((()=>{if(n===fo)try{if(o.isConnected&&!o.hasAttribute("collapsed")&&o.contains(e)){const t=e.contentDocument;if(t){const e=t.body;e&&null===e.firstElementChild&&fe(o,"tabview-chat-fix-url-onload-with-empty-body")}}}catch(t){console.warn(t)}}),230)},po=async function(t){const e=t;if(!0!==e.isConnected||!(e instanceof HTMLIFrameElement))return;if((ho.get(e)||0)%2!=1)return;const n=_t.call(e,"ytd-live-chat-frame#chat");if(!n)return;if(n.hasAttribute("collapsed")||!0!==e.isConnected)return;let o=0;try{o=e.contentDocument}catch(t){}(o.body||0).firstElementChild&&C&&Je()&&fe(n,"tabview-chatroom-ready")};async function bo(){ht&&!ft&&sl&&(sl=!1,Ce())}let vo=new Gt,go=0;function wo(){ht&&!ft?bo():!ht&&ft&&"function"==typeof IntersectionObserver&&Uo()}function xo(t){let e=null;return t&&"string"==typeof t&&/^\#[a-zA-Z\_\-\+]+$/.test(t)&&document.querySelector(`.tab-btn[tyt-tab-content="${t}"]`)&&(e=t),e}function Eo(t){let e;return e=1===Q?"#tab-info":2===Q?"#tab-comments":3===Q?"#tab-videos":(t=t||jo())[J],e}function So(){const t=document.querySelector("#material-tabs");if(!t)return;if(P)return;P=!0;let e=null;function n(t){if(!t)return;const e=xt.ytdFlexy;e&&(t["font-size-#tab-info"]&&e.style.setProperty("--ut2257-info",t["font-size-#tab-info"]),t["font-size-#tab-comments"]&&e.style.setProperty("--ut2257-comments",t["font-size-#tab-comments"]),t["font-size-#tab-videos"]&&e.style.setProperty("--ut2257-videos",t["font-size-#tab-videos"]),t["font-size-#tab-list"]&&e.style.setProperty("--ut2257-list",t["font-size-#tab-list"]),fe(document,"tabview-zoom-updated"))}t.addEventListener("click",(async function(t){const n=t.target;if(1!==(n||0).nodeType)return;if(await m().then(),await se.d(),!0!==n.isConnected)return;(ht||ft&&"function"==typeof IntersectionObserver)&&It().then(wo);const o=n.getAttribute("tyt-di");"q9Kjc"===o?Vo.call(n,t):"8rdLQ"===o&&e&&e.call(n,t)}),!0),e=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let e=t.target;if(!e)return;let o=e.classList.contains("font-size-plus")?1:e.classList.contains("font-size-minus")?-1:0,l=_t.call(e,"[tyt-tab-content]").getAttribute("tyt-tab-content"),r=jo(),i=`font-size-${l}`;r[i]||(r[i]=1),o<0?r[i]-=.05:o>0&&(r[i]+=.05),r[i]<.1?r[i]=.1:r[i]>10&&(r[i]=10),zo(r),r=jo(),n(r)};let o=jo();n(o),function(t){let e=Eo(t);e=e?xo(e):null,e&&(X.defaultTab=e)}(o),tt=function(){let t=Eo();t=t?xo(t):null,X.defaultTab=t||U}}function Ao(t){t=xo(t);let e=jo();t?(e[J]=t,X.defaultTab=t):(delete e[J],X.defaultTab=U),zo(e)}function To(t){let e=(t||0).target;e instanceof HTMLIFrameElement&&"chatframe"===e.id&&Dn()}async function Lo(){if(await se.d(),"watch"!==F)return;u.resolve().then(Vn);let e=Date.now();go=e;const n=m().then(),o=vo.d(),l=()=>{if(go!==e)return-400;if(3!==el)return-200;const t=document.querySelector("ytd-watch-flexy:not([hidden])")||document.querySelector("ytd-watch-flexy");return t?(Y=Rt(t),0):(Y=null,-100)};let r=l();if(r<0)return;let i=C;if(C=!0,await u.all([o,n]),r=l(),r<0)return C=i,void(Y||(C=!1));r=null;const a=Ot(Y);if(!a)return Y=null,void(C=!1);Dn(),document.removeEventListener("load",To,!0),document.addEventListener("load",To,!0);const c=Lt.call(a,"#related.ytd-watch-flexy");if(!c)return;if(!document.querySelector("#right-tabs")){!function(){let t=Bn();ot=lt[t]?t:"en"}();let e=document.createElement("template");e.innerHTML=t(function(){const t=`${We(16,16,90,90,g)}<span>${On("videos")}</span>`,e=`${We(16,16,60,60,w)}<span>${On("info")}</span>`,n=`${We(16,16,20,20,x)}<span>${On("playlist")}</span>`;let o='\n        <paper-ripple class="style-scope yt-icon-button">\n            <div id="background" class="style-scope paper-ripple" style="opacity:0;"></div>\n            <div id="waves" class="style-scope paper-ripple"></div>\n        </paper-ripple>\n        ',l='\n    <div class="font-size-right">\n    <div class="font-size-btn font-size-plus" tyt-di="8rdLQ">\n    <svg width="12" height="12" viewbox="0 0 50 50" preserveAspectRatio="xMidYMid meet" \n    stroke="currentColor" stroke-width="6" stroke-linecap="round" vector-effect="non-scaling-size">\n      <path d="M12 25H38M25 12V38"/>\n    </svg>\n    </div><div class="font-size-btn font-size-minus" tyt-di="8rdLQ">\n    <svg width="12" height="12" viewbox="0 0 50 50" preserveAspectRatio="xMidYMid meet"\n    stroke="currentColor" stroke-width="6" stroke-linecap="round" vector-effect="non-scaling-size">\n      <path d="M12 25h26"/>\n    </svg>\n    </div>\n    </div>\n    '.replace(/[\r\n]+/g,"");return`\n        <div id="right-tabs">\n            <tabview-view-pos-thead></tabview-view-pos-thead>\n            <header>\n                <div id="material-tabs">\n                    ${[`<a id="tab-btn1" tyt-di="q9Kjc" tyt-tab-content="#tab-info" class="tab-btn${1&~Z?"":" tab-btn-hidden"}">${e}${o}${l}</a>`,`<a id="tab-btn3" tyt-di="q9Kjc" tyt-tab-content="#tab-comments" class="tab-btn${2&~Z?"":" tab-btn-hidden"}">${We(16,16,120,120,v)}<span id="tyt-cm-count"></span>${o}${l}</a>`,`<a id="tab-btn4" tyt-di="q9Kjc" tyt-tab-content="#tab-videos" class="tab-btn${4&~Z?"":" tab-btn-hidden"}">${t}${o}${l}</a>`,`<a id="tab-btn5" tyt-di="q9Kjc" tyt-tab-content="#tab-list" class="tab-btn tab-btn-hidden">${n}${o}${l}</a>`].join("")}\n                </div>\n            </header>\n            <div class="tab-content">\n                <div id="tab-info" class="tab-content-cld tab-content-hidden" tyt-hidden userscript-scrollbar-render></div>\n                <div id="tab-comments" class="tab-content-cld tab-content-hidden" tyt-hidden userscript-scrollbar-render></div>\n                <div id="tab-videos" class="tab-content-cld tab-content-hidden" tyt-hidden userscript-scrollbar-render></div>\n                <div id="tab-list" class="tab-content-cld tab-content-hidden" tyt-hidden userscript-scrollbar-render></div>\n            </div>\n        </div>\n        `}());let n=e.content.firstElementChild;null!==n&&(bn(n,c),Lt.call(n,"#material-tabs").addEventListener("mousemove",(t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),!0),So(),console.debug("[tyt] #right-tabs inserted")),e.textContent="",e=null}a.hasAttribute("tyt-tab")||a.setAttribute("tyt-tab",""),fn();let s=!1;(document.querySelector('ytd-watch-flexy[tyt-chat^="+"]')||document.querySelector('ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility="ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"]:not([hidden])')||document.querySelector("ytd-watch-flexy ytd-donation-shelf-renderer.ytd-watch-flexy:not([hidden]):not(:empty)"))&&(s=!0),s?Bo(null):Oe(),ve.clear(!0),ge.clear(!0),Oo(),document.documentElement.setAttribute("tyt-deferred",""),ne.resolve(),Wt.resolve(),Mn.mtf_attrEngagementPanel()}function ko(){const t=xt.ytdFlexy;C&&t&&2!==$&&(t.setAttribute("tyt-comments","L"),Et.log(2909,1))}function _o(t){G.comments_section_loaded=t,0===t&&nt&&(nt.fetched=!1)}function Co(){let t=document.querySelector('.tab-btn[tyt-tab-content="#tab-comments"]');if(t){let e=Lt.call(t,"span#tyt-cm-count");t.removeAttribute("loaded-comment"),e&&(e.textContent="")}_o(0),Et.log(7233,"comments_section_loaded = 0")}function qo(){if(Et.log(2909,1),!C)return;let t=xt.ytdFlexy;if(!t)return;Et.log(2909,2);let e=document.querySelector("ytd-comments#comments");if(2===$);else if(e&&!e.hasAttribute("hidden"))return;if(Et.log(2909,4),2===G.comments_section_loaded)return;_o(2),Et.log(2909,5);let n=document.querySelector('.tab-btn[tyt-tab-content="#tab-comments"]');if(n){let t=Lt.call(n,"span#tyt-cm-count");n.removeAttribute("loaded-comment"),n.classList.contains("tab-btn-hidden")||Ue(n),t&&(t.textContent="")}t.setAttribute("tyt-comments","D"),Et.log(2909,10)}function Do(t,e,n){return e?t|n:t&~n}function Mo(t,e){let n,o,l;switch(e){case"theater":o=Xe(),t=Do(t,o,4);break;case"tyt-chat":n=xt.ytdFlexy,l=n.getAttribute("tyt-chat"),null!==l&&"-"===l.charAt(0)?t=Do(t,!0,48):(t=Do(t,null!==l,E),t=Do(t,!1,S));break;case"is-two-columns_":o=Ze(),t=Do(t,o,2);break;case"tyt-tab":n=xt.ytdFlexy,o="string"==typeof(r=n.getAttribute("tyt-tab"))&&r.length>0,t=Do(t,o,A);break;case"fullscreen":n=xt.ytdFlexy,o=n.hasAttribute("fullscreen"),t=Do(t,o,8);break;case"tyt-ep-visible":n=xt.ytdFlexy,l=n.getAttribute("tyt-ep-visible"),o=+l>0,t=Do(t,o,T);break;case"tyt-donation-shelf":n=xt.ytdFlexy,o=n.hasAttribute("tyt-donation-shelf"),t=Do(t,o,k)}var r;return t}function $o(t,e){if(!pt)return;if(!t||1!==t.length)return;let n=t[0];if(!0===n.isIntersecting){if(!1===Ht(Ve.layoutStatus,10,0))return;let o=n.target;if(!o)return;let l=!1,r=null;async function i(t,e){if(e){let e=_t.call(t,"#description.item.style-scope.ytd-watch-metadata");e&&e.click()}await It();let n,o=null;try{let e=_t.call(t,"#description.item.style-scope.ytd-watch-metadata"),l=e.offsetHeight;n=_t.call(e,"#primary-inner");let r=n.offsetHeight;e.setAttribute("userscript-scrollbar-render",""),r>l&&l>0&&r>0&&(o=r-l)}catch(t){}n&&n.style.setProperty("--tyt-desc-top-h",`${o||0}px`)}!1===Ht(Ve.layoutStatus,0,960)&&(r=_t.call(o,"#description.item.style-scope.ytd-watch-metadata"),r&&(pt=!1,l=!0)),i(o,l)}}function Po(){C&&Ht(Ve.layoutStatus,2,972)&&Oe()}document.addEventListener("tabview-setMyDefaultTab",(function(t){Ao(((t||0).detail||0).myDefaultTab)}),!1);let No=!1;const Fo=(t,e)=>{if(t&&t.length>=1){let e=0;for(const n of t)if("hidden"===n.attributeName){e=1;break}e&&(No=!0)}if(!C)return;const n=xt.ytdFlexy;if(!n)return;if(!t)return;const o=Ve.layoutStatus;if(0===o)return;let l=o,r=!1,i=0,a=0;if(ee(),Yt.allowChatControl){for(const e of t)l=Mo(l,e.attributeName),"tyt-chat"===e.attributeName?r||(r=!0,(n.getAttribute("tyt-chat")||"").indexOf("chat$live")>=0&&qo(),n.hasAttribute("tyt-chat")||(a|=1)):"tyt-ep-visible"===e.attributeName?(0==+(n.getAttribute("tyt-ep-visible")||0)&&+e.oldValue>0&&(a|=2),i=0===i?1:-1):"tyt-donation-shelf"===e.attributeName?(n.hasAttribute("tyt-donation-shelf")?(R.lastPanel="#donation-shelf",Bo(null)):a|=4,i=0===i?2:-1):"is-extra-wide-video_"===e.attributeName&&It().then(Ie);l=ze(l),l!==o&&(Ht(l,2,324)&&(1===i?Ht(l,640,0)&&an():2===i&&Ht(l,640,0)&&rn()),Ve.layoutStatus=l),(async()=>{await It(),le.lockWith((t=>{Po(),t()}))})()}},Io=(t,e)=>{It().then((()=>{le.lockWith((t=>{ee(),function(){let t=document.getElementById("tabview-css-content");if(!t)return;let e=document.getElementById("tabview-css-chat");if(e)if(!1===t.disabled){if(Yt.ytlstmTheaterMode){t.disabled=!0,e.disabled=!0;let n=document.querySelector(".youtube-genius-lyrics-found-hide-btn");n&&n.click(),rn()}}else if(!0===t.disabled&&!Yt.ytlstmTheaterMode)t.disabled=!1,e.disabled=!1}(),Yt.allowChatControl&&(Ho(Ve.layoutStatus),fn()),document.fullscreenElement?t():4&Ve.layoutStatus?(Yt.allowChatControl?te():document.querySelector("ytd-watch-flexy[is-two-columns_][theater] ytd-live-chat-frame#chat[collapsed]")&&dn(),It().then(t)):t()}))}))};const Ho=t=>{const e=t;t=Mo(t,"theater"),t=Mo(t,"tyt-chat"),t=Mo(t,"is-two-columns_"),t=Mo(t,"tyt-tab"),t=Mo(t,"fullscreen"),t=Mo(t,"tyt-ep-visible"),ze(t=Mo(t,"tyt-donation-shelf")),e!==t&&(Ve.layoutStatus=t)},Ro=()=>{const t=xt.ytdFlexy;if(!t)return;const e=function(){const t=xt.ytdFlexy;if(!C||!t)return null;let e=null,n=null;const o=document.querySelector("ytd-live-chat-frame#chat");let l=null;if(o){l=co("yt-live-chat-renderer #continuations");let r=0;if(l){if(r|=Lt.call(l,"yt-timed-continuation")?1:0,r|=Lt.call(l,"yt-live-chat-replay-continuation, yt-player-seek-continuation")?2:0,1==r?e="chat$live":2==r&&(e="chat$playback"),1==r){let t=document.querySelector("span#tyt-cm-count");t&&(t.textContent="")}}else t.hasAttribute("tyt-chat")||(e="");n=!!o.hasAttribute("collapsed")}else e=!1,n=!1;return{attr_chatblock:e,attr_chatcollapsed:n}}();if(e){let{attr_chatblock:n,attr_chatcollapsed:o}=e;null===n&&(n=!1,o=!1);let l=n;"string"==typeof l&&(!0===o&&(l="-"+l),!1===o&&(l="+"+l)),Ye(t,"tyt-chat",l)}},Oo=()=>{const t=xt.ytdFlexy;if(!C||!t)return!0;void 0!==Ve.layoutStatus&&1&Ve.layoutStatus||(Ve.layoutStatus=0);t.hasAttribute("hidden")||Ro();let e=[...kt.call(t,".tab-btn[tyt-tab-content]")].map((t=>({elm:t,hidden:t.classList.contains("tab-btn-hidden")})));0===e.length?Ye(t,"tyt-tab",!1):(e=e.filter((t=>!0!==t.hidden)),0===e.length&&Ye(t,"tyt-tab","")),e=null;let n=on();n&&n.list.length>0?Ye(t,"tyt-ep-visible",`${n.value}`):Ye(t,"tyt-ep-visible",!1),Ho(1),ve.bindElement(t,{attributes:!0,attributeFilter:["tyt-chat","theater","is-two-columns_","tyt-tab","fullscreen","tyt-ep-visible","tyt-donation-shelf","hidden","is-extra-wide-video_"],attributeOldValue:!0}),ge.bindElement(document.body,{attributes:!0,attributeFilter:["data-ytlstm-theater-mode"],attributeOldValue:!0});let o=document.querySelector("ytd-page-manager#page-manager #columns.ytd-watch-flexy");return o&&Ye(o,"userscript-scrollbar-render",!0),Po(),!1};function Bo(t){if(!C)return;const e=xt.ytdFlexy;if(!e)return;if(t&&t.classList.contains("tab-btn-hidden"))return;const n=document.querySelectorAll("#material-tabs a[tyt-tab-content]");for(const e of n){let n=document.querySelector(e.getAttribute("tyt-tab-content"));e&&n&&(e!==t?(e.classList.remove("active"),n.classList.add("tab-content-hidden"),n.hasAttribute("tyt-hidden")||n.setAttribute("tyt-hidden","")):(e.classList.add("active"),n.hasAttribute("tyt-hidden")&&n.removeAttribute("tyt-hidden"),n.classList.remove("tab-content-hidden")))}!function(){t&&(R.lastTab=t.getAttribute("tyt-tab-content"),R.lastPanel=null,document.querySelector(`${R.lastTab}.tab-content-cld tabview-view-tab-expander`)||se.debounce((()=>{let t=document.querySelector("#secondary.ytd-watch-flexy");t&&t.dispatchEvent(new CustomEvent("tabview-hover-slider-restore"))})));const n=t?R.lastTab:"";if(e.setAttribute("tyt-tab",n),"#tab-videos"===n){let t=document.querySelector("#tab-videos yt-chip-cloud-renderer");t&&se.debounce((()=>{t.isConnected&&fe(t,"tyt-resize-chip-cloud"),t=null}))}}()}function jo(){let t=localStorage[K];function e(){let t={version:1};return localStorage[K]=JSON.stringify(t),t}if(!t)return e();let n=null;try{n=JSON.parse(t)}catch(t){}return n&&1===n.version?n:e()}function zo(t){return!(!t||"object"!=typeof t)&&(1===t.version&&(localStorage[K]=JSON.stringify(t),!0))}function Vo(t){const e=xt.ytdFlexy;if(!C||!e)return null;if(!this.hasAttribute("tyt-tab-content"))return;let n=t.target;n&&(n.classList.contains("font-size-btn")||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),async function(t){await u.resolve(0);let e=await new u((t=>{le.lockWith((e=>{t(e)}))}));H=t.getAttribute("tyt-tab-content");let n=t.classList.contains("tab-btn")&&t.classList.contains("active")&&!t.classList.contains("tab-btn-hidden");Et.log(8221,15,n),Ke()?(Et.log(8221,16,1),n?(It().then(e),Bo(null)):(Je()&&Ze()?un():Qe()&&Ze()?rn():tn()&&Ze()&&an(),(async()=>{He&&(await It(),Re()),await It(),e()})(),Bo(t))):Ze()&&!Xe()&&n?(Bo(null),cn(),It().then(e)):n?(Bo(null),It().then(e)):(Je()&&Ze()?un():Qe()&&Ze()?rn():tn()&&Ze()?an():Ze()&&Xe()&&!Ke()&&sn(),Bo(t),(async()=>{await It();let n=document.querySelector("#right-tabs");if(!Ze()&&n&&n.offsetTop>0&&t.classList.contains("active")&&n.hasAttribute("tyt-stickybar")){let t=document.querySelector("#material-tabs"),e=t?t.offsetHeight:0;window.scrollTo(0,n.offsetTop-e)}await It(),e()})())}(this)))}function Wo(){ht=!1}document.addEventListener("tabview-fix-layout",(()=>{Po()}),!1);let Yo=null,Go=!1;async function Uo(){if(!ht&&ft&&sl&&"function"==typeof IntersectionObserver){let t=document.querySelector("#player video");if(!t)return;const e=t.getBoundingClientRect();if(!(e.top<0&&e.height>100&&e.bottom<.25*e.height))return;await u.resolve(0);const n=document.documentElement.clientWidth;if(n+320<screen.width&&n>320&&!document.querySelector("#rCbM3")&&(await u.resolve(0),_e(t,null).then((t=>{!0===t&&(sl=!1,ht=!0)})),t.removeEventListener("leavepictureinpicture",Wo,!1),t.addEventListener("leavepictureinpicture",Wo,!1),!t.hasAttribute("NOL4j"))){t.setAttribute("NOL4j",""),await u.resolve(0),Yo||(Yo=new IntersectionObserver((t=>{let e=t[t.length-1];e&&!0===e.isIntersecting?(Go=!0,ht&&!ft&&sl&&Go&&bo()):Go=!1}),{root:null,rootMargin:"0px",threshold:.25})),Yo.takeRecords(),Yo.disconnect(),Yo.observe(t)}}}function Xo(t,e,n,o){if(!0===e){const{width:e,height:l}=n();t.style.setProperty("--tyt-stickybar-w",e+"px"),t.style.setProperty("--tyt-stickybar-h",l+"px");const r=o();r&&(t.style.setProperty("--tyt-stickybar-l",r.left+"px"),t.style.setProperty("--tyt-stickybar-r",r.right+"px")),Ye(t,"tyt-stickybar",!0),ft=!0,!ht&&ft&&sl&&"function"==typeof IntersectionObserver&&It().then(Uo)}else!1===e&&(Ye(t,"tyt-stickybar",!1),ft=!1)}const Ko=async function(){if(!C||"watch"!==F)return;if(!(2&~Ve.layoutStatus)){if(ft){Xo(document.querySelector("#right-tabs"),!1,null,null)}return}let t=scrollY,e=Date.now();yt=e,Et.log(7891,"scrolling");let[n,o,l]=await u.all([u.resolve().then((()=>document.querySelector("#right-tabs"))),u.resolve().then((()=>document.querySelector("#right-tabs header"))),u.resolve().then((()=>document.querySelector("#masthead-container, #masthead")))]);function r(){n=null,o=null,l=null}if(!n||!o)return r();if(yt!==e)return r();let i=await u.all([u.resolve().then((()=>l?l.offsetHeight:0)),u.resolve().then((()=>n.offsetTop))]);if(null===i)return r();if(yt!==e)return r();const a=function(e){const[n,o]=e;let l=[o+n,t,o-n],r=0;return l[1]<l[2]&&l[2]<l[0]&&(r=1),l[0]>l[1]&&l[1]>l[2]&&(r=2),l[2]<l[0]&&l[0]<l[1]&&(r=3),r}(i);Xo(n,2==a||3==a||1!=a&&null,(function(){return{width:n.offsetWidth,height:o.offsetHeight}}),(function(){let t=document.querySelector("tabview-view-pos-thead");if(t){let e=t.getBoundingClientRect();if(e)return{left:e.left,right:document.documentElement.clientWidth-e.right}}return null})),r()},Jo=async function(t,e,n){if(!C||"watch"!==F)return;if(!(2&~Ve.layoutStatus))return;let[o,l]=await u.all([u.resolve().then((()=>document.querySelector("#right-tabs"))),u.resolve().then((()=>document.querySelector("#right-tabs header")))]);function r(){o=null,l=null}if(!o||!l)return r();Xo(o,2==t||3==t||1!=t&&null,(function(){return{width:e||o.offsetWidth,height:l.offsetHeight}}),(function(){return n})),r()};const Zo=jt();let Qo=0;function tl(t){console.debug("[tyt] newVideoPage"),Qo=0;if(!xt.ytdFlexy)return;le=new Ut;let e=null,n=null;if("watch"!==F)return;!function(){const t=xt.ytdFlexy;if(!t)return;C=!0,Et.log(27056);let e=Ve.layoutStatus;const n=2&e,o=4&e,l=8&e,r=e&T,i=e&k,a=!(e&A||!(e&S)&&e&E||r||i);""===t.getAttribute("tyt-tab")&&n&&!o&&a&&!l?Oe():r&&0===kt.call(t,'ytd-watch-flexy[flexy][tyt-tab] #panels.ytd-watch-flexy ytd-engagement-panel-section-list-renderer[target-id][visibility="ENGAGEMENT_PANEL_VISIBILITY_EXPANDED"]:not([hidden])').length?Ve.layoutStatus=-129&e:i&&0===kt.call(t,"ytd-donation-shelf-renderer.ytd-watch-flexy:not([hidden])").length&&(Ve.layoutStatus=-513&e)}();try{e=t.pageData.response.contents.twoColumnWatchNextResults.conversationBar.liveChatRenderer}catch(t){}e&&!0===e.isReplay&&(n=!0),N=((((t||0).pageData||0).playerResponse||0).videoDetails||0).videoId||0;const o=N,l=Zo.inc(),r=()=>new u((t=>{let e=new MutationObserver((()=>{t&&e&&(e.disconnect(),e.takeRecords(),e=null,t(),t=null)}));e&&e.observe(document.documentElement,{attributes:!0,attributeFilter:["sxmq8"]})})),i=r(),a=document.documentElement;a.setAttribute("sxmq8","1"===a.getAttribute("sxmq8")?"0":"1"),console.log("sxmq8 r3",document.documentElement.getAttribute("sxmq8")),i.then((()=>{const t=r(),e=document.documentElement;e.setAttribute("sxmq8","1"===e.getAttribute("sxmq8")?"0":"1"),console.log("sxmq8 r4",document.documentElement.getAttribute("sxmq8")),t.then((()=>{if(o!==N)return;if(l!==Zo.valueOf())return;Zo.inc();const t=document.querySelector("ytd-live-chat-frame#chat");if(t&&!t.hasAttribute("collapsed")){const e=Lt.call(t,"body iframe.style-scope.ytd-live-chat-frame#chatframe");e&&u.resolve(e).then(po)}}))}));const c=e?n?3:1:0,s=e?e.initialDisplayState:null;e=null;(()=>{Et.log(932,1,1);const t=xt.ytdFlexy;if(!C||!t)return;if(Et.log(932,1,2),"watch"!==F)return;Et.log(932,1,3);let e=function(t,e){const n=xt.ytdFlexy;if(!C||!n)return;let o=B!==t,l=1===t?"chat$live":3===t&&"chat$playback",r=!1;if(l){let t=document.querySelector("ytd-live-chat-frame#chat");r=t?t.hasAttribute("collapsed"):"LIVE_CHAT_DISPLAY_STATE_COLLAPSED"===e}if(o){B=t;let e=l;"string"==typeof l&&(!0===r&&(e="-"+l),!1===r&&(e="+"+l)),Ye(n,"tyt-chat",e)}return{attr_chatblock:l,attr_chatcollapsed:r,chatTypeChanged:o}}(c,s),{attr_chatblock:n,attr_chatcollapsed:o,chatTypeChanged:l}=e;if("watch"===F){let t=xt.storeLastPanel;t?Le(t)||(O=null,rn()):O=null}if(l)if("chat$live"!=n||nl&&(nl&&nl.broadcastBeginAt&&!nl.broadcastEndAt&&!1===nl.isLiveNow)){const t=document.querySelector('[tyt-tab-content="#tab-comments"].tab-btn-hidden');t?(Co(),Et.log(9360,74),Ge(t,!0)):_o(0),$=0,Et.log(7234,"comments_section_loaded = 0"),Tn()}else Et.log(932,4),$=2,qo();else 2===$||!1!==n&&"chat$playback"!==n||(Co(),Et.log(9360,77),$=0,Et.log(7235,"comments_section_loaded = 0"),Tn());Ln()})()}let el=0,nl=null;function ol(t){if("YTD-APP"!==(((t||0).target||0).nodeName||"").toUpperCase())return;const e=t.detail;let n=((e||0).pageData||0).page;if(!n)return;if(F=n,"watch"!==F)return;let o=8&z;o&&(z-=8,uo.resolve(),document.addEventListener("load",yo,Tt),ao()),$n(),o&&el>=2&&se.debounce((()=>{let t=document.documentElement;if(t.hasAttribute("tabview-loaded"))throw"Tabview Youtube Duplicated";t.setAttribute("tabview-loaded",""),u.resolve(t).then((t=>{el>=2&&(fe(t,"tabview-ce-hack"),t=null)}))})),function(t){nl={};try{nl.publishDate=t.pageData.playerResponse.microformat.playerMicroformatRenderer.publishDate}catch(t){}try{nl.uploadDate=t.pageData.playerResponse.microformat.playerMicroformatRenderer.uploadDate}catch(t){}try{nl.publishDate2=t.pageData.response.contents.twoColumnWatchNextResults.results.results.contents[0].videoPrimaryInfoRenderer.dateText.simpleText}catch(t){}"string"==typeof nl.publishDate2&&nl.publishDate2!==nl.publishDate&&(nl.publishDate=nl.publishDate2,nl.uploadDate=null);try{nl.broadcastBeginAt=t.pageData.playerResponse.microformat.playerMicroformatRenderer.liveBroadcastDetails.startTimestamp}catch(t){}try{nl.broadcastEndAt=t.pageData.playerResponse.microformat.playerMicroformatRenderer.liveBroadcastDetails.endTimestamp}catch(t){}try{nl.isLiveNow=t.pageData.playerResponse.microformat.playerMicroformatRenderer.liveBroadcastDetails.isLiveNow}catch(t){}}(e);const l=u.resolve(e).then((t=>{if(el>=2){let e=null;try{e=t.pageData.response.contents.twoColumnWatchNextResults.conversationBar.liveChatRenderer}catch(t){}I=e?function(t){const e=t,n=((e||0).showHideButton||0).toggleButtonRenderer,o=n?null:((e||0).showButton||0).buttonRenderer;let l=null,r=null,i=null;return!n&&o&&o.text&&"string"==typeof o.text.simpleText?(("LIVE_CHAT_DISPLAY_STATE_EXPANDED"==e.initialDisplayState||"LIVE_CHAT_DISPLAY_STATE_COLLAPSED"==e.initialDisplayState)&&(l=e.initialDisplayState),i=o.text.simpleText):n&&n.defaultText&&n.toggledText&&n.defaultText.runs&&n.toggledText.runs&&1===n.defaultText.runs.length&&1===n.toggledText.runs.length&&("LIVE_CHAT_DISPLAY_STATE_EXPANDED"==e.initialDisplayState?(l=e.initialDisplayState,r=(n.defaultText.runs[0]||0).text,i=(n.toggledText.runs[0]||0).text):"LIVE_CHAT_DISPLAY_STATE_COLLAPSED"==e.initialDisplayState&&(l=e.initialDisplayState,i=(n.defaultText.runs[0]||0).text,r=(n.toggledText.runs[0]||0).text),"string"==typeof i&&"string"==typeof r&&i.length>0&&r.length>0||(i=null,r=null)),e&&!l&&console.log("[tyt] Unable to obtain showHideButton data"),{default_display_state:l,txt_collapse:r,txt_expand:i}}(e):null}})).then();let r=xt.ytdFlexy;if(r&&!0===r.isConnected&&"ytd-watch-flexy"===r.nodeName.toLowerCase()||(Y=Rt(document.querySelector("ytd-watch-flexy:not([hidden])")||document.querySelector("ytd-watch-flexy"))),r=null,!xt.ytdFlexy)return;u.resolve(0).then((()=>{const t=xt.ytdFlexy;if(el>=2&&0===ae&&t&&!0===t.isConnected){let e=document.createElement("tabview-view-ploader");ae=1,Dt.call(t,e)}else el>=2&&1===ae&&t&&!0===t.isConnected||console.warn(511,[el,ae,!!t])}));let i=e;l.then((()=>{const t=xt.ytdFlexy;el>=2&&t&&t.classList.toggle("tyt-chat-toggleable",!!I),el>=2&&oe((()=>{const t=i;i=null,el>=2&&null!==t&&(qn(),tl(t))}))})),No&&(No=!1,xt.ytdFlexy&&le.lockWith((t=>{const e=xt.ytdFlexy;e&&(e.hasAttribute("hidden")||(Ro(),Ho(1),t()))})))}let ll=new Ut;function rl(t){go=0,1!==el&&(el=1,ll.lockWith((t=>{Un(),t()})))}function il(){C&&"watch"===F&&8&~Ve.layoutStatus&&(2&Ve.layoutStatus?Ie():It().then((()=>{Ko(!0)})))}document.addEventListener("yt-navigate-start",rl,At),document.addEventListener("yt-navigate-cache",rl,At),document.addEventListener("yt-navigate-redirect",rl,At),document.addEventListener("yt-page-data-fetched",(function(t){go=0,1!==el&&(el=1,ll.lockWith((t=>{Un(),t()}))),1===el&&(el=2,F=null,ll.lockWith((e=>{if(F=null,ol(t),"watch"!==F&&(Y=null,I=null),u.resolve().then((()=>{const t="watch"===F,e=el>=2;t||(Y=null,I=null),!t&&e&&($n(),Co(),ne.reset(),Gn(),ne.resolve()),e&&document.documentElement.classList.toggle("tabview-normal-player",t)})),gt>0){const t=document.querySelector("#movie_player video[src]");let e=!1;t&&t.readyState>t.HAVE_CURRENT_DATA&&t.currentTime>2.2&&(e=!0),e||(vt=203,gt=0,delete document.head.dataset.viTime)}e()})))}),At),document.addEventListener("yt-navigate-finish",(function(t){go=0,2===el&&(el=3,ll.lockWith((t=>{"watch"===F&&Lo(),t()})))}),At),zn("yt-page-data-fetched",0),zn("yt-page-data-updated",0),zn("yt-player-updated",0),zn("yt-watch-comments-ready",0),zn("yt-page-type-changed",0),zn("data-changed",0),zn("yt-navigate-finish",0),zn("yt-navigate-redirect",0),zn("yt-navigate-error",0),zn("yt-navigate-start",0),zn("yt-page-manager-navigate-start",0),zn("yt-navigate",0),zn("yt-navigate-cache",0);const al=jt();window.addEventListener("resize",(function(t){if(!0===t.isTrusted){let t=al.inc();u.resolve(0).then((()=>{t===al.valueOf()&&setTimeout((()=>{t===al.valueOf()&&(al.set(0),il(),ke())}),160)}))}}),At),document.addEventListener("tyt-chat-popup",(t=>{let e=(t||0).detail;if(!e)return;const{popuped:n}=e;if("boolean"!=typeof n)return;let o=xt.ytdFlexy;o&&(o.classList.toggle("tyt-chat-popup",n),!0===n?(Be=!0,cn()):(Be=!1,sn()))}));let cl=!1;document.addEventListener("keyup",(t=>{t&&t.target&&t.key&&cl&&(t.shiftKey&&0!=t.key.indexOf("Shift")||(cl=!1))})),document.addEventListener("keydown",(t=>{if(t&&t.target&&t.key&&t.shiftKey&&0==t.key.indexOf("Arrow"))try{!cl&&window.getSelection().isCollapsed||(t.stopImmediatePropagation(),t.stopPropagation(),cl=!0)}catch(t){}}),!0);let sl=!1;if(document.addEventListener("click",(function(){sl=!0,ht&&!ft&&sl&&Go&&It().then(wo)})),document.addEventListener("ytd-comments-data-changed",(function(t){!1===(t.detail||0).hasData&&Co(),An(!0),Ln()}),!0),document.addEventListener("ytd-comments-header-changed",(function(){const t=An(!0);t&&!0===t.newFound&&1===t.length&&t[0].isLatest&&t[0].isNew&&ie.resolved&&nt.new&&(nt.fetched=!1,G.comments_section_loaded=0),Ln()}),!0),document.addEventListener("tabview-plugin-loaded",(()=>{se.resolve(),fe(document,"tabview-miniview-browser-enable")}),!1),"undefined"!=typeof GM&&!b()&&"function"==typeof GM_registerMenuCommand){let gl=null;function wl(){const t={dialogBackgroundColor:"#f6f6f6",dialogBackgroundColorDark:"#23252a",backdropColor:"#b5b5b568",textColor:"#111111",textColorDark:"#f0f3f4",zIndex:6e4,fontSize:"10pt",dialogMinWidth:"32px",dialogMinHeight:"24px"};class e extends VanillaJSDialog{get themeProps(){return t}isDarkTheme(){return document.documentElement.hasAttribute("dark")}onBeforeShow(){const t=this.es;"checkboxSelectionDisplay"in t&&(t.checkboxSelectionDisplay.textContent="");const e=t=>{for(const e of document.getElementsByName("tabview-tab-default"))e.checked=e.value===t};!function(t){if(t){let n=t[J];if(n&&"string"==typeof n&&/^\#[a-zA-Z\_\-\+]+$/.test(n)){if(document.querySelector(`.tab-btn[tyt-tab-content="${n}"]`))return e(n)}else;}else;e(null)}(jo())}onFirstCreation(){const t=this.S;t.widgets.icon=e=>t.ce("i",{className:"vjsd-icon fa-solid fa-"+e}),t.importCSS("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css#sha512=SgaqKKxJDQ/tAUAAXzvxZz33rmn7leYDYfBP+YoMRSENhf3zJyx3SBASt/OfeQwBHA1nxMis7mM3EV/oYT6Fdw==","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/solid.min.css#sha512=yDUXOUWwbHH4ggxueDnC5vJv4tmfySpVdIcN1LksGZi8W8EVZv4uKGrQc0pVf66zS7LDhFJM7Zdeow1sw1/8Jw=="),this.themeSetup()}init(){const t=this.S,e=this.es;e.dialog=t.ce("div",{className:"vjsd-dialog"},{__vjsd__:""}),e.dialog.append(e.header=t.ce("div",{className:"vjsd-dialog-header vjsd-hflex"}),e.body=t.ce("div",{className:"vjsd-dialog-body vjsd-gap-2 vjsd-overscroll-none vjsd-vflex"}),e.footer=t.ce("div",{className:"vjsd-dialog-footer vjsd-hflex"})),e.header.append(t.widgets.icon("circle-info",(t=>{})),t.widgets.title("Tabview Youtube - Change Default Tab",{className:"vjsd-flex-fill"}),t.widgets.buttonIcon("square-xmark",{"vjsd-clickable":"#dialogXmark"}));const n=()=>{let t=[...document.getElementsByName("tabview-tab-default")].filter((t=>t.checked)).map((t=>t.value));console.assert(t.length<=1),e.checkboxSelectionDisplay.textContent=1===t.length?`The default tab will be set to ${t[0]}`:"The default tab will be reset."};e.body.append(t.widgets.labeledRadio("vjsd-checkbox1 vjsd-checkbox-tick","Info",((t,o)=>{o.name="tabview-tab-default",o.value="#tab-info",e.checkbox1=o,o.addEventListener("change",n),t.style.fontSize="200%"})),t.widgets.labeledRadio("vjsd-checkbox1 vjsd-checkbox-tick","Comment",((t,o)=>{o.name="tabview-tab-default",o.value="#tab-comments",e.checkbox2=o,o.addEventListener("change",n),t.style.fontSize="200%"})),t.widgets.labeledRadio("vjsd-checkbox1 vjsd-checkbox-tick","Video",((t,o)=>{o.name="tabview-tab-default",o.value="#tab-videos",e.checkbox3=o,o.addEventListener("change",n),t.style.fontSize="200%"})),e.checkboxSelectionDisplay=t.ce("div",{className:"vjsd-custom-widget"}));e.footer.append(e.clearButton=t.widgets.button("Clear",{"vjsd-clickable":"#clear"}),t.widgets.space(),t.widgets.button("Cancel",{"vjsd-clickable":"#cancel"}),t.widgets.button("Confirm",{"vjsd-clickable":"#confirm"})),this.clickable("#cancel",(()=>{this.dismiss()})),this.clickable("#clear",(()=>{e.checkbox1.checked=!1,e.checkbox2.checked=!1,e.checkbox3.checked=!1,n()})),this.clickable("#confirm",(()=>{let t=null;for(const e of document.getElementsByName("tabview-tab-default"))e.checked&&(t=e.value);t=t||null,console.log(t),Ao(t),this.dismiss()})),this.clickable("#dialogXmark",(()=>{this.dismiss()})),this.backdrop="dismiss",document.body.appendChild(e.dialog)}}return e.setup1(),new e}GM_registerMenuCommand("Change Default Tab",(function(){gl=gl||wl(),gl.show()}))}ro("#tabview-controller",(()=>{})),document.documentElement.appendChild(document.createElement("tabview-controller")).id="tabview-tabs-hide-controller",document.documentElement.appendChild(document.createElement("tabview-controller")).id="tabview-default-tab-controller",document.documentElement.setAttribute("plugin-tabview-youtube","2022/12/04"),document.documentElement.getAttribute("tabview-unwrapjs")&&document.dispatchEvent(new CustomEvent("tabview-plugin-loaded"))}({requestAnimationFrame:"function"==typeof webkitRequestAnimationFrame?webkitRequestAnimationFrame:requestAnimationFrame,cancelAnimationFrame:"function"==typeof webkitRequestAnimationFrame?webkitRequestAnimationFrame:requestAnimationFrame})}(async()=>{"use strict";const t=[{id:"tabview-css-content",resTag:"contentCSS"},{id:"tabview-css-chat",resTag:"chatCSS"},{id:"tabview-css-control",resTag:"controlCSS"}],e=(async()=>{})().constructor,n=t.map((t=>(t=t.resTag,GM_getResourceText(t)||GM.getResourceText(t)||""))),o=await e.all(n);null===document.documentElement&&await new e((t=>{let e=new MutationObserver((()=>{e&&null!==document.documentElement&&(e.disconnect(),e.takeRecords(),e=null,t())}));e.observe(document,{childList:!0,subtree:!0})}));const l=document.head||document.documentElement;let r=0;for(const e of t){const t=o[r++];if(t){const n=document.createElement("style");n.id=e.id,n.textContent=t,l.appendChild(n)}}main()})();