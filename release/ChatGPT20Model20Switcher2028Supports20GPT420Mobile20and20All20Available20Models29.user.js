// ==UserScript==
// @name               ChatGPT Model Switcher (Supports GPT-4 Mobile and All Available Models)
// @name:zh-CN         ChatGPT 模型切换器（支持 GPT-4 Mobile 及所有可用模型）
// @name:zh-TW         ChatGPT 模型切换器（支持 GPT-4 Mobile 及所有可用模型）
// @namespace          https://github.com/hydrotho/ChatGPT_Model_Switcher
// @version            2.4.0
// @author             Hydrotho
// @description        Use the GPT-4 Mobile model on the ChatGPT web interface. It also provides the ability to switch to other models for added flexibility. Generally, this script does not conflict with other popular ChatGPT scripts.
// @description:zh-CN  在 ChatGPT 网页端使用 GPT-4 Mobile 模型。同时，它还提供了切换到其他模型的功能，以提供更大的灵活性。一般来说，该脚本不会与其他流行的 ChatGPT 脚本产生冲突。
// @description:zh-TW  在 ChatGPT 网页端使用 GPT-4 Mobile 模型。同时，它还提供了切换到其他模型的功能，以提供更大的灵活性。一般来说，该脚本不会与其他流行的 ChatGPT 脚本产生冲突。
// @license            MIT
// @copyright          2023, Hydrotho (https://github.com/hydrotho)
// @icon               data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAH1UExURUxpcXeqn3WqnHWonHSpnHWonHWpnG22knWpnHWpnHSmm3apm3SpnHWonHWpnHSonHWpnHWpm3apnXWpnHWpm3WpnP///8fc19fm43mrn67Nxf7///r8+6HFvNPk4JS8ssXb1XirnsDY0sPa1Pj7+qbHv5i/tXeqnvz9/X6uoo65roq2q+Tu7P3+/qrKwqDEu9bm4vP39qfIwPv9/NXl4ezz8Xqsn+nx73msn5/Dusnd2N7q59zp5pC6r4CwpKLFvIOxpszf2oSypsTa1fn7+/P49t/r6JrAt8LZ1L/X0d3q53aqnczf287h3Ie0qc7g3Pr8/LTQybDOxpvBuObv7c/h3PX5+Ory8ODr6OPt65G7sLnTzYWzp/n7+oi1qv7+/tTk4J7Cucve2Z3Cub7X0H+vo8LZ053CuKnJwff6+tnn4/3+/fD29XytoYWzqJe+tJa+tHapnHeqnaHEu8vf2oGxpazLw3utoMre2ZW9s7XRyu/19H2uou/186XHv6jJwNDi3sjd2OLt6u308ufw7tfm4rjTzK3MxOjw7tvp5dHi3sjd15m/tvL39q/Nxvb5+OPu64y3rIOyptnn5LbSy+Ds6eHs6tbl4cHZ0/v8/H6vo4GwpZ7Dus/h3fb6+ZK7sfT49/f6+aLFvavLw6zLxM3g28bc1pQLf2QAAAAVdFJOUwAtv5bz1PQH/dUuj5WQ/CyYwJHykqKEGP8AAAAJcEhZcwAAAHYAAAB2AU57JggAAAIcSURBVDjLhdNle9swEABgFdK0Kw7uHMfp6iTeAksaThpoUmZuV1x5zMxbx8wM7Xj7nZNjx/L2rNl9kXR6H51snwmhsWFTWQn8FSWGygKihLGmFP4ZpUXG7P5GWDcKZVEDeaKC1mfnHxUvoSV19YQOVFWTLdpiUfJ2POx/jOEzAy4tWU7KctPG95FpOjT0IA2PT80aSHEOpKQ5mSUxIA7bD2OzI5vdTNTt1QXBDvAxMT/7qkE+h8PdyoYC+DX0YgYyX4W+FwBunqYOhpp0YAl/1eN22Or5DPD8Jd6sBTiOZgYa8SfUysAMH+wWW/AK3ndbUWRADKUVMGIex1YrRGcs3uvYxcCzKVCAJTb66FZsFGDXTgHPMjD2WgWcFeCkHd/uoOshj0MD16QoLOI2+Q406ifpPXh4gisaOIXD4JiZXUoqwARx/Ab80zB7TJMzmK17nr4BK2eCOnocJGMMBBH9tO6FqYhveUJSwZsxBrpRDDltl6G3G7/8+K6AtLOZARu65hYwcLfL8s4l30EGCTzGwH6MA3Tew9u0Tp1HBmYOT+u+xZ62nl4AB91uGRQ+ZWAZ53HQqgMwgn3n6BC90+bl0nLJB51qH+QaphUD3EWuHVNuuhiQwlrPaS3n6zhEW+2G3I3TkSE3A5XalG860o/j/sSkcGAf62tS8MdvFfe3Oyf2tugyhBRB3qC/XuF/ADFWVOUHhFSXG4rXA78BYbiLJDUXqsMAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=
// @supportURL         https://github.com/hydrotho/ChatGPT_Model_Switcher/issues
// @match              http*://chat.openai.com/*
// @match              http*://chatgpt.com/*
// @require            https://cdn.jsdelivr.net/npm/vue@3.4.27/dist/vue.global.prod.js#sha256-VMrHpvwhhCKPXCaAPunCoWMozbWKGCjzejy8voYbGOs=
// @grant              none
// @run-at             document-start
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/ChatGPT20Model20Switcher2028Supports20GPT420Mobile20and20All20Available20Models29.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/ChatGPT20Model20Switcher2028Supports20GPT420Mobile20and20All20Available20Models29.meta.js
// ==/UserScript==
!function(e){"use strict";let t=0;function n(){return++t}function l(e){var t;if(null==e)return null;if(null==e.value)return null;let n=null!=(t=e.value.$el)?t:e.value;return n instanceof Node?n:null}function o(e,t,...n){if(e in t){let l=t[e];return"function"==typeof l?l(...n):l}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,o),l}var r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let u=new class{constructor(){a(this,"current",this.detect()),a(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}};function i(e){if(u.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null==e?void 0:e.hasOwnProperty("value")){let t=l(e);if(t)return t.ownerDocument}return document}let s=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var d=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(d||{}),c=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(c||{});function p(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(s)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var f=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(f||{});function v(e,t=0){var n;return e!==(null==(n=i(e))?void 0:n.body)&&o(t,{0:()=>e.matches(s),1(){let t=e;for(;null!==t;){if(t.matches(s))return!0;t=t.parentElement}return!1}})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let m=["textarea","input"].join(",");function h(e,t,{sorted:n=!0,relativeTo:l=null,skipElements:o=[]}={}){var r;let a=null!=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?r:document,u=Array.isArray(e)?n?function(e,t=e=>e){return e.slice().sort(((e,n)=>{let l=t(e),o=t(n);if(null===l||null===o)return 0;let r=l.compareDocumentPosition(o);return r&Node.DOCUMENT_POSITION_FOLLOWING?-1:r&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}(e):e:p(e);o.length>0&&u.length>1&&(u=u.filter((e=>!o.includes(e)))),l=null!=l?l:a.activeElement;let i,s=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,u.indexOf(l))-1;if(4&t)return Math.max(0,u.indexOf(l))+1;if(8&t)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},f=0,v=u.length;do{if(f>=v||f+v<=0)return 0;let e=d+f;if(16&t)e=(e+v)%v;else{if(e<0)return 3;if(e>=v)return 1}i=u[e],null==i||i.focus(c),f+=s}while(i!==a.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,m))&&n}(i)&&i.select(),2}function g(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0||/Android/gi.test(window.navigator.userAgent)}function b(t,n,l){u.isServer||e.watchEffect((e=>{document.addEventListener(t,n,l),e((()=>document.removeEventListener(t,n,l)))}))}function y(t,n,l){u.isServer||e.watchEffect((e=>{window.addEventListener(t,n,l),e((()=>window.removeEventListener(t,n,l)))}))}function w(e,t){if(e)return e;let n=null!=t?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function S(t,n){let o=e.ref(w(t.value.type,t.value.as));return e.onMounted((()=>{o.value=w(t.value.type,t.value.as)})),e.watchEffect((()=>{var e;o.value||l(n)&&l(n)instanceof HTMLButtonElement&&!(null==(e=l(n))?void 0:e.hasAttribute("type"))&&(o.value="button")})),o}var P=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(P||{});function E({visible:e=!0,features:t=0,ourProps:n,theirProps:l,...r}){var a;let u=C(l,n),i=Object.assign(r,{props:u});if(e)return k(i);if(2&t&&u.static)return k(i);if(1&t){return o(null==(a=u.unmount)||a?0:1,{0:()=>null,1:()=>k({...r,props:{...u,hidden:!0,style:{display:"none"}}})})}return k(i)}function k({props:t,attrs:n,slots:l,slot:o,name:r}){var a,u;let{as:i,...s}=N(t,["unmount","static"]),d=null==(a=l.default)?void 0:a.call(l,o),c={};if(o){let e=!1,t=[];for(let[n,l]of Object.entries(o))"boolean"==typeof l&&(e=!0),!0===l&&t.push(n);e&&(c["data-headlessui-state"]=t.join(" "))}if("template"===i){if(d=x(null!=d?d:[]),Object.keys(s).length>0||Object.keys(n).length>0){let[t,...l]=null!=d?d:[];if(null==(p=t)||"string"!=typeof p.type&&"object"!=typeof p.type&&"function"!=typeof p.type||l.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(s).concat(Object.keys(n)).map((e=>e.trim())).filter(((e,t,n)=>n.indexOf(e)===t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let o=C(null!=(u=t.props)?u:{},s,c),a=e.cloneVNode(t,o,!0);for(let e in o)e.startsWith("on")&&(a.props||(a.props={}),a.props[e]=o[e]);return a}return Array.isArray(d)&&1===d.length?d[0]:d}var p;return e.h(i,Object.assign({},s,c),{default:()=>d})}function x(t){return t.flatMap((t=>t.type===e.Fragment?x(t.children):[t]))}function C(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let l of e)for(let e in l)e.startsWith("on")&&"function"==typeof l[e]?(null!=n[e]||(n[e]=[]),n[e].push(l[e])):t[e]=l[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map((e=>[e,void 0]))));for(let e in n)Object.assign(t,{[e](t,...l){let o=n[e];for(let e of o){if(t instanceof Event&&t.defaultPrevented)return;e(t,...l)}}});return t}function O(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function N(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}var T=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(T||{});let B=e.defineComponent({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:n})=>()=>{var l;let{features:o,...r}=e;return E({ourProps:{"aria-hidden":!(2&~o)||(null!=(l=r["aria-hidden"])?l:void 0),hidden:!(4&~o)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~o)&&!!(2&~o)&&{display:"none"}}},theirProps:r,slot:{},attrs:n,slots:t,name:"Hidden"})}}),j=Symbol("Context");var F=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(F||{});function I(){return e.inject(j,null)}var L=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(L||{});var M=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(M||{});function A(){let t=e.ref(0);return y("keydown",(e=>{"Tab"===e.key&&(t.value=e.shiftKey?1:0)})),t}let D=Symbol("ForcePortalRootContext");e.defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(t,{slots:n,attrs:l})=>(e.provide(D,t.force),()=>{let{force:e,...o}=t;return E({theirProps:o,ourProps:{},slot:{},slots:n,attrs:l,name:"ForcePortalRoot"})})});let V=Symbol("DescriptionContext");function R(e){let t=i(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let l=t.createElement("div");return l.setAttribute("id","headlessui-portal-root"),t.body.appendChild(l)}e.defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"},id:{type:String,default:()=>`headlessui-description-${n()}`}},setup(t,{attrs:n,slots:l}){let o=function(){let t=e.inject(V,null);if(null===t)throw new Error("Missing parent");return t}();return e.onMounted((()=>e.onUnmounted(o.register(t.id)))),()=>{let{name:r="Description",slot:a=e.ref({}),props:u={}}=o,{id:i,...s}=t;return E({ourProps:{...Object.entries(u).reduce(((t,[n,l])=>Object.assign(t,{[n]:e.unref(l)})),{}),id:i},theirProps:s,slot:a.value,attrs:n,slots:l,name:r})}}}),e.defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:n,attrs:o}){let r=e.ref(null),a=e.computed((()=>i(r))),u=e.inject(D,!1),s=e.inject($,null),d=e.ref(!0===u||null==s?R(r.value):s.resolveTarget()),c=e.ref(!1);e.onMounted((()=>{c.value=!0})),e.watchEffect((()=>{u||null!=s&&(d.value=s.resolveTarget())}));let p=e.inject(_,null),f=!1,v=e.getCurrentInstance();return e.watch(r,(()=>{if(f)return;if(!p)return;let t=l(r);t&&(e.onUnmounted(p.register(t),v),f=!0)})),e.onUnmounted((()=>{var e,t;let n=null==(e=a.value)?void 0:e.getElementById("headlessui-portal-root");n&&d.value===n&&d.value.children.length<=0&&(null==(t=d.value.parentElement)||t.removeChild(d.value))})),()=>{if(!c.value)return null;if(null===d.value)return null;let l={ref:r,"data-headlessui-portal":""};return e.h(e.Teleport,{to:d.value},E({ourProps:l,theirProps:t,slot:{},attrs:o,slots:n,name:"Portal"}))}}});let _=Symbol("PortalParentContext");let $=Symbol("PortalGroupContext");e.defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:n,slots:l}){let o=e.reactive({resolveTarget:()=>t.target});return e.provide($,o),()=>{let{target:e,...o}=t;return E({theirProps:o,ourProps:{},slot:{},attrs:n,slots:l,name:"PortalGroup"})}}});let G=Symbol("PopoverContext");function H(t){let n=e.inject(G,null);if(null===n){let e=new Error(`<${t} /> is missing a parent <${q.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,H),e}return n}let U=Symbol("PopoverGroupContext");function W(){return e.inject(U,null)}let K=Symbol("PopoverPanelContext");let q=e.defineComponent({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:n,attrs:r,expose:a}){var s;let d=e.ref(null);a({el:d,$el:d});let c=e.ref(1),m=e.ref(null),h=e.ref(null),w=e.ref(null),S=e.ref(null),P=e.computed((()=>i(d))),k=e.computed((()=>{var e,t;if(!l(m))return!1;if(!l(S))return!1;for(let e of document.querySelectorAll("body > *"))if(Number(null==e?void 0:e.contains(l(m)))^Number(null==e?void 0:e.contains(l(S))))return!0;let n=p(),o=n.indexOf(l(m)),r=(o+n.length-1)%n.length,a=(o+1)%n.length,u=n[r],i=n[a];return!(null==(e=l(S))?void 0:e.contains(u))&&!(null==(t=l(S))?void 0:t.contains(i))})),x={popoverState:c,buttonId:e.ref(null),panelId:e.ref(null),panel:S,button:m,isPortalled:k,beforePanelSentinel:h,afterPanelSentinel:w,togglePopover(){c.value=o(c.value,{0:1,1:0})},closePopover(){1!==c.value&&(c.value=1)},close(e){x.closePopover();let t=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?l(e):l(x.button):l(x.button);null==t||t.focus()}};var C;e.provide(G,x),C=e.computed((()=>o(c.value,{0:F.Open,1:F.Closed}))),e.provide(j,C);let O={buttonId:x.buttonId,panelId:x.panelId,close(){x.closePopover()}},N=W(),I=null==N?void 0:N.registerPopover,[L,M]=function(){let t=e.inject(_,null),n=e.ref([]);function l(e){let l=n.value.indexOf(e);-1!==l&&n.value.splice(l,1),t&&t.unregister(e)}let o={register:function(e){return n.value.push(e),t&&t.register(e),()=>l(e)},unregister:l,portals:n};return[n,e.defineComponent({name:"PortalWrapper",setup:(t,{slots:n})=>(e.provide(_,o),()=>{var e;return null==(e=n.default)?void 0:e.call(n)})})]}(),A=function({defaultContainers:t=[],portals:n,mainTreeNodeRef:o}={}){let r=e.ref(null),a=i(r);function u(){var e,o,u;let i=[];for(let e of t)null!==e&&(e instanceof HTMLElement?i.push(e):"value"in e&&e.value instanceof HTMLElement&&i.push(e.value));if(null==n?void 0:n.value)for(let e of n.value)i.push(e);for(let t of null!=(e=null==a?void 0:a.querySelectorAll("html > *, body > *"))?e:[])t!==document.body&&t!==document.head&&t instanceof HTMLElement&&"headlessui-portal-root"!==t.id&&(t.contains(l(r))||t.contains(null==(u=null==(o=l(r))?void 0:o.getRootNode())?void 0:u.host)||i.some((e=>t.contains(e)))||i.push(t));return i}return{resolveContainers:u,contains:e=>u().some((t=>t.contains(e))),mainTreeNodeRef:r,MainTreeNode:()=>null!=o?null:e.h(B,{features:T.Hidden,ref:r})}}({mainTreeNodeRef:null==N?void 0:N.mainTreeNodeRef,portals:L,defaultContainers:[m,S]});var D,V,R,$;return e.watchEffect((()=>null==I?void 0:I(O))),D=null==(s=P.value)?void 0:s.defaultView,V="focus",R=e=>{var t,n;e.target!==window&&e.target instanceof HTMLElement&&0===c.value&&(function(){var e,t,n,o;return null!=(o=null==N?void 0:N.isFocusWithinPopoverGroup())?o:(null==(e=P.value)?void 0:e.activeElement)&&((null==(t=l(m))?void 0:t.contains(P.value.activeElement))||(null==(n=l(S))?void 0:n.contains(P.value.activeElement)))}()||m&&S&&(A.contains(e.target)||(null==(t=l(x.beforePanelSentinel))?void 0:t.contains(e.target))||(null==(n=l(x.afterPanelSentinel))?void 0:n.contains(e.target))||x.closePopover()))},$=!0,u.isServer||e.watchEffect((e=>{(D=null!=D?D:window).addEventListener(V,R,$),e((()=>D.removeEventListener(V,R,$)))})),function(t,n,o=e.computed((()=>!0))){function r(e,r){if(!o.value)return;if(e.defaultPrevented)return;let a=r(e);if(null===a)return;if(!a.getRootNode().contains(a))return;let u=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of u){if(null===t)continue;let n=t instanceof HTMLElement?t:l(t);if(null==n?void 0:n.contains(a))return;if(e.composed&&e.composedPath().includes(n))return}return v(a,f.Loose)||-1===a.tabIndex||e.preventDefault(),n(e,a)}let a=e.ref(null);b("pointerdown",(e=>{var t,n;o.value&&(a.value=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),b("mousedown",(e=>{var t,n;o.value&&(a.value=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),b("click",(e=>{g()||a.value&&(r(e,(()=>a.value)),a.value=null)}),!0),b("touchend",(e=>r(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),y("blur",(e=>r(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}(A.resolveContainers,((e,t)=>{var n;x.closePopover(),v(t,f.Loose)||(e.preventDefault(),null==(n=l(m))||n.focus())}),e.computed((()=>0===c.value))),()=>{let l={open:0===c.value,close:x.close};return e.h(e.Fragment,[e.h(M,{},(()=>E({theirProps:{...t,...r},ourProps:{ref:d},slot:l,slots:n,attrs:r,name:"Popover"}))),e.h(A.MainTreeNode)])}}}),J=e.defineComponent({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${n()}`}},inheritAttrs:!1,setup(t,{attrs:r,slots:a,expose:u}){let s=H("PopoverButton"),f=e.computed((()=>i(s.button)));u({el:s.button,$el:s.button}),e.onMounted((()=>{s.buttonId.value=t.id})),e.onUnmounted((()=>{s.buttonId.value=null}));let v=W(),m=null==v?void 0:v.closeOthers,g=e.inject(K,null),b=e.computed((()=>null!==g&&g.value===s.panelId.value)),y=e.ref(null),w=`headlessui-focus-sentinel-${n()}`;b.value||e.watchEffect((()=>{s.button.value=l(y)}));let P=S(e.computed((()=>({as:t.as,type:r.type}))),y);function k(e){var t,n,o,r,a;if(b.value){if(1===s.popoverState.value)return;switch(e.key){case L.Space:case L.Enter:e.preventDefault(),null==(n=(t=e.target).click)||n.call(t),s.closePopover(),null==(o=l(s.button))||o.focus()}}else switch(e.key){case L.Space:case L.Enter:e.preventDefault(),e.stopPropagation(),1===s.popoverState.value&&(null==m||m(s.buttonId.value)),s.togglePopover();break;case L.Escape:if(0!==s.popoverState.value)return null==m?void 0:m(s.buttonId.value);if(!l(s.button))return;if((null==(r=f.value)?void 0:r.activeElement)&&!(null==(a=l(s.button))?void 0:a.contains(f.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),s.closePopover()}}function x(e){b.value||e.key===L.Space&&e.preventDefault()}function C(e){var n,o;t.disabled||(b.value?(s.closePopover(),null==(n=l(s.button))||n.focus()):(e.preventDefault(),e.stopPropagation(),1===s.popoverState.value&&(null==m||m(s.buttonId.value)),s.togglePopover(),null==(o=l(s.button))||o.focus()))}function O(e){e.preventDefault(),e.stopPropagation()}let N=A();function j(){let e=l(s.panel);e&&o(N.value,{[M.Forwards]:()=>h(e,d.First),[M.Backwards]:()=>h(e,d.Last)})===c.Error&&h(p().filter((e=>"true"!==e.dataset.headlessuiFocusGuard)),o(N.value,{[M.Forwards]:d.Next,[M.Backwards]:d.Previous}),{relativeTo:l(s.button)})}return()=>{let n=0===s.popoverState.value,o={open:n},{id:u,...i}=t,d=b.value?{ref:y,type:P.value,onKeydown:k,onClick:C}:{ref:y,id:u,type:P.value,"aria-expanded":0===s.popoverState.value,"aria-controls":l(s.panel)?s.panelId.value:void 0,disabled:!!t.disabled||void 0,onKeydown:k,onKeyup:x,onClick:C,onMousedown:O};return e.h(e.Fragment,[E({ourProps:d,theirProps:{...r,...i},slot:o,attrs:r,slots:a,name:"PopoverButton"}),n&&!b.value&&s.isPortalled.value&&e.h(B,{id:w,features:T.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:j})])}}});e.defineComponent({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:l,slots:o}){let r=H("PopoverOverlay"),a=`headlessui-popover-overlay-${n()}`,u=I(),i=e.computed((()=>null!==u?(u.value&F.Open)===F.Open:0===r.popoverState.value));function s(){r.closePopover()}return()=>{let e={open:0===r.popoverState.value};return E({ourProps:{id:a,"aria-hidden":!0,onClick:s},theirProps:t,slot:e,attrs:l,slots:o,features:P.RenderStrategy|P.Static,visible:i.value,name:"PopoverOverlay"})}}});let z=e.defineComponent({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${n()}`}},inheritAttrs:!1,setup(t,{attrs:r,slots:a,expose:u}){let{focus:s}=t,f=H("PopoverPanel"),v=e.computed((()=>i(f.panel))),m=`headlessui-focus-sentinel-before-${n()}`,g=`headlessui-focus-sentinel-after-${n()}`;u({el:f.panel,$el:f.panel}),e.onMounted((()=>{f.panelId.value=t.id})),e.onUnmounted((()=>{f.panelId.value=null})),e.provide(K,f.panelId),e.watchEffect((()=>{var e,t;if(!s)return;if(0!==f.popoverState.value)return;if(!f.panel)return;let n=null==(e=v.value)?void 0:e.activeElement;(null==(t=l(f.panel))?void 0:t.contains(n))||h(l(f.panel),d.First)}));let b=I(),y=e.computed((()=>null!==b?(b.value&F.Open)===F.Open:0===f.popoverState.value));function w(e){var t,n;if(e.key===L.Escape){if(0!==f.popoverState.value)return;if(!l(f.panel))return;if(v.value&&!(null==(t=l(f.panel))?void 0:t.contains(v.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),f.closePopover(),null==(n=l(f.button))||n.focus()}}function S(e){var t,n,o,r,a;let u=e.relatedTarget;u&&l(f.panel)&&((null==(t=l(f.panel))?void 0:t.contains(u))||(f.closePopover(),((null==(o=null==(n=l(f.beforePanelSentinel))?void 0:n.contains)?void 0:o.call(n,u))||(null==(a=null==(r=l(f.afterPanelSentinel))?void 0:r.contains)?void 0:a.call(r,u)))&&u.focus({preventScroll:!0})))}let k=A();function x(){let e=l(f.panel);e&&o(k.value,{[M.Forwards]:()=>{var t;h(e,d.First)===c.Error&&(null==(t=l(f.afterPanelSentinel))||t.focus())},[M.Backwards]:()=>{var e;null==(e=l(f.button))||e.focus({preventScroll:!0})}})}function C(){let e=l(f.panel);e&&o(k.value,{[M.Forwards]:()=>{let e=l(f.button),t=l(f.panel);if(!e)return;let n=p(),o=n.indexOf(e),r=n.slice(0,o+1),a=[...n.slice(o+1),...r];for(let e of a.slice())if("true"===e.dataset.headlessuiFocusGuard||(null==t?void 0:t.contains(e))){let t=a.indexOf(e);-1!==t&&a.splice(t,1)}h(a,d.First,{sorted:!1})},[M.Backwards]:()=>{var t;h(e,d.Previous)===c.Error&&(null==(t=l(f.button))||t.focus())}})}return()=>{let n={open:0===f.popoverState.value,close:f.close},{id:l,focus:o,...u}=t;return E({ourProps:{ref:f.panel,id:l,onKeydown:w,onFocusout:s&&0===f.popoverState.value?S:void 0,tabIndex:-1},theirProps:{...r,...u},attrs:r,slot:n,slots:{...a,default:(...t)=>{var n;return[e.h(e.Fragment,[y.value&&f.isPortalled.value&&e.h(B,{id:m,ref:f.beforePanelSentinel,features:T.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:x}),null==(n=a.default)?void 0:n.call(a,...t),y.value&&f.isPortalled.value&&e.h(B,{id:g,ref:f.afterPanelSentinel,features:T.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C})])]}},features:P.RenderStrategy|P.Static,visible:y.value,name:"PopoverPanel"})}}});e.defineComponent({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:n,slots:o,expose:r}){let a=e.ref(null),u=e.shallowRef([]),s=e.computed((()=>i(a))),d=function(){let t=e.ref(null);return{mainTreeNodeRef:t,MainTreeNode:()=>e.h(B,{features:T.Hidden,ref:t})}}();function c(e){let t=u.value.indexOf(e);-1!==t&&u.value.splice(t,1)}return r({el:a,$el:a}),e.provide(U,{registerPopover:function(e){return u.value.push(e),()=>{c(e)}},unregisterPopover:c,isFocusWithinPopoverGroup:function(){var e;let t=s.value;if(!t)return!1;let n=t.activeElement;return!!(null==(e=l(a))?void 0:e.contains(n))||u.value.some((e=>{var l,o;return(null==(l=t.getElementById(e.buttonId.value))?void 0:l.contains(n))||(null==(o=t.getElementById(e.panelId.value))?void 0:o.contains(n))}))},closeOthers:function(e){for(let t of u.value)t.buttonId.value!==e&&t.close()},mainTreeNodeRef:d.mainTreeNodeRef}),()=>{let l={ref:a};return e.h(e.Fragment,[E({ourProps:l,theirProps:{...t,...n},slot:{},attrs:n,slots:o,name:"PopoverGroup"}),e.h(d.MainTreeNode)])}}});let X=Symbol("LabelContext");function Z(){let t=e.inject(X,null);if(null===t){let e=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Z),e}return t}e.defineComponent({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${n()}`}},setup(t,{slots:n,attrs:l}){let o=Z();return e.onMounted((()=>e.onUnmounted(o.register(t.id)))),()=>{let{name:r="Label",slot:a={},props:u={}}=o,{id:i,passive:s,...d}=t,c={...Object.entries(u).reduce(((t,[n,l])=>Object.assign(t,{[n]:e.unref(l)})),{}),id:i};return s&&(delete c.onClick,delete c.htmlFor,delete d.onClick),E({ourProps:c,theirProps:d,slot:a,attrs:l,slots:n,name:r})}}});let Y=Symbol("GroupContext");e.defineComponent({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:n,attrs:l}){let o=e.ref(null),r=function({slot:t={},name:n="Label",props:l={}}={}){let o=e.ref([]);return e.provide(X,{register:function(e){return o.value.push(e),()=>{let t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)}},slot:t,name:n,props:l}),e.computed((()=>o.value.length>0?o.value.join(" "):void 0))}({name:"SwitchLabel",props:{htmlFor:e.computed((()=>{var e;return null==(e=o.value)?void 0:e.id})),onClick(e){o.value&&("LABEL"===e.currentTarget.tagName&&e.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),a=function({slot:t=e.ref({}),name:n="Description",props:l={}}={}){let o=e.ref([]);return e.provide(V,{register:function(e){return o.value.push(e),()=>{let t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)}},slot:t,name:n,props:l}),e.computed((()=>o.value.length>0?o.value.join(" "):void 0))}({name:"SwitchDescription"}),u={switchRef:o,labelledby:r,describedby:a};return e.provide(Y,u),()=>E({theirProps:t,ourProps:{},slot:{},slots:n,attrs:l,name:"SwitchGroup"})}});let Q=e.defineComponent({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${n()}`},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(t,{emit:n,attrs:o,slots:r,expose:a}){let u=e.inject(Y,null),[i,s]=function(t,n,l){let o=e.ref(null==l?void 0:l.value),r=e.computed((()=>void 0!==t.value));return[e.computed((()=>r.value?t.value:o.value)),function(e){return r.value||(o.value=e),null==n?void 0:n(e)}]}(e.computed((()=>t.modelValue)),(e=>n("update:modelValue",e)),e.computed((()=>t.defaultChecked)));function d(){s(!i.value)}let c=e.ref(null),p=null===u?c:u.switchRef,f=S(e.computed((()=>({as:t.as,type:o.type}))),p);function v(e){e.preventDefault(),d()}function m(e){e.key===L.Space?(e.preventDefault(),d()):e.key===L.Enter&&function(e){var t,n;let l=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(l){for(let t of l.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(n=l.requestSubmit)||n.call(l)}}(e.currentTarget)}function h(e){e.preventDefault()}a({el:p,$el:p});let g=e.computed((()=>{var e,t;return null==(t=null==(e=l(p))?void 0:e.closest)?void 0:t.call(e,"form")}));return e.onMounted((()=>{e.watch([g],(()=>{if(g.value&&void 0!==t.defaultChecked)return g.value.addEventListener("reset",e),()=>{var t;null==(t=g.value)||t.removeEventListener("reset",e)};function e(){s(t.defaultChecked)}}),{immediate:!0})})),()=>{let{id:n,name:l,value:a,form:s,tabIndex:d,...c}=t,g={checked:i.value},b={id:n,ref:p,role:"switch",type:f.value,tabIndex:-1===d?0:d,"aria-checked":i.value,"aria-labelledby":null==u?void 0:u.labelledby.value,"aria-describedby":null==u?void 0:u.describedby.value,onClick:v,onKeyup:m,onKeypress:h};return e.h(e.Fragment,[null!=l&&null!=i.value?e.h(B,O({features:T.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:i.value,form:s,disabled:c.disabled,name:l,value:a})):null,E({ourProps:b,theirProps:{...o,...N(c,["modelValue","defaultChecked"])},slot:g,attrs:o,slots:r,name:"Switch"})])}}});const ee=(e,t)=>{const n=e.__vccOpts||e;for(const[e,l]of t)n[e]=l;return n},te={class:"my-1.5 border-b border-token-border-light"};const ne=ee({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("div",te)}]]),le={},oe={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re=[e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10Z",fill:"currentColor",opacity:"0.16"},null,-1)];const ae=ee(le,[["render",function(t,n){return e.openBlock(),e.createElementBlock("svg",oe,re)}]]),ue={},ie={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se=[e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10ZM14.0755 5.93219C14.5272 6.25003 14.6356 6.87383 14.3178 7.32549L9.56781 14.0755C9.39314 14.3237 9.11519 14.4792 8.81226 14.4981C8.50934 14.517 8.21422 14.3973 8.01006 14.1727L5.51006 11.4227C5.13855 11.014 5.16867 10.3816 5.57733 10.0101C5.98598 9.63855 6.61843 9.66867 6.98994 10.0773L8.65042 11.9039L12.6822 6.17451C13 5.72284 13.6238 5.61436 14.0755 5.93219Z",fill:"currentColor"},null,-1)];const de=ee(ue,[["render",function(t,n){return e.openBlock(),e.createElementBlock("svg",ie,se)}]]),ce={class:"flex grow items-center justify-between gap-2"},pe={class:"flex items-center gap-3"},fe={class:"text-token-text-tertiary"},ve={__name:"ModelItem",props:{title:{type:String,required:!0},description:{type:String,required:!0},isSelected:{type:Boolean,default:!1}},setup:t=>(n,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["flex gap-2 m-1.5 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group !pr-3",{"!opacity-100":t.isSelected}])},[e.createElementVNode("div",ce,[e.createElementVNode("div",null,[e.createElementVNode("div",pe,[e.createElementVNode("div",null,[e.createTextVNode(e.toDisplayString(t.title)+" ",1),e.createElementVNode("div",fe,e.toDisplayString(t.description),1)])])]),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.isSelected?de:ae),{class:"icon-md flex-shrink-0"}))])],2))},me={},he={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"},ge=[e.createElementVNode("path",{d:"M11.3346 7.83203L8.00131 11.1654L4.66797 7.83203",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)];const be=ee(me,[["render",function(t,n){return e.openBlock(),e.createElementBlock("svg",he,ge)}]]),ye=[{slug:"text-davinci-002-render-sha-mobile",title:"GPT-3.5 (Mobile)",description:"An experimental model that does not guarantee usability",tags:["gpt3.5","mobile","unofficial"]},{slug:"gpt-4-mobile",title:"GPT-4 (Mobile)",description:"An experimental model that does not guarantee usability",tags:["gpt4","mobile","unofficial"]}],we=e.reactive({all:[],update(e){this.all=e.concat(ye.filter((t=>e.some((e=>e.tags.includes("gpt4")))||!t.tags.includes("gpt4"))))}}),Se="github.com/hydrotho/ChatGPT_Model_Switcher";const Pe=e.reactive(function(){const e={isEnabled:!1,selectedModelSlug:"text-davinci-002-render-sha"};try{const e=localStorage.getItem(Se);if(e)return JSON.parse(e)}catch(e){console.warn("[ChatGPT_Model_Switcher]","Failed to restore state from localStorage, falling back to default state")}return localStorage.setItem(Se,JSON.stringify(e)),e}());e.watch(Pe,(e=>{localStorage.setItem(Se,JSON.stringify(e))}));const Ee={__name:"App",setup(t){const n=e.ref(),l=e.ref(),o=e.computed((()=>[we.all.filter((e=>e.tags.includes("gpt3.5")&&!e.tags.includes("unofficial"))),we.all.filter((e=>e.tags.includes("gpt4")&&!e.tags.includes("unofficial"))),we.all.filter((e=>e.tags.includes("unofficial")))].filter((e=>e.length>0))));return e.onMounted((async()=>{const e=n.value.getBoundingClientRect();l.value={position:"fixed",right:document.documentElement.clientWidth-e.right+"px",top:`${e.bottom}px`}})),(t,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(Q),{modelValue:e.unref(Pe).isEnabled,"onUpdate:modelValue":r[0]||(r[0]=t=>e.unref(Pe).isEnabled=t),class:e.normalizeClass(["cursor-pointer relative shrink-0 rounded-full h-[20px] w-[32px]",e.unref(Pe).isEnabled?"bg-green-600":"bg-gray-200"])},{default:e.withCtx((()=>[e.createElementVNode("span",{class:"flex items-center justify-center rounded-full transition-transform duration-100 will-change-transform bg-white shadow-[0_1px_2px_rgba(0,0,0,0.45)] h-[16px] w-[16px]",style:e.normalizeStyle(e.unref(Pe).isEnabled?"transform: translateX(14px)":"transform: translateX(0.125rem)")},null,4)])),_:1},8,["modelValue","class"]),e.createVNode(e.unref(q),{class:"relative"},{default:e.withCtx((()=>[e.createVNode(e.unref(J),{class:"group flex cursor-pointer items-center gap-1 rounded-xl py-2 px-3 text-lg font-medium hover:bg-token-main-surface-secondary"},{default:e.withCtx((()=>[e.createTextVNode(" ChatGPT Model Switcher "),e.createVNode(be,{class:"text-token-text-tertiary"})])),_:1}),e.createElementVNode("div",{ref_key:"anchorPopoverPanel",ref:n,class:"absolute right-0"},null,512),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:e.withCtx((()=>[e.createVNode(e.unref(z),{class:"popover mt-2 min-w-[340px] max-w-xs overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary shadow-lg",style:e.normalizeStyle(l.value)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(t=>(e.openBlock(),e.createBlock(ve,{key:t.slug,title:t.title,description:t.description,isSelected:t.slug===e.unref(Pe).selectedModelSlug,onClick:e=>{return n=t.slug,void(Pe.selectedModelSlug=n);var n}},null,8,["title","description","isSelected","onClick"])))),128)),n<o.value.length-1?(e.openBlock(),e.createBlock(ne,{key:n})):e.createCommentVNode("",!0)],64)))),256))])),_:1},8,["style"])])),_:1})]))])),_:1})],64))}};let ke=null;function xe(t){ke&&(ke.unmount(),ke=null);const n=document.createElement("div");n.className="flex items-center gap-2",n.id="chatgpt-model-switcher";const l=document.createElement("div");l.className="flex gap-2 pr-1",l.appendChild(n),l.appendChild(t.removeChild(t.lastChild)),t.appendChild(l),ke=e.createApp(Ee),ke.mount(n)}new MutationObserver((e=>{for(const t of e)if("childList"===t.type){const e=document.querySelector("main div.sticky");if(e&&Array.from(e.childNodes).some((e=>e.hasChildNodes()))&&!document.getElementById("chatgpt-model-switcher")){xe(e);break}}})).observe(document.body,{subtree:!0,childList:!0});window.fetch=new Proxy(window.fetch,{apply:async function(e,t,n){let l=n[0],o=n[1];if(Pe.isEnabled&&l.endsWith("/backend-api/conversation")&&"POST"===o.method){const e=JSON.parse(o.body);e.model=Pe.selectedModelSlug,o={...o,body:JSON.stringify(e)},n[0]=l,n[1]=o}const r=Reflect.apply(e,t,n);return l.includes("/backend-api/models")&&"GET"===o.method?async function(e){return e.then((async e=>{if(e.ok){const t=await e.clone().json();we.update(t.models)}return e}))}(r):r}})}(Vue);