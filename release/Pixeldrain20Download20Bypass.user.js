// ==UserScript==
// @name         Pixeldrain Download Bypass
// @namespace    http://tampermonkey.net/
// @version      1.6.2
// @description  Bypass Pixeldrain Download Limit
// @author       MegaLime0, honey, Nurarihyon
// @match        https://pixeldrain.com/*
// @match        https://cdn.pd8.workers.dev/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pixeldrain.com
// @grant        GM_openInTab
// @downloadURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/Pixeldrain20Download20Bypass.user.js
// @updateURL https://raw.githubusercontent.com/s0uboxxx/Userscripts-GCC/release/release/Pixeldrain20Download20Bypass.meta.js
// ==/UserScript==
!function(){"use strict";const e="https://pd.cybar.xyz/",t=/\/api\/file\/(\w+)\//;function n(n){const o=window.location.href;if("file"==n){const t=o.replace("https://pixeldrain.com/u/","");return e+t}if("gallery"==n){const n=document.querySelectorAll("a.file"),o=[],l=[];return n.forEach((n=>{const c=n.querySelector("div").style.backgroundImage.match(t);if(c&&c.length>1){const t=e+c[1];o.push(t),l.push(n.textContent)}})),{bypassUrlList:o,bypassUrlNames:l}}}function o(e){GM_openInTab(e)}if(window.location.href.includes("pixeldrain.com")){const e=document.createElement("button"),t=document.createElement("a");t.className="icon",t.textContent="download",t.style.color="#d7dde8";const l=document.createElement("span");l.textContent="Download Bypass",e.appendChild(t),e.appendChild(l);const c=document.createElement("button"),i=document.createElement("i");i.className="icon",i.textContent="link";const s=document.createElement("span");s.textContent="Show Bypass Links",c.appendChild(i),c.appendChild(s);const d=document.createElement("div");d.style.zIndex=20,d.style.whiteSpace="pre-line",d.id="popupBox",d.style.display="none",d.style.position="fixed",d.style.top="50%",d.style.left="50%",d.style.transform="translate(-50%, -50%)",d.style.padding="20px",d.style.background="#2f3541",d.style.border="2px solid #a4be8c",d.style.color="#d7dde8",d.style.borderRadius="10px",d.style.width="30%",d.style.height="auto",d.style.maxWidth="600px",e.addEventListener("click",(function(){const e=window.location.href;e.includes("https://pixeldrain.com/u/")&&o(n("file"));e.includes("https://pixeldrain.com/l/")&&n("gallery").bypassUrlList.forEach((e=>{o(e)}))})),c.addEventListener("click",(function(){const e=document.getElementById("popupBox"),t=document.createElement("span");t.innerHTML="&times;",t.style.position="absolute",t.style.top="1px",t.style.right="7px",t.style.cursor="pointer",t.onclick=function(){e.style.display="none"},e.innerHTML="",e.appendChild(t);const o=window.location.href;if(o.includes("https://pixeldrain.com/u/")){const t=n("file"),o=document.createElement("a");o.href=t,o.textContent=t,e.appendChild(o)}if(o.includes("https://pixeldrain.com/l/")){let t=n("gallery"),o=t.bypassUrlList;t.bypassUrlNames;const l=document.createElement("div");l.style.maxHeight="calc(100% - 40px)",l.style.overflowY="auto",l.style.paddingBottom="10px",o.forEach((e=>{const t=document.createElement("a");t.href=e,t.textContent=e,t.style.display="block",l.appendChild(t)})),e.appendChild(l),e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center";const c=document.createElement("div");c.style.display="flex",c.style.justifyContent="center",c.style.marginTop="10px";const i=document.createElement("button");i.textContent="ðŸ”— Copy URL",i.style.marginRight="5px",i.addEventListener("click",(function(){const e=o.join("\n");navigator.clipboard.writeText(e).then((function(){i.textContent="âœ”ï¸ Copied",setTimeout((function(){i.textContent="ðŸ”— Copy URL"}),2500)}),(function(e){console.error("Failed to copy URLs: ",e)}))})),c.appendChild(i);const s=document.createElement("button");s.textContent="ðŸ“„ Save as Text File",s.style.marginLeft="5px",s.addEventListener("click",(function(){const e=document.getElementById("popupBox").querySelectorAll("a");if(e.length>0){const t=window.location.href.match(/\/l\/([^/#?]+)/);if(t&&t.length>1){const n=t[1]+".txt";let o="";e.forEach((e=>{o+=e.href+"\n"}));const l=new Blob([o.trim()],{type:"text/plain"}),c=URL.createObjectURL(l),i=document.createElement("a");i.href=c,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(c)}else console.error("Failed to extract file identifier from URL.")}else console.error("Popup content not found.")})),c.appendChild(s),e.appendChild(c)}e.style.display="block"}));document.querySelectorAll("div.label").forEach((t=>{if("Size"===t.textContent.trim()){const n=t.nextElementSibling;n&&(n.insertAdjacentElement("afterend",c),n.insertAdjacentElement("afterend",e))}})),document.body.appendChild(d)}}();